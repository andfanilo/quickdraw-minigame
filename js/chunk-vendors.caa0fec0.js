(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(t,e,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},"00fd":function(t,e,n){var r=n("9e69"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;function u(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}t.exports=u},"0156":function(t,e,n){var r=n("6d8b");function i(t,e,n){n=n||{};var i=t.coordinateSystem,o=e.axis,a={},s=o.getAxesOnZeroOf()[0],u=o.position,c=s?"onZero":u,l=o.dim,h=i.getRect(),f=[h.x,h.x+h.width,h.y,h.y+h.height],d={left:0,right:1,top:0,bottom:1,onZero:2},p=e.get("offset")||0,g="x"===l?[f[2]-p,f[3]+p]:[f[0]-p,f[1]+p];if(s){var m=s.toGlobalCoord(s.dataToCoord(0));g[d.onZero]=Math.max(Math.min(m,g[1]),g[0])}a.position=["y"===l?g[d[c]]:f[0],"x"===l?g[d[c]]:f[3]],a.rotation=Math.PI/2*("x"===l?0:1);var v={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=v[u],a.labelOffset=s?g[d[u]]-g[d.onZero]:0,e.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),r.retrieve(n.labelInside,e.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection);var y=e.get("axisLabel.rotate");return a.labelRotate="top"===c?-y:y,a.z2=1,a}e.layout=i},"0159":function(t,e,n){const r=n("bbfd"),i=(t,e,n,i)=>{"string"===typeof n&&(i=n,n=void 0);try{return new r(t,n).inc(e,i).version}catch(o){return null}};t.exports=i},"01de":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compose=e.merge=e.$=e.style=e.presets=e.keyframes=e.fontFace=e.insertGlobal=e.insertRule=e.plugins=e.styleSheet=void 0,e.speedy=m,e.simulations=S,e.simulate=C,e.cssLabels=A,e.isLikeRule=j,e.idFor=D,e.css=at,e.rehydrate=ct,e.flush=lt,e.select=ft,e.parent=dt,e.media=pt,e.pseudo=gt,e.active=mt,e.any=vt,e.checked=yt,e.disabled=bt,e.empty=xt,e.enabled=wt,e._default=_t,e.first=Ot,e.firstChild=St,e.firstOfType=Ct,e.fullscreen=kt,e.focus=At,e.hover=Tt,e.indeterminate=Et,e.inRange=jt,e.invalid=Dt,e.lastChild=Mt,e.lastOfType=Nt,e.left=It,e.link=Rt,e.onlyChild=Ft,e.onlyOfType=Pt,e.optional=$t,e.outOfRange=Lt,e.readOnly=zt,e.readWrite=Bt,e.required=Ut,e.right=Wt,e.root=Vt,e.scope=Ht,e.target=qt,e.valid=Gt,e.visited=Xt,e.dir=Yt,e.lang=Kt,e.not=Zt,e.nthChild=Jt,e.nthLastChild=Qt,e.nthLastOfType=te,e.nthOfType=ee,e.after=ne,e.before=re,e.firstLetter=ie,e.firstLine=oe,e.selection=ae,e.backdrop=se,e.placeholder=ue,e.cssFor=ce,e.attribsFor=le;var r=n("320c"),i=f(r),o=n("483a"),a=n("9ac2"),s=n("b5db"),u=f(s),c=n("bf6d"),l=n("03c6"),h=f(l);function f(t){return t&&t.__esModule?t:{default:t}}function d(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=e.styleSheet=new o.StyleSheet;function m(t){return g.speedy(t)}g.inject();var v=e.plugins=g.plugins=new c.PluginSet([c.prefixes,c.contentWrap,c.fallbacks]);v.media=new c.PluginSet,v.fontFace=new c.PluginSet,v.keyframes=new c.PluginSet([c.prefixes,c.fallbacks]);var y=!1,b=!1,x="undefined"!==typeof window,w=y,_=!1,O=!1;function S(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];w=!!t}function C(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=(0,u.default)(e),e?w?e.reduce((function(t,e){return t["data-simulate-"+T(e)]="",t}),{}):(_||(console.warn("can't simulate without once calling simulations(true)"),_=!0),y||b||O||(console.warn("don't use simulation outside dev"),O=!0),{}):{}}var k=y;function A(t){k=!!t}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.toLowerCase().replace(/[^a-z0-9]/g,e)}function E(t){var e=JSON.stringify(t),n=(0,h.default)(e).toString(36);return t.label&&t.label.length>0&&y?T(t.label.join("."),"-")+"-"+n:n}function j(t){var e=Object.keys(t).filter((function(t){return"toString"!==t}));return 1===e.length&&!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(e[0])}function D(t){var e=Object.keys(t).filter((function(t){return"toString"!==t}));if(1!==e.length)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/,r=n.exec(e[0]);if(!r)throw new Error("not a rule");return r[1]}var M=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function N(t){if(-1===t.indexOf(","))return[t];var e,n=[],r=[],i=0;while(e=M.exec(t))switch(e[0]){case"(":i++;break;case")":i--;break;case",":if(i)break;n.push(e.index)}for(e=n.length;e--;)r.unshift(t.slice(n[e]+1)),t=t.slice(0,n[e]);return r.unshift(t),r}function I(t,e){if(!t)return e.replace(/\&/g,"");if(!e)return".css-"+t+",[data-css-"+t+"]";var n=N(e).map((function(e){return e.indexOf("&")>=0?[e.replace(/\&/gm,".css-"+t),e.replace(/\&/gm,"[data-css-"+t+"]")].join(","):".css-"+t+e+",[data-css-"+t+"]"+e})).join(",");return w&&/^\&\:/.exec(e)&&!/\s/.exec(e)&&(n+=",.css-"+t+"[data-simulate-"+T(e)+"],[data-css-"+t+"][data-simulate-"+T(e)+"]"),n}function R(t){var e=t.selector,n=t.style,r=v.transform({selector:e,style:n});return r.selector+"{"+(0,a.createMarkupForStyles)(r.style)+"}"}function F(t){var e=void 0,n=void 0,r=void 0,i=void 0;return Object.keys(t).forEach((function(o){o.indexOf("&")>=0?(n=n||{},n[o]=t[o]):0===o.indexOf("@media")?(r=r||{},r[o]=F(t[o])):0===o.indexOf("@supports")?(i=i||{},i[o]=F(t[o])):"label"===o?t.label.length>0&&(e=e||{},e.label=k?t.label.join("."):""):(e=e||{},e[o]=t[o])})),{plain:e,selects:n,medias:r,supports:i}}function P(t,e){var n=[],r=e.plain,i=e.selects,o=e.medias,a=e.supports;return r&&n.push(R({style:r,selector:I(t)})),i&&Object.keys(i).forEach((function(e){return n.push(R({style:i[e],selector:I(t,e)}))})),o&&Object.keys(o).forEach((function(e){return n.push(e+"{"+P(t,o[e]).join("")+"}")})),a&&Object.keys(a).forEach((function(e){return n.push(e+"{"+P(t,a[e]).join("")+"}")})),n}var $=g.inserted={};function L(t){if(!$[t.id]){$[t.id]=!0;var e=F(t.style),n=P(t.id,e);$[t.id]=!!x||n,n.forEach((function(t){return g.insert(t)}))}}var z=g.registered={};function B(t){z[t.id]||(z[t.id]=t)}function U(t){if(j(t)){var e=z[D(t)];if(null==e)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return e}return t}var W={};function V(t){if(B(t),L(t),W[t.id])return W[t.id];var e=p({},"data-css-"+t.id,k&&t.label||"");return Object.defineProperty(e,"toString",{enumerable:!1,value:function(){return"css-"+t.id}}),W[t.id]=e,e}function H(t){for(var e=[":",".","[",">"," "],n=!1,r=t.charAt(0),i=0;i<e.length;i++)if(r===e[i]){n=!0;break}return n||t.indexOf("&")>=0}function q(t,e){var n=N(t).map((function(t){return t.indexOf("&")>=0?t:"&"+t})),r=N(e).map((function(t){return t.indexOf("&")>=0?t:"&"+t}));return r.reduce((function(t,e){return t.concat(n.map((function(t){return e.replace(/\&/g,t)})))}),[]).join(",")}function G(t,e){return t?"@media "+t.substring(6)+" and "+e.substring(6):e}function X(t){return 0===t.indexOf("@media")}function Y(t){return 0===t.indexOf("@supports")}function K(t,e){return t?"@supports "+t.substring(9)+" and "+e.substring(9):e}function Z(t){for(var e=[],n=0;n<t.length;n++)e=Array.isArray(t[n])?e.concat(Z(t[n])):e.concat(t[n]);return e}var J={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function Q(t,e){var n=e.selector,r=void 0===n?"":n,i=e.mq,o=void 0===i?"":i,a=e.supp,s=void 0===a?"":a,c=e.src,l=void 0===c?{}:c;Array.isArray(l)||(l=[l]),l=Z(l),l.forEach((function(e){if(j(e)){var n=U(e);if("css"!==n.type)throw new Error("cannot merge this rule");e=n.style}e=(0,u.default)(e),e&&e.composes&&Q(t,{selector:r,mq:o,supp:s,src:e.composes}),Object.keys(e||{}).forEach((function(n){if(H(n))J[n]&&J[n].forEach((function(i){return Q(t,{selector:q(r,i),mq:o,supp:s,src:e[n]})})),Q(t,{selector:q(r,n),mq:o,supp:s,src:e[n]});else if(X(n))Q(t,{selector:r,mq:G(o,n),supp:s,src:e[n]});else if(Y(n))Q(t,{selector:r,mq:o,supp:K(s,n),src:e[n]});else if("composes"===n);else{var i=t;s&&(i[s]=i[s]||{},i=i[s]),o&&(i[o]=i[o]||{},i=i[o]),r&&(i[r]=i[r]||{},i=i[r]),"label"===n?k&&(t.label=t.label.concat(e.label)):i[n]=e[n]}}))}))}function tt(t){var e={label:[]};Q(e,{src:t});var n={id:E(e),style:e,label:k?e.label.join("."):"",type:"css"};return V(n)}var et={};Object.defineProperty(et,"toString",{enumerable:!1,value:function(){return"css-nil"}});var nt="undefined"!==typeof WeakMap?[et,new WeakMap,new WeakMap,new WeakMap]:[et],rt=!1;function it(t){return function(e){if(nt[e.length]){var n=nt[e.length],r=0;while(r<e.length-1)n.has(e[r])||n.set(e[r],new WeakMap),n=n.get(e[r]),r++;if(n.has(e[e.length-1])){var i=n.get(e[r]);if(z[i.toString().substring(4)])return i}}var o=t(e);if(nt[e.length]){var a=0,s=nt[e.length];while(a<e.length-1)s=s.get(e[a]),a++;try{s.set(e[a],o)}catch(c){var u;if(y&&!rt)rt=!0,(u=console).warn.apply(u,["failed setting the WeakMap cache for args:"].concat(d(e))),console.warn("this should NOT happen, please file a bug on the github repo.")}}return o}}var ot="undefined"!==typeof WeakMap?it(tt):tt;function at(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e[0]&&e[0].length&&e[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return e=(0,u.default)(e),e?ot(e):et}at.insert=function(t){var e={id:E(t),css:t,type:"raw"};B(e),$[e.id]||(g.insert(e.css),$[e.id]=!!x||[e.css])};e.insertRule=at.insert;at.global=function(t,e){if(e=(0,u.default)(e),e)return at.insert(R({selector:t,style:e}))};e.insertGlobal=at.global;function st(t){if(!$[t.id]){var e=Object.keys(t.keyframes).map((function(e){var n=v.keyframes.transform({id:t.id,name:e,style:t.keyframes[e]});return n.name+"{"+(0,a.createMarkupForStyles)(n.style)+"}"})).join(""),n=["-webkit-","-moz-","-o-",""].map((function(n){return"@"+n+"keyframes "+t.name+"_"+t.id+"{"+e+"}"}));n.forEach((function(t){return g.insert(t)})),$[t.id]=!!x||n}}at.keyframes=function(t,e){e||(e=t,t="animation"),e=(0,u.default)(e)||{};var n={id:E({name:t,kfs:e}),type:"keyframes",name:t,keyframes:e};return B(n),st(n),t+"_"+n.id},at.fontFace=function(t){t=(0,u.default)(t);var e={id:E(t),type:"font-face",font:t};return B(e),ut(e),t.fontFamily};e.fontFace=at.fontFace,e.keyframes=at.keyframes;function ut(t){if(!$[t.id]){var e="@font-face{"+(0,a.createMarkupForStyles)(t.font)+"}";g.insert(e),$[t.id]=!!x||[e]}}function ct(t){(0,i.default)($,t.reduce((function(t,e){return t[e]=!0,t}),{}))}function lt(){$=g.inserted={},z=g.registered={},W={},g.flush(),g.inject()}e.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"};var ht=e.style=at;function ft(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t?at(p({},t,n)):ht(n)}e.$=ft;function dt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return at(p({},t+" &",n))}e.merge=at,e.compose=at;function pt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return at(p({},"@media "+t,n))}function gt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return at(p({},t,n))}function mt(t){return gt(":active",t)}function vt(t){return gt(":any",t)}function yt(t){return gt(":checked",t)}function bt(t){return gt(":disabled",t)}function xt(t){return gt(":empty",t)}function wt(t){return gt(":enabled",t)}function _t(t){return gt(":default",t)}function Ot(t){return gt(":first",t)}function St(t){return gt(":first-child",t)}function Ct(t){return gt(":first-of-type",t)}function kt(t){return gt(":fullscreen",t)}function At(t){return gt(":focus",t)}function Tt(t){return gt(":hover",t)}function Et(t){return gt(":indeterminate",t)}function jt(t){return gt(":in-range",t)}function Dt(t){return gt(":invalid",t)}function Mt(t){return gt(":last-child",t)}function Nt(t){return gt(":last-of-type",t)}function It(t){return gt(":left",t)}function Rt(t){return gt(":link",t)}function Ft(t){return gt(":only-child",t)}function Pt(t){return gt(":only-of-type",t)}function $t(t){return gt(":optional",t)}function Lt(t){return gt(":out-of-range",t)}function zt(t){return gt(":read-only",t)}function Bt(t){return gt(":read-write",t)}function Ut(t){return gt(":required",t)}function Wt(t){return gt(":right",t)}function Vt(t){return gt(":root",t)}function Ht(t){return gt(":scope",t)}function qt(t){return gt(":target",t)}function Gt(t){return gt(":valid",t)}function Xt(t){return gt(":visited",t)}function Yt(t,e){return gt(":dir("+t+")",e)}function Kt(t,e){return gt(":lang("+t+")",e)}function Zt(t,e){var n=t.split(",").map((function(t){return t.trim()})).map((function(t){return":not("+t+")"}));return 1===n.length?gt(":not("+t+")",e):ft(n.join(""),e)}function Jt(t,e){return gt(":nth-child("+t+")",e)}function Qt(t,e){return gt(":nth-last-child("+t+")",e)}function te(t,e){return gt(":nth-last-of-type("+t+")",e)}function ee(t,e){return gt(":nth-of-type("+t+")",e)}function ne(t){return gt("::after",t)}function re(t){return gt("::before",t)}function ie(t){return gt("::first-letter",t)}function oe(t){return gt("::first-line",t)}function ae(t){return gt("::selection",t)}function se(t){return gt("::backdrop",t)}function ue(t){return at({"::placeholder":t})}function ce(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=(0,u.default)(e),e?e.map((function(t){var e={label:[]};return Q(e,{src:t}),P(E(e),F(e)).join("")})).join(""):""}function le(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e=(0,u.default)(e);var r=e?e.map((function(t){D(t);var e=Object.keys(t)[0],n=t[e];return e+'="'+(n||"")+'"'})).join(" "):"";return r}},"01ed":function(t,e,n){var r=n("3eba"),i=n("6d8b"),o=n("2306");n("5aa9"),n("af24"),r.extendComponentView({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new o.Rect({shape:t.coordinateSystem.getRect(),style:i.defaults({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),r.registerPreprocessor((function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}))},"0352":function(t,e,n){var r=n("6cb7"),i=n("b12f"),o=n("0f99"),a=o.detectSourceFormat,s=n("93d0"),u=s.SERIES_LAYOUT_BY_COLUMN;r.extend({type:"dataset",defaultOption:{seriesLayoutBy:u,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){a(this)}}),i.extend({type:"dataset"})},"0366":function(t,e,n){var r=n("1c0b");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"03c6":function(t,e,n){"use strict";function r(t,e){var n=1540483477,r=24,s=e^t.length,u=t.length,c=0;while(u>=4){var l=i(t,c);l=a(l,n),l^=l>>>r,l=a(l,n),s=a(s,n),s^=l,c+=4,u-=4}switch(u){case 3:s^=o(t,c),s^=t.charCodeAt(c+2)<<16,s=a(s,n);break;case 2:s^=o(t,c),s=a(s,n);break;case 1:s^=t.charCodeAt(c),s=a(s,n);break}return s^=s>>>13,s=a(s,n),s^=s>>>15,s>>>0}function i(t,e){return t.charCodeAt(e++)+(t.charCodeAt(e++)<<8)+(t.charCodeAt(e++)<<16)+(t.charCodeAt(e)<<24)}function o(t,e){return t.charCodeAt(e++)+(t.charCodeAt(e++)<<8)}function a(t,e){t|=0,e|=0;var n=65535&t,r=t>>>16,i=n*e+((r*e&65535)<<16)|0;return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"04b8":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},"04f6":function(t,e){var n=32,r=7;function i(t){var e=0;while(t>=n)e|=1&t,t>>=1;return t+e}function o(t,e,n,r){var i=e+1;if(i===n)return 1;if(r(t[i++],t[e])<0){while(i<n&&r(t[i],t[i-1])<0)i++;a(t,e,i)}else while(i<n&&r(t[i],t[i-1])>=0)i++;return i-e}function a(t,e,n){n--;while(e<n){var r=t[e];t[e++]=t[n],t[n--]=r}}function s(t,e,n,r,i){for(r===e&&r++;r<n;r++){var o,a=t[r],s=e,u=r;while(s<u)o=s+u>>>1,i(a,t[o])<0?u=o:s=o+1;var c=r-s;switch(c){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:while(c>0)t[s+c]=t[s+c-1],c--}t[s]=a}}function u(t,e,n,r,i,o){var a=0,s=0,u=1;if(o(t,e[n+i])>0){s=r-i;while(u<s&&o(t,e[n+i+u])>0)a=u,u=1+(u<<1),u<=0&&(u=s);u>s&&(u=s),a+=i,u+=i}else{s=i+1;while(u<s&&o(t,e[n+i-u])<=0)a=u,u=1+(u<<1),u<=0&&(u=s);u>s&&(u=s);var c=a;a=i-u,u=i-c}a++;while(a<u){var l=a+(u-a>>>1);o(t,e[n+l])>0?a=l+1:u=l}return u}function c(t,e,n,r,i,o){var a=0,s=0,u=1;if(o(t,e[n+i])<0){s=i+1;while(u<s&&o(t,e[n+i-u])<0)a=u,u=1+(u<<1),u<=0&&(u=s);u>s&&(u=s);var c=a;a=i-u,u=i-c}else{s=r-i;while(u<s&&o(t,e[n+i+u])>=0)a=u,u=1+(u<<1),u<=0&&(u=s);u>s&&(u=s),a+=i,u+=i}a++;while(a<u){var l=a+(u-a>>>1);o(t,e[n+l])<0?u=l:a=l+1}return u}function l(t,e){var n,i,o=r,a=0,s=0;a=t.length;var l=[];function h(t,e){n[s]=t,i[s]=e,s+=1}function f(){while(s>1){var t=s-2;if(t>=1&&i[t-1]<=i[t]+i[t+1]||t>=2&&i[t-2]<=i[t]+i[t-1])i[t-1]<i[t+1]&&t--;else if(i[t]>i[t+1])break;p(t)}}function d(){while(s>1){var t=s-2;t>0&&i[t-1]<i[t+1]&&t--,p(t)}}function p(r){var o=n[r],a=i[r],l=n[r+1],h=i[r+1];i[r]=a+h,r===s-3&&(n[r+1]=n[r+2],i[r+1]=i[r+2]),s--;var f=c(t[l],t,o,a,0,e);o+=f,a-=f,0!==a&&(h=u(t[o+a-1],t,l,h,h-1,e),0!==h&&(a<=h?g(o,a,l,h):m(o,a,l,h)))}function g(n,i,a,s){var h=0;for(h=0;h<i;h++)l[h]=t[n+h];var f=0,d=a,p=n;if(t[p++]=t[d++],0!==--s)if(1!==i){var g,m,v,y=o;while(1){g=0,m=0,v=!1;do{if(e(t[d],l[f])<0){if(t[p++]=t[d++],m++,g=0,0===--s){v=!0;break}}else if(t[p++]=l[f++],g++,m=0,1===--i){v=!0;break}}while((g|m)<y);if(v)break;do{if(g=c(t[d],l,f,i,0,e),0!==g){for(h=0;h<g;h++)t[p+h]=l[f+h];if(p+=g,f+=g,i-=g,i<=1){v=!0;break}}if(t[p++]=t[d++],0===--s){v=!0;break}if(m=u(l[f],t,d,s,0,e),0!==m){for(h=0;h<m;h++)t[p+h]=t[d+h];if(p+=m,d+=m,s-=m,0===s){v=!0;break}}if(t[p++]=l[f++],1===--i){v=!0;break}y--}while(g>=r||m>=r);if(v)break;y<0&&(y=0),y+=2}if(o=y,o<1&&(o=1),1===i){for(h=0;h<s;h++)t[p+h]=t[d+h];t[p+s]=l[f]}else{if(0===i)throw new Error;for(h=0;h<i;h++)t[p+h]=l[f+h]}}else{for(h=0;h<s;h++)t[p+h]=t[d+h];t[p+s]=l[f]}else for(h=0;h<i;h++)t[p+h]=l[f+h]}function m(n,i,a,s){var h=0;for(h=0;h<s;h++)l[h]=t[a+h];var f=n+i-1,d=s-1,p=a+s-1,g=0,m=0;if(t[p--]=t[f--],0!==--i)if(1!==s){var v=o;while(1){var y=0,b=0,x=!1;do{if(e(l[d],t[f])<0){if(t[p--]=t[f--],y++,b=0,0===--i){x=!0;break}}else if(t[p--]=l[d--],b++,y=0,1===--s){x=!0;break}}while((y|b)<v);if(x)break;do{if(y=i-c(l[d],t,n,i,i-1,e),0!==y){for(p-=y,f-=y,i-=y,m=p+1,g=f+1,h=y-1;h>=0;h--)t[m+h]=t[g+h];if(0===i){x=!0;break}}if(t[p--]=l[d--],1===--s){x=!0;break}if(b=s-u(t[f],l,0,s,s-1,e),0!==b){for(p-=b,d-=b,s-=b,m=p+1,g=d+1,h=0;h<b;h++)t[m+h]=l[g+h];if(s<=1){x=!0;break}}if(t[p--]=t[f--],0===--i){x=!0;break}v--}while(y>=r||b>=r);if(x)break;v<0&&(v=0),v+=2}if(o=v,o<1&&(o=1),1===s){for(p-=i,f-=i,m=p+1,g=f+1,h=i-1;h>=0;h--)t[m+h]=t[g+h];t[p]=l[d]}else{if(0===s)throw new Error;for(g=p-(s-1),h=0;h<s;h++)t[g+h]=l[h]}}else{for(p-=i,f-=i,m=p+1,g=f+1,h=i-1;h>=0;h--)t[m+h]=t[g+h];t[p]=l[d]}else for(g=p-(s-1),h=0;h<s;h++)t[g+h]=l[h]}n=[],i=[],this.mergeRuns=f,this.forceMergeRuns=d,this.pushRun=h}function h(t,e,r,a){r||(r=0),a||(a=t.length);var u=a-r;if(!(u<2)){var c=0;if(u<n)return c=o(t,r,a,e),void s(t,r,a,r+c,e);var h=new l(t,e),f=i(u);do{if(c=o(t,r,a,e),c<f){var d=u;d>f&&(d=f),s(t,r,r+d,r+c,e),c=d}h.pushRun(r,c),h.mergeRuns(),u-=c,r+=c}while(0!==u);h.forceMergeRuns()}}t.exports=h},"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},"0655":function(t,e,n){var r=n("8728"),i=1e-8;function o(t,e){return Math.abs(t-e)<i}function a(t,e,n){var i=0,a=t[0];if(!a)return!1;for(var s=1;s<t.length;s++){var u=t[s];i+=r(a[0],a[1],u[0],u[1],e,n),a=u}var c=t[0];return o(a[0],c[0])&&o(a[1],c[1])||(i+=r(a[0],a[1],c[0],c[1],e,n)),0!==i}e.contain=a},"06ad":function(t,e,n){var r=n("4436"),i=n("41ef"),o=n("6d8b"),a=o.isArrayLike,s=Array.prototype.slice;function u(t,e){return t[e]}function c(t,e,n){t[e]=n}function l(t,e,n){return(e-t)*n+t}function h(t,e,n){return n>.5?e:t}function f(t,e,n,r,i){var o=t.length;if(1===i)for(var a=0;a<o;a++)r[a]=l(t[a],e[a],n);else{var s=o&&t[0].length;for(a=0;a<o;a++)for(var u=0;u<s;u++)r[a][u]=l(t[a][u],e[a][u],n)}}function d(t,e,n){var r=t.length,i=e.length;if(r!==i){var o=r>i;if(o)t.length=i;else for(var a=r;a<i;a++)t.push(1===n?e[a]:s.call(e[a]))}var u=t[0]&&t[0].length;for(a=0;a<t.length;a++)if(1===n)isNaN(t[a])&&(t[a]=e[a]);else for(var c=0;c<u;c++)isNaN(t[a][c])&&(t[a][c]=e[a][c])}function p(t,e,n){if(t===e)return!0;var r=t.length;if(r!==e.length)return!1;if(1===n){for(var i=0;i<r;i++)if(t[i]!==e[i])return!1}else{var o=t[0].length;for(i=0;i<r;i++)for(var a=0;a<o;a++)if(t[i][a]!==e[i][a])return!1}return!0}function g(t,e,n,r,i,o,a,s,u){var c=t.length;if(1===u)for(var l=0;l<c;l++)s[l]=m(t[l],e[l],n[l],r[l],i,o,a);else{var h=t[0].length;for(l=0;l<c;l++)for(var f=0;f<h;f++)s[l][f]=m(t[l][f],e[l][f],n[l][f],r[l][f],i,o,a)}}function m(t,e,n,r,i,o,a){var s=.5*(n-t),u=.5*(r-e);return(2*(e-n)+s+u)*a+(-3*(e-n)-2*s-u)*o+s*i+e}function v(t){if(a(t)){var e=t.length;if(a(t[0])){for(var n=[],r=0;r<e;r++)n.push(s.call(t[r]));return n}return s.call(t)}return t}function y(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function b(t){var e=t[t.length-1].value;return a(e&&e[0])?2:1}function x(t,e,n,o,s,u){var c=t._getter,v=t._setter,x="spline"===e,w=o.length;if(w){var _,O=o[0].value,S=a(O),C=!1,k=!1,A=S?b(o):0;o.sort((function(t,e){return t.time-e.time})),_=o[w-1].time;for(var T=[],E=[],j=o[0].value,D=!0,M=0;M<w;M++){T.push(o[M].time/_);var N=o[M].value;if(S&&p(N,j,A)||!S&&N===j||(D=!1),j=N,"string"===typeof N){var I=i.parse(N);I?(N=I,C=!0):k=!0}E.push(N)}if(u||!D){var R=E[w-1];for(M=0;M<w-1;M++)S?d(E[M],R,A):!isNaN(E[M])||isNaN(R)||k||C||(E[M]=R);S&&d(c(t._target,s),R,A);var F,P,$,L,z,B,U=0,W=0;if(C)var V=[0,0,0,0];var H=function(t,e){var n;if(e<0)n=0;else if(e<W){for(F=Math.min(U+1,w-1),n=F;n>=0;n--)if(T[n]<=e)break;n=Math.min(n,w-2)}else{for(n=U;n<w;n++)if(T[n]>e)break;n=Math.min(n-1,w-2)}U=n,W=e;var r=T[n+1]-T[n];if(0!==r)if(P=(e-T[n])/r,x)if(L=E[n],$=E[0===n?n:n-1],z=E[n>w-2?w-1:n+1],B=E[n>w-3?w-1:n+2],S)g($,L,z,B,P,P*P,P*P*P,c(t,s),A);else{if(C)i=g($,L,z,B,P,P*P,P*P*P,V,1),i=y(V);else{if(k)return h(L,z,P);i=m($,L,z,B,P,P*P,P*P*P)}v(t,s,i)}else if(S)f(E[n],E[n+1],P,c(t,s),A);else{var i;if(C)f(E[n],E[n+1],P,V,1),i=y(V);else{if(k)return h(E[n],E[n+1],P);i=l(E[n],E[n+1],P)}v(t,s,i)}},q=new r({target:t._target,life:_,loop:t._loop,delay:t._delay,onframe:H,ondestroy:n});return e&&"spline"!==e&&(q.easing=e),q}}}var w=function(t,e,n,r){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||u,this._setter=r||c,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};w.prototype={when:function(t,e){var n=this._tracks;for(var r in e)if(e.hasOwnProperty(r)){if(!n[r]){n[r]=[];var i=this._getter(this._target,r);if(null==i)continue;0!==t&&n[r].push({time:0,value:v(i)})}n[r].push({time:t,value:e[r]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){var n,r=this,i=0,o=function(){i--,i||r._doneCallback()};for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=x(this,t,o,this._tracks[a],a,e);s&&(this._clipList.push(s),i++,this.animation&&this.animation.addClip(s),n=s)}if(n){var u=n.onframe;n.onframe=function(t,e){u(t,e);for(var n=0;n<r._onframeList.length;n++)r._onframeList[n](t,e)}}return i||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,r=0;r<e.length;r++){var i=e[r];t&&i.onframe(this._target,1),n&&n.removeClip(i)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var _=w;t.exports=_},"06cf":function(t,e,n){var r=n("83ab"),i=n("d1e7"),o=n("5c6c"),a=n("fc6a"),s=n("c04e"),u=n("5135"),c=n("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},"0777":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),o=n("a3f7"),a=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(o["a"])(t,"real","complex"),s=Object(o["a"])(e,"imag","complex");a["assertShapesMatch"](n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const u=t=>t.complex(n,s),c={real:n,imag:s};return r["a"].runKernelFunc(u,c,null,i["y"])}const c=Object(s["a"])({complex_:u})},"07d6":function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},"0846":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(n("7ad3")),a=n("1309"),s=n("6180"),u=n("8e47");function c(t,e,n={}){return r(this,void 0,void 0,(function*(){let r=e.values;const i=null==e.series?[]:e.series;r=Array.isArray(r[0])?r:[r];const c=[];r.forEach((t,e)=>{const n=null!=i[e]?i[e]:"Series "+(e+1),r=t.map(t=>Object.assign({},t,{series:n}));c.push(...r)}),null!=n.seriesColors&&s.assert(n.seriesColors.length===r.length,"Must have an equal number of series colors as there are data series");const h=u.getDrawArea(t),f=Object.assign({},l,n),d={actions:!1,mode:"vega-lite",defaultStyle:!1},p=()=>f.zoomToFit?{zero:!1}:null!=f.xAxisDomain?{domain:f.xAxisDomain}:void 0,g=()=>f.zoomToFit?{zero:!1}:null!=f.yAxisDomain?{domain:f.yAxisDomain}:void 0,m={width:f.width||a.getDefaultWidth(h),height:f.height||a.getDefaultHeight(h),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:f.fontSize,titleFontSize:f.fontSize},text:{fontSize:f.fontSize},legend:{labelFontSize:f.fontSize,titleFontSize:f.fontSize}},data:{values:c},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:f.xType,title:f.xLabel,scale:p()},y:{field:"y",type:f.yType,title:f.yLabel,scale:g()},color:{field:"series",type:"nominal",scale:{range:f.seriesColors}},shape:{field:"series",type:"nominal"}}};return yield o.default(h,m,d),Promise.resolve()}))}e.scatterplot=c;const l={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},"0982":function(t,e,n){const r=n("3fce"),i=(t,e)=>{try{return new r(t,e).range||"*"}catch(n){return null}};t.exports=i},"0a67":function(t,e,n){const r=n("bbfd"),i=n("a236"),{re:o,t:a}=n("8cb5"),s=(t,e)=>{if(t instanceof r)return t;if("number"===typeof t&&(t=String(t)),"string"!==typeof t)return null;e=e||{};let n=null;if(e.rtl){let e;while((e=o[a.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length))n&&e.index+e[0].length===n.index+n[0].length||(n=e),o[a.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;o[a.COERCERTL].lastIndex=-1}else n=t.match(o[a.COERCE]);return null===n?null:i(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};t.exports=s},"0b44":function(t,e,n){var r=n("607d"),i=function(){this._track=[]};function o(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function a(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}i.prototype={constructor:i,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var i=t.touches;if(i){for(var o={points:[],touches:[],target:e,event:t},a=0,s=i.length;a<s;a++){var u=i[a],c=r.clientToLocal(n,u,{});o.points.push([c.zrX,c.zrY]),o.touches.push(u)}this._track.push(o)}},_recognize:function(t){for(var e in s)if(s.hasOwnProperty(e)){var n=s[e](this._track,t);if(n)return n}}};var s={pinch:function(t,e){var n=t.length;if(n){var r=(t[n-1]||{}).points,i=(t[n-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var s=o(r)/o(i);!isFinite(s)&&(s=1),e.pinchScale=s;var u=a(r);return e.pinchX=u[0],e.pinchY=u[1],{type:"pinch",target:t[0].target,event:e}}}}},u=i;t.exports=u},"0cde":function(t,e,n){var r=n("1687"),i=n("401b"),o=r.identity,a=5e-5;function s(t){return t>a||t<-a}var u=function(t){t=t||{},t.position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},c=u.prototype;c.transform=null,c.needLocalTransform=function(){return s(this.rotation)||s(this.position[0])||s(this.position[1])||s(this.scale[0]-1)||s(this.scale[1]-1)};var l=[];c.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),i=this.transform;if(n||e){i=i||r.create(),n?this.getLocalTransform(i):o(i),e&&(n?r.mul(i,t.transform,i):r.copy(i,t.transform)),this.transform=i;var a=this.globalScaleRatio;if(null!=a&&1!==a){this.getGlobalScale(l);var s=l[0]<0?-1:1,u=l[1]<0?-1:1,c=((l[0]-s)*a+s)/l[0]||0,h=((l[1]-u)*a+u)/l[1]||0;i[0]*=c,i[1]*=c,i[2]*=h,i[3]*=h}this.invTransform=this.invTransform||r.create(),r.invert(this.invTransform,i)}else i&&o(i)},c.getLocalTransform=function(t){return u.getLocalTransform(this,t)},c.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},c.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var h=[],f=r.create();c.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],r=this.position,i=this.scale;s(e-1)&&(e=Math.sqrt(e)),s(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(e=-e),t[3]<0&&(n=-n),r[0]=t[4],r[1]=t[5],i[0]=e,i[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/e)}},c.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(r.mul(h,t.invTransform,e),e=h);var n=this.origin;n&&(n[0]||n[1])&&(f[4]=n[0],f[5]=n[1],r.mul(h,e,f),h[4]-=n[0],h[5]-=n[1],e=h),this.setLocalTransform(e)}},c.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},c.transformCoordToLocal=function(t,e){var n=[t,e],r=this.invTransform;return r&&i.applyTransform(n,n,r),n},c.transformCoordToGlobal=function(t,e){var n=[t,e],r=this.transform;return r&&i.applyTransform(n,n,r),n},u.getLocalTransform=function(t,e){e=e||[],o(e);var n=t.origin,i=t.scale||[1,1],a=t.rotation||0,s=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),r.scale(e,e,i),a&&r.rotate(e,e,a),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=s[0],e[5]+=s[1],e};var d=u;t.exports=d},"0cfb":function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("cc12");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0da8":function(t,e,n){var r=n("19eb"),i=n("9850"),o=n("6d8b"),a=n("5e76");function s(t){r.call(this,t)}s.prototype={constructor:s,type:"image",brush:function(t,e){var n=this.style,r=n.image;n.bind(t,this,e);var i=this._image=a.createOrUpdateImage(r,this._image,this,this.onload);if(i&&a.isImageReady(i)){var o=n.x||0,s=n.y||0,u=n.width,c=n.height,l=i.width/i.height;if(null==u&&null!=c?u=c*l:null==c&&null!=u?c=u/l:null==u&&null==c&&(u=i.width,c=i.height),this.setTransform(t),n.sWidth&&n.sHeight){var h=n.sx||0,f=n.sy||0;t.drawImage(i,h,f,n.sWidth,n.sHeight,o,s,u,c)}else if(n.sx&&n.sy){h=n.sx,f=n.sy;var d=u-h,p=c-f;t.drawImage(i,h,f,d,p,o,s,u,c)}else t.drawImage(i,o,s,u,c);null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new i(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},o.inherits(s,r);var u=s;t.exports=u},"0f99":function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("e0d3")),o=i.makeInner,a=i.getDataItemValue,s=n("6d8b"),u=s.createHashMap,c=s.each,l=s.map,h=s.isArray,f=s.isString,d=s.isObject,p=s.isTypedArray,g=s.isArrayLike,m=s.extend,v=(s.assert,n("ec6f")),y=n("93d0"),b=y.SOURCE_FORMAT_ORIGINAL,x=y.SOURCE_FORMAT_ARRAY_ROWS,w=y.SOURCE_FORMAT_OBJECT_ROWS,_=y.SOURCE_FORMAT_KEYED_COLUMNS,O=y.SOURCE_FORMAT_UNKNOWN,S=y.SOURCE_FORMAT_TYPED_ARRAY,C=y.SERIES_LAYOUT_BY_ROW,k={Must:1,Might:2,Not:3},A=o();function T(t){var e=t.option.source,n=O;if(p(e))n=S;else if(h(e)){0===e.length&&(n=x);for(var r=0,i=e.length;r<i;r++){var o=e[r];if(null!=o){if(h(o)){n=x;break}if(d(o)){n=w;break}}}}else if(d(e)){for(var a in e)if(e.hasOwnProperty(a)&&g(e[a])){n=_;break}}else if(null!=e)throw new Error("Invalid data");A(t).sourceFormat=n}function E(t){return A(t).source}function j(t){A(t).datasetMap=u()}function D(t){var e=t.option,n=e.data,r=p(n)?S:b,i=!1,o=e.seriesLayoutBy,a=e.sourceHeader,s=e.dimensions,u=$(t);if(u){var c=u.option;n=c.source,r=A(u).sourceFormat,i=!0,o=o||c.seriesLayoutBy,null==a&&(a=c.sourceHeader),s=s||c.dimensions}var l=M(n,r,o,a,s);A(t).source=new v({data:n,fromDataset:i,seriesLayoutBy:o,sourceFormat:r,dimensionsDefine:l.dimensionsDefine,startIndex:l.startIndex,dimensionsDetectCount:l.dimensionsDetectCount,encodeDefine:e.encode})}function M(t,e,n,r,i){if(!t)return{dimensionsDefine:N(i)};var o,s;if(e===x)"auto"===r||null==r?I((function(t){null!=t&&"-"!==t&&(f(t)?null==s&&(s=1):s=0)}),n,t,10):s=r?1:0,i||1!==s||(i=[],I((function(t,e){i[e]=null!=t?t:""}),n,t)),o=i?i.length:n===C?t.length:t[0]?t[0].length:null;else if(e===w)i||(i=R(t));else if(e===_)i||(i=[],c(t,(function(t,e){i.push(e)})));else if(e===b){var u=a(t[0]);o=h(u)&&u.length||1}return{startIndex:s,dimensionsDefine:N(i),dimensionsDetectCount:o}}function N(t){if(t){var e=u();return l(t,(function(t,n){if(t=m({},d(t)?t:{name:t}),null==t.name)return t;t.name+="",null==t.displayName&&(t.displayName=t.name);var r=e.get(t.name);return r?t.name+="-"+r.count++:e.set(t.name,{count:1}),t}))}}function I(t,e,n,r){if(null==r&&(r=1/0),e===C)for(var i=0;i<n.length&&i<r;i++)t(n[i]?n[i][0]:null,i);else{var o=n[0]||[];for(i=0;i<o.length&&i<r;i++)t(o[i],i)}}function R(t){var e,n=0;while(n<t.length&&!(e=t[n++]));if(e){var r=[];return c(e,(function(t,e){r.push(e)})),r}}function F(t,e,n){var r={},i=$(e);if(!i||!t)return r;var o,a,s=[],u=[],l=e.ecModel,h=A(l).datasetMap,f=i.uid+"_"+n.seriesLayoutBy;t=t.slice(),c(t,(function(e,n){!d(e)&&(t[n]={name:e}),"ordinal"===e.type&&null==o&&(o=n,a=m(t[n])),r[e.name]=[]}));var p=h.get(f)||h.set(f,{categoryWayDim:a,valueWayDim:0});function g(t,e,n){for(var r=0;r<n;r++)t.push(e+r)}function m(t){var e=t.dimsDef;return e?e.length:1}return c(t,(function(t,e){var n=t.name,i=m(t);if(null==o){var a=p.valueWayDim;g(r[n],a,i),g(u,a,i),p.valueWayDim+=i}else if(o===e)g(r[n],0,i),g(s,0,i);else{a=p.categoryWayDim;g(r[n],a,i),g(u,a,i),p.categoryWayDim+=i}})),s.length&&(r.itemName=s),u.length&&(r.seriesName=u),r}function P(t,e,n){var r={},i=$(t);if(!i)return r;var o,a=e.sourceFormat,s=e.dimensionsDefine;a!==w&&a!==_||c(s,(function(t,e){"name"===(d(t)?t.name:t)&&(o=e)}));var u=function(){for(var t={},r={},i=[],u=0,c=Math.min(5,n);u<c;u++){var l=z(e.data,a,e.seriesLayoutBy,s,e.startIndex,u);i.push(l);var h=l===k.Not;if(h&&null==t.v&&u!==o&&(t.v=u),(null==t.n||t.n===t.v||!h&&i[t.n]===k.Not)&&(t.n=u),f(t)&&i[t.n]!==k.Not)return t;h||(l===k.Might&&null==r.v&&u!==o&&(r.v=u),null!=r.n&&r.n!==r.v||(r.n=u))}function f(t){return null!=t.v&&null!=t.n}return f(t)?t:f(r)?r:null}();if(u){r.value=u.v;var l=null!=o?o:u.n;r.itemName=[l],r.seriesName=[l]}return r}function $(t){var e=t.option,n=e.data;if(!n)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}function L(t,e){return z(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function z(t,e,n,r,i,o){var s,u,c,l=5;if(p(t))return k.Not;if(r){var g=r[o];d(g)?(u=g.name,c=g.type):f(g)&&(u=g)}if(null!=c)return"ordinal"===c?k.Must:k.Not;if(e===x)if(n===C){for(var m=t[o],v=0;v<(m||[]).length&&v<l;v++)if(null!=(s=A(m[i+v])))return s}else for(v=0;v<t.length&&v<l;v++){var y=t[i+v];if(y&&null!=(s=A(y[o])))return s}else if(e===w){if(!u)return k.Not;for(v=0;v<t.length&&v<l;v++){var O=t[v];if(O&&null!=(s=A(O[u])))return s}}else if(e===_){if(!u)return k.Not;m=t[u];if(!m||p(m))return k.Not;for(v=0;v<m.length&&v<l;v++)if(null!=(s=A(m[v])))return s}else if(e===b)for(v=0;v<t.length&&v<l;v++){O=t[v];var S=a(O);if(!h(S))return k.Not;if(null!=(s=A(S[o])))return s}function A(t){var e=f(t);return null!=t&&isFinite(t)&&""!==t?e?k.Might:k.Not:e&&"-"!==t?k.Must:void 0}return k.Not}e.BE_ORDINAL=k,e.detectSourceFormat=T,e.getSource=E,e.resetSourceDefaulter=j,e.prepareSource=D,e.makeSeriesEncodeForAxisCoordSys=F,e.makeSeriesEncodeForNameBased=P,e.guessOrdinal=L},"113e":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},1212:function(t,e,n){(function(t){var r;(function(t,i,o){function a(t){var e=this,n=c();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new a(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}function c(){var t=4022871197,e=function(e){e=e.toString();for(var n=0;n<e.length;n++){t+=e.charCodeAt(n);var r=.02519603282416938*t;t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=4294967296*r}return 2.3283064365386963e-10*(t>>>0)};return e}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.alea=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},1309:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("01de"),i=n("8e47"),o={prepend:!1};function a(t,e,n={}){const a=i.getDrawArea(t),s=r.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),u=r.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),c=Object.assign({},o,n);let l=a.querySelector(`div[data-name=${e}]`);if(!l){if(l=document.createElement("div"),l.setAttribute("class",""+s),l.dataset.name=e,c.title){const t=document.createElement("div");t.setAttribute("class","subsurface-title "+u),t.innerText=c.title,l.appendChild(t)}c.prepend?a.insertBefore(l,a.firstChild):a.appendChild(l)}return l}function s(t){const e=50;let n=0,r=t;while(r&&0===r.clientWidth)r=r.parentElement,n=e;return r.clientWidth-n}function u(t){return 0===t.clientHeight?200:t.clientHeight}e.subSurface=a,e.getDefaultWidth=s,e.getDefaultHeight=u},1310:function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},1334:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("30bf"),i=n("01de");class o extends r.Component{render(){const{tabNames:t,activeTab:e,handleClick:n}=this.props,o=t.length>0?t.map(t=>r.h(a,{key:t,id:t,handleClick:n,isActive:t===e},t)):null,s=i.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return r.h("div",{className:s+" visor-tabs"},o)}}e.Tabs=o;class a extends r.Component{render(){const{children:t,isActive:e,handleClick:n,id:o}=this.props,a=i.css({borderBottomColor:e?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return r.h("a",{className:a+" tf-tab","data-isactive":e,onClick:()=>n(o)},t)}}},"13af":function(t,e,n){const r=n("bbfd"),i=n("3fce"),o=(t,e,n)=>{let o=null,a=null,s=null;try{s=new i(e,n)}catch(u){return null}return t.forEach(t=>{s.test(t)&&(o&&-1!==a.compare(t)||(o=t,a=new r(o,n)))}),o};t.exports=o},1548:function(t,e,n){var r=n("6d8b"),i=n("3301"),o=n("697e"),a=n("2023"),s=n("4319"),u=n("f934");u.getLayoutRect;e.getLayoutRect=u.getLayoutRect;var c=n("ee1a"),l=c.enableDataStack,h=c.isDimensionStacked,f=c.getStackedDimension,d=n("862d");e.completeDimensions=d;var p=n("b1d4");e.createDimensions=p;var g=n("a15a");function m(t){return i(t.getSource(),t)}e.createSymbol=g.createSymbol;var v={isDimensionStacked:h,enableDataStack:l,getStackedDimension:f};function y(t,e){var n=e;s.isInstance(e)||(n=new s(e),r.mixin(n,a));var i=o.createScaleByModel(n);return i.setExtent(t[0],t[1]),o.niceScaleExtent(i,n),i}function b(t){r.mixin(t,a)}e.createList=m,e.dataStack=v,e.createScale=y,e.mixinAxisModelCommonMethods=b},"159b":function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("17c2"),a=n("9112");for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(l){c.forEach=o}}},1687:function(t,e){var n="undefined"===typeof Float32Array?Array:Float32Array;function r(){var t=new n(6);return i(t),t}function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(t,e,n){var r=e[0]*n[0]+e[2]*n[1],i=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],u=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t}function s(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function u(t,e,n){var r=e[0],i=e[2],o=e[4],a=e[1],s=e[3],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*c,t[1]=-r*c+a*l,t[2]=i*l+s*c,t[3]=-i*c+l*s,t[4]=l*o+c*u,t[5]=l*u-c*o,t}function c(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}function l(t,e){var n=e[0],r=e[2],i=e[4],o=e[1],a=e[3],s=e[5],u=n*a-o*r;return u?(u=1/u,t[0]=a*u,t[1]=-o*u,t[2]=-r*u,t[3]=n*u,t[4]=(r*s-a*i)*u,t[5]=(o*i-n*s)*u,t):null}function h(t){var e=r();return o(e,t),e}e.create=r,e.identity=i,e.copy=o,e.mul=a,e.translate=s,e.rotate=u,e.scale=c,e.invert=l,e.clone=h},"17b8":function(t,e,n){var r=n("3014"),i=r.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});t.exports=i},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=n("ae40"),a=i("forEach"),s=o("forEach");t.exports=a&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"18c0":function(t,e,n){var r=n("6d8b"),i=n("e0d8"),o=n("8e43"),a=i.prototype,s=i.extend({type:"ordinal",init:function(t,e){t&&!r.isArray(t)||(t=new o({categories:t})),this._ordinalMeta=t,this._extent=e||[0,t.categories.length-1]},parse:function(t){return"string"===typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){return t=this.parse(t),a.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalize:function(t){return a.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(a.scale.call(this,t))},getTicks:function(){var t=[],e=this._extent,n=e[0];while(n<=e[1])t.push(n),n++;return t},getLabel:function(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:r.noop,niceExtent:r.noop});s.create=function(){return new s};var u=s;t.exports=u},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"19eb":function(t,e,n){var r=n("6d8b"),i=n("2b61"),o=n("d5b7"),a=n("9e2e");function s(t){for(var e in t=t||{},o.call(this,t),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new i(t.style,this),this._rect=null,this.__clipPaths=null}s.prototype={constructor:s,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect();return r.contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?o.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new i(t,this),this.dirty(!1),this},calculateTextPosition:null},r.inherits(s,o),r.mixin(s,a);var u=s;t.exports=u},"1a8c":function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,n){var r=n("b622"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(u){}return n}},"1cc6":function(t,e,n){const r=n("bbfd"),i=(t,e,n)=>{const i=new r(t,n),o=new r(e,n);return i.compare(o)||i.compareBuild(o)};t.exports=i},"1cdc":function(t,e,n){var r=n("342f");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d3b7");function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}},"1dde":function(t,e,n){var r=n("d039"),i=n("b622"),o=n("2d00"),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1e3c":function(t,e,n){"use strict";var r=n("2a44"),i=n.n(r);i.a},"1fab":function(t,e){var n=Array.prototype.slice,r=function(t){this._$handlers={},this._$eventProcessor=t};function i(t,e){var n=t._$eventProcessor;return null!=e&&n&&n.normalizeQuery&&(e=n.normalizeQuery(e)),e}function o(t,e,n,r,o,a){var s=t._$handlers;if("function"===typeof n&&(o=r,r=n,n=null),!r||!e)return t;n=i(t,n),s[e]||(s[e]=[]);for(var u=0;u<s[e].length;u++)if(s[e][u].h===r)return t;var c={h:r,one:a,query:n,ctx:o||t,callAtLast:r.zrEventfulCallAtLast},l=s[e].length-1,h=s[e][l];return h&&h.callAtLast?s[e].splice(l,0,c):s[e].push(c),t}r.prototype={constructor:r,one:function(t,e,n,r){return o(this,t,e,n,r,!0)},on:function(t,e,n,r){return o(this,t,e,n,r,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var r=[],i=0,o=n[t].length;i<o;i++)n[t][i].h!==e&&r.push(n[t][i]);n[t]=r}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){var e=this._$handlers[t],r=this._$eventProcessor;if(e){var i=arguments,o=i.length;o>3&&(i=n.call(i,1));for(var a=e.length,s=0;s<a;){var u=e[s];if(r&&r.filter&&null!=u.query&&!r.filter(t,u.query))s++;else{switch(o){case 1:u.h.call(u.ctx);break;case 2:u.h.call(u.ctx,i[1]);break;case 3:u.h.call(u.ctx,i[1],i[2]);break;default:u.h.apply(u.ctx,i);break}u.one?(e.splice(s,1),a--):s++}}}return r&&r.afterTrigger&&r.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],r=this._$eventProcessor;if(e){var i=arguments,o=i.length;o>4&&(i=n.call(i,1,i.length-1));for(var a=i[i.length-1],s=e.length,u=0;u<s;){var c=e[u];if(r&&r.filter&&null!=c.query&&!r.filter(t,c.query))u++;else{switch(o){case 1:c.h.call(a);break;case 2:c.h.call(a,i[1]);break;case 3:c.h.call(a,i[1],i[2]);break;default:c.h.apply(a,i);break}c.one?(e.splice(u,1),s--):u++}}}return r&&r.afterTrigger&&r.afterTrigger(t),this}};var a=r;t.exports=a},"1fb5":function(t,e,n){"use strict";e.byteLength=l,e.toByteArray=f,e.fromByteArray=g;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function l(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function h(t,e,n){return 3*(e+n)/4-n}function f(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(h(t,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u}function d(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function p(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(d(r));return i.join("")}function g(t){for(var e,n=t.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(p(t,s,s+a>u?u:s+a));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},2023:function(t,e,n){var r=n("6d8b"),i={getMin:function(t){var e=this.option,n=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!==typeof n&&!r.eqNaN(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(t){var e=this.option,n=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!==typeof n&&!r.eqNaN(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:r.noop,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};t.exports=i},2039:function(t,e,n){var r=n("6d8b"),i={};function o(){this._coordinateSystems=[]}o.prototype={constructor:o,create:function(t,e){var n=[];r.each(i,(function(r,i){var o=r.create(t,e);n=n.concat(o||[])})),this._coordinateSystems=n},update:function(t,e){r.each(this._coordinateSystems,(function(n){n.update&&n.update(t,e)}))},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},o.register=function(t,e){i[t]=e},o.get=function(t){return i[t]};var a=o;t.exports=a},"20c8":function(t,e,n){var r=n("4a3f"),i=n("401b"),o=n("e263"),a=n("9850"),s=n("2cf4"),u=s.devicePixelRatio,c={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},l=[],h=[],f=[],d=[],p=Math.min,g=Math.max,m=Math.cos,v=Math.sin,y=Math.sqrt,b=Math.abs,x="undefined"!==typeof Float32Array,w=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};w.prototype={constructor:w,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,n){n=n||0,this._ux=b(n/u/t)||0,this._uy=b(n/u/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(c.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=b(t-this._xi)>this._ux||b(e-this._yi)>this._uy||this._len<5;return this.addData(c.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,r,i,o){return this.addData(c.C,t,e,n,r,i,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,r,i,o):this._ctx.bezierCurveTo(t,e,n,r,i,o)),this._xi=i,this._yi=o,this},quadraticCurveTo:function(t,e,n,r){return this.addData(c.Q,t,e,n,r),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,r):this._ctx.quadraticCurveTo(t,e,n,r)),this._xi=n,this._yi=r,this},arc:function(t,e,n,r,i,o){return this.addData(c.A,t,e,n,n,r,i-r,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,r,i,o),this._xi=m(i)*n+t,this._yi=v(i)*n+e,this},arcTo:function(t,e,n,r,i){return this._ctx&&this._ctx.arcTo(t,e,n,r,i),this},rect:function(t,e,n,r){return this._ctx&&this._ctx.rect(t,e,n,r),this.addData(c.R,t,e,n,r),this},closePath:function(){this.addData(c.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!x||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,r=this._len,i=0;i<e;i++)n+=t[i].len();x&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n));for(i=0;i<e;i++)for(var o=t[i].data,a=0;a<o.length;a++)this.data[r++]=o[a];this._len=r},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,r,i=this._dashSum,o=this._dashOffset,a=this._lineDash,s=this._ctx,u=this._xi,c=this._yi,l=t-u,h=e-c,f=y(l*l+h*h),d=u,m=c,v=a.length;l/=f,h/=f,o<0&&(o=i+o),o%=i,d-=o*l,m-=o*h;while(l>0&&d<=t||l<0&&d>=t||0===l&&(h>0&&m<=e||h<0&&m>=e))r=this._dashIdx,n=a[r],d+=l*n,m+=h*n,this._dashIdx=(r+1)%v,l>0&&d<u||l<0&&d>u||h>0&&m<c||h<0&&m>c||s[r%2?"moveTo":"lineTo"](l>=0?p(d,t):g(d,t),h>=0?p(m,e):g(m,e));l=d-t,h=m-e,this._dashOffset=-y(l*l+h*h)},_dashedBezierTo:function(t,e,n,i,o,a){var s,u,c,l,h,f=this._dashSum,d=this._dashOffset,p=this._lineDash,g=this._ctx,m=this._xi,v=this._yi,b=r.cubicAt,x=0,w=this._dashIdx,_=p.length,O=0;for(d<0&&(d=f+d),d%=f,s=0;s<1;s+=.1)u=b(m,t,n,o,s+.1)-b(m,t,n,o,s),c=b(v,e,i,a,s+.1)-b(v,e,i,a,s),x+=y(u*u+c*c);for(;w<_;w++)if(O+=p[w],O>d)break;s=(O-d)/x;while(s<=1)l=b(m,t,n,o,s),h=b(v,e,i,a,s),w%2?g.moveTo(l,h):g.lineTo(l,h),s+=p[w]/x,w=(w+1)%_;w%2!==0&&g.lineTo(o,a),u=o-l,c=a-h,this._dashOffset=-y(u*u+c*c)},_dashedQuadraticTo:function(t,e,n,r){var i=n,o=r;n=(n+2*t)/3,r=(r+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,r,i,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,x&&(this.data=new Float32Array(t)))},getBoundingRect:function(){l[0]=l[1]=f[0]=f[1]=Number.MAX_VALUE,h[0]=h[1]=d[0]=d[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,n=0,r=0,s=0,u=0;u<t.length;){var p=t[u++];switch(1===u&&(e=t[u],n=t[u+1],r=e,s=n),p){case c.M:r=t[u++],s=t[u++],e=r,n=s,f[0]=r,f[1]=s,d[0]=r,d[1]=s;break;case c.L:o.fromLine(e,n,t[u],t[u+1],f,d),e=t[u++],n=t[u++];break;case c.C:o.fromCubic(e,n,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],f,d),e=t[u++],n=t[u++];break;case c.Q:o.fromQuadratic(e,n,t[u++],t[u++],t[u],t[u+1],f,d),e=t[u++],n=t[u++];break;case c.A:var g=t[u++],y=t[u++],b=t[u++],x=t[u++],w=t[u++],_=t[u++]+w;u+=1;var O=1-t[u++];1===u&&(r=m(w)*b+g,s=v(w)*x+y),o.fromArc(g,y,b,x,w,_,O,f,d),e=m(_)*b+g,n=v(_)*x+y;break;case c.R:r=e=t[u++],s=n=t[u++];var S=t[u++],C=t[u++];o.fromLine(r,s,r+S,s+C,f,d);break;case c.Z:e=r,n=s;break}i.min(l,l,f),i.max(h,h,d)}return 0===u&&(l[0]=l[1]=h[0]=h[1]=0),new a(l[0],l[1],h[0]-l[0],h[1]-l[1])},rebuildPath:function(t){for(var e,n,r,i,o,a,s=this.data,u=this._ux,l=this._uy,h=this._len,f=0;f<h;){var d=s[f++];switch(1===f&&(r=s[f],i=s[f+1],e=r,n=i),d){case c.M:e=r=s[f++],n=i=s[f++],t.moveTo(r,i);break;case c.L:o=s[f++],a=s[f++],(b(o-r)>u||b(a-i)>l||f===h-1)&&(t.lineTo(o,a),r=o,i=a);break;case c.C:t.bezierCurveTo(s[f++],s[f++],s[f++],s[f++],s[f++],s[f++]),r=s[f-2],i=s[f-1];break;case c.Q:t.quadraticCurveTo(s[f++],s[f++],s[f++],s[f++]),r=s[f-2],i=s[f-1];break;case c.A:var p=s[f++],g=s[f++],y=s[f++],x=s[f++],w=s[f++],_=s[f++],O=s[f++],S=s[f++],C=y>x?y:x,k=y>x?1:y/x,A=y>x?x/y:1,T=Math.abs(y-x)>.001,E=w+_;T?(t.translate(p,g),t.rotate(O),t.scale(k,A),t.arc(0,0,C,w,E,1-S),t.scale(1/k,1/A),t.rotate(-O),t.translate(-p,-g)):t.arc(p,g,C,w,E,1-S),1===f&&(e=m(w)*y+p,n=v(w)*x+g),r=m(E)*y+p,i=v(E)*x+g;break;case c.R:e=r=s[f],n=i=s[f+1],t.rect(s[f++],s[f++],s[f++],s[f++]);break;case c.Z:t.closePath(),r=e,i=n}}}},w.CMD=c;var _=w;t.exports=_},"216a":function(t,e,n){var r=n("6d8b"),i=n("3842"),o=n("eda2"),a=n("944e"),s=n("89e3"),u=s.prototype,c=Math.ceil,l=Math.floor,h=1e3,f=60*h,d=60*f,p=24*d,g=function(t,e,n,r){while(n<r){var i=n+r>>>1;t[i][1]<e?n=i+1:r=i}return n},m=s.extend({type:"time",getLabel:function(t){var e=this._stepLvl,n=new Date(t);return o.formatTime(e[0],n,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=p,e[1]+=p),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-p}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var r=this._interval;t.fixMin||(e[0]=i.round(l(e[0]/r)*r)),t.fixMax||(e[1]=i.round(c(e[1]/r)*r))},niceTicks:function(t,e,n){t=t||10;var r=this._extent,o=r[1]-r[0],s=o/t;null!=e&&s<e&&(s=e),null!=n&&s>n&&(s=n);var u=v.length,h=g(v,s,0,u),f=v[Math.min(h,u-1)],d=f[1];if("year"===f[0]){var p=o/d,m=i.nice(p/t,!0);d*=m}var y=this.getSetting("useUTC")?0:60*new Date(+r[0]||+r[1]).getTimezoneOffset()*1e3,b=[Math.round(c((r[0]-y)/d)*d+y),Math.round(l((r[1]-y)/d)*d+y)];a.fixExtent(b,r),this._stepLvl=f,this._interval=d,this._niceExtent=b},parse:function(t){return+i.parseDate(t)}});r.each(["contain","normalize"],(function(t){m.prototype[t]=function(e){return u[t].call(this,this.parse(e))}}));var v=[["hh:mm:ss",h],["hh:mm:ss",5*h],["hh:mm:ss",10*h],["hh:mm:ss",15*h],["hh:mm:ss",30*h],["hh:mm\nMM-dd",f],["hh:mm\nMM-dd",5*f],["hh:mm\nMM-dd",10*f],["hh:mm\nMM-dd",15*f],["hh:mm\nMM-dd",30*f],["hh:mm\nMM-dd",d],["hh:mm\nMM-dd",2*d],["hh:mm\nMM-dd",6*d],["hh:mm\nMM-dd",12*d],["MM-dd\nyyyy",p],["MM-dd\nyyyy",2*p],["MM-dd\nyyyy",3*p],["MM-dd\nyyyy",4*p],["MM-dd\nyyyy",5*p],["MM-dd\nyyyy",6*p],["week",7*p],["MM-dd\nyyyy",10*p],["week",14*p],["week",21*p],["month",31*p],["week",42*p],["month",62*p],["week",70*p],["quarter",95*p],["month",31*p*4],["month",31*p*5],["half-year",380*p/2],["month",31*p*8],["month",31*p*10],["year",380*p]];m.create=function(t){return new m({useUTC:t.ecModel.get("useUTC")})};var y=m;t.exports=y},2266:function(t,e,n){var r=n("825a"),i=n("e95a"),o=n("50c4"),a=n("0366"),s=n("35a1"),u=n("9bdd"),c=function(t,e){this.stopped=t,this.result=e},l=t.exports=function(t,e,n,l,h){var f,d,p,g,m,v,y,b=a(e,n,l?2:1);if(h)f=t;else{if(d=s(t),"function"!=typeof d)throw TypeError("Target is not iterable");if(i(d)){for(p=0,g=o(t.length);g>p;p++)if(m=l?b(r(y=t[p])[0],y[1]):b(t[p]),m&&m instanceof c)return m;return new c(!1)}f=d.call(t)}v=f.next;while(!(y=v.call(f)).done)if(m=u(f,b,y.value,l),"object"==typeof m&&m&&m instanceof c)return m;return new c(!1)};l.stop=function(t){return new c(!0,t)}},"22d1":function(t,e){var n={};n="object"===typeof wx&&"function"===typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"===typeof document&&"undefined"!==typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"===typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:i(navigator.userAgent);var r=n;function i(t){var e={},n={},r=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge\/([\d.]+)/),a=/micromessenger/i.test(t);return r&&(n.firefox=!0,n.version=r[1]),i&&(n.ie=!0,n.version=i[1]),o&&(n.edge=!0,n.version=o[1]),a&&(n.weChat=!0),{browser:n,os:e,node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!==typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!n.ie&&!n.edge,pointerEventsSupported:"onpointerdown"in window&&(n.edge||n.ie&&n.version>=11),domSupported:"undefined"!==typeof document}}t.exports=r},2306:function(t,e,n){var r=n("6d8b"),i=n("342d"),o=n("41ef"),a=n("1687"),s=n("401b"),u=n("cbe5"),c=n("0cde"),l=n("0da8");e.Image=l;var h=n("e1fc");e.Group=h;var f=n("76a5");e.Text=f;var d=n("d9fc");e.Circle=d;var p=n("4aa2");e.Sector=p;var g=n("4573");e.Ring=g;var m=n("87b1");e.Polygon=m;var v=n("d498");e.Polyline=v;var y=n("c7a2");e.Rect=y;var b=n("cb11");e.Line=b;var x=n("ac0f");e.BezierCurve=x;var w=n("8d32");e.Arc=w;var _=n("d4c6");e.CompoundPath=_;var O=n("48a9");e.LinearGradient=O;var S=n("dded");e.RadialGradient=S;var C=n("9850");e.BoundingRect=C;var k=n("392f");e.IncrementalDisplayable=k;var A=n("9cf9"),T=Math.max,E=Math.min,j={},D=1,M={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},N="emphasis",I="normal",R=1,F={},P={};function $(t){return u.extend(t)}function L(t,e){return i.extendFromString(t,e)}function z(t,e){P[t]=e}function B(t){if(P.hasOwnProperty(t))return P[t]}function U(t,e,n,r){var o=i.createFromString(t,e);return n&&("center"===r&&(n=V(n,o.getBoundingRect())),q(o,n)),o}function W(t,e,n){var r=new l({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if("center"===n){var i={width:t.width,height:t.height};r.setStyle(V(e,i))}}});return r}function V(t,e){var n,r=e.width/e.height,i=t.height*r;i<=t.width?n=t.height:(i=t.width,n=i/r);var o=t.x+t.width/2,a=t.y+t.height/2;return{x:o-i/2,y:a-n/2,width:i,height:n}}var H=i.mergePath;function q(t,e){if(t.applyTransform){var n=t.getBoundingRect(),r=n.calculateTransform(e);t.applyTransform(r)}}function G(t){return A.subPixelOptimizeLine(t.shape,t.shape,t.style),t}function X(t){return A.subPixelOptimizeRect(t.shape,t.shape,t.style),t}var Y=A.subPixelOptimize;function K(t){return null!=t&&"none"!==t}var Z=r.createHashMap(),J=0;function Q(t){if("string"!==typeof t)return t;var e=Z.get(t);return e||(e=o.lift(t,-.1),J<1e4&&(Z.set(t,e),J++)),e}function tt(t){if(t.__hoverStlDirty){t.__hoverStlDirty=!1;var e=t.__hoverStl;if(e){var n=t.__cachedNormalStl={};t.__cachedNormalZ2=t.z2;var r=t.style;for(var i in e)null!=e[i]&&(n[i]=r[i]);n.fill=r.fill,n.stroke=r.stroke}else t.__cachedNormalStl=t.__cachedNormalZ2=null}}function et(t){var e=t.__hoverStl;if(e&&!t.__highlighted){var n=t.__zr,r=t.useHoverLayer&&n&&"canvas"===n.painter.type;if(t.__highlighted=r?"layer":"plain",!(t.isGroup||!n&&t.useHoverLayer)){var i=t,o=t.style;r&&(i=n.addHover(t),o=i.style),St(o),r||tt(i),o.extendFrom(e),nt(o,e,"fill"),nt(o,e,"stroke"),Ot(o),r||(t.dirty(!1),t.z2+=D)}}}function nt(t,e,n){!K(e[n])&&K(t[n])&&(t[n]=Q(t[n]))}function rt(t){var e=t.__highlighted;if(e&&(t.__highlighted=!1,!t.isGroup))if("layer"===e)t.__zr&&t.__zr.removeHover(t);else{var n=t.style,r=t.__cachedNormalStl;r&&(St(n),t.setStyle(r),Ot(n));var i=t.__cachedNormalZ2;null!=i&&t.z2-i===D&&(t.z2=i)}}function it(t,e,n){var r,i=I,o=I;t.__highlighted&&(i=N,r=!0),e(t,n),t.__highlighted&&(o=N,r=!0),t.isGroup&&t.traverse((function(t){!t.isGroup&&e(t,n)})),r&&t.__highDownOnUpdate&&t.__highDownOnUpdate(i,o)}function ot(t,e){e=t.__hoverStl=!1!==e&&(t.hoverStyle||e||{}),t.__hoverStlDirty=!0,t.__highlighted&&(t.__cachedNormalStl=null,rt(t),et(t))}function at(t){!lt(this,t)&&!this.__highByOuter&&it(this,et)}function st(t){!lt(this,t)&&!this.__highByOuter&&it(this,rt)}function ut(t){this.__highByOuter|=1<<(t||0),it(this,et)}function ct(t){!(this.__highByOuter&=~(1<<(t||0)))&&it(this,rt)}function lt(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function ht(t,e){ft(t,!0),it(t,ot,e)}function ft(t,e){var n=!1===e;if(t.__highDownSilentOnTouch=t.highDownSilentOnTouch,t.__highDownOnUpdate=t.highDownOnUpdate,!n||t.__highDownDispatcher){var r=n?"off":"on";t[r]("mouseover",at)[r]("mouseout",st),t[r]("emphasis",ut)[r]("normal",ct),t.__highByOuter=t.__highByOuter||0,t.__highDownDispatcher=!n}}function dt(t){return!(!t||!t.__highDownDispatcher)}function pt(t){var e=F[t];return null==e&&R<=32&&(e=F[t]=R++),e}function gt(t,e,n,i,o,a,s){o=o||j;var u,c=o.labelFetcher,l=o.labelDataIndex,h=o.labelDimIndex,f=o.labelProp,d=n.getShallow("show"),p=i.getShallow("show");(d||p)&&(c&&(u=c.getFormattedLabel(l,"normal",null,h,f)),null==u&&(u=r.isFunction(o.defaultText)?o.defaultText(l,o):o.defaultText));var g=d?u:null,m=p?r.retrieve2(c?c.getFormattedLabel(l,"emphasis",null,h,f):null,u):null;null==g&&null==m||(vt(t,n,a,o),vt(e,i,s,o,!0)),t.text=g,e.text=m}function mt(t,e,n){var i=t.style;e&&(St(i),t.setStyle(e),Ot(i)),i=t.__hoverStl,n&&i&&(St(i),r.extend(i,n),Ot(i))}function vt(t,e,n,i,o){return bt(t,e,i,o),n&&r.extend(t,n),t}function yt(t,e,n){var r,i={isRectText:!0};!1===n?r=!0:i.autoColor=n,bt(t,e,i,r)}function bt(t,e,n,i){if(n=n||j,n.isRectText){var o;n.getTextPosition?o=n.getTextPosition(e,i):(o=e.getShallow("position")||(i?null:"inside"),"outside"===o&&(o="top")),t.textPosition=o,t.textOffset=e.getShallow("offset");var a=e.getShallow("rotate");null!=a&&(a*=Math.PI/180),t.textRotation=a,t.textDistance=r.retrieve2(e.getShallow("distance"),i?null:5)}var s,u=e.ecModel,c=u&&u.option.textStyle,l=xt(e);if(l)for(var h in s={},l)if(l.hasOwnProperty(h)){var f=e.getModel(["rich",h]);wt(s[h]={},f,c,n,i)}return t.rich=s,wt(t,e,c,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),t}function xt(t){var e;while(t&&t!==t.ecModel){var n=(t.option||j).rich;if(n)for(var r in e=e||{},n)n.hasOwnProperty(r)&&(e[r]=1);t=t.parentModel}return e}function wt(t,e,n,i,o,a){n=!o&&n||j,t.textFill=_t(e.getShallow("color"),i)||n.color,t.textStroke=_t(e.getShallow("textBorderColor"),i)||n.textBorderColor,t.textStrokeWidth=r.retrieve2(e.getShallow("textBorderWidth"),n.textBorderWidth),o||(a&&(t.insideRollbackOpt=i,Ot(t)),null==t.textFill&&(t.textFill=i.autoColor)),t.fontStyle=e.getShallow("fontStyle")||n.fontStyle,t.fontWeight=e.getShallow("fontWeight")||n.fontWeight,t.fontSize=e.getShallow("fontSize")||n.fontSize,t.fontFamily=e.getShallow("fontFamily")||n.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),a&&i.disableBox||(t.textBackgroundColor=_t(e.getShallow("backgroundColor"),i),t.textPadding=e.getShallow("padding"),t.textBorderColor=_t(e.getShallow("borderColor"),i),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||n.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||n.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||n.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function _t(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function Ot(t){var e,n=t.textPosition,r=t.insideRollbackOpt;if(r&&null==t.textFill){var i=r.autoColor,o=r.isRectText,a=r.useInsideStyle,s=!1!==a&&(!0===a||o&&n&&"string"===typeof n&&n.indexOf("inside")>=0),u=!s&&null!=i;(s||u)&&(e={textFill:t.textFill,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth}),s&&(t.textFill="#fff",null==t.textStroke&&(t.textStroke=i,null==t.textStrokeWidth&&(t.textStrokeWidth=2))),u&&(t.textFill=i)}t.insideRollback=e}function St(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth,t.insideRollback=null)}function Ct(t,e){var n=e&&e.getModel("textStyle");return r.trim([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function kt(t,e,n,r,i,o){"function"===typeof i&&(o=i,i=null);var a=r&&r.isAnimationEnabled();if(a){var s=t?"Update":"",u=r.getShallow("animationDuration"+s),c=r.getShallow("animationEasing"+s),l=r.getShallow("animationDelay"+s);"function"===typeof l&&(l=l(i,r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null)),"function"===typeof u&&(u=u(i)),u>0?e.animateTo(n,u,l||0,c,o,!!o):(e.stopAnimation(),e.attr(n),o&&o())}else e.stopAnimation(),e.attr(n),o&&o()}function At(t,e,n,r,i){kt(!0,t,e,n,r,i)}function Tt(t,e,n,r,i){kt(!1,t,e,n,r,i)}function Et(t,e){var n=a.identity([]);while(t&&t!==e)a.mul(n,t.getLocalTransform(),n),t=t.parent;return n}function jt(t,e,n){return e&&!r.isArrayLike(e)&&(e=c.getLocalTransform(e)),n&&(e=a.invert([],e)),s.applyTransform([],t,e)}function Dt(t,e,n){var r=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),i=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-r:"right"===t?r:0,"top"===t?-i:"bottom"===t?i:0];return o=jt(o,e,n),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function Mt(t,e,n,i){if(t&&e){var o=a(t);e.traverse((function(t){if(!t.isGroup&&t.anid){var e=o[t.anid];if(e){var r=u(t);t.attr(u(e)),At(t,r,n,t.dataIndex)}}}))}function a(t){var e={};return t.traverse((function(t){!t.isGroup&&t.anid&&(e[t.anid]=t)})),e}function u(t){var e={position:s.clone(t.position),rotation:t.rotation};return t.shape&&(e.shape=r.extend({},t.shape)),e}}function Nt(t,e){return r.map(t,(function(t){var n=t[0];n=T(n,e.x),n=E(n,e.x+e.width);var r=t[1];return r=T(r,e.y),r=E(r,e.y+e.height),[n,r]}))}function It(t,e){var n=T(t.x,e.x),r=E(t.x+t.width,e.x+e.width),i=T(t.y,e.y),o=E(t.y+t.height,e.y+e.height);if(r>=n&&o>=i)return{x:n,y:i,width:r-n,height:o-i}}function Rt(t,e,n){e=r.extend({rectHover:!0},e);var i=e.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(i.image=t.slice(8),r.defaults(i,n),new l(e)):U(t.replace("path://",""),e,n,"center")}function Ft(t,e,n,r,i){for(var o=0,a=i[i.length-1];o<i.length;o++){var s=i[o];if(Pt(t,e,n,r,s[0],s[1],a[0],a[1]))return!0;a=s}}function Pt(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,h=s-o,f=$t(l,h,u,c);if(Lt(f))return!1;var d=t-i,p=e-o,g=$t(d,p,u,c)/f;if(g<0||g>1)return!1;var m=$t(d,p,l,h)/f;return!(m<0||m>1)}function $t(t,e,n,r){return t*r-n*e}function Lt(t){return t<=1e-6&&t>=-1e-6}z("circle",d),z("sector",p),z("ring",g),z("polygon",m),z("polyline",v),z("rect",y),z("line",b),z("bezierCurve",x),z("arc",w),e.Z2_EMPHASIS_LIFT=D,e.CACHED_LABEL_STYLE_PROPERTIES=M,e.extendShape=$,e.extendPath=L,e.registerShape=z,e.getShapeClass=B,e.makePath=U,e.makeImage=W,e.mergePath=H,e.resizePath=q,e.subPixelOptimizeLine=G,e.subPixelOptimizeRect=X,e.subPixelOptimize=Y,e.setElementHoverStyle=ot,e.setHoverStyle=ht,e.setAsHighDownDispatcher=ft,e.isHighDownDispatcher=dt,e.getHighlightDigit=pt,e.setLabelStyle=gt,e.modifyLabelStyle=mt,e.setTextStyle=vt,e.setText=yt,e.getFont=Ct,e.updateProps=At,e.initProps=Tt,e.getTransform=Et,e.applyTransform=jt,e.transformDirection=Dt,e.groupTransition=Mt,e.clipPointsByRect=Nt,e.clipRectByRect=It,e.createIcon=Rt,e.linePolygonIntersect=Ft,e.lineLineIntersect=Pt},"23bf":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var r,i,o,a,s;n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return l})),function(t){t["R0"]="R0",t["R1"]="R1",t["R2"]="R2",t["R3"]="R3",t["R4"]="R4",t["R5"]="R5",t["R6"]="R6"}(r||(r={})),function(t){t["float32"]="float32",t["int32"]="int32",t["bool"]="int32",t["complex64"]="complex64"}(i||(i={})),function(t){t["float32"]="float32",t["int32"]="int32",t["bool"]="bool",t["complex64"]="complex64"}(o||(o={})),function(t){t["float32"]="float32",t["int32"]="float32",t["bool"]="float32",t["complex64"]="complex64"}(a||(a={})),function(t){t["float32"]="complex64",t["int32"]="complex64",t["bool"]="complex64",t["complex64"]="complex64"}(s||(s={}));const u={float32:a,int32:i,bool:o,complex64:s};function c(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return u[t][e]}function l(t){return c(t,"int32")}},"23cb":function(t,e,n){var r=n("a691"),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},"23e7":function(t,e,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),a=n("6eeb"),s=n("ce4e"),u=n("e893"),c=n("94ca");t.exports=function(t,e){var n,l,h,f,d,p,g=t.target,m=t.global,v=t.stat;if(l=m?r:v?r[g]||s(g,{}):(r[g]||{}).prototype,l)for(h in e){if(d=e[h],t.noTargetGet?(p=i(l,h),f=p&&p.value):f=l[h],n=c(m?h:g+(v?".":"#")+h,t.forced),!n&&void 0!==f){if(typeof d===typeof f)continue;u(d,f)}(t.sham||f&&f.sham)&&o(d,"sham",!0),a(l,h,d,t)}}},"241c":function(t,e,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},"24df":function(t,e,n){},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),i=n("825a"),o=n("d039"),a=n("ad6d"),s="toString",u=RegExp.prototype,c=u[s],l=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),h=c.name!=s;(l||h)&&r(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},2626:function(t,e,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),a=n("83ab"),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},"26e1":function(t,e,n){var r=n("6d8b"),i=n("e0d3"),o=r.each,a=r.isObject,s=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function u(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=s.length;n<i;n++){var o=s[n],a=e.normal,u=e.emphasis;a&&a[o]&&(t[o]=t[o]||{},t[o].normal?r.merge(t[o].normal,a[o]):t[o].normal=a[o],a[o]=null),u&&u[o]&&(t[o]=t[o]||{},t[o].emphasis?r.merge(t[o].emphasis,u[o]):t[o].emphasis=u[o],u[o]=null)}}function c(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal,o=t[e].emphasis;i&&(n?(t[e].normal=t[e].emphasis=null,r.defaults(t[e],i)):t[e]=i),o&&(t.emphasis=t.emphasis||{},t.emphasis[e]=o)}}function l(t){c(t,"itemStyle"),c(t,"lineStyle"),c(t,"areaStyle"),c(t,"label"),c(t,"labelLine"),c(t,"upperLabel"),c(t,"edgeLabel")}function h(t,e){var n=a(t)&&t[e],r=a(n)&&n.textStyle;if(r)for(var o=0,s=i.TEXT_STYLE_OPTIONS.length;o<s;o++){e=i.TEXT_STYLE_OPTIONS[o];r.hasOwnProperty(e)&&(n[e]=r[e])}}function f(t){t&&(l(t),h(t,"label"),t.emphasis&&h(t.emphasis,"label"))}function d(t){if(a(t)){u(t),l(t),h(t,"label"),h(t,"upperLabel"),h(t,"edgeLabel"),t.emphasis&&(h(t.emphasis,"label"),h(t.emphasis,"upperLabel"),h(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(u(e),f(e));var n=t.markLine;n&&(u(n),f(n));var i=t.markArea;i&&f(i);var o=t.data;if("graph"===t.type){o=o||t.nodes;var s=t.links||t.edges;if(s&&!r.isTypedArray(s))for(var d=0;d<s.length;d++)f(s[d]);r.each(t.categories,(function(t){l(t)}))}if(o&&!r.isTypedArray(o))for(d=0;d<o.length;d++)f(o[d]);e=t.markPoint;if(e&&e.data){var p=e.data;for(d=0;d<p.length;d++)f(p[d])}n=t.markLine;if(n&&n.data){var g=n.data;for(d=0;d<g.length;d++)r.isArray(g[d])?(f(g[d][0]),f(g[d][1])):f(g[d])}"gauge"===t.type?(h(t,"axisLabel"),h(t,"title"),h(t,"detail")):"treemap"===t.type?(c(t.breadcrumb,"itemStyle"),r.each(t.levels,(function(t){l(t)}))):"tree"===t.type&&l(t.leaves)}}function p(t){return r.isArray(t)?t:t?[t]:[]}function g(t){return(r.isArray(t)?t[0]:t)||{}}function m(t,e){o(p(t.series),(function(t){a(t)&&d(t)}));var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),o(n,(function(e){o(p(t[e]),(function(t){t&&(h(t,"axisLabel"),h(t.axisPointer,"label"))}))})),o(p(t.parallel),(function(t){var e=t&&t.parallelAxisDefault;h(e,"axisLabel"),h(e&&e.axisPointer,"label")})),o(p(t.calendar),(function(t){c(t,"itemStyle"),h(t,"dayLabel"),h(t,"monthLabel"),h(t,"yearLabel")})),o(p(t.radar),(function(t){h(t,"name")})),o(p(t.geo),(function(t){a(t)&&(f(t),o(p(t.regions),(function(t){f(t)})))})),o(p(t.timeline),(function(t){f(t),c(t,"label"),c(t,"itemStyle"),c(t,"controlStyle",!0);var e=t.data;r.isArray(e)&&r.each(e,(function(t){r.isObject(t)&&(c(t,"label"),c(t,"itemStyle"))}))})),o(p(t.toolbox),(function(t){c(t,"iconStyle"),o(t.feature,(function(t){c(t,"iconStyle")}))})),h(g(t.axisPointer),"label"),h(g(t.tooltip).axisPointer,"label")}t.exports=m},"276f":function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"h",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"w",(function(){return d})),n.d(e,"x",(function(){return p})),n.d(e,"kb",(function(){return g})),n.d(e,"O",(function(){return m})),n.d(e,"gb",(function(){return v})),n.d(e,"r",(function(){return y})),n.d(e,"K",(function(){return C})),n.d(e,"d",(function(){return x})),n.d(e,"b",(function(){return w})),n.d(e,"e",(function(){return _})),n.d(e,"c",(function(){return O})),n.d(e,"a",(function(){return S})),n.d(e,"N",(function(){return E})),n.d(e,"jb",(function(){return j})),n.d(e,"Q",(function(){return z})),n.d(e,"R",(function(){return B})),n.d(e,"S",(function(){return U})),n.d(e,"T",(function(){return W})),n.d(e,"lb",(function(){return H})),n.d(e,"mb",(function(){return q})),n.d(e,"nb",(function(){return G})),n.d(e,"ob",(function(){return X})),n.d(e,"V",(function(){return Y})),n.d(e,"hb",(function(){return K})),n.d(e,"i",(function(){return Z})),n.d(e,"j",(function(){return J})),n.d(e,"k",(function(){return et})),n.d(e,"l",(function(){return at})),n.d(e,"m",(function(){return st})),n.d(e,"n",(function(){return c})),n.d(e,"o",(function(){return ut})),n.d(e,"p",(function(){return ct})),n.d(e,"q",(function(){return lt})),n.d(e,"s",(function(){return pt})),n.d(e,"t",(function(){return h})),n.d(e,"u",(function(){return gt})),n.d(e,"v",(function(){return ft})),n.d(e,"y",(function(){return mt})),n.d(e,"z",(function(){return vt})),n.d(e,"A",(function(){return k})),n.d(e,"B",(function(){return yt})),n.d(e,"C",(function(){return bt})),n.d(e,"D",(function(){return Q})),n.d(e,"E",(function(){return xt})),n.d(e,"F",(function(){return A})),n.d(e,"G",(function(){return wt})),n.d(e,"H",(function(){return _t})),n.d(e,"I",(function(){return Ot})),n.d(e,"J",(function(){return St})),n.d(e,"L",(function(){return kt})),n.d(e,"M",(function(){return At})),n.d(e,"P",(function(){return Et})),n.d(e,"U",(function(){return M})),n.d(e,"W",(function(){return Tt})),n.d(e,"X",(function(){return jt})),n.d(e,"Y",(function(){return l})),n.d(e,"Z",(function(){return Dt})),n.d(e,"ab",(function(){return Mt})),n.d(e,"bb",(function(){return It})),n.d(e,"cb",(function(){return N})),n.d(e,"eb",(function(){return Rt})),n.d(e,"db",(function(){return Ft})),n.d(e,"fb",(function(){return Pt})),n.d(e,"ib",(function(){return $t}));var r=function(t,e,n){return t.fields=e||[],t.fname=n,t};function i(t){return null==t?null:t.fname}function o(t){return null==t?null:t.fields}var a=function(t){return 1===t.length?s(t[0]):u(t)};const s=t=>function(e){return e[t]},u=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};var c=function(t){throw Error(t)},l=function(t){var e,n,r,i=[],o=null,a=0,s=t.length,u="";function l(){i.push(u+t.substring(e,n)),u="",e=n+1}for(t+="",e=n=0;n<s;++n)if(r=t[n],"\\"===r)u+=t.substring(e,n),u+=t.substring(++n,++n),e=n;else if(r===o)l(),o=null,a=-1;else{if(o)continue;e===a&&'"'===r||e===a&&"'"===r?(e=n+1,o=r):"."!==r||a?"["===r?(n>e&&l(),a=e=n+1):"]"===r&&(a||c("Access path missing open bracket: "+t),a>0&&l(),a=0,e=n+1):n>e?l():e=n+1}return a&&c("Access path missing closing bracket: "+t),o&&c("Access path missing closing quote: "+t),n>e&&(n++,l()),i},h=function(t,e,n){const i=l(t);return t=1===i.length?i[0]:t,r((n&&n.get||a)(i),[t],e||t)},f=[],d=h("id"),p=r((function(t){return t}),f,"identity"),g=r((function(){return 0}),f,"zero"),m=r((function(){return 1}),f,"one"),v=r((function(){return!0}),f,"true"),y=r((function(){return!1}),f,"false");function b(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}var x=0,w=1,_=2,O=3,S=4,C=function(t,e){var n=t||x;return{level:function(t){return arguments.length?(n=+t,this):n},error:function(){return n>=w&&b(e||"error","ERROR",arguments),this},warn:function(){return n>=_&&b(e||"warn","WARN",arguments),this},info:function(){return n>=O&&b(e||"log","INFO",arguments),this},debug:function(){return n>=S&&b(e||"log","DEBUG",arguments),this}}},k=Array.isArray,A=function(t){return t===Object(t)};const T=t=>"__proto__"!==t;function E(...t){return t.reduce((t,e)=>{for(var n in e)if("signals"===n)t.signals=D(t.signals,e.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;j(t,n,e[n],r)}return t},{})}function j(t,e,n,r){var i,o;if(T(e))if(A(n)&&!k(n))for(i in o=A(t[e])?t[e]:t[e]={},n)r&&(!0===r||r[i])?j(o,i,n[i]):T(i)&&(o[i]=n[i]);else t[e]=n}function D(t,e){if(null==t)return e;const n={},r=[];function i(t){n[t.name]||(n[t.name]=1,r.push(t))}return e.forEach(i),t.forEach(i),r}var M=function(t){return t[t.length-1]},N=function(t){return null==t||""===t?null:+t};function I(t){return function(e){return t*Math.exp(e)}}function R(t){return function(e){return Math.log(t*e)}}function F(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function P(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function $(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function L(t,e,n,r){var i=n(t[0]),o=n(M(t)),a=(o-i)*e;return[r(i-a),r(o-a)]}function z(t,e){return L(t,e,N,p)}function B(t,e){var n=Math.sign(t[0]);return L(t,e,R(n),I(n))}function U(t,e,n){return L(t,e,$(n),$(1/n))}function W(t,e,n){return L(t,e,F(n),P(n))}function V(t,e,n,r,i){var o=r(t[0]),a=r(M(t)),s=null!=e?r(e):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function H(t,e,n){return V(t,e,n,N,p)}function q(t,e,n){var r=Math.sign(t[0]);return V(t,e,n,R(r),I(r))}function G(t,e,n,r){return V(t,e,n,$(r),$(1/r))}function X(t,e,n,r){return V(t,e,n,F(r),P(r))}function Y(t){return 1+~~(new Date(t).getMonth()/3)}function K(t){return 1+~~(new Date(t).getUTCMonth()/3)}var Z=function(t){return null!=t?k(t)?t:[t]:[]},J=function(t,e,n){var r,i=t[0],o=t[1];return o<i&&(r=o,o=i,i=r),r=o-i,r>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]},Q=function(t){return"function"===typeof t};const tt="descending";var et=function(t,e,n){n=n||{},e=Z(e)||[];const i=[],a=[],s={},u=n.comparator||rt;return Z(t).forEach((t,r)=>{null!=t&&(i.push(e[r]===tt?-1:1),a.push(t=Q(t)?t:h(t,null,n)),(o(t)||[]).forEach(t=>s[t]=1))}),0===a.length?null:r(u(a,i),Object.keys(s))};const nt=(t,e)=>(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),rt=(t,e)=>1===t.length?it(t[0],e[0]):ot(t,e,t.length),it=(t,e)=>function(n,r){return nt(t(n),t(r))*e},ot=(t,e,n)=>(e.push(0),function(r,i){let o,a=0,s=-1;while(0===a&&++s<n)o=t[s],a=nt(o(r),o(i));return a*e[s]});var at=function(t){return Q(t)?t:function(){return t}},st=function(t,e){var n,r;function i(){e(r),n=r=null}return function(e){r=e,n&&clearTimeout(n),n=setTimeout(i,t)}},ut=function(t){for(var e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r],e)t[n]=e[n];return t},ct=function(t,e){var n,r,i,o,a=0;if(t&&(n=t.length))if(null==e){for(r=t[a];a<n&&(null==r||r!==r);r=t[++a]);for(i=o=r;a<n;++a)r=t[a],null!=r&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=e(t[a]);a<n&&(null==r||r!==r);r=e(t[++a]));for(i=o=r;a<n;++a)r=e(t[a]),null!=r&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]},lt=function(t,e){var n,r,i,o,a,s=-1,u=t.length;if(null==e){while(++s<u)if(r=t[s],null!=r&&r>=r){n=i=r;break}if(s===u)return[-1,-1];o=a=s;while(++s<u)r=t[s],null!=r&&(n>r&&(n=r,o=s),i<r&&(i=r,a=s))}else{while(++s<u)if(r=e(t[s],s,t),null!=r&&r>=r){n=i=r;break}if(s===u)return[-1,-1];o=a=s;while(++s<u)r=e(t[s],s,t),null!=r&&(n>r&&(n=r,o=s),i<r&&(i=r,a=s))}return[o,a]};const ht=Object.prototype.hasOwnProperty;var ft=function(t,e){return ht.call(t,e)},dt={},pt=function(t){var e,n,r={};function i(t){return ft(r,t)&&r[t]!==dt}return e={size:0,empty:0,object:r,has:i,get(t){return i(t)?r[t]:void 0},set(t,n){return i(t)||(++e.size,r[t]===dt&&--e.empty),r[t]=n,this},delete(t){return i(t)&&(--e.size,++e.empty,r[t]=dt),this},clear(){e.size=e.empty=0,e.object=r={}},test(t){return arguments.length?(n=t,e):n},clean(){var t,i,o={},a=0;for(t in r)i=r[t],i===dt||n&&n(i)||(o[t]=i,++a);e.size=a,e.empty=0,e.object=r=o}},t&&Object.keys(t).forEach((function(n){e.set(n,t[n])})),e},gt=function(t,e,n,r,i,o){if(!n&&0!==n)return o;var a,s,u=t[0],c=M(t),l=+n;return c<u&&(a=u,u=c,c=a),a=Math.abs(e-u),s=Math.abs(c-e),a<s&&a<=l?r:s<=l?i:o},mt=function(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n},vt=function(t,e,n,r){var i,o=e[0],a=e[e.length-1];return o>a&&(i=o,o=a,a=i),n=void 0===n||n,r=void 0===r||r,(n?o<=t:o<t)&&(r?t<=a:t<a)},yt=function(t){return"boolean"===typeof t},bt=function(t){return"[object Date]"===Object.prototype.toString.call(t)},xt=function(t){return"number"===typeof t},wt=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},_t=function(t){return"string"===typeof t},Ot=function(t,e,n){t&&(t=e?Z(t).map(t=>t.replace(/\\(.)/g,"$1")):Z(t));const i=t&&t.length,o=n&&n.get||a,s=t=>o(e?[t]:l(t));let u;if(i)if(1===i){const e=s(t[0]);u=function(t){return""+e(t)}}else{const e=t.map(s);u=function(t){let n=""+e[0](t),r=0;while(++r<i)n+="|"+e[r](t);return n}}else u=function(){return""};return r(u,t,"key")},St=function(t,e){const n=t[0],r=M(t),i=+e;return i?1===i?r:n+i*(r-n):n};const Ct=1e4;var kt=function(t){let e,n,r;t=+t||Ct;const i=()=>{e={},n={},r=0},o=(i,o)=>(++r>t&&(n=e,e={},r=1),e[i]=o);return i(),{clear:i,has:t=>ft(e,t)||ft(n,t),get:t=>ft(e,t)?e[t]:ft(n,t)?o(t,n[t]):void 0,set:(t,n)=>ft(e,t)?e[t]=n:o(t,n)}},At=function(t,e,n,r){var i=e.length,o=n.length;if(!o)return e;if(!i)return n;for(var a=r||new e.constructor(i+o),s=0,u=0,c=0;s<i&&u<o;++c)a[c]=t(e[s],n[u])>0?n[u++]:e[s++];for(;s<i;++s,++c)a[c]=e[s];for(;u<o;++u,++c)a[c]=n[u];return a},Tt=function(t,e){var n="";while(--e>=0)n+=t;return n},Et=function(t,e,n,r){var i=n||" ",o=t+"",a=e-o.length;return a<=0?o:"left"===r?Tt(i,a)+o:"center"===r?Tt(i,~~(a/2))+o+Tt(i,Math.ceil(a/2)):o+Tt(i,a)},jt=function(t){return t&&M(t)-t[0]||0};function Dt(t){return k(t)?"["+t.map(Dt)+"]":A(t)||_t(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var Mt=function(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t};function Nt(t){return xt(t)||bt(t)?t:Date.parse(t)}var It=function(t,e){return e=e||Nt,null==t||""===t?null:e(t)},Rt=function(t){return null==t||""===t?null:t+""},Ft=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e},Pt=function(t,e,n,r){var i=null!=r?r:"…",o=t+"",a=o.length,s=Math.max(0,e-i.length);return a<=e?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i},$t=function(t,e,n){if(t)if(e)for(var r,i=0,o=t.length;i<o;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)}},"282b":function(t,e,n){var r=n("6d8b");function i(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(e,n,i){for(var o={},a=0;a<t.length;a++){var s=t[a][1];if(!(n&&r.indexOf(n,s)>=0||i&&r.indexOf(i,s)<0)){var u=e.getShallow(s);null!=u&&(o[t[a][0]]=u)}}return o}}t.exports=i},2877:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},"29a8":function(t,e){var n={legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};t.exports=n},"29a8e":function(t,e,n){"use strict";(function(t){var e=n("7ed6"),r=n("b333");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const i=Object(r["c"])();i.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),i.registerFlag("IS_BROWSER",()=>e["isBrowser"]()),i.registerFlag("IS_NODE",()=>"undefined"!==typeof t&&"undefined"!==typeof t.versions&&"undefined"!==typeof t.versions.node),i.registerFlag("IS_CHROME",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),i.registerFlag("PROD",()=>!1),i.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>i.getBool("DEBUG")),i.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),i.registerFlag("IS_TEST",()=>!1)}).call(this,n("4362"))},"29d8":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]},"29f3":function(t,e){var n=Object.prototype,r=n.toString;function i(t){return r.call(t)}t.exports=i},"2a2e":function(t,e,n){const r=n("1cc6"),i=(t,e)=>t.sort((t,n)=>r(t,n,e));t.exports=i},"2a44":function(t,e,n){},"2a86":function(t,e,n){const r=n("3fce"),i=(t,e,n)=>{try{e=new r(e,n)}catch(i){return!1}return e.test(t)};t.exports=i},"2b0e":function(t,e,n){"use strict";n.r(e),function(t){
/*!
 * Vue.js v2.6.11
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function o(t){return!0===t}function a(t){return!1===t}function s(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function u(t){return null!==t&&"object"===typeof t}var c=Object.prototype.toString;function l(t){return"[object Object]"===c.call(t)}function h(t){return"[object RegExp]"===c.call(t)}function f(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function d(t){return i(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function p(t){return null==t?"":Array.isArray(t)||l(t)&&t.toString===c?JSON.stringify(t,null,2):String(t)}function g(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}m("slot,component",!0);var v=m("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function x(t,e){return b.call(t,e)}function w(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var _=/-(\w)/g,O=w((function(t){return t.replace(_,(function(t,e){return e?e.toUpperCase():""}))})),S=w((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),C=/\B([A-Z])/g,k=w((function(t){return t.replace(C,"-$1").toLowerCase()}));function A(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function T(t,e){return t.bind(e)}var E=Function.prototype.bind?T:A;function j(t,e){e=e||0;var n=t.length-e,r=new Array(n);while(n--)r[n]=t[n+e];return r}function D(t,e){for(var n in e)t[n]=e[n];return t}function M(t){for(var e={},n=0;n<t.length;n++)t[n]&&D(e,t[n]);return e}function N(t,e,n){}var I=function(t,e,n){return!1},R=function(t){return t};function F(t,e){if(t===e)return!0;var n=u(t),r=u(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every((function(t,n){return F(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every((function(n){return F(t[n],e[n])}))}catch(c){return!1}}function P(t,e){for(var n=0;n<t.length;n++)if(F(t[n],e))return n;return-1}function $(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var L="data-server-rendered",z=["component","directive","filter"],B=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:I,isReservedAttr:I,isUnknownElement:I,getTagNamespace:N,parsePlatformTagName:R,mustUseProp:I,async:!0,_lifecycleHooks:B},W=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function V(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function H(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var q=new RegExp("[^"+W.source+".$_\\d]");function G(t){if(!q.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var X,Y="__proto__"in{},K="undefined"!==typeof window,Z="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=Z&&WXEnvironment.platform.toLowerCase(),Q=K&&window.navigator.userAgent.toLowerCase(),tt=Q&&/msie|trident/.test(Q),et=Q&&Q.indexOf("msie 9.0")>0,nt=Q&&Q.indexOf("edge/")>0,rt=(Q&&Q.indexOf("android"),Q&&/iphone|ipad|ipod|ios/.test(Q)||"ios"===J),it=(Q&&/chrome\/\d+/.test(Q),Q&&/phantomjs/.test(Q),Q&&Q.match(/firefox\/(\d+)/)),ot={}.watch,at=!1;if(K)try{var st={};Object.defineProperty(st,"passive",{get:function(){at=!0}}),window.addEventListener("test-passive",null,st)}catch(Oa){}var ut=function(){return void 0===X&&(X=!K&&!Z&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),X},ct=K&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function lt(t){return"function"===typeof t&&/native code/.test(t.toString())}var ht,ft="undefined"!==typeof Symbol&&lt(Symbol)&&"undefined"!==typeof Reflect&&lt(Reflect.ownKeys);ht="undefined"!==typeof Set&&lt(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var dt=N,pt=0,gt=function(){this.id=pt++,this.subs=[]};gt.prototype.addSub=function(t){this.subs.push(t)},gt.prototype.removeSub=function(t){y(this.subs,t)},gt.prototype.depend=function(){gt.target&&gt.target.addDep(this)},gt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},gt.target=null;var mt=[];function vt(t){mt.push(t),gt.target=t}function yt(){mt.pop(),gt.target=mt[mt.length-1]}var bt=function(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},xt={child:{configurable:!0}};xt.child.get=function(){return this.componentInstance},Object.defineProperties(bt.prototype,xt);var wt=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function _t(t){return new bt(void 0,void 0,void 0,String(t))}function Ot(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var St=Array.prototype,Ct=Object.create(St),kt=["push","pop","shift","unshift","splice","sort","reverse"];kt.forEach((function(t){var e=St[t];H(Ct,t,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o}))}));var At=Object.getOwnPropertyNames(Ct),Tt=!0;function Et(t){Tt=t}var jt=function(t){this.value=t,this.dep=new gt,this.vmCount=0,H(t,"__ob__",this),Array.isArray(t)?(Y?Dt(t,Ct):Mt(t,Ct,At),this.observeArray(t)):this.walk(t)};function Dt(t,e){t.__proto__=e}function Mt(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];H(t,o,e[o])}}function Nt(t,e){var n;if(u(t)&&!(t instanceof bt))return x(t,"__ob__")&&t.__ob__ instanceof jt?n=t.__ob__:Tt&&!ut()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new jt(t)),e&&n&&n.vmCount++,n}function It(t,e,n,r,i){var o=new gt,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=t[e]);var c=!i&&Nt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return gt.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&Pt(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!==e&&r!==r||s&&!u||(u?u.call(t,e):n=e,c=!i&&Nt(e),o.notify())}})}}function Rt(t,e,n){if(Array.isArray(t)&&f(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(It(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function Ft(t,e){if(Array.isArray(t)&&f(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||x(t,e)&&(delete t[e],n&&n.dep.notify())}}function Pt(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Pt(e)}jt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)It(t,e[n])},jt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Nt(t[e])};var $t=U.optionMergeStrategies;function Lt(t,e){if(!e)return t;for(var n,r,i,o=ft?Reflect.ownKeys(e):Object.keys(e),a=0;a<o.length;a++)n=o[a],"__ob__"!==n&&(r=t[n],i=e[n],x(t,n)?r!==i&&l(r)&&l(i)&&Lt(r,i):Rt(t,n,i));return t}function zt(t,e,n){return n?function(){var r="function"===typeof e?e.call(n,n):e,i="function"===typeof t?t.call(n,n):t;return r?Lt(r,i):i}:e?t?function(){return Lt("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function Bt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Ut(n):n}function Ut(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function Wt(t,e,n,r){var i=Object.create(t||null);return e?D(i,e):i}$t.data=function(t,e,n){return n?zt(t,e,n):e&&"function"!==typeof e?t:zt(t,e)},B.forEach((function(t){$t[t]=Bt})),z.forEach((function(t){$t[t+"s"]=Wt})),$t.watch=function(t,e,n,r){if(t===ot&&(t=void 0),e===ot&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var o in D(i,t),e){var a=i[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},$t.props=$t.methods=$t.inject=$t.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return D(i,t),e&&D(i,e),i},$t.provide=zt;var Vt=function(t,e){return void 0===e?t:e};function Ht(t,e){var n=t.props;if(n){var r,i,o,a={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=O(i),a[o]={type:null})}else if(l(n))for(var s in n)i=n[s],o=O(s),a[o]=l(i)?i:{type:i};else 0;t.props=a}}function qt(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(l(n))for(var o in n){var a=n[o];r[o]=l(a)?D({from:o},a):{from:a}}else 0}}function Gt(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"===typeof r&&(e[n]={bind:r,update:r})}}function Xt(t,e,n){if("function"===typeof e&&(e=e.options),Ht(e,n),qt(e,n),Gt(e),!e._base&&(e.extends&&(t=Xt(t,e.extends,n)),e.mixins))for(var r=0,i=e.mixins.length;r<i;r++)t=Xt(t,e.mixins[r],n);var o,a={};for(o in t)s(o);for(o in e)x(t,o)||s(o);function s(r){var i=$t[r]||Vt;a[r]=i(t[r],e[r],n,r)}return a}function Yt(t,e,n,r){if("string"===typeof n){var i=t[e];if(x(i,n))return i[n];var o=O(n);if(x(i,o))return i[o];var a=S(o);if(x(i,a))return i[a];var s=i[n]||i[o]||i[a];return s}}function Kt(t,e,n,r){var i=e[t],o=!x(n,t),a=n[t],s=te(Boolean,i.type);if(s>-1)if(o&&!x(i,"default"))a=!1;else if(""===a||a===k(t)){var u=te(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=Zt(r,i,t);var c=Tt;Et(!0),Nt(a),Et(c)}return a}function Zt(t,e,n){if(x(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof r&&"Function"!==Jt(e.type)?r.call(t):r}}function Jt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Qt(t,e){return Jt(t)===Jt(e)}function te(t,e){if(!Array.isArray(e))return Qt(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(Qt(e[n],t))return n;return-1}function ee(t,e,n){vt();try{if(e){var r=e;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(r,t,e,n);if(a)return}catch(Oa){re(Oa,r,"errorCaptured hook")}}}re(t,e,n)}finally{yt()}}function ne(t,e,n,r,i){var o;try{o=n?t.apply(e,n):t.call(e),o&&!o._isVue&&d(o)&&!o._handled&&(o.catch((function(t){return ee(t,r,i+" (Promise/async)")})),o._handled=!0)}catch(Oa){ee(Oa,r,i)}return o}function re(t,e,n){if(U.errorHandler)try{return U.errorHandler.call(null,t,e,n)}catch(Oa){Oa!==t&&ie(Oa,null,"config.errorHandler")}ie(t,e,n)}function ie(t,e,n){if(!K&&!Z||"undefined"===typeof console)throw t;console.error(t)}var oe,ae=!1,se=[],ue=!1;function ce(){ue=!1;var t=se.slice(0);se.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&lt(Promise)){var le=Promise.resolve();oe=function(){le.then(ce),rt&&setTimeout(N)},ae=!0}else if(tt||"undefined"===typeof MutationObserver||!lt(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())oe="undefined"!==typeof setImmediate&&lt(setImmediate)?function(){setImmediate(ce)}:function(){setTimeout(ce,0)};else{var he=1,fe=new MutationObserver(ce),de=document.createTextNode(String(he));fe.observe(de,{characterData:!0}),oe=function(){he=(he+1)%2,de.data=String(he)},ae=!0}function pe(t,e){var n;if(se.push((function(){if(t)try{t.call(e)}catch(Oa){ee(Oa,e,"nextTick")}else n&&n(e)})),ue||(ue=!0,oe()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){n=t}))}var ge=new ht;function me(t){ve(t,ge),ge.clear()}function ve(t,e){var n,r,i=Array.isArray(t);if(!(!i&&!u(t)||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(i){n=t.length;while(n--)ve(t[n],e)}else{r=Object.keys(t),n=r.length;while(n--)ve(t[r[n]],e)}}}var ye=w((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}));function be(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return ne(r,null,arguments,e,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)ne(i[o],null,t,e,"v-on handler")}return n.fns=t,n}function xe(t,e,n,i,a,s){var u,c,l,h;for(u in t)c=t[u],l=e[u],h=ye(u),r(c)||(r(l)?(r(c.fns)&&(c=t[u]=be(c,s)),o(h.once)&&(c=t[u]=a(h.name,c,h.capture)),n(h.name,c,h.capture,h.passive,h.params)):c!==l&&(l.fns=c,t[u]=l));for(u in e)r(t[u])&&(h=ye(u),i(h.name,e[u],h.capture))}function we(t,e,n){var a;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function u(){n.apply(this,arguments),y(a.fns,u)}r(s)?a=be([u]):i(s.fns)&&o(s.merged)?(a=s,a.fns.push(u)):a=be([s,u]),a.merged=!0,t[e]=a}function _e(t,e,n){var o=e.options.props;if(!r(o)){var a={},s=t.attrs,u=t.props;if(i(s)||i(u))for(var c in o){var l=k(c);Oe(a,u,c,l,!0)||Oe(a,s,c,l,!1)}return a}}function Oe(t,e,n,r,o){if(i(e)){if(x(e,n))return t[n]=e[n],o||delete e[n],!0;if(x(e,r))return t[n]=e[r],o||delete e[r],!0}return!1}function Se(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Ce(t){return s(t)?[_t(t)]:Array.isArray(t)?Ae(t):void 0}function ke(t){return i(t)&&i(t.text)&&a(t.isComment)}function Ae(t,e){var n,a,u,c,l=[];for(n=0;n<t.length;n++)a=t[n],r(a)||"boolean"===typeof a||(u=l.length-1,c=l[u],Array.isArray(a)?a.length>0&&(a=Ae(a,(e||"")+"_"+n),ke(a[0])&&ke(c)&&(l[u]=_t(c.text+a[0].text),a.shift()),l.push.apply(l,a)):s(a)?ke(c)?l[u]=_t(c.text+a):""!==a&&l.push(_t(a)):ke(a)&&ke(c)?l[u]=_t(c.text+a.text):(o(t._isVList)&&i(a.tag)&&r(a.key)&&i(e)&&(a.key="__vlist"+e+"_"+n+"__"),l.push(a)));return l}function Te(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function Ee(t){var e=je(t.$options.inject,t);e&&(Et(!1),Object.keys(e).forEach((function(n){It(t,n,e[n])})),Et(!0))}function je(t,e){if(t){for(var n=Object.create(null),r=ft?Reflect.ownKeys(t):Object.keys(t),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=t[o].from,s=e;while(s){if(s._provided&&x(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[o]){var u=t[o].default;n[o]="function"===typeof u?u.call(e):u}else 0}}return n}}function De(t,e){if(!t||!t.length)return{};for(var n={},r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(Me)&&delete n[c];return n}function Me(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Ne(t,e,r){var i,o=Object.keys(e).length>0,a=t?!!t.$stable:!o,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(a&&r&&r!==n&&s===r.$key&&!o&&!r.$hasNormal)return r;for(var u in i={},t)t[u]&&"$"!==u[0]&&(i[u]=Ie(e,u,t[u]))}else i={};for(var c in e)c in i||(i[c]=Re(e,c));return t&&Object.isExtensible(t)&&(t._normalized=i),H(i,"$stable",a),H(i,"$key",s),H(i,"$hasNormal",o),i}function Ie(t,e,n){var r=function(){var t=arguments.length?n.apply(null,arguments):n({});return t=t&&"object"===typeof t&&!Array.isArray(t)?[t]:Ce(t),t&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function Re(t,e){return function(){return t[e]}}function Fe(t,e){var n,r,o,a,s;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),r=0,o=t.length;r<o;r++)n[r]=e(t[r],r);else if("number"===typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(u(t))if(ft&&t[Symbol.iterator]){n=[];var c=t[Symbol.iterator](),l=c.next();while(!l.done)n.push(e(l.value,n.length)),l=c.next()}else for(a=Object.keys(t),n=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],n[r]=e(t[s],s,r);return i(n)||(n=[]),n._isVList=!0,n}function Pe(t,e,n,r){var i,o=this.$scopedSlots[t];o?(n=n||{},r&&(n=D(D({},r),n)),i=o(n)||e):i=this.$slots[t]||e;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function $e(t){return Yt(this.$options,"filters",t,!0)||R}function Le(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function ze(t,e,n,r,i){var o=U.keyCodes[e]||n;return i&&r&&!U.keyCodes[e]?Le(i,r):o?Le(o,t):r?k(r)!==e:void 0}function Be(t,e,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=M(n));var a=function(a){if("class"===a||"style"===a||v(a))o=t;else{var s=t.attrs&&t.attrs.type;o=r||U.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=O(a),c=k(a);if(!(u in o)&&!(c in o)&&(o[a]=n[a],i)){var l=t.on||(t.on={});l["update:"+a]=function(t){n[a]=t}}};for(var s in n)a(s)}else;return t}function Ue(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Ve(r,"__static__"+t,!1)),r}function We(t,e,n){return Ve(t,"__once__"+e+(n?"_"+n:""),!0),t}function Ve(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!==typeof t[r]&&He(t[r],e+"_"+r,n);else He(t,e,n)}function He(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function qe(t,e){if(e)if(l(e)){var n=t.on=t.on?D({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function Ge(t,e,n,r){e=e||{$stable:!n};for(var i=0;i<t.length;i++){var o=t[i];Array.isArray(o)?Ge(o,e,n):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function Xe(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"===typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Ye(t,e){return"string"===typeof t?e+t:t}function Ke(t){t._o=We,t._n=g,t._s=p,t._l=Fe,t._t=Pe,t._q=F,t._i=P,t._m=Ue,t._f=$e,t._k=ze,t._b=Be,t._v=_t,t._e=wt,t._u=Ge,t._g=qe,t._d=Xe,t._p=Ye}function Ze(t,e,r,i,a){var s,u=this,c=a.options;x(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var l=o(c._compiled),h=!l;this.data=t,this.props=e,this.children=r,this.parent=i,this.listeners=t.on||n,this.injections=je(c.inject,i),this.slots=function(){return u.$slots||Ne(t.scopedSlots,u.$slots=De(r,i)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Ne(t.scopedSlots,this.slots())}}),l&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=Ne(t.scopedSlots,this.$slots)),c._scopeId?this._c=function(t,e,n,r){var o=hn(s,t,e,n,r,h);return o&&!Array.isArray(o)&&(o.fnScopeId=c._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return hn(s,t,e,n,r,h)}}function Je(t,e,r,o,a){var s=t.options,u={},c=s.props;if(i(c))for(var l in c)u[l]=Kt(l,c,e||n);else i(r.attrs)&&tn(u,r.attrs),i(r.props)&&tn(u,r.props);var h=new Ze(r,u,a,o,t),f=s.render.call(null,h._c,h);if(f instanceof bt)return Qe(f,r,h.parent,s,h);if(Array.isArray(f)){for(var d=Ce(f)||[],p=new Array(d.length),g=0;g<d.length;g++)p[g]=Qe(d[g],r,h.parent,s,h);return p}}function Qe(t,e,n,r,i){var o=Ot(t);return o.fnContext=n,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function tn(t,e){for(var n in e)t[O(n)]=e[n]}Ke(Ze.prototype);var en={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;en.prepatch(n,n)}else{var r=t.componentInstance=on(t,jn);r.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;Rn(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Ln(n,"mounted")),t.data.keepAlive&&(e._isMounted?Jn(n):Pn(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?$n(e,!0):e.$destroy())}},nn=Object.keys(en);function rn(t,e,n,a,s){if(!r(t)){var c=n.$options._base;if(u(t)&&(t=c.extend(t)),"function"===typeof t){var l;if(r(t.cid)&&(l=t,t=wn(l,c),void 0===t))return xn(l,e,n,a,s);e=e||{},wr(t),i(e.model)&&un(t.options,e);var h=_e(e,t,s);if(o(t.options.functional))return Je(t,h,e,n,a);var f=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var d=e.slot;e={},d&&(e.slot=d)}an(e);var p=t.options.name||s,g=new bt("vue-component-"+t.cid+(p?"-"+p:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:h,listeners:f,tag:s,children:a},l);return g}}}function on(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new t.componentOptions.Ctor(n)}function an(t){for(var e=t.hook||(t.hook={}),n=0;n<nn.length;n++){var r=nn[n],i=e[r],o=en[r];i===o||i&&i._merged||(e[r]=i?sn(o,i):o)}}function sn(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function un(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),a=o[r],s=e.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}var cn=1,ln=2;function hn(t,e,n,r,i,a){return(Array.isArray(n)||s(n))&&(i=r,r=n,n=void 0),o(a)&&(i=ln),fn(t,e,n,r,i)}function fn(t,e,n,r,o){if(i(n)&&i(n.__ob__))return wt();if(i(n)&&i(n.is)&&(e=n.is),!e)return wt();var a,s,u;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===ln?r=Ce(r):o===cn&&(r=Se(r)),"string"===typeof e)?(s=t.$vnode&&t.$vnode.ns||U.getTagNamespace(e),a=U.isReservedTag(e)?new bt(U.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!i(u=Yt(t.$options,"components",e))?new bt(e,n,r,void 0,void 0,t):rn(u,n,t,r,e)):a=rn(e,n,t,r);return Array.isArray(a)?a:i(a)?(i(s)&&dn(a,s),i(n)&&pn(n),a):wt()}function dn(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),i(t.children))for(var a=0,s=t.children.length;a<s;a++){var u=t.children[a];i(u.tag)&&(r(u.ns)||o(n)&&"svg"!==u.tag)&&dn(u,e,n)}}function pn(t){u(t.style)&&me(t.style),u(t.class)&&me(t.class)}function gn(t){t._vnode=null,t._staticTrees=null;var e=t.$options,r=t.$vnode=e._parentVnode,i=r&&r.context;t.$slots=De(e._renderChildren,i),t.$scopedSlots=n,t._c=function(e,n,r,i){return hn(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return hn(t,e,n,r,i,!0)};var o=r&&r.data;It(t,"$attrs",o&&o.attrs||n,null,!0),It(t,"$listeners",e._parentListeners||n,null,!0)}var mn,vn=null;function yn(t){Ke(t.prototype),t.prototype.$nextTick=function(t){return pe(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,i=n._parentVnode;i&&(e.$scopedSlots=Ne(i.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=i;try{vn=e,t=r.call(e._renderProxy,e.$createElement)}catch(Oa){ee(Oa,e,"render"),t=e._vnode}finally{vn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof bt||(t=wt()),t.parent=i,t}}function bn(t,e){return(t.__esModule||ft&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function xn(t,e,n,r,i){var o=wt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}function wn(t,e){if(o(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;var n=vn;if(n&&i(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),o(t.loading)&&i(t.loadingComp))return t.loadingComp;if(n&&!i(t.owners)){var a=t.owners=[n],s=!0,c=null,l=null;n.$on("hook:destroyed",(function(){return y(a,n)}));var h=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},f=$((function(n){t.resolved=bn(n,e),s?a.length=0:h(!0)})),p=$((function(e){i(t.errorComp)&&(t.error=!0,h(!0))})),g=t(f,p);return u(g)&&(d(g)?r(t.resolved)&&g.then(f,p):d(g.component)&&(g.component.then(f,p),i(g.error)&&(t.errorComp=bn(g.error,e)),i(g.loading)&&(t.loadingComp=bn(g.loading,e),0===g.delay?t.loading=!0:c=setTimeout((function(){c=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,h(!1))}),g.delay||200)),i(g.timeout)&&(l=setTimeout((function(){l=null,r(t.resolved)&&p(null)}),g.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}function _n(t){return t.isComment&&t.asyncFactory}function On(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||_n(n)))return n}}function Sn(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Tn(t,e)}function Cn(t,e){mn.$on(t,e)}function kn(t,e){mn.$off(t,e)}function An(t,e){var n=mn;return function r(){var i=e.apply(null,arguments);null!==i&&n.$off(t,r)}}function Tn(t,e,n){mn=t,xe(e,n||{},Cn,kn,An,t),mn=void 0}function En(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)r.$on(t[i],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)n.$off(t[r],e);return n}var o,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;var s=a.length;while(s--)if(o=a[s],o===e||o.fn===e){a.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?j(n):n;for(var r=j(arguments,1),i='event handler for "'+t+'"',o=0,a=n.length;o<a;o++)ne(n[o],e,r,e,i)}return e}}var jn=null;function Dn(t){var e=jn;return jn=t,function(){jn=e}}function Mn(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Nn(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,o=Dn(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Ln(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Ln(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function In(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=wt),Ln(t,"beforeMount"),r=function(){t._update(t._render(),n)},new nr(t,r,N,{before:function(){t._isMounted&&!t._isDestroyed&&Ln(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Ln(t,"mounted")),t}function Rn(t,e,r,i,o){var a=i.data.scopedSlots,s=t.$scopedSlots,u=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&t.$scopedSlots.$key!==a.$key),c=!!(o||t.$options._renderChildren||u);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o,t.$attrs=i.data.attrs||n,t.$listeners=r||n,e&&t.$options.props){Et(!1);for(var l=t._props,h=t.$options._propKeys||[],f=0;f<h.length;f++){var d=h[f],p=t.$options.props;l[d]=Kt(d,p,e,t)}Et(!0),t.$options.propsData=e}r=r||n;var g=t.$options._parentListeners;t.$options._parentListeners=r,Tn(t,r,g),c&&(t.$slots=De(o,i.context),t.$forceUpdate())}function Fn(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Pn(t,e){if(e){if(t._directInactive=!1,Fn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Pn(t.$children[n]);Ln(t,"activated")}}function $n(t,e){if((!e||(t._directInactive=!0,!Fn(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)$n(t.$children[n]);Ln(t,"deactivated")}}function Ln(t,e){vt();var n=t.$options[e],r=e+" hook";if(n)for(var i=0,o=n.length;i<o;i++)ne(n[i],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),yt()}var zn=[],Bn=[],Un={},Wn=!1,Vn=!1,Hn=0;function qn(){Hn=zn.length=Bn.length=0,Un={},Wn=Vn=!1}var Gn=0,Xn=Date.now;if(K&&!tt){var Yn=window.performance;Yn&&"function"===typeof Yn.now&&Xn()>document.createEvent("Event").timeStamp&&(Xn=function(){return Yn.now()})}function Kn(){var t,e;for(Gn=Xn(),Vn=!0,zn.sort((function(t,e){return t.id-e.id})),Hn=0;Hn<zn.length;Hn++)t=zn[Hn],t.before&&t.before(),e=t.id,Un[e]=null,t.run();var n=Bn.slice(),r=zn.slice();qn(),Qn(n),Zn(r),ct&&U.devtools&&ct.emit("flush")}function Zn(t){var e=t.length;while(e--){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Ln(r,"updated")}}function Jn(t){t._inactive=!1,Bn.push(t)}function Qn(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Pn(t[e],!0)}function tr(t){var e=t.id;if(null==Un[e]){if(Un[e]=!0,Vn){var n=zn.length-1;while(n>Hn&&zn[n].id>t.id)n--;zn.splice(n+1,0,t)}else zn.push(t);Wn||(Wn=!0,pe(Kn))}}var er=0,nr=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++er,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ht,this.newDepIds=new ht,this.expression="","function"===typeof e?this.getter=e:(this.getter=G(e),this.getter||(this.getter=N)),this.value=this.lazy?void 0:this.get()};nr.prototype.get=function(){var t;vt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(Oa){if(!this.user)throw Oa;ee(Oa,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&me(t),yt(),this.cleanupDeps()}return t},nr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},nr.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},nr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():tr(this)},nr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(Oa){ee(Oa,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},nr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},nr.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},nr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var rr={enumerable:!0,configurable:!0,get:N,set:N};function ir(t,e,n){rr.get=function(){return this[e][n]},rr.set=function(t){this[e][n]=t},Object.defineProperty(t,n,rr)}function or(t){t._watchers=[];var e=t.$options;e.props&&ar(t,e.props),e.methods&&pr(t,e.methods),e.data?sr(t):Nt(t._data={},!0),e.computed&&lr(t,e.computed),e.watch&&e.watch!==ot&&gr(t,e.watch)}function ar(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;o||Et(!1);var a=function(o){i.push(o);var a=Kt(o,e,n,t);It(r,o,a),o in t||ir(t,"_props",o)};for(var s in e)a(s);Et(!0)}function sr(t){var e=t.$options.data;e=t._data="function"===typeof e?ur(e,t):e||{},l(e)||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);while(i--){var o=n[i];0,r&&x(r,o)||V(o)||ir(t,"_data",o)}Nt(e,!0)}function ur(t,e){vt();try{return t.call(e,e)}catch(Oa){return ee(Oa,e,"data()"),{}}finally{yt()}}var cr={lazy:!0};function lr(t,e){var n=t._computedWatchers=Object.create(null),r=ut();for(var i in e){var o=e[i],a="function"===typeof o?o:o.get;0,r||(n[i]=new nr(t,a||N,N,cr)),i in t||hr(t,i,o)}}function hr(t,e,n){var r=!ut();"function"===typeof n?(rr.get=r?fr(e):dr(n),rr.set=N):(rr.get=n.get?r&&!1!==n.cache?fr(e):dr(n.get):N,rr.set=n.set||N),Object.defineProperty(t,e,rr)}function fr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),gt.target&&e.depend(),e.value}}function dr(t){return function(){return t.call(this,this)}}function pr(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?N:E(e[n],t)}function gr(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)mr(t,n,r[i]);else mr(t,n,r)}}function mr(t,e,n,r){return l(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,r)}function vr(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Rt,t.prototype.$delete=Ft,t.prototype.$watch=function(t,e,n){var r=this;if(l(e))return mr(r,t,e,n);n=n||{},n.user=!0;var i=new nr(r,t,e,n);if(n.immediate)try{e.call(r,i.value)}catch(o){ee(o,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}var yr=0;function br(t){t.prototype._init=function(t){var e=this;e._uid=yr++,e._isVue=!0,t&&t._isComponent?xr(e,t):e.$options=Xt(wr(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Mn(e),Sn(e),gn(e),Ln(e,"beforeCreate"),Ee(e),or(e),Te(e),Ln(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function xr(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function wr(t){var e=t.options;if(t.super){var n=wr(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var i=_r(t);i&&D(t.extendOptions,i),e=t.options=Xt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function _r(t){var e,n=t.options,r=t.sealedOptions;for(var i in n)n[i]!==r[i]&&(e||(e={}),e[i]=n[i]);return e}function Or(t){this._init(t)}function Sr(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=j(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function Cr(t){t.mixin=function(t){return this.options=Xt(this.options,t),this}}function kr(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name;var a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=e++,a.options=Xt(n.options,t),a["super"]=n,a.options.props&&Ar(a),a.options.computed&&Tr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,z.forEach((function(t){a[t]=n[t]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=D({},a.options),i[r]=a,a}}function Ar(t){var e=t.options.props;for(var n in e)ir(t.prototype,"_props",n)}function Tr(t){var e=t.options.computed;for(var n in e)hr(t.prototype,n,e[n])}function Er(t){z.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&l(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}function jr(t){return t&&(t.Ctor.options.name||t.tag)}function Dr(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!h(t)&&t.test(e)}function Mr(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=jr(a.componentOptions);s&&!e(s)&&Nr(n,o,r,i)}}}function Nr(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,y(n,e)}br(Or),vr(Or),En(Or),Nn(Or),yn(Or);var Ir=[String,RegExp,Array],Rr={name:"keep-alive",abstract:!0,props:{include:Ir,exclude:Ir,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Nr(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",(function(e){Mr(t,(function(t){return Dr(e,t)}))})),this.$watch("exclude",(function(e){Mr(t,(function(t){return!Dr(e,t)}))}))},render:function(){var t=this.$slots.default,e=On(t),n=e&&e.componentOptions;if(n){var r=jr(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!Dr(o,r))||a&&r&&Dr(a,r))return e;var s=this,u=s.cache,c=s.keys,l=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;u[l]?(e.componentInstance=u[l].componentInstance,y(c,l),c.push(l)):(u[l]=e,c.push(l),this.max&&c.length>parseInt(this.max)&&Nr(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},Fr={KeepAlive:Rr};function Pr(t){var e={get:function(){return U}};Object.defineProperty(t,"config",e),t.util={warn:dt,extend:D,mergeOptions:Xt,defineReactive:It},t.set=Rt,t.delete=Ft,t.nextTick=pe,t.observable=function(t){return Nt(t),t},t.options=Object.create(null),z.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,D(t.options.components,Fr),Sr(t),Cr(t),kr(t),Er(t)}Pr(Or),Object.defineProperty(Or.prototype,"$isServer",{get:ut}),Object.defineProperty(Or.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Or,"FunctionalRenderContext",{value:Ze}),Or.version="2.6.11";var $r=m("style,class"),Lr=m("input,textarea,option,select,progress"),zr=function(t,e,n){return"value"===n&&Lr(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Br=m("contenteditable,draggable,spellcheck"),Ur=m("events,caret,typing,plaintext-only"),Wr=function(t,e){return Xr(e)||"false"===e?"false":"contenteditable"===t&&Ur(e)?e:"true"},Vr=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Hr="http://www.w3.org/1999/xlink",qr=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Gr=function(t){return qr(t)?t.slice(6,t.length):""},Xr=function(t){return null==t||!1===t};function Yr(t){var e=t.data,n=t,r=t;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(e=Kr(r.data,e));while(i(n=n.parent))n&&n.data&&(e=Kr(e,n.data));return Zr(e.staticClass,e.class)}function Kr(t,e){return{staticClass:Jr(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function Zr(t,e){return i(t)||i(e)?Jr(t,Qr(e)):""}function Jr(t,e){return t?e?t+" "+e:t:e||""}function Qr(t){return Array.isArray(t)?ti(t):u(t)?ei(t):"string"===typeof t?t:""}function ti(t){for(var e,n="",r=0,o=t.length;r<o;r++)i(e=Qr(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function ei(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var ni={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ri=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ii=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),oi=function(t){return ri(t)||ii(t)};function ai(t){return ii(t)?"svg":"math"===t?"math":void 0}var si=Object.create(null);function ui(t){if(!K)return!0;if(oi(t))return!1;if(t=t.toLowerCase(),null!=si[t])return si[t];var e=document.createElement(t);return t.indexOf("-")>-1?si[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:si[t]=/HTMLUnknownElement/.test(e.toString())}var ci=m("text,number,password,search,email,tel,url");function li(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function hi(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function fi(t,e){return document.createElementNS(ni[t],e)}function di(t){return document.createTextNode(t)}function pi(t){return document.createComment(t)}function gi(t,e,n){t.insertBefore(e,n)}function mi(t,e){t.removeChild(e)}function vi(t,e){t.appendChild(e)}function yi(t){return t.parentNode}function bi(t){return t.nextSibling}function xi(t){return t.tagName}function wi(t,e){t.textContent=e}function _i(t,e){t.setAttribute(e,"")}var Oi=Object.freeze({createElement:hi,createElementNS:fi,createTextNode:di,createComment:pi,insertBefore:gi,removeChild:mi,appendChild:vi,parentNode:yi,nextSibling:bi,tagName:xi,setTextContent:wi,setStyleScope:_i}),Si={create:function(t,e){Ci(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Ci(t,!0),Ci(e))},destroy:function(t){Ci(t,!0)}};function Ci(t,e){var n=t.data.ref;if(i(n)){var r=t.context,o=t.componentInstance||t.elm,a=r.$refs;e?Array.isArray(a[n])?y(a[n],o):a[n]===o&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var ki=new bt("",{},[]),Ai=["create","activate","update","remove","destroy"];function Ti(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&Ei(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function Ei(t,e){if("input"!==t.tag)return!0;var n,r=i(n=t.data)&&i(n=n.attrs)&&n.type,o=i(n=e.data)&&i(n=n.attrs)&&n.type;return r===o||ci(r)&&ci(o)}function ji(t,e,n){var r,o,a={};for(r=e;r<=n;++r)o=t[r].key,i(o)&&(a[o]=r);return a}function Di(t){var e,n,a={},u=t.modules,c=t.nodeOps;for(e=0;e<Ai.length;++e)for(a[Ai[e]]=[],n=0;n<u.length;++n)i(u[n][Ai[e]])&&a[Ai[e]].push(u[n][Ai[e]]);function l(t){return new bt(c.tagName(t).toLowerCase(),{},[],void 0,t)}function h(t,e){function n(){0===--n.listeners&&f(t)}return n.listeners=e,n}function f(t){var e=c.parentNode(t);i(e)&&c.removeChild(e,t)}function d(t,e,n,r,a,s,u){if(i(t.elm)&&i(s)&&(t=s[u]=Ot(t)),t.isRootInsert=!a,!p(t,e,n,r)){var l=t.data,h=t.children,f=t.tag;i(f)?(t.elm=t.ns?c.createElementNS(t.ns,f):c.createElement(f,t),_(t),b(t,h,e),i(l)&&w(t,e),y(n,t.elm,r)):o(t.isComment)?(t.elm=c.createComment(t.text),y(n,t.elm,r)):(t.elm=c.createTextNode(t.text),y(n,t.elm,r))}}function p(t,e,n,r){var a=t.data;if(i(a)){var s=i(t.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(t,!1),i(t.componentInstance))return g(t,e),y(n,t.elm,r),o(s)&&v(t,e,n,r),!0}}function g(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,x(t)?(w(t,e),_(t)):(Ci(t),e.push(t))}function v(t,e,n,r){var o,s=t;while(s.componentInstance)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<a.activate.length;++o)a.activate[o](ki,s);e.push(s);break}y(n,t.elm,r)}function y(t,e,n){i(t)&&(i(n)?c.parentNode(n)===t&&c.insertBefore(t,e,n):c.appendChild(t,e))}function b(t,e,n){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)d(e[r],n,t.elm,null,!0,e,r)}else s(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function x(t){while(t.componentInstance)t=t.componentInstance._vnode;return i(t.tag)}function w(t,n){for(var r=0;r<a.create.length;++r)a.create[r](ki,t);e=t.data.hook,i(e)&&(i(e.create)&&e.create(ki,t),i(e.insert)&&n.push(t))}function _(t){var e;if(i(e=t.fnScopeId))c.setStyleScope(t.elm,e);else{var n=t;while(n)i(e=n.context)&&i(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),n=n.parent}i(e=jn)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function O(t,e,n,r,i,o){for(;r<=i;++r)d(n[r],o,t,e,!1,n,r)}function S(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)S(t.children[n])}function C(t,e,n){for(;e<=n;++e){var r=t[e];i(r)&&(i(r.tag)?(k(r),S(r)):f(r.elm))}}function k(t,e){if(i(e)||i(t.data)){var n,r=a.remove.length+1;for(i(e)?e.listeners+=r:e=h(t.elm,r),i(n=t.componentInstance)&&i(n=n._vnode)&&i(n.data)&&k(n,e),n=0;n<a.remove.length;++n)a.remove[n](t,e);i(n=t.data.hook)&&i(n=n.remove)?n(t,e):e()}else f(t.elm)}function A(t,e,n,o,a){var s,u,l,h,f=0,p=0,g=e.length-1,m=e[0],v=e[g],y=n.length-1,b=n[0],x=n[y],w=!a;while(f<=g&&p<=y)r(m)?m=e[++f]:r(v)?v=e[--g]:Ti(m,b)?(E(m,b,o,n,p),m=e[++f],b=n[++p]):Ti(v,x)?(E(v,x,o,n,y),v=e[--g],x=n[--y]):Ti(m,x)?(E(m,x,o,n,y),w&&c.insertBefore(t,m.elm,c.nextSibling(v.elm)),m=e[++f],x=n[--y]):Ti(v,b)?(E(v,b,o,n,p),w&&c.insertBefore(t,v.elm,m.elm),v=e[--g],b=n[++p]):(r(s)&&(s=ji(e,f,g)),u=i(b.key)?s[b.key]:T(b,e,f,g),r(u)?d(b,o,t,m.elm,!1,n,p):(l=e[u],Ti(l,b)?(E(l,b,o,n,p),e[u]=void 0,w&&c.insertBefore(t,l.elm,m.elm)):d(b,o,t,m.elm,!1,n,p)),b=n[++p]);f>g?(h=r(n[y+1])?null:n[y+1].elm,O(t,h,n,p,y,o)):p>y&&C(e,f,g)}function T(t,e,n,r){for(var o=n;o<r;o++){var a=e[o];if(i(a)&&Ti(t,a))return o}}function E(t,e,n,s,u,l){if(t!==e){i(e.elm)&&i(s)&&(e=s[u]=Ot(e));var h=e.elm=t.elm;if(o(t.isAsyncPlaceholder))i(e.asyncFactory.resolved)?M(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var f,d=e.data;i(d)&&i(f=d.hook)&&i(f=f.prepatch)&&f(t,e);var p=t.children,g=e.children;if(i(d)&&x(e)){for(f=0;f<a.update.length;++f)a.update[f](t,e);i(f=d.hook)&&i(f=f.update)&&f(t,e)}r(e.text)?i(p)&&i(g)?p!==g&&A(h,p,g,n,l):i(g)?(i(t.text)&&c.setTextContent(h,""),O(h,null,g,0,g.length-1,n)):i(p)?C(p,0,p.length-1):i(t.text)&&c.setTextContent(h,""):t.text!==e.text&&c.setTextContent(h,e.text),i(d)&&i(f=d.hook)&&i(f=f.postpatch)&&f(t,e)}}}function j(t,e,n){if(o(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var D=m("attrs,class,staticClass,staticStyle,key");function M(t,e,n,r){var a,s=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,o(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(u)&&(i(a=u.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return g(e,n),!0;if(i(s)){if(i(c))if(t.hasChildNodes())if(i(a=u)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var l=!0,h=t.firstChild,f=0;f<c.length;f++){if(!h||!M(h,c[f],n,r)){l=!1;break}h=h.nextSibling}if(!l||h)return!1}else b(e,c,n);if(i(u)){var d=!1;for(var p in u)if(!D(p)){d=!0,w(e,n);break}!d&&u["class"]&&me(u["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s){if(!r(e)){var u=!1,h=[];if(r(t))u=!0,d(e,h);else{var f=i(t.nodeType);if(!f&&Ti(t,e))E(t,e,h,null,null,s);else{if(f){if(1===t.nodeType&&t.hasAttribute(L)&&(t.removeAttribute(L),n=!0),o(n)&&M(t,e,h))return j(e,h,!0),t;t=l(t)}var p=t.elm,g=c.parentNode(p);if(d(e,h,p._leaveCb?null:g,c.nextSibling(p)),i(e.parent)){var m=e.parent,v=x(e);while(m){for(var y=0;y<a.destroy.length;++y)a.destroy[y](m);if(m.elm=e.elm,v){for(var b=0;b<a.create.length;++b)a.create[b](ki,m);var w=m.data.hook.insert;if(w.merged)for(var _=1;_<w.fns.length;_++)w.fns[_]()}else Ci(m);m=m.parent}}i(g)?C([t],0,0):i(t.tag)&&S(t)}}return j(e,h,u),e.elm}i(t)&&S(t)}}var Mi={create:Ni,update:Ni,destroy:function(t){Ni(t,ki)}};function Ni(t,e){(t.data.directives||e.data.directives)&&Ii(t,e)}function Ii(t,e){var n,r,i,o=t===ki,a=e===ki,s=Fi(t.data.directives,t.context),u=Fi(e.data.directives,e.context),c=[],l=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,$i(i,"update",e,t),i.def&&i.def.componentUpdated&&l.push(i)):($i(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var h=function(){for(var n=0;n<c.length;n++)$i(c[n],"inserted",e,t)};o?we(e,"insert",h):h()}if(l.length&&we(e,"postpatch",(function(){for(var n=0;n<l.length;n++)$i(l[n],"componentUpdated",e,t)})),!o)for(n in s)u[n]||$i(s[n],"unbind",t,t,a)}var Ri=Object.create(null);function Fi(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++)r=t[n],r.modifiers||(r.modifiers=Ri),i[Pi(r)]=r,r.def=Yt(e.$options,"directives",r.name,!0);return i}function Pi(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function $i(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(Oa){ee(Oa,n.context,"directive "+t.name+" "+e+" hook")}}var Li=[Si,Mi];function zi(t,e){var n=e.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(t.data.attrs)||!r(e.data.attrs))){var o,a,s,u=e.elm,c=t.data.attrs||{},l=e.data.attrs||{};for(o in i(l.__ob__)&&(l=e.data.attrs=D({},l)),l)a=l[o],s=c[o],s!==a&&Bi(u,o,a);for(o in(tt||nt)&&l.value!==c.value&&Bi(u,"value",l.value),c)r(l[o])&&(qr(o)?u.removeAttributeNS(Hr,Gr(o)):Br(o)||u.removeAttribute(o))}}function Bi(t,e,n){t.tagName.indexOf("-")>-1?Ui(t,e,n):Vr(e)?Xr(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Br(e)?t.setAttribute(e,Wr(e,n)):qr(e)?Xr(n)?t.removeAttributeNS(Hr,Gr(e)):t.setAttributeNS(Hr,e,n):Ui(t,e,n)}function Ui(t,e,n){if(Xr(n))t.removeAttribute(e);else{if(tt&&!et&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var Wi={create:zi,update:zi};function Vi(t,e){var n=e.elm,o=e.data,a=t.data;if(!(r(o.staticClass)&&r(o.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var s=Yr(e),u=n._transitionClasses;i(u)&&(s=Jr(s,Qr(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Hi,qi={create:Vi,update:Vi},Gi="__r",Xi="__c";function Yi(t){if(i(t[Gi])){var e=tt?"change":"input";t[e]=[].concat(t[Gi],t[e]||[]),delete t[Gi]}i(t[Xi])&&(t.change=[].concat(t[Xi],t.change||[]),delete t[Xi])}function Ki(t,e,n){var r=Hi;return function i(){var o=e.apply(null,arguments);null!==o&&Qi(t,i,n,r)}}var Zi=ae&&!(it&&Number(it[1])<=53);function Ji(t,e,n,r){if(Zi){var i=Gn,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=i||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}Hi.addEventListener(t,e,at?{capture:n,passive:r}:n)}function Qi(t,e,n,r){(r||Hi).removeEventListener(t,e._wrapper||e,n)}function to(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},i=t.data.on||{};Hi=e.elm,Yi(n),xe(n,i,Ji,Qi,Ki,e.context),Hi=void 0}}var eo,no={create:to,update:to};function ro(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,o,a=e.elm,s=t.data.domProps||{},u=e.data.domProps||{};for(n in i(u.__ob__)&&(u=e.data.domProps=D({},u)),s)n in u||(a[n]="");for(n in u){if(o=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var c=r(o)?"":String(o);io(a,c)&&(a.value=c)}else if("innerHTML"===n&&ii(a.tagName)&&r(a.innerHTML)){eo=eo||document.createElement("div"),eo.innerHTML="<svg>"+o+"</svg>";var l=eo.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(l.firstChild)a.appendChild(l.firstChild)}else if(o!==s[n])try{a[n]=o}catch(Oa){}}}}function io(t,e){return!t.composing&&("OPTION"===t.tagName||oo(t,e)||ao(t,e))}function oo(t,e){var n=!0;try{n=document.activeElement!==t}catch(Oa){}return n&&t.value!==e}function ao(t,e){var n=t.value,r=t._vModifiers;if(i(r)){if(r.number)return g(n)!==g(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}var so={create:ro,update:ro},uo=w((function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach((function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function co(t){var e=lo(t.style);return t.staticStyle?D(t.staticStyle,e):e}function lo(t){return Array.isArray(t)?M(t):"string"===typeof t?uo(t):t}function ho(t,e){var n,r={};if(e){var i=t;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=co(i.data))&&D(r,n)}(n=co(t.data))&&D(r,n);var o=t;while(o=o.parent)o.data&&(n=co(o.data))&&D(r,n);return r}var fo,po=/^--/,go=/\s*!important$/,mo=function(t,e,n){if(po.test(e))t.style.setProperty(e,n);else if(go.test(n))t.style.setProperty(k(e),n.replace(go,""),"important");else{var r=yo(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},vo=["Webkit","Moz","ms"],yo=w((function(t){if(fo=fo||document.createElement("div").style,t=O(t),"filter"!==t&&t in fo)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<vo.length;n++){var r=vo[n]+e;if(r in fo)return r}}));function bo(t,e){var n=e.data,o=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var a,s,u=e.elm,c=o.staticStyle,l=o.normalizedStyle||o.style||{},h=c||l,f=lo(e.data.style)||{};e.data.normalizedStyle=i(f.__ob__)?D({},f):f;var d=ho(e,!0);for(s in h)r(d[s])&&mo(u,s,"");for(s in d)a=d[s],a!==h[s]&&mo(u,s,null==a?"":a)}}var xo={create:bo,update:bo},wo=/\s+/;function _o(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wo).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Oo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wo).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function So(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&D(e,Co(t.name||"v")),D(e,t),e}return"string"===typeof t?Co(t):void 0}}var Co=w((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),ko=K&&!et,Ao="transition",To="animation",Eo="transition",jo="transitionend",Do="animation",Mo="animationend";ko&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Eo="WebkitTransition",jo="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Do="WebkitAnimation",Mo="webkitAnimationEnd"));var No=K?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Io(t){No((function(){No(t)}))}function Ro(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),_o(t,e))}function Fo(t,e){t._transitionClasses&&y(t._transitionClasses,e),Oo(t,e)}function Po(t,e,n){var r=Lo(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===Ao?jo:Mo,u=0,c=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++u>=a&&c()};setTimeout((function(){u<a&&c()}),o+1),t.addEventListener(s,l)}var $o=/\b(transform|all)(,|$)/;function Lo(t,e){var n,r=window.getComputedStyle(t),i=(r[Eo+"Delay"]||"").split(", "),o=(r[Eo+"Duration"]||"").split(", "),a=zo(i,o),s=(r[Do+"Delay"]||"").split(", "),u=(r[Do+"Duration"]||"").split(", "),c=zo(s,u),l=0,h=0;e===Ao?a>0&&(n=Ao,l=a,h=o.length):e===To?c>0&&(n=To,l=c,h=u.length):(l=Math.max(a,c),n=l>0?a>c?Ao:To:null,h=n?n===Ao?o.length:u.length:0);var f=n===Ao&&$o.test(r[Eo+"Property"]);return{type:n,timeout:l,propCount:h,hasTransform:f}}function zo(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Bo(e)+Bo(t[n])})))}function Bo(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Uo(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=So(t.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var a=o.css,s=o.type,c=o.enterClass,l=o.enterToClass,h=o.enterActiveClass,f=o.appearClass,d=o.appearToClass,p=o.appearActiveClass,m=o.beforeEnter,v=o.enter,y=o.afterEnter,b=o.enterCancelled,x=o.beforeAppear,w=o.appear,_=o.afterAppear,O=o.appearCancelled,S=o.duration,C=jn,k=jn.$vnode;while(k&&k.parent)C=k.context,k=k.parent;var A=!C._isMounted||!t.isRootInsert;if(!A||w||""===w){var T=A&&f?f:c,E=A&&p?p:h,j=A&&d?d:l,D=A&&x||m,M=A&&"function"===typeof w?w:v,N=A&&_||y,I=A&&O||b,R=g(u(S)?S.enter:S);0;var F=!1!==a&&!et,P=Ho(M),L=n._enterCb=$((function(){F&&(Fo(n,j),Fo(n,E)),L.cancelled?(F&&Fo(n,T),I&&I(n)):N&&N(n),n._enterCb=null}));t.data.show||we(t,"insert",(function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),M&&M(n,L)})),D&&D(n),F&&(Ro(n,T),Ro(n,E),Io((function(){Fo(n,T),L.cancelled||(Ro(n,j),P||(Vo(R)?setTimeout(L,R):Po(n,s,L)))}))),t.data.show&&(e&&e(),M&&M(n,L)),F||P||L()}}}function Wo(t,e){var n=t.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=So(t.data.transition);if(r(o)||1!==n.nodeType)return e();if(!i(n._leaveCb)){var a=o.css,s=o.type,c=o.leaveClass,l=o.leaveToClass,h=o.leaveActiveClass,f=o.beforeLeave,d=o.leave,p=o.afterLeave,m=o.leaveCancelled,v=o.delayLeave,y=o.duration,b=!1!==a&&!et,x=Ho(d),w=g(u(y)?y.leave:y);0;var _=n._leaveCb=$((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(Fo(n,l),Fo(n,h)),_.cancelled?(b&&Fo(n,c),m&&m(n)):(e(),p&&p(n)),n._leaveCb=null}));v?v(O):O()}function O(){_.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),f&&f(n),b&&(Ro(n,c),Ro(n,h),Io((function(){Fo(n,c),_.cancelled||(Ro(n,l),x||(Vo(w)?setTimeout(_,w):Po(n,s,_)))}))),d&&d(n,_),b||x||_())}}function Vo(t){return"number"===typeof t&&!isNaN(t)}function Ho(t){if(r(t))return!1;var e=t.fns;return i(e)?Ho(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function qo(t,e){!0!==e.data.show&&Uo(e)}var Go=K?{create:qo,activate:qo,remove:function(t,e){!0!==t.data.show?Wo(t,e):e()}}:{},Xo=[Wi,qi,no,so,xo,Go],Yo=Xo.concat(Li),Ko=Di({nodeOps:Oi,modules:Yo});et&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&ia(t,"input")}));var Zo={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?we(n,"postpatch",(function(){Zo.componentUpdated(t,e,n)})):Jo(t,e,n.context),t._vOptions=[].map.call(t.options,ea)):("textarea"===n.tag||ci(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",na),t.addEventListener("compositionend",ra),t.addEventListener("change",ra),et&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Jo(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,ea);if(i.some((function(t,e){return!F(t,r[e])}))){var o=t.multiple?e.value.some((function(t){return ta(t,i)})):e.value!==e.oldValue&&ta(e.value,i);o&&ia(t,"change")}}}};function Jo(t,e,n){Qo(t,e,n),(tt||nt)&&setTimeout((function(){Qo(t,e,n)}),0)}function Qo(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],i)o=P(r,ea(a))>-1,a.selected!==o&&(a.selected=o);else if(F(ea(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function ta(t,e){return e.every((function(e){return!F(e,t)}))}function ea(t){return"_value"in t?t._value:t.value}function na(t){t.target.composing=!0}function ra(t){t.target.composing&&(t.target.composing=!1,ia(t.target,"input"))}function ia(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function oa(t){return!t.componentInstance||t.data&&t.data.transition?t:oa(t.componentInstance._vnode)}var aa={bind:function(t,e,n){var r=e.value;n=oa(n);var i=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Uo(n,(function(){t.style.display=o}))):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value,i=e.oldValue;if(!r!==!i){n=oa(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?Uo(n,(function(){t.style.display=t.__vOriginalDisplay})):Wo(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},sa={model:Zo,show:aa},ua={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ca(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?ca(On(e.children)):t}function la(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[O(o)]=i[o];return e}function ha(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function fa(t){while(t=t.parent)if(t.data.transition)return!0}function da(t,e){return e.key===t.key&&e.tag===t.tag}var pa=function(t){return t.tag||_n(t)},ga=function(t){return"show"===t.name},ma={name:"transition",props:ua,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(pa),n.length)){0;var r=this.mode;0;var i=n[0];if(fa(this.$vnode))return i;var o=ca(i);if(!o)return i;if(this._leaving)return ha(t,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=la(this),c=this._vnode,l=ca(c);if(o.data.directives&&o.data.directives.some(ga)&&(o.data.show=!0),l&&l.data&&!da(o,l)&&!_n(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var h=l.data.transition=D({},u);if("out-in"===r)return this._leaving=!0,we(h,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),ha(t,i);if("in-out"===r){if(_n(o))return c;var f,d=function(){f()};we(u,"afterEnter",d),we(u,"enterCancelled",d),we(h,"delayLeave",(function(t){f=t}))}}return i}}},va=D({tag:String,moveClass:String},ua);delete va.mode;var ya={props:va,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=Dn(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=la(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var c=[],l=[],h=0;h<r.length;h++){var f=r[h];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?c.push(f):l.push(f)}this.kept=t(e,null,c),this.removed=l}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(ba),t.forEach(xa),t.forEach(wa),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;Ro(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(jo,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(jo,t),n._moveCb=null,Fo(n,e))})}})))},methods:{hasMove:function(t,e){if(!ko)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){Oo(n,t)})),_o(n,e),n.style.display="none",this.$el.appendChild(n);var r=Lo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function ba(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function xa(t){t.data.newPos=t.elm.getBoundingClientRect()}function wa(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var _a={Transition:ma,TransitionGroup:ya};Or.config.mustUseProp=zr,Or.config.isReservedTag=oi,Or.config.isReservedAttr=$r,Or.config.getTagNamespace=ai,Or.config.isUnknownElement=ui,D(Or.options.directives,sa),D(Or.options.components,_a),Or.prototype.__patch__=K?Ko:N,Or.prototype.$mount=function(t,e){return t=t&&K?li(t):void 0,In(this,t,e)},K&&setTimeout((function(){U.devtools&&ct&&ct.emit("init",Or)}),0),e["default"]=Or}.call(this,n("c8ba"))},"2b17":function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("6d8b")),o=(i.isTypedArray,i.extend),a=(i.assert,i.each),s=i.isObject,u=n("e0d3"),c=u.getDataItemValue,l=u.isDataItemOption,h=n("3842"),f=h.parseDate,d=n("ec6f"),p=n("93d0"),g=p.SOURCE_FORMAT_TYPED_ARRAY,m=p.SOURCE_FORMAT_ARRAY_ROWS,v=p.SOURCE_FORMAT_ORIGINAL,y=p.SOURCE_FORMAT_OBJECT_ROWS;function b(t,e){d.isInstance(t)||(t=d.seriesDataToSource(t)),this._source=t;var n=this._data=t.data,r=t.sourceFormat;r===g&&(this._offset=0,this._dimSize=e,this._data=n);var i=w[r===m?r+"_"+t.seriesLayoutBy:r];o(this,i)}var x=b.prototype;x.pure=!1,x.persistent=!0,x.getSource=function(){return this._source};var w={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:S},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],n=this._data,r=0;r<n.length;r++){var i=n[r];e.push(i?i[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:_,getItem:O,appendData:S},keyedColumns:{pure:!0,count:function(){var t=this._source.dimensionsDefine[0].name,e=this._data[t];return e?e.length:0},getItem:function(t){for(var e=[],n=this._source.dimensionsDefine,r=0;r<n.length;r++){var i=this._data[n[r].name];e.push(i?i[t]:null)}return e},appendData:function(t){var e=this._data;a(t,(function(t,n){for(var r=e[n]||(e[n]=[]),i=0;i<(t||[]).length;i++)r.push(t[i])}))}},original:{count:_,getItem:O,appendData:S},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){t-=this._offset,e=e||[];for(var n=this._dimSize*t,r=0;r<this._dimSize;r++)e[r]=this._data[n+r];return e},appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}};function _(){return this._data.length}function O(t){return this._data[t]}function S(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}var C={arrayRows:k,objectRows:function(t,e,n,r){return null!=n?t[r]:t},keyedColumns:k,original:function(t,e,n,r){var i=c(t);return null!=n&&i instanceof Array?i[n]:i},typedArray:k};function k(t,e,n,r){return null!=n?t[n]:t}var A={arrayRows:T,objectRows:function(t,e,n,r){return E(t[e],this._dimensionInfos[e])},keyedColumns:T,original:function(t,e,n,r){var i=t&&(null==t.value?t:t.value);return!this._rawData.pure&&l(t)&&(this.hasItemOption=!0),E(i instanceof Array?i[r]:i,this._dimensionInfos[e])},typedArray:function(t,e,n,r){return t[r]}};function T(t,e,n,r){return E(t[r],this._dimensionInfos[e])}function E(t,e){var n=e&&e.type;if("ordinal"===n){var r=e&&e.ordinalMeta;return r?r.parseAndCollect(t):t}return"time"===n&&"number"!==typeof t&&null!=t&&"-"!==t&&(t=+f(t)),null==t||""===t?NaN:+t}function j(t,e,n){if(t){var r=t.getRawDataItem(e);if(null!=r){var i,o,a=t.getProvider().getSource().sourceFormat,s=t.getDimensionInfo(n);return s&&(i=s.name,o=s.index),C[a](r,e,o,i)}}}function D(t,e,n){if(t){var r=t.getProvider().getSource().sourceFormat;if(r===v||r===y){var i=t.getRawDataItem(e);return r!==v||s(i)||(i=null),i?i[n]:void 0}}}e.DefaultDataProvider=b,e.defaultDimValueGetters=A,e.retrieveRawValue=j,e.retrieveRawAttr=D},"2b3e":function(t,e,n){var r=n("585a"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},"2b61":function(t,e,n){var r=n("7d6d"),i=n("82eb"),o=i.ContextCachedBy,a=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],s=function(t){this.extendFrom(t,!1)};function u(t,e,n){var r=null==e.x?0:e.x,i=null==e.x2?1:e.x2,o=null==e.y?0:e.y,a=null==e.y2?0:e.y2;e.global||(r=r*n.width+n.x,i=i*n.width+n.x,o=o*n.height+n.y,a=a*n.height+n.y),r=isNaN(r)?0:r,i=isNaN(i)?1:i,o=isNaN(o)?0:o,a=isNaN(a)?0:a;var s=t.createLinearGradient(r,o,i,a);return s}function c(t,e,n){var r=n.width,i=n.height,o=Math.min(r,i),a=null==e.x?.5:e.x,s=null==e.y?.5:e.y,u=null==e.r?.5:e.r;e.global||(a=a*r+n.x,s=s*i+n.y,u*=o);var c=t.createRadialGradient(a,s,0,a,s,u);return c}s.prototype={constructor:s,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){var i=this,s=n&&n.style,u=!s||t.__attrCachedBy!==o.STYLE_BIND;t.__attrCachedBy=o.STYLE_BIND;for(var c=0;c<a.length;c++){var l=a[c],h=l[0];(u||i[h]!==s[h])&&(t[h]=r(t,h,i[h]||l[1]))}if((u||i.fill!==s.fill)&&(t.fillStyle=i.fill),(u||i.stroke!==s.stroke)&&(t.strokeStyle=i.stroke),(u||i.opacity!==s.opacity)&&(t.globalAlpha=null==i.opacity?1:i.opacity),(u||i.blend!==s.blend)&&(t.globalCompositeOperation=i.blend||"source-over"),this.hasStroke()){var f=i.lineWidth;t.lineWidth=f/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"===typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var r="radial"===e.type?c:u,i=r(t,e,n),o=e.colorStops,a=0;a<o.length;a++)i.addColorStop(o[a].offset,o[a].color);return i}};for(var l=s.prototype,h=0;h<a.length;h++){var f=a[h];f[0]in l||(l[f[0]]=f[1])}s.getGradient=l.getGradient;var d=s;t.exports=d},"2cdf":function(t,e){const n=/^[0-9]+$/,r=(t,e)=>{const r=n.test(t),i=n.test(e);return r&&i&&(t=+t,e=+e),t===e?0:r&&!i?-1:i&&!r?1:t<e?-1:1},i=(t,e)=>r(e,t);t.exports={compareIdentifiers:r,rcompareIdentifiers:i}},"2cf4":function(t,e){var n=1;"undefined"!==typeof window&&(n=Math.max(window.devicePixelRatio||1,1));var r=0,i=n;e.debugMode=r,e.devicePixelRatio=i},"2cf49":function(t,e,n){var r,i,o,a=n("da84"),s=n("d039"),u=n("c6b6"),c=n("0366"),l=n("1be4"),h=n("cc12"),f=n("1cdc"),d=a.location,p=a.setImmediate,g=a.clearImmediate,m=a.process,v=a.MessageChannel,y=a.Dispatch,b=0,x={},w="onreadystatechange",_=function(t){if(x.hasOwnProperty(t)){var e=x[t];delete x[t],e()}},O=function(t){return function(){_(t)}},S=function(t){_(t.data)},C=function(t){a.postMessage(t+"",d.protocol+"//"+d.host)};p&&g||(p=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return x[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},g=function(t){delete x[t]},"process"==u(m)?r=function(t){m.nextTick(O(t))}:y&&y.now?r=function(t){y.now(O(t))}:v&&!f?(i=new v,o=i.port2,i.port1.onmessage=S,r=c(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(C)||"file:"===d.protocol?r=w in h("script")?function(t){l.appendChild(h("script"))[w]=function(){l.removeChild(this),_(t)}}:function(t){setTimeout(O(t),0)}:(r=C,a.addEventListener("message",S,!1))),t.exports={set:p,clear:g}},"2d00":function(t,e,n){var r,i,o=n("da84"),a=n("342f"),s=o.process,u=s&&s.versions,c=u&&u.v8;c?(r=c.split("."),i=r[0]+r[1]):a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},"2f09":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("aed4");let i;const o="Visor",a="tfjs-visor-container";function s(){if("undefined"===typeof document)throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(a)&&null!=i)return i;let t,e=document.getElementById(a);function n(e,n){let i=null;return t=r.VisorComponent.render(e,t,{ref:t=>i=t,surfaceList:Array.from(n.values())}),i}null==e&&(e=document.createElement("div"),e.id=a,document.body.appendChild(e));const o=new Map,s=n(e,o);return i=new u(s,e,o,n),i}e.visor=s;class u{constructor(t,e,n,r){this.visorComponent=t,this.el=e,this.surfaceList=n,this.renderVisor=r}surface(t){const{name:e}=t,n=null==t.tab?o:t.tab;if(null==e||!("string"===typeof e||e instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");const r=Object.assign({},t,{tab:n}),i=`${e}-${n}`;return this.surfaceList.has(i)||this.surfaceList.set(i,r),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(e,n)}isFullscreen(){return this.visorComponent.isFullscreen()}isOpen(){return this.visorComponent.isOpen()}close(){return this.visorComponent.close()}open(){return this.visorComponent.open()}toggle(){return this.visorComponent.toggle()}toggleFullScreen(){return this.visorComponent.toggleFullScreen()}bindKeys(){return this.visorComponent.bindKeys()}unbindKeys(){return this.visorComponent.unbindKeys()}setActiveTab(t){const e=this.visorComponent.state.tabs;if(!e.has(t))throw new Error(`Tab '${t}' does not exist`);this.visorComponent.setState({activeTab:t})}}e.Visor=u},"2f45":function(t,e,n){var r=n("6d8b"),i=r.each,o=r.createHashMap,a=(r.assert,n("4e08")),s=(a.__DEV__,o(["tooltip","label","itemName","itemId","seriesName"]));function u(t){var e={},n=e.encode={},r=o(),a=[],u=[],l=e.userOutput={dimensionNames:t.dimensions.slice(),encode:{}};i(t.dimensions,(function(e){var i=t.getDimensionInfo(e),o=i.coordDim;if(o){var f=i.coordDimIndex;c(n,o)[f]=e,i.isExtraCoord||(r.set(o,1),h(i.type)&&(a[0]=e),c(l.encode,o)[f]=i.index),i.defaultTooltip&&u.push(e)}s.each((function(t,e){var r=c(n,e),o=i.otherDims[e];null!=o&&!1!==o&&(r[o]=i.name)}))}));var f=[],d={};r.each((function(t,e){var r=n[e];d[e]=r[0],f=f.concat(r)})),e.dataDimsOnCoord=f,e.encodeFirstDimNotExtra=d;var p=n.label;p&&p.length&&(a=p.slice());var g=n.tooltip;return g&&g.length?u=g.slice():u.length||(u=a.slice()),n.defaultedLabel=a,n.defaultedTooltip=u,e}function c(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function l(t){return"category"===t?"ordinal":"time"===t?"time":"float"}function h(t){return!("ordinal"===t||"time"===t)}e.OTHER_DIMENSIONS=s,e.summarizeDimensions=u,e.getDimensionTypeByAxis=l},3009:function(t,e,n){"use strict";n.r(e);var r=/[A-Z]/g,i=/^ms-/,o={};function a(t){return"-"+t.toLowerCase()}function s(t){if(o.hasOwnProperty(t))return o[t];var e=t.replace(r,a);return o[t]=i.test(e)?"-"+e:e}e["default"]=s},3014:function(t,e,n){var r=n("4f85"),i=n("3301"),o=r.extend({type:"series.__base_bar__",getInitialData:function(t,e){return i(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var n=e.dataToPoint(e.clampData(t)),r=this.getData(),i=r.getLayout("offset"),o=r.getLayout("size"),a=e.getBaseAxis().isHorizontal()?0:1;return n[a]+=i+o/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});t.exports=o},3034:function(t,e,n){const r=n("bbfd"),i=(t,e,n)=>new r(t,n).compare(new r(e,n));t.exports=i},3041:function(t,e,n){var r=n("e1fc"),i=n("0da8"),o=n("76a5"),a=n("d9fc"),s=n("c7a2"),u=n("ae69"),c=n("cb11"),l=n("cbe5"),h=n("87b1"),f=n("d498"),d=n("48a9"),p=n("2b61"),g=n("1687"),m=n("342d"),v=m.createFromString,y=n("6d8b"),b=y.isString,x=y.extend,w=y.defaults,_=y.trim,O=y.each,S=/[\s,]+/;function C(t){if(b(t)){var e=new DOMParser;t=e.parseFromString(t,"text/xml")}9===t.nodeType&&(t=t.firstChild);while("svg"!==t.nodeName.toLowerCase()||1!==t.nodeType)t=t.nextSibling;return t}function k(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}k.prototype.parse=function(t,e){e=e||{};var n=C(t);if(!n)throw new Error("Illegal svg");var i=new r;this._root=i;var o=n.getAttribute("viewBox")||"",a=parseFloat(n.getAttribute("width")||e.width),u=parseFloat(n.getAttribute("height")||e.height);isNaN(a)&&(a=null),isNaN(u)&&(u=null),N(n,i,null,!0);var c,l,h=n.firstChild;while(h)this._parseNode(h,i),h=h.nextSibling;if(o){var f=_(o).split(S);f.length>=4&&(c={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(c&&null!=a&&null!=u&&(l=z(c,a,u),!e.ignoreViewBox)){var d=i;i=new r,i.add(d),d.scale=l.scale.slice(),d.position=l.position.slice()}return e.ignoreRootClip||null==a||null==u||i.setClipPath(new s({shape:{x:0,y:0,width:a,height:u}})),{root:i,width:a,height:u,viewBoxRect:c,viewBoxTransform:l}},k.prototype._parseNode=function(t,e){var n,r=t.nodeName.toLowerCase();if("defs"===r?this._isDefine=!0:"text"===r&&(this._isText=!0),this._isDefine){var i=T[r];if(i){var o=i.call(this,t),a=t.getAttribute("id");a&&(this._defs[a]=o)}}else{i=A[r];i&&(n=i.call(this,t,e),e.add(n))}var s=t.firstChild;while(s)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===r?this._isDefine=!1:"text"===r&&(this._isText=!1)},k.prototype._parseText=function(t,e){if(1===t.nodeType){var n=t.getAttribute("dx")||0,r=t.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(r)}var i=new o({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});j(e,i),N(t,i,this._defs);var a=i.style.fontSize;a&&a<9&&(i.style.fontSize=9,i.scale=i.scale||[1,1],i.scale[0]*=a/9,i.scale[1]*=a/9);var s=i.getBoundingRect();return this._textX+=s.width,e.add(i),i};var A={g:function(t,e){var n=new r;return j(e,n),N(t,n,this._defs),n},rect:function(t,e){var n=new s;return j(e,n),N(t,n,this._defs),n.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),n},circle:function(t,e){var n=new a;return j(e,n),N(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),n},line:function(t,e){var n=new c;return j(e,n),N(t,n,this._defs),n.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),n},ellipse:function(t,e){var n=new u;return j(e,n),N(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),n},polygon:function(t,e){var n=t.getAttribute("points");n&&(n=D(n));var r=new h({shape:{points:n||[]}});return j(e,r),N(t,r,this._defs),r},polyline:function(t,e){var n=new l;j(e,n),N(t,n,this._defs);var r=t.getAttribute("points");r&&(r=D(r));var i=new f({shape:{points:r||[]}});return i},image:function(t,e){var n=new i;return j(e,n),N(t,n,this._defs),n.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),n},text:function(t,e){var n=t.getAttribute("x")||0,i=t.getAttribute("y")||0,o=t.getAttribute("dx")||0,a=t.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(o),this._textY=parseFloat(i)+parseFloat(a);var s=new r;return j(e,s),N(t,s,this._defs),s},tspan:function(t,e){var n=t.getAttribute("x"),i=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var o=t.getAttribute("dx")||0,a=t.getAttribute("dy")||0,s=new r;return j(e,s),N(t,s,this._defs),this._textX+=o,this._textY+=a,s},path:function(t,e){var n=t.getAttribute("d")||"",r=v(n);return j(e,r),N(t,r,this._defs),r}},T={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||0,10),n=parseInt(t.getAttribute("y1")||0,10),r=parseInt(t.getAttribute("x2")||10,10),i=parseInt(t.getAttribute("y2")||0,10),o=new d(e,n,r,i);return E(t,o),o},radialgradient:function(t){}};function E(t,e){var n=t.firstChild;while(n){if(1===n.nodeType){var r=n.getAttribute("offset");r=r.indexOf("%")>0?parseInt(r,10)/100:r?parseFloat(r):0;var i=n.getAttribute("stop-color")||"#000000";e.addColorStop(r,i)}n=n.nextSibling}}function j(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),w(e.__inheritedStyle,t.__inheritedStyle))}function D(t){for(var e=_(t).split(S),n=[],r=0;r<e.length;r+=2){var i=parseFloat(e[r]),o=parseFloat(e[r+1]);n.push([i,o])}return n}var M={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function N(t,e,n,r){var i=e.__inheritedStyle||{},o="text"===e.type;if(1===t.nodeType&&(P(t,e),x(i,L(t)),!r))for(var a in M)if(M.hasOwnProperty(a)){var s=t.getAttribute(a);null!=s&&(i[M[a]]=s)}var u=o?"textFill":"fill",c=o?"textStroke":"stroke";e.style=e.style||new p;var l=e.style;null!=i.fill&&l.set(u,R(i.fill,n)),null!=i.stroke&&l.set(c,R(i.stroke,n)),O(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(t){var e="lineWidth"===t&&o?"textStrokeWidth":t;null!=i[t]&&l.set(e,parseFloat(i[t]))})),i.textBaseline&&"auto"!==i.textBaseline||(i.textBaseline="alphabetic"),"alphabetic"===i.textBaseline&&(i.textBaseline="bottom"),"start"===i.textAlign&&(i.textAlign="left"),"end"===i.textAlign&&(i.textAlign="right"),O(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],(function(t){null!=i[t]&&l.set(t,i[t])})),i.lineDash&&(e.style.lineDash=_(i.lineDash).split(S)),l[c]&&"none"!==l[c]&&(e[c]=!0),e.__inheritedStyle=i}var I=/url\(\s*#(.*?)\)/;function R(t,e){var n=e&&t&&t.match(I);if(n){var r=_(n[1]),i=e[r];return i}return t}var F=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;function P(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var r=null,i=[];n.replace(F,(function(t,e,n){i.push(e,n)}));for(var o=i.length-1;o>0;o-=2){var a=i[o],s=i[o-1];switch(r=r||g.create(),s){case"translate":a=_(a).split(S),g.translate(r,r,[parseFloat(a[0]),parseFloat(a[1]||0)]);break;case"scale":a=_(a).split(S),g.scale(r,r,[parseFloat(a[0]),parseFloat(a[1]||a[0])]);break;case"rotate":a=_(a).split(S),g.rotate(r,r,parseFloat(a[0]));break;case"skew":a=_(a).split(S),console.warn("Skew transform is not supported yet");break;case"matrix":a=_(a).split(S);r[0]=parseFloat(a[0]),r[1]=parseFloat(a[1]),r[2]=parseFloat(a[2]),r[3]=parseFloat(a[3]),r[4]=parseFloat(a[4]),r[5]=parseFloat(a[5]);break}}e.setLocalTransform(r)}}var $=/([^\s:;]+)\s*:\s*([^:;]+)/g;function L(t){var e=t.getAttribute("style"),n={};if(!e)return n;var r,i={};$.lastIndex=0;while(null!=(r=$.exec(e)))i[r[1]]=r[2];for(var o in M)M.hasOwnProperty(o)&&null!=i[o]&&(n[M[o]]=i[o]);return n}function z(t,e,n){var r=e/t.width,i=n/t.height,o=Math.min(r,i),a=[o,o],s=[-(t.x+t.width/2)*o+e/2,-(t.y+t.height/2)*o+n/2];return{scale:a,position:s}}function B(t,e){var n=new k;return n.parse(t,e)}e.parseXML=C,e.makeViewBoxTransform=z,e.parseSVG=B},"30a3":function(t,e,n){var r=n("6d8b"),i=n("607d"),o=i.Dispatcher,a=n("98b7"),s=n("06ad"),u=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,o.call(this)};u.prototype={constructor:u,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=r.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,r=n.length,i=[],o=[],a=0;a<r;a++){var s=n[a],u=s.step(t,e);u&&(i.push(u),o.push(s))}for(a=0;a<r;)n[a]._needsRemove?(n[a]=n[r-1],n.pop(),r--):a++;r=i.length;for(a=0;a<r;a++)o[a].fire(i[a]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;function e(){t._running&&(a(e),!t._paused&&t._update())}this._running=!0,a(e)},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){e=e||{};var n=new s(t,e.loop,e.getter,e.setter);return this.addAnimator(n),n}},r.mixin(u,o);var c=u;t.exports=c},"30bf":function(t,e,n){"use strict";function r(){}n.r(e),n.d(e,"h",(function(){return s})),n.d(e,"createElement",(function(){return s})),n.d(e,"cloneElement",(function(){return l})),n.d(e,"Component",(function(){return U})),n.d(e,"render",(function(){return W})),n.d(e,"rerender",(function(){return p})),n.d(e,"options",(function(){return i}));var i={},o=[],a=[];function s(t,e){var n,s,u,c,l=a;for(c=arguments.length;c-- >2;)o.push(arguments[c]);e&&null!=e.children&&(o.length||o.push(e.children),delete e.children);while(o.length)if((s=o.pop())&&void 0!==s.pop)for(c=s.length;c--;)o.push(s[c]);else"boolean"===typeof s&&(s=null),(u="function"!==typeof t)&&(null==s?s="":"number"===typeof s?s=String(s):"string"!==typeof s&&(u=!1)),u&&n?l[l.length-1]+=s:l===a?l=[s]:l.push(s),n=u;var h=new r;return h.nodeName=t,h.children=l,h.attributes=null==e?void 0:e,h.key=null==e?void 0:e.key,void 0!==i.vnode&&i.vnode(h),h}function u(t,e){for(var n in e)t[n]=e[n];return t}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function l(t,e){return s(t.nodeName,u(u({},t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}var h=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,f=[];function d(t){!t._dirty&&(t._dirty=!0)&&1==f.push(t)&&(i.debounceRendering||c)(p)}function p(){var t,e=f;f=[];while(t=e.pop())t._dirty&&L(t)}function g(t,e,n){return"string"===typeof e||"number"===typeof e?void 0!==t.splitText:"string"===typeof e.nodeName?!t._componentConstructor&&m(t,e.nodeName):n||t._componentConstructor===e.nodeName}function m(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function v(t){var e=u({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===e[r]&&(e[r]=n[r]);return e}function y(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}function b(t){var e=t.parentNode;e&&e.removeChild(t)}function x(t,e,n,r,i){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)n&&n(null),r&&r(t);else if("class"!==e||i)if("style"===e){if(r&&"string"!==typeof r&&"string"!==typeof n||(t.style.cssText=r||""),r&&"object"===typeof r){if("string"!==typeof n)for(var o in n)o in r||(t.style[o]="");for(var o in r)t.style[o]="number"===typeof r[o]&&!1===h.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var a=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?n||t.addEventListener(e,_,a):t.removeEventListener(e,_,a),(t._listeners||(t._listeners={}))[e]=r}else if("list"!==e&&"type"!==e&&!i&&e in t)w(t,e,null==r?"":r),null!=r&&!1!==r||t.removeAttribute(e);else{var s=i&&e!==(e=e.replace(/^xlink:?/,""));null==r||!1===r?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!==typeof r&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}else t.className=r||""}function w(t,e,n){try{t[e]=n}catch(r){}}function _(t){return this._listeners[t.type](i.event&&i.event(t)||t)}var O=[],S=0,C=!1,k=!1;function A(){var t;while(t=O.pop())i.afterMount&&i.afterMount(t),t.componentDidMount&&t.componentDidMount()}function T(t,e,n,r,i,o){S++||(C=null!=i&&void 0!==i.ownerSVGElement,k=null!=t&&!("__preactattr_"in t));var a=E(t,e,n,r,o);return i&&a.parentNode!==i&&i.appendChild(a),--S||(k=!1,o||A()),a}function E(t,e,n,r,i){var o=t,a=C;if(null!=e&&"boolean"!==typeof e||(e=""),"string"===typeof e||"number"===typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),D(t,!0))),o["__preactattr_"]=!0,o;var s=e.nodeName;if("function"===typeof s)return z(t,e,n,r);if(C="svg"===s||"foreignObject"!==s&&C,s=String(s),(!t||!m(t,s))&&(o=y(s,C),t)){while(t.firstChild)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),D(t,!0)}var u=o.firstChild,c=o["__preactattr_"],l=e.children;if(null==c){c=o["__preactattr_"]={};for(var h=o.attributes,f=h.length;f--;)c[h[f].name]=h[f].value}return!k&&l&&1===l.length&&"string"===typeof l[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=l[0]&&(u.nodeValue=l[0]):(l&&l.length||null!=u)&&j(o,l,n,r,k||null!=c.dangerouslySetInnerHTML),N(o,e.attributes,c),C=a,o}function j(t,e,n,r,i){var o,a,s,u,c,l=t.childNodes,h=[],f={},d=0,p=0,m=l.length,v=0,y=e?e.length:0;if(0!==m)for(var x=0;x<m;x++){var w=l[x],_=w["__preactattr_"],O=y&&_?w._component?w._component.__key:_.key:null;null!=O?(d++,f[O]=w):(_||(void 0!==w.splitText?!i||w.nodeValue.trim():i))&&(h[v++]=w)}if(0!==y)for(x=0;x<y;x++){u=e[x],c=null;O=u.key;if(null!=O)d&&void 0!==f[O]&&(c=f[O],f[O]=void 0,d--);else if(!c&&p<v)for(o=p;o<v;o++)if(void 0!==h[o]&&g(a=h[o],u,i)){c=a,h[o]=void 0,o===v-1&&v--,o===p&&p++;break}c=E(c,u,n,r),s=l[x],c&&c!==t&&c!==s&&(null==s?t.appendChild(c):c===s.nextSibling?b(s):t.insertBefore(c,s))}if(d)for(var x in f)void 0!==f[x]&&D(f[x],!1);while(p<=v)void 0!==(c=h[v--])&&D(c,!1)}function D(t,e){var n=t._component;n?B(n):(null!=t["__preactattr_"]&&t["__preactattr_"].ref&&t["__preactattr_"].ref(null),!1!==e&&null!=t["__preactattr_"]||b(t),M(t))}function M(t){t=t.lastChild;while(t){var e=t.previousSibling;D(t,!0),t=e}}function N(t,e,n){var r;for(r in n)e&&null!=e[r]||null==n[r]||x(t,r,n[r],n[r]=void 0,C);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||x(t,r,n[r],n[r]=e[r],C)}var I={};function R(t){var e=t.constructor.name;(I[e]||(I[e]=[])).push(t)}function F(t,e,n){var r,i=I[t.name];if(t.prototype&&t.prototype.render?(r=new t(e,n),U.call(r,e,n)):(r=new U(e,n),r.constructor=t,r.render=P),i)for(var o=i.length;o--;)if(i[o].constructor===t){r.nextBase=i[o].nextBase,i.splice(o,1);break}return r}function P(t,e,n){return this.constructor(t,n)}function $(t,e,n,r,o){t._disable||(t._disable=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,!t.base||o?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r),r&&r!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=r),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==n&&(1!==n&&!1===i.syncComponentUpdates&&t.base?d(t):L(t,1,o)),t.__ref&&t.__ref(t))}function L(t,e,n,r){if(!t._disable){var o,a,s,c=t.props,l=t.state,h=t.context,f=t.prevProps||c,d=t.prevState||l,p=t.prevContext||h,g=t.base,m=t.nextBase,y=g||m,b=t._component,x=!1;if(g&&(t.props=f,t.state=d,t.context=p,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(c,l,h)?x=!0:t.componentWillUpdate&&t.componentWillUpdate(c,l,h),t.props=c,t.state=l,t.context=h),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!x){o=t.render(c,l,h),t.getChildContext&&(h=u(u({},h),t.getChildContext()));var w,_,C=o&&o.nodeName;if("function"===typeof C){var k=v(o);a=b,a&&a.constructor===C&&k.key==a.__key?$(a,k,1,h,!1):(w=a,t._component=a=F(C,k,h),a.nextBase=a.nextBase||m,a._parentComponent=t,$(a,k,0,h,!1),L(a,1,n,!0)),_=a.base}else s=y,w=b,w&&(s=t._component=null),(y||1===e)&&(s&&(s._component=null),_=T(s,o,h,n||!g,y&&y.parentNode,!0));if(y&&_!==y&&a!==b){var E=y.parentNode;E&&_!==E&&(E.replaceChild(_,y),w||(y._component=null,D(y,!1)))}if(w&&B(w),t.base=_,_&&!r){var j=t,M=t;while(M=M._parentComponent)(j=M).base=_;_._component=j,_._componentConstructor=j.constructor}}if(!g||n?O.unshift(t):x||(t.componentDidUpdate&&t.componentDidUpdate(f,d,p),i.afterUpdate&&i.afterUpdate(t)),null!=t._renderCallbacks)while(t._renderCallbacks.length)t._renderCallbacks.pop().call(t);S||r||A()}}function z(t,e,n,r){var i=t&&t._component,o=i,a=t,s=i&&t._componentConstructor===e.nodeName,u=s,c=v(e);while(i&&!u&&(i=i._parentComponent))u=i.constructor===e.nodeName;return i&&u&&(!r||i._component)?($(i,c,3,n,r),t=i.base):(o&&!s&&(B(o),t=a=null),i=F(e.nodeName,c,n),t&&!i.nextBase&&(i.nextBase=t,a=null),$(i,c,1,n,r),t=i.base,a&&t!==a&&(a._component=null,D(a,!1))),t}function B(t){i.beforeUnmount&&i.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?B(n):e&&(e["__preactattr_"]&&e["__preactattr_"].ref&&e["__preactattr_"].ref(null),t.nextBase=e,b(e),R(t),M(e)),t.__ref&&t.__ref(null)}function U(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{}}function W(t,e,n){return T(n,t,{},!1,e,!1)}u(U.prototype,{setState:function(t,e){var n=this.state;this.prevState||(this.prevState=u({},n)),u(n,"function"===typeof t?t(n,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),d(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),L(this,2)},render:function(){}});var V={h:s,createElement:s,cloneElement:l,Component:U,render:W,rerender:p,options:i};e["default"]=V},"31bb":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},"320c":function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function s(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}t.exports=s()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]),n)i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},3301:function(t,e,n){var r=n("6d8b"),i=n("6179"),o=n("b1d4"),a=n("93d0"),s=a.SOURCE_FORMAT_ORIGINAL,u=n("2f45"),c=u.getDimensionTypeByAxis,l=n("e0d3"),h=l.getDataItemValue,f=n("2039"),d=n("8b7f"),p=d.getCoordSysInfoBySeries,g=n("ec6f"),m=n("ee1a"),v=m.enableDataStack,y=n("0f99"),b=y.makeSeriesEncodeForAxisCoordSys;function x(t,e,n){n=n||{},g.isInstance(t)||(t=g.seriesDataToSource(t));var a,s=e.get("coordinateSystem"),u=f.get(s),l=p(e);l&&(a=r.map(l.coordSysDims,(function(t){var e={name:t},n=l.axisMap.get(t);if(n){var r=n.get("type");e.type=c(r)}return e}))),a||(a=u&&(u.getDimensionsInfo?u.getDimensionsInfo():u.dimensions.slice())||["x","y"]);var h,d,m=o(t,{coordDimensions:a,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?r.curry(b,a,e):null});l&&r.each(m,(function(t,e){var n=t.coordDim,r=l.categoryAxisMap.get(n);r&&(null==h&&(h=e),t.ordinalMeta=r.getOrdinalMeta()),null!=t.otherDims.itemName&&(d=!0)})),d||null==h||(m[h].otherDims.itemName=0);var y=v(e,m),x=new i(m,e);x.setCalculationInfo(y);var _=null!=h&&w(t)?function(t,e,n,r){return r===h?n:this.defaultDimValueGetter(t,e,n,r)}:null;return x.hasItemOption=!1,x.initData(t,null,_),x}function w(t){if(t.sourceFormat===s){var e=_(t.data||[]);return null!=e&&!r.isArray(h(e))}}function _(t){var e=0;while(e<t.length&&null==t[e])e++;return t[e]}var O=x;t.exports=O},"342d":function(t,e,n){var r=n("cbe5"),i=n("20c8"),o=n("ee84"),a=Math.sqrt,s=Math.sin,u=Math.cos,c=Math.PI,l=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},h=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(l(t)*l(e))},f=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(h(t,e))};function d(t,e,n,r,i,o,l,d,p,g,m){var v=p*(c/180),y=u(v)*(t-n)/2+s(v)*(e-r)/2,b=-1*s(v)*(t-n)/2+u(v)*(e-r)/2,x=y*y/(l*l)+b*b/(d*d);x>1&&(l*=a(x),d*=a(x));var w=(i===o?-1:1)*a((l*l*(d*d)-l*l*(b*b)-d*d*(y*y))/(l*l*(b*b)+d*d*(y*y)))||0,_=w*l*b/d,O=w*-d*y/l,S=(t+n)/2+u(v)*_-s(v)*O,C=(e+r)/2+s(v)*_+u(v)*O,k=f([1,0],[(y-_)/l,(b-O)/d]),A=[(y-_)/l,(b-O)/d],T=[(-1*y-_)/l,(-1*b-O)/d],E=f(A,T);h(A,T)<=-1&&(E=c),h(A,T)>=1&&(E=0),0===o&&E>0&&(E-=2*c),1===o&&E<0&&(E+=2*c),m.addData(g,S,C,l,d,k,E,v,o)}var p=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,g=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function m(t){if(!t)return new i;for(var e,n=0,r=0,o=n,a=r,s=new i,u=i.CMD,c=t.match(p),l=0;l<c.length;l++){for(var h,f=c[l],m=f.charAt(0),v=f.match(g)||[],y=v.length,b=0;b<y;b++)v[b]=parseFloat(v[b]);var x=0;while(x<y){var w,_,O,S,C,k,A,T=n,E=r;switch(m){case"l":n+=v[x++],r+=v[x++],h=u.L,s.addData(h,n,r);break;case"L":n=v[x++],r=v[x++],h=u.L,s.addData(h,n,r);break;case"m":n+=v[x++],r+=v[x++],h=u.M,s.addData(h,n,r),o=n,a=r,m="l";break;case"M":n=v[x++],r=v[x++],h=u.M,s.addData(h,n,r),o=n,a=r,m="L";break;case"h":n+=v[x++],h=u.L,s.addData(h,n,r);break;case"H":n=v[x++],h=u.L,s.addData(h,n,r);break;case"v":r+=v[x++],h=u.L,s.addData(h,n,r);break;case"V":r=v[x++],h=u.L,s.addData(h,n,r);break;case"C":h=u.C,s.addData(h,v[x++],v[x++],v[x++],v[x++],v[x++],v[x++]),n=v[x-2],r=v[x-1];break;case"c":h=u.C,s.addData(h,v[x++]+n,v[x++]+r,v[x++]+n,v[x++]+r,v[x++]+n,v[x++]+r),n+=v[x-2],r+=v[x-1];break;case"S":w=n,_=r;var j=s.len(),D=s.data;e===u.C&&(w+=n-D[j-4],_+=r-D[j-3]),h=u.C,T=v[x++],E=v[x++],n=v[x++],r=v[x++],s.addData(h,w,_,T,E,n,r);break;case"s":w=n,_=r;j=s.len(),D=s.data;e===u.C&&(w+=n-D[j-4],_+=r-D[j-3]),h=u.C,T=n+v[x++],E=r+v[x++],n+=v[x++],r+=v[x++],s.addData(h,w,_,T,E,n,r);break;case"Q":T=v[x++],E=v[x++],n=v[x++],r=v[x++],h=u.Q,s.addData(h,T,E,n,r);break;case"q":T=v[x++]+n,E=v[x++]+r,n+=v[x++],r+=v[x++],h=u.Q,s.addData(h,T,E,n,r);break;case"T":w=n,_=r;j=s.len(),D=s.data;e===u.Q&&(w+=n-D[j-4],_+=r-D[j-3]),n=v[x++],r=v[x++],h=u.Q,s.addData(h,w,_,n,r);break;case"t":w=n,_=r;j=s.len(),D=s.data;e===u.Q&&(w+=n-D[j-4],_+=r-D[j-3]),n+=v[x++],r+=v[x++],h=u.Q,s.addData(h,w,_,n,r);break;case"A":O=v[x++],S=v[x++],C=v[x++],k=v[x++],A=v[x++],T=n,E=r,n=v[x++],r=v[x++],h=u.A,d(T,E,n,r,k,A,O,S,C,h,s);break;case"a":O=v[x++],S=v[x++],C=v[x++],k=v[x++],A=v[x++],T=n,E=r,n+=v[x++],r+=v[x++],h=u.A,d(T,E,n,r,k,A,O,S,C,h,s);break}}"z"!==m&&"Z"!==m||(h=u.Z,s.addData(h),n=o,r=a),e=h}return s.toStatic(),s}function v(t,e){var n=m(t);return e=e||{},e.buildPath=function(t){if(t.setData){t.setData(n.data);var e=t.getContext();e&&t.rebuildPath(e)}else{e=t;n.rebuildPath(e)}},e.applyTransform=function(t){o(n,t),this.dirty(!0)},e}function y(t,e){return new r(v(t,e))}function b(t,e){return r.extend(v(t,e))}function x(t,e){for(var n=[],i=t.length,o=0;o<i;o++){var a=t[o];a.path||a.createPathProxy(),a.__dirtyPath&&a.buildPath(a.path,a.shape,!0),n.push(a.path)}var s=new r(e);return s.createPathProxy(),s.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},s}e.createFromString=y,e.extendFromString=b,e.mergePath=x},"342f":function(t,e,n){var r=n("d066");t.exports=r("navigator","userAgent")||""},"34d7":function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"f",(function(){return v})),n.d(e,"e",(function(){return y})),n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return x})),n.d(e,"c",(function(){return w}));var r=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i=20,o=3,a=7;function s(t,e,n,i){const o=Object(r["computeStrides"])(e),a=u(t,e,n,o),s=e.length,c=h(t,e,n,o,a),l=["Tensor"];return i&&(l.push("  dtype: "+n),l.push("  rank: "+s),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(c.map(t=>"    "+t).join("\n")),l.join("\n")}function u(t,e,n,i){const o=Object(r["sizeFromShape"])(e),a=i[i.length-1],s=new Array(a).fill(0),u=e.length,l="complex64"===n?f(t):t;if(u>1)for(let r=0;r<o/a;r++){const t=r*a;for(let e=0;e<a;e++)s[e]=Math.max(s[e],c(l[t+e],0,n).length)}return s}function c(t,e,n){let i;return i=Array.isArray(t)?parseFloat(t[0].toFixed(a))+" + "+parseFloat(t[1].toFixed(a))+"j":Object(r["isString"])(t)?`'${t}'`:"bool"===n?l(t):parseFloat(t.toFixed(a)).toString(),Object(r["rightPad"])(i,e)}function l(t){return 0===t?"false":"true"}function h(t,e,n,r,a,s=!0){const u="complex64"===n?2:1,d=e[0],p=e.length;if(0===p){if("complex64"===n){const e=f(t);return[c(e[0],0,n)]}return"bool"===n?[l(t[0])]:[t[0].toString()]}if(1===p){if(d>i){const e=o*u;let r=Array.from(t.slice(0,e)),i=Array.from(t.slice((d-o)*u,d*u));return"complex64"===n&&(r=f(r),i=f(i)),["["+r.map((t,e)=>c(t,a[e],n)).join(", ")+", ..., "+i.map((t,e)=>c(t,a[d-o+e],n)).join(", ")+"]"]}const e="complex64"===n?f(t):Array.from(t);return["["+e.map((t,e)=>c(t,a[e],n)).join(", ")+"]"]}const g=e.slice(1),m=r.slice(1),v=r[0]*u,y=[];if(d>i){for(let e=0;e<o;e++){const r=e*v,i=r+v;y.push(...h(t.slice(r,i),g,n,m,a,!1))}y.push("...");for(let e=d-o;e<d;e++){const r=e*v,i=r+v;y.push(...h(t.slice(r,i),g,n,m,a,e===d-1))}}else for(let i=0;i<d;i++){const e=i*v,r=e+v;y.push(...h(t.slice(e,r),g,n,m,a,i===d-1))}const b=2===p?",":"";y[0]="["+y[0]+b;for(let i=1;i<y.length-1;i++)y[i]=" "+y[i]+b;let x=",\n";for(let i=2;i<p;i++)x+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(s?"":x),y}function f(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d{constructor(t,e,n){if(this.dtype=e,this.shape=t.slice(),this.size=r["sizeFromShape"](t),null!=n){const t=n.length;r["assert"](t===this.size,()=>`Length of values '${t}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||r["getArrayFromDType"](e,this.size),this.strides=Object(r["computeStrides"])(t)}set(t,...e){0===e.length&&(e=[0]),r["assert"](e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);const n=this.locToIndex(e);this.values[n]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e]){const e=`Requested out of range element at ${t}.   Buffer shape=`+this.shape;throw new Error(e)}e++}let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return p().makeTensor(this.values,this.shape,this.dtype)}}let p=null,g=null,m=null;function v(t){p=t}function y(t){g=t}function b(t){m=t}class x{constructor(t,e,n,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=r["sizeFromShape"](t),this.strides=Object(r["computeStrides"])(t),this.dataId=n,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return g.buffer(this.shape,this.dtype,t)}bufferSync(){return g.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return Object(r["toNestedArray"])(this.shape,t)}arraySync(){return Object(r["toNestedArray"])(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const t=p().read(this.dataId);if("string"===this.dtype){const n=await t;try{return n.map(t=>r["decodeString"](t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataSync(){this.throwIfDisposed();const t=p().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>r["decodeString"](t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await p().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(p().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return g.print(this,t)}clone(){return this.throwIfDisposed(),g.clone(this)}toString(t=!1){const e=this.dataSync();return s(e,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),g.cast(this,t)}variable(t=!0,e,n){return this.throwIfDisposed(),p().makeVariable(this,t,e,n)}}Object.defineProperty(x,Symbol.hasInstance,{value:t=>!!t&&null!=t.dataId&&null!=t.shape&&null!=t.dtype});class w extends x{constructor(t,e,n,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=n}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!r["arraysEqual"](t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);p().disposeTensor(this),this.dataId=t.dataId,p().incRef(this,null)}dispose(){p().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(w,Symbol.hasInstance,{value:t=>t instanceof x&&null!=t.assign&&t.assign instanceof Function})},"350f":function(t,e,n){"use strict";(function(t){n.d(e,"f",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return g})),n.d(e,"c",(function(){return m})),n.d(e,"g",(function(){return v}));var r=n("0777"),i=n("357d"),o=n("eb7e"),a=n("9847");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const s=4;async function u(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);for(let a=0;a<i.length;++a){const o=i[a],u=Array.isArray(t)?t[a].tensor:t[o];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype&&"complex64"!==u.dtype)throw new Error(`Unsupported dtype in weight '${o}': ${u.dtype}`);const c={name:o,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){const t=new Promise(async t=>{const e=await u.bytes(),n=e.reduce((t,e)=>t+e.length,0)+s*e.length,r=new Uint8Array(n);let i=0;for(let o=0;o<e.length;o++){const t=e[o],n=new Uint8Array(new Uint32Array([t.length]).buffer);r.set(n,i),i+=s,r.set(t,i),i+=t.length}t(r)});r.push(t)}else r.push(u.data());null!=e&&(c.group=e),n.push(c)}const o=await Promise.all(r);return{data:l(o),specs:n}}function c(t,e){const n={};let u,c=0;for(const l of e){const e=l.name,h=l.dtype,f=l.shape,d=Object(o["sizeFromShape"])(f);let p;if("quantization"in l){const n=l.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${l.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${l.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==h)throw new Error(`Weight ${l.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${h}.`)}const r=a["a"][n.dtype],i=t.slice(c,c+d*r),o="uint8"===n.dtype?new Uint8Array(i):new Uint16Array(i);if("float32"===h)if("uint8"===n.dtype||"uint16"===n.dtype){p=new Float32Array(o.length);for(let t=0;t<o.length;t++){const e=o[t];p[t]=e*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===u&&(u=w()),p=u(o)}else{if("int32"!==h)throw new Error(`Unsupported dtype in weight '${e}': ${h}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);p=new Int32Array(o.length);for(let t=0;t<o.length;t++){const e=o[t];p[t]=Math.round(e*n.scale+n.min)}}c+=d*r}else if("string"===h){const e=Object(o["sizeFromShape"])(l.shape);p=[];for(let n=0;n<e;n++){const e=new Uint32Array(t.slice(c,c+s))[0];c+=s;const n=new Uint8Array(t.slice(c,c+e));p.push(n),c+=e}}else{const o=a["a"][h],s=t.slice(c,c+d*o);if("float32"===h)p=new Float32Array(s);else if("int32"===h)p=new Int32Array(s);else if("bool"===h)p=new Uint8Array(s);else{if("complex64"!==h)throw new Error(`Unsupported dtype in weight '${e}': ${h}`);{p=new Float32Array(s);const t=new Float32Array(p.length/2),o=new Float32Array(p.length/2);for(let e=0;e<t.length;e++)t[e]=p[2*e],o[e]=p[2*e+1];const a=Object(i["a"])(t,f,"float32"),u=Object(i["a"])(o,f,"float32");n[e]=Object(r["a"])(a,u)}}c+=d*o}"complex64"!==h&&(n[e]=Object(i["a"])(p,f,h))}return n}function l(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));let e=0;const n=[];t.forEach(t=>{if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)});const r=new Uint8Array(e);let i=0;return n.forEach(t=>{r.set(new Uint8Array(t.buffer),i),i+=t.byteLength}),r.buffer}const h="undefined"!==typeof t&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function f(e){return h?t.byteLength(e):new Blob([e]).size}function d(e){if(h)return t.from(e).toString("base64");const n=new Uint8Array(e);let r="";for(let t=0,i=n.length;t<i;t++)r+=String.fromCharCode(n[t]);return btoa(r)}function p(e){if(h){const n=t.from(e,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(e),r=new Uint8Array(n.length);for(let t=0;t<n.length;++t)r.set([n.charCodeAt(t)],t);return r.buffer}function g(t){if(1===t.length)return t[0];let e=0;t.forEach(t=>{e+=t.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function m(t){const e="/";t=t.trim();while(t.endsWith(e))t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function v(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:f(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:f(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function y(){const t=t=>{let e=t<<13,n=0;while(0===(8388608&e))n-=8388608,e<<=1;return e&=-8388609,n+=947912704,e|n},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function b(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function x(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function w(){const t=y(),e=b(),n=x();return r=>{const i=new ArrayBuffer(4*r.length),o=new Uint32Array(i);for(let a=0;a<r.length;a++){const i=r[a],s=t[n[i>>10]+(1023&i)]+e[i>>10];o[a]=s}return new Float32Array(i)}}}).call(this,n("b639").Buffer)},"357d":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("a3f7"),i=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n){const o=Object(r["c"])(t,n);return Object(i["a"])(t,e,o,n)}},"35a1":function(t,e,n){var r=n("f5df"),i=n("3f8c"),o=n("b622"),a=o("iterator");t.exports=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||i[r(t)]}},3601:function(t,e,n){"use strict";var r=/-(.)/g;function i(t){return t.replace(r,(function(t,e){return e.toUpperCase()}))}t.exports=i},3729:function(t,e,n){var r=n("9e69"),i=n("00fd"),o=n("29f3"),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;function c(t){return null==t?void 0===t?s:a:u&&u in Object(t)?i(t):o(t)}t.exports=c},"37e8":function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),a=n("df75");t.exports=r?Object.defineProperties:function(t,e){o(t);var n,r=a(e),s=r.length,u=0;while(s>u)i.f(t,n=r[u++],e[n]);return t}},3835:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return u}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function i(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}}n("a630"),n("fb6a"),n("b0c0"),n("25f0");function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){return r(t)||i(t,e)||a(t,e)||s()}},3842:function(t,e,n){var r=n("6d8b"),i=1e-4;function o(t){return t.replace(/^\s+|\s+$/g,"")}function a(t,e,n,r){var i=e[1]-e[0],o=n[1]-n[0];if(0===i)return 0===o?n[0]:(n[0]+n[1])/2;if(r)if(i>0){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/i*o+n[0]}function s(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return"string"===typeof t?o(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function u(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t}function c(t){return t.sort((function(t,e){return t-e})),t}function l(t){if(t=+t,isNaN(t))return 0;var e=1,n=0;while(Math.round(t*e)/e!==t)e*=10,n++;return n}function h(t){var e=t.toString(),n=e.indexOf("e");if(n>0){var r=+e.slice(n+1);return r<0?-r:0}var i=e.indexOf(".");return i<0?0:e.length-1-i}function f(t,e){var n=Math.log,r=Math.LN10,i=Math.floor(n(t[1]-t[0])/r),o=Math.round(n(Math.abs(e[1]-e[0]))/r),a=Math.min(Math.max(-i+o,0),20);return isFinite(a)?a:20}function d(t,e,n){if(!t[e])return 0;var i=r.reduce(t,(function(t,e){return t+(isNaN(e)?0:e)}),0);if(0===i)return 0;var o=Math.pow(10,n),a=r.map(t,(function(t){return(isNaN(t)?0:t)/i*o*100})),s=100*o,u=r.map(a,(function(t){return Math.floor(t)})),c=r.reduce(u,(function(t,e){return t+e}),0),l=r.map(a,(function(t,e){return t-u[e]}));while(c<s){for(var h=Number.NEGATIVE_INFINITY,f=null,d=0,p=l.length;d<p;++d)l[d]>h&&(h=l[d],f=d);++u[f],l[f]=0,++c}return u[e]/o}var p=9007199254740991;function g(t){var e=2*Math.PI;return(t%e+e)%e}function m(t){return t>-i&&t<i}var v=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function y(t){if(t instanceof Date)return t;if("string"===typeof t){var e=v.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}return null==t?new Date(NaN):new Date(Math.round(t))}function b(t){return Math.pow(10,x(t))}function x(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function w(t,e){var n,r=x(t),i=Math.pow(10,r),o=t/i;return n=e?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10,t=n*i,r>=-20?+t.toFixed(r<0?-r:0):t}function _(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i}function O(t){t.sort((function(t,e){return s(t,e,0)?-1:1}));for(var e=-1/0,n=1,r=0;r<t.length;){for(var i=t[r].interval,o=t[r].close,a=0;a<2;a++)i[a]<=e&&(i[a]=e,o[a]=a?1:1-n),e=i[a],n=o[a];i[0]===i[1]&&o[0]*o[1]!==1?t.splice(r,1):r++}return t;function s(t,e,n){return t.interval[n]<e.interval[n]||t.interval[n]===e.interval[n]&&(t.close[n]-e.close[n]===(n?-1:1)||!n&&s(t,e,1))}}function S(t){return t-parseFloat(t)>=0}e.linearMap=a,e.parsePercent=s,e.round=u,e.asc=c,e.getPrecision=l,e.getPrecisionSafe=h,e.getPixelPrecision=f,e.getPercentWithPrecision=d,e.MAX_SAFE_INTEGER=p,e.remRadian=g,e.isRadianAroundZero=m,e.parseDate=y,e.quantity=b,e.quantityExponent=x,e.nice=w,e.quantile=_,e.reformIntervals=O,e.isNumeric=S},"38a2":function(t,e,n){var r=n("2b17"),i=r.retrieveRawValue,o=n("eda2"),a=o.getTooltipMarker,s=o.formatTpl,u=n("e0d3"),c=u.getTooltipRenderMode,l=/\{@(.+?)\}/g,h={getDataParams:function(t,e){var n=this.getData(e),r=this.getRawValue(t,e),i=n.getRawIndex(t),o=n.getName(t),s=n.getRawDataItem(t),u=n.getItemVisual(t,"color"),l=n.getItemVisual(t,"borderColor"),h=this.ecModel.getComponent("tooltip"),f=h&&h.get("renderMode"),d=c(f),p=this.mainType,g="series"===p,m=n.userOutput;return{componentType:p,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:g?this.subType:null,seriesIndex:this.seriesIndex,seriesId:g?this.id:null,seriesName:g?this.name:null,name:o,dataIndex:i,data:s,dataType:e,value:r,color:u,borderColor:l,dimensionNames:m?m.dimensionNames:null,encode:m?m.encode:null,marker:a({color:u,renderMode:d}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,n,r,o){e=e||"normal";var a=this.getData(n),u=a.getItemModel(t),c=this.getDataParams(t,n);null!=r&&c.value instanceof Array&&(c.value=c.value[r]);var h=u.get("normal"===e?[o||"label","formatter"]:[e,o||"label","formatter"]);if("function"===typeof h)return c.status=e,c.dimensionIndex=r,h(c);if("string"===typeof h){var f=s(h,c);return f.replace(l,(function(e,n){var r=n.length;return"["===n.charAt(0)&&"]"===n.charAt(r-1)&&(n=+n.slice(1,r-1)),i(a,t,n)}))}},getRawValue:function(t,e){return i(this.getData(e),t)},formatTooltip:function(){}};t.exports=h},"38cb":function(t,e,n){const r=n("bbfd"),i=n("6d43"),{ANY:o}=i,a=n("3fce"),s=n("2a86"),u=n("bac4"),c=n("38fa"),l=n("68d3"),h=n("a2a3"),f=(t,e,n,f)=>{let d,p,g,m,v;switch(t=new r(t,f),e=new a(e,f),n){case">":d=u,p=l,g=c,m=">",v=">=";break;case"<":d=c,p=h,g=u,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(t,e,f))return!1;for(let r=0;r<e.set.length;++r){const n=e.set[r];let a=null,s=null;if(n.forEach(t=>{t.semver===o&&(t=new i(">=0.0.0")),a=a||t,s=s||t,d(t.semver,a.semver,f)?a=t:g(t.semver,s.semver,f)&&(s=t)}),a.operator===m||a.operator===v)return!1;if((!s.operator||s.operator===m)&&p(t,s.semver))return!1;if(s.operator===v&&g(t,s.semver))return!1}return!0};t.exports=f},"38fa":function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)<0;t.exports=i},3901:function(t,e,n){var r=n("282b"),i=r([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),o={getLineStyle:function(t){var e=i(this,t);return e.lineDash=this.getLineDash(e.lineWidth),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),n=Math.max(t,2),r=4*t;return"solid"!==e&&null!=e&&("dashed"===e?[r,r]:[n,n])}};t.exports=o},"392f":function(t,e,n){var r=n("6d8b"),i=r.inherits,o=n("19eb"),a=n("9850");function s(t){o.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}s.prototype.incremental=!0,s.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},s.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},s.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},s.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},s.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var e=this._displayables[t];e.parent=this,e.update(),e.parent=null}for(t=0;t<this._temporaryDisplayables.length;t++){e=this._temporaryDisplayables[t];e.parent=this,e.update(),e.parent=null}},s.prototype.brush=function(t,e){for(var n=this._cursor;n<this._displayables.length;n++){var r=this._displayables[n];r.beforeBrush&&r.beforeBrush(t),r.brush(t,n===this._cursor?null:this._displayables[n-1]),r.afterBrush&&r.afterBrush(t)}this._cursor=n;for(n=0;n<this._temporaryDisplayables.length;n++){r=this._temporaryDisplayables[n];r.beforeBrush&&r.beforeBrush(t),r.brush(t,0===n?null:this._temporaryDisplayables[n-1]),r.afterBrush&&r.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var u=[];s.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new a(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],r=n.getBoundingRect().clone();n.needLocalTransform()&&r.applyTransform(n.getLocalTransform(u)),t.union(r)}this._rect=t}return this._rect},s.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect();if(r.contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++){var o=this._displayables[i];if(o.contain(t,e))return!0}return!1},i(s,o);var c=s;t.exports=c},"3bbe":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3bfc":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},"3c35":function(t,e){(function(e){t.exports=e}).call(this,{})},"3ca3":function(t,e,n){"use strict";var r=n("6547").charAt,i=n("69f3"),o=n("7dd0"),a="String Iterator",s=i.set,u=i.getterFor(a);o(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},"3d50":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},"3e9f":function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0,a=t.length;o<a;++o){var s=t[o](e,n,r,i);if(s)return s}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e["default"]},"3eba":function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("697e7")),o=n("6d8b"),a=n("41ef"),s=n("22d1"),u=n("04f6"),c=n("1fab"),l=n("7e63"),h=n("843e"),f=n("2039"),d=n("ca98"),p=n("fb05"),g=n("d15d"),m=n("6cb7"),v=n("4f85"),y=n("b12f"),b=n("e887"),x=n("2306"),w=n("e0d3"),_=n("88b3"),O=_.throttle,S=n("fd63"),C=n("b809"),k=n("998c"),A=n("69ff"),T=n("c533"),E=n("f219");n("0352");var j=n("ec34"),D=o.assert,M=o.each,N=o.isFunction,I=o.isObject,R=m.parseClassType,F="4.8.0",P={zrender:"4.3.1"},$=1,L=1e3,z=800,B=900,U=5e3,W=1e3,V=1100,H=2e3,q=3e3,G=3500,X=4e3,Y=5e3,K={PROCESSOR:{FILTER:L,SERIES_FILTER:z,STATISTIC:U},VISUAL:{LAYOUT:W,PROGRESSIVE_LAYOUT:V,GLOBAL:H,CHART:q,POST_CHART_LAYOUT:G,COMPONENT:X,BRUSH:Y}},Z="__flagInMainProcess",J="__optionUpdated",Q=/^[a-zA-Z0-9_]+$/;function tt(t,e){return function(n,r,i){e||!this._disposed?(n=n&&n.toLowerCase(),c.prototype[t].call(this,n,r,i)):xt(this.id)}}function et(){c.call(this)}function nt(t,e,n){n=n||{},"string"===typeof e&&(e=Mt[e]),this.id,this.group,this._dom=t;var r="canvas",a=this._zr=i.init(t,{renderer:n.renderer||r,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=O(o.bind(a.flush,a),17);e=o.clone(e);e&&p(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new f;var s=this._api=St(this);function l(t,e){return t.__prio-e.__prio}u(Dt,l),u(Tt,l),this._scheduler=new A(this,s,Tt,Dt),c.call(this,this._ecEventProcessor=new Ct),this._messageCenter=new et,this._initEvents(),this.resize=o.bind(this.resize,this),this._pendingActions=[],a.animation.on("frame",this._onframe,this),ft(a,this),o.setAsPrimitive(this)}et.prototype.on=tt("on",!0),et.prototype.off=tt("off",!0),et.prototype.one=tt("one",!0),o.mixin(et,c);var rt=nt.prototype;function it(t,e,n){if(this._disposed)xt(this.id);else{var r,i=this._model,o=this._coordSysMgr.getCoordinateSystems();e=w.parseFinder(i,e);for(var a=0;a<o.length;a++){var s=o[a];if(s[t]&&null!=(r=s[t](i,e,n)))return r}}}rt._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[J]){var e=this[J].silent;this[Z]=!0,at(this),ot.update.call(this),this[Z]=!1,this[J]=!1,lt.call(this,e),ht.call(this,e)}else if(t.unfinished){var n=$,r=this._model,i=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(r),t.performDataProcessorTasks(r),ut(this,r),t.performVisualTasks(r),vt(this,this._model,i,"remain"),n-=+new Date-o}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},rt.getDom=function(){return this._dom},rt.getZr=function(){return this._zr},rt.setOption=function(t,e,n){if(this._disposed)xt(this.id);else{var r;if(I(e)&&(n=e.lazyUpdate,r=e.silent,e=e.notMerge),this[Z]=!0,!this._model||e){var i=new d(this._api),o=this._theme,a=this._model=new l;a.scheduler=this._scheduler,a.init(null,null,o,i)}this._model.setOption(t,Et),n?(this[J]={silent:r},this[Z]=!1):(at(this),ot.update.call(this),this._zr.flush(),this[J]=!1,this[Z]=!1,lt.call(this,r),ht.call(this,r))}},rt.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},rt.getModel=function(){return this._model},rt.getOption=function(){return this._model&&this._model.getOption()},rt.getWidth=function(){return this._zr.getWidth()},rt.getHeight=function(){return this._zr.getHeight()},rt.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},rt.getRenderedCanvas=function(t){if(s.canvasSupported){t=t||{},t.pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor");var e=this._zr;return e.painter.getRenderedCanvas(t)}},rt.getSvgDataURL=function(){if(s.svgSupported){var t=this._zr,e=t.storage.getDisplayList();return o.each(e,(function(t){t.stopAnimation(!0)})),t.painter.toDataURL()}},rt.getDataURL=function(t){if(!this._disposed){t=t||{};var e=t.excludeComponents,n=this._model,r=[],i=this;M(e,(function(t){n.eachComponent({mainType:t},(function(t){var e=i._componentsMap[t.__viewId];e.group.ignore||(r.push(e),e.group.ignore=!0)}))}));var o="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return M(r,(function(t){t.group.ignore=!1})),o}xt(this.id)},rt.getConnectedDataURL=function(t){if(this._disposed)xt(this.id);else if(s.canvasSupported){var e="svg"===t.type,n=this.group,r=Math.min,a=Math.max,u=1/0;if(Rt[n]){var c=u,l=u,h=-u,f=-u,d=[],p=t&&t.pixelRatio||1;o.each(It,(function(i,s){if(i.group===n){var u=e?i.getZr().painter.getSvgDom().innerHTML:i.getRenderedCanvas(o.clone(t)),p=i.getDom().getBoundingClientRect();c=r(p.left,c),l=r(p.top,l),h=a(p.right,h),f=a(p.bottom,f),d.push({dom:u,left:p.left,top:p.top})}})),c*=p,l*=p,h*=p,f*=p;var g=h-c,m=f-l,v=o.createCanvas(),y=i.init(v,{renderer:e?"svg":"canvas"});if(y.resize({width:g,height:m}),e){var b="";return M(d,(function(t){var e=t.left-c,n=t.top-l;b+='<g transform="translate('+e+","+n+')">'+t.dom+"</g>"})),y.painter.getSvgRoot().innerHTML=b,t.connectedBackgroundColor&&y.painter.setBackgroundColor(t.connectedBackgroundColor),y.refreshImmediately(),y.painter.toDataURL()}return t.connectedBackgroundColor&&y.add(new x.Rect({shape:{x:0,y:0,width:g,height:m},style:{fill:t.connectedBackgroundColor}})),M(d,(function(t){var e=new x.Image({style:{x:t.left*p-c,y:t.top*p-l,image:t.dom}});y.add(e)})),y.refreshImmediately(),v.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},rt.convertToPixel=o.curry(it,"convertToPixel"),rt.convertFromPixel=o.curry(it,"convertFromPixel"),rt.containPixel=function(t,e){if(!this._disposed){var n,r=this._model;return t=w.parseFinder(r,t),o.each(t,(function(t,r){r.indexOf("Models")>=0&&o.each(t,(function(t){var i=t.coordinateSystem;if(i&&i.containPoint)n|=!!i.containPoint(e);else if("seriesModels"===r){var o=this._chartsMap[t.__viewId];o&&o.containPoint&&(n|=o.containPoint(e,t))}}),this)}),this),!!n}xt(this.id)},rt.getVisual=function(t,e){var n=this._model;t=w.parseFinder(n,t,{defaultMainType:"series"});var r=t.seriesModel,i=r.getData(),o=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?i.indexOfRawIndex(t.dataIndex):null;return null!=o?i.getItemVisual(o,e):i.getVisual(e)},rt.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},rt.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var ot={prepareAndUpdate:function(t){at(this),ot.update.call(this,t)},update:function(t){var e=this._model,n=this._api,r=this._zr,i=this._coordSysMgr,o=this._scheduler;if(e){o.restoreData(e,t),o.performSeriesTasks(e),i.create(e,n),o.performDataProcessorTasks(e,t),ut(this,e),i.update(e,n),pt(e),o.performVisualTasks(e,t),gt(this,e,n,t);var u=e.get("backgroundColor")||"transparent";if(s.canvasSupported)r.setBackgroundColor(u);else{var c=a.parse(u);u=a.stringify(c,"rgb"),0===c[3]&&(u="transparent")}yt(e,n)}},updateTransform:function(t){var e=this._model,n=this,r=this._api;if(e){var i=[];e.eachComponent((function(o,a){var s=n.getViewOfComponentModel(a);if(s&&s.__alive)if(s.updateTransform){var u=s.updateTransform(a,e,r,t);u&&u.update&&i.push(s)}else i.push(s)}));var a=o.createHashMap();e.eachSeries((function(i){var o=n._chartsMap[i.__viewId];if(o.updateTransform){var s=o.updateTransform(i,e,r,t);s&&s.update&&a.set(i.uid,1)}else a.set(i.uid,1)})),pt(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0,dirtyMap:a}),vt(n,e,r,t,a),yt(e,this._api)}},updateView:function(t){var e=this._model;e&&(b.markUpdateMethod(t,"updateView"),pt(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),gt(this,this._model,this._api,t),yt(e,this._api))},updateVisual:function(t){ot.update.call(this,t)},updateLayout:function(t){ot.update.call(this,t)}};function at(t){var e=t._model,n=t._scheduler;n.restorePipelines(e),n.prepareStageTasks(),dt(t,"component",e,n),dt(t,"chart",e,n),n.plan()}function st(t,e,n,r,i){var a=t._model;if(r){var s={};s[r+"Id"]=n[r+"Id"],s[r+"Index"]=n[r+"Index"],s[r+"Name"]=n[r+"Name"];var u={mainType:r,query:s};i&&(u.subType=i);var c=n.excludeSeriesId;null!=c&&(c=o.createHashMap(w.normalizeToArray(c))),a&&a.eachComponent(u,(function(e){c&&null!=c.get(e.id)||l(t["series"===r?"_chartsMap":"_componentsMap"][e.__viewId])}),t)}else M(t._componentsViews.concat(t._chartsViews),l);function l(r){r&&r.__alive&&r[e]&&r[e](r.__model,a,t._api,n)}}function ut(t,e){var n=t._chartsMap,r=t._scheduler;e.eachSeries((function(t){r.updateStreamModes(t,n[t.__viewId])}))}function ct(t,e){var n=t.type,r=t.escapeConnect,i=kt[n],a=i.actionInfo,s=(a.update||"update").split(":"),u=s.pop();s=null!=s[0]&&R(s[0]),this[Z]=!0;var c=[t],l=!1;t.batch&&(l=!0,c=o.map(t.batch,(function(e){return e=o.defaults(o.extend({},e),t),e.batch=null,e})));var h,f=[],d="highlight"===n||"downplay"===n;M(c,(function(t){h=i.action(t,this._model,this._api),h=h||o.extend({},t),h.type=a.event||h.type,f.push(h),d?st(this,u,t,"series"):s&&st(this,u,t,s.main,s.sub)}),this),"none"===u||d||s||(this[J]?(at(this),ot.update.call(this,t),this[J]=!1):ot[u].call(this,t)),h=l?{type:a.event||n,escapeConnect:r,batch:f}:f[0],this[Z]=!1,!e&&this._messageCenter.trigger(h.type,h)}function lt(t){var e=this._pendingActions;while(e.length){var n=e.shift();ct.call(this,n,t)}}function ht(t){!t&&this.trigger("updated")}function ft(t,e){t.on("rendered",(function(){e.trigger("rendered"),!t.animation.isFinished()||e[J]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")}))}function dt(t,e,n,r){for(var i="component"===e,o=i?t._componentsViews:t._chartsViews,a=i?t._componentsMap:t._chartsMap,s=t._zr,u=t._api,c=0;c<o.length;c++)o[c].__alive=!1;function l(t){var e="_ec_"+t.id+"_"+t.type,c=a[e];if(!c){var l=R(t.type),h=i?y.getClass(l.main,l.sub):b.getClass(l.sub);c=new h,c.init(n,u),a[e]=c,o.push(c),s.add(c.group)}t.__viewId=c.__id=e,c.__alive=!0,c.__model=t,c.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},!i&&r.prepareView(c,t,n,u)}i?n.eachComponent((function(t,e){"series"!==t&&l(e)})):n.eachSeries(l);for(c=0;c<o.length;){var h=o[c];h.__alive?c++:(!i&&h.renderTask.dispose(),s.remove(h.group),h.dispose(n,u),o.splice(c,1),delete a[h.__id],h.__id=h.group.__ecComponentInfo=null)}}function pt(t){t.clearColorPalette(),t.eachSeries((function(t){t.clearColorPalette()}))}function gt(t,e,n,r){mt(t,e,n,r),M(t._chartsViews,(function(t){t.__alive=!1})),vt(t,e,n,r),M(t._chartsViews,(function(t){t.__alive||t.remove(e,n)}))}function mt(t,e,n,r,i){M(i||t._componentsViews,(function(t){var i=t.__model;t.render(i,e,n,r),Ot(i,t)}))}function vt(t,e,n,r,i){var o,a=t._scheduler;e.eachSeries((function(e){var n=t._chartsMap[e.__viewId];n.__alive=!0;var s=n.renderTask;a.updatePayload(s,r),i&&i.get(e.uid)&&s.dirty(),o|=s.perform(a.getPerformArgs(s)),n.group.silent=!!e.get("silent"),Ot(e,n),_t(e,n)})),a.unfinished|=o,wt(t,e),C(t._zr.dom,e)}function yt(t,e){M(jt,(function(n){n(t,e)}))}rt.resize=function(t){if(this._disposed)xt(this.id);else{this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),r=t&&t.silent;this[Z]=!0,n&&at(this),ot.update.call(this),this[Z]=!1,lt.call(this,r),ht.call(this,r)}}},rt.showLoading=function(t,e){if(this._disposed)xt(this.id);else if(I(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),Nt[t]){var n=Nt[t](this._api,e),r=this._zr;this._loadingFX=n,r.add(n)}},rt.hideLoading=function(){this._disposed?xt(this.id):(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},rt.makeActionFromEvent=function(t){var e=o.extend({},t);return e.type=At[t.type],e},rt.dispatchAction=function(t,e){this._disposed?xt(this.id):(I(e)||(e={silent:!!e}),kt[t.type]&&this._model&&(this[Z]?this._pendingActions.push(t):(ct.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&s.browser.weChat&&this._throttledZrFlush(),lt.call(this,e.silent),ht.call(this,e.silent))))},rt.appendData=function(t){if(this._disposed)xt(this.id);else{var e=t.seriesIndex,n=this.getModel(),r=n.getSeriesByIndex(e);r.appendData(t),this._scheduler.unfinished=!0}},rt.on=tt("on",!1),rt.off=tt("off",!1),rt.one=tt("one",!1);var bt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function xt(t){}function wt(t,e){var n=t._zr,r=n.storage,i=0;r.traverse((function(t){i++})),i>e.get("hoverLayerThreshold")&&!s.node&&e.eachSeries((function(e){if(!e.preventUsingHoverLayer){var n=t._chartsMap[e.__viewId];n.__alive&&n.group.traverse((function(t){t.useHoverLayer=!0}))}}))}function _t(t,e){var n=t.get("blendMode")||null;e.group.traverse((function(t){t.isGroup||t.style.blend!==n&&t.setStyle("blend",n),t.eachPendingDisplayable&&t.eachPendingDisplayable((function(t){t.setStyle("blend",n)}))}))}function Ot(t,e){var n=t.get("z"),r=t.get("zlevel");e.group.traverse((function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=r&&(t.zlevel=r))}))}function St(t){var e=t._coordSysMgr;return o.extend(new h(t),{getCoordinateSystems:o.bind(e.getCoordinateSystems,e),getComponentByElement:function(e){while(e){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}}})}function Ct(){this.eventInfo}rt._initEvents=function(){M(bt,(function(t){var e=function(e){var n,r=this.getModel(),i=e.target,a="globalout"===t;if(a)n={};else if(i&&null!=i.dataIndex){var s=i.dataModel||r.getSeriesByIndex(i.seriesIndex);n=s&&s.getDataParams(i.dataIndex,i.dataType,i)||{}}else i&&i.eventData&&(n=o.extend({},i.eventData));if(n){var u=n.componentType,c=n.componentIndex;"markLine"!==u&&"markPoint"!==u&&"markArea"!==u||(u="series",c=n.seriesIndex);var l=u&&null!=c&&r.getComponent(u,c),h=l&&this["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];n.event=e,n.type=t,this._ecEventProcessor.eventInfo={targetEl:i,packedEvent:n,model:l,view:h},this.trigger(t,n)}};e.zrEventfulCallAtLast=!0,this._zr.on(t,e,this)}),this),M(At,(function(t,e){this._messageCenter.on(e,(function(t){this.trigger(e,t)}),this)}),this)},rt.isDisposed=function(){return this._disposed},rt.clear=function(){this._disposed?xt(this.id):this.setOption({series:[]},!0)},rt.dispose=function(){if(this._disposed)xt(this.id);else{this._disposed=!0,w.setAttribute(this.getDom(),$t,"");var t=this._api,e=this._model;M(this._componentsViews,(function(n){n.dispose(e,t)})),M(this._chartsViews,(function(n){n.dispose(e,t)})),this._zr.dispose(),delete It[this.id]}},o.mixin(nt,c),Ct.prototype={constructor:Ct,normalizeQuery:function(t){var e={},n={},r={};if(o.isString(t)){var i=R(t);e.mainType=i.main||null,e.subType=i.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};o.each(t,(function(t,i){for(var o=!1,u=0;u<a.length;u++){var c=a[u],l=i.lastIndexOf(c);if(l>0&&l===i.length-c.length){var h=i.slice(0,l);"data"!==h&&(e.mainType=h,e[c.toLowerCase()]=t,o=!0)}}s.hasOwnProperty(i)&&(n[i]=t,o=!0),o||(r[i]=t)}))}return{cptQuery:e,dataQuery:n,otherQuery:r}},filter:function(t,e,n){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,o=r.packedEvent,a=r.model,s=r.view;if(!a||!s)return!0;var u=e.cptQuery,c=e.dataQuery;return l(u,a,"mainType")&&l(u,a,"subType")&&l(u,a,"index","componentIndex")&&l(u,a,"name")&&l(u,a,"id")&&l(c,o,"name")&&l(c,o,"dataIndex")&&l(c,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,e.otherQuery,i,o));function l(t,e,n,r){return null==t[n]||e[r||n]===t[n]}},afterTrigger:function(){this.eventInfo=null}};var kt={},At={},Tt=[],Et=[],jt=[],Dt=[],Mt={},Nt={},It={},Rt={},Ft=new Date-0,Pt=new Date-0,$t="_echarts_instance_";function Lt(t){var e=0,n=1,r=2,i="__connectUpdateStatus";function o(t,e){for(var n=0;n<t.length;n++){var r=t[n];r[i]=e}}M(At,(function(a,s){t._messageCenter.on(s,(function(a){if(Rt[t.group]&&t[i]!==e){if(a&&a.escapeConnect)return;var s=t.makeActionFromEvent(a),u=[];M(It,(function(e){e!==t&&e.group===t.group&&u.push(e)})),o(u,e),M(u,(function(t){t[i]!==n&&t.dispatchAction(s)})),o(u,r)}}))}))}function zt(t,e,n){var r=Ht(t);if(r)return r;var i=new nt(t,e,n);return i.id="ec_"+Ft++,It[i.id]=i,w.setAttribute(t,$t,i.id),Lt(i),i}function Bt(t){if(o.isArray(t)){var e=t;t=null,M(e,(function(e){null!=e.group&&(t=e.group)})),t=t||"g_"+Pt++,M(e,(function(e){e.group=t}))}return Rt[t]=!0,t}function Ut(t){Rt[t]=!1}var Wt=Ut;function Vt(t){"string"===typeof t?t=It[t]:t instanceof nt||(t=Ht(t)),t instanceof nt&&!t.isDisposed()&&t.dispose()}function Ht(t){return It[w.getAttribute(t,$t)]}function qt(t){return It[t]}function Gt(t,e){Mt[t]=e}function Xt(t){Et.push(t)}function Yt(t,e){ne(Tt,t,e,L)}function Kt(t){jt.push(t)}function Zt(t,e,n){"function"===typeof e&&(n=e,e="");var r=I(t)?t.type:[t,t={event:e}][0];t.event=(t.event||r).toLowerCase(),e=t.event,D(Q.test(r)&&Q.test(e)),kt[r]||(kt[r]={action:n,actionInfo:t}),At[e]=r}function Jt(t,e){f.register(t,e)}function Qt(t){var e=f.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()}function te(t,e){ne(Dt,t,e,W,"layout")}function ee(t,e){ne(Dt,t,e,q,"visual")}function ne(t,e,n,r,i){(N(e)||I(e))&&(n=e,e=r);var o=A.wrapStageHandler(n,i);return o.__prio=e,o.__raw=n,t.push(o),o}function re(t,e){Nt[t]=e}function ie(t){return m.extend(t)}function oe(t){return y.extend(t)}function ae(t){return v.extend(t)}function se(t){return b.extend(t)}function ue(t){o.$override("createCanvas",t)}function ce(t,e,n){j.registerMap(t,e,n)}function le(t){var e=j.retrieveMap(t);return e&&e[0]&&{geoJson:e[0].geoJSON,specialAreas:e[0].specialAreas}}ee(H,S),Xt(p),Yt(B,g),re("default",k),Zt({type:"highlight",event:"highlight",update:"highlight"},o.noop),Zt({type:"downplay",event:"downplay",update:"downplay"},o.noop),Gt("light",T),Gt("dark",E);var he={};e.version=F,e.dependencies=P,e.PRIORITY=K,e.init=zt,e.connect=Bt,e.disConnect=Ut,e.disconnect=Wt,e.dispose=Vt,e.getInstanceByDom=Ht,e.getInstanceById=qt,e.registerTheme=Gt,e.registerPreprocessor=Xt,e.registerProcessor=Yt,e.registerPostUpdate=Kt,e.registerAction=Zt,e.registerCoordinateSystem=Jt,e.getCoordinateSystemDimensions=Qt,e.registerLayout=te,e.registerVisual=ee,e.registerLoading=re,e.extendComponentModel=ie,e.extendComponentView=oe,e.extendSeriesModel=ae,e.extendChartView=se,e.setCanvasCreator=ue,e.registerMap=ce,e.getMap=le,e.dataTool=he;var fe=n("b719");(function(){for(var t in fe)fe.hasOwnProperty(t)&&(e[t]=fe[t])})()},"3f4f":function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return w}));const r=(t,e)=>e.some(e=>t instanceof e);let i,o;function a(){return i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s(){return o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u=new WeakMap,c=new WeakMap,l=new WeakMap,h=new WeakMap,f=new WeakMap;function d(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{e(b(t.result)),r()},o=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(e=>{e instanceof IDBCursor&&u.set(e,t)}).catch(()=>{}),f.set(e,t),e}function p(t){if(c.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{e(),r()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});c.set(t,e)}let g={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return c.get(t);if("objectStoreNames"===e)return t.objectStoreNames||l.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return b(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function m(t){g=t(g)}function v(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?s().includes(t)?function(...e){return t.apply(x(this),e),b(u.get(this))}:function(...e){return b(t.apply(x(this),e))}:function(e,...n){const r=t.call(x(this),e,...n);return l.set(r,e.sort?e.sort():[e]),b(r)}}function y(t){return"function"===typeof t?v(t):(t instanceof IDBTransaction&&p(t),r(t,a())?new Proxy(t,g):t)}function b(t){if(t instanceof IDBRequest)return d(t);if(h.has(t))return h.get(t);const e=y(t);return e!==t&&(h.set(t,e),f.set(e,t)),e}const x=t=>f.get(t);function w(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=b(a);return r&&a.addEventListener("upgradeneeded",t=>{r(b(a.result),t.oldVersion,t.newVersion,b(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),s.then(t=>{o&&t.addEventListener("close",()=>o()),i&&t.addEventListener("versionchange",()=>i())}).catch(()=>{}),s}function _(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),b(n).then(()=>{})}const O=["get","getKey","getAll","getAllKeys","count"],S=["put","add","delete","clear"],C=new Map;function k(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(C.get(e))return C.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=S.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!O.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,i?"readwrite":"readonly");let a=o.store;r&&(a=a.index(e.shift()));const s=await a[n](...e);return i&&await o.done,s};return C.set(e,o),o}m(t=>({...t,get:(e,n,r)=>k(e,n)||t.get(e,n,r),has:(e,n)=>!!k(e,n)||t.has(e,n)}))},"3f8c":function(t,e){t.exports={}},"3fce":function(t,e,n){class r{constructor(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof r)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new r(t.raw,e);if(t instanceof i)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(t=>this.parseRange(t.trim())).filter(t=>t.length),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){const e=this.options.loose;t=t.trim();const n=e?s[u.HYPHENRANGELOOSE]:s[u.HYPHENRANGE];t=t.replace(n,O(this.options.includePrerelease)),o("hyphen replace",t),t=t.replace(s[u.COMPARATORTRIM],c),o("comparator trim",t,s[u.COMPARATORTRIM]),t=t.replace(s[u.TILDETRIM],l),t=t.replace(s[u.CARETTRIM],h),t=t.split(/\s+/).join(" ");const r=e?s[u.COMPARATORLOOSE]:s[u.COMPARATOR];return t.split(" ").map(t=>d(t,this.options)).join(" ").split(/\s+/).map(t=>_(t,this.options)).filter(this.options.loose?t=>!!t.match(r):()=>!0).map(t=>new i(t,this.options))}intersects(t,e){if(!(t instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>f(n,e)&&t.set.some(t=>f(t,e)&&n.every(n=>t.every(t=>n.intersects(t,e)))))}test(t){if(!t)return!1;if("string"===typeof t)try{t=new a(t,this.options)}catch(e){return!1}for(let n=0;n<this.set.length;n++)if(S(this.set[n],t,this.options))return!0;return!1}}t.exports=r;const i=n("6d43"),o=n("b802"),a=n("bbfd"),{re:s,t:u,comparatorTrimReplace:c,tildeTrimReplace:l,caretTrimReplace:h}=n("8cb5"),f=(t,e)=>{let n=!0;const r=t.slice();let i=r.pop();while(n&&r.length)n=r.every(t=>i.intersects(t,e)),i=r.pop();return n},d=(t,e)=>(o("comp",t,e),t=v(t,e),o("caret",t),t=g(t,e),o("tildes",t),t=b(t,e),o("xrange",t),t=w(t,e),o("stars",t),t),p=t=>!t||"x"===t.toLowerCase()||"*"===t,g=(t,e)=>t.trim().split(/\s+/).map(t=>m(t,e)).join(" "),m=(t,e)=>{const n=e.loose?s[u.TILDELOOSE]:s[u.TILDE];return t.replace(n,(e,n,r,i,a)=>{let s;return o("tilde",t,e,n,r,i,a),p(n)?s="":p(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:p(i)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:a?(o("replaceTilde pr",a),s=`>=${n}.${r}.${i}-${a} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,o("tilde return",s),s})},v=(t,e)=>t.trim().split(/\s+/).map(t=>y(t,e)).join(" "),y=(t,e)=>{o("caret",t,e);const n=e.loose?s[u.CARETLOOSE]:s[u.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(e,n,i,a,s)=>{let u;return o("caret",t,e,n,i,a,s),p(n)?u="":p(i)?u=`>=${n}.0.0${r} <${+n+1}.0.0-0`:p(a)?u="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:s?(o("replaceCaret pr",s),u="0"===n?"0"===i?`>=${n}.${i}.${a}-${s} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}-${s} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a}-${s} <${+n+1}.0.0-0`):(o("no pr"),u="0"===n?"0"===i?`>=${n}.${i}.${a}${r} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a} <${+n+1}.0.0-0`),o("caret return",u),u})},b=(t,e)=>(o("replaceXRanges",t,e),t.split(/\s+/).map(t=>x(t,e)).join(" ")),x=(t,e)=>{t=t.trim();const n=e.loose?s[u.XRANGELOOSE]:s[u.XRANGE];return t.replace(n,(n,r,i,a,s,u)=>{o("xRange",t,n,r,i,a,s,u);const c=p(i),l=c||p(a),h=l||p(s),f=h;return"="===r&&f&&(r=""),u=e.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(l&&(a=0),s=0,">"===r?(r=">=",l?(i=+i+1,a=0,s=0):(a=+a+1,s=0)):"<="===r&&(r="<",l?i=+i+1:a=+a+1),"<"===r&&(u="-0"),n=`${r+i}.${a}.${s}${u}`):l?n=`>=${i}.0.0${u} <${+i+1}.0.0-0`:h&&(n=`>=${i}.${a}.0${u} <${i}.${+a+1}.0-0`),o("xRange return",n),n})},w=(t,e)=>(o("replaceStars",t,e),t.trim().replace(s[u.STAR],"")),_=(t,e)=>(o("replaceGTE0",t,e),t.trim().replace(s[e.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=t=>(e,n,r,i,o,a,s,u,c,l,h,f,d)=>(n=p(r)?"":p(i)?`>=${r}.0.0${t?"-0":""}`:p(o)?`>=${r}.${i}.0${t?"-0":""}`:a?">="+n:`>=${n}${t?"-0":""}`,u=p(c)?"":p(l)?`<${+c+1}.0.0-0`:p(h)?`<${c}.${+l+1}.0-0`:f?`<=${c}.${l}.${h}-${f}`:t?`<${c}.${l}.${+h+1}-0`:"<="+u,`${n} ${u}`.trim()),S=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let n=0;n<t.length;n++)if(o(t[n].semver),t[n].semver!==i.ANY&&t[n].semver.prerelease.length>0){const r=t[n].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0}},"401b":function(t,e){var n="undefined"===typeof Float32Array?Array:Float32Array;function r(t,e){var r=new n(2);return null==t&&(t=0),null==e&&(e=0),r[0]=t,r[1]=e,r}function i(t,e){return t[0]=e[0],t[1]=e[1],t}function o(t){var e=new n(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e,n){return t[0]=e,t[1]=n,t}function s(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function u(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function l(t){return Math.sqrt(f(t))}var h=l;function f(t){return t[0]*t[0]+t[1]*t[1]}var d=f;function p(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function g(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function m(t,e){return t[0]*e[0]+t[1]*e[1]}function v(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function y(t,e){var n=l(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function b(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var x=b;function w(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var _=w;function O(t,e){return t[0]=-e[0],t[1]=-e[1],t}function S(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function C(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function k(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function A(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}e.create=r,e.copy=i,e.clone=o,e.set=a,e.add=s,e.scaleAndAdd=u,e.sub=c,e.len=l,e.length=h,e.lenSquare=f,e.lengthSquare=d,e.mul=p,e.div=g,e.dot=m,e.scale=v,e.normalize=y,e.distance=b,e.dist=x,e.distanceSquare=w,e.distSquare=_,e.negate=O,e.lerp=S,e.applyTransform=C,e.min=k,e.max=A},"408c":function(t,e,n){var r=n("2b3e"),i=function(){return r.Date.now()};t.exports=i},4149:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("ce1a"),o=n("6180");function a(t){if(!Array.isArray(t))throw new Error("input must be an array");if(0===t.length)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};const e=t.length;let n=-1/0,r=1/0,i=0,o=0,a=0;for(let u=0;u<e;u++){const e=t[u];e>n&&(n=e),e<r&&(r=e),0===e&&(i+=1),isNaN(e)?o+=1:isFinite(e)||(a+=1)}const s={numVals:e,numZeros:i,numNans:o,max:n,min:r,numInfs:a};return s.max===-1/0&&(s.max=NaN),s.min===1/0&&(s.min=NaN),s}function s(t){return r(this,void 0,void 0,(function*(){const[e,n,r]=i.tidy(()=>{const e=i.scalar(0,t.dtype),n=t.min(),r=t.max(),o=t.equal(e).sum();return[n,r,o]});return Promise.all([t.data(),e.data(),n.data(),r.data()]).then(([t,e,n,r])=>{const i=t.length;let o=0,a=0;for(let l=0;l<i;l++){const e=t[l];isNaN(e)?o+=1:isFinite(e)||(a+=1)}let s=e[0],u=n[0];o===i&&(s=NaN,u=NaN);const c={numVals:i,numZeros:r[0],numNans:o,min:s,max:u,numInfs:a};return c})}))}function u(t,e,n,a){return r(this,void 0,void 0,(function*(){o.assert(1===t.rank,"labels must be a 1D tensor"),o.assert(1===e.rank,"predictions must be a 1D tensor"),o.assert(t.size===e.size,"labels and predictions must be the same length"),null!=a&&o.assert(a.size===e.size,"labels and predictions must be the same length");const r=t.cast("int32"),s=e.cast("int32");null==n&&(n=i.tidy(()=>{const t=i.maximum(r.max(),s.max()).cast("int32");return t.dataSync()[0]+1}));let u=Promise.resolve(null);return null!=a&&(u=a.data()),Promise.all([r.data(),s.data(),u]).then(([t,e,r])=>{const i=Array(n).fill(0);for(let o=0;o<n;o++)i[o]=Array(n).fill(0);for(let n=0;n<t.length;n++){const o=t[n],a=e[n];i[o][a]+=null!=r?r[n]:1}return i})}))}function c(t,e){return r(this,void 0,void 0,(function*(){o.assertShapesMatch(t.shape,e.shape,"Error computing accuracy.");const n=t.equal(e),r=n.mean(),a=(yield r.data())[0];return i.dispose([n,r]),a}))}function l(t,e,n){return r(this,void 0,void 0,(function*(){return o.assert(1===t.rank,"labels must be a 1D tensor"),o.assert(1===e.rank,"predictions must be a 1D tensor"),o.assert(t.size===e.size,"labels and predictions must be the same length"),null==n&&(n=i.tidy(()=>i.maximum(t.max(),e.max()).dataSync()[0]+1)),Promise.all([t.data(),e.data()]).then(([t,e])=>{const r=Array(n).fill(0),i=Array(n).fill(0);for(let n=0;n<t.length;n++){const o=t[n],a=e[n];r[o]+=1,o===a&&(i[o]+=1)}const o=[];for(let n=0;n<r.length;n++)o.push({count:r[n],accuracy:0===r[n]?0:i[n]/r[n]});return o})}))}e.arrayStats=a,e.tensorStats=s,e.confusionMatrix=u,e.accuracy=c,e.perClassAccuracy=l},4160:function(t,e,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"41ef":function(t,e,n){var r=n("d51b"),i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(t){return t=Math.round(t),t<0?0:t>255?255:t}function a(t){return t=Math.round(t),t<0?0:t>360?360:t}function s(t){return t<0?0:t>1?1:t}function u(t){return t.length&&"%"===t.charAt(t.length-1)?o(parseFloat(t)/100*255):o(parseInt(t,10))}function c(t){return t.length&&"%"===t.charAt(t.length-1)?s(parseFloat(t)/100):s(parseFloat(t))}function l(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function h(t,e,n){return t+(e-t)*n}function f(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var p=new r(20),g=null;function m(t,e){g&&d(g,e),g=p.put(t,g||e.slice())}function v(t,e){if(t){e=e||[];var n=p.get(t);if(n)return d(e,n);t+="";var r=t.replace(/ /g,"").toLowerCase();if(r in i)return d(e,i[r]),m(t,e),e;if("#"!==r.charAt(0)){var o=r.indexOf("("),a=r.indexOf(")");if(-1!==o&&a+1===r.length){var s=r.substr(0,o),l=r.substr(o+1,a-(o+1)).split(","),h=1;switch(s){case"rgba":if(4!==l.length)return void f(e,0,0,0,1);h=c(l.pop());case"rgb":return 3!==l.length?void f(e,0,0,0,1):(f(e,u(l[0]),u(l[1]),u(l[2]),h),m(t,e),e);case"hsla":return 4!==l.length?void f(e,0,0,0,1):(l[3]=c(l[3]),y(l,e),m(t,e),e);case"hsl":return 3!==l.length?void f(e,0,0,0,1):(y(l,e),m(t,e),e);default:return}}f(e,0,0,0,1)}else{if(4===r.length){var g=parseInt(r.substr(1),16);return g>=0&&g<=4095?(f(e,(3840&g)>>4|(3840&g)>>8,240&g|(240&g)>>4,15&g|(15&g)<<4,1),m(t,e),e):void f(e,0,0,0,1)}if(7===r.length){g=parseInt(r.substr(1),16);return g>=0&&g<=16777215?(f(e,(16711680&g)>>16,(65280&g)>>8,255&g,1),m(t,e),e):void f(e,0,0,0,1)}}}}function y(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=c(t[1]),i=c(t[2]),a=i<=.5?i*(r+1):i+r-i*r,s=2*i-a;return e=e||[],f(e,o(255*l(s,a,n+1/3)),o(255*l(s,a,n)),o(255*l(s,a,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function b(t){if(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a,c=(s+a)/2;if(0===u)e=0,n=0;else{n=c<.5?u/(s+a):u/(2-s-a);var l=((s-r)/6+u/2)/u,h=((s-i)/6+u/2)/u,f=((s-o)/6+u/2)/u;r===s?e=f-h:i===s?e=1/3+l-f:o===s&&(e=2/3+h-l),e<0&&(e+=1),e>1&&(e-=1)}var d=[360*e,n,c];return null!=t[3]&&d.push(t[3]),d}}function x(t,e){var n=v(t);if(n){for(var r=0;r<3;r++)n[r]=e<0?n[r]*(1-e)|0:(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:t[r]<0&&(n[r]=0);return T(n,4===n.length?"rgba":"rgb")}}function w(t){var e=v(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function _(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var r=t*(e.length-1),i=Math.floor(r),a=Math.ceil(r),u=e[i],c=e[a],l=r-i;return n[0]=o(h(u[0],c[0],l)),n[1]=o(h(u[1],c[1],l)),n[2]=o(h(u[2],c[2],l)),n[3]=s(h(u[3],c[3],l)),n}}var O=_;function S(t,e,n){if(e&&e.length&&t>=0&&t<=1){var r=t*(e.length-1),i=Math.floor(r),a=Math.ceil(r),u=v(e[i]),c=v(e[a]),l=r-i,f=T([o(h(u[0],c[0],l)),o(h(u[1],c[1],l)),o(h(u[2],c[2],l)),s(h(u[3],c[3],l))],"rgba");return n?{color:f,leftIndex:i,rightIndex:a,value:r}:f}}var C=S;function k(t,e,n,r){if(t=v(t),t)return t=b(t),null!=e&&(t[0]=a(e)),null!=n&&(t[1]=c(n)),null!=r&&(t[2]=c(r)),T(y(t),"rgba")}function A(t,e){if(t=v(t),t&&null!=e)return t[3]=s(e),T(t,"rgba")}function T(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}e.parse=v,e.lift=x,e.toHex=w,e.fastLerp=_,e.fastMapToColor=O,e.lerp=S,e.mapToColor=C,e.modifyHSL=k,e.modifyAlpha=A,e.stringify=T},"428f":function(t,e,n){var r=n("da84");t.exports=r},"42e5":function(t,e){var n=function(t){this.colorStops=t||[]};n.prototype={constructor:n,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var r=n;t.exports=r},4319:function(t,e,n){var r=n("6d8b"),i=n("22d1"),o=n("e0d3"),a=o.makeInner,s=n("625e"),u=s.enableClassExtend,c=s.enableClassCheck,l=n("3901"),h=n("9bdb"),f=n("fe21"),d=n("551f"),p=r.mixin,g=a();function m(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}function v(t,e,n){for(var r=0;r<e.length;r++)if(e[r]&&(t=t&&"object"===typeof t?t[e[r]]:null,null==t))break;return null==t&&n&&(t=n.get(e)),t}function y(t,e){var n=g(t).getParent;return n?n.call(t,e):t.parentModel}m.prototype={constructor:m,init:null,mergeOption:function(t){r.merge(this.option,t,!0)},get:function(t,e){return null==t?this.option:v(this.option,this.parsePath(t),!e&&y(this,t))},getShallow:function(t,e){var n=this.option,r=null==n?n:n[t],i=!e&&y(this,t);return null==r&&i&&(r=i.getShallow(t)),r},getModel:function(t,e){var n,r=null==t?this.option:v(this.option,t=this.parsePath(t));return e=e||(n=y(this,t))&&n.getModel(t),new m(r,e,this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){var t=this.constructor;return new t(r.clone(this.option))},setReadOnly:function(t){},parsePath:function(t){return"string"===typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){g(this).getParent=t},isAnimationEnabled:function(){if(!i.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},u(m),c(m),p(m,l),p(m,h),p(m,f),p(m,d);var b=m;t.exports=b},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},4392:function(t,e,n){const r=n("3034"),i=(t,e,n)=>0===r(t,e,n);t.exports=i},4436:function(t,e,n){var r=n("74cb");function i(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}i.prototype={constructor:i,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i=this.easing,o="string"===typeof i?r[i]:i,a="function"===typeof o?o(n):n;return this.fire("frame",a),1===n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){t="on"+t,this[t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var o=i;t.exports=o},"44ad":function(t,e,n){var r=n("d039"),i=n("c6b6"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},"44de":function(t,e,n){var r=n("da84");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},4573:function(t,e,n){var r=n("cbe5"),i=r.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=2*Math.PI;t.moveTo(n+e.r,r),t.arc(n,r,e.r,0,i,!1),t.moveTo(n+e.r0,r),t.arc(n,r,e.r0,0,i,!0)}});t.exports=i},"46ad":function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;0!==i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}},"46cc":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
var r,i;n.d(e,"a",(function(){return r})),function(t){t[t["DT_INVALID"]=0]="DT_INVALID",t[t["DT_FLOAT"]=1]="DT_FLOAT",t[t["DT_DOUBLE"]=2]="DT_DOUBLE",t[t["DT_INT32"]=3]="DT_INT32",t[t["DT_UINT8"]=4]="DT_UINT8",t[t["DT_INT16"]=5]="DT_INT16",t[t["DT_INT8"]=6]="DT_INT8",t[t["DT_STRING"]=7]="DT_STRING",t[t["DT_COMPLEX64"]=8]="DT_COMPLEX64",t[t["DT_INT64"]=9]="DT_INT64",t[t["DT_BOOL"]=10]="DT_BOOL",t[t["DT_QINT8"]=11]="DT_QINT8",t[t["DT_QUINT8"]=12]="DT_QUINT8",t[t["DT_QINT32"]=13]="DT_QINT32",t[t["DT_BFLOAT16"]=14]="DT_BFLOAT16",t[t["DT_FLOAT_REF"]=101]="DT_FLOAT_REF",t[t["DT_DOUBLE_REF"]=102]="DT_DOUBLE_REF",t[t["DT_INT32_REF"]=103]="DT_INT32_REF",t[t["DT_UINT8_REF"]=104]="DT_UINT8_REF",t[t["DT_INT16_REF"]=105]="DT_INT16_REF",t[t["DT_INT8_REF"]=106]="DT_INT8_REF",t[t["DT_STRING_REF"]=107]="DT_STRING_REF",t[t["DT_COMPLEX64_REF"]=108]="DT_COMPLEX64_REF",t[t["DT_INT64_REF"]=109]="DT_INT64_REF",t[t["DT_BOOL_REF"]=110]="DT_BOOL_REF",t[t["DT_QINT8_REF"]=111]="DT_QINT8_REF",t[t["DT_QUINT8_REF"]=112]="DT_QUINT8_REF",t[t["DT_QINT32_REF"]=113]="DT_QINT32_REF",t[t["DT_BFLOAT16_REF"]=114]="DT_BFLOAT16_REF"}(r||(r={})),function(t){let e;(function(t){t[t["LEGACY"]=0]="LEGACY",t[t["V1"]=1]="V1",t[t["V2"]=2]="V2"})(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(i||(i={}))},"473f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=n("3009"),i=o(r);function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(0,i.default)(t)}t.exports=e["default"]},"482f":function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"f",(function(){return S})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return W})),n.d(e,"c",(function(){return K})),n.d(e,"b",(function(){return ut}));var r=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function o(){}var a=.7,s=1/a,u="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3})$/,f=/^#([0-9a-f]{6})$/,d=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),p=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),g=new RegExp("^rgba\\("+[u,u,u,c]+"\\)$"),m=new RegExp("^rgba\\("+[l,l,l,c]+"\\)$"),v=new RegExp("^hsl\\("+[c,l,l]+"\\)$"),y=new RegExp("^hsla\\("+[c,l,l,c]+"\\)$"),b={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(t){var e;return t=(t+"").trim().toLowerCase(),(e=h.exec(t))?(e=parseInt(e[1],16),new C(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=f.exec(t))?w(parseInt(e[1],16)):(e=d.exec(t))?new C(e[1],e[2],e[3],1):(e=p.exec(t))?new C(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=g.exec(t))?_(e[1],e[2],e[3],e[4]):(e=m.exec(t))?_(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=v.exec(t))?A(e[1],e[2]/100,e[3]/100,1):(e=y.exec(t))?A(e[1],e[2]/100,e[3]/100,e[4]):b.hasOwnProperty(t)?w(b[t]):"transparent"===t?new C(NaN,NaN,NaN,0):null}function w(t){return new C(t>>16&255,t>>8&255,255&t,1)}function _(t,e,n,r){return r<=0&&(t=e=n=NaN),new C(t,e,n,r)}function O(t){return t instanceof o||(t=x(t)),t?(t=t.rgb(),new C(t.r,t.g,t.b,t.opacity)):new C}function S(t,e,n,r){return 1===arguments.length?O(t):new C(t,e,n,null==r?1:r)}function C(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function k(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function A(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new j(t,e,n,r)}function T(t){if(t instanceof j)return new j(t.h,t.s,t.l,t.opacity);if(t instanceof o||(t=x(t)),!t)return new j;if(t instanceof j)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,u=a-i,c=(a+i)/2;return u?(s=e===a?(n-r)/u+6*(n<r):n===a?(r-e)/u+2:(e-n)/u+4,u/=c<.5?a+i:2-a-i,s*=60):u=c>0&&c<1?0:s,new j(s,u,c,t.opacity)}function E(t,e,n,r){return 1===arguments.length?T(t):new j(t,e,n,null==r?1:r)}function j(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function D(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}r(o,x,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),r(C,S,i(o,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new C(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?a:Math.pow(a,t),new C(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+k(this.r)+k(this.g)+k(this.b)},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),r(j,E,i(o,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new j(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?a:Math.pow(a,t),new j(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new C(D(t>=240?t-240:t+120,i,r),D(t,i,r),D(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var M=Math.PI/180,N=180/Math.PI,I=18,R=.96422,F=1,P=.82521,$=4/29,L=6/29,z=3*L*L,B=L*L*L;function U(t){if(t instanceof V)return new V(t.l,t.a,t.b,t.opacity);if(t instanceof Z)return J(t);t instanceof C||(t=O(t));var e,n,r=X(t.r),i=X(t.g),o=X(t.b),a=H((.2225045*r+.7168786*i+.0606169*o)/F);return r===i&&i===o?e=n=a:(e=H((.4360747*r+.3850649*i+.1430804*o)/R),n=H((.0139322*r+.0971045*i+.7141733*o)/P)),new V(116*a-16,500*(e-a),200*(a-n),t.opacity)}function W(t,e,n,r){return 1===arguments.length?U(t):new V(t,e,n,null==r?1:r)}function V(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function H(t){return t>B?Math.pow(t,1/3):t/z+$}function q(t){return t>L?t*t*t:z*(t-$)}function G(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function X(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Y(t){if(t instanceof Z)return new Z(t.h,t.c,t.l,t.opacity);if(t instanceof V||(t=U(t)),0===t.a&&0===t.b)return new Z(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*N;return new Z(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function K(t,e,n,r){return 1===arguments.length?Y(t):new Z(t,e,n,null==r?1:r)}function Z(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function J(t){if(isNaN(t.h))return new V(t.l,0,0,t.opacity);var e=t.h*M;return new V(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}r(V,W,i(o,{brighter:function(t){return new V(this.l+I*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new V(this.l-I*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=R*q(e),t=F*q(t),n=P*q(n),new C(G(3.1338561*e-1.6168667*t-.4906146*n),G(-.9787684*e+1.9161415*t+.033454*n),G(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),r(Z,K,i(o,{brighter:function(t){return new Z(this.h,this.c,this.l+I*(null==t?1:t),this.opacity)},darker:function(t){return new Z(this.h,this.c,this.l-I*(null==t?1:t),this.opacity)},rgb:function(){return J(this).rgb()}}));var Q=-.14861,tt=1.78277,et=-.29227,nt=-.90649,rt=1.97294,it=rt*nt,ot=rt*tt,at=tt*et-nt*Q;function st(t){if(t instanceof ct)return new ct(t.h,t.s,t.l,t.opacity);t instanceof C||(t=O(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(at*r+it*e-ot*n)/(at+it-ot),o=r-i,a=(rt*(n-i)-et*o)/nt,s=Math.sqrt(a*a+o*o)/(rt*i*(1-i)),u=s?Math.atan2(a,o)*N-120:NaN;return new ct(u<0?u+360:u,s,i,t.opacity)}function ut(t,e,n,r){return 1===arguments.length?st(t):new ct(t,e,n,null==r?1:r)}function ct(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}r(ct,ut,i(o,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new ct(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?a:Math.pow(a,t),new ct(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*M,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new C(255*(e+n*(Q*r+tt*i)),255*(e+n*(et*r+nt*i)),255*(e+n*(rt*r)),this.opacity)}}))},"483a":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StyleSheet=p;var r=n("320c"),i=o(r);function o(t){return t&&t.__esModule?t:{default:t}}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t){return t[t.length-1]}function u(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}var c="undefined"!==typeof window,l=!1,h=!1,f=function(){if(c){var t=document.createElement("div");return t.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1===t.getElementsByTagName("i").length}}();function d(){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-glamor",""),t.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(t),t}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.speedy,n=void 0===e?!l&&!h:e,r=t.maxLength,i=void 0===r?c&&f?4e3:65e3:r;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}(0,i.default)(p.prototype,{getSheet:function(){return u(s(this.tags))},inject:function(){var t=this;if(this.injected)throw new Error("already injected stylesheet!");c?this.tags[0]=d():this.sheet={cssRules:[],insertRule:function(e){t.sheet.cssRules.push({cssText:e})}},this.injected=!0},speedy:function(t){if(0!==this.ctr)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+t+") earlier in your app, or call flush() before speedy("+t+")");this.isSpeedy=!!t},_insert:function(t){try{var e=this.getSheet();e.insertRule(t,-1!==t.indexOf("@import")?0:e.cssRules.length)}catch(n){l&&console.warn("whoops, illegal rule inserted",t)}},insert:function(t){if(c)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(t);else if(-1!==t.indexOf("@import")){var e=s(this.tags);e.insertBefore(document.createTextNode(t),e.firstChild)}else s(this.tags).appendChild(document.createTextNode(t));else this.sheet.insertRule(t,-1!==t.indexOf("@import")?0:this.sheet.cssRules.length);return this.ctr++,c&&this.ctr%this.maxLength===0&&this.tags.push(d()),this.ctr-1},delete:function(t){return this.replace(t,"")},flush:function(){c?(this.tags.forEach((function(t){return t.parentNode.removeChild(t)})),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!c)return this.sheet.cssRules;var t=[];return this.tags.forEach((function(e){return t.splice.apply(t,[t.length,0].concat(a(Array.from(u(e).cssRules))))})),t}})},4840:function(t,e,n){var r=n("825a"),i=n("1c0b"),o=n("b622"),a=o("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[a])?e:i(n)}},4856:function(t,e,n){"use strict";function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e["default"]},"48a9":function(t,e,n){var r=n("6d8b"),i=n("42e5"),o=function(t,e,n,r,o,a){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==r?0:r,this.type="linear",this.global=a||!1,i.call(this,o)};o.prototype={constructor:o},r.inherits(o,i);var a=o;t.exports=a},"48c7":function(t,e,n){var r=n("6d8b"),i=n("6cb7"),o=n("9e47"),a=n("2023"),s=i.extend({type:"cartesian2dAxis",axis:null,init:function(){s.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){s.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){s.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function u(t,e){return e.type||(e.data?"category":"value")}r.merge(s.prototype,a);var c={offset:0};o("x",s,u,c),o("y",s,u,c);var l=s;t.exports=l},4930:function(t,e,n){var r=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},4942:function(t,e,n){var r=n("2cf4"),i=r.debugMode,o=function(){};1===i&&(o=console.error);var a=o;t.exports=a},4971:function(t,e,n){(function(e,r){t.exports=r(n("2b0e"))})("undefined"!==typeof self&&self,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"091b":function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,".vue-slider-dot{position:absolute;-webkit-transition:all 0s;transition:all 0s;z-index:5}.vue-slider-dot:focus{outline:none}.vue-slider-dot-tooltip{position:absolute;visibility:hidden}.vue-slider-dot-hover:hover .vue-slider-dot-tooltip,.vue-slider-dot-tooltip-show{visibility:visible}.vue-slider-dot-tooltip-top{top:-10px;left:50%;-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%)}.vue-slider-dot-tooltip-bottom{bottom:-10px;left:50%;-webkit-transform:translate(-50%,100%);transform:translate(-50%,100%)}.vue-slider-dot-tooltip-left{left:-10px;top:50%;-webkit-transform:translate(-100%,-50%);transform:translate(-100%,-50%)}.vue-slider-dot-tooltip-right{right:-10px;top:50%;-webkit-transform:translate(100%,-50%);transform:translate(100%,-50%)}",""]),t.exports=e},"24fb":function(t,e,n){"use strict";function r(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"===typeof btoa){var o=i(r),a=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(a).concat([o]).join("\n")}return[n].join("\n")}function i(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(n," */")}t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=r(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"===typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},2638:function(t,e,n){"use strict";function r(){return r=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)}var i=["attrs","props","domProps"],o=["class","style","directives"],a=["on","nativeOn"],s=function(t){return t.reduce((function(t,e){for(var n in e)if(t[n])if(-1!==i.indexOf(n))t[n]=r({},t[n],e[n]);else if(-1!==o.indexOf(n)){var s=t[n]instanceof Array?t[n]:[t[n]],c=e[n]instanceof Array?e[n]:[e[n]];t[n]=s.concat(c)}else if(-1!==a.indexOf(n))for(var l in e[n])if(t[n][l]){var h=t[n][l]instanceof Array?t[n][l]:[t[n][l]],f=e[n][l]instanceof Array?e[n][l]:[e[n][l]];t[n][l]=h.concat(f)}else t[n][l]=e[n][l];else if("hook"==n)for(var d in e[n])t[n][d]=t[n][d]?u(t[n][d],e[n][d]):e[n][d];else t[n]=e[n];else t[n]=e[n];return t}),{})},u=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}};t.exports=s},"499e":function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s=o[1],u=o[2],c=o[3],l={id:t+":"+i,css:s,media:u,sourceMap:c};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}n.r(e),n.d(e,"default",(function(){return p}));var i="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,u=0,c=!1,l=function(){},h=null,f="data-vue-ssr-id",d="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(t,e,n,i){c=n,h=i||{};var a=r(t,e);return g(a),function(e){for(var n=[],i=0;i<a.length;i++){var s=a[i],u=o[s.id];u.refs--,n.push(u)}for(e?(a=r(t,e),g(a)):a=[],i=0;i<n.length;i++)if(u=n[i],0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete o[u.id]}}}function g(t){for(var e=0;e<t.length;e++){var n=t[e],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(v(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(v(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function m(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function v(t){var e,n,r=document.querySelector("style["+f+'~="'+t.id+'"]');if(r){if(c)return l;r.parentNode.removeChild(r)}if(d){var i=u++;r=s||(s=m()),e=b.bind(null,r,i,!1),n=b.bind(null,r,i,!0)}else r=m(),e=x.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function b(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=y(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function x(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),h.ssrId&&t.setAttribute(f,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},"4abb":function(t,e,n){var r=n("7a57");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("499e").default;i("b2af7572",r,!0,{sourceMap:!1,shadowMode:!1})},"4ed8":function(t,e,n){var r=n("091b");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("499e").default;i("2f6bee1a",r,!0,{sourceMap:!1,shadowMode:!1})},"556c":function(t,e,n){var r=n("eef2");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("499e").default;i("1209fd47",r,!0,{sourceMap:!1,shadowMode:!1})},"65d9":function(t,e,n){"use strict";
/**
  * vue-class-component v7.0.1
  * (c) 2015-present Evan You
  * @license MIT
  */function r(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("8bbf")),o="undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys;function a(t,e){s(t,e),Object.getOwnPropertyNames(e.prototype).forEach((function(n){s(t.prototype,e.prototype,n)})),Object.getOwnPropertyNames(e).forEach((function(n){s(t,e,n)}))}function s(t,e,n){var r=n?Reflect.getOwnMetadataKeys(e,n):Reflect.getOwnMetadataKeys(e);r.forEach((function(r){var i=n?Reflect.getOwnMetadata(r,e,n):Reflect.getOwnMetadata(r,e);n?Reflect.defineMetadata(r,i,t,n):Reflect.defineMetadata(r,i,t)}))}var u={__proto__:[]},c=u instanceof Array;function l(t){return function(e,n,r){var i="function"===typeof e?e:e.constructor;i.__decorators__||(i.__decorators__=[]),"number"!==typeof r&&(r=void 0),i.__decorators__.push((function(e){return t(e,n,r)}))}}function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.extend({mixins:t})}function f(t){var e=typeof t;return null==t||"object"!==e&&"function"!==e}function d(t,e){var n=e.prototype._init;e.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var r in t.$options.props)t.hasOwnProperty(r)||n.push(r);n.forEach((function(n){"_"!==n.charAt(0)&&Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})}))};var r=new e;e.prototype._init=n;var i={};return Object.keys(r).forEach((function(t){void 0!==r[t]&&(i[t]=r[t])})),i}var p=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function g(t,e){void 0===e&&(e={}),e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(t){if("constructor"!==t)if(p.indexOf(t)>-1)e[t]=n[t];else{var r=Object.getOwnPropertyDescriptor(n,t);void 0!==r.value?"function"===typeof r.value?(e.methods||(e.methods={}))[t]=r.value:(e.mixins||(e.mixins=[])).push({data:function(){var e;return e={},e[t]=r.value,e}}):(r.get||r.set)&&((e.computed||(e.computed={}))[t]={get:r.get,set:r.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return d(this,t)}});var r=t.__decorators__;r&&(r.forEach((function(t){return t(e)})),delete t.__decorators__);var s=Object.getPrototypeOf(t.prototype),u=s instanceof i?s.constructor:i,c=u.extend(e);return m(c,t,u),o&&a(c,t),c}function m(t,e,n){Object.getOwnPropertyNames(e).forEach((function(r){if("prototype"!==r){var i=Object.getOwnPropertyDescriptor(t,r);if(!i||i.configurable){var o=Object.getOwnPropertyDescriptor(e,r);if(!c){if("cid"===r)return;var a=Object.getOwnPropertyDescriptor(n,r);if(!f(o.value)&&a&&a.value===o.value)return}Object.defineProperty(t,r,o)}}}))}function v(t){return"function"===typeof t?g(t):function(e){return g(e,t)}}v.registerHooks=function(t){p.push.apply(p,t)},e.default=v,e.createDecorator=l,e.mixins=h},"7a57":function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,".vue-slider{position:relative;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.vue-slider-rail{position:relative;width:100%;height:100%;-webkit-transition-property:width,height,left,right,top,bottom;transition-property:width,height,left,right,top,bottom}.vue-slider-process{position:absolute;z-index:1}",""]),t.exports=e},8875:function(t,e,n){var r,i,o;(function(n,a){i=[],r=a,o="function"===typeof r?r.apply(e,i):r,void 0===o||(t.exports=o)})("undefined"!==typeof self&&self,(function(){function t(){if(document.currentScript)return document.currentScript;try{throw new Error}catch(h){var t,e,n,r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,i=/@([^@]*):(\d+):(\d+)\s*$/gi,o=r.exec(h.stack)||i.exec(h.stack),a=o&&o[1]||!1,s=o&&o[2]||!1,u=document.location.href.replace(document.location.hash,""),c=document.getElementsByTagName("script");a===u&&(t=document.documentElement.outerHTML,e=new RegExp("(?:[^\\n]+?\\n){0,"+(s-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),n=t.replace(e,"$1").trim());for(var l=0;l<c.length;l++){if("interactive"===c[l].readyState)return c[l];if(c[l].src===a)return c[l];if(a===u&&c[l].innerHTML&&c[l].innerHTML.trim()===n)return c[l]}return null}}return t}))},"8bbf":function(e,n){e.exports=t},eef2:function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,".vue-slider-marks{position:relative;width:100%;height:100%}.vue-slider-mark{position:absolute;z-index:1}.vue-slider-ltr .vue-slider-mark,.vue-slider-rtl .vue-slider-mark{width:0;height:100%;top:50%}.vue-slider-ltr .vue-slider-mark-step,.vue-slider-rtl .vue-slider-mark-step{top:0}.vue-slider-ltr .vue-slider-mark-label,.vue-slider-rtl .vue-slider-mark-label{top:100%;margin-top:10px}.vue-slider-ltr .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ltr .vue-slider-mark-step{left:0}.vue-slider-ltr .vue-slider-mark-label{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.vue-slider-rtl .vue-slider-mark{-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%)}.vue-slider-rtl .vue-slider-mark-step{right:0}.vue-slider-rtl .vue-slider-mark-label{right:50%;-webkit-transform:translateX(50%);transform:translateX(50%)}.vue-slider-btt .vue-slider-mark,.vue-slider-ttb .vue-slider-mark{width:100%;height:0;left:50%}.vue-slider-btt .vue-slider-mark-step,.vue-slider-ttb .vue-slider-mark-step{left:0}.vue-slider-btt .vue-slider-mark-label,.vue-slider-ttb .vue-slider-mark-label{left:100%;margin-left:10px}.vue-slider-btt .vue-slider-mark{-webkit-transform:translate(-50%,50%);transform:translate(-50%,50%)}.vue-slider-btt .vue-slider-mark-step{top:0}.vue-slider-btt .vue-slider-mark-label{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.vue-slider-ttb .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ttb .vue-slider-mark-step{bottom:0}.vue-slider-ttb .vue-slider-mark-label{bottom:50%;-webkit-transform:translateY(50%);transform:translateY(50%)}.vue-slider-mark-label,.vue-slider-mark-step{position:absolute}",""]),t.exports=e},fb15:function(t,e,n){"use strict";if(n.r(e),n.d(e,"ERROR_TYPE",(function(){return Z})),n.d(e,"VueSliderMark",(function(){return U})),n.d(e,"VueSliderDot",(function(){return T})),"undefined"!==typeof window){var r=window.document.currentScript,i=n("8875");r=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var o=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var a=n("2638"),s=n.n(a);function u(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}var c=n("8bbf"),l=n.n(c),h=n("65d9"),f=n.n(h);function d(t,e){return void 0===e&&(e={}),Object(h["createDecorator"])((function(n,r){(n.props||(n.props={}))[r]=e,n.model={prop:r,event:t||r}}))}function p(t){return void 0===t&&(t={}),Object(h["createDecorator"])((function(e,n){(e.props||(e.props={}))[n]=t}))}function g(t,e){void 0===e&&(e={});var n=e.deep,r=void 0!==n&&n,i=e.immediate,o=void 0!==i&&i;return Object(h["createDecorator"])((function(e,n){"object"!==typeof e.watch&&(e.watch=Object.create(null));var i=e.watch;"object"!==typeof i[t]||Array.isArray(i[t])?"undefined"===typeof i[t]&&(i[t]=[]):i[t]=[i[t]],i[t].push({handler:n,deep:r,immediate:o})}))}function m(t){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}function x(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}function w(t,e){return w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},w(t,e)}function _(t){var e=C();return function(){var n,r=k(t);if(e){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){return!e||"object"!==m(e)&&"function"!==typeof e?S(t):e}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}n("4ed8");var A=function(){var t=function(t){x(n,t);var e=_(n);function n(){return v(this,n),e.apply(this,arguments)}return b(n,[{key:"dragStart",value:function(t){if(this.disabled)return!1;this.$emit("drag-start")}},{key:"render",value:function(){var t=arguments[0];return t("div",{ref:"dot",class:this.dotClasses,attrs:{"aria-valuetext":this.tooltipValue},on:{mousedown:this.dragStart,touchstart:this.dragStart}},[this.$slots.dot||t("div",{class:this.handleClasses,style:this.dotStyle}),"none"!==this.tooltip?t("div",{class:this.tooltipClasses},[this.$slots.tooltip||t("div",{class:this.tooltipInnerClasses,style:this.tooltipStyle},[t("span",{class:"vue-slider-dot-tooltip-text"},[this.tooltipValue])])]):null])}},{key:"dotClasses",get:function(){return["vue-slider-dot",{"vue-slider-dot-hover":"hover"===this.tooltip||"active"===this.tooltip,"vue-slider-dot-disabled":this.disabled,"vue-slider-dot-focus":this.focus}]}},{key:"handleClasses",get:function(){return["vue-slider-dot-handle",{"vue-slider-dot-handle-disabled":this.disabled,"vue-slider-dot-handle-focus":this.focus}]}},{key:"tooltipClasses",get:function(){return["vue-slider-dot-tooltip",["vue-slider-dot-tooltip-".concat(this.tooltipPlacement)],{"vue-slider-dot-tooltip-show":this.showTooltip}]}},{key:"tooltipInnerClasses",get:function(){return["vue-slider-dot-tooltip-inner",["vue-slider-dot-tooltip-inner-".concat(this.tooltipPlacement)],{"vue-slider-dot-tooltip-inner-disabled":this.disabled,"vue-slider-dot-tooltip-inner-focus":this.focus}]}},{key:"showTooltip",get:function(){switch(this.tooltip){case"always":return!0;case"none":return!1;case"focus":case"active":return!!this.focus;default:return!1}}},{key:"tooltipValue",get:function(){return this.tooltipFormatter?"string"===typeof this.tooltipFormatter?this.tooltipFormatter.replace(/\{value\}/,String(this.value)):this.tooltipFormatter(this.value):this.value}}]),n}(l.a);return u([p({default:0})],t.prototype,"value",void 0),u([p()],t.prototype,"tooltip",void 0),u([p()],t.prototype,"dotStyle",void 0),u([p()],t.prototype,"tooltipStyle",void 0),u([p({type:String,validator:function(t){return["top","right","bottom","left"].indexOf(t)>-1},required:!0})],t.prototype,"tooltipPlacement",void 0),u([p({type:[String,Function]})],t.prototype,"tooltipFormatter",void 0),u([p({type:Boolean,default:!1})],t.prototype,"focus",void 0),u([p({default:!1})],t.prototype,"disabled",void 0),t=u([f.a],t),t}(),T=A;function E(t){return E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e,n){return e&&D(t.prototype,e),n&&D(t,n),t}function N(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}function I(t,e){return I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},I(t,e)}function R(t){var e=$();return function(){var n,r=L(t);if(e){var i=L(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return F(this,n)}}function F(t,e){return!e||"object"!==E(e)&&"function"!==typeof e?P(t):e}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}n("556c");var z,B=function(){var t=function(t){N(n,t);var e=R(n);function n(){return j(this,n),e.apply(this,arguments)}return M(n,[{key:"labelClickHandle",value:function(t){t.stopPropagation(),this.$emit("pressLabel",this.mark.pos)}},{key:"render",value:function(){var t=arguments[0],e=this.mark;return t("div",{class:this.marksClasses},[this.$slots.step||t("div",{class:this.stepClasses,style:[this.stepStyle,e.style,e.active?this.stepActiveStyle:null,e.active?e.activeStyle:null]}),this.hideLabel?null:this.$slots.label||t("div",{class:this.labelClasses,style:[this.labelStyle,e.labelStyle,e.active?this.labelActiveStyle:null,e.active?e.labelActiveStyle:null],on:{click:this.labelClickHandle}},[e.label])])}},{key:"marksClasses",get:function(){return["vue-slider-mark",{"vue-slider-mark-active":this.mark.active}]}},{key:"stepClasses",get:function(){return["vue-slider-mark-step",{"vue-slider-mark-step-active":this.mark.active}]}},{key:"labelClasses",get:function(){return["vue-slider-mark-label",{"vue-slider-mark-label-active":this.mark.active}]}}]),n}(l.a);return u([p({required:!0})],t.prototype,"mark",void 0),u([p(Boolean)],t.prototype,"hideLabel",void 0),u([p()],t.prototype,"stepStyle",void 0),u([p()],t.prototype,"stepActiveStyle",void 0),u([p()],t.prototype,"labelStyle",void 0),u([p()],t.prototype,"labelActiveStyle",void 0),t=u([f.a],t),t}(),U=B,W=function(t){return"number"===typeof t?"".concat(t,"px"):t},V=function(t){var e=document.documentElement,n=document.body,r=t.getBoundingClientRect(),i={y:r.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||n.clientTop||0),x:r.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||n.clientLeft||0)};return i},H=function(t,e,n){var r="targetTouches"in t?t.targetTouches[0]:t,i=V(e),o={x:r.pageX-i.x,y:r.pageY-i.y};return{x:n?e.offsetWidth-o.x:o.x,y:n?e.offsetHeight-o.y:o.y}};(function(t){t[t["PAGE_UP"]=33]="PAGE_UP",t[t["PAGE_DOWN"]=34]="PAGE_DOWN",t[t["END"]=35]="END",t[t["HOME"]=36]="HOME",t[t["LEFT"]=37]="LEFT",t[t["UP"]=38]="UP",t[t["RIGHT"]=39]="RIGHT",t[t["DOWN"]=40]="DOWN"})(z||(z={}));var q=function(t,e){if(e.hook){var n=e.hook(t);if("function"===typeof n)return n;if(!n)return null}switch(t.keyCode){case z.UP:return function(t){return"ttb"===e.direction?t-1:t+1};case z.RIGHT:return function(t){return"rtl"===e.direction?t-1:t+1};case z.DOWN:return function(t){return"ttb"===e.direction?t+1:t-1};case z.LEFT:return function(t){return"rtl"===e.direction?t+1:t-1};case z.END:return function(){return e.max};case z.HOME:return function(){return e.min};case z.PAGE_UP:return function(t){return t+10};case z.PAGE_DOWN:return function(t){return t-10};default:return null}};function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e,n){return e&&X(t.prototype,e),n&&X(t,n),t}var K,Z,J=function(){function t(e){G(this,t),this.num=e}return Y(t,[{key:"decimal",value:function(t,e){var n=this.num,r=this.getDecimalLen(n),i=this.getDecimalLen(t),o=0;switch(e){case"+":o=this.getExponent(r,i),this.num=(this.safeRoundUp(n,o)+this.safeRoundUp(t,o))/o;break;case"-":o=this.getExponent(r,i),this.num=(this.safeRoundUp(n,o)-this.safeRoundUp(t,o))/o;break;case"*":this.num=this.safeRoundUp(this.safeRoundUp(n,this.getExponent(r)),this.safeRoundUp(t,this.getExponent(i)))/this.getExponent(r+i);break;case"/":o=this.getExponent(r,i),this.num=this.safeRoundUp(n,o)/this.safeRoundUp(t,o);break;case"%":o=this.getExponent(r,i),this.num=this.safeRoundUp(n,o)%this.safeRoundUp(t,o)/o;break}return this}},{key:"plus",value:function(t){return this.decimal(t,"+")}},{key:"minus",value:function(t){return this.decimal(t,"-")}},{key:"multiply",value:function(t){return this.decimal(t,"*")}},{key:"divide",value:function(t){return this.decimal(t,"/")}},{key:"remainder",value:function(t){return this.decimal(t,"%")}},{key:"toNumber",value:function(){return this.num}},{key:"getDecimalLen",value:function(t){var e="".concat(t).split("e");return("".concat(e[0]).split(".")[1]||"").length-(e[1]?+e[1]:0)}},{key:"getExponent",value:function(t,e){return Math.pow(10,void 0!==e?Math.max(t,e):t)}},{key:"safeRoundUp",value:function(t,e){return Math.round(t*e)}}]),t}();function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t,e){return it(t)||rt(t,e)||st(t,e)||nt()}function nt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rt(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}}function it(t){if(Array.isArray(t))return t}function ot(t){return ct(t)||ut(t)||st(t)||at()}function at(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function st(t,e){if(t){if("string"===typeof t)return lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(t,e):void 0}}function ut(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function ct(t){if(Array.isArray(t))return lt(t)}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dt(t,e,n){return e&&ft(t.prototype,e),n&&ft(t,n),t}function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}(function(t){t[t["VALUE"]=1]="VALUE",t[t["INTERVAL"]=2]="INTERVAL",t[t["MIN"]=3]="MIN",t[t["MAX"]=4]="MAX",t[t["ORDER"]=5]="ORDER"})(Z||(Z={}));var gt=(K={},pt(K,Z.VALUE,'The type of the "value" is illegal'),pt(K,Z.INTERVAL,'The prop "interval" is invalid, "(max - min)" must be divisible by "interval"'),pt(K,Z.MIN,'The "value" must be greater than or equal to the "min".'),pt(K,Z.MAX,'The "value" must be less than or equal to the "max".'),pt(K,Z.ORDER,'When "order" is false, the parameters "minRange", "maxRange", "fixed", "enabled" are invalid.'),K),mt=function(){function t(e){ht(this,t),this.dotsPos=[],this.dotsValue=[],this.cacheRangeDir={},this.data=e.data,this.max=e.max,this.min=e.min,this.interval=e.interval,this.order=e.order,this.marks=e.marks,this.included=e.included,this.process=e.process,this.adsorb=e.adsorb,this.dotOptions=e.dotOptions,this.onError=e.onError,this.order?(this.minRange=e.minRange||0,this.maxRange=e.maxRange||0,this.enableCross=e.enableCross,this.fixed=e.fixed):((e.minRange||e.maxRange||!e.enableCross||e.fixed)&&this.emitError(Z.ORDER),this.minRange=0,this.maxRange=0,this.enableCross=!0,this.fixed=!1),this.setValue(e.value)}return dt(t,[{key:"setValue",value:function(t){this.setDotsValue(Array.isArray(t)?ot(t):[t],!0)}},{key:"setDotsValue",value:function(t,e){this.dotsValue=t,e&&this.syncDotsPos()}},{key:"setDotsPos",value:function(t){var e=this,n=this.order?ot(t).sort((function(t,e){return t-e})):t;this.dotsPos=n,this.setDotsValue(n.map((function(t){return e.getValueByPos(t)})),this.adsorb)}},{key:"getValueByPos",value:function(t){var e=this.parsePos(t);if(this.included){var n=100;this.markList.forEach((function(r){var i=Math.abs(r.pos-t);i<n&&(n=i,e=r.value)}))}return e}},{key:"syncDotsPos",value:function(){var t=this;this.dotsPos=this.dotsValue.map((function(e){return t.parseValue(e)}))}},{key:"getRecentDot",value:function(t){var e=this.dotsPos.map((function(e){return Math.abs(e-t)}));return e.indexOf(Math.min.apply(Math,ot(e)))}},{key:"getIndexByValue",value:function(t){return this.data?this.data.indexOf(t):new J(+t).minus(this.min).divide(this.interval).toNumber()}},{key:"getValueByIndex",value:function(t){return t<0?t=0:t>this.total&&(t=this.total),this.data?this.data[t]:new J(t).multiply(this.interval).plus(this.min).toNumber()}},{key:"setDotPos",value:function(t,e){t=this.getValidPos(t,e).pos;var n=t-this.dotsPos[e];if(n){var r=new Array(this.dotsPos.length);this.fixed?r=this.getFixedChangePosArr(n,e):this.minRange||this.maxRange?r=this.getLimitRangeChangePosArr(t,n,e):r[e]=n,this.setDotsPos(this.dotsPos.map((function(t,e){return t+(r[e]||0)})))}}},{key:"getFixedChangePosArr",value:function(t,e){var n=this;return this.dotsPos.forEach((function(r,i){if(i!==e){var o=n.getValidPos(r+t,i),a=o.pos,s=o.inRange;s||(t=Math.min(Math.abs(a-r),Math.abs(t))*(t<0?-1:1))}})),this.dotsPos.map((function(e){return t}))}},{key:"getLimitRangeChangePosArr",value:function(t,e,n){var r=this,i=[{index:n,changePos:e}],o=e;return[this.minRange,this.maxRange].forEach((function(a,s){if(!a)return!1;var u=0===s,c=e>0,l=0;l=u?c?1:-1:c?-1:1;var h=function(t,e){var n=Math.abs(t-e);return u?n<r.minRangeDir:n>r.maxRangeDir},f=n+l,d=r.dotsPos[f],p=t;while(r.isPos(d)&&h(d,p)){var g=r.getValidPos(d+o,f),m=g.pos;i.push({index:f,changePos:m-d}),f+=l,p=m,d=r.dotsPos[f]}})),this.dotsPos.map((function(t,e){var n=i.filter((function(t){return t.index===e}));return n.length?n[0].changePos:0}))}},{key:"isPos",value:function(t){return"number"===typeof t}},{key:"getValidPos",value:function(t,e){var n=this.valuePosRange[e],r=!0;return t<n[0]?(t=n[0],r=!1):t>n[1]&&(t=n[1],r=!1),{pos:t,inRange:r}}},{key:"parseValue",value:function(t){if(this.data)t=this.data.indexOf(t);else if("number"===typeof t||"string"===typeof t){if(t=+t,t<this.min)return this.emitError(Z.MIN),0;if(t>this.max)return this.emitError(Z.MAX),0;if("number"!==typeof t||t!==t)return this.emitError(Z.VALUE),0;t=new J(t).minus(this.min).divide(this.interval).toNumber()}var e=new J(t).multiply(this.gap).toNumber();return e<0?0:e>100?100:e}},{key:"parsePos",value:function(t){var e=Math.round(t/this.gap);return this.getValueByIndex(e)}},{key:"isActiveByPos",value:function(t){return this.processArray.some((function(e){var n=et(e,2),r=n[0],i=n[1];return t>=r&&t<=i}))}},{key:"getValues",value:function(){if(this.data)return this.data;for(var t=[],e=0;e<=this.total;e++)t.push(new J(e).multiply(this.interval).plus(this.min).toNumber());return t}},{key:"getRangeDir",value:function(t){return t?new J(t).divide(new J(this.data?this.data.length-1:this.max).minus(this.data?0:this.min).toNumber()).multiply(100).toNumber():100}},{key:"emitError",value:function(t){this.onError&&this.onError(t,gt[t])}},{key:"getDotRange",value:function(t,e,n){if(!this.dotOptions)return n;var r=Array.isArray(this.dotOptions)?this.dotOptions[t]:this.dotOptions;return r&&void 0!==r[e]?this.parseValue(r[e]):n}},{key:"markList",get:function(){var t=this;if(!this.marks)return[];var e=function(e,n){var r=t.parseValue(e);return tt({pos:r,value:e,label:e,active:t.isActiveByPos(r)},n)};return!0===this.marks?this.getValues().map((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(this.marks)?Object.keys(this.marks).sort((function(t,e){return+t-+e})).map((function(n){var r=t.marks[n];return e(n,"string"!==typeof r?r:{label:r})})):Array.isArray(this.marks)?this.marks.map((function(t){return e(t)})):"function"===typeof this.marks?this.getValues().map((function(e){return{value:e,result:t.marks(e)}})).filter((function(t){var e=t.result;return!!e})).map((function(t){var n=t.value,r=t.result;return e(n,r)})):[]}},{key:"processArray",get:function(){if(this.process){if("function"===typeof this.process)return this.process(this.dotsPos);if(1===this.dotsPos.length)return[[0,this.dotsPos[0]]];if(this.dotsPos.length>1)return[[Math.min.apply(Math,ot(this.dotsPos)),Math.max.apply(Math,ot(this.dotsPos))]]}return[]}},{key:"total",get:function(){var t=0;return t=this.data?this.data.length-1:new J(this.max).minus(this.min).divide(this.interval).toNumber(),t-Math.floor(t)!==0?(this.emitError(Z.INTERVAL),0):t}},{key:"gap",get:function(){return 100/this.total}},{key:"minRangeDir",get:function(){return this.cacheRangeDir[this.minRange]?this.cacheRangeDir[this.minRange]:this.cacheRangeDir[this.minRange]=this.getRangeDir(this.minRange)}},{key:"maxRangeDir",get:function(){return this.cacheRangeDir[this.maxRange]?this.cacheRangeDir[this.maxRange]:this.cacheRangeDir[this.maxRange]=this.getRangeDir(this.maxRange)}},{key:"valuePosRange",get:function(){var t=this,e=this.dotsPos,n=[];return e.forEach((function(r,i){n.push([Math.max(t.minRange?t.minRangeDir*i:0,t.enableCross?0:e[i-1]||0,t.getDotRange(i,"min",0)),Math.min(t.minRange?100-t.minRangeDir*(e.length-1-i):100,t.enableCross?100:e[i+1]||100,t.getDotRange(i,"max",100))])})),n}},{key:"dotsIndex",get:function(){var t=this;return this.dotsValue.map((function(e){return t.getIndexByValue(e)}))}}]),t}();function vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bt(t,e,n){return e&&yt(t.prototype,e),n&&yt(t,n),t}var xt=function(){function t(e){vt(this,t),this.states=0,this.map=e}return bt(t,[{key:"add",value:function(t){this.states|=t}},{key:"delete",value:function(t){this.states&=~t}},{key:"toggle",value:function(t){this.has(t)?this.delete(t):this.add(t)}},{key:"has",value:function(t){return!!(this.states&t)}}]),t}();function wt(t,e){return St(t)||Ot(t,e)||jt(t,e)||_t()}function _t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ot(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}}function St(t){if(Array.isArray(t))return t}function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function At(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tt(t){return Mt(t)||Dt(t)||jt(t)||Et()}function Et(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jt(t,e){if(t){if("string"===typeof t)return Nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(t,e):void 0}}function Dt(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function Mt(t){if(Array.isArray(t))return Nt(t)}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function It(t){return It="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pt(t,e,n){return e&&Ft(t.prototype,e),n&&Ft(t,n),t}function $t(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}function Lt(t,e){return Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Lt(t,e)}function zt(t){var e=Wt();return function(){var n,r=Vt(t);if(e){var i=Vt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bt(this,n)}}function Bt(t,e){return!e||"object"!==It(e)&&"function"!==typeof e?Ut(t):e}function Ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Vt(t){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(t)}n("4abb");var Ht={None:0,Drag:2,Focus:4},qt=4,Gt=function(){var t=function(t){$t(n,t);var e=zt(n);function n(){var t;return Rt(this,n),t=e.apply(this,arguments),t.states=new xt(Ht),t.scale=1,t.focusDotIndex=0,t}return Pt(n,[{key:"isObjectData",value:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)}},{key:"isObjectArrayData",value:function(t){return!!t&&Array.isArray(t)&&t.length>0&&"object"===It(t[0])}},{key:"onValueChanged",value:function(){this.control&&!this.states.has(Ht.Drag)&&this.isNotSync&&this.control.setValue(this.value)}},{key:"created",value:function(){this.initControl()}},{key:"mounted",value:function(){this.bindEvent()}},{key:"beforeDestroy",value:function(){this.unbindEvent()}},{key:"bindEvent",value:function(){document.addEventListener("touchmove",this.dragMove,{passive:!1}),document.addEventListener("touchend",this.dragEnd,{passive:!1}),document.addEventListener("mousedown",this.blurHandle),document.addEventListener("mousemove",this.dragMove),document.addEventListener("mouseup",this.dragEnd),document.addEventListener("mouseleave",this.dragEnd),document.addEventListener("keydown",this.keydownHandle)}},{key:"unbindEvent",value:function(){document.removeEventListener("touchmove",this.dragMove),document.removeEventListener("touchend",this.dragEnd),document.removeEventListener("mousedown",this.blurHandle),document.removeEventListener("mousemove",this.dragMove),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("mouseleave",this.dragEnd),document.removeEventListener("keydown",this.keydownHandle)}},{key:"setScale",value:function(){this.scale=new J(Math.floor(this.isHorizontal?this.$el.offsetWidth:this.$el.offsetHeight)).divide(100).toNumber()}},{key:"initControl",value:function(){var t=this;this.control=new mt({value:this.value,data:this.sliderData,enableCross:this.enableCross,fixed:this.fixed,max:this.max,min:this.min,interval:this.interval,minRange:this.minRange,maxRange:this.maxRange,order:this.order,marks:this.sliderMarks,included:this.included,process:this.process,adsorb:this.adsorb,dotOptions:this.dotOptions,onError:this.emitError}),["data","enableCross","fixed","max","min","interval","minRange","maxRange","order","marks","process","adsorb","included","dotOptions"].forEach((function(e){t.$watch(e,(function(n){if("data"===e&&Array.isArray(t.control.data)&&Array.isArray(n)&&t.control.data.length===n.length&&n.every((function(e,n){return e===t.control.data[n]})))return!1;switch(e){case"data":case"dataLabel":case"dataValue":t.control.data=t.sliderData;break;case"mark":t.control.marks=t.sliderMarks;break;default:t.control[e]=n}["data","max","min","interval"].indexOf(e)>-1&&t.control.syncDotsPos()}))}))}},{key:"syncValueByPos",value:function(){var t=this.control.dotsValue;this.isDiff(t,Array.isArray(this.value)?this.value:[this.value])&&this.$emit("change",1===t.length?t[0]:Tt(t),this.focusDotIndex)}},{key:"isDiff",value:function(t,e){return t.length!==e.length||t.some((function(t,n){return t!==e[n]}))}},{key:"emitError",value:function(t,e){this.silent||console.error("[VueSlider error]: ".concat(e)),this.$emit("error",t,e)}},{key:"dragStartOnProcess",value:function(t){if(this.dragOnClick){this.setScale();var e=this.getPosByEvent(t),n=this.control.getRecentDot(e);if(this.dots[n].disabled)return;this.dragStart(n),this.control.setDotPos(e,this.focusDotIndex),this.lazy||this.syncValueByPos()}}},{key:"dragStart",value:function(t){this.focusDotIndex=t,this.setScale(),this.states.add(Ht.Drag),this.states.add(Ht.Focus),this.$emit("drag-start",this.focusDotIndex)}},{key:"dragMove",value:function(t){if(!this.states.has(Ht.Drag))return!1;t.preventDefault();var e=this.getPosByEvent(t);this.isCrossDot(e),this.control.setDotPos(e,this.focusDotIndex),this.lazy||this.syncValueByPos();var n=this.control.dotsValue;this.$emit("dragging",1===n.length?n[0]:Tt(n),this.focusDotIndex)}},{key:"isCrossDot",value:function(t){if(this.canSort){var e=this.focusDotIndex,n=t;if(n>this.dragRange[1]?(n=this.dragRange[1],this.focusDotIndex++):n<this.dragRange[0]&&(n=this.dragRange[0],this.focusDotIndex--),e!==this.focusDotIndex){var r=this.$refs["dot-".concat(this.focusDotIndex)];r&&r.$el&&r.$el.focus(),this.control.setDotPos(n,e)}}}},{key:"dragEnd",value:function(t){var e=this;if(!this.states.has(Ht.Drag))return!1;setTimeout((function(){e.lazy&&e.syncValueByPos(),e.included&&e.isNotSync?e.control.setValue(e.value):e.control.syncDotsPos(),e.states.delete(Ht.Drag),e.useKeyboard&&!("targetTouches"in t)||e.states.delete(Ht.Focus),e.$emit("drag-end",e.focusDotIndex)}))}},{key:"blurHandle",value:function(t){if(!this.states.has(Ht.Focus)||!this.$refs.container||this.$refs.container.contains(t.target))return!1;this.states.delete(Ht.Focus)}},{key:"clickHandle",value:function(t){if(!this.clickable||this.disabled)return!1;if(!this.states.has(Ht.Drag)){this.setScale();var e=this.getPosByEvent(t);this.setValueByPos(e)}}},{key:"focus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.disabled||(this.states.add(Ht.Focus),this.focusDotIndex=e)}},{key:"blur",value:function(){this.states.delete(Ht.Focus)}},{key:"getValue",value:function(){var t=this.control.dotsValue;return 1===t.length?t[0]:t}},{key:"getIndex",value:function(){var t=this.control.dotsIndex;return 1===t.length?t[0]:t}},{key:"setValue",value:function(t){this.control.setValue(Array.isArray(t)?Tt(t):[t]),this.syncValueByPos()}},{key:"setIndex",value:function(t){var e=this,n=Array.isArray(t)?t.map((function(t){return e.control.getValueByIndex(t)})):this.control.getValueByIndex(t);this.setValue(n)}},{key:"setValueByPos",value:function(t){var e=this,n=this.control.getRecentDot(t);if(this.disabled||this.dots[n].disabled)return!1;this.focusDotIndex=n,this.control.setDotPos(t,n),this.syncValueByPos(),this.useKeyboard&&this.states.add(Ht.Focus),setTimeout((function(){e.included&&e.isNotSync?e.control.setValue(e.value):e.control.syncDotsPos()}))}},{key:"keydownHandle",value:function(t){var e=this;if(!this.useKeyboard||!this.states.has(Ht.Focus))return!1;var n=this.included&&this.marks,r=q(t,{direction:this.direction,max:n?this.control.markList.length-1:this.control.total,min:0,hook:this.keydownHook});if(r){t.preventDefault();var i=-1,o=0;n?(this.control.markList.some((function(t,n){return t.value===e.control.dotsValue[e.focusDotIndex]&&(i=r(n),!0)})),i<0?i=0:i>this.control.markList.length-1&&(i=this.control.markList.length-1),o=this.control.markList[i].pos):(i=r(this.control.getIndexByValue(this.control.dotsValue[this.focusDotIndex])),o=this.control.parseValue(this.control.getValueByIndex(i))),this.isCrossDot(o),this.control.setDotPos(o,this.focusDotIndex),this.syncValueByPos()}}},{key:"getPosByEvent",value:function(t){return H(t,this.$el,this.isReverse)[this.isHorizontal?"x":"y"]/this.scale}},{key:"renderSlot",value:function(t,e,n,r){var i=this.$createElement,o=this.$scopedSlots[t];return o?r?o(e):i("template",{slot:t},[o(e)]):n}},{key:"render",value:function(){var t=this,e=arguments[0];return e("div",s()([{ref:"container",class:this.containerClasses,style:this.containerStyles,on:{click:this.clickHandle,touchstart:this.dragStartOnProcess,mousedown:this.dragStartOnProcess}},this.$attrs]),[e("div",{class:"vue-slider-rail",style:this.railStyle},[this.processArray.map((function(n,r){return t.renderSlot("process",n,e("div",{class:"vue-slider-process",key:"process-".concat(r),style:n.style}),!0)})),this.sliderMarks?e("div",{class:"vue-slider-marks"},[this.control.markList.map((function(n,r){var i;return t.renderSlot("mark",n,e("vue-slider-mark",{key:"mark-".concat(r),attrs:{mark:n,hideLabel:t.hideLabel,stepStyle:t.stepStyle,stepActiveStyle:t.stepActiveStyle,labelStyle:t.labelStyle,labelActiveStyle:t.labelActiveStyle},style:(i={},At(i,t.isHorizontal?"height":"width","100%"),At(i,t.isHorizontal?"width":"height",t.tailSize),At(i,t.mainDirection,"".concat(n.pos,"%")),i),on:{pressLabel:function(e){return t.clickable&&t.setValueByPos(e)}}},[t.renderSlot("step",n,null),t.renderSlot("label",n,null)]),!0)}))]):null,this.dots.map((function(n,r){var i;return e("vue-slider-dot",{ref:"dot-".concat(r),key:"dot-".concat(r),attrs:kt({value:n.value,disabled:n.disabled,focus:n.focus,"dot-style":[n.style,n.disabled?n.disabledStyle:null,n.focus?n.focusStyle:null],tooltip:n.tooltip||t.tooltip,"tooltip-style":[t.tooltipStyle,n.tooltipStyle,n.disabled?n.tooltipDisabledStyle:null,n.focus?n.tooltipFocusStyle:null],"tooltip-formatter":Array.isArray(t.sliderTooltipFormatter)?t.sliderTooltipFormatter[r]:t.sliderTooltipFormatter,"tooltip-placement":t.tooltipDirections[r],role:"slider","aria-valuenow":n.value,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":t.isHorizontal?"horizontal":"vertical",tabindex:"0"},t.dotAttrs),style:[t.dotBaseStyle,(i={},At(i,t.mainDirection,"".concat(n.pos,"%")),At(i,"transition","".concat(t.mainDirection," ").concat(t.animateTime,"s")),i)],on:{"drag-start":function(){return t.dragStart(r)}},nativeOn:{focus:function(){return t.focus(n,r)},blur:function(){return t.blur()}}},[t.renderSlot("dot",n,null),t.renderSlot("tooltip",n,null)])})),this.renderSlot("default",{value:this.getValue()},null,!0)])])}},{key:"tailSize",get:function(){return W((this.isHorizontal?this.height:this.width)||qt)}},{key:"containerClasses",get:function(){return["vue-slider",["vue-slider-".concat(this.direction)],{"vue-slider-disabled":this.disabled}]}},{key:"containerStyles",get:function(){var t=Array.isArray(this.dotSize)?this.dotSize:[this.dotSize,this.dotSize],e=wt(t,2),n=e[0],r=e[1],i=this.width?W(this.width):this.isHorizontal?"auto":W(qt),o=this.height?W(this.height):this.isHorizontal?W(qt):"auto";return{padding:this.contained?"".concat(r/2,"px ").concat(n/2,"px"):this.isHorizontal?"".concat(r/2,"px 0"):"0 ".concat(n/2,"px"),width:i,height:o}}},{key:"processArray",get:function(){var t=this;return this.control.processArray.map((function(e,n){var r,i=wt(e,3),o=i[0],a=i[1],s=i[2];if(o>a){var u=[a,o];o=u[0],a=u[1]}var c=t.isHorizontal?"width":"height";return{start:o,end:a,index:n,style:kt(kt((r={},At(r,t.isHorizontal?"height":"width","100%"),At(r,t.isHorizontal?"top":"left",0),At(r,t.mainDirection,"".concat(o,"%")),At(r,c,"".concat(a-o,"%")),At(r,"transitionProperty","".concat(c,",").concat(t.mainDirection)),At(r,"transitionDuration","".concat(t.animateTime,"s")),r),t.processStyle),s)}}))}},{key:"dotBaseStyle",get:function(){var t,e=Array.isArray(this.dotSize)?this.dotSize:[this.dotSize,this.dotSize],n=wt(e,2),r=n[0],i=n[1];return t=this.isHorizontal?At({transform:"translate(".concat(this.isReverse?"50%":"-50%",", -50%)"),WebkitTransform:"translate(".concat(this.isReverse?"50%":"-50%",", -50%)"),top:"50%"},"ltr"===this.direction?"left":"right","0"):At({transform:"translate(-50%, ".concat(this.isReverse?"50%":"-50%",")"),WebkitTransform:"translate(-50%, ".concat(this.isReverse?"50%":"-50%",")"),left:"50%"},"btt"===this.direction?"bottom":"top","0"),kt({width:"".concat(r,"px"),height:"".concat(i,"px")},t)}},{key:"mainDirection",get:function(){switch(this.direction){case"ltr":return"left";case"rtl":return"right";case"btt":return"bottom";case"ttb":return"top"}}},{key:"isHorizontal",get:function(){return"ltr"===this.direction||"rtl"===this.direction}},{key:"isReverse",get:function(){return"rtl"===this.direction||"btt"===this.direction}},{key:"tooltipDirections",get:function(){var t=this.tooltipPlacement||(this.isHorizontal?"top":"left");return Array.isArray(t)?t:this.dots.map((function(){return t}))}},{key:"dots",get:function(){var t=this;return this.control.dotsPos.map((function(e,n){return kt({pos:e,index:n,value:t.control.dotsValue[n],focus:t.states.has(Ht.Focus)&&t.focusDotIndex===n,disabled:t.disabled,style:t.dotStyle},(Array.isArray(t.dotOptions)?t.dotOptions[n]:t.dotOptions)||{})}))}},{key:"animateTime",get:function(){return this.states.has(Ht.Drag)?0:this.duration}},{key:"canSort",get:function(){return this.order&&!this.minRange&&!this.maxRange&&!this.fixed&&this.enableCross}},{key:"sliderData",get:function(){var t=this;return this.isObjectArrayData(this.data)?this.data.map((function(e){return e[t.dataValue]})):this.isObjectData(this.data)?Object.keys(this.data):this.data}},{key:"sliderMarks",get:function(){var t=this;return this.marks?this.marks:this.isObjectArrayData(this.data)?function(e){var n={label:e};return t.data.some((function(r){return r[t.dataValue]===e&&(n.label=r[t.dataLabel],!0)})),n}:this.isObjectData(this.data)?this.data:void 0}},{key:"sliderTooltipFormatter",get:function(){var t=this;if(this.tooltipFormatter)return this.tooltipFormatter;if(this.isObjectArrayData(this.data))return function(e){var n=""+e;return t.data.some((function(r){return r[t.dataValue]===e&&(n=r[t.dataLabel],!0)})),n};if(this.isObjectData(this.data)){var e=this.data;return function(t){return e[t]}}}},{key:"isNotSync",get:function(){var t=this.control.dotsValue;return Array.isArray(this.value)?this.value.length!==t.length||this.value.some((function(e,n){return e!==t[n]})):this.value!==t[0]}},{key:"dragRange",get:function(){var t=this.dots[this.focusDotIndex-1],e=this.dots[this.focusDotIndex+1];return[t?t.pos:-1/0,e?e.pos:1/0]}}]),n}(l.a);return u([d("change",{default:0})],t.prototype,"value",void 0),u([p({type:Boolean,default:!1})],t.prototype,"silent",void 0),u([p({default:"ltr",validator:function(t){return["ltr","rtl","ttb","btt"].indexOf(t)>-1}})],t.prototype,"direction",void 0),u([p({type:[Number,String]})],t.prototype,"width",void 0),u([p({type:[Number,String]})],t.prototype,"height",void 0),u([p({default:14})],t.prototype,"dotSize",void 0),u([p({default:!1})],t.prototype,"contained",void 0),u([p({type:Number,default:0})],t.prototype,"min",void 0),u([p({type:Number,default:100})],t.prototype,"max",void 0),u([p({type:Number,default:1})],t.prototype,"interval",void 0),u([p({type:Boolean,default:!1})],t.prototype,"disabled",void 0),u([p({type:Boolean,default:!0})],t.prototype,"clickable",void 0),u([p({type:Boolean,default:!1})],t.prototype,"dragOnClick",void 0),u([p({type:Number,default:.5})],t.prototype,"duration",void 0),u([p({type:[Object,Array]})],t.prototype,"data",void 0),u([p({type:String,default:"value"})],t.prototype,"dataValue",void 0),u([p({type:String,default:"label"})],t.prototype,"dataLabel",void 0),u([p({type:Boolean,default:!1})],t.prototype,"lazy",void 0),u([p({type:String,validator:function(t){return["none","always","focus","hover","active"].indexOf(t)>-1},default:"active"})],t.prototype,"tooltip",void 0),u([p({type:[String,Array],validator:function(t){return(Array.isArray(t)?t:[t]).every((function(t){return["top","right","bottom","left"].indexOf(t)>-1}))}})],t.prototype,"tooltipPlacement",void 0),u([p({type:[String,Array,Function]})],t.prototype,"tooltipFormatter",void 0),u([p({type:Boolean,default:!0})],t.prototype,"useKeyboard",void 0),u([p(Function)],t.prototype,"keydownHook",void 0),u([p({type:Boolean,default:!0})],t.prototype,"enableCross",void 0),u([p({type:Boolean,default:!1})],t.prototype,"fixed",void 0),u([p({type:Boolean,default:!0})],t.prototype,"order",void 0),u([p(Number)],t.prototype,"minRange",void 0),u([p(Number)],t.prototype,"maxRange",void 0),u([p({type:[Boolean,Object,Array,Function],default:!1})],t.prototype,"marks",void 0),u([p({type:[Boolean,Function],default:!0})],t.prototype,"process",void 0),u([p(Boolean)],t.prototype,"included",void 0),u([p(Boolean)],t.prototype,"adsorb",void 0),u([p(Boolean)],t.prototype,"hideLabel",void 0),u([p()],t.prototype,"dotOptions",void 0),u([p()],t.prototype,"dotAttrs",void 0),u([p()],t.prototype,"railStyle",void 0),u([p()],t.prototype,"processStyle",void 0),u([p()],t.prototype,"dotStyle",void 0),u([p()],t.prototype,"tooltipStyle",void 0),u([p()],t.prototype,"stepStyle",void 0),u([p()],t.prototype,"stepActiveStyle",void 0),u([p()],t.prototype,"labelStyle",void 0),u([p()],t.prototype,"labelActiveStyle",void 0),u([g("value")],t.prototype,"onValueChanged",null),t=u([f()({data:function(){return{control:null}},components:{VueSliderDot:T,VueSliderMark:U}})],t),t}(),Xt=Gt;Xt.VueSliderMark=U,Xt.VueSliderDot=T;var Yt=Xt;e["default"]=Yt}})["default"]}))},"4a3f":function(t,e,n){var r=n("401b"),i=r.create,o=r.distSquare,a=Math.pow,s=Math.sqrt,u=1e-8,c=1e-4,l=s(3),h=1/3,f=i(),d=i(),p=i();function g(t){return t>-u&&t<u}function m(t){return t>u||t<-u}function v(t,e,n,r,i){var o=1-i;return o*o*(o*t+3*i*e)+i*i*(i*r+3*o*n)}function y(t,e,n,r,i){var o=1-i;return 3*(((e-t)*o+2*(n-e)*i)*o+(r-n)*i*i)}function b(t,e,n,r,i,o){var u=r+3*(e-n)-t,c=3*(n-2*e+t),f=3*(e-t),d=t-i,p=c*c-3*u*f,m=c*f-9*u*d,v=f*f-3*c*d,y=0;if(g(p)&&g(m))if(g(c))o[0]=0;else{var b=-f/c;b>=0&&b<=1&&(o[y++]=b)}else{var x=m*m-4*p*v;if(g(x)){var w=m/p,_=(b=-c/u+w,-w/2);b>=0&&b<=1&&(o[y++]=b),_>=0&&_<=1&&(o[y++]=_)}else if(x>0){var O=s(x),S=p*c+1.5*u*(-m+O),C=p*c+1.5*u*(-m-O);S=S<0?-a(-S,h):a(S,h),C=C<0?-a(-C,h):a(C,h);b=(-c-(S+C))/(3*u);b>=0&&b<=1&&(o[y++]=b)}else{var k=(2*p*c-3*u*m)/(2*s(p*p*p)),A=Math.acos(k)/3,T=s(p),E=Math.cos(A),j=(b=(-c-2*T*E)/(3*u),_=(-c+T*(E+l*Math.sin(A)))/(3*u),(-c+T*(E-l*Math.sin(A)))/(3*u));b>=0&&b<=1&&(o[y++]=b),_>=0&&_<=1&&(o[y++]=_),j>=0&&j<=1&&(o[y++]=j)}}return y}function x(t,e,n,r,i){var o=6*n-12*e+6*t,a=9*e+3*r-3*t-9*n,u=3*e-3*t,c=0;if(g(a)){if(m(o)){var l=-u/o;l>=0&&l<=1&&(i[c++]=l)}}else{var h=o*o-4*a*u;if(g(h))i[0]=-o/(2*a);else if(h>0){var f=s(h),d=(l=(-o+f)/(2*a),(-o-f)/(2*a));l>=0&&l<=1&&(i[c++]=l),d>=0&&d<=1&&(i[c++]=d)}}return c}function w(t,e,n,r,i,o){var a=(e-t)*i+t,s=(n-e)*i+e,u=(r-n)*i+n,c=(s-a)*i+a,l=(u-s)*i+s,h=(l-c)*i+c;o[0]=t,o[1]=a,o[2]=c,o[3]=h,o[4]=h,o[5]=l,o[6]=u,o[7]=r}function _(t,e,n,r,i,a,u,l,h,g,m){var y,b,x,w,_,O=.005,S=1/0;f[0]=h,f[1]=g;for(var C=0;C<1;C+=.05)d[0]=v(t,n,i,u,C),d[1]=v(e,r,a,l,C),w=o(f,d),w<S&&(y=C,S=w);S=1/0;for(var k=0;k<32;k++){if(O<c)break;b=y-O,x=y+O,d[0]=v(t,n,i,u,b),d[1]=v(e,r,a,l,b),w=o(d,f),b>=0&&w<S?(y=b,S=w):(p[0]=v(t,n,i,u,x),p[1]=v(e,r,a,l,x),_=o(p,f),x<=1&&_<S?(y=x,S=_):O*=.5)}return m&&(m[0]=v(t,n,i,u,y),m[1]=v(e,r,a,l,y)),s(S)}function O(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}function S(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}function C(t,e,n,r,i){var o=t-2*e+n,a=2*(e-t),u=t-r,c=0;if(g(o)){if(m(a)){var l=-u/a;l>=0&&l<=1&&(i[c++]=l)}}else{var h=a*a-4*o*u;if(g(h)){l=-a/(2*o);l>=0&&l<=1&&(i[c++]=l)}else if(h>0){var f=s(h),d=(l=(-a+f)/(2*o),(-a-f)/(2*o));l>=0&&l<=1&&(i[c++]=l),d>=0&&d<=1&&(i[c++]=d)}}return c}function k(t,e,n){var r=t+n-2*e;return 0===r?.5:(t-e)/r}function A(t,e,n,r,i){var o=(e-t)*r+t,a=(n-e)*r+e,s=(a-o)*r+o;i[0]=t,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=n}function T(t,e,n,r,i,a,u,l,h){var g,m=.005,v=1/0;f[0]=u,f[1]=l;for(var y=0;y<1;y+=.05){d[0]=O(t,n,i,y),d[1]=O(e,r,a,y);var b=o(f,d);b<v&&(g=y,v=b)}v=1/0;for(var x=0;x<32;x++){if(m<c)break;var w=g-m,_=g+m;d[0]=O(t,n,i,w),d[1]=O(e,r,a,w);b=o(d,f);if(w>=0&&b<v)g=w,v=b;else{p[0]=O(t,n,i,_),p[1]=O(e,r,a,_);var S=o(p,f);_<=1&&S<v?(g=_,v=S):m*=.5}}return h&&(h[0]=O(t,n,i,g),h[1]=O(e,r,a,g)),s(v)}e.cubicAt=v,e.cubicDerivativeAt=y,e.cubicRootAt=b,e.cubicExtrema=x,e.cubicSubdivide=w,e.cubicProjectPoint=_,e.quadraticAt=O,e.quadraticDerivativeAt=S,e.quadraticRootAt=C,e.quadraticExtremum=k,e.quadraticSubdivide=A,e.quadraticProjectPoint=T},"4aa2":function(t,e,n){var r=n("cbe5"),i=n("897a"),o=r.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:i(r.prototype.brush),buildPath:function(t,e){var n=e.cx,r=e.cy,i=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=e.startAngle,s=e.endAngle,u=e.clockwise,c=Math.cos(a),l=Math.sin(a);t.moveTo(c*i+n,l*i+r),t.lineTo(c*o+n,l*o+r),t.arc(n,r,o,a,s,!u),t.lineTo(Math.cos(s)*i+n,Math.sin(s)*i+r),0!==i&&t.arc(n,r,i,s,a,u),t.closePath()}});t.exports=o},"4b05":function(t,e,n){"use strict";(function(t){var e=n("b333");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r={importFetch:()=>n(4)};let i;class o{constructor(){this.util=n(5),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return null!=Object(e["c"])().global.fetch?Object(e["c"])().global.fetch(t,n):(null==i&&(i=r.importFetch()),i(t,n))}now(){const e=t.hrtime();return 1e3*e[0]+e[1]/1e6}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)}decode(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}}Object(e["c"])().get("IS_NODE")&&Object(e["c"])().setPlatform("node",new o)}).call(this,n("4362"))},"4c53":function(t,e,n){"use strict";var r=n("23e7"),i=n("857a"),o=n("af03");r({target:"String",proto:!0,forced:o("sub")},{sub:function(){return i(this,"sub","","")}})},"4ca4":function(t,e,n){const r=n("bbfd"),i=(t,e)=>new r(t,e).patch;t.exports=i},"4cfc":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("c388");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class i extends r["a"]{split(t){return new o(this,t)}}class o extends i{constructor(t,e){super(),this.upstream=t,this.impl=new a(t,e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class a extends r["b"]{constructor(t,e){super(),this.upstream=t,this.separator=e,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const t=await this.upstream.next();if(t.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const e=t.value.split(this.separator);e[0]=this.carryover+e[0];for(const n of e.slice(0,-1))this.outputQueue.push(n);return this.carryover=e[e.length-1],!0}}},"4d64":function(t,e,n){var r=n("fc6a"),i=n("50c4"),o=n("23cb"),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){while(c>l)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},"4d89":function(t,e,n){const r=n("8cb5");t.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n("b15c").SEMVER_SPEC_VERSION,SemVer:n("bbfd"),compareIdentifiers:n("2cdf").compareIdentifiers,rcompareIdentifiers:n("2cdf").rcompareIdentifiers,parse:n("a236"),valid:n("acef"),clean:n("d2ef"),inc:n("0159"),diff:n("6b78"),major:n("4e14"),minor:n("c2d5"),patch:n("4ca4"),prerelease:n("8970"),compare:n("3034"),rcompare:n("b805"),compareLoose:n("b00b"),compareBuild:n("1cc6"),sort:n("2a2e"),rsort:n("6fa7"),gt:n("bac4"),lt:n("38fa"),eq:n("4392"),neq:n("f195"),gte:n("a2a3"),lte:n("68d3"),cmp:n("c4be"),coerce:n("0a67"),Comparator:n("6d43"),Range:n("3fce"),satisfies:n("2a86"),toComparators:n("7d63"),maxSatisfying:n("13af"),minSatisfying:n("fd90"),minVersion:n("86d4"),validRange:n("0982"),outside:n("38cb"),gtr:n("8bd6"),ltr:n("9b6c"),intersects:n("5237"),simplifyRange:n("f67c"),subset:n("c628")}},"4df4":function(t,e,n){"use strict";var r=n("0366"),i=n("7b0b"),o=n("9bdd"),a=n("e95a"),s=n("50c4"),u=n("8418"),c=n("35a1");t.exports=function(t){var e,n,l,h,f,d,p=i(t),g="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:void 0,y=void 0!==v,b=c(p),x=0;if(y&&(v=r(v,m>2?arguments[2]:void 0,2)),void 0==b||g==Array&&a(b))for(e=s(p.length),n=new g(e);e>x;x++)d=y?v(p[x],x):p[x],u(n,x,d);else for(h=b.call(p),f=h.next,n=new g;!(l=f.call(h)).done;x++)d=y?o(h,v,[l.value,x],!0):l.value,u(n,x,d);return n.length=x,n}},"4e08":function(t,e,n){(function(t){var n;"undefined"!==typeof window?n=window.__DEV__:"undefined"!==typeof t&&(n=t.__DEV__),"undefined"===typeof n&&(n=!0);var r=n;e.__DEV__=r}).call(this,n("c8ba"))},"4e14":function(t,e,n){const r=n("bbfd"),i=(t,e)=>new r(t,e).major;t.exports=i},"4f85":function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("6d8b")),o=n("22d1"),a=n("eda2"),s=a.formatTime,u=a.encodeHTML,c=a.addCommas,l=a.getTooltipMarker,h=n("e0d3"),f=n("6cb7"),d=n("e47b"),p=n("38a2"),g=n("f934"),m=g.getLayoutParams,v=g.mergeLayoutParam,y=n("f47d"),b=y.createTask,x=n("0f99"),w=x.prepareSource,_=x.getSource,O=n("2b17"),S=O.retrieveRawValue,C=h.makeInner(),k=f.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(t,e,n,r){this.seriesIndex=this.componentIndex,this.dataTask=b({count:E,reset:j}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),w(this);var i=this.getInitialData(t,n);M(i,this),this.dataTask.context.data=i,C(this).dataBeforeProcessed=i,A(this)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,r=n?m(t):{},o=this.subType;f.hasClass(o)&&(o+="Series"),i.merge(t,e.getTheme().get(this.subType)),i.merge(t,this.getDefaultOption()),h.defaultEmphasis(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&v(t,r,n)},mergeOption:function(t,e){t=i.merge(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;n&&v(this.option,t,n),w(this);var r=this.getInitialData(t,e);M(r,this),this.dataTask.dirty(),this.dataTask.context.data=r,C(this).dataBeforeProcessed=r,A(this)},fillDataTextStyle:function(t){if(t&&!i.isTypedArray(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&h.defaultEmphasis(t[n],"label",e)},getInitialData:function(){},appendData:function(t){var e=this.getRawData();e.appendData(t.data)},getData:function(t){var e=I(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return C(this).data},setData:function(t){var e=I(this);if(e){var n=e.context;n.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),n.outputData=t,e!==this.dataTask&&(n.data=t)}C(this).data=t},getSource:function(){return _(this)},getRawData:function(){return C(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,n,r){var o=this;r=r||"html";var a="html"===r?"<br/>":"\n",f="richText"===r,d={},p=0;function g(n){var a=i.reduce(n,(function(t,e,n){var r=v.getDimensionInfo(n);return t|(r&&!1!==r.tooltip&&null!=r.displayName)}),0),h=[];function g(t,n){var i=v.getDimensionInfo(n);if(i&&!1!==i.otherDims.tooltip){var g=i.type,m="sub"+o.seriesIndex+"at"+p,y=l({color:_,type:"subItem",renderMode:r,markerId:m}),b="string"===typeof y?y:y.content,x=(a?b+u(i.displayName||"-")+": ":"")+u("ordinal"===g?t+"":"time"===g?e?"":s("yyyy/MM/dd hh:mm:ss",t):c(t));x&&h.push(x),f&&(d[m]=_,++p)}}y.length?i.each(y,(function(e){g(S(v,t,e),e)})):i.each(n,g);var m=a?f?"\n":"<br/>":"",b=m+h.join(m||", ");return{renderMode:r,content:b,style:d}}function m(t){return{renderMode:r,content:u(c(t)),style:d}}var v=this.getData(),y=v.mapDimension("defaultedTooltip",!0),b=y.length,x=this.getRawValue(t),w=i.isArray(x),_=v.getItemVisual(t,"color");i.isObject(_)&&_.colorStops&&(_=(_.colorStops[0]||{}).color),_=_||"transparent";var O=b>1||w&&!b?g(x):m(b?S(v,t,y[0]):w?x[0]:x),C=O.content,k=o.seriesIndex+"at"+p,A=l({color:_,type:"item",renderMode:r,markerId:k});d[k]=_,++p;var T=v.getName(t),E=this.name;h.isNameSpecified(this)||(E=""),E=E?u(E)+(e?": ":a):"";var j="string"===typeof A?A:A.content,D=e?j+E+C:E+j+(T?u(T)+": "+C:C);return{html:D,markers:d}},isAnimationEnabled:function(){if(o.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,n){var r=this.ecModel,i=d.getColorFromPalette.call(this,t,e,n);return i||(i=r.getColorFromPalette(t,e,n)),i},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function A(t){var e=t.name;h.isNameSpecified(t)||(t.name=T(t)||e)}function T(t){var e=t.getRawData(),n=e.mapDimension("seriesName",!0),r=[];return i.each(n,(function(t){var n=e.getDimensionInfo(t);n.displayName&&r.push(n.displayName)})),r.join(" ")}function E(t){return t.model.getRawData().count()}function j(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),D}function D(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function M(t,e){i.each(t.CHANGABLE_METHODS,(function(n){t.wrapMethod(n,i.curry(N,e))}))}function N(t){var e=I(t);e&&e.setOutputEnd(this.count())}function I(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var r=n.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(t.uid))}return r}}i.mixin(k,p),i.mixin(k,d);var R=k;t.exports=R},"4fac":function(t,e,n){var r=n("620b"),i=n("9c2c");function o(t,e,n){var o=e.points,a=e.smooth;if(o&&o.length>=2){if(a&&"spline"!==a){var s=i(o,a,n,e.smoothConstraint);t.moveTo(o[0][0],o[0][1]);for(var u=o.length,c=0;c<(n?u:u-1);c++){var l=s[2*c],h=s[2*c+1],f=o[(c+1)%u];t.bezierCurveTo(l[0],l[1],h[0],h[1],f[0],f[1])}}else{"spline"===a&&(o=r(o,n)),t.moveTo(o[0][0],o[0][1]);c=1;for(var d=o.length;c<d;c++)t.lineTo(o[c][0],o[c][1])}n&&t.closePath()}}e.buildPath=o},"4fad":function(t,e,n){var r=n("23e7"),i=n("6f53").entries;r({target:"Object",stat:!0},{entries:function(t){return i(t)}})},"50c4":function(t,e,n){var r=n("a691"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},5135:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},5237:function(t,e,n){const r=n("3fce"),i=(t,e,n)=>(t=new r(t,n),e=new r(e,n),t.intersects(e));t.exports=i},"526c":function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"g",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return h}));var r=n("fa11");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e,n,i){const a=e.inputParams[t];if(a&&void 0!==a.inputIndexStart){const t=a.inputIndexStart,s=0===a.inputIndexEnd?void 0:void 0===a.inputIndexEnd?t+1:a.inputIndexEnd;if("tensor"===a.type)return o(e.inputNames[a.inputIndexStart],n,i);if("tensors"===a.type){const r=e.inputNames.slice(t,s);return r.map(t=>o(t,n,i))}const u=o(e.inputNames.slice(t)[0],n,i),c=u.dataSync();return"number"===a.type?c[0]:r["bi"].toNestedArray(u.shape,c)}const s=e.attrParams[t];return s&&s.value}function o(t,e,n){const[r,i]=c(t),o=n.currentContextIds.find(t=>!!e[u(r,t)]);return void 0!==o?e[u(r,o)][i]:void 0}function a(t,e,n){return e[u(t,n.currentContextId)]}function s(t,e){const[n,r]=c(t);return[u(n,e&&e.currentContextId),r]}function u(t,e){return e?`${t}-${e}`:t}function c(t){const e=t.split(":");if(1===e.length)return[t,0];const n=e[0];return[n,Number(e[e.length-1])]}function l(t,e,n){let r=i("pad",t,e,n);if("explicit"===r){r=i("explicitPaddings",t,e,n);const o=[[0,0],[0,0],[0,0],[0,0]];for(let t=0;t<4;t++)o[t][0]=r[2*t],o[t][1]=r[2*t+1];return o}return r}function h(t){return t.kept?t:r["Pd"](t)}},"53ca":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},"54ef":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("6ae2");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t){const e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");let n=e[0];const i=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));const o=(...t)=>{r["a"].startScope(n);try{const e=i(...t);return e instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r["a"].endScope(e),e}catch(e){throw r["a"].endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}},"551f":function(t,e,n){var r=n("282b"),i=r([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),o={getItemStyle:function(t,e){var n=i(this,t,e),r=this.getBorderLineDash();return r&&(n.lineDash=r),n},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}};t.exports=o},5629:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("ad68"),i=n("aa6f"),o=n("01de"),a=n("8e47");function s(t,e,n={}){if(e&&null==e.headers)throw new Error('Data to render must have a "headers" property');if(e&&null==e.values)throw new Error('Data to render must have a "values" property');const s=a.getDrawArea(t),c=Object.assign({},u,n);let l=i.select(s).select("table.tf-table");const h=o.css({fontSize:c.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(0===l.size()&&(l=i.select(s).append("table"),l.attr("class",` ${h} tf-table`),l.append("thead").append("tr"),l.append("tbody")),1!==l.size())throw new Error("Error inserting table");const f=o.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),d=l.select("thead").select("tr").selectAll("th").data(e.headers),p=d.enter().append("th").attr("class",""+f);d.merge(p).html(t=>t),d.exit().remove();const g=r.format(",.4~f"),m=l.select("tbody").selectAll("tr").data(e.values),v=m.enter().append("tr"),y=o.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),b=m.merge(v).selectAll("td").data(t=>t),x=b.enter().append("td").attr("class",""+y);b.merge(x).html(t=>"number"===typeof t?g(t):t),b.exit().remove(),m.exit().remove()}e.table=s;const u={fontSize:14}},"562e":function(t,e,n){var r=n("6d8b");function i(t){null!=t&&r.extend(this,t),this.otherDims={}}var o=i;t.exports=o},5692:function(t,e,n){var r=n("c430"),i=n("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},5693:function(t,e){function n(t,e){var n,r,i,o,a,s=e.x,u=e.y,c=e.width,l=e.height,h=e.r;c<0&&(s+=c,c=-c),l<0&&(u+=l,l=-l),"number"===typeof h?n=r=i=o=h:h instanceof Array?1===h.length?n=r=i=o=h[0]:2===h.length?(n=i=h[0],r=o=h[1]):3===h.length?(n=h[0],r=o=h[1],i=h[2]):(n=h[0],r=h[1],i=h[2],o=h[3]):n=r=i=o=0,n+r>c&&(a=n+r,n*=c/a,r*=c/a),i+o>c&&(a=i+o,i*=c/a,o*=c/a),r+i>l&&(a=r+i,r*=l/a,i*=l/a),n+o>l&&(a=n+o,n*=l/a,o*=l/a),t.moveTo(s+n,u),t.lineTo(s+c-r,u),0!==r&&t.arc(s+c-r,u+r,r,-Math.PI/2,0),t.lineTo(s+c,u+l-i),0!==i&&t.arc(s+c-i,u+l-i,i,0,Math.PI/2),t.lineTo(s+o,u+l),0!==o&&t.arc(s+o,u+l-o,o,Math.PI/2,Math.PI),t.lineTo(s,u+n),0!==n&&t.arc(s+n,u+n,n,Math.PI,1.5*Math.PI)}e.buildPath=n},5698:function(t,e,n){"use strict";n.d(e,"a",(function(){return Qt}));var r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},i=function(t){return 1===t.length&&(t=o(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function o(t){return function(e,n){return r(t(e),n)}}var a=i(r);a.right,a.left;var s=Array.prototype;s.slice,s.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);Array.prototype.slice;var u=n("df45");function c(){}var l=function(t){return null==t?c:function(){return this.querySelector(t)}},h=function(t){"function"!==typeof t&&(t=l(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),h=0;h<u;++h)(o=s[h])&&(a=t.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new Kt(r,this._parents)};function f(){return[]}var d=function(t){return null==t?f:function(){return this.querySelectorAll(t)}},p=function(t){"function"!==typeof t&&(t=d(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new Kt(r,i)},g=function(t){return function(){return this.matches(t)}},m=function(t){"function"!==typeof t&&(t=g(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Kt(r,this._parents)},v=function(t){return new Array(t.length)},y=function(){return new Kt(this._enter||this._groups.map(v),this._parents)};function b(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}b.prototype={constructor:b,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var x=function(t){return function(){return t}},w="$";function _(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new b(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function O(t,e,n,r,i,o,a){var s,u,c,l={},h=e.length,f=o.length,d=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(d[s]=c=w+a.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<f;++s)c=w+a.call(t,o[s],s,o),(u=l[c])?(r[s]=u,u.__data__=o[s],l[c]=null):n[s]=new b(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&l[d[s]]===u&&(i[s]=u)}var S=function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each((function(t){d[++c]=t})),d;var n=e?O:_,r=this._parents,i=this._groups;"function"!==typeof t&&(t=x(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,d=t.call(l,l&&l.__data__,c,r),p=d.length,g=s[c]=new Array(p),m=a[c]=new Array(p),v=u[c]=new Array(f);n(l,h,g,m,v,d,e);for(var y,b,w=0,S=0;w<p;++w)if(y=g[w]){w>=S&&(S=w+1);while(!(b=m[S])&&++S<p);y._next=b||null}}return a=new Kt(a,r),a._enter=s,a._exit=u,a},C=function(){return new Kt(this._exit||this._groups.map(v),this._parents)},k=function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"===typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},A=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||l[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new Kt(a,this._parents)},T=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},E=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=j);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new Kt(i,this._parents).order()};function j(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var D=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},M=function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},N=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},I=function(){var t=0;return this.each((function(){++t})),t},R=function(){return!this.node()},F=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},P="http://www.w3.org/1999/xhtml",$={svg:"http://www.w3.org/2000/svg",xhtml:P,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},L=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),$.hasOwnProperty(e)?{space:$[e],local:t}:t};function z(t){return function(){this.removeAttribute(t)}}function B(t){return function(){this.removeAttributeNS(t.space,t.local)}}function U(t,e){return function(){this.setAttribute(t,e)}}function W(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function V(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function H(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var q=function(t,e){var n=L(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?B:z:"function"===typeof e?n.local?H:V:n.local?W:U)(n,e))},G=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function X(t){return function(){this.style.removeProperty(t)}}function Y(t,e,n){return function(){this.style.setProperty(t,e,n)}}function K(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}var Z=function(t,e,n){return arguments.length>1?this.each((null==e?X:"function"===typeof e?K:Y)(t,e,null==n?"":n)):J(this.node(),t)};function J(t,e){return t.style.getPropertyValue(e)||G(t).getComputedStyle(t,null).getPropertyValue(e)}function Q(t){return function(){delete this[t]}}function tt(t,e){return function(){this[t]=e}}function et(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}var nt=function(t,e){return arguments.length>1?this.each((null==e?Q:"function"===typeof e?et:tt)(t,e)):this.node()[t]};function rt(t){return t.trim().split(/^|\s+/)}function it(t){return t.classList||new ot(t)}function ot(t){this._node=t,this._names=rt(t.getAttribute("class")||"")}function at(t,e){var n=it(t),r=-1,i=e.length;while(++r<i)n.add(e[r])}function st(t,e){var n=it(t),r=-1,i=e.length;while(++r<i)n.remove(e[r])}function ut(t){return function(){at(this,t)}}function ct(t){return function(){st(this,t)}}function lt(t,e){return function(){(e.apply(this,arguments)?at:st)(this,t)}}ot.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ht=function(t,e){var n=rt(t+"");if(arguments.length<2){var r=it(this.node()),i=-1,o=n.length;while(++i<o)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?lt:e?ut:ct)(n,e))};function ft(){this.textContent=""}function dt(t){return function(){this.textContent=t}}function pt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}var gt=function(t){return arguments.length?this.each(null==t?ft:("function"===typeof t?pt:dt)(t)):this.node().textContent};function mt(){this.innerHTML=""}function vt(t){return function(){this.innerHTML=t}}function yt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}var bt=function(t){return arguments.length?this.each(null==t?mt:("function"===typeof t?yt:vt)(t)):this.node().innerHTML};function xt(){this.nextSibling&&this.parentNode.appendChild(this)}var wt=function(){return this.each(xt)};function _t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}var Ot=function(){return this.each(_t)};function St(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===P&&e.documentElement.namespaceURI===P?e.createElement(t):e.createElementNS(n,t)}}function Ct(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var kt=function(t){var e=L(t);return(e.local?Ct:St)(e)},At=function(t){var e="function"===typeof t?t:kt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))};function Tt(){return null}var Et=function(t,e){var n="function"===typeof t?t:kt(t),r=null==e?Tt:"function"===typeof e?e:l(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))};function jt(){var t=this.parentNode;t&&t.removeChild(this)}var Dt=function(){return this.each(jt)};function Mt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Nt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var It=function(t){return this.select(t?Nt:Mt)},Rt=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Ft={},Pt=null;if("undefined"!==typeof document){var $t=document.documentElement;"onmouseenter"in $t||(Ft={mouseenter:"mouseover",mouseleave:"mouseout"})}function Lt(t,e,n){return t=zt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function zt(t,e,n){return function(r){var i=Pt;Pt=r;try{t.call(this,this.__data__,e,n)}finally{Pt=i}}}function Bt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Ut(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function Wt(t,e,n){var r=Ft.hasOwnProperty(t.type)?Lt:zt;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var l=0,h=u.length;l<h;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}var Vt=function(t,e,n){var r,i,o=Bt(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Wt:Ut,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value};function Ht(t,e,n){var r=G(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function qt(t,e){return function(){return Ht(this,t,e)}}function Gt(t,e){return function(){return Ht(this,t,e.apply(this,arguments))}}var Xt=function(t,e){return this.each(("function"===typeof e?Gt:qt)(t,e))},Yt=[null];function Kt(t,e){this._groups=t,this._parents=e}function Zt(){return new Kt([[document.documentElement]],Yt)}Kt.prototype=Zt.prototype={constructor:Kt,select:h,selectAll:p,filter:m,data:S,enter:y,exit:C,join:k,merge:A,order:T,sort:E,call:D,nodes:M,node:N,size:I,empty:R,each:F,attr:q,style:Z,property:nt,classed:ht,text:gt,html:bt,raise:wt,lower:Ot,append:At,insert:Et,remove:Dt,clone:It,datum:Rt,on:Vt,dispatch:Xt};var Jt=Zt,Qt=function(t){return"string"===typeof t?new Kt([[document.querySelector(t)]],[document.documentElement]):new Kt([[t]],Yt)};var te=n("482f");function ee(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}var ne=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return ee((n-r/e)*e,a,i,o,s)}},re=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return ee((n-r/e)*e,i,o,a,s)}},ie=function(t){return function(){return t}};function oe(t,e){return function(n){return t+n*e}}function ae(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function se(t){return 1===(t=+t)?ue:function(e,n){return n-e?ae(e,n,t):ie(isNaN(e)?n:e)}}function ue(t,e){var n=e-t;return n?oe(t,n):ie(isNaN(t)?e:t)}var ce=function t(e){var n=se(e);function r(t,e){var r=n((t=Object(te["f"])(t)).r,(e=Object(te["f"])(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=ue(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function le(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Object(te["f"])(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}le(ne),le(re);var he=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,de=new RegExp(fe.source,"g");function pe(t){return function(){return t}}function ge(t){return function(e){return t(e)+""}}var me=function(t,e){var n,r,i,o=fe.lastIndex=de.lastIndex=0,a=-1,s=[],u=[];t+="",e+="";while((n=fe.exec(t))&&(r=de.exec(e)))(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:he(n,r)})),o=de.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?ge(u[0].x):pe(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},ve=n("b5ae"),ye=Object(u["a"])("start","end","cancel","interrupt"),be=[],xe=0,we=1,_e=2,Oe=3,Se=4,Ce=5,ke=6,Ae=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};De(t,n,{name:e,index:r,group:i,on:ye,tween:be,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:xe})};function Te(t,e){var n=je(t,e);if(n.state>xe)throw new Error("too late; already scheduled");return n}function Ee(t,e){var n=je(t,e);if(n.state>Oe)throw new Error("too late; already running");return n}function je(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function De(t,e,n){var r,i=t.__transition;function o(t){n.state=we,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var c,l,h,f;if(n.state!==we)return u();for(c in i)if(f=i[c],f.name===n.name){if(f.state===Oe)return Object(ve["b"])(a);f.state===Se?(f.state=ke,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=ke,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(Object(ve["b"])((function(){n.state===Oe&&(n.state=Se,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=_e,n.on.call("start",t,t.__data__,n.index,n.group),n.state===_e){for(n.state=Oe,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function s(e){var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=Ce,1),o=-1,a=r.length;while(++o<a)r[o].call(t,i);n.state===Ce&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=ke,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Object(ve["c"])(o,0,n.time)}var Me,Ne,Ie,Re,Fe=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>_e&&n.state<Ce,n.state=ke,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},Pe=function(t){return this.each((function(){Fe(this,t)}))},$e=180/Math.PI,Le={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ze=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*$e,skewX:Math.atan(u)*$e,scaleX:a,scaleY:s}};function Be(t){return"none"===t?Le:(Me||(Me=document.createElement("DIV"),Ne=document.documentElement,Ie=document.defaultView),Me.style.transform=t,t=Ie.getComputedStyle(Ne.appendChild(Me),null).getPropertyValue("transform"),Ne.removeChild(Me),t=t.slice(7,-1).split(","),ze(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function Ue(t){return null==t?Le:(Re||(Re=document.createElementNS("http://www.w3.org/2000/svg","g")),Re.setAttribute("transform",t),(t=Re.transform.baseVal.consolidate())?(t=t.matrix,ze(t.a,t.b,t.c,t.d,t.e,t.f)):Le)}function We(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:he(t,i)},{i:u-2,x:he(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:he(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:he(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:he(t,n)},{i:s-2,x:he(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){var e,n=-1,o=i.length;while(++n<o)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var Ve=We(Be,"px, ","px)","deg)"),He=We(Ue,", ",")",")");function qe(t,e){var n,r;return function(){var i=Ee(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Ge(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=Ee(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}var Xe=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=je(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?qe:Ge)(n,t,e))};function Ye(t,e,n){var r=t._id;return t.each((function(){var t=Ee(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return je(t,r).value[e]}}var Ke=function(t,e){var n;return("number"===typeof e?he:e instanceof te["a"]?ce:(n=Object(te["a"])(e))?(e=n,ce):me)(t,e)};function Ze(t){return function(){this.removeAttribute(t)}}function Je(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qe(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function tn(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function en(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return a=this.getAttribute(t),s=u+"",a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function nn(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return a=this.getAttributeNS(t.space,t.local),s=u+"",a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}var rn=function(t,e){var n=L(t),r="transform"===n?He:Ke;return this.attrTween(t,"function"===typeof e?(n.local?nn:en)(n,r,Ye(this,"attr."+t,e)):null==e?(n.local?Je:Ze)(n):(n.local?tn:Qe)(n,r,e))};function on(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function an(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function sn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&an(t,i)),n}return i._value=e,i}function un(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&on(t,i)),n}return i._value=e,i}var cn=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=L(t);return this.tween(n,(r.local?sn:un)(r,e))};function ln(t,e){return function(){Te(this,t).delay=+e.apply(this,arguments)}}function hn(t,e){return e=+e,function(){Te(this,t).delay=e}}var fn=function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?ln:hn)(e,t)):je(this.node(),e).delay};function dn(t,e){return function(){Ee(this,t).duration=+e.apply(this,arguments)}}function pn(t,e){return e=+e,function(){Ee(this,t).duration=e}}var gn=function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?dn:pn)(e,t)):je(this.node(),e).duration};function mn(t,e){if("function"!==typeof e)throw new Error;return function(){Ee(this,t).ease=e}}var vn=function(t){var e=this._id;return arguments.length?this.each(mn(e,t)):je(this.node(),e).ease},yn=function(t){"function"!==typeof t&&(t=g(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Gn(r,this._parents,this._name,this._id)},bn=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||l[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new Gn(a,this._parents,this._name,this._id)};function xn(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}function wn(t,e,n){var r,i,o=xn(e)?Te:Ee;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}var _n=function(t,e){var n=this._id;return arguments.length<2?je(this.node(),n).on.on(t):this.each(wn(n,t,e))};function On(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}var Sn=function(){return this.on("end.remove",On(this._id))},Cn=function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=l(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],h=c.length,f=o[a]=new Array(h),d=0;d<h;++d)(s=c[d])&&(u=t.call(s,s.__data__,d,c))&&("__data__"in s&&(u.__data__=s.__data__),f[d]=u,Ae(f[d],e,n,d,f,je(s,n)));return new Gn(o,this._parents,e,n)},kn=function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=d(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var f,p=t.call(u,u.__data__,h,c),g=je(u,n),m=0,v=p.length;m<v;++m)(f=p[m])&&Ae(f,e,n,m,p,g);o.push(p),a.push(u)}return new Gn(o,a,e,n)},An=Jt.prototype.constructor,Tn=function(){return new An(this._groups,this._parents)};function En(t,e){var n,r,i;return function(){var o=J(this,t),a=(this.style.removeProperty(t),J(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function jn(t){return function(){this.style.removeProperty(t)}}function Dn(t,e,n){var r,i,o=n+"";return function(){var a=J(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}function Mn(t,e,n){var r,i,o;return function(){var a=J(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=J(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}function Nn(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=Ee(this,t),c=u.on,l=null==u.value[a]?o||(o=jn(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(s,i=l),u.on=r}}var In=function(t,e,n){var r="transform"===(t+="")?Ve:Ke;return null==e?this.styleTween(t,En(t,r)).on("end.style."+t,jn(t)):"function"===typeof e?this.styleTween(t,Mn(t,r,Ye(this,"style."+t,e))).each(Nn(this._id,t)):this.styleTween(t,Dn(t,r,e),n).on("end.style."+t,null)};function Rn(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Fn(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Rn(t,o,n)),r}return o._value=e,o}var Pn=function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,Fn(t,e,null==n?"":n))};function $n(t){return function(){this.textContent=t}}function Ln(t){return function(){var e=t(this);this.textContent=null==e?"":e}}var zn=function(t){return this.tween("text","function"===typeof t?Ln(Ye(this,"text",t)):$n(null==t?"":t+""))};function Bn(t){return function(e){this.textContent=t.call(this,e)}}function Un(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Bn(r)),e}return r._value=t,r}var Wn=function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!==typeof t)throw new Error;return this.tween(e,Un(t))},Vn=function(){for(var t=this._name,e=this._id,n=Yn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var l=je(a,e);Ae(a,t,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Gn(r,this._parents,t,n)},Hn=function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0===--i&&o()}};n.each((function(){var n=Ee(this,r),i=n.on;i!==t&&(e=(t=i).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e}))}))},qn=0;function Gn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Xn(t){return Jt().transition(t)}function Yn(){return++qn}var Kn=Jt.prototype;function Zn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Gn.prototype=Xn.prototype={constructor:Gn,select:Cn,selectAll:kn,filter:yn,merge:bn,selection:Tn,transition:Vn,call:Kn.call,nodes:Kn.nodes,node:Kn.node,size:Kn.size,empty:Kn.empty,each:Kn.each,on:_n,attr:rn,attrTween:cn,style:In,styleTween:Pn,text:zn,textTween:Wn,remove:Sn,tween:Xe,delay:fn,duration:gn,ease:vn,end:Hn};var Jn={time:null,delay:0,duration:250,ease:Zn};function Qn(t,e){var n;while(!(n=t.__transition)||!(n=n[e]))if(!(t=t.parentNode))return Jn.time=Object(ve["a"])(),Jn;return n}var tr=function(t){var e,n;t instanceof Gn?(e=t._id,t=t._name):(e=Yn(),(n=Jn).time=Object(ve["a"])(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&Ae(a,t,e,c,s,n||Qn(a,e));return new Gn(r,this._parents,t,e)};Jt.prototype.interrupt=Pe,Jt.prototype.transition=tr;function er(t){return[+t[0],+t[1]]}function nr(t){return[er(t[0]),er(t[1])]}["w","e"].map(rr),["n","s"].map(rr),["n","w","e","s","nw","ne","sw","se"].map(rr);function rr(t){return{type:t}}var ir=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},or=function(t){return 1===t.length&&(t=ar(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function ar(t){return function(e,n){return ir(t(e),n)}}var sr=or(ir);sr.right,sr.left;var ur=Array.prototype;ur.slice,ur.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice;var cr=Math.PI,lr=2*cr,hr=1e-6,fr=lr-hr;function dr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function pr(){return new dr}dr.prototype=pr.prototype={constructor:dr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>hr)if(Math.abs(l*s-u*c)>hr&&i){var f=n-o,d=r-a,p=s*s+u*u,g=f*f+d*d,m=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((cr-Math.acos((p+h-g)/(2*m*v)))/2),b=y/v,x=y/m;Math.abs(b-1)>hr&&(this._+="L"+(t+b*c)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*d)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,n=+n,o=!!o;var a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>hr||Math.abs(this._y1-c)>hr)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%lr+lr),h>fr?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>hr&&(this._+="A"+n+","+n+",0,"+ +(h>=cr)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var gr="$";function mr(){}function vr(t,e){var n=new mr;if(t instanceof mr)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)while(++i<o)n.set(i,t[i]);else while(++i<o)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}mr.prototype=vr.prototype={constructor:mr,has:function(t){return gr+t in this},get:function(t){return this[gr+t]},set:function(t,e){return this[gr+t]=e,this},remove:function(t){var e=gr+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===gr&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===gr&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===gr&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===gr&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===gr&&++t;return t},empty:function(){for(var t in this)if(t[0]===gr)return!1;return!0},each:function(t){for(var e in this)e[0]===gr&&t(this[e],e.slice(1),this)}};var yr=vr;function br(){}var xr=yr.prototype;function wr(t,e){var n=new br;if(t instanceof br)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)while(++r<i)n.add(t[r]);else while(++r<i)n.add(e(t[r],r,t))}return n}br.prototype=wr.prototype={constructor:br,has:xr.has,add:function(t){return t+="",this[gr+t]=t,this},remove:xr.remove,clear:xr.clear,values:xr.keys,size:xr.size,empty:xr.empty,each:xr.each};var _r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Or=function(t){return 1===t.length&&(t=Sr(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function Sr(t){return function(e,n){return _r(t(e),n)}}var Cr=Or(_r);Cr.right,Cr.left;var kr=Array.prototype;kr.slice,kr.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Ar=Array.prototype;Ar.slice;n("80ef");Math.PI,Math.sqrt(5),n("ad68");var Tr=function(){return Math.random()},Er=(function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Tr),function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Tr)),jr=(function t(e){function n(){var t=Er.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Tr),function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(Tr)),Dr=(function t(e){function n(t){var n=jr.source(e)(t);return function(){return n()/t}}return n.source=t,n}(Tr),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Tr),function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}),Mr=function(t){return 1===t.length&&(t=Nr(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function Nr(t){return function(e,n){return Dr(t(e),n)}}var Ir=Mr(Dr);Ir.right,Ir.left;var Rr=Array.prototype;Rr.slice,Rr.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Fr=Array.prototype;Fr.map,Fr.slice;n("b607"),n("70e1");function Pr(){this._=null}function $r(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Lr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function zr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Br(t){while(t.L)t=t.L;return t}Pr.prototype={constructor:Pr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){t=t.R;while(t.L)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Br(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);e.L=e.R=null,e.U=n,e.C=!0,t=e;while(n&&n.C)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Lr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,zr(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(zr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,Lr(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Br(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,Lr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,zr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Lr(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,zr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Lr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,zr(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Ur=Pr;function Wr(t,e,n,r){var i=[null,null],o=vi.push(i)-1;return i.left=t,i.right=e,n&&Hr(i,t,e,n),r&&Hr(i,e,t,r),gi[t.index].halfedges.push(o),gi[e.index].halfedges.push(o),i}function Vr(t,e,n){var r=[e,n];return r.left=t,r}function Hr(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function qr(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=s[0],h=s[1],f=0,d=1,p=l-u,g=h-c;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>f&&(f=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<d&&(d=o)}if(o=n-c,g||!(o>0)){if(o/=g,g<0){if(o<f)return;o<d&&(d=o)}else if(g>0){if(o>d)return;o>f&&(f=o)}if(o=i-c,g||!(o<0)){if(o/=g,g<0){if(o>d)return;o>f&&(f=o)}else if(g>0){if(o<f)return;o<d&&(d=o)}return!(f>0||d<1)||(f>0&&(t[0]=[u+f*p,c+f*g]),d<1&&(t[1]=[u+d*p,c+d*g]),!0)}}}}}function Gr(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],d=l[0],p=l[1],g=(h+d)/2,m=(f+p)/2;if(p===f){if(g<e||g>=r)return;if(h>d){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(a=(h-d)/(p-f),s=m-a*g,a<-1||a>1)if(h>d){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<p){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Xr(t,e,n,r){var i,o=vi.length;while(o--)Gr(i=vi[o],t,e,n,r)&&qr(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>yi||Math.abs(i[0][1]-i[1][1])>yi)||delete vi[o]}function Yr(t){return gi[t.index]={site:t,halfedges:[]}}function Kr(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Zr(t,e){return e[+(e.left!==t.site)]}function Jr(t,e){return e[+(e.left===t.site)]}function Qr(){for(var t,e,n,r,i=0,o=gi.length;i<o;++i)if((t=gi[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Kr(t,vi[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}function ti(t,e,n,r){var i,o,a,s,u,c,l,h,f,d,p,g,m=gi.length,v=!0;for(i=0;i<m;++i)if(o=gi[i]){a=o.site,u=o.halfedges,s=u.length;while(s--)vi[u[s]]||u.splice(s,1);s=0,c=u.length;while(s<c)d=Jr(o,vi[u[s]]),p=d[0],g=d[1],l=Zr(o,vi[u[++s%c]]),h=l[0],f=l[1],(Math.abs(p-h)>yi||Math.abs(g-f)>yi)&&(u.splice(s,0,vi.push(Vr(a,d,Math.abs(p-t)<yi&&r-g>yi?[t,Math.abs(h-t)<yi?f:r]:Math.abs(g-r)<yi&&n-p>yi?[Math.abs(f-r)<yi?h:n,r]:Math.abs(p-n)<yi&&g-e>yi?[n,Math.abs(h-n)<yi?f:e]:Math.abs(g-e)<yi&&p-t>yi?[Math.abs(f-e)<yi?h:t,e]:null))-1),++c);c&&(v=!1)}if(v){var y,b,x,w=1/0;for(i=0,v=null;i<m;++i)(o=gi[i])&&(a=o.site,y=a[0]-t,b=a[1]-e,x=y*y+b*b,x<w&&(w=x,v=o));if(v){var _=[t,e],O=[t,r],S=[n,r],C=[n,e];v.halfedges.push(vi.push(Vr(a=v.site,_,O))-1,vi.push(Vr(a,O,S))-1,vi.push(Vr(a,S,C))-1,vi.push(Vr(a,C,_))-1)}}for(i=0;i<m;++i)(o=gi[i])&&(o.halfedges.length||delete gi[i])}var ei,ni=[];function ri(){$r(this),this.x=this.y=this.arc=this.site=this.cy=null}function ii(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,h=o[1]-s,f=2*(u*h-c*l);if(!(f>=-bi)){var d=u*u+c*c,p=l*l+h*h,g=(h*d-c*p)/f,m=(u*p-l*d)/f,v=ni.pop()||new ri;v.arc=t,v.site=i,v.x=g+a,v.y=(v.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=v;var y=null,b=mi._;while(b)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}mi.insert(y,v),y||(ei=v)}}}}function oi(t){var e=t.circle;e&&(e.P||(ei=e.N),mi.remove(e),ni.push(e),$r(e),t.circle=null)}var ai=[];function si(){$r(this),this.edge=this.site=this.circle=null}function ui(t){var e=ai.pop()||new si;return e.site=t,e}function ci(t){oi(t),pi.remove(t),ai.push(t),$r(t)}function li(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];ci(t);var u=o;while(u.circle&&Math.abs(n-u.circle.x)<yi&&Math.abs(r-u.circle.cy)<yi)o=u.P,s.unshift(u),ci(u),u=o;s.unshift(u),oi(u);var c=a;while(c.circle&&Math.abs(n-c.circle.x)<yi&&Math.abs(r-c.circle.cy)<yi)a=c.N,s.push(c),ci(c),c=a;s.push(c),oi(c);var l,h=s.length;for(l=1;l<h;++l)c=s[l],u=s[l-1],Hr(c.edge,u.site,c.site,i);u=s[0],c=s[h-1],c.edge=Wr(u.site,c.site,null,i),ii(u),ii(c)}function hi(t){var e,n,r,i,o=t[0],a=t[1],s=pi._;while(s)if(r=fi(s,a)-o,r>yi)s=s.L;else{if(i=o-di(s,a),!(i>yi)){r>-yi?(e=s.P,n=s):i>-yi?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}Yr(t);var u=ui(t);if(pi.insert(e,u),e||n){if(e===n)return oi(e),n=ui(e.site),pi.insert(u,n),u.edge=n.edge=Wr(e.site,u.site),ii(e),void ii(n);if(n){oi(e),oi(n);var c=e.site,l=c[0],h=c[1],f=t[0]-l,d=t[1]-h,p=n.site,g=p[0]-l,m=p[1]-h,v=2*(f*m-d*g),y=f*f+d*d,b=g*g+m*m,x=[(m*y-d*b)/v+l,(f*b-g*y)/v+h];Hr(n.edge,c,p,x),u.edge=Wr(c,t,null,x),n.edge=Wr(t,p,null,x),ii(e),ii(n)}else u.edge=Wr(e.site,u.site)}}function fi(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;n=a.site;var s=n[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2}function di(t,e){var n=t.N;if(n)return fi(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var pi,gi,mi,vi,yi=1e-6,bi=1e-12;function xi(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function wi(t,e){return e[1]-t[1]||e[0]-t[0]}function _i(t,e){var n,r,i,o=t.sort(wi).pop();vi=[],gi=new Array(t.length),pi=new Ur,mi=new Ur;while(1)if(i=ei,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(hi(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;li(i.arc)}if(Qr(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];Xr(a,s,u,c),ti(a,s,u,c)}this.edges=vi,this.cells=gi,pi=mi=vi=gi=null}_i.prototype={constructor:_i,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Zr(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length){var i,o,a,s=n.site,u=-1,c=e[i[o-1]],l=c.left===s?c.right:c.left;while(++u<o)a=l,c=e[i[u]],l=c.left===s?c.right:c.left,a&&l&&r<a.index&&r<l.index&&xi(s,a,l)<0&&t.push([s.data,a.data,l.data])}})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){var r,i,o=this,a=o._found||0,s=o.cells.length;while(!(i=o.cells[a]))if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],h=u*u+c*c;h<l&&(l=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};Math.SQRT2;function Oi(t,e,n){this.k=t,this.x=e,this.y=n}Oi.prototype={constructor:Oi,scale:function(t){return 1===t?this:new Oi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Oi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Si=new Oi(1,0,0);function Ci(t){while(!t.__zoom)if(!(t=t.parentNode))return Si;return t.__zoom}Ci.prototype=Oi.prototype},"56ef":function(t,e,n){var r=n("d066"),i=n("241c"),o=n("7418"),a=n("825a");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},"585a":function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("c8ba"))},5874:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]},"58df":function(t,e,n){var r=n("6d8b"),i=n("2306");function o(t,e,n,o){var a=n.axis;if(!a.scale.isBlank()){var s=n.getModel("splitArea"),u=s.getModel("areaStyle"),c=u.get("color"),l=o.coordinateSystem.getRect(),h=a.getTicksCoords({tickModel:s,clamp:!0});if(h.length){var f=c.length,d=t.__splitAreaColors,p=r.createHashMap(),g=0;if(d)for(var m=0;m<h.length;m++){var v=d.get(h[m].tickValue);if(null!=v){g=(v+(f-1)*m)%f;break}}var y=a.toGlobalCoord(h[0].coord),b=u.getAreaStyle();c=r.isArray(c)?c:[c];for(m=1;m<h.length;m++){var x,w,_,O,S=a.toGlobalCoord(h[m].coord);a.isHorizontal()?(x=y,w=l.y,_=S-x,O=l.height,y=x+_):(x=l.x,w=y,_=l.width,O=S-w,y=w+O);var C=h[m-1].tickValue;null!=C&&p.set(C,g),e.add(new i.Rect({anid:null!=C?"area_"+C:null,shape:{x:x,y:w,width:_,height:O},style:r.defaults({fill:c[g]},b),silent:!0})),g=(g+1)%f}t.__splitAreaColors=p}}}function a(t){t.__splitAreaColors=null}e.rectCoordAxisBuildSplitArea=o,e.rectCoordAxisHandleRemove=a},5959:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("6ae2"),i=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n,o){if(null==o&&(o=Object(i["inferDtype"])(t)),"complex64"===o)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Object(i["isTypedArray"])(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){Object(i["assertNonNegativeIntegerDimensions"])(e);const t=Object(i["sizeFromShape"])(e),r=Object(i["sizeFromShape"])(n);Object(i["assert"])(t===r,()=>`Based on the provided shape, [${e}], the tensor should have ${t} values but has ${r}`);for(let o=0;o<n.length;++o){const t=n[o],r=o!==n.length-1||t!==Object(i["sizeFromShape"])(e.slice(o));Object(i["assert"])(n[o]===e[o]||!r,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return Object(i["isTypedArray"])(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==o?Object(i["toTypedArray"])(t,o):Object(i["flatten"])(t,[],!0),r["a"].makeTensor(t,e,o)}},"5aa9":function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("6d8b")),o=i.isObject,a=i.each,s=i.map,u=i.indexOf,c=(i.retrieve,n("f934")),l=c.getLayoutRect,h=n("697e"),f=h.createScaleByModel,d=h.ifAxisCrossZero,p=h.niceScaleExtent,g=h.estimateLabelUnionRect,m=n("cbe9"),v=n("ec02"),y=n("2039"),b=n("ee1a"),x=b.getStackedDimension;function w(t,e,n){return t.getCoordSysModel()===e}function _(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}n("8ed2");var O=_.prototype;function S(t,e,n,r){n.getAxesOnZeroOf=function(){return i?[i]:[]};var i,o=t[e],a=n.model,s=a.get("axisLine.onZero"),u=a.get("axisLine.onZeroAxisIndex");if(s){if(null!=u)C(o[u])&&(i=o[u]);else for(var c in o)if(o.hasOwnProperty(c)&&C(o[c])&&!r[l(o[c])]){i=o[c];break}i&&(r[l(i)]=!0)}function l(t){return t.dim+"_"+t.index}}function C(t){return t&&"category"!==t.type&&"time"!==t.type&&d(t)}function k(t,e){var n=t.getExtent(),r=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return r-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return r-t+e}}O.type="grid",O.axisPointerEnabled=!0,O.getRect=function(){return this._rect},O.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),a(n.x,(function(t){p(t.scale,t.model)})),a(n.y,(function(t){p(t.scale,t.model)}));var r={};a(n.x,(function(t){S(n,"y",t,r)})),a(n.y,(function(t){S(n,"x",t,r)})),this.resize(this.model,e)},O.resize=function(t,e,n){var r=l(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=r;var i=this._axesList;function o(){a(i,(function(t){var e=t.isHorizontal(),n=e?[0,r.width]:[0,r.height],i=t.inverse?1:0;t.setExtent(n[i],n[1-i]),k(t,e?r.x:r.y)}))}o(),!n&&t.get("containLabel")&&(a(i,(function(t){if(!t.model.get("axisLabel.inside")){var e=g(t);if(e){var n=t.isHorizontal()?"height":"width",i=t.model.get("axisLabel.margin");r[n]-=e[n]+i,"top"===t.position?r.y+=e.height+i:"left"===t.position&&(r.x+=e.width+i)}}})),o())},O.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var r in n)if(n.hasOwnProperty(r))return n[r];return n[e]}},O.getAxes=function(){return this._axesList.slice()},O.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}o(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var r=0,i=this._coordsList;r<i.length;r++)if(i[r].getAxis("x").index===t||i[r].getAxis("y").index===e)return i[r]},O.getCartesians=function(){return this._coordsList.slice()},O.convertToPixel=function(t,e,n){var r=this._findConvertTarget(t,e);return r.cartesian?r.cartesian.dataToPoint(n):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(n)):null},O.convertFromPixel=function(t,e,n){var r=this._findConvertTarget(t,e);return r.cartesian?r.cartesian.pointToData(n):r.axis?r.axis.coordToData(r.axis.toLocalCoord(n)):null},O._findConvertTarget=function(t,e){var n,r,i=e.seriesModel,o=e.xAxisModel||i&&i.getReferringComponents("xAxis")[0],a=e.yAxisModel||i&&i.getReferringComponents("yAxis")[0],s=e.gridModel,c=this._coordsList;if(i)n=i.coordinateSystem,u(c,n)<0&&(n=null);else if(o&&a)n=this.getCartesian(o.componentIndex,a.componentIndex);else if(o)r=this.getAxis("x",o.componentIndex);else if(a)r=this.getAxis("y",a.componentIndex);else if(s){var l=s.coordinateSystem;l===this&&(n=this._coordsList[0])}return{cartesian:n,axis:r}},O.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},O._initCartesian=function(t,e,n){var r={left:!1,right:!1,top:!1,bottom:!1},i={x:{},y:{}},o={x:0,y:0};if(e.eachComponent("xAxis",s("x"),this),e.eachComponent("yAxis",s("y"),this),!o.x||!o.y)return this._axesMap={},void(this._axesList=[]);function s(n){return function(a,s){if(w(a,t,e)){var u=a.get("position");"x"===n?"top"!==u&&"bottom"!==u&&(u=r.bottom?"top":"bottom"):"left"!==u&&"right"!==u&&(u=r.left?"right":"left"),r[u]=!0;var c=new v(n,f(a),[0,0],a.get("type"),u),l="category"===c.type;c.onBand=l&&a.get("boundaryGap"),c.inverse=a.get("inverse"),a.axis=c,c.model=a,c.grid=this,c.index=s,this._axesList.push(c),i[n][s]=c,o[n]++}}}this._axesMap=i,a(i.x,(function(e,n){a(i.y,(function(r,i){var o="x"+n+"y"+i,a=new m(o);a.grid=this,a.model=t,this._coordsMap[o]=a,this._coordsList.push(a),a.addAxis(e),a.addAxis(r)}),this)}),this)},O._updateScale=function(t,e){function n(t,e,n){a(t.mapDimension(e.dim,!0),(function(n){e.scale.unionExtentFromData(t,x(t,n))}))}a(this._axesList,(function(t){t.scale.setExtent(1/0,-1/0)})),t.eachSeries((function(r){if(E(r)){var i=T(r,t),o=i[0],a=i[1];if(!w(o,e,t)||!w(a,e,t))return;var s=this.getCartesian(o.componentIndex,a.componentIndex),u=r.getData(),c=s.getAxis("x"),l=s.getAxis("y");"list"===u.type&&(n(u,c,r),n(u,l,r))}}),this)},O.getTooltipAxes=function(t){var e=[],n=[];return a(this.getCartesians(),(function(r){var i=null!=t&&"auto"!==t?r.getAxis(t):r.getBaseAxis(),o=r.getOtherAxis(i);u(e,i)<0&&e.push(i),u(n,o)<0&&n.push(o)})),{baseAxes:e,otherAxes:n}};var A=["xAxis","yAxis"];function T(t,e){return s(A,(function(e){var n=t.getReferringComponents(e)[0];return n}))}function E(t){return"cartesian2d"===t.get("coordinateSystem")}_.create=function(t,e){var n=[];return t.eachComponent("grid",(function(r,i){var o=new _(r,t,e);o.name="grid_"+i,o.resize(r,e,!0),r.coordinateSystem=o,n.push(o)})),t.eachSeries((function(e){if(E(e)){var n=T(e,t),r=n[0],i=n[1],o=r.getCoordSysModel(),a=o.coordinateSystem;e.coordinateSystem=a.getCartesian(r.componentIndex,i.componentIndex)}})),n},_.dimensions=_.prototype.dimensions=m.prototype.dimensions,y.register("cartesian2d",_);var j=_;t.exports=j},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5e68":function(t,e,n){var r=n("6d8b"),i=n("2cf4"),o=i.devicePixelRatio,a=n("2b61"),s=n("dc2f");function u(){return!1}function c(t,e,n){var i=r.createCanvas(),o=e.getWidth(),a=e.getHeight(),s=i.style;return s&&(s.position="absolute",s.left=0,s.top=0,s.width=o+"px",s.height=a+"px",i.setAttribute("data-zr-dom-id",t)),i.width=o*n,i.height=a*n,i}var l=function(t,e,n){var i;n=n||o,"string"===typeof t?i=c(t,e,n):r.isObject(t)&&(i=t,t=i.id),this.id=t,this.dom=i;var a=i.style;a&&(i.onselectstart=u,a["-webkit-user-select"]="none",a["user-select"]="none",a["-webkit-touch-callout"]="none",a["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",a["padding"]=0,a["margin"]=0,a["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n};l.prototype={constructor:l,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=c("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,r=this.dom,i=r.style,o=this.domBack;i&&(i.width=t+"px",i.height=e+"px"),r.width=t*n,r.height=e*n,o&&(o.width=t*n,o.height=e*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n,r=this.dom,i=this.ctx,o=r.width,u=r.height,c=(e=e||this.clearColor,this.motionBlur&&!t),l=this.lastFrameAlpha,h=this.dpr;(c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,o/h,u/h)),i.clearRect(0,0,o,u),e&&"transparent"!==e)&&(e.colorStops?(n=e.__canvasGradient||a.getGradient(i,e,{x:0,y:0,width:o,height:u}),e.__canvasGradient=n):e.image&&(n=s.prototype.getCanvasPattern.call(e,i)),i.save(),i.fillStyle=n||e,i.fillRect(0,0,o,u),i.restore());if(c){var f=this.domBack;i.save(),i.globalAlpha=l,i.drawImage(f,0,0,o,u),i.restore()}}};var h=l;t.exports=h},"5e76":function(t,e,n){var r=n("d51b"),i=new r(50);function o(t){if("string"===typeof t){var e=i.get(t);return e&&e.image}return t}function a(t,e,n,r,o){if(t){if("string"===typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var a=i.get(t),c={hostEl:n,cb:r,cbPayload:o};return a?(e=a.image,!u(e)&&a.pending.push(c)):(e=new Image,e.onload=e.onerror=s,i.put(t,e.__cachedImgObj={image:e,pending:[c]}),e.src=e.__zrImageSrc=t),e}return t}return e}function s(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function u(t){return t&&t.width&&t.height}e.findExistImage=o,e.createOrUpdateImage=a,e.isImageReady=u},"607d":function(t,e,n){var r=n("1fab");e.Dispatcher=r;var i=n("22d1"),o=n("65ed"),a=o.isCanvasEl,s=o.transformCoordWithViewport,u="undefined"!==typeof window&&!!window.addEventListener,c=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,l=[];function h(t,e,n,r){return n=n||{},r||!i.canvasSupported?f(t,e,n):i.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):f(t,e,n),n}function f(t,e,n){if(i.domSupported&&t.getBoundingClientRect){var r=e.clientX,o=e.clientY;if(a(t)){var u=t.getBoundingClientRect();return n.zrX=r-u.left,void(n.zrY=o-u.top)}if(s(l,t,r,o))return n.zrX=l[0],void(n.zrY=l[1])}n.zrX=n.zrY=0}function d(t){return t||window.event}function p(t,e,n){if(e=d(e),null!=e.zrX)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var o="touchend"!==r?e.targetTouches[0]:e.changedTouches[0];o&&h(t,o,e,n)}else h(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var a=e.button;return null==e.which&&void 0!==a&&c.test(e.type)&&(e.which=1&a?1:2&a?3:4&a?2:0),e}function g(t,e,n,r){u?t.addEventListener(e,n,r):t.attachEvent("on"+e,n)}function m(t,e,n,r){u?t.removeEventListener(e,n,r):t.detachEvent("on"+e,n)}var v=u?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};function y(t){return 2===t.which||3===t.which}function b(t){return t.which>1}e.clientToLocal=h,e.getNativeEvent=d,e.normalizeEvent=p,e.addEventListener=g,e.removeEventListener=m,e.stop=v,e.isMiddleOrRightButtonOnMouseUpDown=y,e.notLeftMouse=b},"60da":function(t,e,n){"use strict";var r=n("83ab"),i=n("d039"),o=n("df75"),a=n("7418"),s=n("d1e7"),u=n("7b0b"),c=n("44ad"),l=Object.assign,h=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||o(l({},e)).join("")!=i}))?function(t,e){var n=u(t),i=arguments.length,l=1,h=a.f,f=s.f;while(i>l){var d,p=c(arguments[l++]),g=h?o(p).concat(h(p)):o(p),m=g.length,v=0;while(m>v)d=g[v++],r&&!f.call(p,d)||(n[d]=p[d])}return n}:l},6125:function(t,e,n){var r=n("1212"),i=n("b838"),o=n("a49e"),a=n("cae0"),s=n("7aec"),u=n("89ed"),c=n("a49d");c.alea=r,c.xor128=i,c.xorwow=o,c.xorshift7=a,c.xor4096=s,c.tychei=u,t.exports=c},6179:function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("6d8b")),o=n("4319"),a=n("80f0"),s=n("ec6f"),u=n("2b17"),c=u.defaultDimValueGetters,l=u.DefaultDataProvider,h=n("2f45"),f=h.summarizeDimensions,d=n("562e"),p=i.isObject,g="undefined",m=-1,v="e\0\0",y={float:typeof Float64Array===g?Array:Float64Array,int:typeof Int32Array===g?Array:Int32Array,ordinal:Array,number:Array,time:Array},b=typeof Uint32Array===g?Array:Uint32Array,x=typeof Int32Array===g?Array:Int32Array,w=typeof Uint16Array===g?Array:Uint16Array;function _(t){return t._rawCount>65535?b:w}function O(t){var e=t.constructor;return e===Array?t.slice():new e(t)}var S=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],C=["_extent","_approximateExtent","_rawExtent"];function k(t,e){i.each(S.concat(e.__wrappedMethods||[]),(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t.__wrappedMethods=e.__wrappedMethods,i.each(C,(function(n){t[n]=i.clone(e[n])})),t._calculationInfo=i.extend(e._calculationInfo)}var A=function(t,e){t=t||["x","y"];for(var n={},r=[],o={},a=0;a<t.length;a++){var s=t[a];i.isString(s)?s=new d({name:s}):s instanceof d||(s=new d(s));var u=s.name;s.type=s.type||"float",s.coordDim||(s.coordDim=u,s.coordDimIndex=0),s.otherDims=s.otherDims||{},r.push(u),n[u]=s,s.index=a,s.createInvertedIndices&&(o[u]=[])}this.dimensions=r,this._dimensionInfos=n,this.hostModel=e,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=f(this),this._invertedIndicesMap=o,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},T=A.prototype;function E(t,e,n,r,i){var o=y[e.type],a=r-1,s=e.name,u=t[s][a];if(u&&u.length<n){for(var c=new o(Math.min(i-a*n,n)),l=0;l<u.length;l++)c[l]=u[l];t[s][a]=c}for(var h=r*n;h<i;h+=n)t[s].push(new o(Math.min(i-h,n)))}function j(t){var e=t._invertedIndicesMap;i.each(e,(function(n,r){var i=t._dimensionInfos[r],o=i.ordinalMeta;if(o){n=e[r]=new x(o.categories.length);for(var a=0;a<n.length;a++)n[a]=m;for(a=0;a<t._count;a++)n[t.get(r,a)]=a}}))}function D(t,e,n){var r;if(null!=e){var i=t._chunkSize,o=Math.floor(n/i),a=n%i,s=t.dimensions[e],u=t._storage[s][o];if(u){r=u[a];var c=t._dimensionInfos[s].ordinalMeta;c&&c.categories.length&&(r=c.categories[r])}}return r}function M(t){return t}function N(t){return t<this._count&&t>=0?this._indices[t]:-1}function I(t,e){var n=t._idList[e];return null==n&&(n=D(t,t._idDimIdx,e)),null==n&&(n=v+e),n}function R(t){return i.isArray(t)||(t=[t]),t}function F(t,e){var n=t.dimensions,r=new A(i.map(n,t.getDimensionInfo,t),t.hostModel);k(r,t);for(var o=r._storage={},a=t._storage,s=0;s<n.length;s++){var u=n[s];a[u]&&(i.indexOf(e,u)>=0?(o[u]=P(a[u]),r._rawExtent[u]=$(),r._extent[u]=null):o[u]=a[u])}return r}function P(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=O(t[n]);return e}function $(){return[1/0,-1/0]}T.type="list",T.hasItemOption=!0,T.getDimension=function(t){return"number"!==typeof t&&(isNaN(t)||this._dimensionInfos.hasOwnProperty(t))||(t=this.dimensions[t]),t},T.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},T.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},T.mapDimension=function(t,e){var n=this._dimensionsSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var r=n.encode[t];return!0===e?(r||[]).slice():r&&r[e]},T.initData=function(t,e,n){var r=s.isInstance(t)||i.isArrayLike(t);r&&(t=new l(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=c[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=c.arrayRows,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},T.getProvider=function(){return this._rawData},T.appendData=function(t){var e=this._rawData,n=this.count();e.appendData(t);var r=e.count();e.persistent||(r+=n),this._initDataFromProvider(n,r)},T.appendValues=function(t,e){for(var n=this._chunkSize,r=this._storage,i=this.dimensions,o=i.length,a=this._rawExtent,s=this.count(),u=s+Math.max(t.length,e?e.length:0),c=this._chunkCount,l=0;l<o;l++){var h=i[l];a[h]||(a[h]=$()),r[h]||(r[h]=[]),E(r,this._dimensionInfos[h],n,c,u),this._chunkCount=r[h].length}for(var f=new Array(o),d=s;d<u;d++){for(var p=d-s,g=Math.floor(d/n),m=d%n,v=0;v<o;v++){h=i[v];var y=this._dimValueGetterArrayRows(t[p]||f,h,p,v);r[h][g][m]=y;var b=a[h];y<b[0]&&(b[0]=y),y>b[1]&&(b[1]=y)}e&&(this._nameList[d]=e[p])}this._rawCount=this._count=u,this._extent={},j(this)},T._initDataFromProvider=function(t,e){if(!(t>=e)){for(var n,r=this._chunkSize,i=this._rawData,o=this._storage,a=this.dimensions,s=a.length,u=this._dimensionInfos,c=this._nameList,l=this._idList,h=this._rawExtent,f=this._nameRepeatCount={},d=this._chunkCount,p=0;p<s;p++){var g=a[p];h[g]||(h[g]=$());var m=u[g];0===m.otherDims.itemName&&(n=this._nameDimIdx=p),0===m.otherDims.itemId&&(this._idDimIdx=p),o[g]||(o[g]=[]),E(o,m,r,d,e),this._chunkCount=o[g].length}for(var v=new Array(s),y=t;y<e;y++){v=i.getItem(y,v);for(var b=Math.floor(y/r),x=y%r,w=0;w<s;w++){g=a[w];var _=o[g][b],O=this._dimValueGetter(v,g,y,w);_[x]=O;var S=h[g];O<S[0]&&(S[0]=O),O>S[1]&&(S[1]=O)}if(!i.pure){var C=c[y];if(v&&null==C)if(null!=v.name)c[y]=C=v.name;else if(null!=n){var k=a[n],A=o[k][b];if(A){C=A[x];var T=u[k].ordinalMeta;T&&T.categories.length&&(C=T.categories[C])}}var D=null==v?null:v.id;null==D&&null!=C&&(f[C]=f[C]||0,D=C,f[C]>0&&(D+="__ec__"+f[C]),f[C]++),null!=D&&(l[y]=D)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=e,this._extent={},j(this)}},T.count=function(){return this._count},T.getIndices=function(){var t=this._indices;if(t){var e=t.constructor,n=this._count;if(e===Array){i=new e(n);for(var r=0;r<n;r++)i[r]=t[r]}else i=new e(t.buffer,0,n)}else{e=_(this);var i=new e(this.count());for(r=0;r<i.length;r++)i[r]=r}return i},T.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._storage;if(!n[t])return NaN;e=this.getRawIndex(e);var r=Math.floor(e/this._chunkSize),i=e%this._chunkSize,o=n[t][r],a=o[i];return a},T.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var n=this._storage[t];if(!n)return NaN;var r=Math.floor(e/this._chunkSize),i=e%this._chunkSize,o=n[r];return o[i]},T._getFast=function(t,e){var n=Math.floor(e/this._chunkSize),r=e%this._chunkSize,i=this._storage[t][n];return i[r]},T.getValues=function(t,e){var n=[];i.isArray(t)||(e=t,t=this.dimensions);for(var r=0,o=t.length;r<o;r++)n.push(this.get(t[r],e));return n},T.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,n=0,r=e.length;n<r;n++)if(isNaN(this.get(e[n],t)))return!1;return!0},T.getDataExtent=function(t){t=this.getDimension(t);var e=this._storage[t],n=$();if(!e)return n;var r,i=this.count(),o=!this._indices;if(o)return this._rawExtent[t].slice();if(r=this._extent[t],r)return r.slice();r=n;for(var a=r[0],s=r[1],u=0;u<i;u++){var c=this._getFast(t,this.getRawIndex(u));c<a&&(a=c),c>s&&(s=c)}return r=[a,s],this._extent[t]=r,r},T.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]||this.getDataExtent(t)},T.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},T.getCalculationInfo=function(t){return this._calculationInfo[t]},T.setCalculationInfo=function(t,e){p(t)?i.extend(this._calculationInfo,t):this._calculationInfo[t]=e},T.getSum=function(t){var e=this._storage[t],n=0;if(e)for(var r=0,i=this.count();r<i;r++){var o=this.get(t,r);isNaN(o)||(n+=o)}return n},T.getMedian=function(t){var e=[];this.each(t,(function(t,n){isNaN(t)||e.push(t)}));var n=[].concat(e).sort((function(t,e){return t-e})),r=this.count();return 0===r?0:r%2===1?n[(r-1)/2]:(n[r/2]+n[r/2-1])/2},T.rawIndexOf=function(t,e){var n=t&&this._invertedIndicesMap[t],r=n[e];return null==r||isNaN(r)?m:r},T.indexOfName=function(t){for(var e=0,n=this.count();e<n;e++)if(this.getName(e)===t)return e;return-1},T.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;var r=0,i=this._count-1;while(r<=i){var o=(r+i)/2|0;if(e[o]<t)r=o+1;else{if(!(e[o]>t))return o;i=o-1}}return-1},T.indicesOfNearest=function(t,e,n){var r=this._storage,i=r[t],o=[];if(!i)return o;null==n&&(n=1/0);for(var a=1/0,s=-1,u=0,c=0,l=this.count();c<l;c++){var h=e-this.get(t,c),f=Math.abs(h);f<=n&&((f<a||f===a&&h>=0&&s<0)&&(a=f,s=h,u=0),h===s&&(o[u++]=c))}return o.length=u,o},T.getRawIndex=M,T.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],n=0;n<this.dimensions.length;n++){var r=this.dimensions[n];e.push(this.get(r,t))}return e},T.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||D(this,this._nameDimIdx,e)||""},T.getId=function(t){return I(this,this.getRawIndex(t))},T.each=function(t,e,n,r){"use strict";if(this._count){"function"===typeof t&&(r=n,n=e,e=t,t=[]),n=n||r||this,t=i.map(R(t),this.getDimension,this);for(var o=t.length,a=0;a<this.count();a++)switch(o){case 0:e.call(n,a);break;case 1:e.call(n,this.get(t[0],a),a);break;case 2:e.call(n,this.get(t[0],a),this.get(t[1],a),a);break;default:for(var s=0,u=[];s<o;s++)u[s]=this.get(t[s],a);u[s]=a,e.apply(n,u)}}},T.filterSelf=function(t,e,n,r){"use strict";if(this._count){"function"===typeof t&&(r=n,n=e,e=t,t=[]),n=n||r||this,t=i.map(R(t),this.getDimension,this);for(var o=this.count(),a=_(this),s=new a(o),u=[],c=t.length,l=0,h=t[0],f=0;f<o;f++){var d,p=this.getRawIndex(f);if(0===c)d=e.call(n,f);else if(1===c){var g=this._getFast(h,p);d=e.call(n,g,f)}else{for(var m=0;m<c;m++)u[m]=this._getFast(h,p);u[m]=f,d=e.apply(n,u)}d&&(s[l++]=p)}return l<o&&(this._indices=s),this._count=l,this._extent={},this.getRawIndex=this._indices?N:M,this}},T.selectRange=function(t){"use strict";if(this._count){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var r=e.length;if(r){var i=this.count(),o=_(this),a=new o(i),s=0,u=e[0],c=t[u][0],l=t[u][1],h=!1;if(!this._indices){var f=0;if(1===r){for(var d=this._storage[e[0]],p=0;p<this._chunkCount;p++)for(var g=d[p],m=Math.min(this._count-p*this._chunkSize,this._chunkSize),v=0;v<m;v++){var y=g[v];(y>=c&&y<=l||isNaN(y))&&(a[s++]=f),f++}h=!0}else if(2===r){d=this._storage[u];var b=this._storage[e[1]],x=t[e[1]][0],w=t[e[1]][1];for(p=0;p<this._chunkCount;p++){g=d[p];var O=b[p];for(m=Math.min(this._count-p*this._chunkSize,this._chunkSize),v=0;v<m;v++){y=g[v];var S=O[v];(y>=c&&y<=l||isNaN(y))&&(S>=x&&S<=w||isNaN(S))&&(a[s++]=f),f++}}h=!0}}if(!h)if(1===r)for(v=0;v<i;v++){var C=this.getRawIndex(v);y=this._getFast(u,C);(y>=c&&y<=l||isNaN(y))&&(a[s++]=C)}else for(v=0;v<i;v++){var k=!0;for(C=this.getRawIndex(v),p=0;p<r;p++){var A=e[p];y=this._getFast(n,C);(y<t[A][0]||y>t[A][1])&&(k=!1)}k&&(a[s++]=this.getRawIndex(v))}return s<i&&(this._indices=a),this._count=s,this._extent={},this.getRawIndex=this._indices?N:M,this}}},T.mapArray=function(t,e,n,r){"use strict";"function"===typeof t&&(r=n,n=e,e=t,t=[]),n=n||r||this;var i=[];return this.each(t,(function(){i.push(e&&e.apply(this,arguments))}),n),i},T.map=function(t,e,n,r){"use strict";n=n||r||this,t=i.map(R(t),this.getDimension,this);var o=F(this,t);o._indices=this._indices,o.getRawIndex=o._indices?N:M;for(var a=o._storage,s=[],u=this._chunkSize,c=t.length,l=this.count(),h=[],f=o._rawExtent,d=0;d<l;d++){for(var p=0;p<c;p++)h[p]=this.get(t[p],d);h[c]=d;var g=e&&e.apply(n,h);if(null!=g){"object"!==typeof g&&(s[0]=g,g=s);for(var m=this.getRawIndex(d),v=Math.floor(m/u),y=m%u,b=0;b<g.length;b++){var x=t[b],w=g[b],_=f[x],O=a[x];O&&(O[v][y]=w),w<_[0]&&(_[0]=w),w>_[1]&&(_[1]=w)}}}return o},T.downSample=function(t,e,n,r){for(var i=F(this,[t]),o=i._storage,a=[],s=Math.floor(1/e),u=o[t],c=this.count(),l=this._chunkSize,h=i._rawExtent[t],f=new(_(this))(c),d=0,p=0;p<c;p+=s){s>c-p&&(s=c-p,a.length=s);for(var g=0;g<s;g++){var m=this.getRawIndex(p+g),v=Math.floor(m/l),y=m%l;a[g]=u[v][y]}var b=n(a),x=this.getRawIndex(Math.min(p+r(a,b)||0,c-1)),w=Math.floor(x/l),O=x%l;u[w][O]=b,b<h[0]&&(h[0]=b),b>h[1]&&(h[1]=b),f[d++]=x}return i._count=d,i._indices=f,i.getRawIndex=N,i},T.getItemModel=function(t){var e=this.hostModel;return new o(this.getRawDataItem(t),e,e&&e.ecModel)},T.diff=function(t){var e=this;return new a(t?t.getIndices():[],this.getIndices(),(function(e){return I(t,e)}),(function(t){return I(e,t)}))},T.getVisual=function(t){var e=this._visual;return e&&e[t]},T.setVisual=function(t,e){if(p(t))for(var n in t)t.hasOwnProperty(n)&&this.setVisual(n,t[n]);else this._visual=this._visual||{},this._visual[t]=e},T.setLayout=function(t,e){if(p(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},T.getLayout=function(t){return this._layout[t]},T.getItemLayout=function(t){return this._itemLayouts[t]},T.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?i.extend(this._itemLayouts[t]||{},e):e},T.clearItemLayouts=function(){this._itemLayouts.length=0},T.getItemVisual=function(t,e,n){var r=this._itemVisuals[t],i=r&&r[e];return null!=i||n?i:this.getVisual(e)},T.setItemVisual=function(t,e,n){var r=this._itemVisuals[t]||{},i=this.hasItemVisual;if(this._itemVisuals[t]=r,p(e))for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o],i[o]=!0);else r[e]=n,i[e]=!0},T.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var L=function(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType};T.setItemGraphicEl=function(t,e){var n=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(L,e)),this._graphicEls[t]=e},T.getItemGraphicEl=function(t){return this._graphicEls[t]},T.eachItemGraphicEl=function(t,e){i.each(this._graphicEls,(function(n,r){n&&t&&t.call(e,n,r)}))},T.cloneShallow=function(t){if(!t){var e=i.map(this.dimensions,this.getDimensionInfo,this);t=new A(e,this.hostModel)}if(t._storage=this._storage,k(t,this),this._indices){var n=this._indices.constructor;t._indices=new n(this._indices)}else t._indices=null;return t.getRawIndex=t._indices?N:M,t},T.wrapMethod=function(t,e){var n=this[t];"function"===typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(i.slice(arguments)))})},T.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],T.CHANGABLE_METHODS=["filterSelf","selectRange"];var z=A;t.exports=z},6180:function(t,e,n){"use strict";
/*
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(t,e){if(!t)throw new Error("string"===typeof e?e:e())}function i(t,e,n=""){r(o(t,e),n+` Shapes ${t} and ${e} must match`)}function o(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.assert=r,e.assertShapesMatch=i,e.arraysEqual=o,e.DECIMAL_PLACES_TO_CHECK=4},"620b":function(t,e,n){var r=n("401b"),i=r.distance;function o(t,e,n,r,i,o,a){var s=.5*(n-t),u=.5*(r-e);return(2*(e-n)+s+u)*a+(-3*(e-n)-2*s-u)*o+s*i+e}function a(t,e){for(var n=t.length,r=[],a=0,s=1;s<n;s++)a+=i(t[s-1],t[s]);var u=a/2;u=u<n?n:u;for(s=0;s<u;s++){var c,l,h,f=s/(u-1)*(e?n:n-1),d=Math.floor(f),p=f-d,g=t[d%n];e?(c=t[(d-1+n)%n],l=t[(d+1)%n],h=t[(d+2)%n]):(c=t[0===d?d:d-1],l=t[d>n-2?n-1:d+1],h=t[d>n-3?n-1:d+2]);var m=p*p,v=p*m;r.push([o(c[0],g[0],l[0],h[0],p,m,v),o(c[1],g[1],l[1],h[1],p,m,v)])}return r}t.exports=a},"625e":function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("6d8b")),o=".",a="___EC__COMPONENT__CONTAINER___";function s(t){var e={main:"",sub:""};return t&&(t=t.split(o),e.main=t[0]||"",e.sub=t[1]||""),e}function u(t){i.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function c(t,e){t.$constructor=t,t.extend=function(t){var e=this,n=function(){t.$constructor?t.$constructor.apply(this,arguments):e.apply(this,arguments)};return i.extend(n.prototype,t),n.extend=this.extend,n.superCall=f,n.superApply=d,i.inherits(n,this),n.superClass=e,n}}var l=0;function h(t){var e=["__\0is_clz",l++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}}function f(t,e){var n=i.slice(arguments,2);return this.superClass.prototype[e].apply(t,n)}function d(t,e,n){return this.superClass.prototype[e].apply(t,n)}function p(t,e){e=e||{};var n={};function r(t){var e=n[t.main];return e&&e[a]||(e=n[t.main]={},e[a]=!0),e}if(t.registerClass=function(t,e){if(e)if(u(e),e=s(e),e.sub){if(e.sub!==a){var i=r(e);i[e.sub]=t}}else n[e.main]=t;return t},t.getClass=function(t,e,r){var i=n[t];if(i&&i[a]&&(i=e?i[e]:null),r&&!i)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return i},t.getClassesByMainType=function(t){t=s(t);var e=[],r=n[t.main];return r&&r[a]?i.each(r,(function(t,n){n!==a&&e.push(t)})):e.push(r),e},t.hasClass=function(t){return t=s(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return i.each(n,(function(e,n){t.push(n)})),t},t.hasSubTypes=function(t){t=s(t);var e=n[t.main];return e&&e[a]},t.parseClassType=s,e.registerWhenExtend){var o=t.extend;o&&(t.extend=function(e){var n=o.call(this,e);return t.registerClass(n,e.type)})}return t}function g(t,e){}e.parseClassType=s,e.enableClassExtend=c,e.enableClassCheck=h,e.enableClassManagement=p,e.setReadOnly=g},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},6547:function(t,e,n){var r=n("a691"),i=n("1d80"),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},6582:function(t,e,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;t.exports=function(t,e){var n,i,o;return e=e||{},n=JSON.stringify([1],void 0,void 0===e.indent?2:e.indent).slice(2,-3),i=""===n?1/0:void 0===e.maxLength?80:e.maxLength,o=e.replacer,function t(e,a,s){var u,c,l,h,f,d,p,g,m,v,y,b;if(e&&"function"===typeof e.toJSON&&(e=e.toJSON()),y=JSON.stringify(e,o),void 0===y)return y;if(p=i-a.length-s,y.length<=p&&(m=y.replace(r,(function(t,e){return e||t+" "})),m.length<=p))return m;if(null!=o&&(e=JSON.parse(y),o=void 0),"object"===typeof e&&null!==e){if(g=a+n,l=[],c=0,Array.isArray(e))for(v="[",u="]",p=e.length;c<p;c++)l.push(t(e[c],g,c===p-1?0:1)||"null");else for(v="{",u="}",d=Object.keys(e),p=d.length;c<p;c++)h=d[c],f=JSON.stringify(h)+": ",b=t(e[h],g,f.length+(c===p-1?0:1)),void 0!==b&&l.push(f+b);if(l.length>0)return[v,n+l.join(",\n"+g),u].join("\n"+a)}return y}(t,"",0)}},"65ed":function(t,e,n){var r=n("22d1"),i=n("84ec"),o=i.buildTransformer,a="___zrEVENTSAVED",s=[];function u(t,e,n,r,i){return c(s,e,r,i,!0)&&c(t,n,s[0],s[1])}function c(t,e,n,i,o){if(e.getBoundingClientRect&&r.domSupported&&!f(e)){var s=e[a]||(e[a]={}),u=l(e,s),c=h(u,s,o);if(c)return c(t,n,i),!0}return!1}function l(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,u=o%2,c=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[u]+":0",i[c]+":0",r[1-u]+":auto",i[1-c]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}function h(t,e,n){for(var r=n?"invTrans":"trans",i=e[r],a=e.srcCoords,s=!0,u=[],c=[],l=0;l<4;l++){var h=t[l].getBoundingClientRect(),f=2*l,d=h.left,p=h.top;u.push(d,p),s=s&&a&&d===a[f]&&p===a[f+1],c.push(t[l].offsetLeft,t[l].offsetTop)}return s&&i?i:(e.srcCoords=u,e[r]=n?o(c,u):o(u,c))}function f(t){return"CANVAS"===t.nodeName.toUpperCase()}e.transformLocalCoord=u,e.transformCoordWithViewport=c,e.isCanvasEl=f},"65f0":function(t,e,n){var r=n("861d"),i=n("e8b5"),o=n("b622"),a=o("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},6679:function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("3eba")),o=n("cd33"),a=i.extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,n,r){this.axisPointerClass&&o.fixValue(t),a.superApply(this,"render",arguments),s(this,t,e,n,r,!0)},updateAxisPointer:function(t,e,n,r,i){s(this,t,e,n,r,!1)},remove:function(t,e){var n=this._axisPointer;n&&n.remove(e),a.superApply(this,"remove",arguments)},dispose:function(t,e){u(this,e),a.superApply(this,"dispose",arguments)}});function s(t,e,n,r,i,s){var c=a.getAxisPointerClass(t.axisPointerClass);if(c){var l=o.getAxisPointerModel(e);l?(t._axisPointer||(t._axisPointer=new c)).render(e,l,r,s):u(t,r)}}function u(t,e,n){var r=t._axisPointer;r&&r.dispose(e,n),t._axisPointer=null}var c=[];a.registerAxisPointerClass=function(t,e){c[t]=e},a.getAxisPointerClass=function(t){return t&&c[t]};var l=a;t.exports=l},6715:function(t,e,n){(function(e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var n,r,i;try{n=Map}catch(h){n=function(){}}try{r=Set}catch(h){r=function(){}}try{i=Promise}catch(h){i=function(){}}function o(a,s,u,c,h){"object"===typeof s&&(u=s.depth,c=s.prototype,h=s.includeNonEnumerable,s=s.circular);var f=[],d=[],p="undefined"!=typeof e;function g(a,u){if(null===a)return null;if(0===u)return a;var m,v;if("object"!=typeof a)return a;if(t(a,n))m=new n;else if(t(a,r))m=new r;else if(t(a,i))m=new i((function(t,e){a.then((function(e){t(g(e,u-1))}),(function(t){e(g(t,u-1))}))}));else if(o.__isArray(a))m=[];else if(o.__isRegExp(a))m=new RegExp(a.source,l(a)),a.lastIndex&&(m.lastIndex=a.lastIndex);else if(o.__isDate(a))m=new Date(a.getTime());else{if(p&&e.isBuffer(a))return m=e.allocUnsafe?e.allocUnsafe(a.length):new e(a.length),a.copy(m),m;t(a,Error)?m=Object.create(a):"undefined"==typeof c?(v=Object.getPrototypeOf(a),m=Object.create(v)):(m=Object.create(c),v=c)}if(s){var y=f.indexOf(a);if(-1!=y)return d[y];f.push(a),d.push(m)}for(var b in t(a,n)&&a.forEach((function(t,e){var n=g(e,u-1),r=g(t,u-1);m.set(n,r)})),t(a,r)&&a.forEach((function(t){var e=g(t,u-1);m.add(e)})),a){var x;v&&(x=Object.getOwnPropertyDescriptor(v,b)),x&&null==x.set||(m[b]=g(a[b],u-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(a);for(b=0;b<w.length;b++){var _=w[b],O=Object.getOwnPropertyDescriptor(a,_);(!O||O.enumerable||h)&&(m[_]=g(a[_],u-1),O.enumerable||Object.defineProperty(m,_,{enumerable:!1}))}}if(h){var S=Object.getOwnPropertyNames(a);for(b=0;b<S.length;b++){var C=S[b];O=Object.getOwnPropertyDescriptor(a,C);O&&O.enumerable||(m[C]=g(a[C],u-1),Object.defineProperty(m,C,{enumerable:!1}))}}return m}return"undefined"==typeof s&&(s=!0),"undefined"==typeof u&&(u=1/0),g(a,u)}function a(t){return Object.prototype.toString.call(t)}function s(t){return"object"===typeof t&&"[object Date]"===a(t)}function u(t){return"object"===typeof t&&"[object Array]"===a(t)}function c(t){return"object"===typeof t&&"[object RegExp]"===a(t)}function l(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return o.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},o.__objToStr=a,o.__isDate=s,o.__isArray=u,o.__isRegExp=c,o.__getRegExpFlags=l,o}();t.exports&&(t.exports=n)}).call(this,n("b639").Buffer)},"673d":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},"67a2":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("8756"),o=n("8e47"),a=n("5629"),s=n("1309"),u=n("4149");function c(t,e){return r(this,void 0,void 0,(function*(){const n=o.getDrawArea(t),r=h(e),i=["Layer Name","Output Shape","# Of Params","Trainable"],s=r.layers.map(t=>[t.name,t.outputShape,t.parameters,t.trainable]);a.table(n,{headers:i,values:s})}))}function l(t,e){return r(this,void 0,void 0,(function*(){const n=o.getDrawArea(t),u=yield d(e),c=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],l=s.subSurface(n,"layer-weights-info"),h=u.map(t=>[t.name,t.shape,t.stats.min,t.stats.max,t.weight.size,t.stats.numZeros,t.stats.numNans,t.stats.numInfs]);a.table(l,{headers:c,values:h});const f=s.subSurface(n,"select-layer"),p=s.subSurface(n,"param-distribution"),m=t=>r(this,void 0,void 0,(function*(){const e=u.filter(e=>e.name===t)[0],n=yield e.weight.data();i.histogram(p,n,{height:150,width:460,stats:!1})}));g(u.map(t=>t.name),f,m)}))}function h(t){return{layers:t.layers.map(f)}}function f(t){let e;if(Array.isArray(t.outputShape[0])){const n=t.outputShape.map(t=>p(t));e=`[${n.join(", ")}]`}else e=p(t.outputShape);return{name:t.name,trainable:t.trainable,parameters:t.countParams(),outputShape:e}}function d(t){return r(this,void 0,void 0,(function*(){const e=t.getWeights(),n=t.weights,r=e.map(u.tensorStats),i=yield Promise.all(r),o=e.map(t=>t.shape);return e.map((t,e)=>({name:n[e].name,stats:i[e],shape:p(o[e]),weight:t}))}))}function p(t){const e=t.slice();return 0===e.length?"Scalar":(null===e[0]&&(e[0]="batch"),`[${e.join(",")}]`)}function g(t,e,n){const r=`\n    <select>\n      ${t.map(t=>`<option value=${t}>${t}</option>`)}\n    </select>\n  `,i="<button>Show Values Distribution for:</button>",o=`<div>${i}${r}</div>`;e.innerHTML=o;const a=e.querySelector("button"),s=e.querySelector("select");a.addEventListener("click",()=>{n(s.selectedOptions[0].label)})}e.modelSummary=c,e.layer=l},"67cc":function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("3eba")),o=n("6d8b"),a=n("2306"),s=n("e7aa"),u=s.setLabel,c=n("4319"),l=n("b5c7"),h=n("cbe5"),f=n("e1fc"),d=n("88b3"),p=d.throttle,g=n("b0af"),m=g.createClipPath,v=n("c2be"),y=["itemStyle","barBorderWidth"],b=[0,0];function x(t,e){var n=t.getArea&&t.getArea();if("cartesian2d"===t.type){var r=t.getBaseAxis();if("category"!==r.type||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(n.x-=i,n.width+=2*i):(n.y-=i,n.height+=2*i)}}return n}o.extend(c.prototype,l);var w=i.extendChartView({type:"bar",render:function(t,e,n){this._updateDrawMode(t);var r=t.get("coordinateSystem");return"cartesian2d"!==r&&"polar"!==r||(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n)),this.group},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,r){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t,e,n){var r,i=this.group,o=t.getData(),s=this._data,u=t.coordinateSystem,c=u.getBaseAxis();"cartesian2d"===u.type?r=c.isHorizontal():"polar"===u.type&&(r="angle"===c.dim);var l=t.isAnimationEnabled()?t:null,h=t.get("clip",!0),d=x(u,o);i.removeClipPath();var p=t.get("roundCap",!0),g=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),v=m.get("barBorderRadius")||0,y=[],b=this._backgroundEls||[];o.diff(s).add((function(e){var n=o.getItemModel(e),a=T[u.type](o,e,n);if(g){var s=T[u.type](o,e),c=L(u,r,s);c.useStyle(m.getBarItemStyle()),"cartesian2d"===u.type&&c.setShape("r",v),y[e]=c}if(o.hasValue(e)){if(h){var f=S[u.type](d,a);if(f)return void i.remove(b)}var b=C[u.type](e,a,r,l,!1,p);o.setItemGraphicEl(e,b),i.add(b),j(b,o,e,n,a,t,r,"polar"===u.type)}})).update((function(e,n){var c=o.getItemModel(e),f=T[u.type](o,e,c);if(g){var x=b[n];x.useStyle(m.getBarItemStyle()),"cartesian2d"===u.type&&x.setShape("r",v),y[e]=x;var w=T[u.type](o,e),_=$(r,w,u);a.updateProps(x,{shape:_},l,e)}var O=s.getItemGraphicEl(n);if(o.hasValue(e)){if(h){var k=S[u.type](d,f);if(k)return void i.remove(O)}O?a.updateProps(O,{shape:f},l,e):O=C[u.type](e,f,r,l,!0,p),o.setItemGraphicEl(e,O),i.add(O),j(O,o,e,c,f,t,r,"polar"===u.type)}else i.remove(O)})).remove((function(t){var e=s.getItemGraphicEl(t);"cartesian2d"===u.type?e&&k(t,l,e):e&&A(t,l,e)})).execute();var w=this._backgroundGroup||(this._backgroundGroup=new f);w.removeAll();for(var _=0;_<y.length;++_)w.add(y[_]);i.add(w),this._backgroundEls=y,this._data=o},_renderLarge:function(t,e,n){this._clear(),N(t,this.group);var r=t.get("clip",!0)?m(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},_incrementalRenderLarge:function(t,e){this._removeBackground(),N(e,this.group,!0)},dispose:o.noop,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group,n=this._data;t&&t.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl((function(e){"sector"===e.type?A(e.dataIndex,t,e):k(e.dataIndex,t,e)}))):e.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}}),_=Math.max,O=Math.min,S={cartesian2d:function(t,e){var n=e.width<0?-1:1,r=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=_(e.x,t.x),o=O(e.x+e.width,t.x+t.width),a=_(e.y,t.y),s=O(e.y+e.height,t.y+t.height);e.x=i,e.y=a,e.width=o-i,e.height=s-a;var u=e.width<0||e.height<0;return n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),u},polar:function(t){return!1}},C={cartesian2d:function(t,e,n,r,i){var s=new a.Rect({shape:o.extend({},e),z2:1});if(s.name="item",r){var u=s.shape,c=n?"height":"width",l={};u[c]=0,l[c]=e[c],a[i?"updateProps":"initProps"](s,{shape:l},r,t)}return s},polar:function(t,e,n,r,i,s){var u=e.startAngle<e.endAngle,c=!n&&s?v:a.Sector,l=new c({shape:o.defaults({clockwise:u},e),z2:1});if(l.name="item",r){var h=l.shape,f=n?"r":"endAngle",d={};h[f]=n?0:e.startAngle,d[f]=e[f],a[i?"updateProps":"initProps"](l,{shape:d},r,t)}return l}};function k(t,e,n){n.style.text=null,a.updateProps(n,{shape:{width:0}},e,t,(function(){n.parent&&n.parent.remove(n)}))}function A(t,e,n){n.style.text=null,a.updateProps(n,{shape:{r:n.shape.r0}},e,t,(function(){n.parent&&n.parent.remove(n)}))}var T={cartesian2d:function(t,e,n){var r=t.getItemLayout(e),i=n?D(n,r):0,o=r.width>0?1:-1,a=r.height>0?1:-1;return{x:r.x+o*i/2,y:r.y+a*i/2,width:r.width-o*i,height:r.height-a*i}},polar:function(t,e,n){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle}}};function E(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}function j(t,e,n,r,i,s,c,l){var h=e.getItemVisual(n,"color"),f=e.getItemVisual(n,"opacity"),d=e.getVisual("borderColor"),p=r.getModel("itemStyle"),g=r.getModel("emphasis.itemStyle").getBarItemStyle();l||t.setShape("r",p.get("barBorderRadius")||0),t.useStyle(o.defaults({stroke:E(i)?"none":d,fill:E(i)?"none":h,opacity:f},p.getBarItemStyle()));var m=r.getShallow("cursor");m&&t.attr("cursor",m);var v=c?i.height>0?"bottom":"top":i.width>0?"left":"right";l||u(t.style,g,r,h,s,n,v),E(i)&&(g.fill=g.stroke="none"),a.setHoverStyle(t,g)}function D(t,e){var n=t.get(y)||0,r=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),i=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(n,r,i)}var M=h.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var n=e.points,r=this.__startPoint,i=this.__baseDimIdx,o=0;o<n.length;o+=2)r[i]=n[o+i],t.moveTo(r[0],r[1]),t.lineTo(n[o],n[o+1])}});function N(t,e,n){var r=t.getData(),i=[],o=r.getLayout("valueAxisHorizontal")?1:0;i[1-o]=r.getLayout("valueAxisStart");var a=r.getLayout("largeDataIndices"),s=r.getLayout("barWidth"),u=t.getModel("backgroundStyle"),c=t.get("showBackground",!0);if(c){var l=r.getLayout("largeBackgroundPoints"),h=[];h[1-o]=r.getLayout("backgroundStart");var f=new M({shape:{points:l},incremental:!!n,__startPoint:h,__baseDimIdx:o,__largeDataIndices:a,__barWidth:s,silent:!0,z2:0});P(f,u,r),e.add(f)}var d=new M({shape:{points:r.getLayout("largePoints")},incremental:!!n,__startPoint:i,__baseDimIdx:o,__largeDataIndices:a,__barWidth:s});e.add(d),F(d,t,r),d.seriesIndex=t.seriesIndex,t.get("silent")||(d.on("mousedown",I),d.on("mousemove",I))}var I=p((function(t){var e=this,n=R(e,t.offsetX,t.offsetY);e.dataIndex=n>=0?n:null}),30,!1);function R(t,e,n){var r=t.__baseDimIdx,i=1-r,o=t.shape.points,a=t.__largeDataIndices,s=Math.abs(t.__barWidth/2),u=t.__startPoint[i];b[0]=e,b[1]=n;for(var c=b[r],l=b[1-r],h=c-s,f=c+s,d=0,p=o.length/2;d<p;d++){var g=2*d,m=o[g+r],v=o[g+i];if(m>=h&&m<=f&&(u<=v?l>=u&&l<=v:l>=v&&l<=u))return a[d]}return-1}function F(t,e,n){var r=n.getVisual("borderColor")||n.getVisual("color"),i=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(i),t.style.fill=null,t.style.stroke=r,t.style.lineWidth=n.getLayout("barWidth")}function P(t,e,n){var r=e.get("borderColor")||e.get("color"),i=e.getItemStyle(["color","borderColor"]);t.useStyle(i),t.style.fill=null,t.style.stroke=r,t.style.lineWidth=n.getLayout("barWidth")}function $(t,e,n){var r,i="polar"===n.type;return r=i?n.getArea():n.grid.getRect(),i?{cx:r.cx,cy:r.cy,r0:t?r.r0:e.r0,r:t?r.r:e.r,startAngle:t?e.startAngle:0,endAngle:t?e.endAngle:2*Math.PI}:{x:t?e.x:r.x,y:t?r.y:e.y,width:t?e.width:r.width,height:t?r.height:e.height}}function L(t,e,n){var r="polar"===t.type?a.Sector:a.Rect;return new r({shape:$(e,n,t),silent:!0,z2:0})}t.exports=w},"68ab":function(t,e,n){var r=n("4a3f"),i=r.quadraticProjectPoint;function o(t,e,n,r,o,a,s,u,c){if(0===s)return!1;var l=s;if(c>e+l&&c>r+l&&c>a+l||c<e-l&&c<r-l&&c<a-l||u>t+l&&u>n+l&&u>o+l||u<t-l&&u<n-l&&u<o-l)return!1;var h=i(t,e,n,r,o,a,u,c,null);return h<=l/2}e.containStroke=o},"68d3":function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)<=0;t.exports=i},"697e":function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("6d8b")),o=n("18c0"),a=n("89e3"),s=n("e0d8"),u=n("3842"),c=n("9d57"),l=c.prepareLayoutBarSeries,h=c.makeColumnLayout,f=c.retrieveColumnLayout,d=n("9850");function p(t,e){var n,r,o,a=t.type,s=e.getMin(),c=e.getMax(),f=t.getExtent();"ordinal"===a?n=e.getCategories().length:(r=e.get("boundaryGap"),i.isArray(r)||(r=[r||0,r||0]),"boolean"===typeof r[0]&&(r=[0,0]),r[0]=u.parsePercent(r[0],1),r[1]=u.parsePercent(r[1],1),o=f[1]-f[0]||Math.abs(f[0])),"dataMin"===s?s=f[0]:"function"===typeof s&&(s=s({min:f[0],max:f[1]})),"dataMax"===c?c=f[1]:"function"===typeof c&&(c=c({min:f[0],max:f[1]}));var d=null!=s,p=null!=c;null==s&&(s="ordinal"===a?n?0:NaN:f[0]-r[0]*o),null==c&&(c="ordinal"===a?n?n-1:NaN:f[1]+r[1]*o),(null==s||!isFinite(s))&&(s=NaN),(null==c||!isFinite(c))&&(c=NaN),t.setBlank(i.eqNaN(s)||i.eqNaN(c)||"ordinal"===a&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(s>0&&c>0&&!d&&(s=0),s<0&&c<0&&!p&&(c=0));var m=e.ecModel;if(m&&"time"===a){var v,y=l("bar",m);if(i.each(y,(function(t){v|=t.getBaseAxis()===e.axis})),v){var b=h(y),x=g(s,c,e,b);s=x.min,c=x.max}}return{extent:[s,c],fixMin:d,fixMax:p}}function g(t,e,n,r){var o=n.axis.getExtent(),a=o[1]-o[0],s=f(r,n.axis);if(void 0===s)return{min:t,max:e};var u=1/0;i.each(s,(function(t){u=Math.min(t.offset,u)}));var c=-1/0;i.each(s,(function(t){c=Math.max(t.offset+t.width,c)})),u=Math.abs(u),c=Math.abs(c);var l=u+c,h=e-t,d=1-(u+c)/a,p=h/d-h;return e+=p*(c/l),t-=p*(u/l),{min:t,max:e}}function m(t,e){var n=p(t,e),r=n.extent,i=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var o=t.type;t.setExtent(r[0],r[1]),t.niceExtent({splitNumber:i,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===o||"time"===o?e.get("minInterval"):null,maxInterval:"interval"===o||"time"===o?e.get("maxInterval"):null});var a=e.get("interval");null!=a&&t.setInterval&&t.setInterval(a)}function v(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new o(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-1/0]);case"value":return new a;default:return(s.getClass(e)||a).create(t)}}function y(t){var e=t.scale.getExtent(),n=e[0],r=e[1];return!(n>0&&r>0||n<0&&r<0)}function b(t){var e=t.getLabelModel().get("formatter"),n="category"===t.type?t.scale.getExtent()[0]:null;return"string"===typeof e?(e=function(e){return function(n){return n=t.scale.getLabel(n),e.replace("{value}",null!=n?n:"")}}(e),e):"function"===typeof e?function(r,i){return null!=n&&(i=r-n),e(x(t,r),i)}:function(e){return t.scale.getLabel(e)}}function x(t,e){return"category"===t.type?t.scale.getLabel(e):e}function w(t){var e=t.model,n=t.scale;if(e.get("axisLabel.show")&&!n.isBlank()){var r,i,o="category"===t.type,a=n.getExtent();o?i=n.count():(r=n.getTicks(),i=r.length);var s,u=t.getLabelModel(),c=b(t),l=1;i>40&&(l=Math.ceil(i/40));for(var h=0;h<i;h+=l){var f=r?r[h]:a[0]+h,d=c(f),p=u.getTextRect(d),g=_(p,u.get("rotate")||0);s?s.union(g):s=g}return s}}function _(t,e){var n=e*Math.PI/180,r=t.plain(),i=r.width,o=r.height,a=i*Math.cos(n)+o*Math.sin(n),s=i*Math.sin(n)+o*Math.cos(n),u=new d(r.x,r.y,a,s);return u}function O(t){var e=t.get("interval");return null==e?"auto":e}function S(t){return"category"===t.type&&0===O(t.getLabelModel())}n("216a"),n("8c2a"),e.getScaleExtent=p,e.niceScaleExtent=m,e.createScaleByModel=v,e.ifAxisCrossZero=y,e.makeLabelFormatter=b,e.getAxisRawValue=x,e.estimateLabelUnionRect=w,e.getOptionCategoryInterval=O,e.shouldShowAllLabels=S},"697e7":function(t,e,n){var r=n("de00"),i=n("22d1"),o=n("6d8b"),a=n("d2cf"),s=n("afa0"),u=n("ed21"),c=n("30a3"),l=n("cdaa"),h=!i.canvasSupported,f={canvas:u},d={},p="4.3.1";function g(t,e){var n=new x(r(),t,e);return d[n.id]=n,n}function m(t){if(t)t.dispose();else{for(var e in d)d.hasOwnProperty(e)&&d[e].dispose();d={}}return this}function v(t){return d[t]}function y(t,e){f[t]=e}function b(t){delete d[t]}var x=function(t,e,n){n=n||{},this.dom=e,this.id=t;var r=this,u=new s,d=n.renderer;if(h){if(!f.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");d="vml"}else d&&f[d]||(d="canvas");var p=new f[d](e,u,n,t);this.storage=u,this.painter=p;var g=i.node||i.worker?null:new l(p.getViewportRoot(),p.root);this.handler=new a(u,p,g,p.root),this.animation=new c({stage:{update:o.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var m=u.delFromStorage,v=u.addToStorage;u.delFromStorage=function(t){m.call(u,t),t&&t.removeSelfFromZr(r)},u.addToStorage=function(t){v.call(u,t),t.addSelfToZr(r)}};x.prototype={constructor:x,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var n=this.painter.addHover(t,e);return this.refreshHover(),n}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,b(this.id)}},e.version=p,e.init=g,e.dispose=m,e.getInstance=v,e.registerPainter=y},"69f3":function(t,e,n){var r,i,o,a=n("7f9a"),s=n("da84"),u=n("861d"),c=n("9112"),l=n("5135"),h=n("f772"),f=n("d012"),d=s.WeakMap,p=function(t){return o(t)?i(t):r(t,{})},g=function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(a){var m=new d,v=m.get,y=m.has,b=m.set;r=function(t,e){return b.call(m,t,e),e},i=function(t){return v.call(m,t)||{}},o=function(t){return y.call(m,t)}}else{var x=h("state");f[x]=!0,r=function(t,e){return c(t,x,e),e},i=function(t){return l(t,x)?t[x]:{}},o=function(t){return l(t,x)}}t.exports={set:r,get:i,has:o,enforce:p,getterFor:g}},"69ff":function(t,e,n){var r=n("6d8b"),i=r.each,o=r.map,a=r.isFunction,s=r.createHashMap,u=r.noop,c=n("f47d"),l=c.createTask,h=n("8918"),f=h.getUID,d=n("7e63"),p=n("843e"),g=n("e0d3"),m=g.normalizeToArray;function v(t,e,n,r){this.ecInstance=t,this.api=e,this.unfinished;n=this._dataProcessorHandlers=n.slice(),r=this._visualHandlers=r.slice();this._allHandlers=n.concat(r),this._stageTaskMap=s()}var y=v.prototype;function b(t,e,n,r,o){var a;function s(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}o=o||{},i(e,(function(e,i){if(!o.visualType||o.visualType===e.visualType){var u=t._stageTaskMap.get(e.uid),c=u.seriesTaskMap,l=u.overallTask;if(l){var h,f=l.agentStubMap;f.each((function(t){s(o,t)&&(t.dirty(),h=!0)})),h&&l.dirty(),x(l,r);var d=t.getPerformArgs(l,o.block);f.each((function(t){t.perform(d)})),a|=l.perform(d)}else c&&c.each((function(i,u){s(o,i)&&i.dirty();var c=t.getPerformArgs(i,o.block);c.skip=!e.performRawSeries&&n.isSeriesFiltered(i.context.model),x(i,r),a|=i.perform(c)}))}})),t.unfinished|=a}y.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each((function(t){var e=t.overallTask;e&&e.dirty()}))},y.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),r=n.context,i=!e&&n.progressiveEnabled&&(!r||r.progressiveRender)&&t.__idxInPipeline>n.blockIndex,o=i?n.step:null,a=r&&r.modDataCount,s=null!=a?Math.ceil(a/o):null;return{step:o,modBy:s,modDataCount:a}}},y.getPipeline=function(t){return this._pipelineMap.get(t)},y.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),r=t.getData(),i=r.count(),o=n.progressiveEnabled&&e.incrementalPrepareRender&&i>=n.threshold,a=t.get("large")&&i>=t.get("largeThreshold"),s="mod"===t.get("progressiveChunkMode")?i:null;t.pipelineContext=n.context={progressiveRender:o,modDataCount:s,large:a}},y.restorePipelines=function(t){var e=this,n=e._pipelineMap=s();t.eachSeries((function(t){var r=t.getProgressive(),i=t.uid;n.set(i,{id:i,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:r&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(r||700),count:0}),M(e,t,t.dataTask)}))},y.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.ecInstance.getModel(),n=this.api;i(this._allHandlers,(function(r){var i=t.get(r.uid)||t.set(r.uid,[]);r.reset&&w(this,r,i,e,n),r.overallReset&&_(this,r,i,e,n)}),this)},y.prepareView=function(t,e,n,r){var i=t.renderTask,o=i.context;o.model=e,o.ecModel=n,o.api=r,i.__block=!t.incrementalPrepareRender,M(this,e,i)},y.performDataProcessorTasks=function(t,e){b(this,this._dataProcessorHandlers,t,e,{block:!0})},y.performVisualTasks=function(t,e,n){b(this,this._visualHandlers,t,e,n)},y.performSeriesTasks=function(t){var e;t.eachSeries((function(t){e|=t.dataTask.perform()})),this.unfinished|=e},y.plan=function(){this._pipelineMap.each((function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)}))};var x=y.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)};function w(t,e,n,r,i){var o=n.seriesTaskMap||(n.seriesTaskMap=s()),a=e.seriesType,u=e.getTargetSeries;function c(n){var a=n.uid,s=o.get(a)||o.set(a,l({plan:A,reset:T,count:D}));s.context={model:n,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:t},M(t,n,s)}e.createOnAllSeries?r.eachRawSeries(c):a?r.eachRawSeriesByType(a,c):u&&u(r,i).each(c);var h=t._pipelineMap;o.each((function(t,e){h.get(e)||(t.dispose(),o.removeKey(e))}))}function _(t,e,n,r,o){var a=n.overallTask=n.overallTask||l({reset:O});a.context={ecModel:r,api:o,overallReset:e.overallReset,scheduler:t};var u=a.agentStubMap=a.agentStubMap||s(),c=e.seriesType,h=e.getTargetSeries,f=!0,d=e.modifyOutputEnd;function p(e){var n=e.uid,r=u.get(n);r||(r=u.set(n,l({reset:S,onDirty:k})),a.dirty()),r.context={model:e,overallProgress:f,modifyOutputEnd:d},r.agent=a,r.__block=f,M(t,e,r)}c?r.eachRawSeriesByType(c,p):h?h(r,o).each(p):(f=!1,i(r.getSeries(),p));var g=t._pipelineMap;u.each((function(t,e){g.get(e)||(t.dispose(),a.dirty(),u.removeKey(e))}))}function O(t){t.overallReset(t.ecModel,t.api,t.payload)}function S(t,e){return t.overallProgress&&C}function C(){this.agent.dirty(),this.getDownstream().dirty()}function k(){this.agent&&this.agent.dirty()}function A(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function T(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=m(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?o(e,(function(t,e){return j(e)})):E}var E=j(0);function j(t){return function(e,n){var r=n.data,i=n.resetDefines[t];if(i&&i.dataEach)for(var o=e.start;o<e.end;o++)i.dataEach(r,o);else i&&i.progress&&i.progress(e,r)}}function D(t){return t.data.count()}function M(t,e,n){var r=e.uid,i=t._pipelineMap.get(r);!i.head&&(i.head=n),i.tail&&i.tail.pipe(n),i.tail=n,n.__idxInPipeline=i.count++,n.__pipeline=i}function N(t){I=null;try{t(R,F)}catch(e){}return I}v.wrapStageHandler=function(t,e){return a(t)&&(t={overallReset:t,seriesType:N(t)}),t.uid=f("stageHandler"),e&&(t.visualType=e),t};var I,R={},F={};function P(t,e){for(var n in e.prototype)t[n]=u}P(R,d),P(F,p),R.eachSeriesByType=R.eachRawSeriesByType=function(t){I=t},R.eachComponent=function(t){"series"===t.mainType&&t.subType&&(I=t.subType)};var $=v;t.exports=$},"6ae2":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n("b333"),i=n("f490"),o=n("c05b"),a=n("73b8"),s=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class u{constructor(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new l)}profileKernel(t,e,n){let r;const i=()=>{r=n()},o=this.backendTimer.time(i);r.map(e=>{e.data().then(n=>{c(n,e.dtype,t)})});const a={kernelName:t,outputs:r,inputs:e,timeMs:o.then(t=>t.kernelMs),extraInfo:o.then(t=>null!=t.getExtraProfileInfo?t.getExtraProfileInfo():"")};return a}logKernelProfile(t){const{kernelName:e,outputs:n,timeMs:r,inputs:i,extraInfo:o}=t;n.forEach(t=>{Promise.all([t.data(),r,o]).then(n=>{this.logger.logKernelProfile(e,t,n[0],n[1],i,n[2])})})}}function c(t,e,n){if("float32"!==e)return!1;for(let r=0;r<t.length;r++){const e=t[r];if(isNaN(e)||!isFinite(e))return console.warn(`Found ${e} in the result of '${n}'`),!0}return!1}class l{logKernelProfile(t,e,n,r,i,o){const a="number"===typeof r?s["rightPad"](r+"ms",9):r["error"],u=s["rightPad"](t,25),c=e.rank,l=e.size,h=s["rightPad"](e.shape.toString(),14);let f="";for(const s in i){const t=i[s];if(null!=t){const n=t.shape||e.shape,r=n.length;f+=`${s}: ${r}D ${r>0?n:""} `}}console.log(`%c${u}\t%c${a}\t%c${c}D ${h}\t%c${l}\t%c${f}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h(t,e,n){const r={},i={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const n=t[u],o=n.inputs;for(const t in o){const a=o[t];let s=!1;for(let t=0;t<e.length;t++)if(r[a.id]){n.outputs.forEach(t=>r[t.id]=!0),s=!0,i[n.id]=!0;break}if(s)break}}const o={};o[n.id]=!0;const a={};for(let u=t.length-1;u>=0;u--){const e=t[u],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(o[e.outputs[t].id]){for(const t in n)o[n[t].id]=!0,a[e.id]=!0;break}}const s=[];for(let u=0;u<t.length;u++){const e=t[u];if(i[e.id]&&a[e.id]){const t={};for(const i in e.inputs){const n=e.inputs[i];r[n.id]&&(t[i]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,s.push(n)}}return s}function f(t,e,n,r){for(let i=e.length-1;i>=0;i--){const o=e[i],a=[];if(o.outputs.forEach(e=>{const n=t[e.id];null!=n?a.push(n):a.push(null)}),null==o.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const u=o.gradient(a);for(const e in o.inputs){if(!(e in u))throw new Error(`Cannot backprop through input ${e}. Available gradients found: ${Object.keys(u)}.`);const i=n(()=>u[e]());if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${e} must have 'float32' dtype, but has '${i.dtype}'`);const a=o.inputs[e];if(!s["arraysEqual"](i.shape,a.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${e}' has shape '${i.shape}', which does not match the shape of the input '${a.shape}'`);if(null==t[a.id])t[a.id]=i;else{const e=t[a.id];t[a.id]=r(e,i),e.dispose()}}}}var d=n("34d7"),p=n("76c2");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class g{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class m{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new g}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],r=await this.initializeBackend(n).success;if(r)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;{const{asyncInit:e}=this.initializeBackend(t);if(e)return null}}return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,n=1){return t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}async setBackend(t){if(null==this.registryFactory[t])throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,null==this.registry[t]){this.backendInstance=null;const{success:e,asyncInit:n}=this.initializeBackend(t),r=n?await e:e;if(!r)return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new u(this.backendInstance),!0}setupRegisteredKernels(){const t=Object(a["c"])(this.backendName);t.forEach(t=>{null!=t.setupFunc&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){const e=Object(a["c"])(t);e.forEach(e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])})}initializeBackend(t){const e=this.registryFactory[t];if(null==e)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const n=e.factory();if(Promise.resolve(n)===n){const e=++this.pendingBackendInitId,r=n.then(n=>!(e<this.pendingBackendInitId)&&(this.registry[t]=n,this.pendingBackendInit=null,!0)).catch(n=>(e<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}return this.registry[t]=n,{success:!0,asyncInit:!1}}catch(n){return console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const n=this.state.tensorInfo.get(e),r=n.backend,i=this.readSync(e);r.disposeData(e),n.backend=t,t.move(e,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let n,r=null;if(null==e){if("function"!==typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!==typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=e(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(t,e,n){t();try{const t=n();return e(),t}catch(r){throw e(),r}}nextTensorId(){return m.nextTensorId++}nextVariableId(){return m.nextVariableId++}clone(t){const e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),n={x:t},r=t=>({x:()=>{const e="float32",n={x:t},r={dtype:e};return b.runKernelFunc(n=>n.cast(t,e),n,null,o["v"],r)}}),i=[];return this.addTapeNode(this.state.activeScope.name,n,[e],r,i,{}),e}runKernel(t,e,n,r,i){const o=null,a=null;return this.runKernelFunc(o,e,a,t,n,r,i)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,n){const r=this.backend.numDataIds();let i=0;n.forEach(t=>{i+="complex64"===t.dtype?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-e-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${t}'`)}runKernelFunc(t,e,n,r,i,o,s){let u,c=[];const l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");const h=this.state.numBytes,f=this.state.numTensors;let d;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const p=Object(a["b"])(r,this.backendName);let g,m;if(null!=p)d=()=>{const t=this.backend.numDataIds();g=p.kernelFunc({inputs:e,attrs:i,backend:this.backend});const n=Array.isArray(g)?g:[g];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(r,t,n);const a=n.map(({dataId:t,shape:e,dtype:n})=>this.makeTensorFromDataId(t,e,n));if(l){let t=this.getTensorsForGradient(r,e,a);if(null==t){null==s&&(s=[]);const e=a.filter((t,e)=>s[e]);t=(o||[]).slice().concat(e)}c=this.saveTensorsForBackwardMode(t)}return a};else{const e=t=>{l&&(c=t.map(t=>this.keep(this.clone(t))))};d=()=>{const n=this.backend.numDataIds();g=this.tidy(()=>t(this.backend,e));const i=Array.isArray(g)?g:[g];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(r,n,i),i}}return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(m=this.profiler.profileKernel(r,e,()=>d()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),u=m.outputs):u=d()}),l&&this.addTapeNode(r,e,u,n,c,i),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-h,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-f,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(t=>null!=e[t]?e[t].shape:null),outputShapes:u.map(t=>t.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(g)?u:u[0]}saveTensorsForBackwardMode(t){const e=t.map(t=>this.keep(this.clone(t)));return e}getTensorsForGradient(t,e,n){const r=Object(a["a"])(t);if(null!=r){const t=r.inputsToSave||[],i=r.outputsToSave||[];let o;r.saveAllInputs?(s["assert"](Array.isArray(e),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(e).map(t=>e[t])):o=t.map(t=>e[t]);const a=n.filter((t,e)=>i[e]);return o.concat(a)}return null}makeTensor(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=t;"string"===n&&s["isString"](t[0])&&(i=t.map(t=>s["encodeString"](t)));const o=r.write(i,e,n),a=new d["a"](e,n,o,this.nextTensorId());if(this.incRef(a,r),"string"===n){const t=this.state.tensorInfo.get(o),e=Object(s["bytesFromStringArray"])(i);this.state.numBytes+=e-t.bytes,t.bytes=e}return a}makeTensorFromDataId(t,e,n,r){n=n||"float32";const i=new d["a"](e,n,t,this.nextTensorId());return this.incRef(i,r),i}makeVariable(t,e=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));const i=new d["c"](t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}incRef(t,e){const n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;let n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*s["bytesPerElement"](t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n,refCount:0}),this.state.numBytes+=n}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof d["c"]||this.track(t)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;const e=this.state.tensorInfo.get(t.dataId),n=e.refCount;n<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}disposeVariables(){for(const t in this.state.registeredVariables){const e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(t=>t.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(t,e,n,r,i,o){const u={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:i},c=Object(a["a"])(t);null!=c&&(r=c.gradFunc),null!=r&&(u.gradient=t=>(t=t.map((t,e)=>{if(null==t){const t=n[e],r=s["makeZerosTypedArray"](t.size,t.dtype);return this.makeTensor(r,t.shape,t.dtype)}return t}),r(t.length>1?t:t[0],i,o))),this.state.activeTape.push(u)}keep(t){return t.kept=!0,t}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=Object(p["getTensorsInContainer"])(t),n=new Set(e.map(t=>t.id));for(let i=0;i<this.state.activeScope.track.length;i++){const t=this.state.activeScope.track[i];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach(t=>{t.kept||t.scopeId!==r.id||this.track(t)})}gradients(t,e,n,r=!1){if(s["assert"](e.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));s["assert"](i instanceof d["a"],()=>"The result y returned by f() must be a tensor.");const o=h(this.state.activeTape,e,i);if(!r&&0===o.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const t={};t[i.id]=null==n?v(i.shape):n,f(t,o,t=>this.tidy(t),x);const r=e.map(e=>t[e.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(t=>{for(const e of t.saved)e.dispose()}),this.state.activeTape=null),{value:i,grads:r}})}customGrad(t){return s["assert"](s["isFunction"](t),()=>"The f passed in customGrad(f) must be a function."),(...e)=>{let n;s["assert"](e.every(t=>t instanceof d["a"]),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};return e.forEach((t,e)=>{r[e]=t}),this.runKernelFunc((r,i)=>(n=t(...e,i),s["assert"](n.value instanceof d["a"],()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),s["assert"](s["isFunction"](n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),r,(t,r)=>{const i=n.gradFunc(t,r),o=Array.isArray(i)?i:[i];s["assert"](o.length===e.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),s["assert"](o.every(t=>t instanceof d["a"]),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const a={};return o.forEach((t,e)=>{a[e]=()=>t}),a})}}readSync(t){const e=this.state.tensorInfo.get(t);return e.backend.readSync(t)}read(t){const e=this.state.tensorInfo.get(t);return e.backend.read(t)}async time(t){const e=Object(s["now"])(),n=await this.backend.time(t);return n.wallMs=Object(s["now"])()-e,n}track(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new g;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function v(t){const e=Object(s["makeOnesTypedArray"])(Object(s["sizeFromShape"])(t),"float32");return b.makeTensor(e,t,"float32")}function y(){const t=Object(i["b"])();if(null==t._tfengine){const e=new r["b"](t);t._tfengine=new m(e)}return Object(r["d"])(t._tfengine.ENV),Object(d["f"])(()=>t._tfengine),t._tfengine}m.nextTensorId=0,m.nextVariableId=0;const b=y();function x(t,e){const n={a:t,b:e};return b.runKernelFunc((n,r)=>{const i=n.add(t,e);return r([t,e]),i},n,null,o["d"])}},"6b6b":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("8e47"),o=n("5629");function a(t,e,n){return r(this,void 0,void 0,(function*(){const r=i.getDrawArea(t),a=["Class","Accuracy","# Samples"],s=[];for(let t=0;t<e.length;t++){const r=n?n[t]:t.toString(),i=e[t];s.push([r,i.accuracy,i.count])}return o.table(r,{headers:a,values:s})}))}e.showPerClassAccuracy=a},"6b78":function(t,e,n){const r=n("a236"),i=n("4392"),o=(t,e)=>{if(i(t,e))return null;{const n=r(t),i=r(e),o=n.prerelease.length||i.prerelease.length,a=o?"pre":"",s=o?"prerelease":"";for(const t in n)if(("major"===t||"minor"===t||"patch"===t)&&n[t]!==i[t])return a+t;return s}};t.exports=o},"6bd5":function(t,e,n){"use strict";
/** @license See the LICENSE file. */Object.defineProperty(e,"__esModule",{value:!0});const r="1.4.3";e.version=r},"6cb7":function(t,e,n){var r=n("6d8b"),i=n("4319"),o=n("8918"),a=n("625e"),s=a.enableClassManagement,u=a.parseClassType,c=n("e0d3"),l=c.makeInner,h=n("f934"),f=n("de1c"),d=l(),p=i.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,n,r){i.call(this,t,e,n,r),this.uid=o.getUID("ec_cpt_model")},init:function(t,e,n,r){this.mergeDefaultAndTheme(t,n)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?h.getLayoutParams(t):{},o=e.getTheme();r.merge(t,o.get(this.mainType)),r.merge(t,this.getDefaultOption()),n&&h.mergeLayoutParam(t,i,n)},mergeOption:function(t,e){r.merge(this.option,t,!0);var n=this.layoutMode;n&&h.mergeLayoutParam(this.option,t,n)},optionUpdated:function(t,e){},getDefaultOption:function(){var t=d(this);if(!t.defaultOption){var e=[],n=this.constructor;while(n){var i=n.prototype.defaultOption;i&&e.push(i),n=n.superClass}for(var o={},a=e.length-1;a>=0;a--)o=r.merge(o,e[a],!0);t.defaultOption=o}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});function g(t){var e=[];return r.each(p.getClassesByMainType(t),(function(t){e=e.concat(t.prototype.dependencies||[])})),e=r.map(e,(function(t){return u(t).main})),"dataset"!==t&&r.indexOf(e,"dataset")<=0&&e.unshift("dataset"),e}s(p,{registerWhenExtend:!0}),o.enableSubTypeDefaulter(p),o.enableTopologicalTravel(p,g),r.mixin(p,f);var m=p;t.exports=m},"6d43":function(t,e,n){const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof i){if(t.loose===!!e.loose)return t;t=t.value}u("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(t){const e=this.options.loose?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],n=t.match(e);if(!n)throw new TypeError("Invalid comparator: "+t);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new c(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(t){if(u("Comparator.test",t,this.options.loose),this.semver===r||t===r)return!0;if("string"===typeof t)try{t=new c(t,this.options)}catch(e){return!1}return s(t,this.operator,this.semver,this.options)}intersects(t,e){if(!(t instanceof i))throw new TypeError("a Comparator is required");if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),""===this.operator)return""===this.value||new l(t.value,e).test(this.value);if(""===t.operator)return""===t.value||new l(this.value,e).test(t.semver);const n=(">="===this.operator||">"===this.operator)&&(">="===t.operator||">"===t.operator),r=("<="===this.operator||"<"===this.operator)&&("<="===t.operator||"<"===t.operator),o=this.semver.version===t.semver.version,a=(">="===this.operator||"<="===this.operator)&&(">="===t.operator||"<="===t.operator),u=s(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),c=s(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return n||r||o&&a||u||c}}t.exports=i;const{re:o,t:a}=n("8cb5"),s=n("c4be"),u=n("b802"),c=n("bbfd"),l=n("3fce")},"6d8b":function(t,e){var n={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},r={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},i=Object.prototype.toString,o=Array.prototype,a=o.forEach,s=o.filter,u=o.slice,c=o.map,l=o.reduce,h={};function f(t,e){"createCanvas"===t&&(y=null),h[t]=e}function d(t){if(null==t||"object"!==typeof t)return t;var e=t,o=i.call(t);if("[object Array]"===o){if(!Y(t)){e=[];for(var a=0,s=t.length;a<s;a++)e[a]=d(t[a])}}else if(r[o]){if(!Y(t)){var u=t.constructor;if(t.constructor.from)e=u.from(t);else{e=new u(t.length);for(a=0,s=t.length;a<s;a++)e[a]=d(t[a])}}}else if(!n[o]&&!Y(t)&&!$(t))for(var c in e={},t)t.hasOwnProperty(c)&&(e[c]=d(t[c]));return e}function p(t,e,n){if(!R(e)||!R(t))return n?d(e):t;for(var r in e)if(e.hasOwnProperty(r)){var i=t[r],o=e[r];!R(o)||!R(i)||M(o)||M(i)||$(o)||$(i)||F(o)||F(i)||Y(o)||Y(i)?!n&&r in t||(t[r]=d(e[r],!0)):p(i,o,n)}return t}function g(t,e){for(var n=t[0],r=1,i=t.length;r<i;r++)n=p(n,t[r],e);return n}function m(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function v(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(n?null!=e[r]:null==t[r])&&(t[r]=e[r]);return t}var y,b=function(){return h.createCanvas()};function x(){return y||(y=b().getContext("2d")),y}function w(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1}function _(t,e){var n=t.prototype;function r(){}for(var i in r.prototype=e.prototype,t.prototype=new r,n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.prototype.constructor=t,t.superClass=e}function O(t,e,n){t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,v(t,e,n)}function S(t){if(t)return"string"!==typeof t&&"number"===typeof t.length}function C(t,e,n){if(t&&e)if(t.forEach&&t.forEach===a)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function k(t,e,n){if(t&&e){if(t.map&&t.map===c)return t.map(e,n);for(var r=[],i=0,o=t.length;i<o;i++)r.push(e.call(n,t[i],i,t));return r}}function A(t,e,n,r){if(t&&e){if(t.reduce&&t.reduce===l)return t.reduce(e,n,r);for(var i=0,o=t.length;i<o;i++)n=e.call(r,n,t[i],i,t);return n}}function T(t,e,n){if(t&&e){if(t.filter&&t.filter===s)return t.filter(e,n);for(var r=[],i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}}function E(t,e,n){if(t&&e)for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return t[r]}function j(t,e){var n=u.call(arguments,2);return function(){return t.apply(e,n.concat(u.call(arguments)))}}function D(t){var e=u.call(arguments,1);return function(){return t.apply(this,e.concat(u.call(arguments)))}}function M(t){return"[object Array]"===i.call(t)}function N(t){return"function"===typeof t}function I(t){return"[object String]"===i.call(t)}function R(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function F(t){return!!n[i.call(t)]}function P(t){return!!r[i.call(t)]}function $(t){return"object"===typeof t&&"number"===typeof t.nodeType&&"object"===typeof t.ownerDocument}function L(t){return t!==t}function z(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]}function B(t,e){return null!=t?t:e}function U(t,e,n){return null!=t?t:null!=e?e:n}function W(){return Function.call.apply(u,arguments)}function V(t){if("number"===typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function H(t,e){if(!t)throw new Error(e)}function q(t){return null==t?null:"function"===typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}h.createCanvas=function(){return document.createElement("canvas")};var G="__ec_primitive__";function X(t){t[G]=!0}function Y(t){return t[G]}function K(t){var e=M(t);this.data={};var n=this;function r(t,r){e?n.set(t,r):n.set(r,t)}t instanceof K?t.each(r):t&&C(t,r)}function Z(t){return new K(t)}function J(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];var i=t.length;for(r=0;r<e.length;r++)n[r+i]=e[r];return n}function Q(){}K.prototype={constructor:K,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=j(t,e)),this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}},e.$override=f,e.clone=d,e.merge=p,e.mergeAll=g,e.extend=m,e.defaults=v,e.createCanvas=b,e.getContext=x,e.indexOf=w,e.inherits=_,e.mixin=O,e.isArrayLike=S,e.each=C,e.map=k,e.reduce=A,e.filter=T,e.find=E,e.bind=j,e.curry=D,e.isArray=M,e.isFunction=N,e.isString=I,e.isObject=R,e.isBuiltInObject=F,e.isTypedArray=P,e.isDom=$,e.eqNaN=L,e.retrieve=z,e.retrieve2=B,e.retrieve3=U,e.slice=W,e.normalizeCssArray=V,e.assert=H,e.trim=q,e.setAsPrimitive=X,e.isPrimitive=Y,e.createHashMap=Z,e.concatArray=J,e.noop=Q},"6e78":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function i(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var o=["Webkit","ms","Moz","O"];Object.keys(r).forEach((function(t){o.forEach((function(e){r[i(e,t)]=r[t]}))}));var a={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:r,shorthandPropertyExpansions:a};e.default=s},"6eeb":function(t,e,n){var r=n("da84"),i=n("9112"),o=n("5135"),a=n("ce4e"),s=n("8925"),u=n("69f3"),c=u.get,l=u.enforce,h=String(String).split("String");(t.exports=function(t,e,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),l(n).source=h.join("string"==typeof e?e:"")),t!==r?(u?!f&&t[e]&&(c=!0):delete t[e],c?t[e]=n:i(t,e,n)):c?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},"6f53":function(t,e,n){var r=n("83ab"),i=n("df75"),o=n("fc6a"),a=n("d1e7").f,s=function(t){return function(e){var n,s=o(e),u=i(s),c=u.length,l=0,h=[];while(c>l)n=u[l++],r&&!a.call(s,n)||h.push(t?[n,s[n]]:s[n]);return h}};t.exports={entries:s(!0),values:s(!1)}},"6fa7":function(t,e,n){const r=n("1cc6"),i=(t,e)=>t.sort((t,n)=>r(n,t,e));t.exports=i},"70e1":function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l}));var r=n("b607");function i(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function o(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function a(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function s(t){var e=t.dateTime,n=t.date,s=t.time,u=t.periods,c=t.days,l=t.shortDays,h=t.months,d=t.shortMonths,p=y(u),g=b(u),m=y(c),v=b(c),_t=y(l),Ot=b(l),St=y(h),Ct=b(h),kt=y(d),At=b(d),Tt={a:Ut,A:Wt,b:Vt,B:Ht,c:null,d:L,e:L,f:V,H:z,I:B,j:U,L:W,m:H,M:q,p:qt,Q:xt,s:wt,S:G,u:X,U:Y,V:K,w:Z,W:J,x:null,X:null,y:Q,Y:tt,Z:et,"%":bt},Et={a:Gt,A:Xt,b:Yt,B:Kt,c:null,d:nt,e:nt,f:st,H:rt,I:it,j:ot,L:at,m:ut,M:ct,p:Zt,Q:xt,s:wt,S:lt,u:ht,U:ft,V:dt,w:pt,W:gt,x:null,X:null,y:mt,Y:vt,Z:yt,"%":bt},jt={a:Rt,A:Ft,b:Pt,B:$t,c:Lt,d:E,e:E,f:R,H:D,I:D,j:j,L:I,m:T,M:M,p:It,Q:P,s:$,S:N,u:w,U:_,V:O,w:x,W:S,x:zt,X:Bt,y:k,Y:C,Z:A,"%":F};function Dt(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;n instanceof Date||(n=new Date(+n));while(++s<c)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=f[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function Mt(t,e){return function(n){var i,s,u=a(1900),c=Nt(u,t,n+="",0);if(c!=n.length)return null;if("Q"in u)return new Date(u.Q);if("p"in u&&(u.H=u.H%12+12*u.p),"V"in u){if(u.V<1||u.V>53)return null;"w"in u||(u.w=1),"Z"in u?(i=o(a(u.y)),s=i.getUTCDay(),i=s>4||0===s?r["p"].ceil(i):Object(r["p"])(i),i=r["l"].offset(i,7*(u.V-1)),u.y=i.getUTCFullYear(),u.m=i.getUTCMonth(),u.d=i.getUTCDate()+(u.w+6)%7):(i=e(a(u.y)),s=i.getDay(),i=s>4||0===s?r["e"].ceil(i):Object(r["e"])(i),i=r["a"].offset(i,7*(u.V-1)),u.y=i.getFullYear(),u.m=i.getMonth(),u.d=i.getDate()+(u.w+6)%7)}else("W"in u||"U"in u)&&("w"in u||(u.w="u"in u?u.u%7:"W"in u?1:0),s="Z"in u?o(a(u.y)).getUTCDay():e(a(u.y)).getDay(),u.m=0,u.d="W"in u?(u.w+6)%7+7*u.W-(s+5)%7:u.w+7*u.U-(s+6)%7);return"Z"in u?(u.H+=u.Z/100|0,u.M+=u.Z%100,o(u)):e(u)}}function Nt(t,e,n,r){var i,o,a=0,s=e.length,u=n.length;while(a<s){if(r>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=jt[i in f?e.charAt(a++):i],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function It(t,e,n){var r=p.exec(e.slice(n));return r?(t.p=g[r[0].toLowerCase()],n+r[0].length):-1}function Rt(t,e,n){var r=_t.exec(e.slice(n));return r?(t.w=Ot[r[0].toLowerCase()],n+r[0].length):-1}function Ft(t,e,n){var r=m.exec(e.slice(n));return r?(t.w=v[r[0].toLowerCase()],n+r[0].length):-1}function Pt(t,e,n){var r=kt.exec(e.slice(n));return r?(t.m=At[r[0].toLowerCase()],n+r[0].length):-1}function $t(t,e,n){var r=St.exec(e.slice(n));return r?(t.m=Ct[r[0].toLowerCase()],n+r[0].length):-1}function Lt(t,n,r){return Nt(t,e,n,r)}function zt(t,e,r){return Nt(t,n,e,r)}function Bt(t,e,n){return Nt(t,s,e,n)}function Ut(t){return l[t.getDay()]}function Wt(t){return c[t.getDay()]}function Vt(t){return d[t.getMonth()]}function Ht(t){return h[t.getMonth()]}function qt(t){return u[+(t.getHours()>=12)]}function Gt(t){return l[t.getUTCDay()]}function Xt(t){return c[t.getUTCDay()]}function Yt(t){return d[t.getUTCMonth()]}function Kt(t){return h[t.getUTCMonth()]}function Zt(t){return u[+(t.getUTCHours()>=12)]}return Tt.x=Dt(n,Tt),Tt.X=Dt(s,Tt),Tt.c=Dt(e,Tt),Et.x=Dt(n,Et),Et.X=Dt(s,Et),Et.c=Dt(e,Et),{format:function(t){var e=Dt(t+="",Tt);return e.toString=function(){return t},e},parse:function(t){var e=Mt(t+="",i);return e.toString=function(){return t},e},utcFormat:function(t){var e=Dt(t+="",Et);return e.toString=function(){return t},e},utcParse:function(t){var e=Mt(t,o);return e.toString=function(){return t},e}}}var u,c,l,h,f={"-":"",_:" ",0:"0"},d=/^\s*\d+/,p=/^%/,g=/[\\^$*+?|[\]().{}]/g;function m(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function v(t){return t.replace(g,"\\$&")}function y(t){return new RegExp("^(?:"+t.map(v).join("|")+")","i")}function b(t){var e={},n=-1,r=t.length;while(++n<r)e[t[n].toLowerCase()]=n;return e}function x(t,e,n){var r=d.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function w(t,e,n){var r=d.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function _(t,e,n){var r=d.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function O(t,e,n){var r=d.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function S(t,e,n){var r=d.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function C(t,e,n){var r=d.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function k(t,e,n){var r=d.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function A(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function T(t,e,n){var r=d.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function E(t,e,n){var r=d.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function j(t,e,n){var r=d.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function D(t,e,n){var r=d.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function M(t,e,n){var r=d.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function N(t,e,n){var r=d.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function I(t,e,n){var r=d.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function R(t,e,n){var r=d.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function F(t,e,n){var r=p.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function P(t,e,n){var r=d.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function $(t,e,n){var r=d.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function L(t,e){return m(t.getDate(),e,2)}function z(t,e){return m(t.getHours(),e,2)}function B(t,e){return m(t.getHours()%12||12,e,2)}function U(t,e){return m(1+r["a"].count(Object(r["k"])(t),t),e,3)}function W(t,e){return m(t.getMilliseconds(),e,3)}function V(t,e){return W(t,e)+"000"}function H(t,e){return m(t.getMonth()+1,e,2)}function q(t,e){return m(t.getMinutes(),e,2)}function G(t,e){return m(t.getSeconds(),e,2)}function X(t){var e=t.getDay();return 0===e?7:e}function Y(t,e){return m(r["h"].count(Object(r["k"])(t),t),e,2)}function K(t,e){var n=t.getDay();return t=n>=4||0===n?Object(r["i"])(t):r["i"].ceil(t),m(r["i"].count(Object(r["k"])(t),t)+(4===Object(r["k"])(t).getDay()),e,2)}function Z(t){return t.getDay()}function J(t,e){return m(r["e"].count(Object(r["k"])(t),t),e,2)}function Q(t,e){return m(t.getFullYear()%100,e,2)}function tt(t,e){return m(t.getFullYear()%1e4,e,4)}function et(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+m(e/60|0,"0",2)+m(e%60,"0",2)}function nt(t,e){return m(t.getUTCDate(),e,2)}function rt(t,e){return m(t.getUTCHours(),e,2)}function it(t,e){return m(t.getUTCHours()%12||12,e,2)}function ot(t,e){return m(1+r["l"].count(Object(r["v"])(t),t),e,3)}function at(t,e){return m(t.getUTCMilliseconds(),e,3)}function st(t,e){return at(t,e)+"000"}function ut(t,e){return m(t.getUTCMonth()+1,e,2)}function ct(t,e){return m(t.getUTCMinutes(),e,2)}function lt(t,e){return m(t.getUTCSeconds(),e,2)}function ht(t){var e=t.getUTCDay();return 0===e?7:e}function ft(t,e){return m(r["s"].count(Object(r["v"])(t),t),e,2)}function dt(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Object(r["t"])(t):r["t"].ceil(t),m(r["t"].count(Object(r["v"])(t),t)+(4===Object(r["v"])(t).getUTCDay()),e,2)}function pt(t){return t.getUTCDay()}function gt(t,e){return m(r["p"].count(Object(r["v"])(t),t),e,2)}function mt(t,e){return m(t.getUTCFullYear()%100,e,2)}function vt(t,e){return m(t.getUTCFullYear()%1e4,e,4)}function yt(){return"+0000"}function bt(){return"%"}function xt(t){return+t}function wt(t){return Math.floor(+t/1e3)}function _t(t){return u=s(t),c=u.format,u.parse,l=u.utcFormat,h=u.utcParse,u}_t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ot="%Y-%m-%dT%H:%M:%S.%LZ";function St(t){return t.toISOString()}Date.prototype.toISOString||l(Ot);function Ct(t){var e=new Date(t);return isNaN(e)?null:e}+new Date("2000-01-01T00:00:00.000Z")||h(Ot)},"71ad":function(t,e,n){var r=n("6d8b"),i={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},o={};o.categoryAxis=r.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},i),o.valueAxis=r.merge({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},i),o.timeAxis=r.defaults({scale:!0,min:"dataMin",max:"dataMax"},o.valueAxis),o.logAxis=r.defaults({scale:!0,logBase:10},o.valueAxis);var a=o;t.exports=a},"734c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var r=n("473f"),i=c(r),o=n("b14b"),a=c(o),s=n("4856"),u=c(s);function c(t){return t&&t.__esModule?t:{default:t}}var l={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},h={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function f(t,e){if((0,a.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),r=0,o=n.length;r<o;++r){var s=n[r],u=[s];for(var c in e){var l=(0,i.default)(c);if(s.indexOf(l)>-1&&"order"!==l)for(var f=e[c],d=0,p=f.length;d<p;++d)u.unshift(s.replace(l,h[f[d]]+l))}n[r]=u.join(",")}return n.join(",")}function d(t,e,n,r){if("string"===typeof e&&l.hasOwnProperty(t)){var i=f(e,r),o=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(t){return!/-moz-|-ms-/.test(t)})).join(",");if(t.indexOf("Webkit")>-1)return o;var a=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(t){return!/-webkit-|-ms-/.test(t)})).join(",");return t.indexOf("Moz")>-1?a:(n["Webkit"+(0,u.default)(t)]=o,n["Moz"+(0,u.default)(t)]=a,i)}}t.exports=e["default"]},"73b8":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return h})),n.d(e,"g",(function(){return f})),n.d(e,"f",(function(){return d}));var r=n("b333"),i=n("f490");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const o=Object(i["a"])("kernelRegistry",()=>new Map),a=Object(i["a"])("gradRegistry",()=>new Map);function s(t,e){const n=p(t,e);return o.get(n)}function u(t){return a.get(t)}function c(t){const e=o.entries(),n=[];while(1){const{done:r,value:i}=e.next();if(r)break;const[o,a]=i,[s]=o.split("_");s===t&&n.push(a)}return n}function l(t){const{kernelName:e,backendName:n}=t,r=p(e,n);o.has(r)&&console.warn(`The kernel '${e}' for backend '${n}' is already registered`),o.set(r,t)}function h(t){const{kernelName:e}=t;a.has(e)&&Object(r["c"])().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${e}'`),a.set(e,t)}function f(t,e){const n=p(t,e);if(!o.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);o.delete(n)}function d(t){if(!a.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);a.delete(t)}function p(t,e){return`${e}_${t}`}},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),o=n("e538"),a=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},"74cb":function(t,e){var n={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r))},elasticOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-n.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*n.bounceIn(2*t):.5*n.bounceOut(2*t-1)+.5}},r=n;t.exports=r},"75f0":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0});const i=n("b4db"),o=n("df37"),a=n("bd67"),s=n("8756"),u=n("ce1a4"),c=n("0846"),l=n("5629"),h=n("e0fa"),f=n("67a2"),d=n("6b6b"),p=n("dad4"),g=n("4149"),m=n("6bd5");e.version_vis=m.version;const v={barchart:i.barchart,table:l.table,histogram:s.histogram,linechart:u.linechart,scatterplot:c.scatterplot,confusionMatrix:o.confusionMatrix,heatmap:a.heatmap};e.render=v;const y={accuracy:g.accuracy,perClassAccuracy:g.perClassAccuracy,confusionMatrix:g.confusionMatrix};e.metrics=y;const b={history:h.history,fitCallbacks:h.fitCallbacks,perClassAccuracy:d.showPerClassAccuracy,valuesDistribution:p.valuesDistribution,layer:f.layer,modelSummary:f.modelSummary};e.show=b;var x=n("2f09");e.visor=x.visor,r(n("b7e4"))},7638:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=n("4856"),i=o(r);function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){if(t.hasOwnProperty(e))for(var r=t[e],o=0,a=r.length;o<a;++o)n[r[o]+(0,i.default)(e)]=n[e]}t.exports=e["default"]},"76a5":function(t,e,n){var r=n("19eb"),i=n("6d8b"),o=n("e86a"),a=n("a73c"),s=n("82eb"),u=s.ContextCachedBy,c=function(t){r.call(this,t)};c.prototype={constructor:c,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&a.normalizeTextStyle(n,!0),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var r=n.text;null!=r&&(r+=""),a.needDrawText(r,n)?(this.setTransform(t),a.renderText(this,t,r,n,null,e),this.restoreTransform(t)):t.__attrCachedBy=u.NONE},getBoundingRect:function(){var t=this.style;if(this.__dirty&&a.normalizeTextStyle(t,!0),!this._rect){var e=t.text;null!=e?e+="":e="";var n=o.getBoundingRect(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,a.getStroke(t.textStroke,t.textStrokeWidth)){var r=t.textStrokeWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect}},i.inherits(c,r);var l=c;t.exports=l},"76c2":function(t,e,n){"use strict";n.r(e),n.d(e,"makeTypesMatch",(function(){return a})),n.d(e,"assertTypesMatch",(function(){return s})),n.d(e,"isTensorInList",(function(){return u})),n.d(e,"getTensorsInContainer",(function(){return c}));var r=n("34d7"),i=n("23bf"),o=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e){if(t.dtype===e.dtype)return[t,e];const n=Object(i["c"])(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function s(t,e){Object(o["assert"])(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function u(t,e){return e.some(e=>e.id===t.id)}function c(t){const e=[],n=new Set;return l(t,e,n),e}function l(t,e,n){if(null==t)return;if(t instanceof r["a"])return void e.push(t);if(!h(t))return;const i=t;for(const r in i){const t=i[r];n.has(t)||(n.add(t),l(t,e,n))}}function h(t){return Array.isArray(t)||"object"===typeof t}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a94":function(t,e,n){(function(t){
/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
var r=r||{version:"3.6.3"};if(e.fabric=r,"undefined"!==typeof document&&"undefined"!==typeof window)document instanceof("undefined"!==typeof HTMLDocument?HTMLDocument:Document)?r.document=document:r.document=document.implementation.createHTMLDocument(""),r.window=window;else{var i=n(1),o=new i.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;r.document=o.document,r.jsdomImplForWrapper=n(2).implForWrapper,r.nodeCanvas=n(3).Canvas,r.window=o,DOMParser=r.window.DOMParser}function a(t){var e=t.targetCanvas,n=e.width,r=e.height,i=t.destinationWidth,o=t.destinationHeight;n===i&&r===o||(e.width=i,e.height=o)}function s(t,e){var n=t.canvas,r=e.targetCanvas,i=r.getContext("2d");i.translate(0,r.height),i.scale(1,-1);var o=n.height-r.height;i.drawImage(n,0,o,r.width,r.height,0,0,r.width,r.height)}function u(t,e){var n=e.targetCanvas,r=n.getContext("2d"),i=e.destinationWidth,o=e.destinationHeight,a=i*o*4,s=new Uint8Array(this.imageBuffer,0,a),u=new Uint8ClampedArray(this.imageBuffer,0,a);t.readPixels(0,0,i,o,t.RGBA,t.UNSIGNED_BYTE,s);var c=new ImageData(u,i,o);r.putImageData(c,0,0)}r.isTouchSupported="ontouchstart"in r.window||"ontouchstart"in r.document||r.window&&r.window.navigator&&r.window.navigator.maxTouchPoints>0,r.isLikelyNode="undefined"!==typeof t&&"undefined"===typeof window,r.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],r.DPI=96,r.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",r.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,r.reNonWord=/[ \n\.,;!\?\-]/,r.fontPaths={},r.iMatrix=[1,0,0,1,0,0],r.svgNS="http://www.w3.org/2000/svg",r.perfLimitSizeTotal=2097152,r.maxCacheSideLimit=4096,r.minCacheSideLimit=256,r.charWidthsCache={},r.textureSize=2048,r.disableStyleCopyPaste=!1,r.enableGLFiltering=!0,r.devicePixelRatio=r.window.devicePixelRatio||r.window.webkitDevicePixelRatio||r.window.mozDevicePixelRatio||1,r.browserShadowBlurConstant=1,r.arcToSegmentsCache={},r.boundsOfCurveCache={},r.cachesBoundsOfCurve=!0,r.forceGLPutImageData=!1,r.initFilterBackend=function(){return r.enableGLFiltering&&r.isWebglSupported&&r.isWebglSupported(r.textureSize)?(console.log("max texture size: "+r.maxTextureSize),new r.WebglFilterBackend({tileSize:r.textureSize})):r.Canvas2dFilterBackend?new r.Canvas2dFilterBackend:void 0},"undefined"!==typeof document&&"undefined"!==typeof window&&(window.fabric=r),function(){function t(t,e){if(this.__eventListeners[t]){var n=this.__eventListeners[t];e?n[n.indexOf(e)]=!1:r.util.array.fill(n,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function n(e,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"===typeof arguments[0])for(var r in e)t.call(this,r,e[r]);else t.call(this,e,n);return this}function i(t,e){if(!this.__eventListeners)return this;var n=this.__eventListeners[t];if(!n)return this;for(var r=0,i=n.length;r<i;r++)n[r]&&n[r].call(this,e||{});return this.__eventListeners[t]=n.filter((function(t){return!1!==t})),this}r.Observable={observe:e,stopObserving:n,fire:i,on:e,off:n,trigger:i}}(),r.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,n){var r=this._objects;return n?r[e]=t:r.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,n=!1,r=0,i=arguments.length;r<i;r++)t=e.indexOf(arguments[r]),-1!==t&&(n=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),r=0,i=n.length;r<i;r++)t.call(e,n[r],r,n);return this},getObjects:function(t){return"undefined"===typeof t?this._objects.concat():this._objects.filter((function(e){return e.type===t}))},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t){return this._objects.indexOf(t)>-1},complexity:function(){return this._objects.reduce((function(t,e){return t+=e.complexity?e.complexity():0,t}),0)}},r.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof r.Gradient||this.set(e,new r.Gradient(t))},_initPattern:function(t,e,n){!t||!t.source||t instanceof r.Pattern?n&&n():this.set(e,new r.Pattern(t,n))},_initClipping:function(t){if(t.clipTo&&"string"===typeof t.clipTo){var e=r.util.getFunctionBody(t.clipTo);"undefined"!==typeof e&&(this.clipTo=new Function("ctx",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"===typeof t?this._setObject(t):"function"===typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"===typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,n=Math.atan2,i=Math.pow,o=Math.PI/180,a=Math.PI/2;r.util={cos:function(t){if(0===t)return 1;t<0&&(t=-t);var e=t/a;switch(e){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=t/a,n=1;switch(t<0&&(n=-1),e){case 1:return n;case 2:return 0;case 3:return-n}return Math.sin(t)},removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*o},radiansToDegrees:function(t){return t/o},rotatePoint:function(t,e,n){t.subtractEquals(e);var i=r.util.rotateVector(t,n);return new r.Point(i.x,i.y).addEquals(e)},rotateVector:function(t,e){var n=r.util.sin(e),i=r.util.cos(e),o=t.x*i-t.y*n,a=t.x*n+t.y*i;return{x:o,y:a}},transformPoint:function(t,e,n){return n?new r.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new r.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var n=0;n<t.length;n++)t[n]=r.util.transformPoint(t[n],e);var i=[t[0].x,t[1].x,t[2].x,t[3].x],o=r.util.array.min(i),a=r.util.array.max(i),s=a-o,u=[t[0].y,t[1].y,t[2].y,t[3].y],c=r.util.array.min(u),l=r.util.array.max(u),h=l-c;return{left:o,top:c,width:s,height:h}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),n=[e*t[3],-e*t[1],-e*t[2],e*t[0]],i=r.util.transformPoint({x:t[4],y:t[5]},n,!0);return n[4]=-i.x,n[5]=-i.y,n},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\D{0,2}$/.exec(t),i=parseFloat(t);switch(e||(e=r.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return i*r.DPI/25.4;case"cm":return i*r.DPI/2.54;case"in":return i*r.DPI;case"pt":return i*r.DPI/72;case"pc":return i*r.DPI/72*12;case"em":return i*e;default:return i}},falseFunction:function(){return!1},getKlass:function(t,e){return t=r.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),r.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"]);break}return e},resolveNamespace:function(e){if(!e)return r;var n,i=e.split("."),o=i.length,a=t||r.window;for(n=0;n<o;++n)a=a[i[n]];return a},loadImage:function(t,e,n,i){if(t){var o=r.util.createImage(),a=function(){e&&e.call(n,o),o=o.onload=o.onerror=null};o.onload=a,o.onerror=function(){r.log("Error loading "+o.src),e&&e.call(n,null,!0),o=o.onload=o.onerror=null},0!==t.indexOf("data")&&i&&(o.crossOrigin=i),"data:image/svg"===t.substring(0,14)&&(o.onload=null,r.util.loadImageInDom(o,a)),o.src=t}else e&&e.call(n,t)},loadImageInDom:function(t,e){var n=r.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(t),r.document.querySelector("body").appendChild(n),t.onload=function(){e(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(t,e,n,i){t=t||[];var o=[],a=0,s=t.length;function u(){++a===s&&e&&e(o.filter((function(t){return t})))}s?t.forEach((function(t,e){if(t&&t.type){var a=r.util.getKlass(t.type,n);a.fromObject(t,(function(n,r){r||(o[e]=n),i&&i(t,n,r),u()}))}else u()})):e&&e(o)},enlivenPatterns:function(t,e){function n(){++o===a&&e&&e(i)}t=t||[];var i=[],o=0,a=t.length;a?t.forEach((function(t,e){t&&t.source?new r.Pattern(t,(function(t){i[e]=t,n()})):(i[e]=t,n())})):e&&e(i)},groupSVGElements:function(t,e,n){var i;return t&&1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),i=new r.Group(t,e),"undefined"!==typeof n&&(i.sourcePath=n),i)},populateWithProperties:function(t,e,n){if(n&&"[object Array]"===Object.prototype.toString.call(n))for(var r=0,i=n.length;r<i;r++)n[r]in t&&(e[n[r]]=t[n[r]])},drawDashedLine:function(t,r,i,o,a,s){var u=o-r,c=a-i,l=e(u*u+c*c),h=n(c,u),f=s.length,d=0,p=!0;t.save(),t.translate(r,i),t.moveTo(0,0),t.rotate(h),r=0;while(l>r)r+=s[d++%f],r>l&&(r=l),t[p?"lineTo":"moveTo"](r,0),p=!p;t.restore()},createCanvasElement:function(){return r.document.createElement("canvas")},copyCanvasElement:function(t){var e=r.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,n){return t.toDataURL("image/"+e,n)},createImage:function(){return r.document.createElement("img")},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,n){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],n?0:t[0]*e[4]+t[2]*e[5]+t[4],n?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var r=n(t[1],t[0]),a=i(t[0],2)+i(t[1],2),s=e(a),u=(t[0]*t[3]-t[2]*t[1])/s,c=n(t[0]*t[2]+t[1]*t[3],a);return{angle:r/o,scaleX:s,scaleY:u,skewX:c/o,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return r.iMatrix.concat();var e=r.util.degreesToRadians(t.angle),n=r.util.cos(e),i=r.util.sin(e);return[n,i,-i,n,0,0]},calcDimensionsMatrix:function(t){var e="undefined"===typeof t.scaleX?1:t.scaleX,n="undefined"===typeof t.scaleY?1:t.scaleY,i=[t.flipX?-e:e,0,0,t.flipY?-n:n,0,0],o=r.util.multiplyTransformMatrices,a=r.util.degreesToRadians;return t.skewX&&(i=o(i,[1,0,Math.tan(a(t.skewX)),1],!0)),t.skewY&&(i=o(i,[1,Math.tan(a(t.skewY)),0,1],!0)),i},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],n=r.util.multiplyTransformMatrices;return t.angle&&(e=n(e,r.util.calcRotateMatrix(t))),(t.scaleX||t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=n(e,r.util.calcDimensionsMatrix(t))),e},customTransformMatrix:function(t,e,n){return r.util.composeMatrix({scaleX:t,scaleY:e,skewX:n})},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,n,r){r>0&&(e>r?e-=r:e=0,n>r?n-=r:n=0);var i,o,a=!0,s=t.getImageData(e,n,2*r||1,2*r||1),u=s.data.length;for(i=3;i<u;i+=4)if(o=s.data[i],a=o<=0,!1===a)break;return s=null,a},parsePreserveAspectRatioAttribute:function(t){var e,n="meet",r="Mid",i="Mid",o=t.split(" ");return o&&o.length&&(n=o.pop(),"meet"!==n&&"slice"!==n?(e=n,n="meet"):o.length&&(e=o.pop())),r="none"!==e?e.slice(1,4):"none",i="none"!==e?e.slice(5,8):"none",{meetOrSlice:n,alignX:r,alignY:i}},clearFabricFontCache:function(t){t=(t||"").toLowerCase(),t?r.charWidthsCache[t]&&delete r.charWidthsCache[t]:r.charWidthsCache={}},limitDimsByArea:function(t,e){var n=Math.sqrt(e*t),r=Math.floor(e/n);return{x:Math.floor(n),y:r}},capValue:function(t,e,n){return Math.max(t,Math.min(e,n))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map((function(t){return r.util.toFixed(t,r.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"}}}(e),function(){var t=Array.prototype.join;function e(e,o,a,s,u,c,l){var h=t.call(arguments);if(r.arcToSegmentsCache[h])return r.arcToSegmentsCache[h];var f=Math.PI,d=l*f/180,p=r.util.sin(d),g=r.util.cos(d),m=0,v=0;a=Math.abs(a),s=Math.abs(s);var y=-g*e*.5-p*o*.5,b=-g*o*.5+p*e*.5,x=a*a,w=s*s,_=b*b,O=y*y,S=x*w-x*_-w*O,C=0;if(S<0){var k=Math.sqrt(1-S/(x*w));a*=k,s*=k}else C=(u===c?-1:1)*Math.sqrt(S/(x*_+w*O));var A=C*a*b/s,T=-C*s*y/a,E=g*A-p*T+.5*e,j=p*A+g*T+.5*o,D=i(1,0,(y-A)/a,(b-T)/s),M=i((y-A)/a,(b-T)/s,(-y-A)/a,(-b-T)/s);0===c&&M>0?M-=2*f:1===c&&M<0&&(M+=2*f);for(var N=Math.ceil(Math.abs(M/f*2)),I=[],R=M/N,F=8/3*Math.sin(R/4)*Math.sin(R/4)/Math.sin(R/2),P=D+R,$=0;$<N;$++)I[$]=n(D,P,g,p,a,s,E,j,F,m,v),m=I[$][4],v=I[$][5],D=P,P+=R;return r.arcToSegmentsCache[h]=I,I}function n(t,e,n,i,o,a,s,u,c,l,h){var f=r.util.cos(t),d=r.util.sin(t),p=r.util.cos(e),g=r.util.sin(e),m=n*o*p-i*a*g+s,v=i*o*p+n*a*g+u,y=l+c*(-n*o*d-i*a*f),b=h+c*(-i*o*d+n*a*f),x=m+c*(n*o*g+i*a*p),w=v+c*(i*o*g-n*a*p);return[y,b,x,w,m,v]}function i(t,e,n,r){var i=Math.atan2(e,t),o=Math.atan2(r,n);return o>=i?o-i:2*Math.PI-(i-o)}function o(e,n,i,o,a,s,u,c){var l;if(r.cachesBoundsOfCurve&&(l=t.call(arguments),r.boundsOfCurveCache[l]))return r.boundsOfCurveCache[l];var h,f,d,p,g,m,v,y,b=Math.sqrt,x=Math.min,w=Math.max,_=Math.abs,O=[],S=[[],[]];f=6*e-12*i+6*a,h=-3*e+9*i-9*a+3*u,d=3*i-3*e;for(var C=0;C<2;++C)if(C>0&&(f=6*n-12*o+6*s,h=-3*n+9*o-9*s+3*c,d=3*o-3*n),_(h)<1e-12){if(_(f)<1e-12)continue;p=-d/f,0<p&&p<1&&O.push(p)}else v=f*f-4*d*h,v<0||(y=b(v),g=(-f+y)/(2*h),0<g&&g<1&&O.push(g),m=(-f-y)/(2*h),0<m&&m<1&&O.push(m));var k,A,T,E=O.length,j=E;while(E--)p=O[E],T=1-p,k=T*T*T*e+3*T*T*p*i+3*T*p*p*a+p*p*p*u,S[0][E]=k,A=T*T*T*n+3*T*T*p*o+3*T*p*p*s+p*p*p*c,S[1][E]=A;S[0][j]=e,S[1][j]=n,S[0][j+1]=u,S[1][j+1]=c;var D=[{x:x.apply(null,S[0]),y:x.apply(null,S[1])},{x:w.apply(null,S[0]),y:w.apply(null,S[1])}];return r.cachesBoundsOfCurve&&(r.boundsOfCurveCache[l]=D),D}r.util.drawArc=function(t,n,r,i){for(var o=i[0],a=i[1],s=i[2],u=i[3],c=i[4],l=i[5],h=i[6],f=[[],[],[],[]],d=e(l-n,h-r,o,a,u,c,s),p=0,g=d.length;p<g;p++)f[p][0]=d[p][0]+n,f[p][1]=d[p][1]+r,f[p][2]=d[p][2]+n,f[p][3]=d[p][3]+r,f[p][4]=d[p][4]+n,f[p][5]=d[p][5]+r,t.bezierCurveTo.apply(t,f[p])},r.util.getBoundsOfArc=function(t,n,r,i,a,s,u,c,l){for(var h,f=0,d=0,p=[],g=e(c-t,l-n,r,i,s,u,a),m=0,v=g.length;m<v;m++)h=o(f,d,g[m][0],g[m][1],g[m][2],g[m][3],g[m][4],g[m][5]),p.push({x:h[0].x+t,y:h[0].y+n}),p.push({x:h[1].x+t,y:h[1].y+n}),f=g[m][4],d=g[m][5];return p},r.util.getBoundsOfCurve=o}(),function(){var t=Array.prototype.slice;function e(e,n){for(var r=t.call(arguments,2),i=[],o=0,a=e.length;o<a;o++)i[o]=r.length?e[o][n].apply(e[o],r):e[o][n].call(e[o]);return i}function n(t,e){return a(t,e,(function(t,e){return t>=e}))}function i(t,e){return a(t,e,(function(t,e){return t<e}))}function o(t,e){var n=t.length;while(n--)t[n]=e;return t}function a(t,e,n){if(t&&0!==t.length){var r=t.length-1,i=e?t[r][e]:t[r];if(e)while(r--)n(t[r][e],i)&&(i=t[r][e]);else while(r--)n(t[r],i)&&(i=t[r]);return i}}r.util.array={fill:o,invoke:e,min:i,max:n}}(),function(){function t(e,n,i){if(i)if(!r.isLikelyNode&&n instanceof Element)e=n;else if(n instanceof Array){e=[];for(var o=0,a=n.length;o<a;o++)e[o]=t({},n[o],i)}else if(n&&"object"===typeof n)for(var s in n)"canvas"===s?e[s]=t({},n[s]):n.hasOwnProperty(s)&&(e[s]=t({},n[s],i));else e=n;else for(var s in n)e[s]=n[s];return e}function e(e,n){return t({},e,n)}r.util.object={extend:t,clone:e},r.util.object.extend(r.util,r.Observable)}(),function(){function t(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function n(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(t){var e,n=0,r=[];for(n=0,e;n<t.length;n++)!1!==(e=o(t,n))&&r.push(e);return r}function o(t,e){var n=t.charCodeAt(e);if(isNaN(n))return"";if(n<55296||n>57343)return t.charAt(e);if(55296<=n&&n<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var r=t.charCodeAt(e+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var i=t.charCodeAt(e-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1}r.util.string={camelize:t,capitalize:e,escapeXml:n,graphemeSplit:i}}(),function(){var t=Array.prototype.slice,e=function(){},n=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),i=function(t,e,r){for(var i in e)i in t.prototype&&"function"===typeof t.prototype[i]&&(e[i]+"").indexOf("callSuper")>-1?t.prototype[i]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=r;var i=e[t].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==t)return i}}(i):t.prototype[i]=e[i],n&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function o(){}function a(e){var n=null,r=this;while(r.constructor.superclass){var i=r.constructor.superclass.prototype[e];if(r[e]!==i){n=i;break}r=r.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,t.call(arguments,1)):n.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}function s(){var n=null,r=t.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"===typeof r[0]&&(n=r.shift()),s.superclass=n,s.subclasses=[],n&&(o.prototype=n.prototype,s.prototype=new o,n.subclasses.push(s));for(var u=0,c=r.length;u<c;u++)i(s,r[u],n);return s.prototype.initialize||(s.prototype.initialize=e),s.prototype.constructor=s,s.prototype.callSuper=a,s}r.util.createClass=s}(),function(){var t=!!r.document.createElement("div").attachEvent;function e(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}r.util.addListener=function(e,n,r,i){e&&e.addEventListener(n,r,!t&&i)},r.util.removeListener=function(e,n,r,i){e&&e.removeEventListener(n,r,!t&&i)},r.util.getPointer=function(t){var n=t.target,i=r.util.getScrollLeftTop(n),o=e(t);return{x:o.clientX+i.left,y:o.clientY+i.top}}}(),function(){function t(t,e){var n=t.style;if(!n)return t;if("string"===typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?a(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var r in e)if("opacity"===r)a(t,e[r]);else{var i="float"===r||"cssFloat"===r?"undefined"===typeof n.styleFloat?"cssFloat":"styleFloat":r;n[i]=e[r]}return t}var e=r.document.createElement("div"),n="string"===typeof e.style.opacity,i="string"===typeof e.style.filter,o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(t){return t};n?a=function(t,e){return t.style.opacity=e,t}:i&&(a=function(t,e){var n=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(n.zoom=1),o.test(n.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",n.filter=n.filter.replace(o,e)):n.filter+=" alpha(opacity="+100*e+")",t}),r.util.setStyle=t}(),function(){var t=Array.prototype.slice;function e(t){return"string"===typeof t?r.document.getElementById(t):t}var n,i,o=function(e){return t.call(e,0)};try{n=o(r.document.childNodes)instanceof Array}catch(d){}function a(t,e){var n=r.document.createElement(t);for(var i in e)"class"===i?n.className=e[i]:"for"===i?n.htmlFor=e[i]:n.setAttribute(i,e[i]);return n}function s(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function u(t,e,n){return"string"===typeof e&&(e=a(e,n)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e}function c(t){var e=0,n=0,i=r.document.documentElement,o=r.document.body||{scrollLeft:0,scrollTop:0};while(t&&(t.parentNode||t.host))if(t=t.parentNode||t.host,t===r.document?(e=o.scrollLeft||i.scrollLeft||0,n=o.scrollTop||i.scrollTop||0):(e+=t.scrollLeft||0,n+=t.scrollTop||0),1===t.nodeType&&"fixed"===t.style.position)break;return{left:e,top:n}}function l(t){var e,n,r=t&&t.ownerDocument,o={left:0,top:0},a={left:0,top:0},s={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return a;for(var u in s)a[s[u]]+=parseInt(i(t,u),10)||0;return e=r.documentElement,"undefined"!==typeof t.getBoundingClientRect&&(o=t.getBoundingClientRect()),n=c(t),{left:o.left+n.left-(e.clientLeft||0)+a.left,top:o.top+n.top-(e.clientTop||0)+a.top}}function h(t){var e=r.jsdomImplForWrapper(t);return e._canvas||e._image}function f(t){if(r.isLikelyNode){var e=r.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}n||(o=function(t){var e=new Array(t.length),n=t.length;while(n--)e[n]=t[n];return e}),i=r.document.defaultView&&r.document.defaultView.getComputedStyle?function(t,e){var n=r.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},function(){var t=r.document.documentElement.style,e="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"";function n(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=r.util.falseFunction),e?t.style[e]="none":"string"===typeof t.unselectable&&(t.unselectable="on"),t}function i(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=null),e?t.style[e]="":"string"===typeof t.unselectable&&(t.unselectable=""),t}r.util.makeElementUnselectable=n,r.util.makeElementSelectable=i}(),function(){function t(t,e){var n=r.document.getElementsByTagName("head")[0],i=r.document.createElement("script"),o=!0;i.onload=i.onreadystatechange=function(t){if(o){if("string"===typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;o=!1,e(t||r.window.event),i=i.onload=i.onreadystatechange=null}},i.src=t,n.appendChild(i)}r.util.getScript=t}(),r.util.getById=e,r.util.toArray=o,r.util.makeElement=a,r.util.addClass=s,r.util.wrapElement=u,r.util.getScrollLeftTop=c,r.util.getElementOffset=l,r.util.getElementStyle=i,r.util.getNodeCanvas=h,r.util.cleanUpJsdomNode=f}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function n(n,i){i||(i={});var o=i.method?i.method.toUpperCase():"GET",a=i.onComplete||function(){},s=new r.window.XMLHttpRequest,u=i.body||i.parameters;return s.onreadystatechange=function(){4===s.readyState&&(a(s),s.onreadystatechange=e)},"GET"===o&&(u=null,"string"===typeof i.parameters&&(n=t(n,i.parameters))),s.open(o,n,!0),"POST"!==o&&"PUT"!==o||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(u),s}r.util.request=n}(),r.log=console.log,r.warn=console.warn,function(){function t(){return!1}function e(t,e,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+e}function n(n){a((function(r){n||(n={});var i,o=r||+new Date,s=n.duration||500,u=o+s,c=n.onChange||t,l=n.abort||t,h=n.onComplete||t,f=n.easing||e,d="startValue"in n?n.startValue:0,p="endValue"in n?n.endValue:100,g=n.byValue||p-d;n.onStart&&n.onStart(),function t(e){i=e||+new Date;var n=i>u?s:i-o,r=n/s,m=f(n,d,g,s),v=Math.abs((m-d)/g);if(!l())return i>u?(c(p,1,1),void h(p,1,1)):(c(m,v,r),void a(t));h(p,1,1)}(o)}))}var i=r.window.requestAnimationFrame||r.window.webkitRequestAnimationFrame||r.window.mozRequestAnimationFrame||r.window.oRequestAnimationFrame||r.window.msRequestAnimationFrame||function(t){return r.window.setTimeout(t,1e3/60)},o=r.window.cancelAnimationFrame||r.window.clearTimeout;function a(){return i.apply(r.window,arguments)}function s(){return o.apply(r.window,arguments)}r.util.animate=n,r.util.requestAnimFrame=a,r.util.cancelAnimFrame=s}(),function(){function t(t,e,n){var r="rgba("+parseInt(t[0]+n*(e[0]-t[0]),10)+","+parseInt(t[1]+n*(e[1]-t[1]),10)+","+parseInt(t[2]+n*(e[2]-t[2]),10);return r+=","+(t&&e?parseFloat(t[3]+n*(e[3]-t[3])):1),r+=")",r}function e(e,n,i,o){var a=new r.Color(e).getSource(),s=new r.Color(n).getSource();o=o||{},r.util.animate(r.util.object.extend(o,{duration:i||500,startValue:a,endValue:s,byValue:s,easing:function(e,n,r,i){var a=o.colorEasing?o.colorEasing(e,i):1-Math.cos(e/i*(Math.PI/2));return t(n,r,a)}}))}r.util.animateColor=e}(),function(){function t(t,e,n,r){return t<Math.abs(e)?(t=e,r=n/4):r=0===e&&0===t?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:r}}function e(t,e,n){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*n-t.s)*(2*Math.PI)/t.p)}function n(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function i(t,e,n,r){return t/=r/2,t<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e}function o(t,e,n,r){return n*(t/=r)*t*t*t+e}function a(t,e,n,r){return-n*((t=t/r-1)*t*t*t-1)+e}function s(t,e,n,r){return t/=r/2,t<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}function u(t,e,n,r){return n*(t/=r)*t*t*t*t+e}function c(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e}function l(t,e,n,r){return t/=r/2,t<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}function h(t,e,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+e}function f(t,e,n,r){return n*Math.sin(t/r*(Math.PI/2))+e}function d(t,e,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+e}function p(t,e,n,r){return 0===t?e:n*Math.pow(2,10*(t/r-1))+e}function g(t,e,n,r){return t===r?e+n:n*(1-Math.pow(2,-10*t/r))+e}function m(t,e,n,r){return 0===t?e:t===r?e+n:(t/=r/2,t<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e)}function v(t,e,n,r){return-n*(Math.sqrt(1-(t/=r)*t)-1)+e}function y(t,e,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+e}function b(t,e,n,r){return t/=r/2,t<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function x(n,r,i,o){var a=1.70158,s=0,u=i;if(0===n)return r;if(n/=o,1===n)return r+i;s||(s=.3*o);var c=t(u,i,s,a);return-e(c,n,o)+r}function w(e,n,r,i){var o=1.70158,a=0,s=r;if(0===e)return n;if(e/=i,1===e)return n+r;a||(a=.3*i);var u=t(s,r,a,o);return u.a*Math.pow(2,-10*e)*Math.sin((e*i-u.s)*(2*Math.PI)/u.p)+u.c+n}function _(n,r,i,o){var a=1.70158,s=0,u=i;if(0===n)return r;if(n/=o/2,2===n)return r+i;s||(s=o*(.3*1.5));var c=t(u,i,s,a);return n<1?-.5*e(c,n,o)+r:c.a*Math.pow(2,-10*(n-=1))*Math.sin((n*o-c.s)*(2*Math.PI)/c.p)*.5+c.c+r}function O(t,e,n,r,i){return void 0===i&&(i=1.70158),n*(t/=r)*t*((i+1)*t-i)+e}function S(t,e,n,r,i){return void 0===i&&(i=1.70158),n*((t=t/r-1)*t*((i+1)*t+i)+1)+e}function C(t,e,n,r,i){return void 0===i&&(i=1.70158),t/=r/2,t<1?n/2*(t*t*((1+(i*=1.525))*t-i))+e:n/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e}function k(t,e,n,r){return n-A(r-t,0,n,r)+e}function A(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function T(t,e,n,r){return t<r/2?.5*k(2*t,0,n,r)+e:.5*A(2*t-r,0,n,r)+.5*n+e}r.util.ease={easeInQuad:function(t,e,n,r){return n*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){return t/=r/2,t<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){return n*(t/=r)*t*t+e},easeOutCubic:n,easeInOutCubic:i,easeInQuart:o,easeOutQuart:a,easeInOutQuart:s,easeInQuint:u,easeOutQuint:c,easeInOutQuint:l,easeInSine:h,easeOutSine:f,easeInOutSine:d,easeInExpo:p,easeOutExpo:g,easeInOutExpo:m,easeInCirc:v,easeOutCirc:y,easeInOutCirc:b,easeInElastic:x,easeOutElastic:w,easeInOutElastic:_,easeInBack:O,easeOutBack:S,easeInOutBack:C,easeInBounce:k,easeOutBounce:A,easeInOutBounce:T}}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,r=e.util.object.clone,i=e.util.toFixed,o=e.util.parseUnit,a=e.util.multiplyTransformMatrices,s=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],u=["symbol","image","marker","pattern","view","svg"],c=["pattern","defs","symbol","metadata","clipPath","mask","desc"],l=["symbol","g","a","svg","clipPath","defs"],h={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform"},f={stroke:"strokeOpacity",fill:"fillOpacity"},d="font-size",p="clip-path";function g(t){return t in h?h[t]:t}function m(t,n,r,i){var s,u="[object Array]"===Object.prototype.toString.call(n);if("fill"!==t&&"stroke"!==t||"none"!==n)if("vector-effect"===t)n="non-scaling-stroke"===n;else if("strokeDashArray"===t)n="none"===n?null:n.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)n=r&&r.transformMatrix?a(r.transformMatrix,e.parseTransformAttribute(n)):e.parseTransformAttribute(n);else if("visible"===t)n="none"!==n&&"hidden"!==n,r&&!1===r.visible&&(n=!1);else if("opacity"===t)n=parseFloat(n),r&&"undefined"!==typeof r.opacity&&(n*=r.opacity);else if("textAnchor"===t)n="start"===n?"left":"end"===n?"right":"center";else if("charSpacing"===t)s=o(n,i)/i*1e3;else if("paintFirst"===t){var c=n.indexOf("fill"),l=n.indexOf("stroke");n="fill";(c>-1&&l>-1&&l<c||-1===c&&l>-1)&&(n="stroke")}else{if("href"===t||"xlink:href"===t)return n;s=u?n.map(o):o(n,i)}else n="";return!u&&isNaN(s)?n:s}function v(t){return new RegExp("^("+t.join("|")+")\\b","i")}function y(t){for(var n in f)if("undefined"!==typeof t[f[n]]&&""!==t[n]){if("undefined"===typeof t[n]){if(!e.Object.prototype[n])continue;t[n]=e.Object.prototype[n]}if(0!==t[n].indexOf("url(")){var r=new e.Color(t[n]);t[n]=r.setAlpha(i(r.getAlpha()*t[f[n]],2)).toRgba()}}return t}function b(t,e){var n,r,i,o,a=[];for(i=0,o=e.length;i<o;i++)n=e[i],r=t.getElementsByTagName(n),a=a.concat(Array.prototype.slice.call(r));return a}function x(t,e){var n,r;t.replace(/;\s*$/,"").split(";").forEach((function(t){var i=t.split(":");n=i[0].trim().toLowerCase(),r=i[1].trim(),e[n]=r}))}function w(t,e){var n,r;for(var i in t)"undefined"!==typeof t[i]&&(n=i.toLowerCase(),r=t[i],e[n]=r)}function _(t,n){var r={};for(var i in e.cssRules[n])if(O(t,i.split(" ")))for(var o in e.cssRules[n][i])r[o]=e.cssRules[n][i][o];return r}function O(t,e){var n,r=!0;return n=C(t,e.pop()),n&&e.length&&(r=S(t,e)),n&&r&&0===e.length}function S(t,e){var n,r=!0;while(t.parentNode&&1===t.parentNode.nodeType&&e.length)r&&(n=e.pop()),t=t.parentNode,r=C(t,n);return 0===e.length}function C(t,e){var n,r,i=t.nodeName,o=t.getAttribute("class"),a=t.getAttribute("id");if(n=new RegExp("^"+i,"i"),e=e.replace(n,""),a&&e.length&&(n=new RegExp("#"+a+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"")),o&&e.length)for(o=o.split(" "),r=o.length;r--;)n=new RegExp("\\."+o[r]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"");return 0===e.length}function k(t,e){var n;if(t.getElementById&&(n=t.getElementById(e)),n)return n;var r,i,o,a=t.getElementsByTagName("*");for(i=0,o=a.length;i<o;i++)if(r=a[i],e===r.getAttribute("id"))return r}function A(t){var n=b(t,["use","svg:use"]),r=0;while(n.length&&r<n.length){var i,o,a,s,u,c=n[r],l=(c.getAttribute("xlink:href")||c.getAttribute("href")).substr(1),h=c.getAttribute("x")||0,f=c.getAttribute("y")||0,d=k(t,l).cloneNode(!0),p=(d.getAttribute("transform")||"")+" translate("+h+", "+f+")",g=n.length,m=e.svgNS;if(E(d),/^svg$/i.test(d.nodeName)){var v=d.ownerDocument.createElementNS(m,"g");for(a=0,s=d.attributes,u=s.length;a<u;a++)o=s.item(a),v.setAttributeNS(m,o.nodeName,o.nodeValue);while(d.firstChild)v.appendChild(d.firstChild);d=v}for(a=0,s=c.attributes,u=s.length;a<u;a++)o=s.item(a),"x"!==o.nodeName&&"y"!==o.nodeName&&"xlink:href"!==o.nodeName&&"href"!==o.nodeName&&("transform"===o.nodeName?p=o.nodeValue+" "+p:d.setAttribute(o.nodeName,o.nodeValue));d.setAttribute("transform",p),d.setAttribute("instantiated_by_use","1"),d.removeAttribute("id"),i=c.parentNode,i.replaceChild(d,c),n.length===g&&r++}}e.svgValidTagNamesRegEx=v(s),e.svgViewBoxElementsRegEx=v(u),e.svgInvalidAncestorsRegEx=v(c),e.svgValidParentsRegEx=v(l),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,n){var r=e.util.cos(n[0]),i=e.util.sin(n[0]),o=0,a=0;3===n.length&&(o=n[1],a=n[2]),t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=o-(r*o-i*a),t[5]=a-(i*o+r*a)}function n(t,e){var n=e[0],r=2===e.length?e[1]:e[0];t[0]=n,t[3]=r}function r(t,n,r){t[r]=Math.tan(e.util.degreesToRadians(n[0]))}function i(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var o=e.iMatrix,a=e.reNum,s="(?:\\s+,?\\s*|,\\s*)",u="(?:(skewX)\\s*\\(\\s*("+a+")\\s*\\))",c="(?:(skewY)\\s*\\(\\s*("+a+")\\s*\\))",l="(?:(rotate)\\s*\\(\\s*("+a+")(?:"+s+"("+a+")"+s+"("+a+"))?\\s*\\))",h="(?:(scale)\\s*\\(\\s*("+a+")(?:"+s+"("+a+"))?\\s*\\))",f="(?:(translate)\\s*\\(\\s*("+a+")(?:"+s+"("+a+"))?\\s*\\))",d="(?:(matrix)\\s*\\(\\s*("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")\\s*\\))",p="(?:"+d+"|"+f+"|"+h+"|"+l+"|"+u+"|"+c+")",g="(?:"+p+"(?:"+s+"*"+p+")*)",m="^\\s*(?:"+g+"?)\\s*$",v=new RegExp(m),y=new RegExp(p,"g");return function(a){var s=o.concat(),u=[];if(!a||a&&!v.test(a))return s;a.replace(y,(function(a){var c=new RegExp(p).exec(a).filter((function(t){return!!t})),l=c[1],h=c.slice(2).map(parseFloat);switch(l){case"translate":i(s,h);break;case"rotate":h[0]=e.util.degreesToRadians(h[0]),t(s,h);break;case"scale":n(s,h);break;case"skewX":r(s,h,2);break;case"skewY":r(s,h,1);break;case"matrix":s=h;break}u.push(s.concat()),s=o.concat()}));var c=u[0];while(u.length>1)u.shift(),c=e.util.multiplyTransformMatrices(c,u[0]);return c}}();var T=new RegExp("^\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*$");function E(t){var n,r,i,a,s=t.getAttribute("viewBox"),u=1,c=1,l=0,h=0,f=t.getAttribute("width"),d=t.getAttribute("height"),p=t.getAttribute("x")||0,g=t.getAttribute("y")||0,m=t.getAttribute("preserveAspectRatio")||"",v=!s||!e.svgViewBoxElementsRegEx.test(t.nodeName)||!(s=s.match(T)),y=!f||!d||"100%"===f||"100%"===d,b=v&&y,x={},w="",_=0,O=0;if(x.width=0,x.height=0,x.toBeParsed=b,b)return x;if(v)return x.width=o(f),x.height=o(d),x;if(l=-parseFloat(s[1]),h=-parseFloat(s[2]),n=parseFloat(s[3]),r=parseFloat(s[4]),x.minX=l,x.minY=h,x.viewBoxWidth=n,x.viewBoxHeight=r,y?(x.width=n,x.height=r):(x.width=o(f),x.height=o(d),u=x.width/n,c=x.height/r),m=e.util.parsePreserveAspectRatioAttribute(m),"none"!==m.alignX&&("meet"===m.meetOrSlice&&(c=u=u>c?c:u),"slice"===m.meetOrSlice&&(c=u=u>c?u:c),_=x.width-n*u,O=x.height-r*u,"Mid"===m.alignX&&(_/=2),"Mid"===m.alignY&&(O/=2),"Min"===m.alignX&&(_=0),"Min"===m.alignY&&(O=0)),1===u&&1===c&&0===l&&0===h&&0===p&&0===g)return x;if((p||g)&&(w=" translate("+o(p)+" "+o(g)+") "),i=w+" matrix("+u+" 0 0 "+c+" "+(l*u+_)+" "+(h*c+O)+") ",x.viewboxTransform=e.parseTransformAttribute(i),"svg"===t.nodeName){a=t.ownerDocument.createElementNS(e.svgNS,"g");while(t.firstChild)a.appendChild(t.firstChild);t.appendChild(a)}else a=t,i=a.getAttribute("transform")+i;return a.setAttribute("transform",i),x}function j(t,e){while(t&&(t=t.parentNode))if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}function D(t,e){var n=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],r="xlink:href",i=e.getAttribute(r).substr(1),o=k(t,i);if(o&&o.getAttribute(r)&&D(t,o),n.forEach((function(t){o&&!e.hasAttribute(t)&&o.hasAttribute(t)&&e.setAttribute(t,o.getAttribute(t))})),!e.children.length){var a=o.cloneNode(!0);while(a.firstChild)e.appendChild(a.firstChild)}e.removeAttribute(r)}e.parseSVGDocument=function(t,n,i,o){if(t){A(t);var a,s,u=e.Object.__uid++,c=E(t),l=e.util.toArray(t.getElementsByTagName("*"));if(c.crossOrigin=o&&o.crossOrigin,c.svgUid=u,0===l.length&&e.isLikelyNode){l=t.selectNodes('//*[name(.)!="svg"]');var h=[];for(a=0,s=l.length;a<s;a++)h[a]=l[a];l=h}var f=l.filter((function(t){return E(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!j(t,e.svgInvalidAncestorsRegEx)}));if(!f||f&&!f.length)n&&n([],{});else{var d={};l.filter((function(t){return"clipPath"===t.nodeName.replace("svg:","")})).forEach((function(t){var n=t.getAttribute("id");d[n]=e.util.toArray(t.getElementsByTagName("*")).filter((function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))}))})),e.gradientDefs[u]=e.getGradientDefs(t),e.cssRules[u]=e.getCSSRules(t),e.clipPaths[u]=d,e.parseElements(f,(function(t,r){n&&(n(t,c,r,l),delete e.gradientDefs[u],delete e.cssRules[u],delete e.clipPaths[u])}),r(c),i,o)}}};var M=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+e.reNum+"))?\\s+(.*)");n(e,{parseFontDeclaration:function(t,e){var n=t.match(M);if(n){var r=n[1],i=n[3],a=n[4],s=n[5],u=n[6];r&&(e.fontStyle=r),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),a&&(e.fontSize=o(a)),u&&(e.fontFamily=u),s&&(e.lineHeight="normal"===s?1:s)}},getGradientDefs:function(t){var e,n=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],r=b(t,n),i=0,o={};i=r.length;while(i--)e=r[i],e.getAttribute("xlink:href")&&D(t,e),o[e.getAttribute("id")]=e;return o},parseAttributes:function(t,r,i){if(t){var a,s,u,c={};"undefined"===typeof i&&(i=t.getAttribute("svgUid")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(c=e.parseAttributes(t.parentNode,r,i));var l=r.reduce((function(e,n){return a=t.getAttribute(n),a&&(e[n]=a),e}),{}),h=n(_(t,i),e.parseStyleAttribute(t));l=n(l,h),h[p]&&t.setAttribute(p,h[p]),s=u=c.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,l[d]&&(l[d]=s=o(l[d],u));var f,v,b={};for(var x in l)f=g(x),v=m(f,l[x],c,s),b[f]=v;b&&b.font&&e.parseFontDeclaration(b.font,b);var w=n(c,b);return e.svgValidParentsRegEx.test(t.nodeName)?w:y(w)}},parseElements:function(t,n,r,i,o){new e.ElementsParser(t,n,r,i,o).parse()},parseStyleAttribute:function(t){var e={},n=t.getAttribute("style");return n?("string"===typeof n?x(n,e):w(n,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,n,r=[];for(e=0,n=t.length;e<n;e+=2)r.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return r},getCSSRules:function(t){var n,r,i,o=t.getElementsByTagName("style"),a={};for(n=0,r=o.length;n<r;n++){var s=o[n].textContent||"";s=s.replace(/\/\*[\s\S]*?\*\//g,""),""!==s.trim()&&(i=s.match(/[^{]*\{[\s\S]*?\}/g),i=i.map((function(t){return t.trim()})),i.forEach((function(t){var i=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),o={},s=i[2].trim(),u=s.replace(/;$/,"").split(/\s*;\s*/);for(n=0,r=u.length;n<r;n++){var c=u[n].split(/\s*:\s*/),l=c[0],h=c[1];o[l]=h}t=i[1],t.split(",").forEach((function(t){t=t.replace(/^svg/i,"").trim(),""!==t&&(a[t]?e.util.object.extend(a[t],o):a[t]=e.util.object.clone(o))}))})))}return a},loadSVGFromURL:function(t,n,r,i){function o(t){var o=t.responseXML;if(o&&!o.documentElement&&e.window.ActiveXObject&&t.responseText&&(o=new ActiveXObject("Microsoft.XMLDOM"),o.async="false",o.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),!o||!o.documentElement)return n&&n(null),!1;e.parseSVGDocument(o.documentElement,(function(t,e,r,i){n&&n(t,e,r,i)}),r,i)}t=t.replace(/^\n\s*/,"").trim(),new e.util.request(t,{method:"get",onComplete:o})},loadSVGFromString:function(t,n,r,i){var o;if(t=t.trim(),"undefined"!==typeof e.window.DOMParser){var a=new e.window.DOMParser;a&&a.parseFromString&&(o=a.parseFromString(t,"text/xml"))}else e.window.ActiveXObject&&(o=new ActiveXObject("Microsoft.XMLDOM"),o.async="false",o.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));e.parseSVGDocument(o.documentElement,(function(t,e,r,i){n(t,e,r,i)}),r,i)}})}(e),r.ElementsParser=function(t,e,n,r,i,o){this.elements=t,this.callback=e,this.options=n,this.reviver=r,this.svgUid=n&&n.svgUid||0,this.parsingOptions=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(t){t.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},t.createObjects=function(){var t=this;this.elements.forEach((function(e,n){e.setAttribute("svgUid",t.svgUid),t.createObject(e,n)}))},t.findTag=function(t){return r[r.util.string.capitalize(t.tagName.replace("svg:",""))]},t.createObject=function(t,e){var n=this.findTag(t);if(n&&n.fromElement)try{n.fromElement(t,this.createCallback(e,t),this.options)}catch(i){r.log(i)}else this.checkIfDone()},t.createCallback=function(t,e){var n=this;return function(i){var o;n.resolveGradient(i,e,"fill"),n.resolveGradient(i,e,"stroke"),i instanceof r.Image&&i._originalElement&&(o=i.parsePreserveAspectRatioAttribute(e)),i._removeTransformMatrix(o),n.resolveClipPath(i,e),n.reviver&&n.reviver(e,i),n.instances[t]=i,n.checkIfDone()}},t.extractPropertyDefinition=function(t,e,n){var i=t[e],o=this.regexUrl;if(o.test(i)){o.lastIndex=0;var a=o.exec(i)[1];return o.lastIndex=0,r[n][this.svgUid][a]}},t.resolveGradient=function(t,e,n){var i=this.extractPropertyDefinition(t,n,"gradientDefs");if(i){var o=e.getAttribute(n+"-opacity"),a=r.Gradient.fromElement(i,t,o,this.options);t.set(n,a)}},t.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},t.resolveClipPath=function(t,e){var n,i,o,a,s,u=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(u){a=[],o=r.util.invertTransform(t.calcTransformMatrix());var c=u[0].parentNode,l=e;while(l.parentNode&&l.getAttribute("clip-path")!==t.clipPath)l=l.parentNode;l.parentNode.appendChild(c);for(var h=0;h<u.length;h++)n=u[h],i=this.findTag(n),i.fromElement(n,this.createClipPathCallback(t,a),this.options);u=1===a.length?a[0]:new r.Group(a),s=r.util.multiplyTransformMatrices(o,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,l);var f=r.util.qrDecompose(s);u.flipX=!1,u.flipY=!1,u.set("scaleX",f.scaleX),u.set("scaleY",f.scaleY),u.angle=f.angle,u.skewX=f.skewX,u.skewY=0,u.setPositionByOrigin({x:f.translateX,y:f.translateY},"center","center"),t.clipPath=u}else delete t.clipPath},t.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter((function(t){return null!=t})),this.callback(this.instances,this.elements))}}(r.ElementsParser.prototype),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=n,n.prototype={type:"point",constructor:n,add:function(t){return new n(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new n(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new n(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new n(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new n(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new n(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return"undefined"===typeof e&&(e=.5),e=Math.max(Math.min(1,e),0),new n(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new n(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new n(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},clone:function(){return new n(this.x,this.y)}})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){this.status=t,this.points=[]}e.Intersection?e.warn("fabric.Intersection is already defined"):(e.Intersection=n,e.Intersection.prototype={constructor:n,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,r,i,o){var a,s=(o.x-i.x)*(t.y-i.y)-(o.y-i.y)*(t.x-i.x),u=(r.x-t.x)*(t.y-i.y)-(r.y-t.y)*(t.x-i.x),c=(o.y-i.y)*(r.x-t.x)-(o.x-i.x)*(r.y-t.y);if(0!==c){var l=s/c,h=u/c;0<=l&&l<=1&&0<=h&&h<=1?(a=new n("Intersection"),a.appendPoint(new e.Point(t.x+l*(r.x-t.x),t.y+l*(r.y-t.y)))):a=new n}else a=new n(0===s||0===u?"Coincident":"Parallel");return a},e.Intersection.intersectLinePolygon=function(t,e,r){var i,o,a,s,u=new n,c=r.length;for(s=0;s<c;s++)i=r[s],o=r[(s+1)%c],a=n.intersectLineLine(t,e,i,o),u.appendPoints(a.points);return u.points.length>0&&(u.status="Intersection"),u},e.Intersection.intersectPolygonPolygon=function(t,e){var r,i=new n,o=t.length;for(r=0;r<o;r++){var a=t[r],s=t[(r+1)%o],u=n.intersectLinePolygon(a,s,e);i.appendPoints(u.points)}return i.points.length>0&&(i.status="Intersection"),i},e.Intersection.intersectPolygonRectangle=function(t,r,i){var o=r.min(i),a=r.max(i),s=new e.Point(a.x,o.y),u=new e.Point(o.x,a.y),c=n.intersectLinePolygon(o,s,t),l=n.intersectLinePolygon(s,a,t),h=n.intersectLinePolygon(a,u,t),f=n.intersectLinePolygon(u,o,t),d=new n;return d.appendPoints(c.points),d.appendPoints(l.points),d.appendPoints(h.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function r(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}e.Color?e.warn("fabric.Color is already defined."):(e.Color=n,e.Color.prototype={_tryParsingColor:function(t){var e;t in n.colorNameMap&&(t=n.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=n.sourceFromHex(t)),e||(e=n.sourceFromRgb(t)),e||(e=n.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,n,r){t/=255,n/=255,r/=255;var i,o,a,s=e.util.array.max([t,n,r]),u=e.util.array.min([t,n,r]);if(a=(s+u)/2,s===u)i=o=0;else{var c=s-u;switch(o=a>.5?c/(2-s-u):c/(s+u),s){case t:i=(n-r)/c+(n<r?6:0);break;case n:i=(r-t)/c+2;break;case r:i=(t-n)/c+4;break}i/=6}return[Math.round(360*i),Math.round(100*o),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,n,r=this.getSource();return t=r[0].toString(16),t=1===t.length?"0"+t:t,e=r[1].toString(16),e=1===e.length?"0"+e:e,n=r[2].toString(16),n=1===n.length?"0"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=Math.round(255*e[3]),t=t.toString(16),t=1===t.length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),n=t[3];return this.setSource([e,e,e,n]),this},toBlackWhite:function(t){var e=this.getSource(),n=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),r=e[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,r]),this},overlayWith:function(t){t instanceof n||(t=new n(t));var e,r=[],i=this.getAlpha(),o=.5,a=this.getSource(),s=t.getSource();for(e=0;e<3;e++)r.push(Math.round(a[e]*(1-o)+s[e]*o));return r[3]=i,this.setSource(r),this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},e.Color.fromRgb=function(t){return n.fromSource(n.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(n.reRGBa);if(e){var r=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),i=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),o=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(r,10),parseInt(i,10),parseInt(o,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=n.fromRgb,e.Color.fromHsl=function(t){return n.fromSource(n.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(n.reHSLa);if(e){var i,o,a,s=(parseFloat(e[1])%360+360)%360/360,u=parseFloat(e[2])/(/%$/.test(e[2])?100:1),c=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===u)i=o=a=c;else{var l=c<=.5?c*(u+1):c+u-c*u,h=2*c-l;i=r(h,l,s+1/3),o=r(h,l,s),a=r(h,l,s-1/3)}return[Math.round(255*i),Math.round(255*o),Math.round(255*a),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=n.fromHsl,e.Color.fromHex=function(t){return n.fromSource(n.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(n.reHex)){var e=t.slice(t.indexOf("#")+1),r=3===e.length||4===e.length,i=8===e.length||4===e.length,o=r?e.charAt(0)+e.charAt(0):e.substring(0,2),a=r?e.charAt(1)+e.charAt(1):e.substring(2,4),s=r?e.charAt(2)+e.charAt(2):e.substring(4,6),u=i?r?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(o,16),parseInt(a,16),parseInt(s,16),parseFloat((parseInt(u,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new n;return e.setSource(t),e})}(e),function(){function t(t,e){var n,i,o,a,s=t.getAttribute("style"),u=t.getAttribute("offset")||0;if(u=parseFloat(u)/(/%$/.test(u)?100:1),u=u<0?0:u>1?1:u,s){var c=s.split(/\s*;\s*/);for(""===c[c.length-1]&&c.pop(),a=c.length;a--;){var l=c[a].split(/\s*:\s*/),h=l[0].trim(),f=l[1].trim();"stop-color"===h?n=f:"stop-opacity"===h&&(o=f)}}return n||(n=t.getAttribute("stop-color")||"rgb(0,0,0)"),o||(o=t.getAttribute("stop-opacity")),n=new r.Color(n),i=n.getAlpha(),o=isNaN(parseFloat(o))?1:parseFloat(o),o*=i*e,{offset:u,color:n.toRgb(),opacity:o}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function n(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}var i=r.util.object.clone;function o(t,e,n,r){var i,o;Object.keys(e).forEach((function(t){i=e[t],"Infinity"===i?o=1:"-Infinity"===i?o=0:(o=parseFloat(e[t],10),"string"===typeof i&&/^(\d+\.\d+)%|(\d+)%$/.test(i)&&(o*=.01,"pixels"===r&&("x1"!==t&&"x2"!==t&&"r2"!==t||(o*=n.viewBoxWidth||n.width),"y1"!==t&&"y2"!==t||(o*=n.viewBoxHeight||n.height)))),e[t]=o}))}r.Gradient=r.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,n=this;Object.keys(t).forEach((function(e){n[e]=t[e]})),this.id?this.id+="_"+r.Object.__uid++:this.id=r.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var n=new r.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return r.util.populateWithProperties(this,e,t),e},toSVG:function(t,e){var n,o,a,s,u=i(this.coords,!0),c=(e=e||{},i(this.colorStops,!0)),l=u.r1>u.r2,h=this.gradientTransform?this.gradientTransform.concat():r.iMatrix.concat(),f=-this.offsetX,d=-this.offsetY,p=!!e.additionalTransform,g="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(c.sort((function(t,e){return t.offset-e.offset})),"objectBoundingBox"===g?(f/=t.width,d/=t.height):(f+=t.width/2,d+=t.height/2),"path"===t.type&&(f-=t.pathOffset.x,d-=t.pathOffset.y),h[4]-=f,h[5]-=d,s='id="SVGID_'+this.id+'" gradientUnits="'+g+'"',s+=' gradientTransform="'+(p?e.additionalTransform+" ":"")+r.util.matrixToSVG(h)+'" ',"linear"===this.type?a=["<linearGradient ",s,' x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,'">\n']:"radial"===this.type&&(a=["<radialGradient ",s,' cx="',l?u.x1:u.x2,'" cy="',l?u.y1:u.y2,'" r="',l?u.r1:u.r2,'" fx="',l?u.x2:u.x1,'" fy="',l?u.y2:u.y1,'">\n']),"radial"===this.type){if(l)for(c=c.concat(),c.reverse(),n=0,o=c.length;n<o;n++)c[n].offset=1-c[n].offset;var m=Math.min(u.r1,u.r2);if(m>0){var v=Math.max(u.r1,u.r2),y=m/v;for(n=0,o=c.length;n<o;n++)c[n].offset+=y*(1-c[n].offset)}}for(n=0,o=c.length;n<o;n++){var b=c[n];a.push("<stop ",'offset="',100*b.offset+"%",'" style="stop-color:',b.color,"undefined"!==typeof b.opacity?";stop-opacity: "+b.opacity:";",'"/>\n')}return a.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),a.join("")},toLive:function(t,e){var n,i,o,a=r.util.object.clone(this.coords),s=a.x1,u=a.y1,c=a.x2,l=a.y2,h=this.colorStops;if(this.type){for(e instanceof r.Text&&"percentage"===this.gradientUnits&&(s*=e.width,u*=e.height,c*=e.width,l*=e.height),"linear"===this.type?n=t.createLinearGradient(s,u,c,l):"radial"===this.type&&(n=t.createRadialGradient(s,u,a.r1,c,l,a.r2)),i=0,o=h.length;i<o;i++){var f=h[i].color,d=h[i].opacity,p=h[i].offset;"undefined"!==typeof d&&(f=new r.Color(f).setAlpha(d).toRgba()),n.addColorStop(p,f)}return n}}}),r.util.object.extend(r.Gradient,{fromElement:function(i,a,s,u){var c=parseFloat(s)/(/%$/.test(s)?100:1);c=c<0?0:c>1?1:c,isNaN(c)&&(c=1);var l,h,f,d,p=i.getElementsByTagName("stop"),g="userSpaceOnUse"===i.getAttribute("gradientUnits")?"pixels":"percentage",m=i.getAttribute("gradientTransform")||"",v=[],y=0,b=0;for("linearGradient"===i.nodeName||"LINEARGRADIENT"===i.nodeName?(l="linear",h=e(i)):(l="radial",h=n(i)),f=p.length;f--;)v.push(t(p[f],c));d=r.parseTransformAttribute(m),o(a,h,u,g),"pixels"===g&&(y=-a.left,b=-a.top);var x=new r.Gradient({id:i.getAttribute("id"),type:l,coords:h,colorStops:v,gradientUnits:g,gradientTransform:d,offsetX:y,offsetY:b});return x},forObject:function(t,e){return e||(e={}),o(t,e.coords,e.gradientUnits,{viewBoxWidth:100,viewBoxHeight:100}),new r.Gradient(e)}})}(),function(){"use strict";var t=r.util.toFixed;r.Pattern=r.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=r.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!==typeof t.source)e&&e(this);else if("undefined"!==typeof r.util.getFunctionBody(t.source))this.source=new Function(r.util.getFunctionBody(t.source)),e&&e(this);else{var n=this;this.source=r.util.createImage(),r.util.loadImage(t.source,(function(t){n.source=t,e&&e(n)}),null,this.crossOrigin)}},toObject:function(e){var n,i,o=r.Object.NUM_FRACTION_DIGITS;return"function"===typeof this.source?n=String(this.source):"string"===typeof this.source.src?n=this.source.src:"object"===typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),i={type:"pattern",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,o),offsetY:t(this.offsetY,o),patternTransform:this.patternTransform?this.patternTransform.concat():null},r.util.populateWithProperties(this,i,e),i},toSVG:function(t){var e="function"===typeof this.source?this.source():this.source,n=e.width/t.width,r=e.height/t.height,i=this.offsetX/t.width,o=this.offsetY/t.height,a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(r=1,o&&(r+=Math.abs(o))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,i&&(n+=Math.abs(i))),e.src?a=e.src:e.toDataURL&&(a=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+i+'" y="'+o+'" width="'+n+'" height="'+r+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e="function"===typeof this.source?this.source():this.source;if(!e)return"";if("undefined"!==typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var n in"string"===typeof t&&(t=this._parseShadow(t)),t)this[n]=t[n];this.id=e.Object.__uid++},_parseShadow:function(t){var n=t.trim(),r=e.Shadow.reOffsetsAndBlur.exec(n)||[],i=n.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:i.trim(),offsetX:parseInt(r[1],10)||0,offsetY:parseInt(r[2],10)||0,blur:parseInt(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var r=40,i=40,o=e.Object.NUM_FRACTION_DIGITS,a=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),s=20,u=new e.Color(this.color);return t.width&&t.height&&(r=100*n((Math.abs(a.x)+this.blur)/t.width,o)+s,i=100*n((Math.abs(a.y)+this.blur)/t.height,o)+s),t.flipX&&(a.x*=-1),t.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+i+'%" height="'+(100+2*i)+'%" x="-'+r+'%" width="'+(100+2*r)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+n(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+n(a.x,o)+'" dy="'+n(a.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+u.toRgb()+'" flood-opacity="'+u.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},n=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(e){this[e]!==n[e]&&(t[e]=this[e])}),this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){"use strict";if(r.StaticCanvas)r.warn("fabric.StaticCanvas is already defined.");else{var t=r.util.object.extend,e=r.util.getElementOffset,n=r.util.removeFromArray,i=r.util.toFixed,o=r.util.transformPoint,a=r.util.invertTransform,s=r.util.getNodeCanvas,u=r.util.createCanvasElement,c=new Error("Could not initialize `canvas` element");r.StaticCanvas=r.util.createClass(r.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:r.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,n),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,n),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,n),e.overlayColor&&this.setOverlayColor(e.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return 1!==r.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?r.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var t=r.devicePixelRatio;this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(t,e,n){e.setAttribute("width",this.width*t),e.setAttribute("height",this.height*t),n.scale(t,t)},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage("overlayImage",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage("backgroundImage",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,n,i){return"string"===typeof e?r.util.loadImage(e,(function(e){if(e){var o=new r.Image(e,i);this[t]=o,o.canvas=this}n&&n(e)}),this,i&&i.crossOrigin):(i&&e.setOptions(i),this[t]=e,e&&(e.canvas=this),n&&n(e)),this},__setBgOverlayColor:function(t,e,n){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,n),this},_createCanvasElement:function(){var t=u();if(!t)throw c;if(t.style||(t.style={}),"undefined"===typeof t.getContext)throw c;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=r.util.getById(t)||this._createCanvasElement(),r.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;for(var r in e=e||{},t)n=t[r],e.cssOnly||(this._setBackstoreDimension(r,t[r]),n+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(r,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,n,r,i=this._activeObject,o=!1,a=!0;for(this.viewportTransform=t,n=0,r=this._objects.length;n<r;n++)e=this._objects[n],e.group||e.setCoords(o,a);return i&&"activeSelection"===i.type&&i.setCoords(o,a),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var n=t,r=this.viewportTransform.slice(0);t=o(t,a(this.viewportTransform)),r[0]=e,r[3]=e;var i=o(t,r);return r[4]+=n.x-i.x,r[5]+=n.y-i.y,this.setViewportTransform(r)},setZoom:function(t){return this.zoomToPoint(new r.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new r.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=r.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,n=this.height,i=a(this.viewportTransform);return t.tl=o({x:0,y:0},i),t.br=o({x:e,y:n},i),t.tr=new r.Point(t.br.x,t.tl.y),t.bl=new r.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(r.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var n=this.viewportTransform,i=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),this.fire("before:render",{ctx:t}),this.clipTo&&r.util.clipContext(this,t),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.clipTo&&t.restore(),i&&(i.canvas=this,i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,n=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation="destination-in",n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var n,r;for(n=0,r=e.length;n<r;++n)e[n]&&e[n].render(t)},_renderBackgroundOrOverlay:function(t,e){var n=this[e+"Color"],r=this[e+"Image"],i=this.viewportTransform,o=this[e+"Vpt"];if(n||r){if(n){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=n.toLive?n.toLive(t,this):n,o&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);var a=n.gradientTransform||n.patternTransform;a&&t.transform(a[0],a[1],a[2],a[3],a[4],a[5]),t.fill(),t.restore()}r&&(t.save(),o&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),r.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(t){return this._centerObject(t,new r.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new r.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new r.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new r.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new r.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=a(this.viewportTransform);return o({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,n){var i=this.clipPath,o={version:r.version,objects:this._toObjects(e,n)};return i&&(o.clipPath=this._toObject(this.clipPath,e,n)),t(o,this.__serializeBgOverlay(e,n)),r.util.populateWithProperties(this,o,n),o},_toObjects:function(t,e){return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(n){return this._toObject(n,t,e)}),this)},_toObject:function(t,e,n){var r;this.includeDefaultValues||(r=t.includeDefaultValues,t.includeDefaultValues=!1);var i=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=r),i},__serializeBgOverlay:function(t,e){var n={},r=this.backgroundImage,i=this.overlayImage;return this.backgroundColor&&(n.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(n.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),r&&!r.excludeFromExport&&(n.backgroundImage=this._toObject(r,t,e)),i&&!i.excludeFromExport&&(n.overlayImage=this._toObject(i,t,e)),n},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var n,o=e.width||this.width,a=e.height||this.height,s='viewBox="0 0 '+this.width+" "+this.height+'" ',u=r.Object.NUM_FRACTION_DIGITS;e.viewBox?s='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(n=this.viewportTransform,s='viewBox="'+i(-n[4]/n[0],u)+" "+i(-n[5]/n[3],u)+" "+i(this.width/n[0],u)+" "+i(this.height/n[3],u)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',o,'" ','height="',a,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",r.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+r.Object.__uid++,'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var t=this,e=["background","overlay"].map((function(e){var n=t[e+"Color"];if(n&&n.toLive){var i=t[e+"Vpt"],o=t.viewportTransform,a={width:t.width/(i?o[0]:1),height:t.height/(i?o[3]:1)};return n.toSVG(a,{additionalTransform:i?r.util.matrixToSVG(o):""})}}));return e.join("")},createSVGFontFacesMarkup:function(){var t,e,n,i,o,a,s,u,c,l="",h={},f=r.fontPaths,d=[];for(this._objects.forEach((function t(e){d.push(e),e._objects&&e._objects.forEach(t)})),u=0,c=d.length;u<c;u++)if(t=d[u],e=t.fontFamily,-1!==t.type.indexOf("text")&&!h[e]&&f[e]&&(h[e]=!0,t.styles))for(o in n=t.styles,n)for(s in i=n[o],i)a=i[s],e=a.fontFamily,!h[e]&&f[e]&&(h[e]=!0);for(var p in h)l+=["\t\t@font-face {\n","\t\t\tfont-family: '",p,"';\n","\t\t\tsrc: url('",f[p],"');\n","\t\t}\n"].join("");return l&&(l=['\t<style type="text/css">',"<![CDATA[\n",l,"]]>","</style>\n"].join("")),l},_setSVGObjects:function(t,e){var n,r,i,o=this._objects;for(r=0,i=o.length;r<i;r++)n=o[r],n.excludeFromExport||this._setSVGObject(t,n,e)},_setSVGObject:function(t,e,n){t.push(e.toSVG(n))},_setSVGBgOverlayImage:function(t,e,n){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(n))},_setSVGBgOverlayColor:function(t,e){var n=this[e+"Color"],i=this.viewportTransform,o=this.width,a=this.height;if(n)if(n.toLive){var s=n.repeat,u=r.util.invertTransform(i),c=this[e+"Vpt"],l=c?r.util.matrixToSVG(u):"";t.push('<rect transform="'+l+" translate(",o/2,",",a/2,')"',' x="',n.offsetX-o/2,'" y="',n.offsetY-a/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?n.source.width:o,'" height="',"repeat-x"===s||"no-repeat"===s?n.source.height:a,'" fill="url(#SVGID_'+n.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,r,i,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(i=o._objects,e=i.length;e--;)r=i[e],n(this._objects,r),this._objects.unshift(r);else n(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,r,i,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(i=o._objects,e=0;e<i.length;e++)r=i[e],n(this._objects,r),this._objects.push(r);else n(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var r,i,o,a,s,u=this._activeObject,c=0;if(t===u&&"activeSelection"===t.type)for(s=u._objects,r=0;r<s.length;r++)i=s[r],o=this._objects.indexOf(i),o>0+c&&(a=o-1,n(this._objects,i),this._objects.splice(a,0,i)),c++;else o=this._objects.indexOf(t),0!==o&&(a=this._findNewLowerIndex(t,o,e),n(this._objects,t),this._objects.splice(a,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,n){var r,i;if(n)for(r=e,i=e-1;i>=0;--i){var o=t.intersectsWithObject(this._objects[i])||t.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(t);if(o){r=i;break}}else r=e-1;return r},bringForward:function(t,e){if(!t)return this;var r,i,o,a,s,u=this._activeObject,c=0;if(t===u&&"activeSelection"===t.type)for(s=u._objects,r=s.length;r--;)i=s[r],o=this._objects.indexOf(i),o<this._objects.length-1-c&&(a=o+1,n(this._objects,i),this._objects.splice(a,0,i)),c++;else o=this._objects.indexOf(t),o!==this._objects.length-1&&(a=this._findNewUpperIndex(t,o,e),n(this._objects,t),this._objects.splice(a,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,n){var r,i,o;if(n)for(r=e,i=e+1,o=this._objects.length;i<o;++i){var a=t.intersectsWithObject(this._objects[i])||t.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(t);if(a){r=i;break}}else r=e+1;return r},moveTo:function(t,e){return n(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(r.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,r.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),t(r.StaticCanvas.prototype,r.Observable),t(r.StaticCanvas.prototype,r.Collection),t(r.StaticCanvas.prototype,r.DataURLExporter),t(r.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=u();if(!e||!e.getContext)return null;var n=e.getContext("2d");if(!n)return null;switch(t){case"setLineDash":return"undefined"!==typeof n.setLineDash;default:return null}}}),r.StaticCanvas.prototype.toJSON=r.StaticCanvas.prototype.toObject,r.isLikelyNode&&(r.StaticCanvas.prototype.createPNGStream=function(){var t=s(this.lowerCanvasEl);return t&&t.createPNGStream()},r.StaticCanvas.prototype.createJPEGStream=function(t){var e=s(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),r.BaseBrush=r.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,setShadow:function(t){return this.shadow=new r.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,r.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas,e=this.shadow,n=t.contextTop,i=t.getZoom();t&&t._isRetinaScaling()&&(i*=r.devicePixelRatio),n.shadowColor=e.color,n.shadowBlur=e.blur*i,n.shadowOffsetX=e.offsetX*i,n.shadowOffsetY=e.offsetY*i}},needsFullRender:function(){var t=new r.Color(this.color);return t.getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){r.PencilBrush=r.util.createClass(r.BaseBrush,{decimate:.4,initialize:function(t){this.canvas=t,this._points=[]},_drawSegment:function(t,e,n){var r=e.midPointFrom(n);return t.quadraticCurveTo(e.x,e.y,r.x,r.y),r},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&this._captureDrawingPath(t)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,r=n.length,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,n[r-2],n[r-1],!0),i.stroke(),i.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new r.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this._points.push(t),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new r.Point(t.x,t.y);return this._addPoint(e)},_render:function(){var t,e,n=this.canvas.contextTop,i=this._points[0],o=this._points[1];if(this._saveAndTransform(n),n.beginPath(),2===this._points.length&&i.x===o.x&&i.y===o.y){var a=this.width/1e3;i=new r.Point(i.x,i.y),o=new r.Point(o.x,o.y),i.x-=a,o.x+=a}for(n.moveTo(i.x,i.y),t=1,e=this._points.length;t<e;t++)this._drawSegment(n,i,o),i=this._points[t],o=this._points[t+1];n.lineTo(i.x,i.y),n.stroke(),n.restore()},convertPointsToSVGPath:function(t){var e,n=[],i=this.width/1e3,o=new r.Point(t[0].x,t[0].y),a=new r.Point(t[1].x,t[1].y),s=t.length,u=1,c=0,l=s>2;for(l&&(u=t[2].x<a.x?-1:t[2].x===a.x?0:1,c=t[2].y<a.y?-1:t[2].y===a.y?0:1),n.push("M ",o.x-u*i," ",o.y-c*i," "),e=1;e<s;e++){if(!o.eq(a)){var h=o.midPointFrom(a);n.push("Q ",o.x," ",o.y," ",h.x," ",h.y," ")}o=t[e],e+1<t.length&&(a=t[e+1])}return l&&(u=o.x>t[e-2].x?1:o.x===t[e-2].x?0:-1,c=o.y>t[e-2].y?1:o.y===t[e-2].y?0:-1),n.push("L ",o.x+u*i," ",o.y+c*i),n},createPath:function(t){var e=new r.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var n,i,o=this.canvas.getZoom(),a=Math.pow(e/o,2),s=t.length-1,u=t[0],c=[u];for(n=1;n<s;n++)i=Math.pow(u.x-t[n].x,2)+Math.pow(u.y-t[n].y,2),i>=a&&(u=t[n],c.push(u));return 1===c.length&&c.push(new r.Point(c[0].x,c[0].y)),c},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==e){var n=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.add(n),this.canvas.requestRenderAll(),n.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:n})}else this.canvas.requestRenderAll()}})}(),r.CircleBrush=r.util.createClass(r.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,e),n.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,n=this.canvas.contextTop,r=this.points;for(this._saveAndTransform(n),t=0,e=r.length;t<e;t++)this.dot(n,r[t]);n.restore()},onMouseMove:function(t){this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t)},onMouseUp:function(){var t,e,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var i=[];for(t=0,e=this.points.length;t<e;t++){var o=this.points[t],a=new r.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&a.setShadow(this.shadow),i.push(a)}var s=new r.Group(i);s.canvas=this.canvas,this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(t){var e=new r.Point(t.x,t.y),n=r.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new r.Color(this.color).setAlpha(r.util.getRandomInt(0,100)/100).toRgba();return e.radius=n,e.fill=i,this.points.push(e),e}}),r.SprayBrush=r.util.createClass(r.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.sprayChunks.length;n<i;n++)for(var o=this.sprayChunks[n],a=0,s=o.length;a<s;a++){var u=new r.Rect({width:o[a].width,height:o[a].width,left:o[a].x+1,top:o[a].y+1,originX:"center",originY:"center",fill:this.color});e.push(u)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var c=new r.Group(e);this.shadow&&c.setShadow(this.shadow),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,n,r,i={};for(n=0,r=t.length;n<r;n++)e=t[n].left+""+t[n].top,i[e]||(i[e]=t[n]);var o=[];for(e in i)o.push(i[e]);return o},render:function(t){var e,n,r=this.canvas.contextTop;for(r.fillStyle=this.color,this._saveAndTransform(r),e=0,n=t.length;e<n;e++){var i=t[e];"undefined"!==typeof i.opacity&&(r.globalAlpha=i.opacity),r.fillRect(i.x,i.y,i.width,i.width)}r.restore()},_render:function(){var t,e,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);n.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,n,i,o,a=this.width/2;for(o=0;o<this.density;o++){e=r.util.getRandomInt(t.x-a,t.x+a),n=r.util.getRandomInt(t.y-a,t.y+a),i=this.dotWidthVariance?r.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new r.Point(e,n);s.width=i,this.randomOpacity&&(s.opacity=r.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),r.PatternBrush=r.util.createClass(r.PencilBrush,{getPatternSrc:function(){var t=20,e=5,n=r.util.createCanvasElement(),i=n.getContext("2d");return n.width=n.height=t+e,i.fillStyle=this.color,i.beginPath(),i.arc(t/2,t/2,t/2,0,2*Math.PI,!1),i.closePath(),i.fill(),n},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),n=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new r.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),e}}),function(){var t=r.util.getPointer,e=r.util.degreesToRadians,n=r.util.radiansToDegrees,i=Math.atan2,o=Math.abs,a=r.StaticCanvas.supports("setLineDash"),s=.5;for(var u in r.Canvas=r.util.createClass(r.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=r.PencilBrush&&new r.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,n,r=this.getActiveObjects();if(r.length>0&&!this.preserveObjectStacking){e=[],n=[];for(var i=0,o=this._objects.length;i<o;i++)t=this._objects[i],-1===r.indexOf(t)?e.push(t):n.push(t);r.length>1&&(this._activeObject._objects=n),e.push.apply(e,n)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,n){var r,i=!0,o=n||this.getPointer(t,i);return r=e.group&&e.group===this._activeObject&&"activeSelection"===e.group.type?this._normalizePointer(e.group,o):{x:o.x,y:o.y},e.containsPoint(r)||e._findTargetCorner(o)},_normalizePointer:function(t,e){var n=t.calcTransformMatrix(),i=r.util.invertTransform(n),o=this.restorePointerVpt(e);return r.util.transformPoint(o,i)},isTargetTransparent:function(t,e,n){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var i=this._normalizePointer(t,{x:e,y:n}),o=Math.max(t.cacheTranslationX+i.x*t.zoomX,0),a=Math.max(t.cacheTranslationY+i.y*t.zoomY,0),s=r.util.isTransparent(t._cacheContext,Math.round(o),Math.round(a),this.targetFindTolerance);return s}var u=this.contextCache,c=t.selectionBackgroundColor,l=this.viewportTransform;t.selectionBackgroundColor="",this.clearContext(u),u.save(),u.transform(l[0],l[1],l[2],l[3],l[4],l[5]),t.render(u),u.restore(),t===this._activeObject&&t._renderControls(u,{hasBorders:!1,transparentCorners:!1},{hasBorders:!1}),t.selectionBackgroundColor=c;s=r.util.isTransparent(u,e,n,this.targetFindTolerance);return s},_isSelectionKeyPressed:function(t){var e=!1;return e="[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find((function(e){return!0===t[e]})):t[this.selectionKey],e},_shouldClearSelection:function(t,e){var n=this.getActiveObjects(),r=this._activeObject;return!e||e&&r&&n.length>1&&-1===n.indexOf(e)&&r!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&r&&r!==e},_shouldCenterTransform:function(t){if(t){var e,n=this._currentTransform;return"scale"===n.action||"scaleX"===n.action||"scaleY"===n.action?e=this.centeredScaling||t.centeredScaling:"rotate"===n.action&&(e=this.centeredRotation||t.centeredRotation),e?!n.altKey:n.altKey}},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?n.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(n.x="left"),"tl"===e||"mt"===e||"tr"===e?n.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(n.y="top"),n},_getActionFromCorner:function(t,e,n){if(!e||!t)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return n[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return n[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,n,i){if(n){var o=this.getPointer(t),a=n._findTargetCorner(this.getPointer(t,!0)),s=this._getActionFromCorner(i,a,t,n),u=this._getOriginFromCorner(n,a);this._currentTransform={target:n,action:s,corner:a,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:o.x-n.left,offsetY:o.y-n.top,originX:u.x,originY:u.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:e(n.angle),width:n.width*n.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey],original:r.util.saveObjectTransform(n)},this._currentTransform.original.originX=u.x,this._currentTransform.original.originY=u.y,this._resetCurrentTransform(),this._beforeTransform(t)}},_translateObject:function(t,e){var n=this._currentTransform,r=n.target,i=t-n.offsetX,o=e-n.offsetY,a=!r.get("lockMovementX")&&r.left!==i,s=!r.get("lockMovementY")&&r.top!==o;return a&&r.set("left",i),s&&r.set("top",o),a||s},_changeSkewTransformOrigin:function(t,e,n){var r="originX",i={0:"center"},o=e.target.skewX,a="left",s="right",u="mt"===e.corner||"ml"===e.corner?1:-1,c=1;t=t>0?1:-1,"y"===n&&(o=e.target.skewY,a="top",s="bottom",r="originY"),i[-1]=a,i[1]=s,e.target.flipX&&(c*=-1),e.target.flipY&&(c*=-1),0===o?(e.skewSign=-u*t*c,e[r]=i[-t]):(o=o>0?1:-1,e.skewSign=o,e[r]=i[o*u*c])},_skewObject:function(t,e,n){var i=this._currentTransform,o=i.target,a=!1,s=o.get("lockSkewingX"),u=o.get("lockSkewingY");if(s&&"x"===n||u&&"y"===n)return!1;var c,l,h=o.getCenterPoint(),f=o.toLocalPoint(new r.Point(t,e),"center","center")[n],d=o.toLocalPoint(new r.Point(i.lastX,i.lastY),"center","center")[n],p=o._getTransformedDimensions();return this._changeSkewTransformOrigin(f-d,i,n),c=o.toLocalPoint(new r.Point(t,e),i.originX,i.originY)[n],l=o.translateToOriginPoint(h,i.originX,i.originY),a=this._setObjectSkew(c,i,n,p),i.lastX=t,i.lastY=e,o.setPositionByOrigin(l,i.originX,i.originY),a},_setObjectSkew:function(t,e,n,i){var o,a,s,u,c,l,h,f,d,p=e.target,g=!1,m=e.skewSign;return"x"===n?(u="y",c="Y",l="X",f=0,d=p.skewY):(u="x",c="X",l="Y",f=p.skewX,d=0),s=p._getTransformedDimensions(f,d),h=2*Math.abs(t)-s[n],h<=2?o=0:(o=m*Math.atan(h/p["scale"+l]/(s[u]/p["scale"+c])),o=r.util.radiansToDegrees(o)),g=p["skew"+l]!==o,p.set("skew"+l,o),0!==p["skew"+c]&&(a=p._getTransformedDimensions(),o=i[u]/a[u]*p["scale"+c],p.set("scale"+c,o)),g},_scaleObject:function(t,e,n){var i=this._currentTransform,o=i.target,a=o.lockScalingX,s=o.lockScalingY,u=o.lockScalingFlip;if(a&&s)return!1;var c=o.translateToOriginPoint(o.getCenterPoint(),i.originX,i.originY),l=o.toLocalPoint(new r.Point(t,e),i.originX,i.originY),h=o._getTransformedDimensions(),f=!1;return this._setLocalMouse(l,i),f=this._setObjectScale(l,i,a,s,n,u,h),o.setPositionByOrigin(c,i.originX,i.originY),f},_setObjectScale:function(t,e,n,i,o,a,s){var u=e.target,c=!1,l=!1,h=!1,f=t.x*u.scaleX/s.x,d=t.y*u.scaleY/s.y,p=u.scaleX!==f,g=u.scaleY!==d;if(e.newScaleX=f,e.newScaleY=d,r.Textbox&&"x"===o&&u instanceof r.Textbox){var m=u.width*(t.x/s.x);return m>=u.getMinWidth()&&(h=m!==u.width,u.set("width",m),h)}return a&&f<=0&&f<u.scaleX&&(c=!0,t.x=0),a&&d<=0&&d<u.scaleY&&(l=!0,t.y=0),"equally"!==o||n||i?o?"x"!==o||u.get("lockUniScaling")?"y"!==o||u.get("lockUniScaling")||l||i||u.set("scaleY",d)&&(h=g):c||n||u.set("scaleX",f)&&(h=p):(c||n||u.set("scaleX",f)&&(h=h||p),l||i||u.set("scaleY",d)&&(h=h||g)):h=this._scaleObjectEqually(t,u,e,s),c||l||this._flipObject(e,o),h},_scaleObjectEqually:function(t,e,n,r){var i,o,a,s=t.y+t.x,u=r.y*n.original.scaleY/e.scaleY+r.x*n.original.scaleX/e.scaleX,c=t.x<0?-1:1,l=t.y<0?-1:1;return o=c*Math.abs(n.original.scaleX*s/u),a=l*Math.abs(n.original.scaleY*s/u),i=o!==e.scaleX||a!==e.scaleY,e.set("scaleX",o),e.set("scaleY",a),i},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var n=e.target,r=this.getZoom(),i=n.padding/r;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),o(t.x)>i?t.x<0?t.x+=i:t.x-=i:t.x=0,o(t.y)>i?t.y<0?t.y+=i:t.y-=i:t.y=0},_rotateObject:function(t,e){var r=this._currentTransform,o=r.target,a=o.translateToOriginPoint(o.getCenterPoint(),r.originX,r.originY);if(o.lockRotation)return!1;var s=i(r.ey-a.y,r.ex-a.x),u=i(e-a.y,t-a.x),c=n(u-s+r.theta),l=!0;if(o.snapAngle>0){var h=o.snapAngle,f=o.snapThreshold||h,d=Math.ceil(c/h)*h,p=Math.floor(c/h)*h;Math.abs(c-p)<f?c=p:Math.abs(c-d)<f&&(c=d)}return c<0&&(c=360+c),c%=360,o.angle===c?l=!1:(o.angle=c,o.setPositionByOrigin(a,r.originX,r.originY)),l},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,n=e.left,i=e.top,u=o(n),c=o(i);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(n>0?0:-n),e.ey-(i>0?0:-i),u,c)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!a){var l=e.ex+s-(n>0?0:u),h=e.ey+s-(i>0?0:c);t.beginPath(),r.util.drawDashedLine(t,l,h,l+u,h,this.selectionDashArray),r.util.drawDashedLine(t,l,h+c-1,l+u,h+c-1,this.selectionDashArray),r.util.drawDashedLine(t,l,h,l,h+c,this.selectionDashArray),r.util.drawDashedLine(t,l+u-1,h,l+u-1,h+c,this.selectionDashArray),t.closePath(),t.stroke()}else r.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+s-(n>0?0:u),e.ey+s-(i>0?0:c),u,c)},findTarget:function(t,e){if(!this.skipTargetFind){var n,r,i=!0,o=this.getPointer(t,i),a=this._activeObject,s=this.getActiveObjects();if(this.targets=[],s.length>1&&!e&&a===this._searchPossibleTargets([a],o))return a;if(1===s.length&&a._findTargetCorner(o))return a;if(1===s.length&&a===this._searchPossibleTargets([a],o)){if(!this.preserveObjectStacking)return a;n=a,r=this.targets,this.targets=[]}var u=this._searchPossibleTargets(this._objects,o);return t[this.altSelectionKey]&&u&&n&&u!==n&&(u=n,this.targets=r),u}},_checkTarget:function(t,e,n){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var r=this.isTargetTransparent(e,n.x,n.y);if(!r)return!0}},_searchPossibleTargets:function(t,e){var n,i,o=t.length;while(o--){var a=t[o],s=a.group&&"activeSelection"!==a.group.type?this._normalizePointer(a.group,e):e;if(this._checkTarget(s,a,e)){n=t[o],n.subTargetCheck&&n instanceof r.Group&&(i=this._searchPossibleTargets(n._objects,e),i&&this.targets.push(i));break}}return n},restorePointerVpt:function(t){return r.util.transformPoint(t,r.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var r,i=t(e),o=this.upperCanvasEl,a=o.getBoundingClientRect(),s=a.width||0,u=a.height||0;s&&u||("top"in a&&"bottom"in a&&(u=Math.abs(a.top-a.bottom)),"right"in a&&"left"in a&&(s=Math.abs(a.right-a.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,n||(i=this.restorePointerVpt(i));var c=this.getRetinaScaling();return 1!==c&&(i.x/=c,i.y/=c),r=0===s||0===u?{width:1,height:1}:{width:o.width/s,height:o.height/u},{x:i.x*r.width,y:i.y*r.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),r.util.addClass(n,"upper-canvas "+t),this.wrapperEl.appendChild(n),this._copyCanvasStyle(e,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=r.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),r.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),r.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,n=this.height||t.height;r.util.setStyle(t,{position:"absolute",width:e+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=n,r.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var n=!1,r=this.getActiveObjects(),i=[],o=[],a={e:e};t.forEach((function(t){-1===r.indexOf(t)&&(n=!0,t.fire("deselected",a),o.push(t))})),r.forEach((function(e){-1===t.indexOf(e)&&(n=!0,e.fire("selected",a),i.push(e))})),t.length>0&&r.length>0?(a.selected=i,a.deselected=o,a.updated=i[0]||o[0],a.target=this._activeObject,n&&this.fire("selection:updated",a)):r.length>0?(1===r.length&&(a.target=i[0],this.fire("object:selected",a)),a.selected=i,a.target=this._activeObject,this.fire("selection:created",a)):t.length>0&&(a.deselected=o,this.fire("selection:cleared",a))},setActiveObject:function(t,e){var n=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(n,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var n=this._activeObject;if(n){if(n.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),n=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:n,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(t){r.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,r.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,n){var r=this._realizeGroupTransformOnObject(t),i=this.callSuper("_toObject",t,e,n);return this._unwindGroupTransformOnObject(t,r),i},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return e.forEach((function(e){n[e]=t[e]})),this._activeObject.realizeTransform(t),n}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,n){var r=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,n),this._unwindGroupTransformOnObject(e,r)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),r.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),r.StaticCanvas)"prototype"!==u&&(r.Canvas[u]=r.StaticCanvas[u])}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=r.util.addListener,n=r.util.removeListener,i=3,o=2,a=1,s={passive:!1};function u(t,e){return t.button&&t.button===e-1}r.util.object.extend(r.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(e,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var n=this.upperCanvasEl,i=this._getEventPrefix();t(r.window,"resize",this._onResize),t(n,i+"down",this._onMouseDown),t(n,i+"move",this._onMouseMove,s),t(n,i+"out",this._onMouseOut),t(n,i+"enter",this._onMouseEnter),t(n,"wheel",this._onMouseWheel),t(n,"contextmenu",this._onContextMenu),t(n,"dblclick",this._onDoubleClick),t(n,"dragover",this._onDragOver),t(n,"dragenter",this._onDragEnter),t(n,"dragleave",this._onDragLeave),t(n,"drop",this._onDrop),this.enablePointerEvents||t(n,"touchstart",this._onTouchStart,s),"undefined"!==typeof eventjs&&e in eventjs&&(eventjs[e](n,"gesture",this._onGesture),eventjs[e](n,"drag",this._onDrag),eventjs[e](n,"orientation",this._onOrientationChange),eventjs[e](n,"shake",this._onShake),eventjs[e](n,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var t=this._getEventPrefix();n(r.document,t+"up",this._onMouseUp),n(r.document,"touchend",this._onTouchEnd,s),n(r.document,t+"move",this._onMouseMove,s),n(r.document,"touchmove",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var n=this;this._hoveredTargets.forEach((function(r){n.fire("mouse:out",{target:e,e:t}),r&&e.fire("mouseout",{e:t})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(t){t.isEditing&&t.hiddenTextarea.focus()}))},_onMouseEnter:function(t){this.currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var i=this.upperCanvasEl,o=this._getEventPrefix();e(r.document,"touchend",this._onTouchEnd,s),e(r.document,"touchmove",this._onMouseMove,s),n(i,o+"down",this._onMouseDown)},_onMouseDown:function(t){this.__onMouseDown(t),this._resetTransformEventData();var i=this.upperCanvasEl,o=this._getEventPrefix();n(i,o+"move",this._onMouseMove,s),e(r.document,o+"up",this._onMouseUp),e(r.document,o+"move",this._onMouseMove,s)},_onTouchEnd:function(t){if(!(t.touches.length>0)){this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;var i=this._getEventPrefix();n(r.document,"touchend",this._onTouchEnd,s),n(r.document,"touchmove",this._onMouseMove,s);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){e(o.upperCanvasEl,i+"down",o._onMouseDown),o._willAddMouseDown=0}),400)}},_onMouseUp:function(t){this.__onMouseUp(t),this._resetTransformEventData();var i=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(t)&&(n(r.document,o+"up",this._onMouseUp),n(r.document,o+"move",this._onMouseMove,s),e(i,o+"move",this._onMouseMove,s))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!==!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,n=this._currentTransform,r=this._groupSelector,s=!1,c=!r||0===r.left&&0===r.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),!u(t,i))return u(t,o)?(this.fireMiddleClick&&this._handleEvent(t,"up",o,c),void this._resetTransformEventData()):void(this.isDrawingMode&&this._isCurrentlyDrawing?this._onMouseUpInDrawingMode(t):this._isMainEvent(t)&&(n&&(this._finalizeCurrentTransform(t),s=n.actionPerformed),c||(this._maybeGroupObjects(t),s||(s=this._shouldRender(e))),e&&(e.isMoving=!1),this._setCursorFromEvent(t,e),this._handleEvent(t,"up",a,c),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),s?this.requestRenderAll():c||this.renderTop()));this.fireRightClick&&this._handleEvent(t,"up",i,c)},_simpleEventHandler:function(t,e){var n=this.findTarget(e),r=this.targets,i={e:e,target:n,subTargets:r};if(this.fire(t,i),n&&n.fire(t,i),!r)return n;for(var o=0;o<r.length;o++)r[o].fire(t,i);return n},_handleEvent:function(t,e,n,r){var i=this._target,o=this.targets||[],s={e:t,target:i,subTargets:o,button:n||a,isClick:r||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};this.fire("mouse:"+e,s),i&&i.fire("mouse"+e,s);for(var u=0;u<o.length;u++)o[u].fire("mouse"+e,s)},_finalizeCurrentTransform:function(t){var e,n=this._currentTransform,r=n.target,i={e:t,target:r,transform:n};r._scaling&&(r._scaling=!1),r.setCoords(),(n.actionPerformed||this.stateful&&r.hasStateChanged())&&(n.actionPerformed&&(e=this._addEventOptions(i,n),this._fire(e,i)),this._fire("modified",i))},_addEventOptions:function(t,e){var n,r;switch(e.action){case"scaleX":n="scaled",r="x";break;case"scaleY":n="scaled",r="y";break;case"skewX":n="skewed",r="x";break;case"skewY":n="skewed",r="y";break;case"scale":n="scaled",r="equally";break;case"rotate":n="rotated";break;case"drag":n="moved";break}return t.by=r,n},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll(),this.clipTo&&r.util.clipContext(this,this.contextTop);var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this.clipTo&&this.contextTop.restore();var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(u(t,i))this.fireRightClick&&this._handleEvent(t,"down",i);else if(u(t,o))this.fireMiddleClick&&this._handleEvent(t,"down",o);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var n=this._pointer;this._previousPointer=n;var r=this._shouldRender(e),a=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):a&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:n.x,ey:n.y,top:0,left:0}),e){var s=e===this._activeObject;e.selectable&&this.setActiveObject(e,t),e!==this._activeObject||!e.__corner&&a||this._setupCurrentTransform(t,e,s)}this._handleEvent(t,"down"),(r||a)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e}),e.corner&&this.onBeforeScaleRotate(e.target)},__onMouseMove:function(t){var e,n;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var r=this._groupSelector;r?(n=this._pointer,r.left=n.x-r.ex,r.top=n.y-r.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var n=this._hoveredTarget,r=this._hoveredTargets,i=this.targets,o=Math.max(r.length,i.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var a=0;a<o;a++)this.fireSyntheticInOutEvents(i[a],e,{oldTarget:r[a],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var n=this._draggedoverTarget,r=this._hoveredTargets,i=this.targets,o=Math.max(r.length,i.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:"dragleave",evtIn:"dragenter"});for(var a=0;a<o;a++)this.fireSyntheticInOutEvents(i[a],e,{oldTarget:r[a],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,n){var r,i,o,a,s=n.oldTarget,u=s!==t,c=n.canvasEvtIn,l=n.canvasEvtOut;u&&(r={e:e,target:t,previousTarget:s},i={e:e,target:s,nextTarget:t}),a=t&&u,o=s&&u,o&&(l&&this.fire(l,i),s.fire(n.evtOut,i)),a&&(c&&this.fire(c,r),t.fire(n.evtIn,r))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.target.isMoving=!0,n.shiftKey=t.shiftKey,n.altKey=t[this.centeredKey],this._beforeScaleTransform(t,n),this._performTransformAction(t,n,e),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,n){var r=n.x,i=n.y,o=e.action,a=!1,s={target:e.target,e:t,transform:e,pointer:n};"rotate"===o?(a=this._rotateObject(r,i))&&this._fire("rotating",s):"scale"===o?(a=this._onScale(t,e,r,i))&&this._fire("scaling",s):"scaleX"===o?(a=this._scaleObject(r,i,"x"))&&this._fire("scaling",s):"scaleY"===o?(a=this._scaleObject(r,i,"y"))&&this._fire("scaling",s):"skewX"===o?(a=this._skewObject(r,i,"x"))&&this._fire("skewing",s):"skewY"===o?(a=this._skewObject(r,i,"y"))&&this._fire("skewing",s):(a=this._translateObject(r,i),a&&(this._fire("moving",s),this.setCursor(s.target.moveCursor||this.moveCursor))),e.actionPerformed=e.actionPerformed||a},_fire:function(t,e){this.fire("object:"+t,e),e.target.fire(t,e)},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var n=this._shouldCenterTransform(e.target);(n&&("center"!==e.originX||"center"!==e.originY)||!n&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,n,r){return this._isUniscalePossible(t,e.target)?(e.currentAction="scale",this._scaleObject(n,r)):(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(n,r,"equally"))},_isUniscalePossible:function(t,e){return(t[this.uniScaleKey]||this.uniScaleTransform)&&!e.get("lockUniScaling")},_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var n=e.hoverCursor||this.hoverCursor,r=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,i=(!r||!r.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));i?this.setCursor(this.getCornerCursor(i,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map((function(t){n=t.hoverCursor||n})),this.setCursor(n))},getCornerCursor:function(e,n,r){return this.actionIsDisabled(e,n,r)?this.notAllowedCursor:e in t?this._getRotatedCornerCursor(e,n,r):"mtr"===e&&n.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(t,e,n){return"mt"===t||"mb"===t?n[this.altActionKey]?e.lockSkewingX:e.lockScalingY:"ml"===t||"mr"===t?n[this.altActionKey]?e.lockSkewingY:e.lockScalingX:"mtr"===t?e.lockRotation:this._isUniscalePossible(n,e)?e.lockScalingX&&e.lockScalingY:e.lockScalingX||e.lockScalingY},_getRotatedCornerCursor:function(e,n,r){var i=Math.round(n.angle%360/45);return i<0&&(i+=8),i+=t[e],r[this.altActionKey]&&t[e]%2===0&&(i+=2),i%=8,this.cursorMap[i]}})}(),function(){var t=Math.min,e=Math.max;r.util.object.extend(r.Canvas.prototype,{_shouldGroup:function(t,e){var n=this._activeObject;return n&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(n!==e||"activeSelection"===n.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var n=this._activeObject;n.__corner||(e!==n||(e=this.findTarget(t,!0),e&&e.selectable))&&(n&&"activeSelection"===n.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var n=this._activeObject,r=n._objects.slice(0);n.contains(t)?(n.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),e)):(n.addWithUpdate(t),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,e)},_createActiveSelection:function(t,e){var n=this.getActiveObjects(),r=this._createGroup(t);this._hoveredTarget=r,this._setActiveObject(r,e),this._fireSelectionEvents(n,e)},_createGroup:function(t){var e=this._objects,n=e.indexOf(this._activeObject)<e.indexOf(t),i=n?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new r.ActiveSelection(i,{canvas:this})},_groupSelectedObjects:function(t){var e,n=this._collectObjects(t);1===n.length?this.setActiveObject(n[0],t):n.length>1&&(e=new r.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(n){for(var i,o=[],a=this._groupSelector.ex,s=this._groupSelector.ey,u=a+this._groupSelector.left,c=s+this._groupSelector.top,l=new r.Point(t(a,u),t(s,c)),h=new r.Point(e(a,u),e(s,c)),f=!this.selectionFullyContained,d=a===u&&s===c,p=this._objects.length;p--;)if(i=this._objects[p],i&&i.selectable&&i.visible&&(f&&i.intersectsWithRect(l,h)||i.isContainedWithinRect(l,h)||f&&i.containsPoint(l)||f&&i.containsPoint(h))&&(o.push(i),d))break;return o.length>1&&(o=o.filter((function(t){return!t.onSelect({e:n})}))),o},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){r.util.object.extend(r.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",n=t.quality||1,i=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),o=this.toCanvasElement(i,t);return r.util.toDataURL(o,e,n)},toCanvasElement:function(t,e){t=t||1,e=e||{};var n=(e.width||this.width)*t,i=(e.height||this.height)*t,o=this.getZoom(),a=this.width,s=this.height,u=o*t,c=this.viewportTransform,l=(c[4]-(e.left||0))*t,h=(c[5]-(e.top||0))*t,f=this.interactive,d=[u,0,0,u,l,h],p=this.enableRetinaScaling,g=r.util.createCanvasElement(),m=this.contextTop;return g.width=n,g.height=i,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=n,this.height=i,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),this._objects),this.viewportTransform=c,this.width=a,this.height=s,this.calcViewportBoundaries(),this.interactive=f,this.enableRetinaScaling=p,this.contextTop=m,g}})}(),r.util.object.extend(r.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,n){return this.loadFromJSON(t,e,n)},loadFromJSON:function(t,e,n){if(t){var i="string"===typeof t?JSON.parse(t):r.util.object.clone(t),o=this,a=i.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete i.clipPath,this._enlivenObjects(i.objects,(function(t){o.clear(),o._setBgOverlay(i,(function(){a?o._enlivenObjects([a],(function(n){o.clipPath=n[0],o.__setupCanvas.call(o,i,t,s,e)})):o.__setupCanvas.call(o,i,t,s,e)}))}),n),this}},__setupCanvas:function(t,e,n,r){var i=this;e.forEach((function(t,e){i.insertAt(t,e)})),this.renderOnAddRemove=n,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),r&&r()},_setBgOverlay:function(t,e){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var r=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,r),this.__setBgOverlay("overlayImage",t.overlayImage,n,r),this.__setBgOverlay("backgroundColor",t.background,n,r),this.__setBgOverlay("overlayColor",t.overlay,n,r)}else e&&e()},__setBgOverlay:function(t,e,n,i){var o=this;if(!e)return n[t]=!0,void(i&&i());"backgroundImage"===t||"overlayImage"===t?r.util.enlivenObjects([e],(function(e){o[t]=e[0],n[t]=!0,i&&i()})):this["set"+r.util.string.capitalize(t,!0)](e,(function(){n[t]=!0,i&&i()}))},_enlivenObjects:function(t,e,n){t&&0!==t.length?r.util.enlivenObjects(t,(function(t){e&&e(t)}),null,n):e&&e([])},_toDataURL:function(t,e){this.clone((function(n){e(n.toDataURL(t))}))},_toDataURLWithMultiplier:function(t,e,n){this.clone((function(r){n(r.toDataURLWithMultiplier(t,e))}))},clone:function(t,e){var n=JSON.stringify(this.toJSON(e));this.cloneWithoutData((function(e){e.loadFromJSON(n,(function(){t&&t(e)}))}))},cloneWithoutData:function(t){var e=r.util.createCanvasElement();e.width=this.width,e.height=this.height;var n=new r.Canvas(e);n.clipTo=this.clipTo,this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,(function(){n.renderAll(),t&&t(n)})),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,r=e.util.object.clone,i=e.util.toFixed,o=e.util.string.capitalize,a=e.util.degreesToRadians,s=e.StaticCanvas.supports("setLineDash"),u=!e.isLikelyNode,c=2;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:u,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var n=e.perfLimitSizeTotal,r=t.width,i=t.height,o=e.maxCacheSideLimit,a=e.minCacheSideLimit;if(r<=o&&i<=o&&r*i<=n)return r<a&&(t.width=a),i<a&&(t.height=a),t;var s=r/i,u=e.util.limitDimsByArea(s,n),c=e.util.capValue,l=c(a,u.x,o),h=c(a,u.y,o);return r>l&&(t.zoomX/=r/l,t.width=l,t.capped=!0),i>h&&(t.zoomY/=i/h,t.height=h,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),n=e.x*t.scaleX/this.scaleX,r=e.y*t.scaleY/this.scaleY;return{width:n+c,height:r+c,zoomX:t.scaleX,zoomY:t.scaleY,x:n,y:r}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var n=t._currentTransform.target,r=t._currentTransform.action;if(this===n&&r.slice&&"scale"===r.slice(0,5))return!1}var i,o,a=this._cacheCanvas,s=this._limitCacheSize(this._getCacheCanvasDimensions()),u=e.minCacheSideLimit,c=s.width,l=s.height,h=s.zoomX,f=s.zoomY,d=c!==this.cacheWidth||l!==this.cacheHeight,p=this.zoomX!==h||this.zoomY!==f,g=d||p,m=0,v=0,y=!1;if(d){var b=this._cacheCanvas.width,x=this._cacheCanvas.height,w=c>b||l>x,_=(c<.9*b||l<.9*x)&&b>u&&x>u;y=w||_,w&&!s.capped&&(c>u||l>u)&&(m=.1*c,v=.1*l)}return!!g&&(y?(a.width=Math.ceil(c+m),a.height=Math.ceil(l+v)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,a.width,a.height)),i=s.x/2,o=s.y/2,this.cacheTranslationX=Math.round(a.width/2-i)+i,this.cacheTranslationY=Math.round(a.height/2-o)+o,this.cacheWidth=c,this.cacheHeight=l,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,f),this.zoomX=h,this.zoomY=f,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initClipping(t),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e;e=this.group&&!this.group._transformDone?this.calcTransformMatrix():this.calcOwnMatrix(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},toObject:function(t){var n=e.Object.NUM_FRACTION_DIGITS,r={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:i(this.left,n),top:i(this.top,n),width:i(this.width,n),height:i(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:i(this.strokeMiterLimit,n),scaleX:i(this.scaleX,n),scaleY:i(this.scaleY,n),angle:i(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:i(this.skewX,n),skewY:i(this.skewY,n)};return this.clipPath&&(r.clipPath=this.clipPath.toObject(t),r.clipPath.inverted=this.clipPath.inverted,r.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,r,t),this.includeDefaultValues||(r=this._removeDefaultValues(r)),r},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var n=e.util.getKlass(t.type).prototype,r=n.stateProperties;return r.forEach((function(e){if("left"!==e&&"top"!==e){t[e]===n[e]&&delete t[e];var r="[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(n[e]);r&&0===t[e].length&&0===n[e].length&&delete t[e]}})),t},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){var t=e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,n=t.scaleY;if(this.canvas){var r=this.canvas.getZoom(),i=this.canvas.getRetinaScaling();e*=r*i,n*=r*i}return{scaleX:e,scaleY:n}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,n){var r="scaleX"===t||"scaleY"===t,i=this[t]!==n,o=!1;return r&&(n=this._constrainScale(n)),"scaleX"===t&&n<0?(this.flipX=!this.flipX,n*=-1):"scaleY"===t&&n<0?(this.flipY=!this.flipY,n*=-1):"shadow"!==t||!n||n instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",n):n=new e.Shadow(n),this[t]=n,i&&(o=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,o&&this.group.set("dirty",!0)):o&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&e.util.clipContext(this,t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&t.restore(),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t){var n=this.clipPath;if(t.save(),n.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",n.absolutePositioned){var r=e.util.invertTransform(this.calcTransformMatrix());t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},drawObject:function(t,e){var n=this.fill,r=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):(this._renderBackground(t),this._setStrokeStyles(t,this),this._setFillStyles(t,this)),this._render(t),this._drawClipPath(t),this.fill=n,this.stroke=r},_drawClipPath:function(t){var e=this.clipPath;e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){e.stroke&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,t.strokeStyle=e.stroke.toLive?e.stroke.toLive(t,this):e.stroke)},_setFillStyles:function(t,e){e.fill&&(t.fillStyle=e.fill.toLive?e.fill.toLive(t,this):e.fill)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e,n){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),s?t.setLineDash(e):n&&n(t))},_renderControls:function(t,n){var r,i,o,s=this.getViewportTransform(),u=this.calcTransformMatrix();n=n||{},i="undefined"!==typeof n.hasBorders?n.hasBorders:this.hasBorders,o="undefined"!==typeof n.hasControls?n.hasControls:this.hasControls,u=e.util.multiplyTransformMatrices(s,u),r=e.util.qrDecompose(u),t.save(),t.translate(r.translateX,r.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),n.forActiveSelection?(t.rotate(a(r.angle)),i&&this.drawBordersInGroup(t,r,n)):(t.rotate(a(this.angle)),i&&this.drawBorders(t,n)),o&&this.drawControls(t,n),t.restore()},_setShadow:function(t){if(this.shadow){var n,r=this.shadow,i=this.canvas,o=i&&i.viewportTransform[0]||1,a=i&&i.viewportTransform[3]||1;n=r.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),i&&i._isRetinaScaling()&&(o*=e.devicePixelRatio,a*=e.devicePixelRatio),t.shadowColor=r.color,t.shadowBlur=r.blur*e.browserShadowBlurConstant*(o+a)*(n.scaleX+n.scaleY)/4,t.shadowOffsetX=r.offsetX*o*n.scaleX,t.shadowOffsetY=r.offsetY*a*n.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var n=e.gradientTransform||e.patternTransform,r=-this.width/2+e.offsetX||0,i=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,r,i):t.transform(1,0,0,1,r,i),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:r,offsetY:i}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group){var e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this.stroke.toLive&&"percentage"===this.stroke.gradientUnits?this._applyPatternForTransformedGradient(t,this.stroke):this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore()}},_applyPatternForTransformedGradient:function(t,n){var r,i=this._limitCacheSize(this._getCacheCanvasDimensions()),o=e.util.createCanvasElement(),a=this.canvas.getRetinaScaling(),s=i.x/this.scaleX/a,u=i.y/this.scaleY/a;o.width=s,o.height=u,r=o.getContext("2d"),r.beginPath(),r.moveTo(0,0),r.lineTo(s,0),r.lineTo(s,u),r.lineTo(0,u),r.closePath(),r.translate(s/2,u/2),r.scale(i.zoomX/this.scaleX/a,i.zoomY/this.scaleY/a),this._applyPatternGradientTransform(r,n),r.fillStyle=n.toLive(t),r.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(a*this.scaleX/i.zoomX,a*this.scaleY/i.zoomY),t.strokeStyle=r.createPattern(o,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=e.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,n.x+=t.offsetLeft,n.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(n,"center","center")},clone:function(t,n){var r=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(r,t):e.Object._fromObject("Object",r,t)},cloneAsImage:function(t,n){var r=this.toCanvasElement(n);return t&&t(new e.Image(r)),this},toCanvasElement:function(t){t||(t={});var n=e.util,r=n.saveObjectTransform(this),i=this.group,o=this.shadow,a=Math.abs,s=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);delete this.group,t.withoutTransform&&n.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var u,c,l,h,f=e.util.createCanvasElement(),d=this.getBoundingRect(!0,!0),p=this.shadow,g={x:0,y:0};p&&(c=p.blur,u=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(a(p.offsetX)+c)*a(u.scaleX),g.y=2*Math.round(a(p.offsetY)+c)*a(u.scaleY)),l=d.width+g.x,h=d.height+g.y,f.width=Math.ceil(l),f.height=Math.ceil(h);var m=new e.StaticCanvas(f,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(m.backgroundColor="#fff"),this.setPositionByOrigin(new e.Point(m.width/2,m.height/2),"center","center");var v=this.canvas;m.add(this);var y=m.toCanvasElement(s||1,t);return this.shadow=o,this.set("canvas",v),i&&(this.group=i),this.set(r).setCoords(),m._objects=[],m.dispose(),m=null,y},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||"png",t.quality||1)},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,n){n||(n={});var r={colorStops:[]};return r.type=n.type||(n.r1||n.r2?"radial":"linear"),r.coords={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},r.gradientUnits=n.gradientUnits||"pixels",(n.r1||n.r2)&&(r.coords.r1=n.r1,r.coords.r2=n.r2),r.gradientTransform=n.gradientTransform,e.Gradient.prototype.addColorStop.call(r,n.colorStops),this.set(t,e.Gradient.forObject(this,r))},setPatternFill:function(t,n){return this.set("fill",new e.Pattern(t,n))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,n){n=n||this.canvas.getPointer(t);var r=new e.Point(n.x,n.y),i=this._getLeftTopCoords();return this.angle&&(r=e.util.rotatePoint(r,i,a(-this.angle))),{x:r.x-i.x,y:r.y-i.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),n(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,n,i,o){var a=e[t];n=r(n,!0),e.util.enlivenPatterns([n.fill,n.stroke],(function(t){"undefined"!==typeof t[0]&&(n.fill=t[0]),"undefined"!==typeof t[1]&&(n.stroke=t[1]),e.util.enlivenObjects([n.clipPath],(function(t){n.clipPath=t[0];var e=o?new a(n[o],n):new a(n);i&&i(e)}))}))},e.Object.__uid=0)}(e),function(){var t=r.util.degreesToRadians,e={left:-.5,center:0,right:.5},n={top:-.5,center:0,bottom:.5};r.util.object.extend(r.Object.prototype,{translateToGivenOrigin:function(t,i,o,a,s){var u,c,l,h=t.x,f=t.y;return"string"===typeof i?i=e[i]:i-=.5,"string"===typeof a?a=e[a]:a-=.5,u=a-i,"string"===typeof o?o=n[o]:o-=.5,"string"===typeof s?s=n[s]:s-=.5,c=s-o,(u||c)&&(l=this._getTransformedDimensions(),h=t.x+u*l.x,f=t.y+c*l.y),new r.Point(h,f)},translateToCenterPoint:function(e,n,i){var o=this.translateToGivenOrigin(e,n,i,"center","center");return this.angle?r.util.rotatePoint(o,e,t(this.angle)):o},translateToOriginPoint:function(e,n,i){var o=this.translateToGivenOrigin(e,"center","center",n,i);return this.angle?r.util.rotatePoint(o,e,t(this.angle)):o},getCenterPoint:function(){var t=new r.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(e,n,i){var o,a,s=this.getCenterPoint();return o="undefined"!==typeof n&&"undefined"!==typeof i?this.translateToGivenOrigin(s,"center","center",n,i):new r.Point(this.left,this.top),a=new r.Point(e.x,e.y),this.angle&&(a=r.util.rotatePoint(a,s,-t(this.angle))),a.subtractEquals(o)},setPositionByOrigin:function(t,e,n){var r=this.translateToCenterPoint(t,e,n),i=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",i.x),this.set("top",i.y)},adjustPosition:function(n){var i,o,a=t(this.angle),s=this.getScaledWidth(),u=r.util.cos(a)*s,c=r.util.sin(a)*s;i="string"===typeof this.originX?e[this.originX]:this.originX-.5,o="string"===typeof n?e[n]:n-.5,this.left+=u*(o-i),this.top+=c*(o-i),this.setCoords(),this.originX=n},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function t(t){return[new r.Point(t.tl.x,t.tl.y),new r.Point(t.tr.x,t.tr.y),new r.Point(t.br.x,t.br.y),new r.Point(t.bl.x,t.bl.y)]}var e=r.util.degreesToRadians,n=r.util.multiplyTransformMatrices,i=r.util.transformPoint;r.util.object.extend(r.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(e,n){this.oCoords||this.setCoords();var r=e?this.aCoords:this.oCoords;return t(n?this.calcCoords(e):r)},intersectsWithRect:function(t,e,n,i){var o=this.getCoords(n,i),a=r.Intersection.intersectPolygonRectangle(o,t,e);return"Intersection"===a.status},intersectsWithObject:function(t,e,n){var i=r.Intersection.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n));return"Intersection"===i.status||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)},isContainedWithinObject:function(t,e,n){for(var r=this.getCoords(e,n),i=0,o=t._getImageLines(n?t.calcCoords(e):e?t.aCoords:t.oCoords);i<4;i++)if(!t.containsPoint(r[i],o))return!1;return!0},isContainedWithinRect:function(t,e,n,r){var i=this.getBoundingRect(n,r);return i.left>=t.x&&i.left+i.width<=e.x&&i.top>=t.y&&i.top+i.height<=e.y},containsPoint:function(t,e,n,r){e=e||this._getImageLines(r?this.calcCoords(n):n?this.aCoords:this.oCoords);var i=this._findCrossPoints(t,e);return 0!==i&&i%2===1},isOnScreen:function(t){if(!this.canvas)return!1;for(var e,n=this.canvas.vptCoords.tl,r=this.canvas.vptCoords.br,i=this.getCoords(!0,t),o=0;o<4;o++)if(e=i[o],e.x<=r.x&&e.x>=n.x&&e.y<=r.y&&e.y>=n.y)return!0;return!!this.intersectsWithRect(n,r,!0,t)||this._containsCenterOfCanvas(n,r,t)},_containsCenterOfCanvas:function(t,e,n){var r={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(r,null,!0,n)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,n,!0,t)||this._containsCenterOfCanvas(e,n,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var n,r,i,o,a,s,u=0;for(var c in e)if(s=e[c],!(s.o.y<t.y&&s.d.y<t.y)&&!(s.o.y>=t.y&&s.d.y>=t.y)&&(s.o.x===s.d.x&&s.o.x>=t.x?a=s.o.x:(n=0,r=(s.d.y-s.o.y)/(s.d.x-s.o.x),i=t.y-n*t.x,o=s.o.y-r*s.o.x,a=-(i-o)/(n-r)),a>=t.x&&(u+=1),2===u))break;return u},getBoundingRect:function(t,e){var n=this.getCoords(t,e);return r.util.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)},scaleToHeight:function(t,e){var n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)},calcCoords:function(t){var o=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),s=n(a,o),u=this.getViewportTransform(),c=t?s:n(u,s),l=this._getTransformedDimensions(),h=l.x/2,f=l.y/2,d=i({x:-h,y:-f},c),p=i({x:h,y:-f},c),g=i({x:-h,y:f},c),m=i({x:h,y:f},c);if(!t){var v=this.padding,y=e(this.angle),b=r.util.cos(y),x=r.util.sin(y),w=b*v,_=x*v,O=w+_,S=w-_;v&&(d.x-=S,d.y-=O,p.x+=O,p.y-=S,g.x-=O,g.y+=S,m.x+=S,m.y+=O);var C=new r.Point((d.x+g.x)/2,(d.y+g.y)/2),k=new r.Point((p.x+d.x)/2,(p.y+d.y)/2),A=new r.Point((m.x+p.x)/2,(m.y+p.y)/2),T=new r.Point((m.x+g.x)/2,(m.y+g.y)/2),E=new r.Point(k.x+x*this.rotatingPointOffset,k.y-b*this.rotatingPointOffset)}var j={tl:d,tr:p,br:m,bl:g};return t||(j.ml=C,j.mt=k,j.mr=A,j.mb=T,j.mtr=E),j},setCoords:function(t,e){return this.oCoords=this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){return r.util.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",n="";return!t&&this.group&&(n=this.group.transformMatrixKey(t)+e),n+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){if(t)return this.calcOwnMatrix();var e=this.transformMatrixKey(),r=this.matrixCache||(this.matrixCache={});if(r.key===e)return r.value;var i=this.calcOwnMatrix();return this.group&&(i=n(this.group.calcTransformMatrix(),i)),r.key=e,r.value=i,i},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===t)return e.value;var n=this._calcTranslateMatrix();return this.translateX=n[4],this.translateY=n[5],e.key=t,e.value=r.util.composeMatrix(this),e.value},_calcDimensionsTransformMatrix:function(t,e,n){return r.util.calcDimensionsMatrix({skewX:t,skewY:e,scaleX:this.scaleX*(n&&this.flipX?-1:1),scaleY:this.scaleY*(n&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var t=this.strokeWidth,e=this.width+t,n=this.height+t;return{x:e,y:n}},_getTransformedDimensions:function(t,e){"undefined"===typeof t&&(t=this.skewX),"undefined"===typeof e&&(e=this.skewY);var n,i,o=this._getNonTransformedDimensions(),a=0===t&&0===e;if(this.strokeUniform?(n=this.width,i=this.height):(n=o.x,i=o.y),a)return this._finalizeDimensions(n*this.scaleX,i*this.scaleY);n/=2,i/=2;var s=[{x:-n,y:-i},{x:n,y:-i},{x:-n,y:i},{x:n,y:i}],u=r.util.calcDimensionsMatrix({scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:e}),c=r.util.makeBoundingBoxFromPoints(s,u);return this._finalizeDimensions(c.width,c.height)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions(),n=r.util.transformPoint(e,t,!0);return n.scalarAdd(2*this.padding)}})}(),r.util.object.extend(r.Object.prototype,{sendToBack:function(){return this.group?r.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?r.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?r.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?r.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?r.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var n=new r.Color(e),i=t+": "+n.toRgb()+"; ",o=n.getAlpha();return 1!==o&&(i+=t+"-opacity: "+o.toString()+"; "),i}return t+": none; "}var e=r.util.toFixed;r.util.object.extend(r.Object.prototype,{getSvgStyles:function(e){var n=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",u=this.strokeMiterLimit?this.strokeMiterLimit:"4",c="undefined"!==typeof this.opacity?this.opacity:"1",l=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),f=t("fill",this.fill),d=t("stroke",this.stroke);return[d,"stroke-width: ",r,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",u,"; ",f,"fill-rule: ",n,"; ","opacity: ",c,";",h,l].join("")},getSvgSpanStyles:function(e,n){var r="; ",i=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+r:"",o=e.strokeWidth?"stroke-width: "+e.strokeWidth+r:"",a=(i=i,e.fontSize?"font-size: "+e.fontSize+"px"+r:""),s=e.fontStyle?"font-style: "+e.fontStyle+r:"",u=e.fontWeight?"font-weight: "+e.fontWeight+r:"",c=e.fill?t("fill",e.fill):"",l=e.stroke?t("stroke",e.stroke):"",h=this.getSvgTextDecoration(e),f=e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"";return h&&(h="text-decoration: "+h+r),[l,o,i,a,s,u,h,c,f,n?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return["overline","underline","line-through"].filter((function(e){return t[e.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,e){var n=t?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'+r.util.matrixToSVG(n);return i+(e||"")+this.getSvgTransformMatrix()+'" '},getSvgTransformMatrix:function(){return this.transformMatrix?" "+r.util.matrixToSVG(this.transformMatrix):""},_setSVGBg:function(t){if(this.backgroundColor){var n=r.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',e(-this.width/2,n),'" y="',e(-this.height/2,n),'" width="',e(this.width,n),'" height="',e(this.height,n),'"></rect>\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){e=e||{};var n=e.reviver,r=e.additionalTransform||"",i=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=i,n?n(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){e=e||{};var n,i,o=e.noStyle,a=e.reviver,s=o?"":'style="'+this.getSvgStyles()+'" ',u=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",c=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=c&&c.absolutePositioned,f=this.stroke,d=this.fill,p=this.shadow,g=[],m=t.indexOf("COMMON_PARTS"),v=e.additionalTransform;return c&&(c.clipPathId="CLIPPATH_"+r.Object.__uid++,i='<clipPath id="'+c.clipPathId+'" >\n'+c.toClipPathSVG(a)+"</clipPath>\n"),h&&g.push("<g ",u,this.getSvgCommons()," >\n"),g.push("<g ",this.getSvgTransform(!1),h?"":u+this.getSvgCommons()," >\n"),n=[s,l,o?"":this.addPaintOrder()," ",v?'transform="'+v+'" ':""].join(""),t[m]=n,d&&d.toLive&&g.push(d.toSVG(this)),f&&f.toLive&&g.push(f.toSVG(this)),p&&g.push(p.toSVG(this)),c&&g.push(i),g.push(t.join("")),g.push("</g>\n"),h&&g.push("</g>\n"),a?a(g.join("")):g.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var t=r.util.object.extend,e="stateProperties";function n(e,n,r){var i={},o=!0;r.forEach((function(t){i[t]=e[t]})),t(e[n],i,o)}function i(t,e,n){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0,o=t.length;r<o;r++)if(!i(t[r],e[r]))return!1;return!0}if(t&&"object"===typeof t){var a,s=Object.keys(t);if(!e||"object"!==typeof e||!n&&s.length!==Object.keys(e).length)return!1;for(r=0,o=s.length;r<o;r++)if(a=s[r],"canvas"!==a&&!i(t[a],e[a]))return!1;return!0}}r.util.object.extend(r.Object.prototype,{hasStateChanged:function(t){t=t||e;var n="_"+t;return Object.keys(this[n]).length<this[t].length||!i(this[n],this,!0)},saveState:function(t){var r=t&&t.propertySet||e,i="_"+r;return this[i]?(n(this,i,this[r]),t&&t.stateProperties&&n(this,i,t.stateProperties),this):this.setupState(t)},setupState:function(t){t=t||{};var n=t.propertySet||e;return t.propertySet=n,this["_"+n]={},this.saveState(t),this}})}(),function(){var t=r.util.degreesToRadians;r.util.object.extend(r.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var e,n,r=t.x,i=t.y;for(var o in this.__corner=0,this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(n=this._getImageLines(this.oCoords[o].corner),e=this._findCrossPoints({x:r,y:i},n),0!==e&&e%2===1))return this.__corner=o,o;return!1},_setCornerCoords:function(){var e,n,i=this.oCoords,o=t(45-this.angle),a=.707106*this.cornerSize,s=a*r.util.cos(o),u=a*r.util.sin(o);for(var c in i)e=i[c].x,n=i[c].y,i[c].corner={tl:{x:e-u,y:n-s},tr:{x:e+s,y:n-u},bl:{x:e-s,y:n+u},br:{x:e+u,y:n+s}}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var n=this.getCenterPoint(),r=this._calculateCurrentDimensions(),i=this.canvas.viewportTransform;return e.translate(n.x,n.y),e.scale(1/i[0],1/i[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),r=this.borderScaleFactor,i=n.x+r,o=n.y+r,a="undefined"!==typeof e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,s="undefined"!==typeof e.hasControls?e.hasControls:this.hasControls,u="undefined"!==typeof e.rotatingPointOffset?e.rotatingPointOffset:this.rotatingPointOffset;if(t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray,null),t.strokeRect(-i/2,-o/2,i,o),a&&this.isControlVisible("mtr")&&s){var c=-o/2;t.beginPath(),t.moveTo(0,c),t.lineTo(0,c-u),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e,n){n=n||{};var i={x:this.width,y:this.height},o=r.util.composeMatrix({scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX}),a=r.util.transformPoint(i,o),s=this.strokeWidth,u=this.borderScaleFactor,c=a.x+s*(this.strokeUniform?this.canvas.getZoom():e.scaleX)+u,l=a.y+s*(this.strokeUniform?this.canvas.getZoom():e.scaleY)+u;return t.save(),this._setLineDash(t,n.borderDashArray||this.borderDashArray,null),t.strokeStyle=n.borderColor||this.borderColor,t.strokeRect(-c/2,-l/2,c,l),t.restore(),this},drawControls:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),r=n.x,i=n.y,o=e.cornerSize||this.cornerSize,a=-(r+o)/2,s=-(i+o)/2,u="undefined"!==typeof e.transparentCorners?e.transparentCorners:this.transparentCorners,c="undefined"!==typeof e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,l=u?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray,null),this._drawControl("tl",t,l,a,s,e),this._drawControl("tr",t,l,a+r,s,e),this._drawControl("bl",t,l,a,s+i,e),this._drawControl("br",t,l,a+r,s+i,e),this.get("lockUniScaling")||(this._drawControl("mt",t,l,a+r/2,s,e),this._drawControl("mb",t,l,a+r/2,s+i,e),this._drawControl("mr",t,l,a+r,s+i/2,e),this._drawControl("ml",t,l,a,s+i/2,e)),c&&this._drawControl("mtr",t,l,a+r/2,s-this.rotatingPointOffset,e),t.restore(),this},_drawControl:function(t,e,n,r,i,o){if(o=o||{},this.isControlVisible(t)){var a=this.cornerSize,s=!this.transparentCorners&&this.cornerStrokeColor;switch(o.cornerStyle||this.cornerStyle){case"circle":e.beginPath(),e.arc(r+a/2,i+a/2,a/2,0,2*Math.PI,!1),e[n](),s&&e.stroke();break;default:this.transparentCorners||e.clearRect(r,i,a,a),e[n+"Rect"](r,i,a,a),s&&e.strokeRect(r,i,a,a)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility},onDeselect:function(){},onSelect:function(){}})}(),r.util.object.extend(r.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var n=function(){},i=e.onComplete||n,o=e.onChange||n,a=this;return r.util.animate({startValue:t.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),a.requestRenderAll(),o()},onComplete:function(){t.setCoords(),i()}}),this},fxCenterObjectV:function(t,e){e=e||{};var n=function(){},i=e.onComplete||n,o=e.onChange||n,a=this;return r.util.animate({startValue:t.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),a.requestRenderAll(),o()},onComplete:function(){t.setCoords(),i()}}),this},fxRemove:function(t,e){e=e||{};var n=function(){},i=e.onComplete||n,o=e.onChange||n,a=this;return r.util.animate({startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set("opacity",e),a.requestRenderAll(),o()},onComplete:function(){a.remove(t),i()}}),this}}),r.util.object.extend(r.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var t,e,n=[];for(t in arguments[0])n.push(t);for(var r=0,i=n.length;r<i;r++)t=n[r],e=r!==i-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,n,i){var o,a=this;e=e.toString(),n=n?r.util.object.clone(n):{},~t.indexOf(".")&&(o=t.split("."));var s=o?this.get(o[0])[o[1]]:this.get(t);"from"in n||(n.from=s),e=~e.indexOf("=")?s+parseFloat(e.replace("=","")):parseFloat(e),r.util.animate({startValue:n.from,endValue:e,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(){return n.abort.call(a)},onChange:function(e,r,s){o?a[o[0]][o[1]]=e:a.set(t,e),i||n.onChange&&n.onChange(e,r,s)},onComplete:function(t,e,r){i||(a.setCoords(),n.onComplete&&n.onComplete(t,e,r))}})}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,r=e.util.object.clone,i={x1:1,x2:1,y1:1,y2:1},o=e.StaticCanvas.supports("setLineDash");function a(t,e){var n=t.origin,r=t.axis1,i=t.axis2,o=t.dimension,a=e.nearest,s=e.center,u=e.farthest;return function(){switch(this.get(n)){case a:return Math.min(this.get(r),this.get(i));case s:return Math.min(this.get(r),this.get(i))+.5*this.get(o);case u:return Math.max(this.get(r),this.get(i))}}}e.Line?e.warn("fabric.Line is already defined"):(e.Line=e.util.createClass(e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!==typeof i[t]&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){if(t.beginPath(),!this.strokeDashArray||this.strokeDashArray&&o){var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2)}t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_renderDashedStroke:function(t){var n=this.calcLinePoints();t.beginPath(),e.util.drawDashedLine(t,n.x1,n.y1,n.x2,n.y2,this.strokeDashArray),t.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,n=t*this.width*.5,r=e*this.height*.5,i=t*this.width*-.5,o=e*this.height*-.5;return{x1:n,x2:i,y1:r,y2:o}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'" />\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,r,i){i=i||{};var o=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),a=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];r(new e.Line(a,n(o,i)))},e.Line.fromObject=function(t,n){function i(t){delete t.points,n&&n(t)}var o=r(t,!0);o.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject("Line",o,i,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=Math.PI;function r(t){return"radius"in t&&t.radius>=0}e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,cacheProperties:e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,r=0,i=0,o=(this.endAngle-this.startAngle)%(2*n);if(0===o)t=["<circle ","COMMON_PARTS",'cx="'+r+'" cy="'+i+'" ','r="',this.radius,'" />\n'];else{var a=e.util.cos(this.startAngle)*this.radius,s=e.util.sin(this.startAngle)*this.radius,u=e.util.cos(this.endAngle)*this.radius,c=e.util.sin(this.endAngle)*this.radius,l=o>n?"1":"0";t=['<path d="M '+a+" "+s," A "+this.radius+" "+this.radius," 0 ",+l+" 1"," "+u+" "+c,'" ',"COMMON_PARTS"," />\n"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),e.Circle.fromElement=function(t,n){var i=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!r(i))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,n(new e.Circle(i))},e.Circle.fromObject=function(t,n){return e.Object._fromObject("Circle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var n=this.width/2,r=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-n,r,0,-r,this.strokeDashArray),e.util.drawDashedLine(t,0,-r,n,r,this.strokeDashArray),e.util.drawDashedLine(t,n,r,-n,r,this.strokeDashArray),t.closePath()},_toSVG:function(){var t=this.width/2,e=this.height/2,n=[-t+" "+e,"0 "+-e,t+" "+e].join(",");return["<polygon ","COMMON_PARTS",'points="',n,'" />']}}),e.Triangle.fromObject=function(t,n){return e.Object._fromObject("Triangle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=2*Math.PI;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,n,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,n){var r=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,n(new e.Ellipse(r))},e.Ellipse.fromObject=function(t,n){return e.Object._fromObject("Ellipse",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Rect?e.warn("fabric.Rect is already defined"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,i=this.height,o=-this.width/2,a=-this.height/2,s=0!==e||0!==n,u=.4477152502;t.beginPath(),t.moveTo(o+e,a),t.lineTo(o+r-e,a),s&&t.bezierCurveTo(o+r-u*e,a,o+r,a+u*n,o+r,a+n),t.lineTo(o+r,a+i-n),s&&t.bezierCurveTo(o+r,a+i-u*n,o+r-u*e,a+i,o+r-e,a+i),t.lineTo(o+e,a+i),s&&t.bezierCurveTo(o+u*e,a+i,o,a+i-u*n,o,a+i-n),t.lineTo(o,a+n),s&&t.bezierCurveTo(o,a+u*n,o+u*e,a,o+e,a),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var n=-this.width/2,r=-this.height/2,i=this.width,o=this.height;t.beginPath(),e.util.drawDashedLine(t,n,r,n+i,r,this.strokeDashArray),e.util.drawDashedLine(t,n+i,r,n+i,r+o,this.strokeDashArray),e.util.drawDashedLine(t,n+i,r+o,n,r+o,this.strokeDashArray),e.util.drawDashedLine(t,n,r+o,n,r,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){var t=-this.width/2,e=-this.height/2;return["<rect ","COMMON_PARTS",'x="',t,'" y="',e,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,r,i){if(!t)return r(null);i=i||{};var o=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var a=new e.Rect(n(i?e.util.object.clone(i):{},o));a.visible=a.visible&&a.width>0&&a.height>0,r(a)},e.Rect.fromObject=function(t,n){return e.Object._fromObject("Rect",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,r=e.util.array.min,i=e.util.array.max,o=e.util.toFixed;e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,cacheProperties:e.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_setPositionDimensions:function(t){var e,n=this._calcDimensions(t);this.width=n.width,this.height=n.height,t.fromSVG||(e=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2,y:n.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),"undefined"===typeof t.left&&(this.left=t.fromSVG?n.left:e.x),"undefined"===typeof t.top&&(this.top=t.fromSVG?n.top:e.y),this.pathOffset={x:n.left+this.width/2,y:n.top+this.height/2}},_calcDimensions:function(){var t=this.points,e=r(t,"x")||0,n=r(t,"y")||0,o=i(t,"x")||0,a=i(t,"y")||0,s=o-e,u=a-n;return{left:e,top:n,width:s,height:u}},toObject:function(t){return n(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],n=this.pathOffset.x,r=this.pathOffset.y,i=e.Object.NUM_FRACTION_DIGITS,a=0,s=this.points.length;a<s;a++)t.push(o(this.points[a].x-n,i),",",o(this.points[a].y-r,i)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',t.join(""),'" />\n']},commonRender:function(t){var e,n=this.points.length,r=this.pathOffset.x,i=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-i);for(var o=0;o<n;o++)e=this.points[o],t.lineTo(e.x-r,e.y-i);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var n,r;t.beginPath();for(var i=0,o=this.points.length;i<o;i++)n=this.points[i],r=this.points[i+1]||n,e.util.drawDashedLine(t,n.x,n.y,r.x,r.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(r,i,o){if(!r)return i(null);o||(o={});var a=e.parsePointsAttribute(r.getAttribute("points")),s=e.parseAttributes(r,e[t].ATTRIBUTE_NAMES);s.fromSVG=!0,i(new e[t](a,n(s,o)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator("Polyline"),e.Polyline.fromObject=function(t,n){return e.Object._fromObject("Polyline",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator("Polygon"),e.Polygon.fromObject=function(t,n){return e.Object._fromObject("Polygon",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,r=e.util.array.max,i=e.util.object.extend,o=Object.prototype.toString,a=e.util.drawArc,s=e.util.toFixed,u={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:e.Object.prototype.stateProperties.concat("path"),initialize:function(t,n){n=n||{},this.callSuper("initialize",n),t||(t=[]);var r="[object Array]"===o.call(t);this.path=r?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(r||(this.path=this._parsePath()),e.Polyline.prototype._setPositionDimensions.call(this,n))},_renderPathCommands:function(t){var e,n,r,i=null,o=0,s=0,u=0,c=0,l=0,h=0,f=-this.pathOffset.x,d=-this.pathOffset.y;t.beginPath();for(var p=0,g=this.path.length;p<g;++p){switch(e=this.path[p],e[0]){case"l":u+=e[1],c+=e[2],t.lineTo(u+f,c+d);break;case"L":u=e[1],c=e[2],t.lineTo(u+f,c+d);break;case"h":u+=e[1],t.lineTo(u+f,c+d);break;case"H":u=e[1],t.lineTo(u+f,c+d);break;case"v":c+=e[1],t.lineTo(u+f,c+d);break;case"V":c=e[1],t.lineTo(u+f,c+d);break;case"m":u+=e[1],c+=e[2],o=u,s=c,t.moveTo(u+f,c+d);break;case"M":u=e[1],c=e[2],o=u,s=c,t.moveTo(u+f,c+d);break;case"c":n=u+e[5],r=c+e[6],l=u+e[3],h=c+e[4],t.bezierCurveTo(u+e[1]+f,c+e[2]+d,l+f,h+d,n+f,r+d),u=n,c=r;break;case"C":u=e[5],c=e[6],l=e[3],h=e[4],t.bezierCurveTo(e[1]+f,e[2]+d,l+f,h+d,u+f,c+d);break;case"s":n=u+e[3],r=c+e[4],null===i[0].match(/[CcSs]/)?(l=u,h=c):(l=2*u-l,h=2*c-h),t.bezierCurveTo(l+f,h+d,u+e[1]+f,c+e[2]+d,n+f,r+d),l=u+e[1],h=c+e[2],u=n,c=r;break;case"S":n=e[3],r=e[4],null===i[0].match(/[CcSs]/)?(l=u,h=c):(l=2*u-l,h=2*c-h),t.bezierCurveTo(l+f,h+d,e[1]+f,e[2]+d,n+f,r+d),u=n,c=r,l=e[1],h=e[2];break;case"q":n=u+e[3],r=c+e[4],l=u+e[1],h=c+e[2],t.quadraticCurveTo(l+f,h+d,n+f,r+d),u=n,c=r;break;case"Q":n=e[3],r=e[4],t.quadraticCurveTo(e[1]+f,e[2]+d,n+f,r+d),u=n,c=r,l=e[1],h=e[2];break;case"t":n=u+e[1],r=c+e[2],null===i[0].match(/[QqTt]/)?(l=u,h=c):(l=2*u-l,h=2*c-h),t.quadraticCurveTo(l+f,h+d,n+f,r+d),u=n,c=r;break;case"T":n=e[1],r=e[2],null===i[0].match(/[QqTt]/)?(l=u,h=c):(l=2*u-l,h=2*c-h),t.quadraticCurveTo(l+f,h+d,n+f,r+d),u=n,c=r;break;case"a":a(t,u+f,c+d,[e[1],e[2],e[3],e[4],e[5],e[6]+u+f,e[7]+c+d]),u+=e[6],c+=e[7];break;case"A":a(t,u+f,c+d,[e[1],e[2],e[3],e[4],e[5],e[6]+f,e[7]+d]),u=e[6],c=e[7];break;case"z":case"Z":u=o,c=s,t.closePath();break}i=e}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return i(this.callSuper("toObject",t),{path:this.path.map((function(t){return t.slice()}))})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){var t=this.path.map((function(t){return t.join(" ")})).join(" ");return["<path ","COMMON_PARTS",'d="',t,'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return" translate("+s(-this.pathOffset.x,t)+", "+s(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_parsePath:function(){for(var t,n,r,i,o,a=[],s=[],l=e.rePathCommand,h=0,f=this.path.length;h<f;h++){t=this.path[h],i=t.slice(1).trim(),s.length=0;while(r=l.exec(i))s.push(r[0]);o=[t.charAt(0)];for(var d=0,p=s.length;d<p;d++)n=parseFloat(s[d]),isNaN(n)||o.push(n);var g=o[0],m=u[g.toLowerCase()],v=c[g]||g;if(o.length-1>m)for(var y=1,b=o.length;y<b;y+=m)a.push([g].concat(o.slice(y,y+m))),g=v;else a.push(o)}return a},_calcDimensions:function(){for(var t,i,o,a,s=[],u=[],c=null,l=0,h=0,f=0,d=0,p=0,g=0,m=0,v=this.path.length;m<v;++m){switch(t=this.path[m],t[0]){case"l":f+=t[1],d+=t[2],a=[];break;case"L":f=t[1],d=t[2],a=[];break;case"h":f+=t[1],a=[];break;case"H":f=t[1],a=[];break;case"v":d+=t[1],a=[];break;case"V":d=t[1],a=[];break;case"m":f+=t[1],d+=t[2],l=f,h=d,a=[];break;case"M":f=t[1],d=t[2],l=f,h=d,a=[];break;case"c":i=f+t[5],o=d+t[6],p=f+t[3],g=d+t[4],a=e.util.getBoundsOfCurve(f,d,f+t[1],d+t[2],p,g,i,o),f=i,d=o;break;case"C":p=t[3],g=t[4],a=e.util.getBoundsOfCurve(f,d,t[1],t[2],p,g,t[5],t[6]),f=t[5],d=t[6];break;case"s":i=f+t[3],o=d+t[4],null===c[0].match(/[CcSs]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),a=e.util.getBoundsOfCurve(f,d,p,g,f+t[1],d+t[2],i,o),p=f+t[1],g=d+t[2],f=i,d=o;break;case"S":i=t[3],o=t[4],null===c[0].match(/[CcSs]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),a=e.util.getBoundsOfCurve(f,d,p,g,t[1],t[2],i,o),f=i,d=o,p=t[1],g=t[2];break;case"q":i=f+t[3],o=d+t[4],p=f+t[1],g=d+t[2],a=e.util.getBoundsOfCurve(f,d,p,g,p,g,i,o),f=i,d=o;break;case"Q":p=t[1],g=t[2],a=e.util.getBoundsOfCurve(f,d,p,g,p,g,t[3],t[4]),f=t[3],d=t[4];break;case"t":i=f+t[1],o=d+t[2],null===c[0].match(/[QqTt]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),a=e.util.getBoundsOfCurve(f,d,p,g,p,g,i,o),f=i,d=o;break;case"T":i=t[1],o=t[2],null===c[0].match(/[QqTt]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),a=e.util.getBoundsOfCurve(f,d,p,g,p,g,i,o),f=i,d=o;break;case"a":a=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6]+f,t[7]+d),f+=t[6],d+=t[7];break;case"A":a=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),f=t[6],d=t[7];break;case"z":case"Z":f=l,d=h;break}c=t,a.forEach((function(t){s.push(t.x),u.push(t.y)})),s.push(f),u.push(d)}var y=n(s)||0,b=n(u)||0,x=r(s)||0,w=r(u)||0,_=x-y,O=w-b;return{left:y,top:b,width:_,height:O}}}),e.Path.fromObject=function(t,n){if("string"===typeof t.sourcePath){var r=t.sourcePath;e.loadSVGFromURL(r,(function(e){var r=e[0];r.setOptions(t),n&&n(r)}))}else e.Object._fromObject("Path",t,n,"path")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,n,r){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);o.fromSVG=!0,n(new e.Path(o.d,i(o,r)))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,r=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,n){e=e||{},this._objects=[],n&&this.callSuper("initialize",e),this._objects=t||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;if(n)this._updateObjectsACoords();else{var i=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),i||this._calcBounds(),this._updateObjectsCoords(i),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=!0,e=!0,n=this._objects.length;n--;)this._objects[n].setCoords(t,e)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var n=t.left,r=t.top,i=!0,o=!0;t.set({left:n-e.x,top:r-e.y}),t.group=this,t.setCoords(i,o)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,n){var r=this._objects.length;if(this.useSetOnGroup)while(r--)this._objects[r].setOnGroup(t,n);if("canvas"===t)while(r--)this._objects[r]._set(t,n);e.Object.prototype._set.call(this,t,n)},toObject:function(t){var n=this.includeDefaultValues,r=this._objects.map((function(e){var r=e.includeDefaultValues;e.includeDefaultValues=n;var i=e.toObject(t);return e.includeDefaultValues=r,i})),i=e.Object.prototype.toObject.call(this,t);return i.objects=r,i},toDatalessObject:function(t){var n,r=this.sourcePath;if(r)n=r;else{var i=this.includeDefaultValues;n=this._objects.map((function(e){var n=e.includeDefaultValues;e.includeDefaultValues=i;var r=e.toDatalessObject(t);return e.includeDefaultValues=n,r}))}var o=e.Object.prototype.toDatalessObject.call(this,t);return o.objects=n,o},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var n=0,r=this._objects.length;n<r;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(e.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,n=this._objects.length;e<n;e++)this._objects[e].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var r=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-r/2,-i/2,r,i)}return!0}return!1},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var n=t.calcTransformMatrix(),r=e.util.qrDecompose(n),i=new e.Point(r.translateX,r.translateY);return t.flipX=!1,t.flipY=!1,t.set("scaleX",r.scaleX),t.set("scaleY",r.scaleY),t.skewX=r.skewX,t.skewY=r.skewY,t.angle=r.angle,t.setPositionByOrigin(i,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),delete t.group,this},destroy:function(){return this._objects.forEach((function(t){t.set("dirty",!0)})),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,n=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var i=new e.ActiveSelection([]);return i.set(r),i.type="activeSelection",n.remove(this),t.forEach((function(t){t.group=i,t.dirty=!0,n.add(t)})),i.canvas=n,i._objects=t,n._activeObject=i,i.setCoords(),i}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=!0,e=!0;return this.forEachObject((function(n){n.setCoords(t,e)})),this},_calcBounds:function(t){for(var e,n,r,i=[],o=[],a=["tr","br","bl","tl"],s=0,u=this._objects.length,c=a.length,l=!0;s<u;++s)for(e=this._objects[s],e.setCoords(l),r=0;r<c;r++)n=a[r],i.push(e.oCoords[n].x),o.push(e.oCoords[n].y);this._getBounds(i,o,t)},_getBounds:function(t,i,o){var a=new e.Point(n(t),n(i)),s=new e.Point(r(t),r(i)),u=a.y||0,c=a.x||0,l=s.x-a.x||0,h=s.y-a.y||0;this.width=l,this.height=h,o||this.setPositionByOrigin({x:c,y:u},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],n=0,r=this._objects.length;n<r;n++)e.push("\t\t",this._objects[n].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var t="undefined"!==typeof this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],n=0,r=this._objects.length;n<r;n++)e.push("\t",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,n){var r=t.objects,i=e.util.object.clone(t,!0);delete i.objects,"string"!==typeof r?e.util.enlivenObjects(r,(function(r){e.util.enlivenObjects([t.clipPath],(function(i){var o=e.util.object.clone(t,!0);o.clipPath=i[0],delete o.objects,n&&n(new e.Group(r,o,!0))}))})):e.loadSVGFromURL(r,(function(o){var a=e.util.groupSVGElements(o,t,r);a.set(i),n&&n(a)}))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,n){n=n||{},this._objects=t||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var n=e.Object.prototype.toObject.call(this),r=new e.Group([]);if(delete n.type,r.set(n),t.forEach((function(t){t.canvas.remove(t),t.group=r})),r._objects=t,!this.canvas)return r;var i=this.canvas;return i.add(r),i._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),n=n||{},"undefined"===typeof n.hasControls&&(n.hasControls=!1),"undefined"===typeof n.hasRotatingPoint&&(n.hasRotatingPoint=!1),n.forActiveSelection=!0;for(var r=0,i=this._objects.length;r<i;r++)this._objects[r]._renderControls(t,n);t.restore()}}),e.ActiveSelection.fromObject=function(t,n){e.util.enlivenObjects(t.objects,(function(r){delete t.objects,n&&n(new e.ActiveSelection(r,t,!0))}))})}(e),function(t){"use strict";var e=r.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?r.warn("fabric.Image is already defined."):(r.Image=r.util.createClass(r.Object,{type:"image",crossOrigin:"",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:r.Object.prototype.stateProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey="texture"+r.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=r.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(t){r.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,n=-this.height/2,i=this.width,o=this.height;t.save(),this._setStrokeStyles(t,this),t.beginPath(),r.util.drawDashedLine(t,e,n,e+i,n,this.strokeDashArray),r.util.drawDashedLine(t,e+i,n,e+i,n+o,this.strokeDashArray),r.util.drawDashedLine(t,e+i,n+o,e,n+o,this.strokeDashArray),r.util.drawDashedLine(t,e,n+o,e,n,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var n=[];this.filters.forEach((function(t){t&&n.push(t.toObject())}));var r=e(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(t)),{src:this.getSrc(),filters:n});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],n=[],i=-this.width/2,o=-this.height/2,a="";if(this.hasCrop()){var s=r.Object.__uid++;e.push('<clipPath id="imageCrop_'+s+'">\n','\t<rect x="'+i+'" y="'+o+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),a=' clip-path="url(#imageCrop_'+s+')" '}if(n.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',o-this.cropY,'" width="',this._element.width||this._element.naturalWidth,'" height="',this._element.height||this._element.height,'"',a,"></image>\n"),this.stroke||this.strokeDashArray){var u=this.fill;this.fill=null,t=["\t<rect ",'x="',i,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=u}return e="fill"!==this.paintFirst?e.concat(t,n):e.concat(n,t),e},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(t,e,n){return r.util.loadImage(t,(function(t){this.setElement(t,n),this._setWidthHeight(),e&&e(this)}),this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.scaleX,o=n.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||i>e&&o>e)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=o);r.filterBackend||(r.filterBackend=r.initFilterBackend());var s=r.util.createCanvasElement(),u=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,c=a.width,l=a.height;s.width=c,s.height=l,this._element=s,this._lastScaleX=t.scaleX=i,this._lastScaleY=t.scaleY=o,r.filterBackend.applyFilters([t],a,c,l,this._element,u),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(t){if(t=t||this.filters||[],t=t.filter((function(t){return t&&!t.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,n=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){var o=r.util.createCanvasElement();o.width=n,o.height=i,this._element=o,this._filteredEl=o}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1;return r.filterBackend||(r.filterBackend=r.initFilterBackend()),r.filterBackend.applyFilters(t,this._originalElement,n,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element,n=this.width,r=this.height,i=Math.min(e.naturalWidth||e.width,n*this._filterScalingX),o=Math.min(e.naturalHeight||e.height,r*this._filterScalingY),a=-n/2,s=-r/2,u=Math.max(0,this.cropX*this._filterScalingX),c=Math.max(0,this.cropY*this._filterScalingY);e&&t.drawImage(e,u,c,i,o,a,s,n,r)},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(r.util.getById(t),e),r.util.addClass(this.getElement(),r.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?r.util.enlivenObjects(t,(function(t){e&&e(t)}),"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=r.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),n=this._element.width,i=this._element.height,o=1,a=1,s=0,u=0,c=0,l=0,h=this.width,f=this.height,d={width:h,height:f};return!e||"none"===e.alignX&&"none"===e.alignY?(o=h/n,a=f/i):("meet"===e.meetOrSlice&&(o=a=r.util.findScaleToFit(this._element,d),t=(h-n*o)/2,"Min"===e.alignX&&(s=-t),"Max"===e.alignX&&(s=t),t=(f-i*a)/2,"Min"===e.alignY&&(u=-t),"Max"===e.alignY&&(u=t)),"slice"===e.meetOrSlice&&(o=a=r.util.findScaleToCover(this._element,d),t=n-h/o,"Mid"===e.alignX&&(c=t/2),"Max"===e.alignX&&(c=t),t=i-f/a,"Mid"===e.alignY&&(l=t/2),"Max"===e.alignY&&(l=t),n=h/o,i=f/a)),{width:n,height:i,scaleX:o,scaleY:a,offsetLeft:s,offsetTop:u,cropX:c,cropY:l}}}),r.Image.CSS_CANVAS="canvas-img",r.Image.prototype.getSvgSrc=r.Image.prototype.getSrc,r.Image.fromObject=function(t,e){var n=r.util.object.clone(t);r.util.loadImage(n.src,(function(t,i){i?e&&e(null,i):r.Image.prototype._initFilters.call(n,n.filters,(function(i){n.filters=i||[],r.Image.prototype._initFilters.call(n,[n.resizeFilter],(function(i){n.resizeFilter=i[0],r.util.enlivenObjects([n.clipPath],(function(i){n.clipPath=i[0];var o=new r.Image(t,n);e(o)}))}))}))}),null,n.crossOrigin)},r.Image.fromURL=function(t,e,n){r.util.loadImage(t,(function(t){e&&e(new r.Image(t,n))}),null,n&&n.crossOrigin)},r.Image.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),r.Image.fromElement=function(t,n,i){var o=r.parseAttributes(t,r.Image.ATTRIBUTE_NAMES);r.Image.fromURL(o["xlink:href"],n,e(i?r.util.object.clone(i):{},o))})}(e),r.util.object.extend(r.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},n=t.onComplete||e,i=t.onChange||e,o=this;return r.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){o.rotate(t),i()},onComplete:function(){o.setCoords(),n()}}),this}}),r.util.object.extend(r.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function t(t,e){var n="precision "+e+" float;\nvoid main(){}",r=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(r,n),t.compileShader(r),!!t.getShaderParameter(r,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.isWebglSupported=function(e){if(r.isLikelyNode)return!1;e=e||r.WebglFilterBackend.prototype.tileSize;var n=document.createElement("canvas"),i=n.getContext("webgl")||n.getContext("experimental-webgl"),o=!1;if(i){r.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),o=r.maxTextureSize>=e;for(var a=["highp","mediump","lowp"],s=0;s<3;s++)if(t(i,a[s])){r.webGlPrecision=a[s];break}}return this.isSupported=o,o},r.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var n,i="undefined"!==typeof window.performance;try{new ImageData(1,1),n=!0}catch(g){n=!1}var o="undefined"!==typeof ArrayBuffer,a="undefined"!==typeof Uint8ClampedArray;if(i&&n&&o&&a){var c=r.util.createCanvasElement(),l=new ArrayBuffer(t*e*4);if(r.forceGLPutImageData)return this.imageBuffer=l,void(this.copyGLTo2D=u);var h,f,d,p={imageBuffer:l,destinationWidth:t,destinationHeight:e,targetCanvas:c};c.width=t,c.height=e,h=window.performance.now(),s.call(p,this.gl,p),f=window.performance.now()-h,h=window.performance.now(),u.call(p,this.gl,p),d=window.performance.now()-h,f>d?(this.imageBuffer=l,this.copyGLTo2D=u):this.copyGLTo2D=s}},createWebGLCanvas:function(t,e){var n=r.util.createCanvasElement();n.width=t,n.height=e;var i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=n.getContext("webgl",i);o||(o=n.getContext("experimental-webgl",i)),o&&(o.clearColor(0,0,0,0),this.canvas=n,this.gl=o)},applyFilters:function(t,e,n,r,i,o){var s,u=this.gl;o&&(s=this.getCachedTexture(o,e));var c={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:n,sourceHeight:r,destinationWidth:n,destinationHeight:r,context:u,sourceTexture:this.createTexture(u,n,r,!s&&e),targetTexture:this.createTexture(u,n,r),originalTexture:s||this.createTexture(u,n,r,!s&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},l=u.createFramebuffer();return u.bindFramebuffer(u.FRAMEBUFFER,l),t.forEach((function(t){t&&t.applyTo(c)})),a(c),this.copyGLTo2D(u,c),u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(c.sourceTexture),u.deleteTexture(c.targetTexture),u.deleteFramebuffer(l),i.getContext("2d").setTransform(1,0,0,1,0,0),c},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,n,r){var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),i},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var n=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=n,n},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:s,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var n=t.getExtension("WEBGL_debug_renderer_info");if(n){var r=t.getParameter(n.UNMASKED_RENDERER_WEBGL),i=t.getParameter(n.UNMASKED_VENDOR_WEBGL);r&&(e.renderer=r.toLowerCase()),i&&(e.vendor=i.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){"use strict";var t=function(){};function e(){}r.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,n,r,i){var o=i.getContext("2d");o.drawImage(e,0,0,n,r);var a=o.getImageData(0,0,n,r),s=o.getImageData(0,0,n,r),u={sourceWidth:n,sourceHeight:r,imageData:a,originalEl:e,originalImageData:s,canvasEl:i,ctx:o,filterBackend:this};return t.forEach((function(t){t.applyTo(u)})),u.imageData.width===n&&u.imageData.height===r||(i.width=u.imageData.width,i.height=u.imageData.height),o.putImageData(u.imageData,0,0),u}}}(),r.Image=r.Image||{},r.Image.filters=r.Image.filters||{},r.Image.filters.BaseFilter=r.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,n){e=e||this.fragmentSource,n=n||this.vertexSource,"highp"!==r.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+r.webGlPrecision+" float"));var i=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(i));var o=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(o));var a=t.createProgram();if(t.attachShader(a,i),t.attachShader(a,o),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(a));var s=this.getAttributeLocations(t,a),u=this.getUniformLocations(t,a)||{};return u.uStepW=t.getUniformLocation(a,"uStepW"),u.uStepH=t.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:s,uniformLocations:u}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,n){var r=e.aPosition,i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,n,r=t.context;t.passes>1?(e=t.destinationWidth,n=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===n||(r.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(r,e,n)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=r.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var n=e[t].length;n--;)if(this[t][n]!==e[t][n])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,n=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),r.Image.filters.BaseFilter.fromObject=function(t,e){var n=new r.Image.filters[t.type](t);return e&&e(n),n},function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.ColorMatrix=r(n.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,n,r,i,o,a=t.imageData,s=a.data,u=s.length,c=this.matrix,l=this.colorsOnly;for(o=0;o<u;o+=4)e=s[o],n=s[o+1],r=s[o+2],l?(s[o]=e*c[0]+n*c[1]+r*c[2]+255*c[4],s[o+1]=e*c[5]+n*c[6]+r*c[7]+255*c[9],s[o+2]=e*c[10]+n*c[11]+r*c[12]+255*c[14]):(i=s[o+3],s[o]=e*c[0]+n*c[1]+r*c[2]+i*c[3]+255*c[4],s[o+1]=e*c[5]+n*c[6]+r*c[7]+i*c[8]+255*c[9],s[o+2]=e*c[10]+n*c[11]+r*c[12]+i*c[13]+255*c[14],s[o+3]=e*c[15]+n*c[16]+r*c[17]+i*c[18]+255*c[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var n=this.matrix,r=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],i=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,r),t.uniform4fv(e.uConstants,i)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.Brightness=r(n.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,n=t.imageData,r=n.data,i=r.length,o=Math.round(255*this.brightness);for(e=0;e<i;e+=4)r[e]=r[e]+o,r[e+1]=r[e+1]+o,r[e+2]=r[e+2]+o}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,r=e.Image.filters,i=e.util.createClass;r.Convolute=i(r.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),n=this.type+"_"+e+"_"+(this.opaque?1:0),r=this.fragmentSource[n];return t.programCache.hasOwnProperty(n)||(t.programCache[n]=this.createProgram(t.context,r)),t.programCache[n]},applyTo2d:function(t){var e,n,r,i,o,a,s,u,c,l,h,f,d,p=t.imageData,g=p.data,m=this.matrix,v=Math.round(Math.sqrt(m.length)),y=Math.floor(v/2),b=p.width,x=p.height,w=t.ctx.createImageData(b,x),_=w.data,O=this.opaque?1:0;for(h=0;h<x;h++)for(l=0;l<b;l++){for(o=4*(h*b+l),e=0,n=0,r=0,i=0,d=0;d<v;d++)for(f=0;f<v;f++)s=h+d-y,a=l+f-y,s<0||s>=x||a<0||a>=b||(u=4*(s*b+a),c=m[d*v+f],e+=g[u]*c,n+=g[u+1]*c,r+=g[u+2]*c,O||(i+=g[u+3]*c));_[o]=e,_[o+1]=n,_[o+2]=r,_[o+3]=O?g[o+3]:i}t.imageData=w},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.Grayscale=r(n.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,n,r=t.imageData,i=r.data,o=i.length,a=this.mode;for(e=0;e<o;e+=4)"average"===a?n=(i[e]+i[e+1]+i[e+2])/3:"lightness"===a?n=(Math.min(i[e],i[e+1],i[e+2])+Math.max(i[e],i[e+1],i[e+2]))/2:"luminosity"===a&&(n=.21*i[e]+.72*i[e+1]+.07*i[e+2]),i[e]=n,i[e+1]=n,i[e+2]=n},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var n=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,n)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){var n=1;t.uniform1i(e.uMode,n)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.Invert=r(n.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,n=t.imageData,r=n.data,i=r.length;for(e=0;e<i;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,r=e.Image.filters,i=e.util.createClass;r.Noise=i(r.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,n,r=t.imageData,i=r.data,o=i.length,a=this.noise;for(e=0,o=i.length;e<o;e+=4)n=(.5-Math.random())*a,i[e]+=n,i[e+1]+=n,i[e+2]+=n}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.Pixelate=r(n.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,n,r,i,o,a,s,u,c,l,h,f=t.imageData,d=f.data,p=f.height,g=f.width;for(n=0;n<p;n+=this.blocksize)for(r=0;r<g;r+=this.blocksize)for(e=4*n*g+4*r,i=d[e],o=d[e+1],a=d[e+2],s=d[e+3],l=Math.min(n+this.blocksize,p),h=Math.min(r+this.blocksize,g),u=n;u<l;u++)for(c=r;c<h;c++)e=4*u*g+4*c,d[e]=i,d[e+1]=o,d[e+2]=a,d[e+3]=s},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,r=e.Image.filters,i=e.util.createClass;r.RemoveColor=i(r.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var n,r,i,o,a=t.imageData,s=a.data,u=255*this.distance,c=new e.Color(this.color).getSource(),l=[c[0]-u,c[1]-u,c[2]-u],h=[c[0]+u,c[1]+u,c[2]+u];for(n=0;n<s.length;n+=4)r=s[n],i=s[n+1],o=s[n+2],r>l[0]&&i>l[1]&&o>l[2]&&r<h[0]&&i<h[1]&&o<h[2]&&(s[n+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,n){var r=new e.Color(this.color).getSource(),i=parseFloat(this.distance),o=[0+r[0]/255-i,0+r[1]/255-i,0+r[2]/255-i,1],a=[r[0]/255+i,r[1]/255+i,r[2]/255+i,1];t.uniform4fv(n.uLow,o),t.uniform4fv(n.uHigh,a)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass,i={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in i)n[o]=r(n.ColorMatrix,{type:o,matrix:i[o],mainParameter:!1,colorsOnly:!0}),e.Image.filters[o].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,n=e.Image.filters,r=e.util.createClass;n.BlendColor=r(n.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,n=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(n)||(e=this.buildSource(this.mode),t.programCache[n]=this.createProgram(t.context,e)),t.programCache[n]},applyTo2d:function(t){var n,r,i,o,a,s,u,c=t.imageData,l=c.data,h=l.length,f=1-this.alpha;u=new e.Color(this.color).getSource(),n=u[0]*this.alpha,r=u[1]*this.alpha,i=u[2]*this.alpha;for(var d=0;d<h;d+=4)switch(o=l[d],a=l[d+1],s=l[d+2],this.mode){case"multiply":l[d]=o*n/255,l[d+1]=a*r/255,l[d+2]=s*i/255;break;case"screen":l[d]=255-(255-o)*(255-n)/255,l[d+1]=255-(255-a)*(255-r)/255,l[d+2]=255-(255-s)*(255-i)/255;break;case"add":l[d]=o+n,l[d+1]=a+r,l[d+2]=s+i;break;case"diff":case"difference":l[d]=Math.abs(o-n),l[d+1]=Math.abs(a-r),l[d+2]=Math.abs(s-i);break;case"subtract":l[d]=o-n,l[d+1]=a-r,l[d+2]=s-i;break;case"darken":l[d]=Math.min(o,n),l[d+1]=Math.min(a,r),l[d+2]=Math.min(s,i);break;case"lighten":l[d]=Math.max(o,n),l[d+1]=Math.max(a,r),l[d+2]=Math.max(s,i);break;case"overlay":l[d]=n<128?2*o*n/255:255-2*(255-o)*(255-n)/255,l[d+1]=r<128?2*a*r/255:255-2*(255-a)*(255-r)/255,l[d+2]=i<128?2*s*i/255:255-2*(255-s)*(255-i)/255;break;case"exclusion":l[d]=n+o-2*n*o/255,l[d+1]=r+a-2*r*a/255,l[d+2]=i+s-2*i*s/255;break;case"tint":l[d]=n+o*f,l[d+1]=r+a*f,l[d+2]=i+s*f}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,n){var r=new e.Color(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,t.uniform4fv(n.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,n=e.Image.filters,r=e.util.createClass;n.BlendImage=r(n.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,n)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,n=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]},applyTo2d:function(t){var n,r,i,o,a,s,u,c,l,h,f,d=t.imageData,p=t.filterBackend.resources,g=d.data,m=g.length,v=d.width,y=d.height,b=this.image;p.blendImage||(p.blendImage=e.util.createCanvasElement()),l=p.blendImage,h=l.getContext("2d"),l.width!==v||l.height!==y?(l.width=v,l.height=y):h.clearRect(0,0,v,y),h.setTransform(b.scaleX,0,0,b.scaleY,b.left,b.top),h.drawImage(b._element,0,0,v,y),f=h.getImageData(0,0,v,y).data;for(var x=0;x<m;x+=4)switch(a=g[x],s=g[x+1],u=g[x+2],c=g[x+3],n=f[x],r=f[x+1],i=f[x+2],o=f[x+3],this.mode){case"multiply":g[x]=a*n/255,g[x+1]=s*r/255,g[x+2]=u*i/255,g[x+3]=c*o/255;break;case"mask":g[x+3]=o;break}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,n){e.Image.fromObject(t.image,(function(r){var i=e.util.object.clone(t);i.image=r,n(new e.Image.filters.BlendImage(i))}))}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=Math.pow,r=Math.floor,i=Math.sqrt,o=Math.abs,a=Math.round,s=Math.sin,u=Math.ceil,c=e.Image.filters,l=e.util.createClass;c.Resize=l(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),n=this.type+"_"+e;if(!t.programCache.hasOwnProperty(n)){var r=this.generateShader(e);t.programCache[n]=this.createProgram(t.context,r)}return t.programCache[n]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),r=new Array(n),i=1;i<=n;i++)r[i-1]=t(i*e);return r},generateShader:function(t){for(var e=new Array(t),n=this.fragmentSourceTOP,r=1;r<=t;r++)e[r-1]=r+".0 * uDelta";return n+="uniform float uTaps["+t+"];\n",n+="void main() {\n",n+="  vec4 color = texture2D(uTexture, vTexCoord);\n",n+="  float sum = 1.0;\n",e.forEach((function(t,e){n+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n",n+="  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n",n+="  sum += 2.0 * uTaps["+e+"];\n"})),n+="  gl_FragColor = color / sum;\n",n+="}",n},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;e*=Math.PI;var n=e/t;return s(e)/e*s(n)/n}},applyTo2d:function(t){var e=t.imageData,n=this.scaleX,r=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/r;var i,o=e.width,s=e.height,u=a(o*n),c=a(s*r);"sliceHack"===this.resizeType?i=this.sliceByTwo(t,o,s,u,c):"hermite"===this.resizeType?i=this.hermiteFastResize(t,o,s,u,c):"bilinear"===this.resizeType?i=this.bilinearFiltering(t,o,s,u,c):"lanczos"===this.resizeType&&(i=this.lanczosResize(t,o,s,u,c)),t.imageData=i},sliceByTwo:function(t,n,i,o,a){var s,u,c=t.imageData,l=.5,h=!1,f=!1,d=n*l,p=i*l,g=e.filterBackend.resources,m=0,v=0,y=n,b=0;g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),s=g.sliceByTwo,(s.width<1.5*n||s.height<i)&&(s.width=1.5*n,s.height=i),u=s.getContext("2d"),u.clearRect(0,0,1.5*n,i),u.putImageData(c,0,0),o=r(o),a=r(a);while(!h||!f)n=d,i=p,o<r(d*l)?d=r(d*l):(d=o,h=!0),a<r(p*l)?p=r(p*l):(p=a,f=!0),u.drawImage(s,m,v,n,i,y,b,d,p),m=y,v=b,b+=p;return u.getImageData(m,v,o,a)},lanczosResize:function(t,e,a,s,c){function l(t){var u,S,C,k,A,T,E,j,D,M,N;for(_.x=(t+.5)*g,O.x=r(_.x),u=0;u<c;u++){for(_.y=(u+.5)*m,O.y=r(_.y),A=0,T=0,E=0,j=0,D=0,S=O.x-b;S<=O.x+b;S++)if(!(S<0||S>=e)){M=r(1e3*o(S-_.x)),w[M]||(w[M]={});for(var I=O.y-x;I<=O.y+x;I++)I<0||I>=a||(N=r(1e3*o(I-_.y)),w[M][N]||(w[M][N]=p(i(n(M*v,2)+n(N*y,2))/1e3)),C=w[M][N],C>0&&(k=4*(I*e+S),A+=C,T+=C*h[k],E+=C*h[k+1],j+=C*h[k+2],D+=C*h[k+3]))}k=4*(u*s+t),d[k]=T/A,d[k+1]=E/A,d[k+2]=j/A,d[k+3]=D/A}return++t<s?l(t):f}var h=t.imageData.data,f=t.ctx.createImageData(s,c),d=f.data,p=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,m=this.rcpScaleY,v=2/this.rcpScaleX,y=2/this.rcpScaleY,b=u(g*this.lanczosLobes/2),x=u(m*this.lanczosLobes/2),w={},_={},O={};return l(0)},bilinearFiltering:function(t,e,n,i,o){var a,s,u,c,l,h,f,d,p,g,m,v,y,b=0,x=this.rcpScaleX,w=this.rcpScaleY,_=4*(e-1),O=t.imageData,S=O.data,C=t.ctx.createImageData(i,o),k=C.data;for(f=0;f<o;f++)for(d=0;d<i;d++)for(l=r(x*d),h=r(w*f),p=x*d-l,g=w*f-h,y=4*(h*e+l),m=0;m<4;m++)a=S[y+m],s=S[y+4+m],u=S[y+_+m],c=S[y+_+4+m],v=a*(1-p)*(1-g)+s*p*(1-g)+u*g*(1-p)+c*p*g,k[b++]=v;return C},hermiteFastResize:function(t,e,n,a,s){for(var c=this.rcpScaleX,l=this.rcpScaleY,h=u(c/2),f=u(l/2),d=t.imageData,p=d.data,g=t.ctx.createImageData(a,s),m=g.data,v=0;v<s;v++)for(var y=0;y<a;y++){for(var b=4*(y+v*a),x=0,w=0,_=0,O=0,S=0,C=0,k=0,A=(v+.5)*l,T=r(v*l);T<(v+1)*l;T++)for(var E=o(A-(T+.5))/f,j=(y+.5)*c,D=E*E,M=r(y*c);M<(y+1)*c;M++){var N=o(j-(M+.5))/h,I=i(D+N*N);I>1&&I<-1||(x=2*I*I*I-3*I*I+1,x>0&&(N=4*(M+T*e),k+=x*p[N+3],_+=x,p[N+3]<255&&(x=x*p[N+3]/250),O+=x*p[N],S+=x*p[N+1],C+=x*p[N+2],w+=x))}m[b]=O/w,m[b+1]=S/w,m[b+2]=C/w,m[b+3]=k/_}return g},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.Contrast=r(n.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,n=t.imageData,r=n.data,i=r.length,o=Math.floor(255*this.contrast),a=259*(o+255)/(255*(259-o));for(e=0;e<i;e+=4)r[e]=a*(r[e]-128)+128,r[e+1]=a*(r[e+1]-128)+128,r[e+2]=a*(r[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.Saturation=r(n.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,n,r=t.imageData,i=r.data,o=i.length,a=-this.saturation;for(e=0;e<o;e+=4)n=Math.max(i[e],i[e+1],i[e+2]),i[e]+=n!==i[e]?(n-i[e])*a:0,i[e+1]+=n!==i[e+1]?(n-i[e+1])*a:0,i[e+2]+=n!==i[e+2]?(n-i[e+2])*a:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.Blur=r(n.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var n,r,i=t.filterBackend.resources,o=t.imageData.width,a=t.imageData.height;i.blurLayer1||(i.blurLayer1=e.util.createCanvasElement(),i.blurLayer2=e.util.createCanvasElement()),n=i.blurLayer1,r=i.blurLayer2,n.width===o&&n.height===a||(r.width=n.width=o,r.height=n.height=a);var s,u,c,l,h=n.getContext("2d"),f=r.getContext("2d"),d=15,p=.06*this.blur*.5;for(h.putImageData(t.imageData,0,0),f.clearRect(0,0,o,a),l=-d;l<=d;l++)s=(Math.random()-.5)/4,u=l/d,c=p*u*o+s,f.globalAlpha=1-Math.abs(u),f.drawImage(n,c,s),h.drawImage(r,0,0),f.globalAlpha=1,f.clearRect(0,0,r.width,r.height);for(l=-d;l<=d;l++)s=(Math.random()-.5)/4,u=l/d,c=p*u*a+s,f.globalAlpha=1-Math.abs(u),f.drawImage(n,s,c),h.drawImage(r,0,0),f.globalAlpha=1,f.clearRect(0,0,r.width,r.height);t.ctx.drawImage(n,0,0);var g=t.ctx.getImageData(0,0,n.width,n.height);return h.globalAlpha=1,h.clearRect(0,0,n.width,n.height),g},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var n=this.chooseRightDelta();t.uniform2fv(e.delta,n)},chooseRightDelta:function(){var t,e=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),n.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.Gamma=r(n.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,n=t.imageData,r=n.data,i=this.gamma,o=r.length,a=1/i[0],s=1/i[1],u=1/i[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,o=256;e<o;e++)this.rVals[e]=255*Math.pow(e/255,a),this.gVals[e]=255*Math.pow(e/255,s),this.bVals[e]=255*Math.pow(e/255,u);for(e=0,o=r.length;e<o;e+=4)r[e]=this.rVals[r[e]],r[e+1]=this.gVals[r[e+1]],r[e+2]=this.bVals[r[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.Composed=r(n.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach((function(e){e.applyTo(t)}))},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(t){return t.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(t){return!t.isNeutralState()}))}}),e.Image.filters.Composed.fromObject=function(t,n){var r=t.subFilters||[],i=r.map((function(t){return new e.Image.filters[t.type](t)})),o=new e.Image.filters.Composed({subFilters:i});return n&&n(o),o}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,r=e.util.createClass;n.HueRotation=r(n.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,n=e.util.cos(t),r=e.util.sin(t),i=1/3,o=Math.sqrt(i)*r,a=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+a/3,this.matrix[1]=i*a-o,this.matrix[2]=i*a+o,this.matrix[5]=i*a+o,this.matrix[6]=n+i*a,this.matrix[7]=i*a-o,this.matrix[10]=i*a-o,this.matrix[11]=i*a+o,this.matrix[12]=n+i*a},isNeutralState:function(t){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.clone;e.Text?e.warn("fabric.Text is already defined"):(e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:e.Object.prototype.stateProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),cacheProperties:e.Object.prototype.cacheProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),stroke:null,shadow:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,n,r,i,o,a,s=0,u=this._textLines.length;s<u;s++)if(("justify"===this.textAlign||s!==u-1&&!this.isEndOfWrapping(s))&&(r=0,i=this._textLines[s],e=this.getLineWidth(s),e<this.width&&(a=this.textLines[s].match(this._reSpacesAndTabs)))){n=a.length,t=(this.width-e)/n;for(var c=0,l=i.length;c<=l;c++)o=this.__charBounds[s][c],this._reSpaceAndTab.test(i[c])?(o.width+=t,o.kernedWidth+=t,o.left+=r,r+=t):o.left+=r}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,n){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,n)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,n=this._textLines.length;e<n;e++){var r=this.getLineWidth(e);r>t&&(t=r)}return t},_renderTextLine:function(t,e,n,r,i,o){this._renderChars(t,e,n,r,i,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,n,r,i,o,a,s=0,u=t.fillStyle,c=this._getLeftOffset(),l=this._getTopOffset(),h=0,f=0,d=0,p=this._textLines.length;d<p;d++)if(e=this.getHeightOfLine(d),this.textBackgroundColor||this.styleHas("textBackgroundColor",d)){r=this._textLines[d],n=this._getLineLeftOffset(d),f=0,h=0,i=this.getValueOfPropertyAt(d,0,"textBackgroundColor");for(var g=0,m=r.length;g<m;g++)o=this.__charBounds[d][g],a=this.getValueOfPropertyAt(d,g,"textBackgroundColor"),a!==i?(t.fillStyle=i,i&&t.fillRect(c+n+h,l+s,f,e/this.lineHeight),h=o.left,f=o.width,i=a):f+=o.kernedWidth;a&&(t.fillStyle=a,t.fillRect(c+n+h,l+s,f,e/this.lineHeight)),s+=e}else s+=e;t.fillStyle=u,this._removeShadow(t)}},getFontCache:function(t){var n=t.fontFamily.toLowerCase();e.charWidthsCache[n]||(e.charWidthsCache[n]={});var r=e.charWidthsCache[n],i=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return r[i]||(r[i]={}),r[i]},_applyCharStyles:function(t,e,n,r,i){this._setFillStyles(e,i),this._setStrokeStyles(e,i),e.font=this._getFontDeclaration(i)},_measureChar:function(t,e,n,r){var i,o,a,s,u=this.getFontCache(e),c=this._getFontDeclaration(e),l=this._getFontDeclaration(r),h=n+t,f=c===l,d=e.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==u[n]&&(a=u[n]),void 0!==u[t]&&(s=i=u[t]),f&&void 0!==u[h]&&(o=u[h],s=o-a),void 0===i||void 0===a||void 0===o){var p=this.getMeasuringContext();this._setTextStyles(p,e,!0)}return void 0===i&&(s=i=p.measureText(t).width,u[t]=i),void 0===a&&f&&n&&(a=p.measureText(n).width,u[n]=a),f&&void 0===o&&(o=p.measureText(h).width,u[h]=o,s=o-a),{width:i*d,kernedWidth:s*d}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e,n,r,i,o=0,a=this._textLines[t],s=0,u=new Array(a.length);for(this.__charBounds[t]=u,e=0;e<a.length;e++)n=a[e],i=this._getGraphemeBox(n,t,e,r),u[e]=i,o+=i.kernedWidth,r=n;return u[e]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:o,numOfSpaces:s}},_getGraphemeBox:function(t,e,n,r,i){var o,a=this.getCompleteStyleDeclaration(e,n),s=r?this.getCompleteStyleDeclaration(e,n-1):{},u=this._measureChar(t,a,r,s),c=u.kernedWidth,l=u.width;0!==this.charSpacing&&(o=this._getWidthOfCharSpacing(),l+=o,c+=o);var h={width:l,left:0,height:a.fontSize,kernedWidth:c,deltaY:a.deltaY};if(n>0&&!i){var f=this.__charBounds[e][n-1];h.left=f.left+f.width+u.kernedWidth-u.width}return h},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],n=this.getHeightOfChar(t,0),r=1,i=e.length;r<i;r++)n=Math.max(this.getHeightOfChar(t,r),n);return this.__lineHeights[t]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,n=0,r=this._textLines.length;n<r;n++)t=this.getHeightOfLine(n),e+=n===r-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var n=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return t.transform(1,0,0,1,n,r),{offsetX:n,offsetY:r}},_renderTextCommon:function(t,e){t.save();for(var n=0,r=this._getLeftOffset(),i=this._getTopOffset(),o=this._applyPatternGradientTransform(t,"fillText"===e?this.fill:this.stroke),a=0,s=this._textLines.length;a<s;a++){var u=this.getHeightOfLine(a),c=u/this.lineHeight,l=this._getLineLeftOffset(a);this._renderTextLine(e,t,this._textLines[a],r+l-o.offsetX,i+n+c-o.offsetY,a),n+=u}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,n,r,i,o){var a,s,u,c,l=this.getHeightOfLine(o),h=-1!==this.textAlign.indexOf("justify"),f="",d=0,p=!h&&0===this.charSpacing&&this.isEmptyStyles(o);if(e.save(),i-=l*this._fontSizeFraction/this.lineHeight,p)return this._renderChar(t,e,o,0,this.textLines[o],r,i,l),void e.restore();for(var g=0,m=n.length-1;g<=m;g++)c=g===m||this.charSpacing,f+=n[g],u=this.__charBounds[o][g],0===d?(r+=u.kernedWidth-u.width,d+=u.width):d+=u.kernedWidth,h&&!c&&this._reSpaceAndTab.test(n[g])&&(c=!0),c||(a=a||this.getCompleteStyleDeclaration(o,g),s=this.getCompleteStyleDeclaration(o,g+1),c=this._hasStyleChanged(a,s)),c&&(this._renderChar(t,e,o,g,f,r,i,l),f="",a=s,r+=d,d=0);e.restore()},_renderChar:function(t,e,n,r,i,o,a){var s=this._getStyleDeclaration(n,r),u=this.getCompleteStyleDeclaration(n,r),c="fillText"===t&&u.fill,l="strokeText"===t&&u.stroke&&u.strokeWidth;(l||c)&&(s&&e.save(),this._applyCharStyles(t,e,n,r,u),s&&s.textBackgroundColor&&this._removeShadow(e),s&&s.deltaY&&(a+=s.deltaY),c&&e.fillText(i,o,a),l&&e.strokeText(i,o,a),s&&e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,n){var r=this.get2DCursorLocation(t,!0),i=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),o=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),a={fontSize:i*n.size,deltaY:o+i*n.baseline};return this.setSelectionStyles(a,t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t);return"center"===this.textAlign?(this.width-e)/2:"right"===this.textAlign?this.width-e:"justify-center"===this.textAlign&&this.isEndOfWrapping(t)?(this.width-e)/2:"justify-right"===this.textAlign&&this.isEndOfWrapping(t)?this.width-e:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(this.__lineWidths[t])return this.__lineWidths[t];var e,n,r=this._textLines[t];return""===r?e=0:(n=this.measureLine(t),e=n.width),this.__lineWidths[t]=e,e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,n){var r=this._getStyleDeclaration(t,e);return r&&"undefined"!==typeof r[n]?r[n]:this[n]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var n,r,i,o,a,s,u,c,l,h,f,d,p,g,m,v,y=this._getLeftOffset(),b=this._getTopOffset(),x=this._getWidthOfCharSpacing(),w=0,_=this._textLines.length;w<_;w++)if(n=this.getHeightOfLine(w),this[e]||this.styleHas(e,w)){u=this._textLines[w],g=n/this.lineHeight,o=this._getLineLeftOffset(w),h=0,f=0,c=this.getValueOfPropertyAt(w,0,e),v=this.getValueOfPropertyAt(w,0,"fill"),l=b+g*(1-this._fontSizeFraction),r=this.getHeightOfChar(w,0),a=this.getValueOfPropertyAt(w,0,"deltaY");for(var O=0,S=u.length;O<S;O++)d=this.__charBounds[w][O],p=this.getValueOfPropertyAt(w,O,e),m=this.getValueOfPropertyAt(w,O,"fill"),i=this.getHeightOfChar(w,O),s=this.getValueOfPropertyAt(w,O,"deltaY"),(p!==c||m!==v||i!==r||s!==a)&&f>0?(t.fillStyle=v,c&&v&&t.fillRect(y+o+h,l+this.offsets[e]*r+a,f,this.fontSize/15),h=d.left,f=d.width,c=p,v=m,r=i,a=s):f+=d.kernedWidth;t.fillStyle=m,p&&m&&t.fillRect(y+o+h,l+this.offsets[e]*r+a,f-x,this.fontSize/15),b+=n}else b+=n;this._removeShadow(t)}},_getFontDeclaration:function(t,n){var r=t||this,i=this.fontFamily,o=e.Text.genericFonts.indexOf(i.toLowerCase())>-1,a=void 0===i||i.indexOf("'")>-1||i.indexOf(",")>-1||i.indexOf('"')>-1||o?r.fontFamily:'"'+r.fontFamily+'"';return[e.isLikelyNode?r.fontWeight:r.fontStyle,e.isLikelyNode?r.fontStyle:r.fontWeight,n?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",a].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var n=t.split(this._reNewline),r=new Array(n.length),i=["\n"],o=[],a=0;a<n.length;a++)r[a]=e.util.string.graphemeSplit(n[a]),o=o.concat(r[a],i);return o.pop(),{_unwrappedLines:r,lines:n,graphemeText:o,graphemeLines:r}},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing"].concat(t),r=this.callSuper("toObject",e);return r.styles=n(this.styles,!0),r},set:function(t,e){this.callSuper("set",t,e);var n=!1;if("object"===typeof t)for(var r in t)n=n||-1!==this._dimensionAffectingProps.indexOf(r);else n=-1!==this._dimensionAffectingProps.indexOf(t);return n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,r,i){if(!t)return r(null);var o=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),a=o.textAnchor||"left";if(i=e.util.object.extend(i?n(i):{},o),i.top=i.top||0,i.left=i.left||0,o.textDecoration){var s=o.textDecoration;-1!==s.indexOf("underline")&&(i.underline=!0),-1!==s.indexOf("overline")&&(i.overline=!0),-1!==s.indexOf("line-through")&&(i.linethrough=!0),delete i.textDecoration}"dx"in o&&(i.left+=o.dx),"dy"in o&&(i.top+=o.dy),"fontSize"in i||(i.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var u="";"textContent"in t?u=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(u=t.firstChild.data),u=u.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=i.strokeWidth;i.strokeWidth=0;var l=new e.Text(u,i),h=l.getScaledHeight()/l.height,f=(l.height+l.strokeWidth)*l.lineHeight-l.height,d=f*h,p=l.getScaledHeight()+d,g=0;"center"===a&&(g=l.getScaledWidth()/2),"right"===a&&(g=l.getScaledWidth()),l.set({left:l.left-g,top:l.top-(p-l.fontSize*(.07+l._fontSizeFraction))/l.lineHeight,strokeWidth:"undefined"!==typeof c?c:1}),r(l)},e.Text.fromObject=function(t,n){return e.Object._fromObject("Text",t,n,"text")},e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],e.util.createAccessors&&e.util.createAccessors(e.Text))}(e),function(){r.util.object.extend(r.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if("undefined"!==typeof t&&!this.styles[t])return!0;var e="undefined"===typeof t?this.styles:{line:this.styles[t]};for(var n in e)for(var r in e[n])for(var i in e[n][r])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if("undefined"!==typeof e&&!this.styles[e])return!1;var n="undefined"===typeof e?this.styles:{0:this.styles[e]};for(var r in n)for(var i in n[r])if("undefined"!==typeof n[r][i][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,n,r=this.styles,i=0,o=!0,a=0;for(var s in r){for(var u in e=0,r[s]){var c=r[s][u],l=c.hasOwnProperty(t);i++,l?(n?c[t]!==n&&(o=!1):n=c[t],c[t]===this[t]&&delete c[t]):o=!1,0!==Object.keys(c).length?e++:delete r[s][u]}0===e&&delete r[s]}for(var h=0;h<this._textLines.length;h++)a+=this._textLines[h].length;o&&i===a&&(this[t]=n,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,n,r,i=this.styles;for(n in i){for(r in e=i[n],e)delete e[r][t],0===Object.keys(e[r]).length&&delete e[r];0===Object.keys(e).length&&delete i[n]}}},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),r.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),e)},get2DCursorLocation:function(t,e){"undefined"===typeof t&&(t=this.selectionStart);for(var n=e?this._unwrappedTextLines:this._textLines,r=n.length,i=0;i<r;i++){if(t<=n[i].length)return{lineIndex:i,charIndex:t};t-=n[i].length+this.missingNewlineOffset(i)}return{lineIndex:i-1,charIndex:n[i-1].length<t?n[i-1].length:t}},getSelectionStyles:function(t,e,n){"undefined"===typeof t&&(t=this.selectionStart||0),"undefined"===typeof e&&(e=this.selectionEnd||t);for(var r=[],i=t;i<e;i++)r.push(this.getStyleAtPosition(i,n));return r},getStyleAtPosition:function(t,e){var n=this.get2DCursorLocation(t),r=e?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex);return r||{}},setSelectionStyles:function(t,e,n){"undefined"===typeof e&&(e=this.selectionStart||0),"undefined"===typeof n&&(n=this.selectionEnd||e);for(var r=e;r<n;r++)this._extendStyles(r,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var n=this.styles&&this.styles[t];return n?n[e]:null},getCompleteStyleDeclaration:function(t,e){for(var n,r=this._getStyleDeclaration(t,e)||{},i={},o=0;o<this._styleProperties.length;o++)n=this._styleProperties[o],i[n]="undefined"===typeof r[n]?this[n]:r[n];return i},_setStyleDeclaration:function(t,e,n){this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}})}(),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf("underline")>-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}r.IText=r.util.createClass(r.Text,r.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,n=this.height+4;t.clearRect(-e/2,-n/2,e,n)},_getCursorBoundaries:function(t){"undefined"===typeof t&&(t=this.selectionStart);var e=this._getLeftOffset(),n=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t);return{left:e,top:n,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,n,r,i,o=0,a=0,s=this.get2DCursorLocation(t);r=s.charIndex,n=s.lineIndex;for(var u=0;u<n;u++)o+=this.getHeightOfLine(u);e=this._getLineLeftOffset(n);var c=this.__charBounds[n][r];return c&&(a=c.left),0!==this.charSpacing&&r===this._textLines[n].length&&(a-=this._getWidthOfCharSpacing()),i={top:o,left:e+(a>0?a:0)},this.cursorOffsetCache=i,this.cursorOffsetCache},renderCursor:function(t,e){var n=this.get2DCursorLocation(),r=n.lineIndex,i=n.charIndex>0?n.charIndex-1:0,o=this.getValueOfPropertyAt(r,i,"fontSize"),a=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/a,u=t.topOffset,c=this.getValueOfPropertyAt(r,i,"deltaY");u+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.getValueOfPropertyAt(r,i,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-s/2,u+t.top+c,s,o)},renderSelection:function(t,e){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,i=-1!==this.textAlign.indexOf("justify"),o=this.get2DCursorLocation(n),a=this.get2DCursorLocation(r),s=o.lineIndex,u=a.lineIndex,c=o.charIndex<0?0:o.charIndex,l=a.charIndex<0?0:a.charIndex,h=s;h<=u;h++){var f=this._getLineLeftOffset(h)||0,d=this.getHeightOfLine(h),p=0,g=0,m=0;if(h===s&&(g=this.__charBounds[s][c].left),h>=s&&h<u)m=i&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===u)if(0===l)m=this.__charBounds[u][l].left;else{var v=this._getWidthOfCharSpacing();m=this.__charBounds[u][l-1].left+this.__charBounds[u][l-1].width-v}p=d,(this.lineHeight<1||h===u&&this.lineHeight>1)&&(d/=this.lineHeight),this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",e.fillRect(t.left+f+g,t.top+t.topOffset+d,m-g,1)):(e.fillStyle=this.selectionColor,e.fillRect(t.left+f+g,t.top+t.topOffset,m-g,d)),t.topOffset+=p}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),r.IText.fromObject=function(e,n){if(t(e),e.styles)for(var i in e.styles)for(var o in e.styles[i])t(e.styles[i][o]);r.Object._fromObject("IText",e,n,"text")}}(),function(){var t=r.util.object.clone;r.util.object.extend(r.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",(function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))}))},initRemovedHandler:function(){var t=this;this.on("removed",(function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],r.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))}))},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.__isMousedown=!1}))},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,n,r){var i;return i={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:n,onComplete:function(){i.isAborted||t[r]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return i.isAborted}}),i},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(t){var e=this,n=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){e._tick()}),n)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this._text[n]))while(this._reSpace.test(this._text[n]))e++,n--;while(/\S/.test(this._text[n])&&n>-1)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this._text[n]))while(this._reSpace.test(this._text[n]))e++,n++;while(/\S/.test(this._text[n])&&n<this._text.length)e++,n++;return t+e},findLineBoundaryLeft:function(t){var e=0,n=t-1;while(!/\n/.test(this._text[n])&&n>-1)e++,n--;return t-e},findLineBoundaryRight:function(t){var e=0,n=t;while(!/\n/.test(this._text[n])&&n<this._text.length)e++,n++;return t+e},searchWordBoundary:function(t,e){var n=this._text,i=this._reSpace.test(n[t])?t-1:t,o=n[i],a=r.reNonWord;while(!a.test(o)&&i>0&&i<n.length)i+=e,o=n[i];return a.test(o)&&(i+=1===e?0:1),i},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),n=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.selected=!1,t.isEditing&&t.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),n=this.selectionStart,r=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&n!==r||n!==e&&r!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===r||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,n){var i=n.slice(0,t),o=r.util.string.graphemeSplit(i).length;if(t===e)return{selectionStart:o,selectionEnd:o};var a=n.slice(t,e),s=r.util.string.graphemeSplit(a).length;return{selectionStart:o,selectionEnd:o+s}},fromGraphemeToStringSelection:function(t,e,n){var r=n.slice(0,t),i=r.join("").length;if(t===e)return{selectionStart:i,selectionEnd:i};var o=n.slice(t,e),a=o.join("").length;return{selectionStart:i,selectionEnd:i+a}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),i=n.lineIndex,o=n.charIndex,a=this.getValueOfPropertyAt(i,o,"fontSize")*this.lineHeight,s=e.leftOffset,u=this.calcTransformMatrix(),c={x:e.left+s,y:e.top+e.topOffset+a},l=this.canvas.getRetinaScaling(),h=this.canvas.upperCanvasEl,f=h.width/l,d=h.height/l,p=f-a,g=d-a,m=h.clientWidth/f,v=h.clientHeight/d;return c=r.util.transformPoint(c,u),c=r.util.transformPoint(c,this.canvas.viewportTransform),c.x*=m,c.y*=v,c.x<0&&(c.x=0),c.x>p&&(c.x=p),c.y<0&&(c.y=0),c.y>g&&(c.y=g),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var n,r,i=this.get2DCursorLocation(t,!0),o=this.get2DCursorLocation(e,!0),a=i.lineIndex,s=i.charIndex,u=o.lineIndex,c=o.charIndex;if(a!==u){if(this.styles[a])for(n=s;n<this._unwrappedTextLines[a].length;n++)delete this.styles[a][n];if(this.styles[u])for(n=c;n<this._unwrappedTextLines[u].length;n++)r=this.styles[u][n],r&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+n-c]=r);for(n=a+1;n<=u;n++)delete this.styles[n];this.shiftLineStyles(u,a-u)}else if(this.styles[a]){r=this.styles[a];var l,h,f=c-s;for(n=s;n<c;n++)delete r[n];for(h in this.styles[a])l=parseInt(h,10),l>=c&&(r[l-f]=r[h],delete r[h])}},shiftLineStyles:function(e,n){var r=t(this.styles);for(var i in this.styles){var o=parseInt(i,10);o>e&&(this.styles[o+n]=r[o],r[o-n]||delete this.styles[o])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,n,r,i){var o,a={},s=!1;for(var u in r||(r=1),this.shiftLineStyles(e,r),this.styles[e]&&(o=this.styles[e][0===n?n:n-1]),this.styles[e]){var c=parseInt(u,10);c>=n&&(s=!0,a[c-n]=this.styles[e][u],delete this.styles[e][u])}s?this.styles[e+r]=a:delete this.styles[e+r];while(r>1)r--,i&&i[r]?this.styles[e+r]={0:t(i[r])}:o?this.styles[e+r]={0:t(o)}:delete this.styles[e+r];this._forceClearCache=!0},insertCharStyleObject:function(e,n,r,i){this.styles||(this.styles={});var o=this.styles[e],a=o?t(o):{};for(var s in r||(r=1),a){var u=parseInt(s,10);u>=n&&(o[u+r]=a[u],a[u-r]||delete o[u])}if(this._forceClearCache=!0,i)while(r--)Object.keys(i[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][n+r]=t(i[r]));else if(o){var c=o[n?n-1:1];while(c&&r--)this.styles[e][n+r]=t(c)}},insertNewStyleBlock:function(t,e,n){for(var r=this.get2DCursorLocation(e,!0),i=[0],o=0,a=0;a<t.length;a++)"\n"===t[a]?(o++,i[o]=0):i[o]++;i[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,i[0],n),n=n&&n.slice(i[0]+1)),o&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+i[0],o);for(a=1;a<o;a++)i[a]>0?this.insertCharStyleObject(r.lineIndex+a,0,i[a],n):n&&(this.styles[r.lineIndex+a][0]=n[0]),n=n&&n.slice(i[a]+1);i[a]>0&&this.insertCharStyleObject(r.lineIndex+a,0,i[a],n)},setSelectionStartEndWithShift:function(t,e,n){n<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=n)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),r.util.object.extend(r.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),n=this.selectionStart,r=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,r,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,n,r=this.getLocalPointer(t),i=0,o=0,a=0,s=0,u=0,c=0,l=this._textLines.length;c<l;c++){if(!(a<=r.y))break;a+=this.getHeightOfLine(c)*this.scaleY,u=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1))}e=this._getLineLeftOffset(u),o=e*this.scaleX,n=this._textLines[u];for(var h=0,f=n.length;h<f;h++){if(i=o,o+=this.__charBounds[u][h].kernedWidth*this.scaleX,!(o<=r.x))break;s++}return this._getNewSelectionStartFromOffset(r,i,o,s,f)},_getNewSelectionStartFromOffset:function(t,e,n,r,i){var o=t.x-e,a=n-t.x,s=a>o||a<0?0:1,u=r+s;return this.flipX&&(u=i-u),u>this._text.length&&(u=this._text.length),u}}),r.util.object.extend(r.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=r.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: "+t.fontSize+";",r.document.body.appendChild(this.hiddenTextarea),r.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),r.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),r.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),r.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),r.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),r.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(r.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing&&!this.inCompositionMode){if(t.keyCode in this.keysMap)this[this.keysMap[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var n,i,o=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,a=this._text.length,s=o.length,u=s-a;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var c=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),l=this.selectionStart>c.selectionStart;this.selectionStart!==this.selectionEnd?(n=this._text.slice(this.selectionStart,this.selectionEnd),u+=this.selectionEnd-this.selectionStart):s<a&&(n=l?this._text.slice(this.selectionEnd+u,this.selectionEnd):this._text.slice(this.selectionStart,this.selectionStart-u)),i=o.slice(c.selectionEnd-u,c.selectionEnd),n&&n.length&&(this.selectionStart!==this.selectionEnd?this.removeStyleFromTo(this.selectionStart,this.selectionEnd):l?this.removeStyleFromTo(this.selectionEnd-n.length,this.selectionEnd):this.removeStyleFromTo(this.selectionEnd,this.selectionEnd+n.length)),i.length&&(e&&i.join("")===r.copiedText&&!r.disableStyleCopyPaste?this.insertNewStyleBlock(i,this.selectionStart,r.copiedTextStyle):this.insertNewStyleBlock(i,this.selectionStart)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(r.copiedText=this.getSelectedText(),r.disableStyleCopyPaste?r.copiedTextStyle=null:r.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||r.window.clipboardData},_getWidthBeforeCursor:function(t,e){var n,r=this._getLineLeftOffset(t);return e>0&&(n=this.__charBounds[t][e-1],r+=n.left+n.width),r},getDownCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(n),i=r.lineIndex;if(i===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-n;var o=r.charIndex,a=this._getWidthBeforeCursor(i,o),s=this._getIndexOnLine(i+1,a),u=this._textLines[i].slice(o);return u.length+s+1+this.missingNewlineOffset(i)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(n),i=r.lineIndex;if(0===i||t.metaKey||33===t.keyCode)return-n;var o=r.charIndex,a=this._getWidthBeforeCursor(i,o),s=this._getIndexOnLine(i-1,a),u=this._textLines[i].slice(0,o),c=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+s-u.length+(1-c)},_getIndexOnLine:function(t,e){for(var n,r,i=this._textLines[t],o=this._getLineLeftOffset(t),a=o,s=0,u=0,c=i.length;u<c;u++)if(n=this.__charBounds[t][u].width,a+=n,a>e){r=!0;var l=a-n,h=a,f=Math.abs(l-e),d=Math.abs(h-e);s=d<f?u:u-1;break}return r||(s=i.length-1),s},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var n="get"+t+"CursorOffset",r=this[n](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),0!==r&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,n){var r;if(t.altKey)r=this["findWordBoundary"+n](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===n?-1:1,!0;r=this["findLineBoundary"+n](this[e])}if(void 0!==typeof r&&this[e]!==r)return this[e]=r,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var n="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?n+="Shift":n+="outShift",this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){"undefined"===typeof e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,n,i){"undefined"===typeof i&&(i=n),i>n&&this.removeStyleFromTo(n,i);var o=r.util.string.graphemeSplit(t);this.insertNewStyleBlock(o,n,e),this._text=[].concat(this._text.slice(0,n),o,this._text.slice(i)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var t=r.util.toFixed,e=/  +/g;r.util.object.extend(r.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=!0,n=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(e),'"',this.addPaintOrder()," >",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var n,r=[],i=[],o=t;this._setSVGBg(i);for(var a=0,s=this._textLines.length;a<s;a++)n=this._getLineLeftOffset(a),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(i,a,e+n,o),this._setSVGTextLineText(r,a,e+n,o),o+=this.getHeightOfLine(a);return{textSpans:r,textBgRects:i}},_createTextCharSpan:function(n,i,o,a){var s=n!==n.trim()||n.match(e),u=this.getSvgSpanStyles(i,s),c=u?'style="'+u+'"':"",l=i.deltaY,h="",f=r.Object.NUM_FRACTION_DIGITS;return l&&(h=' dy="'+t(l,f)+'" '),['<tspan x="',t(o,f),'" y="',t(a,f),'" ',h,c,">",r.util.string.escapeXml(n),"</tspan>"].join("")},_setSVGTextLineText:function(t,e,n,r){var i,o,a,s,u,c=this.getHeightOfLine(e),l=-1!==this.textAlign.indexOf("justify"),h="",f=0,d=this._textLines[e];r+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,g=d.length-1;p<=g;p++)u=p===g||this.charSpacing,h+=d[p],a=this.__charBounds[e][p],0===f?(n+=a.kernedWidth-a.width,f+=a.width):f+=a.kernedWidth,l&&!u&&this._reSpaceAndTab.test(d[p])&&(u=!0),u||(i=i||this.getCompleteStyleDeclaration(e,p),o=this.getCompleteStyleDeclaration(e,p+1),u=this._hasStyleChangedForSvg(i,o)),u&&(s=this._getStyleDeclaration(e,p)||{},t.push(this._createTextCharSpan(h,s,n,r)),h="",i=o,n+=f,f=0)},_pushTextBgRect:function(e,n,i,o,a,s){var u=r.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(n),' x="',t(i,u),'" y="',t(o,u),'" width="',t(a,u),'" height="',t(s,u),'"></rect>\n')},_setSVGTextLineBg:function(t,e,n,r){for(var i,o,a=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight,u=0,c=0,l=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),h=0,f=a.length;h<f;h++)i=this.__charBounds[e][h],o=this.getValueOfPropertyAt(e,h,"textBackgroundColor"),o!==l?(l&&this._pushTextBgRect(t,l,n+c,r,u,s),c=i.left,u=i.width,l=o):u+=i.kernedWidth;o&&this._pushTextBgRect(t,o,n+c,r,u,s)},_getFillAttributes:function(t){var e=t&&"string"===typeof t?new r.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e=0,n=0,r=0;r<t;r++)e+=this.getHeightOfLine(r);return n=this.getHeightOfLine(r),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){var e=r.Object.prototype.getSvgStyles.call(this,t);return e+" white-space: pre;"}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,n=0,r=0,i={},o=0;o<t.graphemeLines.length;o++)"\n"===t.graphemeText[r]&&o>0?(n=0,r++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[r])&&o>0&&(n++,r++),i[o]={line:e,offset:n},r+=t.graphemeLines[o].length,n+=t.graphemeLines[o].length;return i},styleHas:function(t,n){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[n];r&&(n=r.line)}return e.Text.prototype.styleHas.call(this,t,n)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,n,r=0,i=t+1,o=!1,a=this._styleMap[t],s=this._styleMap[t+1];for(var u in a&&(t=a.line,r=a.offset),s&&(i=s.line,o=i===t,e=s.offset),n="undefined"===typeof t?this.styles:{line:this.styles[t]},n)for(var c in n[u])if(c>=r&&(!o||c<e))for(var l in n[u][c])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[t];if(!n)return null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,n){var r=this._styleMap[t];t=r.line,e=r.offset+e,this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){var n=this._styleMap[t];t=n.line,e=n.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var e=this._styleMap[t];this.styles[e.line]={}},_wrapText:function(t,e){var n,r=[];for(this.isWrapping=!0,n=0;n<t.length;n++)r=r.concat(this._wrapLine(t[n],n,e));return this.isWrapping=!1,r},_measureWord:function(t,e,n){var r,i=0,o=!0;n=n||0;for(var a=0,s=t.length;a<s;a++){var u=this._getGraphemeBox(t[a],e,a+n,r,o);i+=u.kernedWidth,r=t[a]}return i},_wrapLine:function(t,n,r,i){var o=0,a=this.splitByGrapheme,s=[],u=[],c=a?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),l="",h=0,f=a?"":" ",d=0,p=0,g=0,m=!0,v=a?0:this._getWidthOfCharSpacing();i=i||0;0===c.length&&c.push([]),r-=i;for(var y=0;y<c.length;y++)l=a?c[y]:e.util.string.graphemeSplit(c[y]),d=this._measureWord(l,n,h),h+=l.length,o+=p+d-v,o>=r&&!m?(s.push(u),u=[],o=d,m=!0):o+=v,m||a||u.push(f),u=u.concat(l),p=this._measureWord([f],n,h),h++,m=!1,d>g&&(g=d);return y&&s.push(u),g+i>this.dynamicMinWidth&&(this.dynamicMinWidth=g-v+i),s},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var n=e.Text.prototype._splitTextIntoLines.call(this,t),r=this._wrapText(n.lines,this.width),i=new Array(r.length),o=0;o<r.length;o++)i[o]=r[o].join("");return n.lines=i,n.graphemeLines=r,n},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),e.Textbox.fromObject=function(t,n){return e.Object._fromObject("Textbox",t,n,"text")}}(e)}).call(this,n("b639").Buffer)},"7ad3":function(t,e,n){"use strict";n.r(e),n.d(e,"vega",(function(){return xct})),n.d(e,"vegaLite",(function(){return wct})),n.d(e,"DEFAULT_ACTIONS",(function(){return Oct})),n.d(e,"guessMode",(function(){return Dct})),n.d(e,"default",(function(){return Nct}));var r={};n.r(r),n.d(r,"JsonPatchError",(function(){return M})),n.d(r,"deepClone",(function(){return N})),n.d(r,"getValueByPointer",(function(){return F})),n.d(r,"applyOperation",(function(){return P})),n.d(r,"applyPatch",(function(){return $})),n.d(r,"applyReducer",(function(){return L})),n.d(r,"validator",(function(){return z})),n.d(r,"validate",(function(){return B})),n.d(r,"_areEquals",(function(){return U}));var i={};n.r(i),n.d(i,"unobserve",(function(){return Y})),n.d(i,"observe",(function(){return K})),n.d(i,"generate",(function(){return Z})),n.d(i,"compare",(function(){return Q}));var o={};n.r(o),n.d(o,"aggregate",(function(){return Fu})),n.d(o,"bin",(function(){return Lu})),n.d(o,"collect",(function(){return Uu})),n.d(o,"compare",(function(){return Vu})),n.d(o,"countpattern",(function(){return qu})),n.d(o,"cross",(function(){return Yu})),n.d(o,"density",(function(){return rc})),n.d(o,"dotbin",(function(){return hc})),n.d(o,"expression",(function(){return pc})),n.d(o,"extent",(function(){return mc})),n.d(o,"facet",(function(){return xc})),n.d(o,"field",(function(){return _c})),n.d(o,"filter",(function(){return Sc})),n.d(o,"flatten",(function(){return kc})),n.d(o,"fold",(function(){return Tc})),n.d(o,"formula",(function(){return jc})),n.d(o,"generate",(function(){return Mc})),n.d(o,"impute",(function(){return Pc})),n.d(o,"joinaggregate",(function(){return Uc})),n.d(o,"kde",(function(){return Vc})),n.d(o,"key",(function(){return qc})),n.d(o,"load",(function(){return Xc})),n.d(o,"lookup",(function(){return Jc})),n.d(o,"multiextent",(function(){return tl})),n.d(o,"multivalues",(function(){return nl})),n.d(o,"params",(function(){return il})),n.d(o,"pivot",(function(){return ol})),n.d(o,"prefacet",(function(){return ll})),n.d(o,"project",(function(){return fl})),n.d(o,"proxy",(function(){return gl})),n.d(o,"quantile",(function(){return yl})),n.d(o,"relay",(function(){return wl})),n.d(o,"sample",(function(){return Ol})),n.d(o,"sequence",(function(){return Cl})),n.d(o,"sieve",(function(){return Al})),n.d(o,"subflow",(function(){return yc})),n.d(o,"timeunit",(function(){return El})),n.d(o,"tupleindex",(function(){return Ml})),n.d(o,"values",(function(){return Il})),n.d(o,"window",(function(){return Wl}));var a={};n.r(a),n.d(a,"interpolate",(function(){return Ob})),n.d(a,"interpolateArray",(function(){return db})),n.d(a,"interpolateBasis",(function(){return Qy})),n.d(a,"interpolateBasisClosed",(function(){return tb})),n.d(a,"interpolateDate",(function(){return gb})),n.d(a,"interpolateDiscrete",(function(){return Jx})),n.d(a,"interpolateHue",(function(){return Qx})),n.d(a,"interpolateNumber",(function(){return mb})),n.d(a,"interpolateNumberArray",(function(){return hb})),n.d(a,"interpolateObject",(function(){return vb})),n.d(a,"interpolateRound",(function(){return Sb})),n.d(a,"interpolateString",(function(){return _b})),n.d(a,"interpolateTransformCss",(function(){return aw})),n.d(a,"interpolateTransformSvg",(function(){return sw})),n.d(a,"interpolateZoom",(function(){return gw})),n.d(a,"interpolateRgb",(function(){return sb})),n.d(a,"interpolateRgbBasis",(function(){return cb})),n.d(a,"interpolateRgbBasisClosed",(function(){return lb})),n.d(a,"interpolateHsl",(function(){return vw})),n.d(a,"interpolateHslLong",(function(){return yw})),n.d(a,"interpolateLab",(function(){return bw})),n.d(a,"interpolateHcl",(function(){return ww})),n.d(a,"interpolateHclLong",(function(){return _w})),n.d(a,"interpolateCubehelix",(function(){return Sw})),n.d(a,"interpolateCubehelixLong",(function(){return Cw})),n.d(a,"piecewise",(function(){return kx})),n.d(a,"quantize",(function(){return kw}));var s={};n.r(s),n.d(s,"bound",(function(){return AO})),n.d(s,"identifier",(function(){return DO})),n.d(s,"mark",(function(){return IO})),n.d(s,"overlap",(function(){return PO})),n.d(s,"render",(function(){return qO})),n.d(s,"viewlayout",(function(){return OS}));var u={};n.r(u),n.d(u,"axisticks",(function(){return TS})),n.d(u,"datajoin",(function(){return jS})),n.d(u,"encode",(function(){return IS})),n.d(u,"legendentries",(function(){return FS})),n.d(u,"linkpath",(function(){return WS})),n.d(u,"pie",(function(){return iC})),n.d(u,"scale",(function(){return NC})),n.d(u,"sortitems",(function(){return GC})),n.d(u,"stack",(function(){return QC}));var c={};n.r(c),n.d(c,"contour",(function(){return jk})),n.d(c,"geojson",(function(){return Rk})),n.d(c,"geopath",(function(){return bM})),n.d(c,"geopoint",(function(){return _M})),n.d(c,"geoshape",(function(){return SM})),n.d(c,"graticule",(function(){return LM})),n.d(c,"heatmap",(function(){return xN})),n.d(c,"isocontour",(function(){return gk})),n.d(c,"kde2d",(function(){return Ck})),n.d(c,"projection",(function(){return kN}));var l={};n.r(l),n.d(l,"force",(function(){return iI}));var h={};n.r(h),n.d(h,"nest",(function(){return MI})),n.d(h,"pack",(function(){return dR})),n.d(h,"partition",(function(){return bR})),n.d(h,"stratify",(function(){return AR})),n.d(h,"tree",(function(){return XR})),n.d(h,"treelinks",(function(){return KR})),n.d(h,"treemap",(function(){return uF}));var f={};n.r(f),n.d(f,"loess",(function(){return hF})),n.d(f,"regression",(function(){return gF}));var d={};n.r(d),n.d(d,"voronoi",(function(){return VF}));var p={};n.r(p),n.d(p,"wordcloud",(function(){return cP}));var g={};n.r(g),n.d(g,"crossfilter",(function(){return _P})),n.d(g,"resolvefilter",(function(){return SP}));var m={};n.r(m),n.d(m,"version",(function(){return kP["a"]})),n.d(m,"bandwidthNRD",(function(){return Fs})),n.d(m,"bin",(function(){return Ps})),n.d(m,"bootstrapCI",(function(){return zs})),n.d(m,"dotbin",(function(){return Bs})),n.d(m,"quantiles",(function(){return Ms})),n.d(m,"quartiles",(function(){return Ns})),n.d(m,"random",(function(){return $s})),n.d(m,"setRandom",(function(){return Ls})),n.d(m,"randomLCG",(function(){return Ws})),n.d(m,"randomInteger",(function(){return Vs})),n.d(m,"randomKDE",(function(){return tu})),n.d(m,"randomLogNormal",(function(){return ou})),n.d(m,"sampleLogNormal",(function(){return eu})),n.d(m,"densityLogNormal",(function(){return nu})),n.d(m,"cumulativeLogNormal",(function(){return ru})),n.d(m,"quantileLogNormal",(function(){return iu})),n.d(m,"randomMixture",(function(){return au})),n.d(m,"randomNormal",(function(){return Qs})),n.d(m,"sampleNormal",(function(){return Xs})),n.d(m,"densityNormal",(function(){return Ys})),n.d(m,"cumulativeNormal",(function(){return Ks})),n.d(m,"quantileNormal",(function(){return Zs})),n.d(m,"randomUniform",(function(){return hu})),n.d(m,"sampleUniform",(function(){return su})),n.d(m,"densityUniform",(function(){return uu})),n.d(m,"cumulativeUniform",(function(){return cu})),n.d(m,"quantileUniform",(function(){return lu})),n.d(m,"regressionLinear",(function(){return mu})),n.d(m,"regressionLog",(function(){return vu})),n.d(m,"regressionExp",(function(){return yu})),n.d(m,"regressionPow",(function(){return bu})),n.d(m,"regressionQuad",(function(){return xu})),n.d(m,"regressionPoly",(function(){return wu})),n.d(m,"regressionLoess",(function(){return Au})),n.d(m,"sampleCurve",(function(){return Mu})),n.d(m,"TIME_UNITS",(function(){return Tn})),n.d(m,"YEAR",(function(){return vn})),n.d(m,"QUARTER",(function(){return yn})),n.d(m,"MONTH",(function(){return bn})),n.d(m,"WEEK",(function(){return xn})),n.d(m,"DATE",(function(){return wn})),n.d(m,"DAY",(function(){return _n})),n.d(m,"DAYOFYEAR",(function(){return On})),n.d(m,"HOURS",(function(){return Sn})),n.d(m,"MINUTES",(function(){return Cn})),n.d(m,"SECONDS",(function(){return kn})),n.d(m,"MILLISECONDS",(function(){return An})),n.d(m,"timeUnitSpecifier",(function(){return Mn})),n.d(m,"timeUnits",(function(){return jn})),n.d(m,"dayofyear",(function(){return cr})),n.d(m,"week",(function(){return lr})),n.d(m,"utcdayofyear",(function(){return gr})),n.d(m,"utcweek",(function(){return mr})),n.d(m,"timeFloor",(function(){return kr})),n.d(m,"utcFloor",(function(){return Er})),n.d(m,"timeInterval",(function(){return Jr})),n.d(m,"timeOffset",(function(){return ei})),n.d(m,"timeSequence",(function(){return ii})),n.d(m,"utcInterval",(function(){return Qr})),n.d(m,"utcOffset",(function(){return ni})),n.d(m,"utcSequence",(function(){return oi})),n.d(m,"timeBin",(function(){return Ci})),n.d(m,"accessor",(function(){return rt["f"]})),n.d(m,"accessorName",(function(){return rt["h"]})),n.d(m,"accessorFields",(function(){return rt["g"]})),n.d(m,"id",(function(){return rt["w"]})),n.d(m,"identity",(function(){return rt["x"]})),n.d(m,"zero",(function(){return rt["kb"]})),n.d(m,"one",(function(){return rt["O"]})),n.d(m,"truthy",(function(){return rt["gb"]})),n.d(m,"falsy",(function(){return rt["r"]})),n.d(m,"logger",(function(){return rt["K"]})),n.d(m,"None",(function(){return rt["d"]})),n.d(m,"Error",(function(){return rt["b"]})),n.d(m,"Warn",(function(){return rt["e"]})),n.d(m,"Info",(function(){return rt["c"]})),n.d(m,"Debug",(function(){return rt["a"]})),n.d(m,"mergeConfig",(function(){return rt["N"]})),n.d(m,"writeConfig",(function(){return rt["jb"]})),n.d(m,"panLinear",(function(){return rt["Q"]})),n.d(m,"panLog",(function(){return rt["R"]})),n.d(m,"panPow",(function(){return rt["S"]})),n.d(m,"panSymlog",(function(){return rt["T"]})),n.d(m,"zoomLinear",(function(){return rt["lb"]})),n.d(m,"zoomLog",(function(){return rt["mb"]})),n.d(m,"zoomPow",(function(){return rt["nb"]})),n.d(m,"zoomSymlog",(function(){return rt["ob"]})),n.d(m,"quarter",(function(){return rt["V"]})),n.d(m,"utcquarter",(function(){return rt["hb"]})),n.d(m,"array",(function(){return rt["i"]})),n.d(m,"clampRange",(function(){return rt["j"]})),n.d(m,"compare",(function(){return rt["k"]})),n.d(m,"constant",(function(){return rt["l"]})),n.d(m,"debounce",(function(){return rt["m"]})),n.d(m,"error",(function(){return rt["n"]})),n.d(m,"extend",(function(){return rt["o"]})),n.d(m,"extent",(function(){return rt["p"]})),n.d(m,"extentIndex",(function(){return rt["q"]})),n.d(m,"fastmap",(function(){return rt["s"]})),n.d(m,"field",(function(){return rt["t"]})),n.d(m,"flush",(function(){return rt["u"]})),n.d(m,"hasOwnProperty",(function(){return rt["v"]})),n.d(m,"inherits",(function(){return rt["y"]})),n.d(m,"inrange",(function(){return rt["z"]})),n.d(m,"isArray",(function(){return rt["A"]})),n.d(m,"isBoolean",(function(){return rt["B"]})),n.d(m,"isDate",(function(){return rt["C"]})),n.d(m,"isFunction",(function(){return rt["D"]})),n.d(m,"isNumber",(function(){return rt["E"]})),n.d(m,"isObject",(function(){return rt["F"]})),n.d(m,"isRegExp",(function(){return rt["G"]})),n.d(m,"isString",(function(){return rt["H"]})),n.d(m,"key",(function(){return rt["I"]})),n.d(m,"lerp",(function(){return rt["J"]})),n.d(m,"lruCache",(function(){return rt["L"]})),n.d(m,"merge",(function(){return rt["M"]})),n.d(m,"pad",(function(){return rt["P"]})),n.d(m,"peek",(function(){return rt["U"]})),n.d(m,"repeat",(function(){return rt["W"]})),n.d(m,"span",(function(){return rt["X"]})),n.d(m,"splitAccessPath",(function(){return rt["Y"]})),n.d(m,"stringValue",(function(){return rt["Z"]})),n.d(m,"toBoolean",(function(){return rt["ab"]})),n.d(m,"toDate",(function(){return rt["bb"]})),n.d(m,"toNumber",(function(){return rt["cb"]})),n.d(m,"toString",(function(){return rt["eb"]})),n.d(m,"toSet",(function(){return rt["db"]})),n.d(m,"truncate",(function(){return rt["fb"]})),n.d(m,"visitArray",(function(){return rt["ib"]})),n.d(m,"loader",(function(){return sa})),n.d(m,"read",(function(){return oa})),n.d(m,"inferType",(function(){return Kt})),n.d(m,"inferTypes",(function(){return Zt})),n.d(m,"typeParsers",(function(){return Gt})),n.d(m,"format",(function(){return je})),n.d(m,"formats",(function(){return De})),n.d(m,"responseType",(function(){return Me})),n.d(m,"Bounds",(function(){return Ep})),n.d(m,"Gradient",(function(){return Ph})),n.d(m,"GroupItem",(function(){return Mp})),n.d(m,"ResourceLoader",(function(){return Rp})),n.d(m,"Item",(function(){return Dp})),n.d(m,"Scenegraph",(function(){return uv})),n.d(m,"Handler",(function(){return yv})),n.d(m,"Renderer",(function(){return wv})),n.d(m,"CanvasHandler",(function(){return Hv})),n.d(m,"CanvasRenderer",(function(){return ey})),n.d(m,"SVGHandler",(function(){return ay})),n.d(m,"SVGRenderer",(function(){return z_})),n.d(m,"SVGStringRenderer",(function(){return rO})),n.d(m,"RenderType",(function(){return fO})),n.d(m,"renderModule",(function(){return pO})),n.d(m,"intersect",(function(){return gO})),n.d(m,"Marks",(function(){return tv})),n.d(m,"boundClip",(function(){return wO})),n.d(m,"boundContext",(function(){return Hp})),n.d(m,"boundStroke",(function(){return Lp})),n.d(m,"boundItem",(function(){return ev})),n.d(m,"boundMark",(function(){return rv})),n.d(m,"pathCurves",(function(){return Wf})),n.d(m,"pathSymbols",(function(){return cd})),n.d(m,"pathRectangle",(function(){return kd})),n.d(m,"pathTrail",(function(){return Ad})),n.d(m,"pathParse",(function(){return qf})),n.d(m,"pathRender",(function(){return od})),n.d(m,"point",(function(){return mv})),n.d(m,"domCreate",(function(){return hv})),n.d(m,"domFind",(function(){return fv})),n.d(m,"domChild",(function(){return dv})),n.d(m,"domClear",(function(){return pv})),n.d(m,"openTag",(function(){return I_})),n.d(m,"closeTag",(function(){return R_})),n.d(m,"font",(function(){return Um})),n.d(m,"fontFamily",(function(){return Bm})),n.d(m,"fontSize",(function(){return Nm})),n.d(m,"lineHeight",(function(){return Im})),n.d(m,"multiLineOffset",(function(){return Pm})),n.d(m,"textMetrics",(function(){return Am})),n.d(m,"sceneEqual",(function(){return OO})),n.d(m,"pathEqual",(function(){return SO})),n.d(m,"sceneToJSON",(function(){return ov})),n.d(m,"sceneFromJSON",(function(){return av})),n.d(m,"intersectPath",(function(){return ng})),n.d(m,"intersectPoint",(function(){return rg})),n.d(m,"intersectRule",(function(){return og})),n.d(m,"intersectBoxLine",(function(){return ag})),n.d(m,"sceneZOrder",(function(){return mg})),n.d(m,"sceneVisit",(function(){return vg})),n.d(m,"scenePickVisit",(function(){return yg})),n.d(m,"resetSVGClipId",(function(){return Ap})),n.d(m,"resetSVGDefIds",(function(){return kO})),n.d(m,"Dataflow",(function(){return Qa})),n.d(m,"EventStream",(function(){return Mt})),n.d(m,"Parameters",(function(){return bt})),n.d(m,"Pulse",(function(){return Da})),n.d(m,"MultiPulse",(function(){return Fa})),n.d(m,"Operator",(function(){return kt})),n.d(m,"Transform",(function(){return ns})),n.d(m,"changeset",(function(){return vt})),n.d(m,"ingest",(function(){return ht})),n.d(m,"isTuple",(function(){return ut})),n.d(m,"definition",(function(){return os})),n.d(m,"transform",(function(){return as})),n.d(m,"transforms",(function(){return is})),n.d(m,"tupleid",(function(){return ct})),n.d(m,"scale",(function(){return $x})),n.d(m,"scheme",(function(){return Lw})),n.d(m,"interpolate",(function(){return Mw})),n.d(m,"interpolateColors",(function(){return Ew})),n.d(m,"interpolateRange",(function(){return Tw})),n.d(m,"quantizeInterpolator",(function(){return jw})),n.d(m,"projection",(function(){return gM})),n.d(m,"View",(function(){return Eq})),n.d(m,"formatLocale",(function(){return mn})),n.d(m,"timeFormatLocale",(function(){return ta})),n.d(m,"locale",(function(){return na})),n.d(m,"defaultLocale",(function(){return ra})),n.d(m,"resetDefaultLocale",(function(){return ia})),n.d(m,"expressionFunction",(function(){return aH})),n.d(m,"parse",(function(){return bJ})),n.d(m,"runtimeContext",(function(){return LH}));var v={};n.r(v),n.d(v,"invalidSpec",(function(){return x2})),n.d(v,"FIT_NON_SINGLE",(function(){return w2})),n.d(v,"containerSizeNonSingle",(function(){return _2})),n.d(v,"containerSizeNotCompatibleWithAutosize",(function(){return O2})),n.d(v,"droppingFit",(function(){return S2})),n.d(v,"cannotProjectOnChannelWithoutField",(function(){return C2})),n.d(v,"cannotProjectAggregate",(function(){return k2})),n.d(v,"nearestNotSupportForContinuous",(function(){return A2})),n.d(v,"selectionNotSupported",(function(){return T2})),n.d(v,"selectionNotFound",(function(){return E2})),n.d(v,"SCALE_BINDINGS_CONTINUOUS",(function(){return j2})),n.d(v,"LEGEND_BINDINGS_PROJECT_LENGTH",(function(){return D2})),n.d(v,"noSameUnitLookup",(function(){return M2})),n.d(v,"noSuchRepeatedValue",(function(){return N2})),n.d(v,"columnsNotSupportByRowCol",(function(){return I2})),n.d(v,"CONCAT_CANNOT_SHARE_AXIS",(function(){return R2})),n.d(v,"unrecognizedParse",(function(){return F2})),n.d(v,"differentParse",(function(){return P2})),n.d(v,"invalidTransformIgnored",(function(){return $2})),n.d(v,"NO_FIELDS_NEEDS_AS",(function(){return L2})),n.d(v,"customFormatTypeNotAllowed",(function(){return z2})),n.d(v,"encodingOverridden",(function(){return B2})),n.d(v,"projectionOverridden",(function(){return U2})),n.d(v,"REPLACE_ANGLE_WITH_THETA",(function(){return W2})),n.d(v,"primitiveChannelDef",(function(){return V2})),n.d(v,"invalidFieldType",(function(){return H2})),n.d(v,"invalidFieldTypeForCountAggregate",(function(){return q2})),n.d(v,"invalidAggregate",(function(){return G2})),n.d(v,"missingFieldType",(function(){return X2})),n.d(v,"droppingColor",(function(){return Y2})),n.d(v,"emptyFieldDef",(function(){return K2})),n.d(v,"latLongDeprecated",(function(){return Z2})),n.d(v,"LINE_WITH_VARYING_SIZE",(function(){return J2})),n.d(v,"incompatibleChannel",(function(){return Q2})),n.d(v,"invalidEncodingChannel",(function(){return t3})),n.d(v,"facetChannelShouldBeDiscrete",(function(){return e3})),n.d(v,"facetChannelDropped",(function(){return n3})),n.d(v,"discreteChannelCannotEncode",(function(){return r3})),n.d(v,"lineWithRange",(function(){return i3})),n.d(v,"orientOverridden",(function(){return o3})),n.d(v,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return a3})),n.d(v,"RANGE_STEP_DEPRECATED",(function(){return s3})),n.d(v,"cannotUseScalePropertyWithNonColor",(function(){return u3})),n.d(v,"unaggregateDomainHasNoEffectForRawField",(function(){return c3})),n.d(v,"unaggregateDomainWithNonSharedDomainOp",(function(){return l3})),n.d(v,"unaggregatedDomainWithLogScale",(function(){return h3})),n.d(v,"cannotApplySizeToNonOrientedMark",(function(){return f3})),n.d(v,"scaleTypeNotWorkWithChannel",(function(){return d3})),n.d(v,"scaleTypeNotWorkWithFieldDef",(function(){return p3})),n.d(v,"scalePropertyNotWorkWithScaleType",(function(){return g3})),n.d(v,"scaleTypeNotWorkWithMark",(function(){return m3})),n.d(v,"stepDropped",(function(){return v3})),n.d(v,"mergeConflictingProperty",(function(){return y3})),n.d(v,"mergeConflictingDomainProperty",(function(){return b3})),n.d(v,"independentScaleMeansIndependentGuide",(function(){return x3})),n.d(v,"domainSortDropped",(function(){return w3})),n.d(v,"MORE_THAN_ONE_SORT",(function(){return _3})),n.d(v,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return O3})),n.d(v,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return S3})),n.d(v,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return C3})),n.d(v,"INVALID_CHANNEL_FOR_AXIS",(function(){return k3})),n.d(v,"cannotStackRangedMark",(function(){return A3})),n.d(v,"cannotStackNonLinearScale",(function(){return T3})),n.d(v,"stackNonSummativeAggregate",(function(){return E3})),n.d(v,"invalidTimeUnit",(function(){return j3})),n.d(v,"droppedDay",(function(){return D3})),n.d(v,"errorBarCenterAndExtentAreNotNeeded",(function(){return M3})),n.d(v,"errorBarCenterIsUsedWithWrongExtent",(function(){return N3})),n.d(v,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return I3})),n.d(v,"errorBarCenterIsNotNeeded",(function(){return R3})),n.d(v,"errorBand1DNotSupport",(function(){return F3})),n.d(v,"channelRequiredForBinned",(function(){return P3})),n.d(v,"domainRequiredForThresholdScale",(function(){return $3}));var y={};n.r(y),n.d(y,"compile",(function(){return Gst})),n.d(y,"extractTransforms",(function(){return Jst})),n.d(y,"normalize",(function(){return O9})),n.d(y,"version",(function(){return Qst}));var b={};n.r(b),n.d(b,"dark",(function(){return aut})),n.d(b,"excel",(function(){return cut})),n.d(b,"fivethirtyeight",(function(){return vut})),n.d(b,"ggplot2",(function(){return xut})),n.d(b,"latimes",(function(){return Mut})),n.d(b,"quartz",(function(){return Fut})),n.d(b,"vox",(function(){return Lut})),n.d(b,"urbaninstitute",(function(){return Kut})),n.d(b,"googlecharts",(function(){return ect})),n.d(b,"version",(function(){return nct}));function x(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var w=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=Object.prototype.hasOwnProperty;function O(t,e){return _.call(t,e)}function S(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);e=[];for(var r in t)O(t,r)&&e.push(r);return e}function C(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function k(t){var e,n=0,r=t.length;while(n<r){if(e=t.charCodeAt(n),!(e>=48&&e<=57))return!1;n++}return!0}function A(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function T(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function E(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(E(t[e]))return!0}else if("object"===typeof t){var r=S(t),i=r.length;for(e=0;e<i;e++)if(E(t[r[e]]))return!0}return!1}function j(t,e){var n=[t];for(var r in e){var i="object"===typeof e[r]?JSON.stringify(e[r],null,2):e[r];"undefined"!==typeof i&&n.push(r+": "+i)}return n.join("\n")}var D=function(t){function e(e,n,r,i,o){var a=this.constructor,s=t.call(this,j(e,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=j(e,{name:n,index:r,operation:i,tree:o}),s}return w(e,t),e}(Error),M=D,N=C,I={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){var r=F(n,this.path);r&&(r=C(r));var i=P(n,{op:"remove",path:this.from}).removed;return P(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){var r=F(n,this.from);return P(n,{op:"add",path:this.path,value:C(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:U(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},R={add:function(t,e,n){return k(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:I.move,copy:I.copy,test:I.test,_get:I._get};function F(t,e){if(""==e)return t;var n={op:"_get",path:e};return P(t,n),n.value}function P(t,e,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(e,0,t,e.path):z(e,0)),""===e.path){var a={newDocument:t};if("add"===e.op)return a.newDocument=e.value,a;if("replace"===e.op)return a.newDocument=e.value,a.removed=t,a;if("move"===e.op||"copy"===e.op)return a.newDocument=F(t,e.from),"move"===e.op&&(a.removed=t),a;if("test"===e.op){if(a.test=U(t,e.value),!1===a.test)throw new M("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return a.newDocument=t,a}if("remove"===e.op)return a.removed=t,a.newDocument=null,a;if("_get"===e.op)return e.value=t,a;if(n)throw new M("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return a}r||(t=C(t));var s=e.path||"",u=s.split("/"),c=t,l=1,h=u.length,f=void 0,d=void 0,p=void 0;p="function"==typeof n?n:z;while(1){if(d=u[l],i&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===c[d]?f=u.slice(0,l).join("/"):l==h-1&&(f=e.path),void 0!==f&&p(e,0,t,f)),l++,Array.isArray(c)){if("-"===d)d=c.length;else{if(n&&!k(d))throw new M("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);k(d)&&(d=~~d)}if(l>=h){if(n&&"add"===e.op&&d>c.length)throw new M("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);a=R[e.op].call(e,c,d,t);if(!1===a.test)throw new M("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return a}}else if(d&&-1!=d.indexOf("~")&&(d=T(d)),l>=h){a=I[e.op].call(e,c,d,t);if(!1===a.test)throw new M("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return a}c=c[d]}}function $(t,e,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(e))throw new M("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=C(t));for(var o=new Array(e.length),a=0,s=e.length;a<s;a++)o[a]=P(t,e[a],n,!0,i,a),t=o[a].newDocument;return o.newDocument=t,o}function L(t,e,n){var r=P(t,e);if(!1===r.test)throw new M("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function z(t,e,n,r){if("object"!==typeof t||null===t||Array.isArray(t))throw new M("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(!I[t.op])throw new M("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n);if("string"!==typeof t.path)throw new M("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new M('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if(("move"===t.op||"copy"===t.op)&&"string"!==typeof t.from)throw new M("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new M("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&E(t.value))throw new M("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n)if("add"==t.op){var i=t.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new M("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==r)throw new M("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if("move"===t.op||"copy"===t.op){var a={op:"_get",path:t.from,value:void 0},s=B([a],n);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new M("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}function B(t,e,n){try{if(!Array.isArray(t))throw new M("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)$(C(e),C(t),n||!0);else{n=n||z;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof M)return i;throw i}}function U(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n,r,i,o=Array.isArray(t),a=Array.isArray(e);if(o&&a){if(r=t.length,r!=e.length)return!1;for(n=r;0!==n--;)if(!U(t[n],e[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(t);if(r=s.length,r!==Object.keys(e).length)return!1;for(n=r;0!==n--;)if(!e.hasOwnProperty(s[n]))return!1;for(n=r;0!==n--;)if(i=s[n],!U(t[i],e[i]))return!1;return!0}return t!==t&&e!==e}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var W=new WeakMap,V=function(){function t(t){this.observers=new Map,this.obj=t}return t}(),H=function(){function t(t,e){this.callback=t,this.observer=e}return t}();function q(t){return W.get(t)}function G(t,e){return t.observers.get(e)}function X(t,e){t.observers.delete(e.callback)}function Y(t,e){e.unobserve()}function K(t,e){var n,r=[],i=q(t);if(i){var o=G(i,e);n=o&&o.observer}else i=new V(t),W.set(t,i);if(n)return n;if(n={},i.value=C(t),e){n.callback=e,n.next=null;var a=function(){Z(n)},s=function(){clearTimeout(n.next),n.next=setTimeout(a)};"undefined"!==typeof window&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return n.patches=r,n.object=t,n.unobserve=function(){Z(n),clearTimeout(n.next),X(i,n),"undefined"!==typeof window&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(e,new H(e,n)),n}function Z(t,e){void 0===e&&(e=!1);var n=W.get(t.object);J(n.value,t.object,t.patches,"",e),t.patches.length&&$(n.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function J(t,e,n,r,i){if(e!==t){"function"===typeof e.toJSON&&(e=e.toJSON());for(var o=S(e),a=S(t),s=!1,u=a.length-1;u>=0;u--){var c=a[u],l=t[c];if(!O(e,c)||void 0===e[c]&&void 0!==l&&!1===Array.isArray(e))Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+A(c),value:C(l)}),n.push({op:"remove",path:r+"/"+A(c)}),s=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}),!0);else{var h=e[c];"object"==typeof l&&null!=l&&"object"==typeof h&&null!=h?J(l,h,n,r+"/"+A(c),i):l!==h&&(!0,i&&n.push({op:"test",path:r+"/"+A(c),value:C(l)}),n.push({op:"replace",path:r+"/"+A(c),value:C(h)}))}}if(s||o.length!=a.length)for(u=0;u<o.length;u++){c=o[u];O(t,c)||void 0===e[c]||n.push({op:"add",path:r+"/"+A(c),value:C(e[c])})}}}function Q(t,e,n){void 0===n&&(n=!1);var r=[];return J(t,e,r,"",n),r}Object.assign({},r,i,{JsonPatchError:D,deepClone:C,escapePathComponent:A,unescapePathComponent:T});var tt=n("6582"),et=n.n(tt),nt=n("4d89"),rt=n("276f");function it(t){var e=t||rt["x"],n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i,o=e(t);return r[o]&&(r[o]=0,(i=n.indexOf(t))>=0&&n.splice(i,1)),n},n}var ot=async function(t,e){try{await e(t)}catch(n){t.error(n)}},at=Symbol("vega_id"),st=1;function ut(t){return!(!t||!ct(t))}function ct(t){return t[at]}function lt(t,e){return t[at]=e,t}function ht(t){var e=t===Object(t)?t:{data:t};return ct(e)?e:lt(e,st++)}function ft(t){return dt(t,ht({}))}function dt(t,e){for(var n in t)e[n]=t[n];return e}function pt(t,e){return lt(e,ct(t))}function gt(t,e){return t?e?(n,r)=>t(n,r)||ct(e(n))-ct(e(r)):(e,n)=>t(e,n)||ct(e)-ct(n):null}function mt(t){return t&&t.constructor===vt}function vt(){var t=[],e=[],n=[],r=[],i=[],o=null,a=!1;return{constructor:vt,insert:function(e){for(var n=Object(rt["i"])(e),r=0,i=n.length;r<i;++r)t.push(n[r]);return this},remove:function(t){for(var n=Object(rt["D"])(t)?r:e,i=Object(rt["i"])(t),o=0,a=i.length;o<a;++o)n.push(i[o]);return this},modify:function(t,e,r){var o={field:e,value:Object(rt["l"])(r)};return Object(rt["D"])(t)?(o.filter=t,i.push(o)):(o.tuple=t,n.push(o)),this},encode:function(t,e){return Object(rt["D"])(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},clean:function(t){return o=t,this},reflow:function(){return a=!0,this},pulse:function(s,u){var c,l,h,f,d,p,g={},m={};for(c=0,l=u.length;c<l;++c)g[ct(u[c])]=1;for(c=0,l=e.length;c<l;++c)d=e[c],g[ct(d)]=-1;for(c=0,l=r.length;c<l;++c)f=r[c],u.forEach((function(t){f(t)&&(g[ct(t)]=-1)}));for(c=0,l=t.length;c<l;++c)d=t[c],p=ct(d),g[p]?g[p]=1:s.add.push(ht(t[c]));for(c=0,l=u.length;c<l;++c)d=u[c],g[ct(d)]<0&&s.rem.push(d);function v(t,e,n){n?t[e]=n(t):s.encode=e,a||(m[ct(t)]=t)}for(c=0,l=n.length;c<l;++c)h=n[c],d=h.tuple,f=h.field,p=g[ct(d)],p>0&&(v(d,f,h.value),s.modifies(f));for(c=0,l=i.length;c<l;++c)h=i[c],f=h.filter,u.forEach((function(t){f(t)&&g[ct(t)]>0&&v(t,h.field,h.value)})),s.modifies(h.field);if(a)s.mod=e.length||r.length?u.filter((function(t){return g[ct(t)]>0})):u.slice();else for(p in m)s.mod.push(m[p]);return(o||null==o&&(e.length||r.length))&&s.clean(!0),s}}}var yt="_:mod:_";function bt(){Object.defineProperty(this,yt,{writable:!0,value:{}})}var xt=bt.prototype;xt.set=function(t,e,n,r){var i=this,o=i[t],a=i[yt];return null!=e&&e>=0?(o[e]!==n||r)&&(o[e]=n,a[e+":"+t]=-1,a[t]=-1):(o!==n||r)&&(i[t]=n,a[t]=Object(rt["A"])(n)?1+n.length:-1),i},xt.modified=function(t,e){var n,r=this[yt];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Object(rt["A"])(t)){for(n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}return null!=e&&e>=0?e+1<r[t]||!!r[e+":"+t]:!!r[t]},xt.clear=function(){return this[yt]={},this};var wt=0,_t="pulse",Ot=new bt,St=1,Ct=2;function kt(t,e,n,r){this.id=++wt,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}var At=kt.prototype;function Tt(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}At.targets=function(){return this._targets||(this._targets=it(rt["w"]))},At.set=function(t){return this.value!==t?(this.value=t,1):0},At.skip=Tt(St),At.modified=Tt(Ct),At.parameters=function(t,e,n){e=!1!==e;var r,i,o,a,s=this,u=s._argval=s._argval||new bt,c=s._argops=s._argops||[],l=[];function h(t,n,r){r instanceof kt?(r!==s&&(e&&r.targets().add(s),l.push(r)),c.push({op:r,name:t,index:n})):u.set(t,n,r)}for(r in t)if(i=t[r],r===_t)Object(rt["i"])(i).forEach((function(t){t instanceof kt?t!==s&&(t.targets().add(s),l.push(t)):Object(rt["n"])("Pulse parameters must be operator instances.")})),s.source=i;else if(Object(rt["A"])(i))for(u.set(r,-1,Array(o=i.length)),a=0;a<o;++a)h(r,a,i[a]);else h(r,-1,i);return this.marshall().clear(),n&&(c.initonly=!0),l},At.marshall=function(t){var e,n,r,i,o,a=this._argval||Ot,s=this._argops;if(s){for(n=0,r=s.length;n<r;++n)e=s[n],i=e.op,o=i.modified()&&i.stamp===t,a.set(e.name,e.index,i.value,o);if(s.initonly){for(n=0;n<r;++n)e=s[n],e.op.targets().remove(this);this._argops=null,this._update=null}}return a},At.detach=function(){var t,e,n,r,i=this._argops;if(i)for(t=0,e=i.length;t<e;++t)n=i[t],r=n.op,r._targets&&r._targets.remove(this)},At.evaluate=function(t){var e=this._update;if(e){var n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},At.run=function(t){return t.stamp<this.stamp?t.StopPropagation:(this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t);var e};var Et=function(t,e,n,r){var i,o=1;return t instanceof kt?i=t:t&&t.prototype instanceof kt?i=new t:Object(rt["D"])(t)?i=new kt(null,t):(o=0,i=new kt(t,e)),this.rank(i),o&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},jt=function(t,e){var n,r,i=t.rank;for(n=0,r=e.length;n<r;++n)if(i<e[n].rank)return void this.rerank(t)},Dt=0;function Mt(t,e,n){this.id=++Dt,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function Nt(t,e,n){return new Mt(t,e,n)}var It=Mt.prototype;It._filter=rt["gb"],It._apply=rt["x"],It.targets=function(){return this._targets||(this._targets=it(rt["w"]))},It.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},It.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},It.filter=function(t){var e=Nt(t);return this.targets().add(e),e},It.apply=function(t){var e=Nt(null,t);return this.targets().add(e),e},It.merge=function(){var t=Nt();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},It.throttle=function(t){var e=-1;return this.filter((function(){var n=Date.now();return n-e>t?(e=n,1):0}))},It.debounce=function(t){var e=Nt();return this.targets().add(Nt(null,null,Object(rt["m"])(t,(function(t){var n=t.dataflow;e.receive(t),n&&n.run&&n.run()})))),e},It.between=function(t,e){var n=!1;return t.targets().add(Nt(null,null,(function(){n=!0}))),e.targets().add(Nt(null,null,(function(){n=!1}))),this.filter((function(){return n}))};var Rt=function(t,e,n,r){var i,o=this,a=Nt(n,r),s=function(t){t.dataflow=o;try{a.receive(t)}catch(e){o.error(e)}finally{o.run()}};i="string"===typeof t&&"undefined"!==typeof document?document.querySelectorAll(t):Object(rt["i"])(t);for(var u=0,c=i.length;u<c;++u)i[u].addEventListener(e,s);return a};const Ft=/^([A-Za-z]+:)?\/\//,Pt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,$t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Lt="file://";var zt=function(t,e){return function(n){return{options:n||{},sanitize:Ut,load:Bt,fileAccess:!!e,file:Wt(e),http:Ht(t)}}};async function Bt(t,e){const n=await this.sanitize(t,e),r=n.href;return n.localFile?this.file(r):this.http(r,e)}async function Ut(t,e){e=Object(rt["o"])({},this.options,e);const n=this.fileAccess,r={href:null};let i,o,a;const s=Pt.test(t.replace($t,""));null!=t&&"string"===typeof t&&s||Object(rt["n"])("Sanitize failure, invalid URI: "+Object(rt["Z"])(t));const u=Ft.test(t);return(a=e.baseURL)&&!u&&(t.startsWith("/")||"/"===a[a.length-1]||(t="/"+t),t=a+t),o=(i=t.startsWith(Lt))||"file"===e.mode||"http"!==e.mode&&!u&&n,i?t=t.slice(Lt.length):t.startsWith("//")&&("file"===e.defaultProtocol?(t=t.slice(2),o=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(r,"localFile",{value:!!o}),r.href=t,e.target&&(r.target=e.target+""),e.rel&&(r.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(r.crossOrigin=e.crossOrigin+""),r}function Wt(t){return t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){t?r(t):n(e)}))}))}:Vt}async function Vt(){Object(rt["n"])("No file system access.")}function Ht(t){return t?async function(e,n){const r=Object(rt["o"])({},this.options.http,n),i=n&&n.response,o=await t(e,r);return o.ok?Object(rt["D"])(o[i])?o[i]():o.text():Object(rt["n"])(o.status+""+o.statusText)}:qt}async function qt(){Object(rt["n"])("No HTTP fetch method available.")}var Gt={boolean:rt["ab"],integer:rt["cb"],number:rt["cb"],date:rt["bb"],string:rt["eb"],unknown:rt["x"]},Xt=[Qt,ne,ee,te],Yt=["boolean","integer","number","date"];function Kt(t,e){if(!t||!t.length)return"unknown";const n=t.length,r=Xt.length,i=Xt.map((t,e)=>e+1);for(let o,a,s=0,u=0;s<n;++s)for(a=e?t[s][e]:t[s],o=0;o<r;++o)if(i[o]&&Jt(a)&&!Xt[o](a)&&(i[o]=0,++u,u===Xt.length))return"string";return Yt[i.reduce((t,e)=>0===t?e:t,0)-1]}function Zt(t,e){return e.reduce((function(e,n){return e[n]=Kt(t,n),e}),{})}function Jt(t){return null!=t&&t===t}function Qt(t){return"true"===t||"false"===t||!0===t||!1===t}function te(t){return!Number.isNaN(Date.parse(t))}function ee(t){return!Number.isNaN(+t)&&!(t instanceof Date)}function ne(t){return ee(t)&&Number.isInteger(+t)}var re={},ie={},oe=34,ae=10,se=13;function ue(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function ce(t,e){var n=ue(t);return function(r,i){return e(n(r),i,t)}}function le(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function he(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function fe(t){return t<0?"-"+he(-t,6):t>9999?"+"+he(t,6):he(t,4)}function de(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":fe(t.getUTCFullYear(),4)+"-"+he(t.getUTCMonth()+1,2)+"-"+he(t.getUTCDate(),2)+(i?"T"+he(e,2)+":"+he(n,2)+":"+he(r,2)+"."+he(i,3)+"Z":r?"T"+he(e,2)+":"+he(n,2)+":"+he(r,2)+"Z":n||e?"T"+he(e,2)+":"+he(n,2)+"Z":"")}var pe=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var n,r,o=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?ce(t,e):ue(t)}));return o.columns=r||[],o}function i(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return ie;if(c)return c=!1,re;var e,r,i=a;if(t.charCodeAt(i)===oe){while(a++<o&&t.charCodeAt(a)!==oe||t.charCodeAt(++a)===oe);return(e=a)>=o?u=!0:(r=t.charCodeAt(a++))===ae?c=!0:r===se&&(c=!0,t.charCodeAt(a)===ae&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}while(a<o){if((r=t.charCodeAt(e=a++))===ae)c=!0;else if(r===se)c=!0,t.charCodeAt(a)===ae&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}t.charCodeAt(o-1)===ae&&--o,t.charCodeAt(o-1)===se&&--o;while((r=l())!==ie){var h=[];while(r!==re&&r!==ie)h.push(r),r=l();e&&null==(h=e(h,s++))||i.push(h)}return i}function o(e,n){return e.map((function(e){return n.map((function(t){return l(e[t])})).join(t)}))}function a(e,n){return null==n&&(n=le(e)),[n.map(l).join(t)].concat(o(e,n)).join("\n")}function s(t,e){return null==e&&(e=le(t)),o(t,e).join("\n")}function u(t){return t.map(c).join("\n")}function c(e){return e.map(l).join(t)}function l(t){return null==t?"":t instanceof Date?de(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u,formatRow:c,formatValue:l}};function ge(t){const e=function(e,n){const r={delimiter:t};return me(e,n?Object(rt["o"])(n,r):r)};return e.responseType="text",e}function me(t,e){return e.header&&(t=e.header.map(rt["Z"]).join(e.delimiter)+"\n"+t),pe(e.delimiter).parse(t+"")}me.responseType="text";var ve=n("9b0d"),ye=function(t){return t},be=function(t){if(null==t)return ye;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,c=t.length,l=new Array(c);l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+a;while(u<c)l[u]=t[u],++u;return l}},xe=function(t,e){var n,r=t.length,i=r-e;while(i<--r)n=t[i],t[i++]=t[r],t[r]=n},we=function(t,e){return"string"===typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return _e(t,e)}))}:_e(t,e)};function _e(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=Oe(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function Oe(t,e){var n=be(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&xe(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){var e=a(t);while(e.length<4)e.push(e[0]);return e}function u(t){return t.map(s)}function c(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(c)};case"Point":e=o(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(o);break;case"LineString":e=a(t.arcs);break;case"MultiLineString":e=t.arcs.map(a);break;case"Polygon":e=u(t.arcs);break;case"MultiPolygon":e=t.arcs.map(u);break;default:return null}return{type:n,coordinates:e}}return c(e)}var Se=function(t,e){var n={},r={},i={},o=[],a=-1;function s(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}function u(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)})),e.forEach((function(t){var e,n,o=s(t),a=o[0],u=o[1];if(e=i[a])if(delete i[e.end],e.push(t),e.end=u,n=r[u]){delete r[n.start];var c=n===e?e:e.concat(n);r[c.start=e.start]=i[c.end=n.end]=c}else r[e.start]=i[e.end]=e;else if(e=r[u])if(delete r[e.start],e.unshift(t),e.start=a,n=i[a]){delete i[n.end];var l=n===e?e:n.concat(e);r[l.start=n.start]=i[l.end=e.end]=l}else r[e.start]=i[e.end]=e;else e=[t],r[e.start=a]=i[e.end=u]=e})),u(i,r),u(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o},Ce=function(t){return Oe(t,ke.apply(this,arguments))};function ke(t,e,n){var r,i,o;if(arguments.length>1)r=Ae(t,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:Se(t,r)}}function Ae(t,e,n){var r,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function s(t){t.forEach(a)}function u(t){t.forEach(s)}function c(t){t.forEach(u)}function l(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":c(t.arcs);break}}return l(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}const Te={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function Ee(t,e){let n,r,i,o;return t=Object(ve["a"])(t,e),e&&e.feature?(n=we,i=e.feature):e&&e.mesh?(n=Ce,i=e.mesh,o=Te[e.filter]):Object(rt["n"])("Missing TopoJSON feature or mesh parameter."),r=(r=t.objects[i])?n(t,r,o):Object(rt["n"])("Invalid TopoJSON object: "+i),r&&r.features||[r]}Ee.responseType="json";const je={dsv:me,csv:ge(","),tsv:ge("\t"),json:ve["a"],topojson:Ee};function De(t,e){return arguments.length>1?(je[t]=e,this):Object(rt["v"])(je,t)?je[t]:null}function Me(t){const e=De(t);return e&&e.responseType||"text"}var Ne=function(t){const e={};return n=>e[n]||(e[n]=t(n))},Ie=Math.sqrt(50),Re=Math.sqrt(10),Fe=Math.sqrt(2),Pe=function(t,e,n){var r,i,o,a,s=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=$e(t,e,n))||!isFinite(a))return[];if(a>0){t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));while(++s<i)o[s]=(t+s)*a}else{a=-a,t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(e-t+1));while(++s<i)o[s]=(t+s)/a}return r&&o.reverse(),o};function $e(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Ie?10:o>=Re?5:o>=Fe?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Ie?10:o>=Re?5:o>=Fe?2:1)}function Le(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Ie?i*=10:o>=Re?i*=5:o>=Fe&&(i*=2),e<t?-i:i}var ze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Be(t){if(!(e=ze.exec(t)))throw new Error("invalid format: "+t);var e;return new Ue({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ue(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Be.prototype=Ue.prototype,Ue.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var We,Ve,He,qe,Ge=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},Xe=function(t){return t=Ge(Math.abs(t)),t?t[1]:NaN},Ye=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Xe(e)/3)))-Xe(Math.abs(t)))},Ke=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xe(e)-Xe(t))+1},Ze=function(t){return Math.max(0,-Xe(Math.abs(t)))},Je=function(t,e){return function(n,r){var i=n.length,o=[],a=0,s=t[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),(u+=s+1)>r)break;s=t[a=(a+1)%t.length]}return o.reverse().join(e)}},Qe=function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}},tn=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(e+1):t},en=function(t,e){var n=Ge(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(We=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ge(t,Math.max(0,e+o-1))[0]},nn=function(t,e){var n=Ge(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},rn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return nn(100*t,e)},r:nn,s:en,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},on=function(t){return t},an=Array.prototype.map,sn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],un=function(t){var e=void 0===t.grouping||void 0===t.thousands?on:Je(an.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?on:Qe(an.call(t.numerals,String)),a=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function c(t){t=Be(t);var c=t.fill,l=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):rn[y]||(void 0===m&&(m=12),v=!0,y="g"),(d||"0"===c&&"="===l)&&(d=!0,c="0",l="=");var b="$"===f?n:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?r:/[%p]/.test(y)?a:"",w=rn[y],_=/[defgprs%]/.test(y);function O(t){var n,r,a,f=b,O=x;if("c"===y)O=w(t)+O,t="";else{t=+t;var S=t<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),m),v&&(t=tn(t)),S&&0===+t&&"+"!==h&&(S=!1),f=(S?"("===h?h:s:"-"===h||"("===h?"":h)+f,O=("s"===y?sn[8+We/3]:"")+O+(S&&"("===h?")":""),_){n=-1,r=t.length;while(++n<r)if(a=t.charCodeAt(n),48>a||a>57){O=(46===a?i+t.slice(n+1):t.slice(n))+O,t=t.slice(0,n);break}}}g&&!d&&(t=e(t,1/0));var C=f.length+t.length+O.length,k=C<p?new Array(p-C+1).join(c):"";switch(g&&d&&(t=e(k+t,k.length?p-O.length:1/0),k=""),l){case"<":t=f+t+O+k;break;case"=":t=f+k+t+O;break;case"^":t=k.slice(0,C=k.length>>1)+f+t+O+k.slice(C);break;default:t=k+f+t+O;break}return o(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),O.toString=function(){return t+""},O}function l(t,e){var n=c((t=Be(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Xe(e)/3))),i=Math.pow(10,-r),o=sn[8+r/3];return function(t){return n(i*t)+o}}return{format:c,formatPrefix:l}};function cn(t){return Ve=un(t),He=Ve.format,qe=Ve.formatPrefix,Ve}function ln(t,e){return n=>{var r,i,o=t(n),a=o.indexOf(e);if(a<0)return o;r=hn(o,a),i=r<o.length?o.slice(r):"";while(--r>a)if("0"!==o[r]){++r;break}return o.slice(0,r)+i}}function hn(t,e){var n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if(n=t.charCodeAt(r),n>=48&&n<=57)return r+1}function fn(t){const e=Ne(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(t){var n=Be(t||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1;break}return ln(e(n),e(".1f")(1)[1])}return e(n)},formatSpan(t,r,i,o){o=Be(null==o?",f":o);const a=Le(t,r,i),s=Math.max(Math.abs(t),Math.abs(r));let u;if(null==o.precision)switch(o.type){case"s":return isNaN(u=Ye(a,s))||(o.precision=u),n(o,s);case"":case"e":case"g":case"p":case"r":isNaN(u=Ke(a,s))||(o.precision=u-("e"===o.type));break;case"f":case"%":isNaN(u=Ze(a))||(o.precision=u-2*("%"===o.type));break}return e(o)}}}let dn;function pn(){return dn=fn({format:He,formatPrefix:qe})}function gn(t){return fn(un(t))}function mn(t){return arguments.length?dn=gn(t):dn}cn({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),pn();const vn="year",yn="quarter",bn="month",xn="week",wn="date",_n="day",On="dayofyear",Sn="hours",Cn="minutes",kn="seconds",An="milliseconds",Tn=[vn,yn,bn,xn,wn,_n,On,Sn,Cn,kn,An],En=Tn.reduce((t,e,n)=>(t[e]=1+n,t),{});function jn(t){const e=Object(rt["i"])(t).slice(),n={};e.length||Object(rt["n"])("Missing time unit."),e.forEach(t=>{Object(rt["v"])(En,t)?n[t]=1:Object(rt["n"])(`Invalid time unit: ${t}.`)});const r=(n[xn]||n[_n]?1:0)+(n[yn]||n[bn]||n[wn]?1:0)+(n[On]?1:0);return r>1&&Object(rt["n"])("Incompatible time units: "+t),e.sort((t,e)=>En[t]-En[e]),e}const Dn={[vn]:"%Y ",[yn]:"Q%q ",[bn]:"%b ",[wn]:"%d ",[xn]:"W%U ",[_n]:"%a ",[On]:"%j ",[Sn]:"%H:00",[Cn]:"00:%M",[kn]:":%S",[An]:".%L",[`${vn}-${bn}`]:"%Y-%m ",[`${vn}-${bn}-${wn}`]:"%Y-%m-%d ",[`${Sn}-${Cn}`]:"%H:%M"};function Mn(t,e){const n=Object(rt["o"])({},Dn,e),r=jn(t),i=r.length;let o,a,s="",u=0;for(u=0;u<i;)for(o=r.length;o>u;--o)if(a=r.slice(u,o).join("-"),null!=n[a]){s+=n[a],u=o;break}return s.trim()}var Nn=new Date,In=new Date;function Rn(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Rn((function(e){if(e>=e)while(t(e),!n(e))e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)while(++r<=0)while(e(t,-1),!n(t));else while(--r>=0)while(e(t,1),!n(t));}))},n&&(i.count=function(e,r){return Nn.setTime(+e),In.setTime(+r),t(Nn),t(In),Math.floor(n(Nn,In))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}var Fn=1e3,Pn=6e4,$n=36e5,Ln=864e5,zn=6048e5,Bn=Rn((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Pn)/Ln}),(function(t){return t.getDate()-1})),Un=Bn;Bn.range;function Wn(t){return Rn((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Pn)/zn}))}var Vn=Wn(0),Hn=Wn(1),qn=Wn(2),Gn=Wn(3),Xn=Wn(4),Yn=Wn(5),Kn=Wn(6),Zn=(Vn.range,Hn.range,qn.range,Gn.range,Xn.range,Yn.range,Kn.range,Rn((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Ln}),(function(t){return t.getUTCDate()-1}))),Jn=Zn;Zn.range;function Qn(t){return Rn((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/zn}))}var tr=Qn(0),er=Qn(1),nr=Qn(2),rr=Qn(3),ir=Qn(4),or=Qn(5),ar=Qn(6);tr.range,er.range,nr.range,rr.range,ir.range,or.range,ar.range;const sr=new Date;function ur(t){return sr.setFullYear(t),sr.setMonth(0),sr.setDate(1),sr.setHours(0,0,0,0),sr}function cr(t){return hr(new Date(t))}function lr(t){return fr(new Date(t))}function hr(t){return Un.count(ur(t.getFullYear())-1,t)}function fr(t){return Vn.count(ur(t.getFullYear())-1,t)}function dr(t){return ur(t).getDay()}function pr(t,e,n,r,i,o,a){if(0<=t&&t<100){var s=new Date(-1,e,n,r,i,o,a);return s.setFullYear(t),s}return new Date(t,e,n,r,i,o,a)}function gr(t){return vr(new Date(t))}function mr(t){return yr(new Date(t))}function vr(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Jn.count(e-1,t)}function yr(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return tr.count(e-1,t)}function br(t){return sr.setTime(Date.UTC(t,0,1)),sr.getUTCDay()}function xr(t,e,n,r,i,o,a){if(0<=t&&t<100){var s=new Date(Date.UTC(-1,e,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(t,e,n,r,i,o,a))}function wr(t,e,n,r,i){const o=e||1,a=Object(rt["U"])(t),s=(t,e,i)=>(i=i||t,_r(n[i],r[i],t===a&&o,e)),u=new Date,c=Object(rt["db"])(t),l=c[vn]?s(vn):Object(rt["l"])(2012),h=c[bn]?s(bn):c[yn]?s(yn):rt["kb"],f=c[xn]&&c[_n]?s(_n,1,xn+_n):c[xn]?s(xn,1):c[_n]?s(_n,1):c[wn]?s(wn,1):c[On]?s(On,1):rt["O"],d=c[Sn]?s(Sn):rt["kb"],p=c[Cn]?s(Cn):rt["kb"],g=c[kn]?s(kn):rt["kb"],m=c[An]?s(An):rt["kb"];return function(t){u.setTime(+t);const e=l(u);return i(e,h(u),f(u,e),d(u),p(u),g(u),m(u))}}function _r(t,e,n,r){const i=n<=1?t:r?(e,i)=>r+n*Math.floor((t(e,i)-r)/n):(e,r)=>n*Math.floor(t(e,r)/n);return e?(t,n)=>e(i(t,n),n):i}function Or(t,e,n){return e+7*t-(n+6)%7}const Sr={[vn]:t=>t.getFullYear(),[yn]:t=>Math.floor(t.getMonth()/3),[bn]:t=>t.getMonth(),[wn]:t=>t.getDate(),[Sn]:t=>t.getHours(),[Cn]:t=>t.getMinutes(),[kn]:t=>t.getSeconds(),[An]:t=>t.getMilliseconds(),[On]:t=>hr(t),[xn]:t=>fr(t),[xn+_n]:(t,e)=>Or(fr(t),t.getDay(),dr(e)),[_n]:(t,e)=>Or(1,t.getDay(),dr(e))},Cr={[yn]:t=>3*t,[xn]:(t,e)=>Or(t,0,dr(e))};function kr(t,e){return wr(t,e||1,Sr,Cr,pr)}const Ar={[vn]:t=>t.getUTCFullYear(),[yn]:t=>Math.floor(t.getUTCMonth()/3),[bn]:t=>t.getUTCMonth(),[wn]:t=>t.getUTCDate(),[Sn]:t=>t.getUTCHours(),[Cn]:t=>t.getUTCMinutes(),[kn]:t=>t.getUTCSeconds(),[An]:t=>t.getUTCMilliseconds(),[On]:t=>vr(t),[xn]:t=>yr(t),[_n]:(t,e)=>Or(1,t.getUTCDay(),br(e)),[xn+_n]:(t,e)=>Or(yr(t),t.getUTCDay(),br(e))},Tr={[yn]:t=>3*t,[xn]:(t,e)=>Or(t,0,br(e))};function Er(t,e){return wr(t,e||1,Ar,Tr,xr)}var jr=Rn((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));jr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Rn((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Dr=jr,Mr=(jr.range,Rn((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),Nr=Mr,Ir=(Mr.range,Rn((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fn-t.getMinutes()*Pn)}),(function(t,e){t.setTime(+t+e*$n)}),(function(t,e){return(e-t)/$n}),(function(t){return t.getHours()}))),Rr=Ir,Fr=(Ir.range,Rn((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fn)}),(function(t,e){t.setTime(+t+e*Pn)}),(function(t,e){return(e-t)/Pn}),(function(t){return t.getMinutes()}))),Pr=Fr,$r=(Fr.range,Rn((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Fn)}),(function(t,e){return(e-t)/Fn}),(function(t){return t.getUTCSeconds()}))),Lr=$r,zr=($r.range,Rn((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));zr.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Rn((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):zr:null};var Br=zr,Ur=(zr.range,Rn((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Ur.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Rn((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Wr=Ur,Vr=(Ur.range,Rn((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),Hr=Vr,qr=(Vr.range,Rn((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*$n)}),(function(t,e){return(e-t)/$n}),(function(t){return t.getUTCHours()}))),Gr=qr,Xr=(qr.range,Rn((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Pn)}),(function(t,e){return(e-t)/Pn}),(function(t){return t.getUTCMinutes()}))),Yr=Xr;Xr.range;const Kr={[vn]:Dr,[yn]:Nr.every(3),[bn]:Nr,[xn]:Vn,[wn]:Un,[_n]:Un,[On]:Un,[Sn]:Rr,[Cn]:Pr,[kn]:Lr,[An]:Br},Zr={[vn]:Wr,[yn]:Hr.every(3),[bn]:Hr,[xn]:tr,[wn]:Jn,[_n]:Jn,[On]:Jn,[Sn]:Gr,[Cn]:Yr,[kn]:Lr,[An]:Br};function Jr(t){return Kr[t]}function Qr(t){return Zr[t]}function ti(t,e,n){return t?t.offset(e,n):void 0}function ei(t,e,n){return ti(Jr(t),e,n)}function ni(t,e,n){return ti(Qr(t),e,n)}function ri(t,e,n,r){return t?t.range(e,n,r):void 0}function ii(t,e,n,r){return ri(Jr(t),e,n,r)}function oi(t,e,n,r){return ri(Qr(t),e,n,r)}var ai=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},si=function(t){return 1===t.length&&(t=ui(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function ui(t){return function(e,n){return ai(t(e),n)}}const ci=1e3,li=60*ci,hi=60*li,fi=24*hi,di=7*fi,pi=30*fi,gi=365*fi,mi=[vn,bn,wn,Sn,Cn,kn,An],vi=mi.slice(0,-1),yi=vi.slice(0,-1),bi=yi.slice(0,-1),xi=bi.slice(0,-1),wi=[vn,xn],_i=[vn,bn],Oi=[vn],Si=[[vi,1,ci],[vi,5,5*ci],[vi,15,15*ci],[vi,30,30*ci],[yi,1,li],[yi,5,5*li],[yi,15,15*li],[yi,30,30*li],[bi,1,hi],[bi,3,3*hi],[bi,6,6*hi],[bi,12,12*hi],[xi,1,fi],[wi,1,di],[_i,1,pi],[_i,3,3*pi],[Oi,1,gi]];var Ci=function(t){const e=t.extent,n=t.maxbins||40,r=Math.abs(Object(rt["X"])(e))/n;let i,o,a=si(t=>t[2]).right(Si,r);return a===Si.length?(i=Oi,o=Le(e[0]/gi,e[1]/gi,n)):a?(a=Si[r/Si[a-1][2]<Si[a][2]/r?a-1:a],i=a[0],o=a[1]):(i=mi,o=Math.max(Le(e[0],e[1],n),1)),{units:i,step:o}},ki=n("b607");function Ai(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ti(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ei(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ji(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=Ui(i),l=Wi(i),h=Ui(o),f=Wi(o),d=Ui(a),p=Wi(a),g=Ui(s),m=Wi(s),v=Ui(u),y=Wi(u),b={a:N,A:I,b:R,B:F,c:null,d:lo,e:lo,f:mo,H:ho,I:fo,j:po,L:go,m:vo,M:yo,p:P,q:$,Q:qo,s:Go,S:bo,u:xo,U:wo,V:_o,w:Oo,W:So,x:null,X:null,y:Co,Y:ko,Z:Ao,"%":Ho},x={a:L,A:z,b:B,B:U,c:null,d:To,e:To,f:No,H:Eo,I:jo,j:Do,L:Mo,m:Io,M:Ro,p:W,q:V,Q:qo,s:Go,S:Fo,u:Po,U:$o,V:Lo,w:zo,W:Bo,x:null,X:null,y:Uo,Y:Wo,Z:Vo,"%":Ho},w={a:k,A:A,b:T,B:E,c:j,d:to,e:to,f:ao,H:no,I:no,j:eo,L:oo,m:Qi,M:ro,p:C,q:Ji,Q:uo,s:co,S:io,u:Hi,U:qi,V:Gi,w:Vi,W:Xi,x:D,X:M,y:Ki,Y:Yi,Z:Zi,"%":so};function _(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;n instanceof Date||(n=new Date(+n));while(++s<c)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Fi[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function O(t,e){return function(n){var r,i,o=Ei(1900,void 0,1),a=S(o,t,n+="",0);if(a!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=Ti(Ei(o.y,0,1)),i=r.getUTCDay(),r=i>4||0===i?ki["p"].ceil(r):Object(ki["p"])(r),r=ki["l"].offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=Ai(Ei(o.y,0,1)),i=r.getDay(),r=i>4||0===i?ki["e"].ceil(r):Object(ki["e"])(r),r=ki["a"].offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Ti(Ei(o.y,0,1)).getUTCDay():Ai(Ei(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ti(o)):Ai(o)}}function S(t,e,n,r){var i,o,a=0,s=e.length,u=n.length;while(a<s){if(r>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=w[i in Fi?e.charAt(a++):i],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function C(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1}function k(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1}function A(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1}function T(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1}function E(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1}function j(t,n,r){return S(t,e,n,r)}function D(t,e,r){return S(t,n,e,r)}function M(t,e,n){return S(t,r,e,n)}function N(t){return a[t.getDay()]}function I(t){return o[t.getDay()]}function R(t){return u[t.getMonth()]}function F(t){return s[t.getMonth()]}function P(t){return i[+(t.getHours()>=12)]}function $(t){return 1+~~(t.getMonth()/3)}function L(t){return a[t.getUTCDay()]}function z(t){return o[t.getUTCDay()]}function B(t){return u[t.getUTCMonth()]}function U(t){return s[t.getUTCMonth()]}function W(t){return i[+(t.getUTCHours()>=12)]}function V(t){return 1+~~(t.getUTCMonth()/3)}return b.x=_(n,b),b.X=_(r,b),b.c=_(e,b),x.x=_(n,x),x.X=_(r,x),x.c=_(e,x),{format:function(t){var e=_(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=O(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=_(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=O(t+="",!0);return e.toString=function(){return t},e}}}var Di,Mi,Ni,Ii,Ri,Fi={"-":"",_:" ",0:"0"},Pi=/^\s*\d+/,$i=/^%/,Li=/[\\^$*+?|[\]().{}]/g;function zi(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Bi(t){return t.replace(Li,"\\$&")}function Ui(t){return new RegExp("^(?:"+t.map(Bi).join("|")+")","i")}function Wi(t){var e={},n=-1,r=t.length;while(++n<r)e[t[n].toLowerCase()]=n;return e}function Vi(t,e,n){var r=Pi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Hi(t,e,n){var r=Pi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function qi(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Gi(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Xi(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Yi(t,e,n){var r=Pi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ki(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Zi(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ji(t,e,n){var r=Pi.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Qi(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function to(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function eo(t,e,n){var r=Pi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function no(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ro(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function io(t,e,n){var r=Pi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function oo(t,e,n){var r=Pi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ao(t,e,n){var r=Pi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function so(t,e,n){var r=$i.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function uo(t,e,n){var r=Pi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function co(t,e,n){var r=Pi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function lo(t,e){return zi(t.getDate(),e,2)}function ho(t,e){return zi(t.getHours(),e,2)}function fo(t,e){return zi(t.getHours()%12||12,e,2)}function po(t,e){return zi(1+ki["a"].count(Object(ki["k"])(t),t),e,3)}function go(t,e){return zi(t.getMilliseconds(),e,3)}function mo(t,e){return go(t,e)+"000"}function vo(t,e){return zi(t.getMonth()+1,e,2)}function yo(t,e){return zi(t.getMinutes(),e,2)}function bo(t,e){return zi(t.getSeconds(),e,2)}function xo(t){var e=t.getDay();return 0===e?7:e}function wo(t,e){return zi(ki["h"].count(Object(ki["k"])(t)-1,t),e,2)}function _o(t,e){var n=t.getDay();return t=n>=4||0===n?Object(ki["i"])(t):ki["i"].ceil(t),zi(ki["i"].count(Object(ki["k"])(t),t)+(4===Object(ki["k"])(t).getDay()),e,2)}function Oo(t){return t.getDay()}function So(t,e){return zi(ki["e"].count(Object(ki["k"])(t)-1,t),e,2)}function Co(t,e){return zi(t.getFullYear()%100,e,2)}function ko(t,e){return zi(t.getFullYear()%1e4,e,4)}function Ao(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+zi(e/60|0,"0",2)+zi(e%60,"0",2)}function To(t,e){return zi(t.getUTCDate(),e,2)}function Eo(t,e){return zi(t.getUTCHours(),e,2)}function jo(t,e){return zi(t.getUTCHours()%12||12,e,2)}function Do(t,e){return zi(1+ki["l"].count(Object(ki["v"])(t),t),e,3)}function Mo(t,e){return zi(t.getUTCMilliseconds(),e,3)}function No(t,e){return Mo(t,e)+"000"}function Io(t,e){return zi(t.getUTCMonth()+1,e,2)}function Ro(t,e){return zi(t.getUTCMinutes(),e,2)}function Fo(t,e){return zi(t.getUTCSeconds(),e,2)}function Po(t){var e=t.getUTCDay();return 0===e?7:e}function $o(t,e){return zi(ki["s"].count(Object(ki["v"])(t)-1,t),e,2)}function Lo(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Object(ki["t"])(t):ki["t"].ceil(t),zi(ki["t"].count(Object(ki["v"])(t),t)+(4===Object(ki["v"])(t).getUTCDay()),e,2)}function zo(t){return t.getUTCDay()}function Bo(t,e){return zi(ki["p"].count(Object(ki["v"])(t)-1,t),e,2)}function Uo(t,e){return zi(t.getUTCFullYear()%100,e,2)}function Wo(t,e){return zi(t.getUTCFullYear()%1e4,e,4)}function Vo(){return"+0000"}function Ho(){return"%"}function qo(t){return+t}function Go(t){return Math.floor(+t/1e3)}function Xo(t){return Di=ji(t),Mi=Di.format,Ni=Di.parse,Ii=Di.utcFormat,Ri=Di.utcParse,Di}function Yo(t,e,n){n=n||{},Object(rt["F"])(n)||Object(rt["n"])("Invalid time multi-format specifier: "+n);const r=e(kn),i=e(Cn),o=e(Sn),a=e(wn),s=e(xn),u=e(bn),c=e(yn),l=e(vn),h=t(n[An]||".%L"),f=t(n[kn]||":%S"),d=t(n[Cn]||"%I:%M"),p=t(n[Sn]||"%I %p"),g=t(n[wn]||n[_n]||"%a %d"),m=t(n[xn]||"%b %d"),v=t(n[bn]||"%B"),y=t(n[yn]||"%B"),b=t(n[vn]||"%Y");return t=>(r(t)<t?h:i(t)<t?f:o(t)<t?d:a(t)<t?p:u(t)<t?s(t)<t?g:m:l(t)<t?c(t)<t?v:y:b)(t)}function Ko(t){const e=Ne(t.format),n=Ne(t.utcFormat);return{timeFormat:t=>Object(rt["H"])(t)?e(t):Yo(e,Jr,t),utcFormat:t=>Object(rt["H"])(t)?n(t):Yo(n,Qr,t),timeParse:Ne(t.parse),utcParse:Ne(t.utcParse)}}let Zo;function Jo(){return Zo=Ko({format:Mi,parse:Ni,utcFormat:Ii,utcParse:Ri})}function Qo(t){return Ko(ji(t))}function ta(t){return arguments.length?Zo=Qo(t):Zo}Xo({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Jo();const ea=(t,e)=>Object(rt["o"])({},t,e);function na(t,e){const n=t?gn(t):mn(),r=e?Qo(e):ta();return ea(n,r)}function ra(t,e){const n=arguments.length;return n&&2!==n&&Object(rt["n"])("defaultLocale expects either zero or two arguments."),n?ea(mn(t),ta(e)):ea(mn(),ta())}function ia(){return pn(),Jo(),ra()}var oa=function(t,e,n,r){e=e||{};const i=De(e.type||"json");return i||Object(rt["n"])("Unknown data format type: "+e.type),t=i(t,e),e.parse&&aa(t,e.parse,n,r),Object(rt["v"])(t,"columns")&&delete t.columns,t};function aa(t,e,n,r){if(!t.length)return;const i=ta();n=n||i.timeParse,r=r||i.utcParse;var o,a,s,u,c,l,h,f=t.columns||Object.keys(t[0]);for("auto"===e&&(e=Zt(t,f)),f=Object.keys(e),o=f.map((function(t){var i,o,a=e[t];if(a&&(a.startsWith("date:")||a.startsWith("utc:"))){i=a.split(/:(.+)?/,2),o=i[1],("'"===o[0]&&"'"===o[o.length-1]||'"'===o[0]&&'"'===o[o.length-1])&&(o=o.slice(1,-1));const t="utc"===i[0]?r:n;return t(o)}if(!Gt[a])throw Error("Illegal format pattern: "+t+":"+a);return Gt[a]})),u=0,l=t.length,h=f.length;u<l;++u)for(a=t[u],c=0;c<h;++c)s=f[c],a[s]=o[c](a[s])}var sa=zt("undefined"!==typeof fetch&&fetch,null);function ua(t,e){const n=this.locale();return oa(t,e,n.timeParse,n.utcParse)}function ca(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))}async function la(t,e){const n=this;let r,i=0;try{r=await n.loader().load(t,{context:"dataflow",response:Me(e&&e.type)});try{r=n.parse(r,e)}catch(o){i=-2,n.warn("Data ingestion failed",t,o)}}catch(o){i=-1,n.warn("Loading failed",t,o)}return{data:r,status:i}}async function ha(t,e,n){const r=this,i=r._pending||fa(r);i.requests+=1;const o=await r.request(e,n);return r.pulse(t,r.changeset().remove(rt["gb"]).insert(o.data||[])),i.done(),o}function fa(t){var e,n=new Promise((function(t){e=t}));return n.requests=0,n.done=function(){0===--n.requests&&(t._pending=null,e(t))},t._pending=n}var da={skip:!0},pa=function(t,e,n,r,i){var o=t instanceof kt?ma:ga;return o(this,t,e,n,r,i),this};function ga(t,e,n,r,i,o){var a,s,u=Object(rt["o"])({},o,da);Object(rt["D"])(n)||(n=Object(rt["l"])(n)),void 0===r?a=e=>t.touch(n(e)):Object(rt["D"])(r)?(s=new kt(null,r,i,!1),a=e=>{s.evaluate(e);const r=n(e),i=s.value;mt(i)?t.pulse(r,i,o):t.update(r,i,u)}):a=e=>t.update(n(e),r,u),e.apply(a)}function ma(t,e,n,r,i,o){if(void 0===r)e.targets().add(n);else{const a=o||{},s=new kt(null,va(n,r),i,!1);s.modified(a.force),s.rank=e.rank,e.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),t.connect(n,[s]))}}function va(t,e){return e=Object(rt["D"])(e)?e:Object(rt["l"])(e),t?function(n,r){const i=e(n,r);return t.skip()||(t.skip(i!==this.value).value=i),i}:e}function ya(t){t.rank=++this._rank}function ba(t){var e,n,r,i=[t];while(i.length)if(this.rank(e=i.pop()),n=e._targets)for(r=n.length;--r>=0;)i.push(e=n[r]),e===t&&Object(rt["n"])("Cycle detected in dataflow graph.")}const xa={},wa=1,_a=2,Oa=4,Sa=wa|_a,Ca=wa|Oa,ka=wa|_a|Oa,Aa=8,Ta=16,Ea=32,ja=64;function Da(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}const Ma=Da.prototype;function Na(t,e){return t?(n,r)=>t(n,r)&&e(n,r):e}function Ia(t,e){var n=[];return Object(rt["ib"])(t,e,t=>n.push(t)),n}function Ra(t,e){var n={};return t.visit(e,(function(t){n[ct(t)]=1})),t=>n[ct(t)]?null:t}function Fa(t,e,n,r){var i,o,a,s,u,c=this,l=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n,a=0,s=n.length;a<s;++a)if(i=n[a],i.stamp===e){if(i.fields)for(u in o=c.fields||(c.fields={}),i.fields)o[u]=1;i.changed(c.ADD)&&(l|=c.ADD),i.changed(c.REM)&&(l|=c.REM),i.changed(c.MOD)&&(l|=c.MOD)}this.changes=l}Ma.StopPropagation=xa,Ma.ADD=wa,Ma.REM=_a,Ma.MOD=Oa,Ma.ADD_REM=Sa,Ma.ADD_MOD=Ca,Ma.ALL=ka,Ma.REFLOW=Aa,Ma.SOURCE=Ta,Ma.NO_SOURCE=Ea,Ma.NO_FIELDS=ja,Ma.fork=function(t){return new Da(this.dataflow).init(this,t)},Ma.clone=function(){const t=this.fork(ka);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(ka|Ta)},Ma.addAll=function(){let t=this;return t.source&&t.source.length!==t.add.length?(t=new Da(this.dataflow).init(this),t.add=t.source,t):t},Ma.init=function(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||e&ja||(n.fields=t.fields),e&wa?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&_a?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&Oa?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&Ea?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},Ma.runAfter=function(t){this.dataflow.runAfter(t)},Ma.changed=function(t){var e=t||ka;return e&wa&&this.add.length||e&_a&&this.rem.length||e&Oa&&this.mod.length},Ma.reflow=function(t){if(t)return this.fork(ka).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(Oa,Ra(this,wa))),this},Ma.clean=function(t){return arguments.length?(this.cleans=!!t,this):this.cleans},Ma.modifies=function(t){var e=this.fields||(this.fields={});return Object(rt["A"])(t)?t.forEach(t=>e[t]=!0):e[t]=!0,this},Ma.modified=function(t,e){var n=this.fields;return!(!e&&!this.mod.length||!n)&&(arguments.length?Object(rt["A"])(t)?t.some(t=>n[t]):n[t]:!!n)},Ma.filter=function(t,e){var n=this;return t&wa&&(n.addF=Na(n.addF,e)),t&_a&&(n.remF=Na(n.remF,e)),t&Oa&&(n.modF=Na(n.modF,e)),t&Ta&&(n.srcF=Na(n.srcF,e)),n},Ma.materialize=function(t){t=t||ka;var e=this;return t&wa&&e.addF&&(e.add=Ia(e.add,e.addF),e.addF=null),t&_a&&e.remF&&(e.rem=Ia(e.rem,e.remF),e.remF=null),t&Oa&&e.modF&&(e.mod=Ia(e.mod,e.modF),e.modF=null),t&Ta&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},Ma.visit=function(t,e){var n,r,i=this,o=e;return t&Ta?(Object(rt["ib"])(i.source,i.srcF,o),i):(t&wa&&Object(rt["ib"])(i.add,i.addF,o),t&_a&&Object(rt["ib"])(i.rem,i.remF,o),t&Oa&&Object(rt["ib"])(i.mod,i.modF,o),t&Aa&&(n=i.source)&&(r=i.add.length+i.mod.length,r===n.length||(r?Object(rt["ib"])(n,Ra(i,Ca),o):Object(rt["ib"])(n,i.srcF,o))),i)};var Pa=Object(rt["y"])(Fa,Da);async function $a(t,e,n){const r=this,i=[];if(r._pulse)return Ua(r);if(r._pending&&await r._pending,e&&await ot(r,e),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Da(r,o,t),r._touched.forEach(t=>r._enqueue(t,!0)),r._touched=it(rt["w"]);let a,s,u,c=0;try{while(r._heap.size()>0)a=r._heap.pop(),a.rank===a.qrank?(s=a.run(r._getPulse(a,t)),s.then?s=await s:s.async&&(i.push(s.async),s=xa),s!==xa&&a._targets&&a._targets.forEach(t=>r._enqueue(t)),++c):r._enqueue(a,!0)}catch(l){r._heap.clear(),u=l}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${c} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const t=r._postrun.sort((t,e)=>e.priority-t.priority);r._postrun=[];for(let e=0;e<t.length;++e)await ot(r,t[e].callback)}return n&&await ot(r,n),i.length&&Promise.all(i).then(t=>r.runAsync(null,()=>{t.forEach(t=>{try{t(r)}catch(l){r.error(l)}})})),r}async function La(t,e,n){while(this._running)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(r,r),this._running}function za(t,e,n){return this._pulse?Ua(this):(this.evaluate(t,e,n),this)}function Ba(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(r){this.error(r)}}function Ua(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function Wa(t,e){var n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function Va(t,e){var n=t.source,r=this._clock;return n&&Object(rt["A"])(n)?new Fa(this,r,n.map(t=>t.pulse),e):this._input[t.id]||Ha(this._pulse,n&&n.pulse)}function Ha(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==xa&&(t.source=e.source),t)}Pa.fork=function(t){var e=new Da(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,(function(t){return e.add.push(t)})),t&e.REM&&this.visit(e.REM,(function(t){return e.rem.push(t)})),t&e.MOD&&this.visit(e.MOD,(function(t){return e.mod.push(t)}))),e},Pa.changed=function(t){return this.changes&t},Pa.modified=function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?Object(rt["A"])(t)?t.some((function(t){return n[t]})):n[t]:0},Pa.filter=function(){Object(rt["n"])("MultiPulse does not support filtering.")},Pa.materialize=function(){Object(rt["n"])("MultiPulse does not support materialization.")},Pa.visit=function(t,e){var n=this,r=n.pulses,i=r.length,o=0;if(t&n.SOURCE)for(;o<i;++o)r[o].visit(t,e);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(t,e);return n};var qa={skip:!1,force:!1};function Ga(t,e){var n=e||qa;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function Xa(t,e,n){var r=n||qa;return(t.set(e)||r.force)&&this.touch(t,r),this}function Ya(t,e,n){this.touch(t,n||qa);var r=new Da(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._input[t.id]=e.pulse(r,i),this}function Ka(t){var e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),Za(e,0,e.length-1,t)),pop:()=>{var n,r=e.pop();return e.length?(n=e[0],e[0]=r,Ja(e,0,t)):n=r,n}}}function Za(t,e,n,r){var i,o,a;i=t[n];while(n>e){if(a=n-1>>1,o=t[a],!(r(i,o)<0))break;t[n]=o,n=a}return t[n]=i}function Ja(t,e,n){var r,i=e,o=t.length,a=t[e],s=1+(e<<1);while(s<o)r=s+1,r<o&&n(t[s],t[r])>=0&&(s=r),t[e]=t[s],e=s,s=1+(e<<1);return t[e]=a,Za(t,i,e,n)}function Qa(){this.logger(Object(rt["K"])()),this.logLevel(rt["b"]),this._clock=0,this._rank=0,this._locale=ra();try{this._loader=sa()}catch(t){}this._touched=it(rt["w"]),this._input={},this._pulse=null,this._heap=Ka((t,e)=>t.qrank-e.qrank),this._postrun=[]}var ts=Qa.prototype;function es(t){return function(){return this._log[t].apply(this,arguments)}}function ns(t,e){kt.call(this,t,null,e)}ts.stamp=function(){return this._clock},ts.loader=function(t){return arguments.length?(this._loader=t,this):this._loader},ts.locale=function(t){return arguments.length?(this._locale=t,this):this._locale},ts.cleanThreshold=1e4,ts.add=Et,ts.connect=jt,ts.rank=ya,ts.rerank=ba,ts.pulse=Ya,ts.touch=Ga,ts.update=Xa,ts.changeset=vt,ts.ingest=ca,ts.parse=ua,ts.preload=ha,ts.request=la,ts.events=Rt,ts.on=pa,ts.evaluate=$a,ts.run=za,ts.runAsync=La,ts.runAfter=Ba,ts._enqueue=Wa,ts._getPulse=Va,ts.logger=function(t){return arguments.length?(this._log=t,this):this._log},ts.error=es("error"),ts.warn=es("warn"),ts.info=es("info"),ts.debug=es("debug"),ts.logLevel=es("level");var rs=Object(rt["y"])(ns,kt);rs.run=function(t){return t.stamp<this.stamp?t.StopPropagation:(this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(t=>this.pulse=t):e!==t.StopPropagation&&(this.pulse=e),e);var e},rs.evaluate=function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},rs.transform=function(){};var is={};function os(t){var e=as(t);return e&&e.Definition||null}function as(t){return t=t&&t.toLowerCase(),Object(rt["v"])(is,t)?is[t]:null}function ss(t){return function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+="|"+t[r](e);return i}}function us(t){return t&&t.length?1===t.length?t[0]:ss(t):function(){return""}}function cs(t,e,n){return n||t+(e?"_"+e:"")}const ls=()=>{},hs={init:ls,add:ls,rem:ls,idx:0},fs={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||void 0===t.min)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||void 0===t.max)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},ds=Object.keys(fs);function ps(t,e){return n=>Object(rt["o"])({name:t,out:n||t},hs,e)}function gs(t,e){return fs[t](e)}function ms(t,e){return t.idx-e.idx}function vs(t){const e={};t.forEach(t=>e[t.name]=t);const n=t=>{t.req&&t.req.forEach(t=>{e[t]||n(e[t]=fs[t]())})};return t.forEach(n),Object.values(e).sort(ms)}function ys(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function bs(t,e){null!=t&&""!==t?t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e))):++this.missing}function xs(t,e){null!=t&&""!==t?t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e))):--this.missing}function ws(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function _s(t,e){var n=e||rt["x"],r=vs(t),i=t.slice().sort(ms);function o(t){this._ops=r,this._out=i,this.cell=t,this.init()}return o.prototype.init=ys,o.prototype.add=bs,o.prototype.rem=xs,o.prototype.set=ws,o.prototype.get=n,o.fields=t.map(t=>t.out),o}ds.forEach(t=>{fs[t]=ps(t,fs[t])});var Os=function*(t,e){if(null==e)for(let n of t)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)r=e(r,++n,t),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}};function Ss(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Cs(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function ks(t,e,n=0,r=t.length-1,i=ai){while(r>n){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1),l=Math.max(n,Math.floor(e-a*u/o+c)),h=Math.min(r,Math.floor(e+(o-a)*u/o+c));ks(t,e,l,h,i)}const o=t[e];let a=n,s=r;As(t,n,e),i(t[r],o)>0&&As(t,n,r);while(a<s){As(t,a,s),++a,--s;while(i(t[a],o)<0)++a;while(i(t[s],o)>0)--s}0===i(t[n],o)?As(t,n,s):(++s,As(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function As(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}var Ts=function(t){return null===t?NaN:+t};function*Es(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}function js(t,e,n){if(t=Float64Array.from(Es(t,n)),r=t.length){if((e=+e)<=0||r<2)return Cs(t);if(e>=1)return Ss(t);var r,i=(r-1)*e,o=Math.floor(i),a=Ss(ks(t,o).subarray(0,o+1)),s=Cs(t.subarray(o+1));return a+(s-a)*(i-o)}}function Ds(t,e,n=Ts){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}var Ms=function(t,e,n){var r=Float64Array.from(Os(t,n));return r.sort(ai),e.map(t=>Ds(r,t))},Ns=function(t,e){return Ms(t,[.25,.5,.75],e)};function Is(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let a of t)null!=a&&(a=+a)>=a&&(n=a-i,i+=n/++r,o+=n*(a-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function Rs(t,e){const n=Is(t,e);return n?Math.sqrt(n):n}var Fs=function(t,e){var n=t.length,r=Rs(t,e),i=Ns(t,e),o=(i[2]-i[0])/1.34;return r=Math.min(r,o)||r||Math.abs(i[0])||1,1.06*r*Math.pow(n,-.2)},Ps=function(t){var e,n,r,i,o,a,s,u,c=t.maxbins||20,l=t.base||10,h=Math.log(l),f=t.divide||[5,2],d=t.extent[0],p=t.extent[1],g=t.span||p-d||Math.abs(d)||1;if(t.step)e=t.step;else if(t.steps){for(o=g/c,a=0,s=t.steps.length;a<s&&t.steps[a]<o;++a);e=t.steps[Math.max(0,a-1)]}else{n=Math.ceil(Math.log(c)/h),r=t.minstep||0,e=Math.max(r,Math.pow(l,Math.round(Math.log(g)/h)-n));while(Math.ceil(g/e)>c)e*=l;for(a=0,s=f.length;a<s;++a)o=e/f[a],o>=r&&g/o<=c&&(e=o)}return o=Math.log(e),i=o>=0?0:1+~~(-o/h),u=Math.pow(l,-i-1),(t.nice||void 0===t.nice)&&(o=Math.floor(d/e+u)*e,d=d<o?o-e:o,p=Math.ceil(p/e)*e),{start:d,stop:p===d?d+e:p,step:e}},$s=Math.random;function Ls(t){$s=t}var zs=function(t,e,n,r){if(!t.length)return[void 0,void 0];var i,o,a,s,u=Float64Array.from(Os(t,r)),c=u.length,l=e;for(a=0,s=Array(l);a<l;++a){for(i=0,o=0;o<c;++o)i+=u[~~($s()*c)];s[a]=i/c}return s.sort(ai),[js(s,n/2),js(s,1-n/2)]},Bs=function(t,e,n,r){r=r||(t=>t);let i,o=0,a=1,s=t.length,u=new Float64Array(s),c=r(t[0]),l=c,h=c+e;for(;a<s;++a){if(i=r(t[a]),i>=h){for(l=(c+l)/2;o<a;++o)u[o]=l;h=i+e,c=i}l=i}for(l=(c+l)/2;o<a;++o)u[o]=l;return n?Us(u,e+e/4):u};function Us(t,e){let n,r,i=t.length,o=0,a=1;while(t[o]===t[a])++a;while(a<i){n=a+1;while(t[a]===t[n])++n;if(t[a]-t[a-1]<e){r=a+(o+n-a-a>>1);while(r<a)t[r++]=t[a];while(r>a)t[r--]=t[o]}o=a,a=n}return t}var Ws=function(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}},Vs=function(t,e){null==e&&(e=t,t=0);var n,r,i,o={};return o.min=function(t){return arguments.length?(n=t||0,i=r-n,o):n},o.max=function(t){return arguments.length?(r=t||0,i=r-n,o):r},o.sample=function(){return n+Math.floor(i*$s())},o.pdf=function(t){return t===Math.floor(t)&&t>=n&&t<r?1/i:0},o.cdf=function(t){var e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},o.icdf=function(t){return t>=0&&t<=1?n-1+Math.floor(t*i):NaN},o.min(t).max(e)};const Hs=Math.sqrt(2*Math.PI),qs=Math.SQRT2;let Gs=NaN;function Xs(t,e){t=t||0,e=null==e?1:e;let n,r,i=0,o=0;if(Gs===Gs)i=Gs,Gs=NaN;else{do{i=2*$s()-1,o=2*$s()-1,n=i*i+o*o}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,Gs=o*r}return t+i*e}function Ys(t,e,n){n=null==n?1:n;const r=(t-(e||0))/n;return Math.exp(-.5*r*r)/(n*Hs)}function Ks(t,e,n){e=e||0,n=null==n?1:n;let r,i=(t-e)/n,o=Math.abs(i);if(o>37)r=0;else{let t,e=Math.exp(-o*o/2);o<7.07106781186547?(t=.0352624965998911*o+.700383064443688,t=t*o+6.37396220353165,t=t*o+33.912866078383,t=t*o+112.079291497871,t=t*o+221.213596169931,t=t*o+220.206867912376,r=e*t,t=.0883883476483184*o+1.75566716318264,t=t*o+16.064177579207,t=t*o+86.7807322029461,t=t*o+296.564248779674,t=t*o+637.333633378831,t=t*o+793.826512519948,t=t*o+440.413735824752,r/=t):(t=o+.65,t=o+4/t,t=o+3/t,t=o+2/t,t=o+1/t,r=e/t/2.506628274631)}return i>0?1-r:r}function Zs(t,e,n){return t<0||t>1?NaN:(e||0)+(null==n?1:n)*qs*Js(2*t-1)}function Js(t){let e,n=-Math.log((1-t)*(1+t));return n<6.25?(n-=3.125,e=-364441206401782e-35,e=e*n-16850591381820166e-35,e=128584807152564e-32+e*n,e=11157877678025181e-33+e*n,e=e*n-1333171662854621e-31,e=20972767875968562e-33+e*n,e=6637638134358324e-30+e*n,e=e*n-4054566272975207e-29,e=e*n-8151934197605472e-29,e=26335093153082323e-28+e*n,e=e*n-12975133253453532e-27,e=e*n-5415412054294628e-26,e=1.0512122733215323e-9+e*n,e=e*n-4.112633980346984e-9,e=e*n-2.9070369957882005e-8,e=4.2347877827932404e-7+e*n,e=e*n-13654692000834679e-22,e=e*n-13882523362786469e-21,e=.00018673420803405714+e*n,e=e*n-.000740702534166267,e=e*n-.006033670871430149,e=.24015818242558962+e*n,e=1.6536545626831027+e*n):n<16?(n=Math.sqrt(n)-3.25,e=2.2137376921775787e-9,e=9.075656193888539e-8+e*n,e=e*n-2.7517406297064545e-7,e=1.8239629214389228e-8+e*n,e=15027403968909828e-22+e*n,e=e*n-4013867526981546e-21,e=29234449089955446e-22+e*n,e=12475304481671779e-21+e*n,e=e*n-47318229009055734e-21,e=6828485145957318e-20+e*n,e=24031110387097894e-21+e*n,e=e*n-.0003550375203628475,e=.0009532893797373805+e*n,e=e*n-.0016882755560235047,e=.002491442096107851+e*n,e=e*n-.003751208507569241,e=.005370914553590064+e*n,e=1.0052589676941592+e*n,e=3.0838856104922208+e*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,e=-27109920616438573e-27,e=e*n-2.555641816996525e-10,e=1.5076572693500548e-9+e*n,e=e*n-3.789465440126737e-9,e=7.61570120807834e-9+e*n,e=e*n-1.496002662714924e-8,e=2.914795345090108e-8+e*n,e=e*n-6.771199775845234e-8,e=2.2900482228026655e-7+e*n,e=e*n-9.9298272942317e-7,e=4526062597223154e-21+e*n,e=e*n-1968177810553167e-20,e=7599527703001776e-20+e*n,e=e*n-.00021503011930044477,e=e*n-.00013871931833623122,e=1.0103004648645344+e*n,e=4.849906401408584+e*n):e=1/0,e*t}var Qs=function(t,e){var n,r,i={mean:function(t){return arguments.length?(n=t||0,i):n},stdev:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>Xs(n,r),pdf:t=>Ys(t,n,r),cdf:t=>Ks(t,n,r),icdf:t=>Zs(t,n,r)};return i.mean(t).stdev(e)},tu=function(t,e){var n=Qs(),r={},i=0;return r.data=function(n){return arguments.length?(t=n,i=n?n.length:0,r.bandwidth(e)):t},r.bandwidth=function(n){return arguments.length?(e=n,!e&&t&&(e=Fs(t)),r):e},r.sample=function(){return t[~~($s()*i)]+e*n.sample()},r.pdf=function(r){for(var o=0,a=0;a<i;++a)o+=n.pdf((r-t[a])/e);return o/e/i},r.cdf=function(r){for(var o=0,a=0;a<i;++a)o+=n.cdf((r-t[a])/e);return o/i},r.icdf=function(){throw Error("KDE icdf not supported.")},r.data(t)};function eu(t,e){return t=t||0,e=null==e?1:e,Math.exp(t+Xs()*e)}function nu(t,e,n){if(t<=0)return 0;e=e||0,n=null==n?1:n;const r=(Math.log(t)-e)/n;return Math.exp(-.5*r*r)/(n*Hs*t)}function ru(t,e,n){return Ks(Math.log(t),e,n)}function iu(t,e,n){return Math.exp(Zs(t,e,n))}var ou=function(t,e){var n,r,i={mean:function(t){return arguments.length?(n=t||0,i):n},stdev:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>eu(n,r),pdf:t=>nu(t,n,r),cdf:t=>ru(t,n,r),icdf:t=>iu(t,n,r)};return i.mean(t).stdev(e)},au=function(t,e){var n,r={},i=0;function o(t){var e,n=[],r=0;for(e=0;e<i;++e)r+=n[e]=null==t[e]?1:+t[e];for(e=0;e<i;++e)n[e]/=r;return n}return r.weights=function(t){return arguments.length?(n=o(e=t||[]),r):e},r.distributions=function(n){return arguments.length?(n?(i=n.length,t=n):(i=0,t=[]),r.weights(e)):t},r.sample=function(){for(var e=$s(),r=t[i-1],o=n[0],a=0;a<i-1;o+=n[++a])if(e<o){r=t[a];break}return r.sample()},r.pdf=function(e){for(var r=0,o=0;o<i;++o)r+=n[o]*t[o].pdf(e);return r},r.cdf=function(e){for(var r=0,o=0;o<i;++o)r+=n[o]*t[o].cdf(e);return r},r.icdf=function(){throw Error("Mixture icdf not supported.")},r.distributions(t).weights(e)};function su(t,e){return null==e&&(e=null==t?1:t,t=0),t+(e-t)*$s()}function uu(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function cu(t,e,n){return null==n&&(n=null==e?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function lu(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}var hu=function(t,e){var n,r,i={min:function(t){return arguments.length?(n=t||0,i):n},max:function(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>su(n,r),pdf:t=>uu(t,n,r),cdf:t=>cu(t,n,r),icdf:t=>lu(t,n,r)};return null==e&&(e=null==t?1:t,t=0),i.min(t).max(e)},fu=function(t,e,n,r){const i=r-t*t,o=Math.abs(i)<1e-24?0:(n-t*e)/i,a=e-o*t;return[a,o]};function du(t,e,n,r){t=t.filter(t=>{let r=e(t),i=n(t);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i}),r&&t.sort((t,n)=>e(t)-e(n));const i=t.length,o=new Float64Array(i),a=new Float64Array(i);let s,u,c,l=0,h=0,f=0;for(c of t)o[l]=s=+e(c),a[l]=u=+n(c),++l,h+=(s-h)/l,f+=(u-f)/l;for(l=0;l<i;++l)o[l]-=h,a[l]-=f;return[o,a,h,f]}function pu(t,e,n,r){let i,o,a=-1;for(let s of t)i=e(s),o=n(s),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++a)}var gu=function(t,e,n,r,i){let o=0,a=0;return pu(t,e,n,(t,e)=>{const n=e-i(t),s=e-r;o+=n*n,a+=s*s}),1-o/a},mu=function(t,e,n){let r=0,i=0,o=0,a=0,s=0;pu(t,e,n,(t,e)=>{++s,r+=(t-r)/s,i+=(e-i)/s,o+=(t*e-o)/s,a+=(t*t-a)/s});const u=fu(r,i,o,a),c=t=>u[0]+u[1]*t;return{coef:u,predict:c,rSquared:gu(t,e,n,i,c)}},vu=function(t,e,n){let r=0,i=0,o=0,a=0,s=0;pu(t,e,n,(t,e)=>{++s,t=Math.log(t),r+=(t-r)/s,i+=(e-i)/s,o+=(t*e-o)/s,a+=(t*t-a)/s});const u=fu(r,i,o,a),c=t=>u[0]+u[1]*Math.log(t);return{coef:u,predict:c,rSquared:gu(t,e,n,i,c)}},yu=function(t,e,n){const[r,i,o,a]=du(t,e,n);let s,u,c,l=0,h=0,f=0,d=0,p=0;pu(t,e,n,(t,e)=>{s=r[p++],u=Math.log(e),c=s*e,l+=(e*u-l)/p,h+=(c-h)/p,f+=(c*u-f)/p,d+=(s*c-d)/p});const[g,m]=fu(h/a,l/a,f/a,d/a),v=t=>Math.exp(g+m*(t-o));return{coef:[Math.exp(g-m*o),m],predict:v,rSquared:gu(t,e,n,a,v)}},bu=function(t,e,n){let r=0,i=0,o=0,a=0,s=0,u=0;pu(t,e,n,(t,e)=>{const n=Math.log(t),c=Math.log(e);++u,r+=(n-r)/u,i+=(c-i)/u,o+=(n*c-o)/u,a+=(n*n-a)/u,s+=(e-s)/u});const c=fu(r,i,o,a),l=t=>c[0]*Math.pow(t,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:gu(t,e,n,s,l)}},xu=function(t,e,n){const[r,i,o,a]=du(t,e,n),s=r.length;let u,c,l,h,f=0,d=0,p=0,g=0,m=0;for(u=0;u<s;)c=r[u],l=i[u++],h=c*c,f+=(h-f)/u,d+=(h*c-d)/u,p+=(h*h-p)/u,g+=(c*l-g)/u,m+=(h*l-m)/u;const v=p-f*f,y=f*v-d*d,b=(m*f-g*d)/y,x=(g*v-m*d)/y,w=-b*f,_=t=>(t-=o,b*t*t+x*t+w+a);return{coef:[w-x*o+b*o*o+a,x-2*b*o,b],predict:_,rSquared:gu(t,e,n,a,_)}},wu=function(t,e,n,r){if(1===r)return mu(t,e,n);if(2===r)return xu(t,e,n);const[i,o,a,s]=du(t,e,n),u=i.length,c=[],l=[],h=r+1;let f,d,p,g,m;for(f=0;f<h;++f){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],f)*o[p];for(c.push(g),m=new Float64Array(h),d=0;d<h;++d){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],f+d);m[d]=g}l.push(m)}l.push(c);const v=Ou(l),y=t=>{t-=a;let e=s+v[0]+v[1]*t+v[2]*t*t;for(f=3;f<h;++f)e+=v[f]*Math.pow(t,f);return e};return{coef:_u(h,v,-a,s),predict:y,rSquared:gu(t,e,n,s,y)}};function _u(t,e,n,r){const i=Array(t);let o,a,s,u;for(o=0;o<t;++o)i[o]=0;for(o=t-1;o>=0;--o)for(s=e[o],u=1,i[o]+=s,a=1;a<=o;++a)u*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*u;return i[0]+=r,i}function Ou(t){const e=t.length-1,n=[];let r,i,o,a,s;for(r=0;r<e;++r){for(a=r,i=r+1;i<e;++i)Math.abs(t[r][i])>Math.abs(t[r][a])&&(a=i);for(o=r;o<e+1;++o)s=t[o][r],t[o][r]=t[o][a],t[o][a]=s;for(i=r+1;i<e;++i)for(o=e;o>=r;o--)t[o][i]-=t[o][r]*t[r][i]/t[r][r]}for(i=e-1;i>=0;--i){for(s=0,o=i+1;o<e;++o)s+=t[o][i]*n[o];n[i]=(t[e][i]-s)/t[i][i]}return n}var Su=function(t,e){return js(t,.5,e)};const Cu=2,ku=1e-12;var Au=function(t,e,n,r){const[i,o,a,s]=du(t,e,n,!0),u=i.length,c=Math.max(2,~~(r*u)),l=new Float64Array(u),h=new Float64Array(u),f=new Float64Array(u).fill(1);for(let d=-1;++d<=Cu;){const t=[0,c-1];for(let n=0;n<u;++n){const e=i[n],r=t[0],a=t[1],s=e-i[r]>i[a]-e?r:a;let u=0,c=0,d=0,p=0,g=0,m=1/Math.abs(i[s]-e||1);for(let t=r;t<=a;++t){const n=i[t],r=o[t],a=Tu(Math.abs(e-n)*m)*f[t],s=n*a;u+=a,c+=s,d+=r*a,p+=r*s,g+=n*s}const[v,y]=fu(c/u,d/u,p/u,g/u);l[n]=v+y*e,h[n]=Math.abs(o[n]-l[n]),Eu(i,n+1,t)}if(d===Cu)break;const e=Su(h);if(Math.abs(e)<ku)break;for(let n,r,i=0;i<u;++i)n=h[i]/(6*e),f[i]=n>=1?ku:(r=1-n*n)*r}return ju(i,l,a,s)};function Tu(t){return(t=1-t*t*t)*t*t}function Eu(t,e,n){let r=t[e],i=n[0],o=n[1]+1;if(!(o>=t.length))while(e>i&&t[o]-r<=r-t[i])n[0]=++i,n[1]=o,++o}function ju(t,e,n,r){const i=t.length,o=[];let a,s=0,u=0,c=[];for(;s<i;++s)a=t[s]+n,c[0]===a?c[1]+=(e[s]-c[1])/++u:(u=0,c[1]+=r,c=[a,e[s]],o.push(c));return c[1]+=r,o}const Du=.1*Math.PI/180;var Mu=function(t,e,n,r){n=n||25,r=Math.max(n,r||200);const i=e=>[e,t(e)],o=e[0],a=e[1],s=a-o,u=s/r,c=[i(o)],l=[];if(n===r){for(let t=1;t<r;++t)c.push(i(o+t/n*s));return c.push(i(a)),c}l.push(i(a));for(let d=n;--d>0;)l.push(i(o+d/n*s));let h=c[0],f=l[l.length-1];while(f){const t=i((h[0]+f[0])/2);t[0]-h[0]>=u&&Nu(h,t,f)>Du?l.push(t):(h=f,c.push(f),l.pop()),f=l[l.length-1]}return c};function Nu(t,e,n){const r=Math.atan2(n[1]-t[1],n[0]-t[0]),i=Math.atan2(e[1]-t[1],e[0]-t[0]);return Math.abs(r-i)}function Iu(t){this._key=t?Object(rt["t"])(t):ct,this.reset()}var Ru=Iu.prototype;function Fu(t){ns.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ru.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Ru.add=function(t){this._add.push(t)},Ru.rem=function(t){this._rem.push(t)},Ru.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,o=this._key,a=r.length,s=i.length,u=Array(a-s),c={};for(t=0;t<s;++t)c[o(i[t])]=1;for(t=0,e=0;t<a;++t)c[o(n=r[t])]?c[o(n)]=0:u[e++]=n;return this._rem=[],this._add=u},Ru.distinct=function(t){var e,n=this.values(),r=n.length,i={},o=0;while(--r>=0)e=t(n[r])+"",Object(rt["v"])(i,e)||(i[e]=1,++o);return o},Ru.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=Object(rt["q"])(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},Ru.argmin=function(t){return this.extent(t)[0]||{}},Ru.argmax=function(t){return this.extent(t)[1]||{}},Ru.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):void 0},Ru.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):void 0},Ru.quartile=function(t){return this._get===t&&this._q||(this._q=Ns(this.values(),t),this._get=t),this._q},Ru.q1=function(t){return this.quartile(t)[0]},Ru.q2=function(t){return this.quartile(t)[1]},Ru.q3=function(t){return this.quartile(t)[2]},Ru.ci=function(t){return this._get===t&&this._ci||(this._ci=zs(this.values(),1e3,.05,t),this._get=t),this._ci},Ru.ci0=function(t){return this.ci(t)[0]},Ru.ci1=function(t){return this.ci(t)[1]},Fu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ds},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Pu=Object(rt["y"])(Fu,ns);Pu.transform=function(t,e){var n=this,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.modified();return n.stamp=r.stamp,n.value&&(i||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(t):{},e.visit(e.SOURCE,t=>n.add(t))):(n.value=n.value||n.init(t),e.visit(e.REM,t=>n.rem(t)),e.visit(e.ADD,t=>n.add(t))),r.modifies(n._outputs),n._drop=!1!==t.drop,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},Pu.cross=function(){var t=this,e=t.value,n=t._dnames,r=n.map((function(){return{}})),i=n.length;function o(t){var e,o,a,s;for(e in t)for(a=t[e].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}function a(o,s,u){var c,l,h=n[u],f=r[u++];for(c in f)s[h]=f[c],l=o?o+"|"+c:c,u<i?a(l,s,u):e[l]||t.cell(l,s)}o(t._prev),o(e),a("",{},0)},Pu.init=function(t){var e=this._inputs=[],n=this._outputs=[],r={};function i(t){for(var n,i=Object(rt["i"])(Object(rt["g"])(t)),o=0,a=i.length;o<a;++o)r[n=i[o]]||(r[n]=1,e.push(n))}this._dims=Object(rt["i"])(t.groupby),this._dnames=this._dims.map((function(t){var e=Object(rt["h"])(t);return i(t),n.push(e),e})),this.cellkey=t.key?t.key:us(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var o,a,s,u,c,l,h=t.fields||[null],f=t.ops||["count"],d=t.as||[],p=h.length,g={};for(p!==f.length&&Object(rt["n"])("Unmatched number of fields and aggregate ops."),l=0;l<p;++l)o=h[l],a=f[l],null==o&&"count"!==a&&Object(rt["n"])("Null aggregate field specified."),u=Object(rt["h"])(o),c=cs(a,u,d[l]),n.push(c),"count"!==a?(s=g[u],s||(i(o),s=g[u]=[],s.field=o,this._measures.push(s)),"count"!==a&&(this._countOnly=!1),s.push(gs(a,c))):this._counts.push(c);return this._measures=this._measures.map((function(t){return _s(t,t.field)})),{}},Pu.cellkey=us(),Pu.cell=function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},Pu.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,o=i.length;for(n.agg=Array(o),r=0;r<o;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new Iu),n},Pu.newtuple=function(t,e){var n,r,i=this._dnames,o=this._dims,a={};for(n=0,r=o.length;n<r;++n)a[i[n]]=o[n](t);return e?pt(e.tuple,a):ht(a)},Pu.clean=function(){const t=this.value;for(const e in t)0===t[e].num&&delete t[e]},Pu.add=function(t){var e,n,r,i=this.cellkey(t),o=this.cell(i,t);if(o.num+=1,!this._countOnly)for(o.store&&o.data.add(t),e=o.agg,n=0,r=e.length;n<r;++n)e[n].add(e[n].get(t),t)},Pu.rem=function(t){var e,n,r,i=this.cellkey(t),o=this.cell(i,t);if(o.num-=1,!this._countOnly)for(o.store&&o.data.rem(t),e=o.agg,n=0,r=e.length;n<r;++n)e[n].rem(e[n].get(t),t)},Pu.celltuple=function(t){var e,n,r,i=t.tuple,o=this._counts;for(t.store&&t.data.values(),n=0,r=o.length;n<r;++n)i[o[n]]=t.num;if(!this._countOnly)for(e=t.agg,n=0,r=e.length;n<r;++n)e[n].set(i);return i},Pu.changes=function(t){var e,n,r,i,o=this._adds,a=this._mods,s=this._prev,u=this._drop,c=t.add,l=t.rem,h=t.mod;if(s)for(n in s)e=s[n],u&&!e.num||l.push(e.tuple);for(r=0,i=this._alen;r<i;++r)c.push(this.celltuple(o[r])),o[r]=null;for(r=0,i=this._mlen;r<i;++r)e=a[r],(0===e.num&&u?l:h).push(this.celltuple(e)),a[r]=null;return this._alen=this._mlen=0,this._prev=null,t};const $u=1e-14;function Lu(t){ns.call(this,null,t)}Lu.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var zu=Object(rt["y"])(Lu,ns);zu.transform=function(t,e){var n,r=!1!==t.interval,i=this._bins(t),o=i.start,a=i.step,s=t.as||["bin0","bin1"],u=s[0],c=s[1];return t.modified()?(e=e.reflow(!0),n=e.SOURCE):n=e.modified(Object(rt["g"])(t.field))?e.ADD_MOD:e.ADD,e.visit(n,r?function(t){var e=i(t);t[u]=e,t[c]=null==e?null:o+a*(1+(e-o)/a)}:function(t){t[u]=i(t)}),e.modifies(r?s:u)},zu._bins=function(t){if(this.value&&!t.modified())return this.value;var e,n,r=t.field,i=Ps(t),o=i.step,a=i.start,s=a+Math.ceil((i.stop-a)/o)*o;null!=(e=t.anchor)&&(n=e-(a+o*Math.floor((e-a)/o)),a+=n,s+=n);var u=function(t){var e=Object(rt["cb"])(r(t));return null==e?null:e<a?-1/0:e>s?1/0:(e=Math.max(a,Math.min(e,s-o)),a+o*Math.floor($u+(e-a)/o))};return u.start=a,u.stop=i.stop,u.step=o,this.value=Object(rt["f"])(u,Object(rt["g"])(r),t.name||"bin_"+Object(rt["h"])(r))};var Bu=function(t,e,n){var r=t,i=e||[],o=n||[],a={},s=0;return{add:function(t){o.push(t)},remove:function(t){a[r(t)]=++s},size:function(){return i.length},data:function(t,e){return s&&(i=i.filter((function(t){return!a[r(t)]})),a={},s=0),e&&t&&i.sort(t),o.length&&(i=t?Object(rt["M"])(t,i,o.sort(t)):i.concat(o),o=[]),i}}};function Uu(t){ns.call(this,[],t)}Uu.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};var Wu=Object(rt["y"])(Uu,ns);function Vu(t){kt.call(this,null,Hu,t)}function Hu(t){return this.value&&!t.modified()?this.value:Object(rt["k"])(t.fields,t.orders)}function qu(t){ns.call(this,null,t)}function Gu(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}Wu.transform=function(t,e){var n=e.fork(e.ALL),r=Bu(ct,this.value,n.materialize(n.ADD).add),i=t.sort,o=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(gt(i),o),e.source&&e.source.root&&(this.value.root=e.source.root),n},Object(rt["y"])(Vu,kt),qu.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Xu=Object(rt["y"])(qu,ns);function Yu(t){ns.call(this,null,t)}Xu.transform=function(t,e){function n(e){return function(n){for(var r,i=Gu(s(n),t.case,o)||[],u=0,c=i.length;u<c;++u)a.test(r=i[u])||e(r)}}var r=this._parameterCheck(t,e),i=this._counts,o=this._match,a=this._stop,s=t.field,u=t.as||["text","count"],c=n((function(t){i[t]=1+(i[t]||0)})),l=n((function(t){i[t]-=1}));return r?e.visit(e.SOURCE,c):(e.visit(e.ADD,c),e.visit(e.REM,l)),this._finish(e,u)},Xu._parameterCheck=function(t,e){var n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},Xu._finish=function(t,e){var n,r,i,o=this._counts,a=this._tuples||(this._tuples={}),s=e[0],u=e[1],c=t.fork(t.NO_SOURCE|t.NO_FIELDS);for(n in o)r=a[n],i=o[n]||0,!r&&i?(a[n]=r=ht({}),r[s]=n,r[u]=i,c.add.push(r)):0===i?(r&&c.rem.push(r),o[n]=null,a[n]=null):r[u]!==i&&(r[u]=i,c.mod.push(r));return c.modifies(e)},Yu.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};var Ku=Object(rt["y"])(Yu,ns);function Zu(t,e,n,r){for(var i,o,a=[],s={},u=t.length,c=0;c<u;++c)for(s[e]=o=t[c],i=0;i<u;++i)s[n]=t[i],r(s)&&(a.push(ht(s)),s={},s[e]=o);return a}Ku.transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=this.value,i=t.as||["a","b"],o=i[0],a=i[1],s=!r||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");return s?(r&&(n.rem=r),r=e.materialize(e.SOURCE).source,n.add=this.value=Zu(r,o,a,t.filter||rt["gb"])):n.mod=r,n.source=this.value,n.modifies(i)};var Ju={kde:tu,mixture:au,normal:Qs,lognormal:ou,uniform:hu},Qu="distributions",tc="function",ec="field";function nc(t,e){var n=t[tc];Object(rt["v"])(Ju,n)||Object(rt["n"])("Unknown distribution function: "+n);var r=Ju[n]();for(var i in t)i===ec?r.data((t.from||e()).map(t[i])):i===Qu?r[i](t[i].map((function(t){return nc(t,e)}))):typeof r[i]===tc&&r[i](t[i]);return r}function rc(t){ns.call(this,null,t)}var ic=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],oc={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:ic},{name:"weights",type:"number",array:!0}]};rc.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:ic.concat(oc)},{name:"as",type:"string",array:!0,default:["value","density"]}]};var ac=Object(rt["y"])(rc,ns);function sc(t){return function(){return t.materialize(t.SOURCE).source}}function uc(t,e){return t?t.map((function(t,n){return e[n]||Object(rt["h"])(t)})):null}function cc(t,e,n){var r,i,o,a,s,u,c=[],l=function(t){return t(a)};if(null==e)c.push(t.map(n));else for(r={},i=0,o=t.length;i<o;++i)a=t[i],s=e.map(l),u=r[s],u||(r[s]=u=[],u.dims=s,c.push(u)),u.push(n(a));return c}ac.transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=nc(t.distribution,sc(e)),i=t.steps||t.minsteps||25,o=t.steps||t.maxsteps||200,a=t.method||"pdf";"pdf"!==a&&"cdf"!==a&&Object(rt["n"])("Invalid density method: "+a),t.extent||r.data||Object(rt["n"])("Missing density extent parameter."),a=r[a];var s=t.as||["value","density"],u=t.extent||Object(rt["p"])(r.data()),c=Mu(a,u,i,o).map(t=>{var e={};return e[s[0]]=t[0],e[s[1]]=t[1],ht(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n};const lc="bin";function hc(t){ns.call(this,null,t)}hc.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:lc}]};const fc=Object(rt["y"])(hc,ns);function dc(t,e){return Object(rt["X"])(Object(rt["p"])(t,e))/30}function pc(t){kt.call(this,null,gc,t),this.modified(!0)}function gc(t){var e=t.expr;return this.value&&!t.modified("expr")?this.value:Object(rt["f"])(n=>e(n,t),Object(rt["g"])(e),Object(rt["h"])(e))}function mc(t){ns.call(this,[void 0,void 0],t)}fc.transform=function(t,e){if(this.value&&!t.modified()&&!e.changed())return e;const n=e.materialize(e.SOURCE).source,r=cc(e.source,t.groupby,rt["x"]),i=t.smooth||!1,o=t.field,a=t.step||dc(n,o),s=gt((t,e)=>o(t)-o(e)),u=t.as||lc,c=r.length;let l,h=1/0,f=-1/0,d=0;for(;d<c;++d){const t=r[d].sort(s);l=-1;for(const e of Bs(t,a,i,o))e<h&&(h=e),e>f&&(f=e),t[++l][u]=e}return this.value={start:h,stop:f,step:a},e.reflow(!0).modifies(u)},Object(rt["y"])(pc,kt),mc.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};var vc=Object(rt["y"])(mc,ns);function yc(t,e){kt.call(this,t),this.parent=e,this.count=0}vc.transform=function(t,e){var n,r=this.value,i=t.field,o=r[0],a=r[1];if(n=e.changed()||e.modified(i.fields)||t.modified("field"),(n||null==o)&&(o=1/0,a=-1/0),e.visit(n?e.SOURCE:e.ADD,(function(t){var e=Object(rt["cb"])(i(t));null!=e&&(e<o&&(o=e),e>a&&(a=e))})),!Number.isFinite(o)||!Number.isFinite(a)){let t=Object(rt["h"])(i);t&&(t=` for field "${t}"`),e.dataflow.warn(`Infinite extent${t}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]};var bc=Object(rt["y"])(yc,kt);function xc(t){ns.call(this,{},t),this._keys=Object(rt["s"])();const e=this._targets=[];e.active=0,e.forEach=t=>{for(let n=0,r=e.active;n<r;++n)t(e[n],n,e)}}bc.connect=function(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},bc.add=function(t){this.count+=1,this.value.add.push(t)},bc.rem=function(t){this.count-=1,this.value.rem.push(t)},bc.mod=function(t){this.value.mod.push(t)},bc.init=function(t){this.value.init(t,t.NO_SOURCE)},bc.evaluate=function(){return this.value};const wc=Object(rt["y"])(xc,ns);function _c(t){kt.call(this,null,Oc,t)}function Oc(t){return this.value&&!t.modified()?this.value:Object(rt["A"])(t.name)?Object(rt["i"])(t.name).map((function(t){return Object(rt["t"])(t)})):Object(rt["t"])(t.name,t.as)}function Sc(t){ns.call(this,Object(rt["s"])(),t)}wc.activate=function(t){this._targets[this._targets.active++]=t},wc.subflow=function(t,e,n,r){let i,o,a=this.value,s=Object(rt["v"])(a,t)&&a[t];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=r||(o=this._group[t])&&o.tuple,i=n.dataflow,s=new yc(n.fork(n.NO_SOURCE),this),i.add(s).connect(e(i,t,o)),a[t]=s,this.activate(s)),s},wc.clean=function(){const t=this.value;for(const e in t)if(0===t[e].count){const n=t[e].detachSubflow;n&&n(),delete t[e]}},wc.initTargets=function(){const t=this._targets,e=t.length;for(let n=0;n<e&&null!=t[n];++n)t[n]=null;t.active=0},wc.transform=function(t,e){const n=e.dataflow,r=t.key,i=t.subflow,o=this._keys,a=t.modified("key"),s=t=>this.subflow(t,i,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,t=>{const e=ct(t),n=o.get(e);void 0!==n&&(o.delete(e),s(n).rem(t))}),e.visit(e.ADD,t=>{const e=r(t);o.set(ct(t),e),s(e).add(t)}),a||e.modified(r.fields)?e.visit(e.MOD,t=>{const e=ct(t),n=o.get(e),i=r(t);n===i?s(i).mod(t):(o.set(e,i),s(n).rem(t),s(i).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,t=>{s(o.get(ct(t))).mod(t)}),a&&e.visit(e.REFLOW,t=>{const e=ct(t),n=o.get(e),i=r(t);n!==i&&(o.set(e,i),s(n).rem(t),s(i).add(t))}),e.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),e},Object(rt["y"])(_c,kt),Sc.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};var Cc=Object(rt["y"])(Sc,ns);function kc(t){ns.call(this,[],t)}Cc.transform=function(t,e){var n=e.dataflow,r=this.value,i=e.fork(),o=i.add,a=i.rem,s=i.mod,u=t.expr,c=!0;function l(e){var n=ct(e),i=u(e,t),l=r.get(n);i&&l?(r.delete(n),o.push(e)):i||l?c&&i&&!l&&s.push(e):(r.set(n,1),a.push(e))}return e.visit(e.REM,(function(t){var e=ct(t);r.has(e)?r.delete(e):a.push(t)})),e.visit(e.ADD,(function(e){u(e,t)?o.push(e):r.set(ct(e),1)})),e.visit(e.MOD,l),t.modified()&&(c=!1,e.visit(e.REFLOW,l)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i},kc.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};var Ac=Object(rt["y"])(kc,ns);function Tc(t){ns.call(this,[],t)}Ac.transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=uc(r,t.as||[]),o=t.index||null,a=i.length;return n.rem=this.value,e.visit(e.SOURCE,(function(t){for(var e,s,u,c=r.map(e=>e(t)),l=c.reduce((t,e)=>Math.max(t,e.length),0),h=0;h<l;++h){for(s=ft(t),e=0;e<a;++e)s[i[e]]=null==(u=c[e][h])?null:u;o&&(s[o]=h),n.add.push(s)}})),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)},Tc.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};var Ec=Object(rt["y"])(Tc,ns);function jc(t){ns.call(this,null,t)}Ec.transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map(rt["h"]),o=t.as||["key","value"],a=o[0],s=o[1],u=r.length;return n.rem=this.value,e.visit(e.SOURCE,(function(t){for(var e,o=0;o<u;++o)e=ft(t),e[a]=i[o],e[s]=r[o](t),n.add.push(e)})),this.value=n.source=n.add,n.modifies(o)},jc.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};var Dc=Object(rt["y"])(jc,ns);function Mc(t){ns.call(this,[],t)}Dc.transform=function(t,e){var n=t.expr,r=t.as,i=t.modified(),o=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)||e.modified(r)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(o,e=>e[r]=n(e,t))};var Nc=Object(rt["y"])(Mc,ns);function Ic(t,e){let n=0,r=0;if(void 0===e)for(let i of t)null!=i&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}Nc.transform=function(t,e){var n,r,i,o=this.value,a=e.fork(e.ALL),s=t.size-o.length,u=t.generator;if(s>0){for(n=[];--s>=0;)n.push(i=ht(u(t))),o.push(i);a.add=a.add.length?a.materialize(a.ADD).add.concat(n):n}else r=o.slice(0,-s),a.rem=a.rem.length?a.materialize(a.REM).rem.concat(r):r,o=o.slice(-s);return a.source=this.value=o,a};var Rc={value:"value",median:Su,mean:Ic,min:Cs,max:Ss},Fc=[];function Pc(t){ns.call(this,[],t)}Pc.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};var $c=Object(rt["y"])(Pc,ns);function Lc(t){var e,n=t.method||Rc.value;if(null!=Rc[n])return n===Rc.value?(e=void 0!==t.value?t.value:0,function(){return e}):Rc[n];Object(rt["n"])("Unrecognized imputation method: "+n)}function zc(t){var e=t.field;return function(t){return t?e(t):NaN}}function Bc(t,e,n,r){var i,o,a,s,u,c,l,h,f=function(t){return t(h)},d=[],p=r?r.slice():[],g={},m={};for(p.forEach((function(t,e){g[t]=e+1})),s=0,l=t.length;s<l;++s)h=t[s],c=n(h),u=g[c]||(g[c]=p.push(c)),o=(i=e?e.map(f):Fc)+"",(a=m[o])||(a=m[o]=[],d.push(a),a.values=i),a[u-1]=h;return d.domain=p,d}function Uc(t){Fu.call(this,t)}$c.transform=function(t,e){var n,r,i,o,a,s,u,c,l,h,f=e.fork(e.ALL),d=Lc(t),p=zc(t),g=Object(rt["h"])(t.field),m=Object(rt["h"])(t.key),v=(t.groupby||[]).map(rt["h"]),y=Bc(e.source,t.groupby,t.key,t.keyvals),b=[],x=this.value,w=y.domain.length;for(a=0,c=y.length;a<c;++a)for(n=y[a],i=n.values,r=NaN,u=0;u<w;++u)if(null==n[u]){for(o=y.domain[u],h={_impute:!0},s=0,l=i.length;s<l;++s)h[v[s]]=i[s];h[m]=o,h[g]=Number.isNaN(r)?r=d(n,p):r,b.push(ht(h))}return b.length&&(f.add=f.materialize(f.ADD).add.concat(b)),x.length&&(f.rem=f.materialize(f.REM).rem.concat(x)),this.value=b,f},Uc.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ds},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var Wc=Object(rt["y"])(Uc,Fu);function Vc(t){ns.call(this,null,t)}Wc.transform=function(t,e){var n,r=this,i=t.modified();return r.value&&(i||e.modified(r._inputs,!0))?(n=r.value=i?r.init(t):{},e.visit(e.SOURCE,(function(t){r.add(t)}))):(n=r.value=r.value||this.init(t),e.visit(e.REM,(function(t){r.rem(t)})),e.visit(e.ADD,(function(t){r.add(t)}))),r.changes(),e.visit(e.SOURCE,(function(t){Object(rt["o"])(t,n[r.cellkey(t)].tuple)})),e.reflow(i).modifies(this._outputs)},Wc.changes=function(){var t,e,n=this._adds,r=this._mods;for(t=0,e=this._alen;t<e;++t)this.celltuple(n[t]),n[t]=null;for(t=0,e=this._mlen;t<e;++t)this.celltuple(r[t]),r[t]=null;this._alen=this._mlen=0},Vc.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};var Hc=Object(rt["y"])(Vc,ns);function qc(t){kt.call(this,null,Gc,t)}function Gc(t){return this.value&&!t.modified()?this.value:Object(rt["I"])(t.fields,t.flat)}function Xc(t){ns.call(this,[],t),this._pending=null}Hc.transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=cc(r,t.groupby,t.field),o=(t.groupby||[]).map(rt["h"]),a=t.bandwidth,s=t.cumulative?"cdf":"pdf",u=t.as||["value","density"],c=[];let l=t.extent,h=t.steps||t.minsteps||25,f=t.steps||t.maxsteps||200;"pdf"!==s&&"cdf"!==s&&Object(rt["n"])("Invalid density method: "+s),"shared"===t.resolve&&(l||(l=Object(rt["p"])(r,t.field)),h=f=t.steps||f),i.forEach(e=>{const n=tu(e,a)[s],r=t.counts?e.length:1,i=l||Object(rt["p"])(e);Mu(n,i,h,f).forEach(t=>{const n={};for(let r=0;r<o.length;++r)n[o[r]]=e.dims[r];n[u[0]]=t[0],n[u[1]]=t[1]*r,c.push(ht(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n},Object(rt["y"])(qc,kt);var Yc=Object(rt["y"])(Xc,ns);function Kc(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function Zc(t,e,n){n.forEach(ht);const r=e.fork(e.NO_FIELDS&e.NO_SOURCE);return r.rem=t.value,t.value=r.source=r.add=n,t._pending=null,r.rem.length&&r.clean(!0),r}function Jc(t){ns.call(this,{},t)}Yc.transform=function(t,e){const n=e.dataflow;if(this._pending)return Zc(this,e,this._pending);if(Kc(t))return e.StopPropagation;if(t.values)return Zc(this,e,n.parse(t.values,t.format));if(t.async){const e=n.request(t.url,t.format).then(t=>(this._pending=Object(rt["i"])(t.data),t=>t.touch(this)));return{async:e}}return n.request(t.url,t.format).then(t=>Zc(this,e,Object(rt["i"])(t.data)))},Jc.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};var Qc=Object(rt["y"])(Jc,ns);function tl(t){kt.call(this,null,el,t)}function el(t){if(this.value&&!t.modified())return this.value;var e,n,r,i=1/0,o=-1/0,a=t.extents;for(e=0,n=a.length;e<n;++e)r=a[e],r[0]<i&&(i=r[0]),r[1]>o&&(o=r[1]);return[i,o]}function nl(t){kt.call(this,null,rl,t)}function rl(t){return this.value&&!t.modified()?this.value:t.values.reduce((function(t,e){return t.concat(e)}),[])}function il(t){ns.call(this,null,t)}function ol(t){Fu.call(this,t)}Qc.transform=function(t,e){var n,r,i,o=e,a=t.as,s=t.fields,u=t.index,c=t.values,l=null==t.default?null:t.default,h=t.modified(),f=h?e.SOURCE:e.ADD,d=s.length;return c?(r=c.length,d>1&&!a&&Object(rt["n"])('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==d*r&&Object(rt["n"])('The "as" parameter has too few output field names.'),a=a||c.map(rt["h"]),n=function(t){for(var e,n,i=0,o=0;i<d;++i)if(n=u.get(s[i](t)),null==n)for(e=0;e<r;++e,++o)t[a[o]]=l;else for(e=0;e<r;++e,++o)t[a[o]]=c[e](n)}):(a||Object(rt["n"])("Missing output field names."),n=function(t){for(var e,n=0;n<d;++n)e=u.get(s[n](t)),t[a[n]]=null==e?l:e}),h?o=e.reflow(!0):(i=s.some((function(t){return e.modified(t.fields)})),f|=i?e.MOD:0),e.visit(f,n),o.modifies(a)},Object(rt["y"])(tl,kt),Object(rt["y"])(nl,kt),Object(rt["y"])(il,ns),il.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)},ol.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:ds,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var al=Object(rt["y"])(ol,Fu);function sl(t,e){var n=t.field,r=t.value,i=("count"===t.op?"__count__":t.op)||"sum",o=Object(rt["g"])(n).concat(Object(rt["g"])(r)),a=cl(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:a.map((function(){return i})),fields:a.map((function(t){return ul(t,n,r,o)})),as:a.map((function(t){return t+""})),modified:t.modified.bind(t)}}function ul(t,e,n,r){return Object(rt["f"])((function(r){return e(r)===t?n(r):NaN}),r,t+"")}function cl(t,e,n){var r={},i=[];return n.visit(n.SOURCE,(function(e){var n=t(e);r[n]||(r[n]=1,i.push(n))})),i.sort((function(t,e){return(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0)})),e?i.slice(0,e):i}function ll(t){xc.call(this,t)}al._transform=al.transform,al.transform=function(t,e){return this._transform(sl(t,e),e)};const hl=Object(rt["y"])(ll,xc);function fl(t){ns.call(this,null,t)}hl.transform=function(t,e){const n=t.subflow,r=t.field,i=t=>this.subflow(ct(t),n,e,t);return(t.modified("field")||r&&e.modified(Object(rt["g"])(r)))&&Object(rt["n"])("PreFacet does not support field modification."),this.initTargets(),r?(e.visit(e.MOD,t=>{const e=i(t);r(t).forEach(t=>e.mod(t))}),e.visit(e.ADD,t=>{const e=i(t);r(t).forEach(t=>e.add(ht(t)))}),e.visit(e.REM,t=>{const e=i(t);r(t).forEach(t=>e.rem(t))})):(e.visit(e.MOD,t=>i(t).mod(t)),e.visit(e.ADD,t=>i(t).add(t)),e.visit(e.REM,t=>i(t).rem(t))),e.clean()&&e.runAfter(()=>this.clean()),e},fl.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};var dl=Object(rt["y"])(fl,ns);function pl(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e[r[i]]=n[i](t);return e}function gl(t){ns.call(this,null,t)}dl.transform=function(t,e){var n,r,i=t.fields,o=uc(t.fields,t.as||[]),a=i?function(t,e){return pl(t,e,i,o)}:dt;return this.value?r=this.value:(e=e.addAll(),r=this.value={}),n=e.fork(e.NO_SOURCE),e.visit(e.REM,(function(t){var e=ct(t);n.rem.push(r[e]),r[e]=null})),e.visit(e.ADD,(function(t){var e=a(t,ht({}));r[ct(t)]=e,n.add.push(e)})),e.visit(e.MOD,(function(t){n.mod.push(a(t,r[ct(t)]))})),n};var ml=Object(rt["y"])(gl,ns);ml.transform=function(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation};var vl=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);while(++r<i)o[r]=t+r*n;return o};function yl(t){ns.call(this,null,t)}yl.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var bl=Object(rt["y"])(yl,ns),xl=1e-14;function wl(t){ns.call(this,null,t)}bl.transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const i=e.materialize(e.SOURCE).source,o=cc(i,t.groupby,t.field),a=(t.groupby||[]).map(rt["h"]),s=[],u=t.step||.01,c=t.probs||vl(u/2,1-xl,u),l=c.length;return o.forEach(t=>{const e=Ms(t,c);for(let n=0;n<l;++n){const i={};for(let e=0;e<a.length;++e)i[a[e]]=t.dims[e];i[r[0]]=c[n],i[r[1]]=e[n],s.push(ht(i))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n};var _l=Object(rt["y"])(wl,ns);function Ol(t){ns.call(this,[],t),this.count=0}_l.transform=function(t,e){var n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,t=>{var e=ct(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,t=>{var e=ft(t);r[ct(t)]=e,n.add.push(e)}),e.visit(e.MOD,t=>{var e,i=r[ct(t)];for(e in t)i[e]=t[e],n.modifies(e);n.mod.push(i)})),n},Ol.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};var Sl=Object(rt["y"])(Ol,ns);function Cl(t){ns.call(this,null,t)}Sl.transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,o=this.value,a=this.count,s=0,u=o.reduce((function(t,e){return t[ct(e)]=1,t}),{});function c(t){var e,r;o.length<i?o.push(t):(r=~~((a+1)*$s()),r<o.length&&r>=s&&(e=o[r],u[ct(e)]&&n.rem.push(e),o[r]=t)),++a}if(e.rem.length&&(e.visit(e.REM,(function(t){var e=ct(t);u[e]&&(u[e]=-1,n.rem.push(t)),--a})),o=o.filter((function(t){return-1!==u[ct(t)]}))),(e.rem.length||r)&&o.length<i&&e.source&&(s=a=o.length,e.visit(e.SOURCE,(function(t){u[ct(t)]||c(t)})),s=-1),r&&o.length>i){for(var l=0,h=o.length-i;l<h;++l)u[ct(o[l])]=-1,n.rem.push(o[l]);o=o.slice(h)}return e.mod.length&&e.visit(e.MOD,(function(t){u[ct(t)]&&n.mod.push(t)})),e.add.length&&e.visit(e.ADD,c),(e.add.length||s<0)&&(n.add=o.filter((function(t){return!u[ct(t)]}))),this.count=a,this.value=n.source=o,n},Cl.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};var kl=Object(rt["y"])(Cl,ns);function Al(t){ns.call(this,null,t),this.modified(!0)}kl.transform=function(t,e){if(!this.value||t.modified()){var n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=vl(t.start,t.stop,t.step||1).map((function(t){var e={};return e[r]=t,ht(e)})),n.add=e.add.concat(this.value),n}};var Tl=Object(rt["y"])(Al,ns);function El(t){ns.call(this,null,t)}Tl.transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation};const jl=["unit0","unit1"];El.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Tn,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:jl}]};var Dl=Object(rt["y"])(El,ns);function Ml(t){ns.call(this,Object(rt["s"])(),t)}Dl.transform=function(t,e){var n=t.field,r=!1!==t.interval,i="utc"===t.timezone,o=this._floor(t,e),a=(i?Qr:Jr)(o.unit).offset,s=t.as||jl,u=s[0],c=s[1],l=o.start||1/0,h=o.stop||-1/0,f=o.step,d=e.ADD;return(t.modified()||e.modified(Object(rt["g"])(n)))&&(e=e.reflow(!0),d=e.SOURCE,l=1/0,h=-1/0),e.visit(d,(function(t){var e,i,s=n(t);null==s?(t[u]=null,r&&(t[c]=null)):(t[u]=e=i=o(s),r&&(t[c]=i=a(e,f)),e<l&&(l=e),i>h&&(h=i))})),o.start=l,o.stop=h,e.modifies(r?s:u)},Dl._floor=function(t,e){const n="utc"===t.timezone;let{units:r,step:i}=t.units?{units:t.units,step:t.step||1}:Ci({extent:t.extent||Object(rt["p"])(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins});r=jn(r);const o=this.value||{},a=(n?Er:kr)(r,i);return a.unit=Object(rt["U"])(r),a.units=r,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a};var Nl=Object(rt["y"])(Ml,ns);function Il(t){ns.call(this,null,t)}Nl.transform=function(t,e){var n=e.dataflow,r=t.field,i=this.value,o=!0;function a(t){i.set(r(t),t)}return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,a)):e.changed()?(e.visit(e.REM,(function(t){i.delete(r(t))})),e.visit(e.ADD,a)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()};var Rl=Object(rt["y"])(Il,ns);function Fl(t,e,n,r){let i=Pl[t](e,n);return{init:i.init||rt["kb"],update:function(t,e){e[r]=i.next(t)}}}Rl.transform=function(t,e){var n=!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields);n&&(this.value=(t.sort?e.source.slice().sort(gt(t.sort)):e.source).map(t.field))};const Pl={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{let n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{let n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){let t=Pl.rank(),e=t.next;return{init:t.init,next:t=>(e(t)-1)/(t.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{let n=e.index,r=e.data,i=e.compare;if(t<n){while(n+1<r.length&&!i(r[n],r[n+1]))++n;t=n}return(1+t)/r.length}}},ntile:function(t,e){e=+e,e>0||Object(rt["n"])("ntile num must be greater than zero.");let n=Pl.cume_dist(),r=n.next;return{init:n.init,next:t=>Math.ceil(e*r(t))}},lag:function(t,e){return e=+e||1,{next:n=>{let r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{let r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||Object(rt["n"])("nth_value nth must be greater than zero."),{next:n=>{let r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{let r=t(n.data[n.index]);return null!=r?e=r:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:r=>{let i=r.data;return r.index<=n?e:(n=$l(t,i,r.index))<0?(n=i.length,e=null):e=t(i[n])}}}};function $l(t,e,n){for(let r=e.length;n<r;++n){let r=t(e[n]);if(null!=r)return n}return-1}var Ll=Object.keys(Pl);function zl(t){let e=this,n=Object(rt["i"])(t.ops),r=Object(rt["i"])(t.fields),i=Object(rt["i"])(t.params),o=Object(rt["i"])(t.as),a=e.outputs=[],s=e.windows=[],u={},c={},l=!0,h=[],f=[];function d(t){Object(rt["i"])(Object(rt["g"])(t)).forEach(t=>u[t]=1)}d(t.sort),n.forEach((function(t,e){let n=r[e],u=Object(rt["h"])(n),p=cs(t,u,o[e]);if(d(n),a.push(p),Object(rt["v"])(Pl,t))s.push(Fl(t,r[e],i[e],p));else{if(null==n&&"count"!==t&&Object(rt["n"])("Null aggregate field specified."),"count"===t)return void h.push(p);l=!1;let e=c[u];e||(e=c[u]=[],e.field=n,f.push(e)),e.push(gs(t,p))}})),(h.length||f.length)&&(e.cell=Ul(f,h,l)),e.inputs=Object.keys(u)}const Bl=zl.prototype;function Ul(t,e,n){t=t.map(t=>_s(t,t.field));let r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new t[a](r);if(r.store)var s=r.data=new Iu;return r.add=function(t){if(r.num+=1,!n){s&&s.add(t);for(let e=0;e<i;++e)o[e].add(o[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){s&&s.rem(t);for(let e=0;e<i;++e)o[e].rem(o[e].get(t),t)}},r.set=function(t){let i,a;for(s&&s.values(),i=0,a=e.length;i<a;++i)t[e[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(t)},r.init=function(){r.num=0,s&&s.reset();for(let t=0;t<i;++t)o[t].init()},r}function Wl(t){ns.call(this,{},t),this._mlen=0,this._mods=[]}Bl.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()},Bl.update=function(t,e){let n,r=this,i=r.cell,o=r.windows,a=t.data,s=o&&o.length;if(i){for(n=t.p0;n<t.i0;++n)i.rem(a[n]);for(n=t.p1;n<t.i1;++n)i.add(a[n]);i.set(e)}for(n=0;n<s;++n)o[n].update(t,e)},Wl.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ll.concat(ds)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var Vl=Object(rt["y"])(Wl,ns);function Hl(t,e,n,r){var i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=t.data(n),u=s.length,c=0,l=o?si(i):null,h={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||Object(rt["l"])(-1)};for(e.init();c<u;++c)ql(h,a,c,u),o&&Gl(h,l),e.update(h,s[c])}function ql(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function Gl(t,e){var n=t.i0,r=t.i1-1,i=t.compare,o=t.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(t.i0=e.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(t.i1=e.right(o,o[r]))}Vl.transform=function(t,e){var n,r,i=this,o=i.state,a=t.modified(),s=gt(t.sort);this.stamp=e.stamp,o&&!a||(o=i.state=new zl(t));var u=us(t.groupby);function c(t){return i.group(u(t))}for(a||e.modified(o.inputs)?(i.value={},e.visit(e.SOURCE,(function(t){c(t).add(t)}))):(e.visit(e.REM,(function(t){c(t).remove(t)})),e.visit(e.ADD,(function(t){c(t).add(t)}))),n=0,r=i._mlen;n<r;++n)Hl(i._mods[n],o,s,t);return i._mlen=0,i._mods=[],e.reflow(a).modifies(o.outputs)},Vl.group=function(t){var e=this,n=e.value[t];return n||(n=e.value[t]=Bu(ct),n.stamp=-1),n.stamp<e.stamp&&(n.stamp=e.stamp,e._mods[e._mlen++]=n),n};const Xl="top",Yl="left",Kl="right",Zl="bottom",Jl="top-left",Ql="top-right",th="bottom-left",eh="bottom-right",nh="start",rh="middle",ih="end",oh="x",ah="y",sh="group",uh="axis",ch="title",lh="frame",hh="scope",fh="legend",dh="row-header",ph="row-footer",gh="row-title",mh="column-header",vh="column-footer",yh="column-title",bh="padding",xh="symbol",wh="fit",_h="fit-x",Oh="fit-y",Sh="pad",Ch="none",kh="all",Ah="each",Th="flush",Eh="column",jh="row";var Dh=0;function Mh(){Dh=0}const Nh="p_";function Ih(t){return t&&t.gradient}function Rh(t,e,n){let r=t.id,i=t.gradient,o="radial"===i?Nh:"";return r||(r=t.id="gradient_"+Dh++,"radial"===i?(t.x1=Fh(t.x1,.5),t.y1=Fh(t.y1,.5),t.r1=Fh(t.r1,0),t.x2=Fh(t.x2,.5),t.y2=Fh(t.y2,.5),t.r2=Fh(t.r2,.5),o=Nh):(t.x1=Fh(t.x1,0),t.y1=Fh(t.y1,0),t.x2=Fh(t.x2,1),t.y2=Fh(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+o+r+")"}function Fh(t,e){return null!=t?t:e}var Ph=function(t,e){var n,r=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}};function $h(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Lh(t){this._context=t}Lh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$h(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$h(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var zh=function(t){return new Lh(t)},Bh=function(){};function Uh(t){this._context=t}Uh.prototype={areaStart:Bh,areaEnd:Bh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:$h(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Wh=function(t){return new Uh(t)};function Vh(t){this._context=t}Vh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:$h(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Hh=function(t){return new Vh(t)};function qh(t,e){this._basis=new Lh(t),this._beta=e}qh.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0){var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;while(++u<=n)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s))}this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Gh=function t(e){function n(t){return 1===e?new Lh(t):new qh(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Xh(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Yh(t,e){this._context=t,this._k=(1-e)/6}Yh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Xh(this,this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Xh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Kh=function t(e){function n(t){return new Yh(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Zh(t,e){this._context=t,this._k=(1-e)/6}Zh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Jh=function t(e){function n(t){return new Zh(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Qh(t,e){this._context=t,this._k=(1-e)/6}Qh.prototype={areaStart:Bh,areaEnd:Bh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Xh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var tf=function t(e){function n(t){return new Qh(t,e)}return n.tension=function(e){return t(+e)},n}(0),ef=Math.abs,nf=Math.atan2,rf=Math.cos,of=Math.max,af=Math.min,sf=Math.sin,uf=Math.sqrt,cf=1e-12,lf=Math.PI,hf=lf/2,ff=2*lf;function df(t){return t>1?0:t<-1?lf:Math.acos(t)}function pf(t){return t>=1?hf:t<=-1?-hf:Math.asin(t)}function gf(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>cf){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>cf){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function mf(t,e){this._context=t,this._alpha=e}mf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:gf(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var vf=function t(e){function n(t){return e?new mf(t,e):new Yh(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function yf(t,e){this._context=t,this._alpha=e}yf.prototype={areaStart:Bh,areaEnd:Bh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:gf(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var bf=function t(e){function n(t){return e?new yf(t,e):new Qh(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function xf(t,e){this._context=t,this._alpha=e}xf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gf(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var wf=function t(e){function n(t){return e?new xf(t,e):new Zh(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function _f(t){this._context=t}_f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};var Of=function(t){return new _f(t)};function Sf(t){this._context=t}Sf.prototype={areaStart:Bh,areaEnd:Bh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Cf=function(t){return new Sf(t)};function kf(t){return t<0?-1:1}function Af(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(kf(o)+kf(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Tf(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ef(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function jf(t){this._context=t}function Df(t){this._context=new Mf(t)}function Mf(t){this._context=t}function Nf(t){return new jf(t)}function If(t){return new Df(t)}function Rf(t){this._context=t}function Ff(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}jf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ef(this,this._t0,Tf(this,this._t0));break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ef(this,Tf(this,n=Af(this,t,e)),n);break;default:Ef(this,this._t0,n=Af(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Df.prototype=Object.create(jf.prototype)).point=function(t,e){jf.prototype.point.call(this,e,t)},Mf.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Rf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Ff(t),i=Ff(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Pf=function(t){return new Rf(t)};function $f(t,e){this._context=t,this._t=e}$f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}this._x=t,this._y=e}};var Lf=function(t){return new $f(t,.5)};function zf(t){return new $f(t,0)}function Bf(t){return new $f(t,1)}var Uf={basis:{curve:zh},"basis-closed":{curve:Wh},"basis-open":{curve:Hh},bundle:{curve:Gh,tension:"beta",value:.85},cardinal:{curve:Kh,tension:"tension",value:0},"cardinal-open":{curve:Jh,tension:"tension",value:0},"cardinal-closed":{curve:tf,tension:"tension",value:0},"catmull-rom":{curve:vf,tension:"alpha",value:.5},"catmull-rom-closed":{curve:bf,tension:"alpha",value:.5},"catmull-rom-open":{curve:wf,tension:"alpha",value:.5},linear:{curve:Of},"linear-closed":{curve:Cf},monotone:{horizontal:If,vertical:Nf},natural:{curve:Pf},step:{curve:Lf},"step-after":{curve:Bf},"step-before":{curve:zf}};function Wf(t,e,n){var r=Object(rt["v"])(Uf,t)&&Uf[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var Vf={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Hf=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],qf=function(t){var e,n,r,i,o,a,s,u,c,l,h,f=[];for(e=t.slice().replace(Hf[0],"###$1").split(Hf[1]).slice(1),u=0,l=e.length;u<l;++u){for(n=e[u],r=n.slice(1).trim().replace(Hf[2],"$1###$2").split(Hf[3]),a=n.charAt(0),i=[a],c=0,h=r.length;c<h;++c)(o=+r[c])===o&&i.push(o);if(s=Vf[a.toLowerCase()],i.length-1>s)for(c=1,h=i.length;c<h;c+=s)f.push([a].concat(i.slice(c,c+s)));else f.push(i)}return f};const Gf=Math.PI/180,Xf=1e-14,Yf=Math.PI/2,Kf=2*Math.PI,Zf=Math.sqrt(3)/2;var Jf={},Qf={},td=[].join;function ed(t,e,n,r,i,o,a,s,u){var c=td.call(arguments);if(Jf[c])return Jf[c];var l=a*Gf,h=Math.sin(l),f=Math.cos(l);n=Math.abs(n),r=Math.abs(r);var d=f*(s-t)*.5+h*(u-e)*.5,p=f*(u-e)*.5-h*(s-t)*.5,g=d*d/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);var m=f/n,v=h/n,y=-h/r,b=f/r,x=m*s+v*u,w=y*s+b*u,_=m*t+v*e,O=y*t+b*e,S=(_-x)*(_-x)+(O-w)*(O-w),C=1/S-.25;C<0&&(C=0);var k=Math.sqrt(C);o==i&&(k=-k);var A=.5*(x+_)-k*(O-w),T=.5*(w+O)+k*(_-x),E=Math.atan2(w-T,x-A),j=Math.atan2(O-T,_-A),D=j-E;D<0&&1===o?D+=Kf:D>0&&0===o&&(D-=Kf);for(var M=Math.ceil(Math.abs(D/(Yf+.001))),N=[],I=0;I<M;++I){var R=E+I*D/M,F=E+(I+1)*D/M;N[I]=[A,T,R,F,n,r,h,f]}return Jf[c]=N}function nd(t){var e=td.call(t);if(Qf[e])return Qf[e];var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=c*a,h=-u*s,f=u*a,d=c*s,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),v=Math.sin(o),y=.5*(o-i),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),w=n+p-x*g,_=r+g+x*p,O=n+m,S=r+v,C=O+x*v,k=S-x*m;return Qf[e]=[l*w+h*_,f*w+d*_,l*C+h*k,f*C+d*k,l*O+h*S,f*O+d*S]}var rd=["l",0,0,0,0,0,0,0];function id(t,e,n){var r=rd[0]=t[0];if("a"===r||"A"===r)rd[1]=e*t[1],rd[2]=n*t[2],rd[3]=t[3],rd[4]=t[4],rd[5]=t[5],rd[6]=e*t[6],rd[7]=n*t[7];else if("h"===r||"H"===r)rd[1]=e*t[1];else if("v"===r||"V"===r)rd[1]=n*t[1];else for(var i=1,o=t.length;i<o;++i)rd[i]=(i%2==1?e:n)*t[i];return rd}var od=function(t,e,n,r,i,o){var a,s,u,c,l,h=null,f=0,d=0,p=0,g=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),t.beginPath&&t.beginPath();for(var m=0,v=e.length;m<v;++m){switch(a=e[m],1===i&&1===o||(a=id(a,i,o)),a[0]){case"l":f+=a[1],d+=a[2],t.lineTo(f+n,d+r);break;case"L":f=a[1],d=a[2],t.lineTo(f+n,d+r);break;case"h":f+=a[1],t.lineTo(f+n,d+r);break;case"H":f=a[1],t.lineTo(f+n,d+r);break;case"v":d+=a[1],t.lineTo(f+n,d+r);break;case"V":d=a[1],t.lineTo(f+n,d+r);break;case"m":f+=a[1],d+=a[2],t.moveTo(f+n,d+r);break;case"M":f=a[1],d=a[2],t.moveTo(f+n,d+r);break;case"c":s=f+a[5],u=d+a[6],p=f+a[3],g=d+a[4],t.bezierCurveTo(f+a[1]+n,d+a[2]+r,p+n,g+r,s+n,u+r),f=s,d=u;break;case"C":f=a[5],d=a[6],p=a[3],g=a[4],t.bezierCurveTo(a[1]+n,a[2]+r,p+n,g+r,f+n,d+r);break;case"s":s=f+a[3],u=d+a[4],p=2*f-p,g=2*d-g,t.bezierCurveTo(p+n,g+r,f+a[1]+n,d+a[2]+r,s+n,u+r),p=f+a[1],g=d+a[2],f=s,d=u;break;case"S":s=a[3],u=a[4],p=2*f-p,g=2*d-g,t.bezierCurveTo(p+n,g+r,a[1]+n,a[2]+r,s+n,u+r),f=s,d=u,p=a[1],g=a[2];break;case"q":s=f+a[3],u=d+a[4],p=f+a[1],g=d+a[2],t.quadraticCurveTo(p+n,g+r,s+n,u+r),f=s,d=u;break;case"Q":s=a[3],u=a[4],t.quadraticCurveTo(a[1]+n,a[2]+r,s+n,u+r),f=s,d=u,p=a[1],g=a[2];break;case"t":s=f+a[1],u=d+a[2],null===h[0].match(/[QqTt]/)?(p=f,g=d):"t"===h[0]?(p=2*f-c,g=2*d-l):"q"===h[0]&&(p=2*f-p,g=2*d-g),c=p,l=g,t.quadraticCurveTo(p+n,g+r,s+n,u+r),f=s,d=u,p=f+a[1],g=d+a[2];break;case"T":s=a[1],u=a[2],p=2*f-p,g=2*d-g,t.quadraticCurveTo(p+n,g+r,s+n,u+r),f=s,d=u;break;case"a":ad(t,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+d+r]),f+=a[6],d+=a[7];break;case"A":ad(t,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],d=a[7];break;case"z":case"Z":t.closePath();break}h=a}};function ad(t,e,n,r){for(var i=ed(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),o=0;o<i.length;++o){var a=nd(i[o]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var sd=.5773502691896257,ud={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,Kf)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,o=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-o),t.lineTo(i,-o),t.lineTo(0,-n),t.lineTo(-i,-o),t.lineTo(-r,-o),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=Zf*n,i=r-n*sd,o=n/4;t.moveTo(0,-r-i),t.lineTo(-o,r-i),t.lineTo(o,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=Zf*n,i=r-n*sd;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Zf*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Zf*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Zf*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Zf*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function cd(t){return Object(rt["v"])(ud,t)?ud[t]:hd(t)}var ld={};function hd(t){if(!Object(rt["v"])(ld,t)){var e=qf(t);ld[t]={draw:function(t,n){od(t,e,0,0,Math.sqrt(n)/2)}}}return ld[t]}var fd=Math.PI,dd=2*fd,pd=1e-6,gd=dd-pd;function md(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function vd(){return new md}md.prototype=vd.prototype={constructor:md,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>pd)if(Math.abs(l*s-u*c)>pd&&i){var f=n-o,d=r-a,p=s*s+u*u,g=f*f+d*d,m=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((fd-Math.acos((p+h-g)/(2*m*v)))/2),b=y/v,x=y/m;Math.abs(b-1)>pd&&(this._+="L"+(t+b*c)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*d)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,n=+n,o=!!o;var a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>pd||Math.abs(this._y1-c)>pd)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%dd+dd),h>gd?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>pd&&(this._+="A"+n+","+n+",0,"+ +(h>=fd)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var yd=vd;const bd=.448084975506;function xd(t){return t.x}function wd(t){return t.y}function _d(t){return t.width}function Od(t){return t.height}function Sd(t){return"function"===typeof t?t:()=>+t}function Cd(t,e,n){return Math.max(e,Math.min(t,n))}var kd=function(){var t=xd,e=wd,n=_d,r=Od,i=Sd(0),o=i,a=i,s=i,u=null;function c(c,l,h){var f,d=null!=l?l:+t.call(this,c),p=null!=h?h:+e.call(this,c),g=+n.call(this,c),m=+r.call(this,c),v=Math.min(g,m)/2,y=Cd(+i.call(this,c),0,v),b=Cd(+o.call(this,c),0,v),x=Cd(+a.call(this,c),0,v),w=Cd(+s.call(this,c),0,v);if(u||(u=f=yd()),y<=0&&b<=0&&x<=0&&w<=0)u.rect(d,p,g,m);else{var _=d+g,O=p+m;u.moveTo(d+y,p),u.lineTo(_-b,p),u.bezierCurveTo(_-bd*b,p,_,p+bd*b,_,p+b),u.lineTo(_,O-w),u.bezierCurveTo(_,O-bd*w,_-bd*w,O,_-w,O),u.lineTo(d+x,O),u.bezierCurveTo(d+bd*x,O,d,O-bd*x,d,O-x),u.lineTo(d,p+y),u.bezierCurveTo(d,p+bd*y,d+bd*y,p,d+y,p),u.closePath()}if(f)return u=null,f+""||null}return c.x=function(e){return arguments.length?(t=Sd(e),c):t},c.y=function(t){return arguments.length?(e=Sd(t),c):e},c.width=function(t){return arguments.length?(n=Sd(t),c):n},c.height=function(t){return arguments.length?(r=Sd(t),c):r},c.cornerRadius=function(t,e,n,r){return arguments.length?(i=Sd(t),o=null!=e?Sd(e):i,s=null!=n?Sd(n):i,a=null!=r?Sd(r):o,c):i},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c},Ad=function(){var t,e,n,r,i,o,a,s,u=null;function c(t,e,n){var r=n/2;if(i){var c=a-e,l=t-o;if(c||l){var h=Math.sqrt(c*c+l*l),f=(c/=h)*s,d=(l/=h)*s,p=Math.atan2(l,c);u.moveTo(o-f,a-d),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Math.PI,p),u.lineTo(o+f,a+d),u.arc(o,a,s,p,p+Math.PI)}else u.arc(t,e,r,0,Kf);u.closePath()}else i=1;o=t,a=e,s=r}function l(o){var a,s,l,h=o.length,f=!1;for(null==u&&(u=l=yd()),a=0;a<=h;++a)!(a<h&&r(s=o[a],a,o))===f&&(f=!f)&&(i=0),f&&c(+t(s,a,o),+e(s,a,o),+n(s,a,o));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l},Td=function(t){return function(){return t}};function Ed(t){return t.innerRadius}function jd(t){return t.outerRadius}function Dd(t){return t.startAngle}function Md(t){return t.endAngle}function Nd(t){return t&&t.padAngle}function Id(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,h=s-o,f=h*u-l*c;if(!(f*f<cf))return f=(l*(e-o)-h*(t-i))/f,[t+f*u,e+f*c]}function Rd(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/uf(s*s+u*u),l=c*u,h=-c*s,f=t+l,d=e+h,p=n+l,g=r+h,m=(f+p)/2,v=(d+g)/2,y=p-f,b=g-d,x=y*y+b*b,w=i-o,_=f*g-p*d,O=(b<0?-1:1)*uf(of(0,w*w*x-_*_)),S=(_*b-y*O)/x,C=(-_*y-b*O)/x,k=(_*b+y*O)/x,A=(-_*y+b*O)/x,T=S-m,E=C-v,j=k-m,D=A-v;return T*T+E*E>j*j+D*D&&(S=k,C=A),{cx:S,cy:C,x01:-l,y01:-h,x11:S*(i/w-1),y11:C*(i/w-1)}}var Fd=function(){var t=Ed,e=jd,n=Td(0),r=null,i=Dd,o=Md,a=Nd,s=null;function u(){var u,c,l=+t.apply(this,arguments),h=+e.apply(this,arguments),f=i.apply(this,arguments)-hf,d=o.apply(this,arguments)-hf,p=ef(d-f),g=d>f;if(s||(s=u=yd()),h<l&&(c=h,h=l,l=c),h>cf)if(p>ff-cf)s.moveTo(h*rf(f),h*sf(f)),s.arc(0,0,h,f,d,!g),l>cf&&(s.moveTo(l*rf(d),l*sf(d)),s.arc(0,0,l,d,f,g));else{var m,v,y=f,b=d,x=f,w=d,_=p,O=p,S=a.apply(this,arguments)/2,C=S>cf&&(r?+r.apply(this,arguments):uf(l*l+h*h)),k=af(ef(h-l)/2,+n.apply(this,arguments)),A=k,T=k;if(C>cf){var E=pf(C/l*sf(S)),j=pf(C/h*sf(S));(_-=2*E)>cf?(E*=g?1:-1,x+=E,w-=E):(_=0,x=w=(f+d)/2),(O-=2*j)>cf?(j*=g?1:-1,y+=j,b-=j):(O=0,y=b=(f+d)/2)}var D=h*rf(y),M=h*sf(y),N=l*rf(w),I=l*sf(w);if(k>cf){var R,F=h*rf(b),P=h*sf(b),$=l*rf(x),L=l*sf(x);if(p<lf&&(R=Id(D,M,$,L,F,P,N,I))){var z=D-R[0],B=M-R[1],U=F-R[0],W=P-R[1],V=1/sf(df((z*U+B*W)/(uf(z*z+B*B)*uf(U*U+W*W)))/2),H=uf(R[0]*R[0]+R[1]*R[1]);A=af(k,(l-H)/(V-1)),T=af(k,(h-H)/(V+1))}}O>cf?T>cf?(m=Rd($,L,D,M,h,T,g),v=Rd(F,P,N,I,h,T,g),s.moveTo(m.cx+m.x01,m.cy+m.y01),T<k?s.arc(m.cx,m.cy,T,nf(m.y01,m.x01),nf(v.y01,v.x01),!g):(s.arc(m.cx,m.cy,T,nf(m.y01,m.x01),nf(m.y11,m.x11),!g),s.arc(0,0,h,nf(m.cy+m.y11,m.cx+m.x11),nf(v.cy+v.y11,v.cx+v.x11),!g),s.arc(v.cx,v.cy,T,nf(v.y11,v.x11),nf(v.y01,v.x01),!g))):(s.moveTo(D,M),s.arc(0,0,h,y,b,!g)):s.moveTo(D,M),l>cf&&_>cf?A>cf?(m=Rd(N,I,F,P,l,-A,g),v=Rd(D,M,$,L,l,-A,g),s.lineTo(m.cx+m.x01,m.cy+m.y01),A<k?s.arc(m.cx,m.cy,A,nf(m.y01,m.x01),nf(v.y01,v.x01),!g):(s.arc(m.cx,m.cy,A,nf(m.y01,m.x01),nf(m.y11,m.x11),!g),s.arc(0,0,l,nf(m.cy+m.y11,m.cx+m.x11),nf(v.cy+v.y11,v.cx+v.x11),g),s.arc(v.cx,v.cy,A,nf(v.y11,v.x11),nf(v.y01,v.x01),!g))):s.arc(0,0,l,w,x,g):s.lineTo(N,I)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-lf/2;return[rf(r)*n,sf(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:Td(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:Td(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"===typeof t?t:Td(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Td(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:Td(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"===typeof t?t:Td(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"===typeof t?t:Td(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u};function Pd(t){return t[0]}function $d(t){return t[1]}var Ld=function(){var t=Pd,e=$d,n=Td(!0),r=null,i=Of,o=null;function a(a){var s,u,c,l=a.length,h=!1;for(null==r&&(o=i(c=yd())),s=0;s<=l;++s)!(s<l&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(c)return o=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"===typeof e?e:Td(+e),a):t},a.y=function(t){return arguments.length?(e="function"===typeof t?t:Td(+t),a):e},a.defined=function(t){return arguments.length?(n="function"===typeof t?t:Td(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},zd=function(){var t=Pd,e=null,n=Td(0),r=$d,i=Td(!0),o=null,a=Of,s=null;function u(u){var c,l,h,f,d,p=u.length,g=!1,m=new Array(p),v=new Array(p);for(null==o&&(s=a(d=yd())),c=0;c<=p;++c){if(!(c<p&&i(f=u[c],c,u))===g)if(g=!g)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=l;--h)s.point(m[h],v[h]);s.lineEnd(),s.areaEnd()}g&&(m[c]=+t(f,c,u),v[c]=+n(f,c,u),s.point(e?+e(f,c,u):m[c],r?+r(f,c,u):v[c]))}if(d)return s=null,d+""||null}function c(){return Ld().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(t="function"===typeof n?n:Td(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"===typeof e?e:Td(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"===typeof t?t:Td(+t),u):e},u.y=function(t){return arguments.length?(n="function"===typeof t?t:Td(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"===typeof t?t:Td(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Td(+t),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(n)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"===typeof t?t:Td(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u},Bd={draw:function(t,e){var n=Math.sqrt(e/lf);t.moveTo(n,0),t.arc(0,0,n,0,ff)}},Ud=(Math.sqrt(1/3),Math.sin(lf/10)/Math.sin(7*lf/10)),Wd=(Math.sin(ff/10),Math.cos(ff/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){var t=Td(Bd),e=Td(64),n=null;function r(){var r;if(n||(n=r=yd()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"===typeof e?e:Td(e),r):t},r.size=function(t){return arguments.length?(e="function"===typeof t?t:Td(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r});function Vd(t,e){return null!=t?t:e}const Hd=t=>t.x||0,qd=t=>t.y||0,Gd=t=>t.width||0,Xd=t=>t.height||0,Yd=t=>(t.x||0)+(t.width||0),Kd=t=>(t.y||0)+(t.height||0),Zd=t=>t.startAngle||0,Jd=t=>t.endAngle||0,Qd=t=>t.padAngle||0,tp=t=>t.innerRadius||0,ep=t=>t.outerRadius||0,np=t=>t.cornerRadius||0,rp=t=>Vd(t.cornerRadiusTopLeft,t.cornerRadius)||0,ip=t=>Vd(t.cornerRadiusTopRight,t.cornerRadius)||0,op=t=>Vd(t.cornerRadiusBottomRight,t.cornerRadius)||0,ap=t=>Vd(t.cornerRadiusBottomLeft,t.cornerRadius)||0,sp=t=>Vd(t.size,64),up=t=>t.size||1,cp=t=>!(!1===t.defined),lp=t=>cd(t.shape||"circle"),hp=Fd().startAngle(Zd).endAngle(Jd).padAngle(Qd).innerRadius(tp).outerRadius(ep).cornerRadius(np),fp=zd().x(Hd).y1(qd).y0(Kd).defined(cp),dp=zd().y(qd).x1(Hd).x0(Yd).defined(cp),pp=Ld().x(Hd).y(qd).defined(cp),gp=kd().x(Hd).y(qd).width(Gd).height(Xd).cornerRadius(rp,ip,op,ap),mp=Wd().type(lp).size(sp),vp=Ad().x(Hd).y(qd).defined(cp).size(up);function yp(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function bp(t,e){return hp.context(t)(e)}function xp(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?dp:fp).curve(Wf(r,n.orient,n.tension)).context(t)(e)}function wp(t,e){var n=e[0],r=n.interpolate||"linear";return pp.curve(Wf(r,n.orient,n.tension)).context(t)(e)}function _p(t,e,n,r){return gp.context(t)(e,n,r)}function Op(t,e){return(e.mark.shape||e.shape).context(t)(e)}function Sp(t,e){return mp.context(t)(e)}function Cp(t,e){return vp.context(t)(e)}var kp=1;function Ap(){kp=1}var Tp=function(t,e,n){var r=e.clip,i=t._defs,o=e.clip_id||(e.clip_id="clip"+kp++),a=i.clipping[o]||(i.clipping[o]={id:o});return Object(rt["D"])(r)?a.path=r(null):yp(n)?a.path=_p(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"};function Ep(t){this.clear(),t&&this.union(t)}var jp=Ep.prototype;function Dp(t){this.mark=t,this.bounds=this.bounds||new Ep}function Mp(t){Dp.call(this,t),this.items=this.items||[]}function Np(t,e){if("undefined"!==typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}function Ip(){return"undefined"!==typeof Image?Image:null}function Rp(t){this._pending=0,this._loader=t||sa()}jp.clone=function(){return new Ep(this)},jp.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},jp.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},jp.equals=function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},jp.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},jp.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},jp.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},jp.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},jp.scale=function(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},jp.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},jp.rotate=function(t,e,n){const r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},jp.rotatedPoints=function(t,e,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(t),u=Math.sin(t),c=e-e*s+n*u,l=n-e*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*a+c,u*r+s*a+l,s*o-u*i+c,u*o+s*i+l,s*o-u*a+c,u*o+s*a+l]},jp.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},jp.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},jp.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},jp.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},jp.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},jp.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},jp.width=function(){return this.x2-this.x1},jp.height=function(){return this.y2-this.y1},Object(rt["y"])(Mp,Dp);var Fp=Rp.prototype;function Pp(t){t._pending+=1}function $p(t){t._pending-=1}Fp.pending=function(){return this._pending},Fp.sanitizeURL=function(t){var e=this;return Pp(e),e._loader.sanitize(t,{context:"href"}).then((function(t){return $p(e),t})).catch((function(){return $p(e),null}))},Fp.loadImage=function(t){const e=this,n=Ip();return Pp(e),e._loader.sanitize(t,{context:"image"}).then((function(t){const r=t.href;if(!r||!n)throw{url:r};const i=new n,o=Object(rt["v"])(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=o&&(i.crossOrigin=o),i.onload=()=>$p(e),i.onerror=()=>$p(e),i.src=r,i})).catch((function(t){return $p(e),{complete:!1,width:0,height:0,src:t&&t.url||""}}))},Fp.ready=function(){var t=this;return new Promise((function(e){function n(r){t.pending()?setTimeout((function(){n(!0)}),10):e(r)}n(!1)}))};var Lp=function(t,e,n){if(e.stroke&&0!==e.opacity&&0!==e.strokeOpacity){const r=null!=e.strokeWidth?+e.strokeWidth:1;t.expand(r+(n?zp(e,r):0))}return t};function zp(t,e){return t.strokeJoin&&"miter"!==t.strokeJoin?0:e}var Bp,Up,Wp,Vp=Kf-1e-8;function Hp(t){return Bp=t,Hp}function qp(){}function Gp(t,e){Bp.add(t,e)}function Xp(t,e){Gp(Up=t,Wp=e)}function Yp(t){Gp(t,Bp.y1)}function Kp(t){Gp(Bp.x1,t)}function Zp(t,e,n,r){const i=(t-e)/(t+n-2*e);0<i&&i<1&&r(t+(e-t)*i)}function Jp(t,e,n,r,i){const o=r-t+3*e-3*n,a=t+n-2*e,s=t-e;let u,c=0,l=0;Math.abs(o)>Xf?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),c=(-a+u)/o,l=(-a-u)/o)):c=.5*s/a,0<c&&c<1&&i(Qp(c,t,e,n,r)),0<l&&l<1&&i(Qp(l,t,e,n,r))}function Qp(t,e,n,r,i){const o=1-t,a=o*o,s=t*t;return a*o*e+3*a*t*n+3*o*s*r+s*t*i}Hp.beginPath=qp,Hp.closePath=qp,Hp.moveTo=Xp,Hp.lineTo=Xp,Hp.rect=function(t,e,n,r){Gp(t+n,e+r),Xp(t,e)},Hp.quadraticCurveTo=function(t,e,n,r){Zp(Up,t,n,Yp),Zp(Wp,e,r,Kp),Xp(n,r)},Hp.bezierCurveTo=function(t,e,n,r,i,o){Jp(Up,t,n,i,Yp),Jp(Wp,e,r,o,Kp),Xp(i,o)},Hp.arc=function(t,e,n,r,i,o){if(Up=n*Math.cos(i)+t,Wp=n*Math.sin(i)+e,Math.abs(i-r)>Vp)Gp(t-n,e-n),Gp(t+n,e+n);else{const a=r=>Gp(n*Math.cos(r)+t,n*Math.sin(r)+e);let s,u;if(a(r),a(i),i!==r)if(r%=Kf,r<0&&(r+=Kf),i%=Kf,i<0&&(i+=Kf),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=Kf,s=r-r%Yf,u=0;u<4&&s>i;++u,s-=Yf)a(s);else for(s=r-r%Yf+Yf,u=0;u<4&&s<i;++u,s+=Yf)a(s)}};var tg=(tg=Np(1,1))?tg.getContext("2d"):null;const eg=new Ep;function ng(t){return function(e,n){if(!tg)return!0;t(tg,e),eg.clear().union(e.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=eg;for(let t=i;t<=a;++t)for(let e=r;e<=o;++e)if(tg.isPointInPath(e,t))return!0;return!1}}function rg(t,e){return e.contains(t.x||0,t.y||0)}function ig(t,e){const n=t.x||0,r=t.y||0,i=t.width||0,o=t.height||0;return e.intersects(eg.set(n,r,n+i,r+o))}function og(t,e){const n=t.x||0,r=t.y||0,i=null!=t.x2?t.x2:n,o=null!=t.y2?t.y2:r;return ag(e,n,r,i,o)}function ag(t,e,n,r,i){const{x1:o,y1:a,x2:s,y2:u}=t,c=r-e,l=i-n;let h,f,d,p,g=0,m=1;for(p=0;p<4;++p){if(0===p&&(h=-c,f=-(o-e)),1===p&&(h=c,f=s-e),2===p&&(h=-l,f=-(a-n)),3===p&&(h=l,f=u-n),Math.abs(h)<1e-10&&f<0)return!1;if(d=f/h,h<0){if(d>m)return!1;d>g&&(g=d)}else if(h>0){if(d<g)return!1;d<m&&(m=d)}}return!0}var sg=function(t,e){t.globalCompositeOperation=e.blend||"source-over"},ug=function(t,e){return null==t?e:t};function cg(t,e){const n=e.length;for(let r=0;r<n;++r)t.addColorStop(e[r].offset,e[r].color);return t}var lg=function(t,e,n){const r=n.width(),i=n.height();let o;if("radial"===e.gradient)o=t.createRadialGradient(n.x1+ug(e.x1,.5)*r,n.y1+ug(e.y1,.5)*i,Math.max(r,i)*ug(e.r1,0),n.x1+ug(e.x2,.5)*r,n.y1+ug(e.y2,.5)*i,Math.max(r,i)*ug(e.r2,.5));else{const a=ug(e.x1,0),s=ug(e.y1,0),u=ug(e.x2,1),c=ug(e.y2,0);if(a!==u&&s!==c&&r!==i){const n=Np(Math.ceil(r),Math.ceil(i)),o=n.getContext("2d");return o.scale(r,i),o.fillStyle=cg(o.createLinearGradient(a,s,u,c),e.stops),o.fillRect(0,0,r,i),t.createPattern(n,"no-repeat")}o=t.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+u*r,n.y1+c*i)}return cg(o,e.stops)},hg=function(t,e,n){return Ih(n)?lg(t,n,e.bounds):n},fg=function(t,e,n){return n*=null==e.fillOpacity?1:e.fillOpacity,n>0&&(t.globalAlpha=n,t.fillStyle=hg(t,e,e.fill),!0)},dg=[],pg=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&(n*=null==e.strokeOpacity?1:e.strokeOpacity,n>0&&(t.globalAlpha=n,t.strokeStyle=hg(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||dg),t.lineDashOffset=e.strokeDashOffset||0),!0))};function gg(t,e){return t.zindex-e.zindex||t.index-e.index}function mg(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,o=[];for(n=0,r=i.length;n<r;++n)e=i[n],e.index=n,e.zindex&&o.push(e);return t.zdirty=!1,t.zitems=o.sort(gg)}function vg(t,e){var n,r,i=t.items;if(i&&i.length){var o=mg(t);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=o}for(n=0,r=i.length;n<r;++n)e(i[n])}}function yg(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var o=mg(t);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===o)for(i=t.items,r=i.length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function bg(t){return function(e,n,r){vg(n,(function(n){r&&!r.intersects(n.bounds)||wg(t,e,n,n)}))}}function xg(t){return function(e,n,r){!n.items.length||r&&!r.intersects(n.bounds)||wg(t,e,n.items[0],n.items)}}function wg(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(sg(e,n),n.fill&&fg(e,n,i)&&e.fill(),n.stroke&&pg(e,n,i)&&e.stroke()))}function _g(t){return t=t||rt["gb"],function(e,n,r,i,o,a){return r*=e.pixelRatio,i*=e.pixelRatio,yg(n,(function(n){var s=n.bounds;if((!s||s.contains(o,a))&&s)return t(e,n,r,i,o,a)?n:void 0}))}}function Og(t,e){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(a=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o))}}function Sg(t){return _g(Og(t))}function Cg(t,e){return"translate("+t+","+e+")"}function kg(t){return"rotate("+t+")"}function Ag(t,e){return"scale("+t+","+e+")"}function Tg(t){return Cg(t.x||0,t.y||0)}function Eg(t){return Cg(t.x||0,t.y||0)+(t.angle?" "+kg(t.angle):"")+(t.scaleX||t.scaleY?" "+Ag(t.scaleX||1,t.scaleY||1):"")}var jg=function(t,e,n){function r(t,n){t("transform",Eg(n)),t("d",e(null,n))}function i(t,n){var r=n.x||0,i=n.y||0;return e(Hp(t),n),Lp(t,n).translate(r,i),n.angle&&t.rotate(n.angle*Gf,r,i),t}function o(t,n){var r=n.x||0,i=n.y||0,o=n.angle||0;t.translate(r,i),o&&t.rotate(o*=Gf),t.beginPath(),e(t,n),o&&t.rotate(-o),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:r,bound:i,draw:bg(o),pick:Sg(o),isect:n||ng(o)}},Dg=jg("arc",bp);function Mg(t,e){var n,r,i="horizontal"===t[0].orient?e[1]:e[0],o="horizontal"===t[0].orient?"y":"x",a=t.length,s=1/0;while(--a>=0)!1!==t[a].defined&&(r=Math.abs(t[a][o]-i),r<s&&(s=r,n=t[a]));return n}function Ng(t,e){var n,r,i,o=Math.pow(t[0].strokeWidth||1,2),a=t.length;while(--a>=0)if(!1!==t[a].defined&&(n=t[a].x-e[0],r=t[a].y-e[1],i=n*n+r*r,i<o))return t[a];return null}function Ig(t,e){var n,r,i,o=t.length;while(--o>=0)if(!1!==t[o].defined&&(n=t[o].x-e[0],r=t[o].y-e[1],i=n*n+r*r,n=t[o].size||1,i<n*n))return t[o];return null}var Rg=function(t,e,n){function r(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))}function i(t,n){var r=n.items;return 0===r.length?t:(e(Hp(t),r),Lp(t,r[0]))}function o(t,n){t.beginPath(),e(t,n)}var a=Og(o);function s(t,e,n,r,i,o){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,o)?null:(n*=t.pixelRatio,r*=t.pixelRatio,a(t,s,n,r)?s[0]:null)}return{type:t,tag:"path",nested:!0,attr:r,bound:i,draw:xg(o),pick:s,isect:rg,tip:n}},Fg=Rg("area",xp,Mg),Pg=function(t,e){var n=e.clip;t.save(),Object(rt["D"])(n)?(t.beginPath(),n(t),t.clip()):$g(t,e.group)};function $g(t,e){t.beginPath(),yp(e)?_p(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function Lg(t){const e=ug(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function zg(t,e){t("transform",Tg(e))}function Bg(t,e){const n=Lg(e);t("d",_p(null,e,n,n))}function Ug(t,e){t("class","background"),t("aria-hidden",!0),Bg(t,e)}function Wg(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?Bg(t,e):t("d","")}function Vg(t,e,n){const r=e.clip?Tp(n,e,e):null;t("clip-path",r)}function Hg(t,e){if(!e.clip&&e.items){const n=e.items,r=n.length;for(let e=0;e<r;++e)t.union(n[e].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),Lp(t,e),t.translate(e.x||0,e.y||0)}function qg(t,e,n,r){const i=Lg(e);t.beginPath(),_p(t,e,(n||0)+i,(r||0)+i)}const Gg=Og(qg),Xg=Og(qg,!1);function Yg(t,e,n){vg(e,e=>{const r=e.x||0,i=e.y||0,o=e.strokeForeground,a=null==e.opacity?1:e.opacity;(e.stroke||e.fill)&&a&&(qg(t,e,r,i),sg(t,e),e.fill&&fg(t,e,a)&&t.fill(),e.stroke&&!o&&pg(t,e,a)&&t.stroke()),t.save(),t.translate(r,i),e.clip&&$g(t,e),n&&n.translate(-r,-i),vg(e,e=>{this.draw(t,e,n)}),n&&n.translate(r,i),t.restore(),o&&e.stroke&&a&&(qg(t,e,r,i),sg(t,e),pg(t,e,a)&&t.stroke())})}function Kg(t,e,n,r,i,o){if(e.bounds&&!e.bounds.contains(i,o)||!e.items)return null;const a=n*t.pixelRatio,s=r*t.pixelRatio;return yg(e,u=>{let c,l,h,f,d,p,g,m,v;if(m=u.bounds,(!m||m.contains(i,o))&&(f=u.x||0,d=u.y||0,p=f+(u.width||0),g=d+(u.height||0),v=u.clip,!v||!(i<f||i>p||o<d||o>g)))return t.save(),t.translate(f,d),f=i-f,d=o-d,v&&yp(u)&&!Gg(t,u,a,s)?(t.restore(),null):(l=u.strokeForeground,h=!1!==e.interactive,h&&l&&u.stroke&&Xg(t,u,a,s)?(t.restore(),u):(c=yg(u,t=>Zg(t,f,d)?this.pick(t,n,r,f,d):null),!c&&h&&(u.fill||!l&&u.stroke)&&Gg(t,u,a,s)&&(c=u),t.restore(),c||null))})}function Zg(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}var Jg={type:"group",tag:"g",nested:!1,attr:zg,bound:Hg,draw:Yg,pick:Kg,isect:ig,content:Vg,background:Ug,foreground:Wg},Qg={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function tm(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(e=>{t.image=e,t.image.url=t.url})),n}function em(t,e){return null!=t.width?t.width:e&&e.width?!1!==t.aspect&&t.height?t.height*e.width/e.height:e.width:0}function nm(t,e){return null!=t.height?t.height:e&&e.height?!1!==t.aspect&&t.width?t.width*e.height/e.width:e.height:0}function rm(t,e){return"center"===t?e/2:"right"===t?e:0}function im(t,e){return"middle"===t?e/2:"bottom"===t?e:0}function om(t,e,n){const r=tm(e,n),i=em(e,r),o=nm(e,r),a=(e.x||0)-rm(e.align,i),s=(e.y||0)-im(e.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";t("href",u,Qg["xmlns:xlink"],"xlink:href"),t("transform",Cg(a,s)),t("width",i),t("height",o),t("preserveAspectRatio",!1===e.aspect?"none":"xMidYMid")}function am(t,e){const n=e.image,r=em(e,n),i=nm(e,n),o=(e.x||0)-rm(e.align,r),a=(e.y||0)-im(e.baseline,i);return t.set(o,a,o+r,a+i)}function sm(t,e,n){vg(e,e=>{if(n&&!n.intersects(e.bounds))return;let r,i,o,a,s=tm(e,this),u=em(e,s),c=nm(e,s),l=(e.x||0)-rm(e.align,u),h=(e.y||0)-im(e.baseline,c);!1!==e.aspect&&(i=s.width/s.height,o=e.width/e.height,i===i&&o===o&&i!==o&&(o<i?(a=u/i,h+=(c-a)/2,c=a):(a=c*i,l+=(u-a)/2,u=a))),(s.complete||s.toDataURL)&&(sg(t,e),t.globalAlpha=null!=(r=e.opacity)?r:1,t.imageSmoothingEnabled=!1!==e.smooth,t.drawImage(s,l,h,u,c))})}var um={type:"image",tag:"image",nested:!1,attr:om,bound:am,draw:sm,pick:_g(),isect:rt["gb"],get:tm,xOffset:rm,yOffset:im},cm=Rg("line",wp,Ng);function lm(t,e){var n=e.scaleX||1,r=e.scaleY||1;1===n&&1===r||t("vector-effect","non-scaling-stroke"),t("transform",Eg(e)),t("d",e.path)}function hm(t,e){var n=e.path;if(null==n)return!0;var r=e.x||0,i=e.y||0,o=e.scaleX||1,a=e.scaleY||1,s=(e.angle||0)*Gf,u=e.pathCache;u&&u.path===n||((e.pathCache=u=qf(n)).path=n),s&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(s),od(t,u,0,0,o,a),t.rotate(-s),t.translate(-r,-i)):od(t,u,r,i,o,a)}function fm(t,e){return hm(Hp(t),e)?t.set(0,0,0,0):Lp(t,e,!0),e.angle&&t.rotate(e.angle*Gf,e.x||0,e.y||0),t}var dm={type:"path",tag:"path",nested:!1,attr:lm,bound:fm,draw:bg(hm),pick:Sg(hm),isect:ng(hm)};function pm(t,e){t("d",_p(null,e))}function gm(t,e){var n,r;return Lp(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)}function mm(t,e){t.beginPath(),_p(t,e)}var vm={type:"rect",tag:"path",nested:!1,attr:pm,bound:gm,draw:bg(mm),pick:Sg(mm),isect:ig};function ym(t,e){t("transform",Tg(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)}function bm(t,e){var n,r;return Lp(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)}function xm(t,e,n){var r,i,o,a;return!(!e.stroke||!pg(t,e,n))&&(r=e.x||0,i=e.y||0,o=null!=e.x2?e.x2:r,a=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(o,a),!0)}function wm(t,e,n){vg(e,(function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&xm(t,e,r)&&(sg(t,e),t.stroke())}}))}function _m(t,e,n,r){return!!t.isPointInStroke&&(xm(t,e,1)&&t.isPointInStroke(n,r))}var Om={type:"rule",tag:"line",nested:!1,attr:ym,bound:bm,draw:wm,pick:_g(_m),isect:og},Sm=jg("shape",Op),Cm=jg("symbol",Sp,rg);const km=Object(rt["L"])();var Am={height:Nm,measureWidth:Dm,estimateWidth:Em,width:Em,canvas:Tm};function Tm(t){Am.width=t&&tg?Dm:Em}function Em(t,e){return jm($m(t,e),Nm(t))}function jm(t,e){return~~(.8*t.length*e)}function Dm(t,e){return Nm(t)<=0||!(e=$m(t,e))?0:Mm(e,Um(t))}function Mm(t,e){const n=`(${e}) ${t}`;let r=km.get(n);return void 0===r&&(tg.font=e,r=tg.measureText(t).width,km.set(n,r)),r}function Nm(t){return null!=t.fontSize?+t.fontSize||0:11}function Im(t){return null!=t.lineHeight?t.lineHeight:Nm(t)+2}function Rm(t){return Object(rt["A"])(t)?t.length>1?t:t[0]:t}function Fm(t){return Rm(t.lineBreak&&t.text&&!Object(rt["A"])(t.text)?t.text.split(t.lineBreak):t.text)}function Pm(t){const e=Fm(t);return(Object(rt["A"])(e)?e.length-1:0)*Im(t)}function $m(t,e){const n=null==e?"":(e+"").trim();return t.limit>0&&n.length?zm(t,n):n}function Lm(t){if(Am.width===Dm){const e=Um(t);return t=>Mm(t,e)}{const e=Nm(t);return t=>jm(t,e)}}function zm(t,e){var n=+t.limit,r=Lm(t);if(r(e)<n)return e;var i,o=t.ellipsis||"…",a="rtl"===t.dir,s=0,u=e.length;if(n-=r(o),a){while(s<u)i=s+u>>>1,r(e.slice(i))>n?s=i+1:u=i;return o+e.slice(s)}while(s<u)i=1+(s+u>>>1),r(e.slice(0,i))<n?s=i:u=i-1;return e.slice(0,s)+o}function Bm(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Um(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Nm(t)+"px "+Bm(t,e)}function Wm(t){var e=t.baseline,n=Nm(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:"line-top"===e?.29*n+.5*Im(t):"line-bottom"===e?.29*n-.5*Im(t):0)}Tm(!0);var Vm={left:"start",center:"middle",right:"end"},Hm=new Ep;function qm(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-Yf,n+=i*Math.cos(e),r+=i*Math.sin(e)),Hm.x1=n,Hm.y1=r,Hm}function Gm(t,e){var n,r=e.dx||0,i=(e.dy||0)+Wm(e),o=qm(e),a=o.x1,s=o.y1,u=e.angle||0;t("text-anchor",Vm[e.align]||"start"),u?(n=Cg(a,s)+" "+kg(u),(r||i)&&(n+=" "+Cg(r,i))):n=Cg(a+r,s+i),t("transform",n)}function Xm(t,e,n){var r,i=Am.height(e),o=e.align,a=qm(e),s=a.x1,u=a.y1,c=e.dx||0,l=(e.dy||0)+Wm(e)-Math.round(.8*i),h=Fm(e);if(Object(rt["A"])(h)?(i+=Im(e)*(h.length-1),r=h.reduce((t,n)=>Math.max(t,Am.width(e,n)),0)):r=Am.width(e,h),"center"===o?c-=r/2:"right"===o&&(c-=r),t.set(c+=s,l+=u,c+r,l+i),e.angle&&!n)t.rotate(e.angle*Gf,s,u);else if(2===n)return t.rotatedPoints(e.angle*Gf,s,u);return t}function Ym(t,e,n){vg(e,(function(e){var r,i,o,a,s,u,c,l=null==e.opacity?1:e.opacity;if(!(n&&!n.intersects(e.bounds)||0===l||e.fontSize<=0||null==e.text||0===e.text.length)){if(t.font=Um(e),t.textAlign=e.align||"left",r=qm(e),i=r.x1,o=r.y1,e.angle&&(t.save(),t.translate(i,o),t.rotate(e.angle*Gf),i=o=0),i+=e.dx||0,o+=(e.dy||0)+Wm(e),u=Fm(e),sg(t,e),Object(rt["A"])(u))for(s=Im(e),a=0;a<u.length;++a)c=$m(e,u[a]),e.fill&&fg(t,e,l)&&t.fillText(c,i,o),e.stroke&&pg(t,e,l)&&t.strokeText(c,i,o),o+=s;else c=$m(e,u),e.fill&&fg(t,e,l)&&t.fillText(c,i,o),e.stroke&&pg(t,e,l)&&t.strokeText(c,i,o);e.angle&&t.restore()}}))}function Km(t,e,n,r,i,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var a=qm(e),s=a.x1,u=a.y1,c=Xm(Hm,e,1),l=-e.angle*Gf,h=Math.cos(l),f=Math.sin(l),d=h*i-f*o+(s-h*s+f*u),p=f*i+h*o+(u-f*s-h*u);return c.contains(d,p)}function Zm(t,e){var n=Xm(Hm,t,2);return ag(e,n[0],n[1],n[2],n[3])||ag(e,n[0],n[1],n[4],n[5])||ag(e,n[4],n[5],n[6],n[7])||ag(e,n[2],n[3],n[6],n[7])}var Jm={type:"text",tag:"text",nested:!1,attr:Gm,bound:Xm,draw:Ym,pick:_g(Km),isect:Zm},Qm=Rg("trail",Cp,Ig),tv={arc:Dg,area:Fg,group:Jg,image:um,line:cm,path:dm,rect:vm,rule:Om,shape:Sm,symbol:Cm,text:Jm,trail:Qm},ev=function(t,e,n){var r=tv[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new Ep),t,n)},nv={mark:null},rv=function(t,e,n){var r,i,o,a,s=tv[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?o=c[0]:(nv.mark=t,o=nv),a=ev(o,u,n),e=e&&e.union(a)||a,e;if(e=e||t.bounds&&t.bounds.clear()||new Ep,l)for(r=0,i=c.length;r<i;++r)e.union(ev(c[r],u,n));return t.bounds=e},iv=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function ov(t,e){return JSON.stringify(t,iv,e)}function av(t){var e="string"===typeof t?JSON.parse(t):t;return sv(e)}function sv(t){var e,n,r,i=t.marktype,o=t.items;if(o)for(n=0,r=o.length;n<r;++n)e=i?"mark":"group",o[n][e]=t,o[n].zindex&&(o[n][e].zdirty=!0),"group"===(i||e)&&sv(o[n]);return i&&rv(t),t}function uv(t){arguments.length?this.root=av(t):(this.root=lv({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Mp(this.root)])}var cv=uv.prototype;function lv(t,e){const n={bounds:new Ep,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function hv(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function fv(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function dv(t,e,n,r){var i,o=t.childNodes[e];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=hv(t.ownerDocument,n,r),t.insertBefore(o,i)),o}function pv(t,e){var n=t.childNodes,r=n.length;while(r>e)t.removeChild(n[--r]);return t}function gv(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}cv.toJSON=function(t){return ov(this.root,t||0)},cv.mark=function(t,e,n){e=e||this.root.items[0];var r=lv(t,e);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var mv=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]},vv=function(t,e,n,r){var i,o,a=t&&t.mark;if(a&&(i=tv[a.marktype]).tip){o=mv(e,n),o[0]-=r[0],o[1]-=r[1];while(t=t.mark.group)o[0]-=t.x||0,o[1]-=t.y||0;t=i.tip(a.items,o)}return t};function yv(t,e){this._active=null,this._handlers={},this._loader=t||sa(),this._tooltip=e||bv}function bv(t,e,n,r){t.element().setAttribute("title",r||"")}const xv=yv.prototype;function wv(t){this._el=null,this._bgcolor=null,this._loader=new Rp(t)}xv.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},xv.element=function(){return this._el},xv.canvas=function(){return this._el&&this._el.firstChild},xv.origin=function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},xv.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},xv.on=function(){},xv.off=function(){},xv._handlerIndex=function(t,e,n){for(let r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},xv.handlers=function(t){const e=this._handlers,n=[];if(t)n.push.apply(n,e[this.eventName(t)]);else for(const r in e)n.push.apply(n,e[r]);return n},xv.eventName=function(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},xv.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(e=>{const n=new MouseEvent(t.type,t),r=hv(null,"a");for(const t in e)r.setAttribute(t,e[t]);r.dispatchEvent(n)}).catch((function(){}))},xv.handleTooltip=function(t,e,n){if(e&&null!=e.tooltip){e=vv(e,t,this.canvas(),this._origin);const r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},xv.getItemBoundingClientRect=function(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;while(t.mark&&(t=t.mark.group))s+=t.x||0,u+=t.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}};var _v=wv.prototype;_v.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},_v.element=function(){return this._el},_v.canvas=function(){return this._el&&this._el.firstChild},_v.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},_v.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},_v.dirty=function(){},_v.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_v._render=function(){},_v.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then((function(){return e})):Promise.resolve(e)},_v._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(t){t&&i(),n._ready=null}))}return r},_v.sanitizeURL=function(t){return this._load("sanitizeURL",t)},_v.loadImage=function(t){return this._load("loadImage",t)};const Ov="keydown",Sv="keypress",Cv="keyup",kv="dragenter",Av="dragleave",Tv="dragover",Ev="mousedown",jv="mouseup",Dv="mousemove",Mv="mouseout",Nv="mouseover",Iv="click",Rv="dblclick",Fv="wheel",Pv="mousewheel",$v="touchstart",Lv="touchmove",zv="touchend",Bv=[Ov,Sv,Cv,kv,Av,Tv,Ev,jv,Dv,Mv,Nv,Iv,Rv,Fv,Pv,$v,Lv,zv],Uv=Dv,Wv=Mv,Vv=Iv;function Hv(t,e){yv.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}const qv=Object(rt["y"])(Hv,yv);qv.initialize=function(t,e,n){return this._canvas=t&&fv(t,"canvas"),[Iv,Ev,Dv,Mv,Av].forEach(t=>Xv(this,t)),yv.prototype.initialize.call(this,t,e,n)};const Gv=t=>t===$v||t===Lv||t===zv?[$v,Lv,zv]:[t];function Xv(t,e){Gv(e).forEach(e=>Yv(t,e))}function Yv(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?n=>t[e](n):n=>t.fire(e,n)))}function Kv(t,e,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(e,r)),this.fire(t,r)}}function Zv(t){return function(e){this.fire(t,e),this._active=null}}function Jv(){return"undefined"!==typeof window&&window.devicePixelRatio||1}qv.canvas=function(){return this._canvas},qv.context=function(){return this._canvas.getContext("2d")},qv.events=Bv,qv.DOMMouseScroll=function(t){this.fire(Pv,t)},qv.mousemove=Kv(Dv,Nv,Mv),qv.dragover=Kv(Tv,kv,Av),qv.mouseout=Zv(Mv),qv.dragleave=Zv(Av),qv.mousedown=function(t){this._down=this._active,this.fire(Ev,t)},qv.click=function(t){this._down===this._active&&(this.fire(Iv,t),this._down=null)},qv.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire($v,t,!0)},qv.touchmove=function(t){this.fire(Lv,t,!0)},qv.touchend=function(t){this.fire(zv,t,!0),this._touch=null},qv.fire=function(t,e,n){const r=n?this._touch:this._active,i=this._handlers[t];if(e.vegaType=t,t===Vv&&r&&r.href?this.handleHref(e,r,r.href):t!==Uv&&t!==Wv||this.handleTooltip(e,r,t!==Wv),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,e,r)},qv.on=function(t,e){const n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);return i<0&&(Xv(this,t),(r[n]||(r[n]=[])).push({type:t,handler:e})),this},qv.off=function(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},qv.pickEvent=function(t){const e=mv(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},qv.pick=function(t,e,n,r,i){const o=this.context(),a=tv[t.marktype];return a.pick.call(this,o,t,e,n,r,i)};var Qv=Jv(),ty=function(t,e,n,r,i,o){const a="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,s=t.getContext("2d"),u=a?Qv:i;t.width=e*u,t.height=n*u;for(const c in o)s[c]=o[c];return a&&1!==u&&(t.style.width=e+"px",t.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1]),t};function ey(t){wv.call(this,t),this._options={},this._redraw=!1,this._dirty=new Ep,this._tempb=new Ep}const ny=Object(rt["y"])(ey,wv),ry=wv.prototype;function iy(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}ny.initialize=function(t,e,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Np(1,1,this._options.type),t&&this._canvas&&(pv(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),ry.initialize.call(this,t,e,n,r,i)},ny.resize=function(t,e,n,r){if(ry.resize.call(this,t,e,n,r),this._canvas)ty(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const t=this._options.externalContext;t||Object(rt["n"])("CanvasRenderer is missing a valid canvas or context"),t.scale(this._scale,this._scale),t.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},ny.canvas=function(){return this._canvas},ny.context=function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},ny.dirty=function(t){let e=this._tempb.clear().union(t.bounds),n=t.mark.group;while(n)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)};const oy=(t,e,n)=>(new Ep).set(0,0,e,n).translate(-t[0],-t[1]);function ay(t,e){yv.call(this,t,e);const n=this;n._hrefHandler=uy(n,(t,e)=>{e&&e.href&&n.handleHref(t,e,e.href)}),n._tooltipHandler=uy(n,(t,e)=>{n.handleTooltip(t,e,t.type!==Wv)})}ny._render=function(t){const e=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,a=oy(n,r,i);e.save();const s=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):iy(e,a.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(e,t,s),e.restore(),o.clear(),this},ny.draw=function(t,e,n){const r=tv[e.marktype];e.clip&&Pg(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},ny.clear=function(t,e,n,r){const i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(t,e,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(t,e,n,r))};const sy=Object(rt["y"])(ay,yv);sy.initialize=function(t,e,n){let r=this._svg;return r&&(r.removeEventListener(Vv,this._hrefHandler),r.removeEventListener(Uv,this._tooltipHandler),r.removeEventListener(Wv,this._tooltipHandler)),this._svg=r=t&&fv(t,"svg"),r&&(r.addEventListener(Vv,this._hrefHandler),r.addEventListener(Uv,this._tooltipHandler),r.addEventListener(Wv,this._tooltipHandler)),yv.prototype.initialize.call(this,t,e,n)},sy.canvas=function(){return this._svg};const uy=(t,e)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,e.call(t._obj,n,r)};sy.on=function(t,e){const n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);if(i<0){const i={type:t,handler:e,listener:uy(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},sy.off=function(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var cy=function(t,e,n){var r=t-e+2*n;return t?r>0?r:1:0};const ly="identity",hy="linear",fy="log",dy="pow",py="sqrt",gy="symlog",my="time",vy="utc",yy="sequential",by="diverging",xy="quantile",wy="quantize",_y="threshold",Oy="ordinal",Sy="point",Cy="band",ky="bin-ordinal",Ay="continuous",Ty="discrete",Ey="discretizing",jy="interpolating",Dy="temporal";var My=function(t){return function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}},Ny=function(t){return function(e){var n,r,i,o,a=t.range(),s=e[0],u=e[1],c=-1;for(u<s&&(r=s,s=u,u=r),i=0,o=a.length;i<o;++i)a[i]>=s&&a[i]<=u&&(c<0&&(c=i),n=i);if(!(c<0))return s=t.invertExtent(a[c]),u=t.invertExtent(a[n]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}},Iy=si(ai),Ry=Iy.right,Fy=Iy.left,Py=Ry;function $y(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ly(t,e){switch(arguments.length){case 0:break;case 1:"function"===typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"===typeof e?this.interpolator(e):this.range(e);break}return this}const zy=Symbol("implicit");function By(){var t=new Map,e=[],n=[],r=zy;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==zy)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return By(e,n).unknown(r)},$y.apply(i,arguments),i}function Uy(){var t,e,n=By().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,u=0,c=.5;function l(){var n=r().length,l=o[1]<o[0],h=o[l-0],f=o[1-l],d=cy(n,s,u);t=(f-h)/(d||1),a&&(t=Math.floor(t)),h+=(f-h-t*(n-s))*c,e=t*(1-s),a&&(h=Math.round(h),e=Math.round(e));var p=vl(n).map((function(e){return h+t*e}));return i(l?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],l()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,l()):a},n.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s=u,l()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var n,a,s,u=+t[0],c=+t[1],l=o[1]<o[0],h=l?i().reverse():i(),f=h.length-1;if(u===u&&c===c&&(c<u&&(s=u,u=c,c=s),!(c<h[0]||u>o[1-l])))return n=Math.max(0,Ry(h,u)-1),a=u===c?n:Ry(h,c)-1,u-h[n]>e+1e-10&&++n,l&&(s=n,n=f-a,a=f-s),n>a?void 0:r().slice(n,a+1)}},n.invert=function(t){var e=n.invertRange([t,t]);return e?e[0]:e},n.copy=function(){return Uy().domain(r()).range(o).round(a).paddingInner(s).paddingOuter(u).align(c)},l()}function Wy(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Wy(e())},t}function Vy(){return Wy(Uy().paddingInner(1))}var Hy=n("ad68"),qy=function(t,e,n,r){var i,o=Le(t,e,n);switch(r=Object(Hy["formatSpecifier"])(null==r?",f":r),r.type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Object(Hy["precisionPrefix"])(o,a))||(r.precision=i),Object(Hy["formatPrefix"])(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Object(Hy["precisionRound"])(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Object(Hy["precisionFixed"])(o))||(r.precision=i-2*("%"===r.type));break}return Object(Hy["format"])(r)},Gy=Array.prototype.map;function Xy(t){return Gy.call(t,(function(t){return+t}))}var Yy=Array.prototype.slice;function Ky(){var t=[],e=[];function n(n){return null==n||n!==n?void 0:e[(Py(t,n)-1)%e.length]}return n.domain=function(e){return arguments.length?(t=Xy(e),n):t.slice()},n.range=function(t){return arguments.length?(e=Yy.call(t),n):e.slice()},n.tickFormat=function(e,n){return qy(t[0],Object(rt["U"])(t),null==e?10:e,n)},n.copy=function(){return Ky().domain(n.domain()).range(n.range())},n}var Zy=n("482f");function Jy(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}var Qy=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Jy((n-r/e)*e,a,i,o,s)}},tb=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Jy((n-r/e)*e,i,o,a,s)}},eb=function(t){return function(){return t}};function nb(t,e){return function(n){return t+n*e}}function rb(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ib(t,e){var n=e-t;return n?nb(t,n>180||n<-180?n-360*Math.round(n/360):n):eb(isNaN(t)?e:t)}function ob(t){return 1===(t=+t)?ab:function(e,n){return n-e?rb(e,n,t):eb(isNaN(e)?n:e)}}function ab(t,e){var n=e-t;return n?nb(t,n):eb(isNaN(t)?e:t)}var sb=function t(e){var n=ob(e);function r(t,e){var r=n((t=Object(Zy["f"])(t)).r,(e=Object(Zy["f"])(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=ab(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function ub(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Object(Zy["f"])(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var cb=ub(Qy),lb=ub(tb),hb=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function fb(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var db=function(t,e){return(fb(e)?hb:pb)(t,e)};function pb(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Ob(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var gb=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},mb=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},vb=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=Ob(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},yb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bb=new RegExp(yb.source,"g");function xb(t){return function(){return t}}function wb(t){return function(e){return t(e)+""}}var _b=function(t,e){var n,r,i,o=yb.lastIndex=bb.lastIndex=0,a=-1,s=[],u=[];t+="",e+="";while((n=yb.exec(t))&&(r=bb.exec(e)))(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:mb(n,r)})),o=bb.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?wb(u[0].x):xb(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},Ob=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?eb(e):("number"===r?mb:"string"===r?(n=Object(Zy["a"])(e))?(e=n,sb):_b:e instanceof Zy["a"]?sb:e instanceof Date?gb:fb(e)?hb:Array.isArray(e)?pb:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?vb:mb)(t,e)},Sb=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},Cb=function(t){return function(){return t}},kb=function(t){return+t},Ab=[0,1];function Tb(t){return t}function Eb(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Cb(isNaN(e)?NaN:.5)}function jb(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}function Db(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Eb(i,r),o=n(a,o)):(r=Eb(r,i),o=n(o,a)),function(t){return o(r(t))}}function Mb(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());while(++a<r)i[a]=Eb(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Py(t,e,1,r)-1;return o[n](i[n](e))}}function Nb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ib(){var t,e,n,r,i,o,a=Ab,s=Ab,u=Ob,c=Tb;function l(){var t=Math.min(a.length,s.length);return c!==Tb&&(c=jb(a[0],a[t-1])),r=t>2?Mb:Db,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=r(s,a.map(t),mb)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,kb),l()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),u=Sb,l()},h.clamp=function(t){return arguments.length?(c=!!t||Tb,l()):c!==Tb},h.interpolate=function(t){return arguments.length?(u=t,l()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,l()}}function Rb(){return Ib()(Tb,Tb)}function Fb(t){var e=t.domain;return t.ticks=function(t){var n=e();return Pe(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return qy(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),r=$e(s,u,n),r>0?(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,r=$e(s,u,n)):r<0&&(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,r=$e(s,u,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}function Pb(){var t=Rb();return t.copy=function(){return Nb(t,Pb())},$y.apply(t,arguments),Fb(t)}function $b(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,kb),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return $b(t).unknown(e)},t=arguments.length?Array.from(t,kb):[0,1],Fb(n)}var Lb=function(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function zb(t){return Math.log(t)}function Bb(t){return Math.exp(t)}function Ub(t){return-Math.log(-t)}function Wb(t){return-Math.exp(-t)}function Vb(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Hb(t){return 10===t?Vb:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function qb(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Gb(t){return function(e){return-t(-e)}}function Xb(t){var e,n,r=t(zb,Bb),i=r.domain,o=10;function a(){return e=qb(o),n=Hb(o),i()[0]<0?(e=Gb(e),n=Gb(n),t(Ub,Wb)):t(zb,Bb),r}return r.base=function(t){return arguments.length?(o=+t,a()):o},r.domain=function(t){return arguments.length?(i(t),a()):i()},r.ticks=function(t){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(f=s,s=u,u=f);var c,l,h,f=e(s),d=e(u),p=null==t?10:+t,g=[];if(!(o%1)&&d-f<p){if(f=Math.floor(f),d=Math.ceil(d),s>0){for(;f<=d;++f)for(l=1,c=n(f);l<o;++l)if(h=c*l,!(h<s)){if(h>u)break;g.push(h)}}else for(;f<=d;++f)for(l=o-1,c=n(f);l>=1;--l)if(h=c*l,!(h<s)){if(h>u)break;g.push(h)}2*g.length<p&&(g=Pe(s,u,p))}else g=Pe(f,d,Math.min(d-f,p)).map(n);return r?g.reverse():g},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!==typeof i&&(i=Object(Hy["format"])(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=a?i(t):""}},r.nice=function(){return i(Lb(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function Yb(){var t=Xb(Ib()).domain([1,10]);return t.copy=function(){return Nb(t,Yb()).base(t.base())},$y.apply(t,arguments),t}function Kb(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Zb(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Jb(t){return t<0?-t*t:t*t}function Qb(t){var e=t(Tb,Tb),n=1;function r(){return 1===n?t(Tb,Tb):.5===n?t(Zb,Jb):t(Kb(n),Kb(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Fb(e)}function tx(){var t=Qb(Ib());return t.copy=function(){return Nb(t,tx()).exponent(t.exponent())},$y.apply(t,arguments),t}function ex(){return tx.apply(null,arguments).exponent(.5)}function nx(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function rx(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function ix(t){var e=1,n=t(nx(e),rx(e));return n.constant=function(n){return arguments.length?t(nx(e=+n),rx(e)):e},Fb(n)}function ox(){var t=ix(Ib());return t.copy=function(){return Nb(t,ox()).constant(t.constant())},$y.apply(t,arguments)}var ax=n("70e1"),sx=1e3,ux=60*sx,cx=60*ux,lx=24*cx,hx=7*lx,fx=30*lx,dx=365*lx;function px(t){return new Date(t)}function gx(t){return t instanceof Date?+t:+new Date(+t)}function mx(t,e,n,r,i,o,a,s,u){var c=Rb(),l=c.invert,h=c.domain,f=u(".%L"),d=u(":%S"),p=u("%I:%M"),g=u("%I %p"),m=u("%a %d"),v=u("%b %d"),y=u("%B"),b=u("%Y"),x=[[a,1,sx],[a,5,5*sx],[a,15,15*sx],[a,30,30*sx],[o,1,ux],[o,5,5*ux],[o,15,15*ux],[o,30,30*ux],[i,1,cx],[i,3,3*cx],[i,6,6*cx],[i,12,12*cx],[r,1,lx],[r,2,2*lx],[n,1,hx],[e,1,fx],[e,3,3*fx],[t,1,dx]];function w(s){return(a(s)<s?f:o(s)<s?d:i(s)<s?p:r(s)<s?g:e(s)<s?n(s)<s?m:v:t(s)<s?y:b)(s)}function _(e,n,r){if(null==e&&(e=10),"number"===typeof e){var i,o=Math.abs(r-n)/e,a=si((function(t){return t[2]})).right(x,o);return a===x.length?(i=Le(n/dx,r/dx,e),e=t):a?(a=x[o/x[a-1][2]<x[a][2]/o?a-1:a],i=a[1],e=a[0]):(i=Math.max(Le(n,r,e),1),e=s),e.every(i)}return e}return c.invert=function(t){return new Date(l(t))},c.domain=function(t){return arguments.length?h(Array.from(t,gx)):h().map(px)},c.ticks=function(t){var e,n=h(),r=n[0],i=n[n.length-1],o=i<r;return o&&(e=r,r=i,i=e),e=_(t,r,i),e=e?e.range(r,i+1):[],o?e.reverse():e},c.tickFormat=function(t,e){return null==e?w:u(e)},c.nice=function(t){var e=h();return(t=_(t,e[0],e[e.length-1]))?h(Lb(e,t)):c},c.copy=function(){return Nb(c,mx(t,e,n,r,i,o,a,s,u))},c}var vx=function(){return $y.apply(mx(ki["k"],ki["f"],ki["j"],ki["a"],ki["b"],ki["d"],ki["g"],ki["c"],ax["a"]).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},yx=function(){return $y.apply(mx(ki["v"],ki["q"],ki["u"],ki["l"],ki["m"],ki["o"],ki["r"],ki["n"],ax["b"]).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function bx(){var t,e,n,r,i,o=0,a=1,s=Tb,u=!1;function c(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function l(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=l(Ob),c.rangeRound=l(Sb),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),c}}function xx(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function wx(){var t=Fb(bx()(Tb));return t.copy=function(){return xx(t,wx())},Ly.apply(t,arguments)}function _x(){var t=Xb(bx()).domain([1,10]);return t.copy=function(){return xx(t,_x()).base(t.base())},Ly.apply(t,arguments)}function Ox(){var t=ix(bx());return t.copy=function(){return xx(t,Ox()).constant(t.constant())},Ly.apply(t,arguments)}function Sx(){var t=Qb(bx());return t.copy=function(){return xx(t,Sx()).exponent(t.exponent())},Ly.apply(t,arguments)}function Cx(){return Sx.apply(null,arguments).exponent(.5)}function kx(t,e){var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);while(n<r)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function Ax(){var t,e,n,r,i,o,a,s=0,u=.5,c=1,l=1,h=Tb,f=!1;function d(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(l*t<l*e?r:i),h(f?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=kx(t,[n,r,i]),d):[h(0),h(.5),h(1)]}}return d.domain=function(a){return arguments.length?([s,u,c]=a,t=o(s=+s),e=o(u=+u),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,d):[s,u,c]},d.clamp=function(t){return arguments.length?(f=!!t,d):f},d.interpolator=function(t){return arguments.length?(h=t,d):h},d.range=p(Ob),d.rangeRound=p(Sb),d.unknown=function(t){return arguments.length?(a=t,d):a},function(a){return o=a,t=a(s),e=a(u),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,d}}function Tx(){var t=Fb(Ax()(Tb));return t.copy=function(){return xx(t,Tx())},Ly.apply(t,arguments)}function Ex(){var t=Xb(Ax()).domain([.1,1,10]);return t.copy=function(){return xx(t,Ex()).base(t.base())},Ly.apply(t,arguments)}function jx(){var t=ix(Ax());return t.copy=function(){return xx(t,jx()).constant(t.constant())},Ly.apply(t,arguments)}function Dx(){var t=Qb(Ax());return t.copy=function(){return xx(t,Dx()).exponent(t.exponent())},Ly.apply(t,arguments)}function Mx(){return Dx.apply(null,arguments).exponent(.5)}function Nx(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);r=new Array(i-1);while(++t<i)r[t-1]=js(e,t/i);return o}function o(e){return isNaN(e=+e)?t:n[Py(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(ai),i()},o.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return Nx().domain(e).range(n).unknown(t)},$y.apply(o,arguments)}function Ix(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return e<=e?o[Py(i,e,0,r)]:t}function s(){var t=-1;i=new Array(r);while(++t<r)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return Ix().domain([e,n]).range(o).unknown(t)},$y.apply(Fb(a),arguments)}function Rx(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[Py(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Rx().domain(e).range(n).unknown(t)},$y.apply(i,arguments)}const Fx={};function Px(t,e,n){const r=function(){var n=e();return n.invertRange||(n.invertRange=n.invert?My(n):n.invertExtent?Ny(n):void 0),n.type=t,n};return r.metadata=Object(rt["db"])(Object(rt["i"])(n)),r}function $x(t,e,n){return arguments.length>1?(Fx[t]=Px(t,e,n),this):Lx(t)?Fx[t]:void 0}function Lx(t){return Object(rt["v"])(Fx,t)}function zx(t,e){const n=Fx[t];return n&&n.metadata[e]}function Bx(t){return zx(t,Ay)}function Ux(t){return zx(t,Ty)}function Wx(t){return zx(t,Ey)}function Vx(t){return zx(t,fy)}function Hx(t){return zx(t,Dy)}function qx(t){return zx(t,jy)}function Gx(t){return zx(t,xy)}$x(ly,$b),$x(hy,Pb,Ay),$x(fy,Yb,[Ay,fy]),$x(dy,tx,Ay),$x(py,ex,Ay),$x(gy,ox,Ay),$x(my,vx,[Ay,Dy]),$x(vy,yx,[Ay,Dy]),$x(yy,wx,[Ay,jy]),$x(`${yy}-${hy}`,wx,[Ay,jy]),$x(`${yy}-${fy}`,_x,[Ay,jy,fy]),$x(`${yy}-${dy}`,Sx,[Ay,jy]),$x(`${yy}-${py}`,Cx,[Ay,jy]),$x(`${yy}-${gy}`,Ox,[Ay,jy]),$x(`${by}-${hy}`,Tx,[Ay,jy]),$x(`${by}-${fy}`,Ex,[Ay,jy,fy]),$x(`${by}-${dy}`,Dx,[Ay,jy]),$x(`${by}-${py}`,Mx,[Ay,jy]),$x(`${by}-${gy}`,jx,[Ay,jy]),$x(xy,Nx,[Ey,xy]),$x(wy,Ix,Ey),$x(_y,Rx,Ey),$x(ky,Ky,[Ty,Ey]),$x(Oy,By,Ty),$x(Cy,Uy,Ty),$x(Sy,Vy,Ty);var Xx,Yx,Kx,Zx,Jx=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},Qx=function(t,e){var n=ib(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},tw=180/Math.PI,ew={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},nw=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*tw,skewX:Math.atan(u)*tw,scaleX:a,scaleY:s}};function rw(t){return"none"===t?ew:(Xx||(Xx=document.createElement("DIV"),Yx=document.documentElement,Kx=document.defaultView),Xx.style.transform=t,t=Kx.getComputedStyle(Yx.appendChild(Xx),null).getPropertyValue("transform"),Yx.removeChild(Xx),t=t.slice(7,-1).split(","),nw(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function iw(t){return null==t?ew:(Zx||(Zx=document.createElementNS("http://www.w3.org/2000/svg","g")),Zx.setAttribute("transform",t),(t=Zx.transform.baseVal.consolidate())?(t=t.matrix,nw(t.a,t.b,t.c,t.d,t.e,t.f)):ew)}function ow(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:mb(t,i)},{i:u-2,x:mb(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:mb(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:mb(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:mb(t,n)},{i:s-2,x:mb(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){var e,n=-1,o=i.length;while(++n<o)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var aw=ow(rw,"px, ","px)","deg)"),sw=ow(iw,", ",")",")"),uw=Math.SQRT2,cw=2,lw=4,hw=1e-12;function fw(t){return((t=Math.exp(t))+1/t)/2}function dw(t){return((t=Math.exp(t))-1/t)/2}function pw(t){return((t=Math.exp(2*t))-1)/(t+1)}var gw=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,h=u-o,f=l*l+h*h;if(f<hw)r=Math.log(c/a)/uw,n=function(t){return[i+t*l,o+t*h,a*Math.exp(uw*t*r)]};else{var d=Math.sqrt(f),p=(c*c-a*a+lw*f)/(2*a*cw*d),g=(c*c-a*a-lw*f)/(2*c*cw*d),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/uw,n=function(t){var e=t*r,n=fw(m),s=a/(cw*d)*(n*pw(uw*e+m)-dw(m));return[i+s*l,o+s*h,a*n/fw(uw*e+m)]}}return n.duration=1e3*r,n};function mw(t){return function(e,n){var r=t((e=Object(Zy["d"])(e)).h,(n=Object(Zy["d"])(n)).h),i=ab(e.s,n.s),o=ab(e.l,n.l),a=ab(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var vw=mw(ib),yw=mw(ab);function bw(t,e){var n=ab((t=Object(Zy["e"])(t)).l,(e=Object(Zy["e"])(e)).l),r=ab(t.a,e.a),i=ab(t.b,e.b),o=ab(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function xw(t){return function(e,n){var r=t((e=Object(Zy["c"])(e)).h,(n=Object(Zy["c"])(n)).h),i=ab(e.c,n.c),o=ab(e.l,n.l),a=ab(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var ww=xw(ib),_w=xw(ab);function Ow(t){return function e(n){function r(e,r){var i=t((e=Object(Zy["b"])(e)).h,(r=Object(Zy["b"])(r)).h),o=ab(e.s,r.s),a=ab(e.l,r.l),s=ab(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var Sw=Ow(ib),Cw=Ow(ab),kw=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};const Aw=["clamp","base","constant","exponent"];function Tw(t,e){var n=e[0],r=Object(rt["U"])(e)-n;return function(e){return t(n+e*r)}}function Ew(t,e,n){return kx(Mw(e||"rgb",n),t)}function jw(t,e){for(var n=new Array(e),r=e+1,i=0;i<e;)n[i]=t(++i/r);return n}function Dw(t,e,n){var r,i,o,a=n-e;return a&&Number.isFinite(a)?(r=(i=t.type).indexOf("-"),i=r<0?i:i.slice(r+1),o=$x(i)().domain([e,n]).range([0,1]),Aw.forEach(e=>t[e]?o[e](t[e]()):0),o):Object(rt["l"])(.5)}function Mw(t,e){var n=a[Nw(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function Nw(t){return"interpolate"+t.toLowerCase().split("-").map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("")}const Iw={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Rw={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function Fw(t){var e=t.length/6|0,n=new Array(e),r=0;while(r<e)n[r]="#"+t.slice(6*r,6*++r);return n}function Pw(t,e){for(let n in t)Lw(n,e(t[n]))}const $w={};function Lw(t,e){return t=t&&t.toLowerCase(),arguments.length>1?($w[t]=e,this):$w[t]}Pw(Rw,Fw),Pw(Iw,t=>Ew(Fw(t)));var zw="symbol",Bw="discrete",Uw="gradient";const Ww=t=>Object(rt["A"])(t)?t.map(t=>String(t)):String(t),Vw=(t,e)=>t[1]-e[1],Hw=(t,e)=>e[1]-t[1];function qw(t,e,n){var r;return Object(rt["E"])(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),null!=n&&(e=Math.min(e,Math.floor(Object(rt["X"])(t.domain())/n||1)))),Object(rt["F"])(e)&&(r=e.step,e=e.interval),Object(rt["H"])(e)&&(e=t.type===my?Jr(e):t.type==vy?Qr(e):Object(rt["n"])("Only time and utc scales accept interval strings."),r&&(e=e.every(r))),e}function Gw(t,e,n){let r=t.range(),i=r[0],o=Object(rt["U"])(r),a=Vw;if(i>o&&(r=o,o=i,i=r,a=Hw),i=Math.floor(i),o=Math.ceil(o),e=e.map(e=>[e,t(e)]).filter(t=>i<=t[1]&&t[1]<=o).sort(a).map(t=>t[0]),n>0&&e.length>1){const t=[e[0],Object(rt["U"])(e)];while(e.length>n&&e.length>=3)e=e.filter((t,e)=>!(e%2));e.length<3&&(e=t)}return e}function Xw(t,e){return t.bins?Gw(t,t.bins):t.ticks?t.ticks(e):t.domain()}function Yw(t,e,n,r,i,o){var a=e.type;let s=Ww;if(a===my||i===my)s=t.timeFormat(r);else if(a===vy||i===vy)s=t.utcFormat(r);else if(Vx(a)){const i=t.formatFloat(r);if(o||e.bins)s=i;else{const t=Kw(e,n,!1);s=e=>t(e)?i(e):""}}else if(e.tickFormat){const i=e.domain();s=t.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=t.format(r));return s}function Kw(t,e,n){const r=Xw(t,e),i=t.base(),o=Math.log(i),a=Math.max(1,i*e/r.length),s=t=>{let e=t/Math.pow(i,Math.round(Math.log(t)/o));return e*i<i-.5&&(e*=i),e<=a};return n?r.filter(s):s}const Zw={[xy]:"quantiles",[wy]:"thresholds",[_y]:"domain"},Jw={[xy]:"quantiles",[wy]:"domain"};function Qw(t,e){return t.bins?n_(t.bins):t.type===fy?Kw(t,e,!0):Zw[t.type]?e_(t[Zw[t.type]]()):Xw(t,e)}function t_(t,e,n){var r,i=e[Jw[e.type]](),o=i.length,a=o>1?i[1]-i[0]:i[0];for(r=1;r<o;++r)a=Math.min(a,i[r]-i[r-1]);return t.formatSpan(0,a,30,n)}function e_(t){const e=[-1/0].concat(t);return e.max=1/0,e}function n_(t){const e=t.slice(0,-1);return e.max=Object(rt["U"])(t),e}function r_(t){return Zw[t.type]||t.bins}function i_(t,e,n,r,i,o,a){const s=Jw[e.type]&&o!==my&&o!==vy?t_(t,e,i):Yw(t,e,n,i,o,a);return r===zw&&r_(e)?o_(s):r===Bw?s_(s):u_(s)}function o_(t){return(e,n,r)=>{var i=a_(r[n+1],a_(r.max,1/0)),o=c_(e,t),a=c_(i,t);return o&&a?o+" – "+a:a?"< "+a:"≥ "+o}}function a_(t,e){return null!=t?t:e}function s_(t){return(e,n)=>n?t(e):null}function u_(t){return e=>t(e)}function c_(t,e){return Number.isFinite(t)?e(t):null}function l_(t){var e=t.domain(),n=e.length-1,r=+e[0],i=+Object(rt["U"])(e),o=i-r;if(t.type===_y){const t=n?o/n:.1;r-=t,i+=t,o=i-r}return t=>(t-r)/o}function h_(t,e,n,r){const i=r||e.type;return Object(rt["H"])(n)&&Hx(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==my?n||i!==vy?i_(t,e,5,null,n,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}function f_(t,e,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=h_(t,e,n.format,n.formatType);if(Wx(e.type)){const t=Qw(e).slice(1).map(i),n=t.length;return`${n} boundar${1===n?"y":"ies"}: ${t.join(", ")}`}if(Ux(e.type)){const t=e.domain(),n=t.length,o=n>r?t.slice(0,r-2).map(i).join(", ")+", ending with "+t.slice(-1).map(i):t.map(i).join(", ");return`${n} value${1===n?"":"s"}: ${o}`}{const t=e.domain();return`values from ${i(t[0])} to ${i(Object(rt["U"])(t))}`}}const d_="aria-hidden",p_="aria-label",g_="role",m_="aria-roledescription",v_="graphics-object",y_="graphics-symbol",b_=(t,e,n)=>({[g_]:t,[m_]:e,[p_]:n||void 0}),x_=Object(rt["db"])(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),w_={axis:{desc:"axis",caption:T_},legend:{desc:"legend",caption:E_},"title-text":{desc:"title",caption:t=>`Title text '${A_(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${A_(t)}'`}},__={ariaRole:g_,ariaRoleDescription:m_,description:p_};function O_(t,e){const n=!1===e.aria;if(t(d_,n||void 0),n||null==e.description)for(const r in __)t(__[r],void 0);else{const n=e.mark.marktype;t(p_,e.description),t(g_,e.ariaRole||("group"===n?v_:y_)),t(m_,e.ariaRoleDescription||n+" mark")}}function S_(t){return!1===t.aria?{[d_]:!0}:x_[t.role]?null:w_[t.role]?k_(t,w_[t.role]):C_(t)}function C_(t){const e=t.marktype,n="group"===e||"text"===e||t.items.some(t=>null!=t.description&&!1!==t.aria);return b_(n?v_:y_,e+" mark container",t.description)}function k_(t,e){try{const n=t.items[0],r=e.caption||(()=>"");return b_(e.role||y_,e.desc,n.description||r(n))}catch(n){return null}}function A_(t){return Object(rt["i"])(t.text).join(" ")}function T_(t){const e=t.datum,n=t.orient,r=e.title?j_(t):null,i=t.context,o=i.scales[e.scale].value,a=i.dataflow.locale(),s=o.type,u="left"===n||"right"===n?"Y":"X";return u+"-axis"+(r?` titled '${r}'`:"")+` for a ${Ux(s)?"discrete":s} scale with `+f_(a,o,t)}function E_(t){const e=t.datum,n=e.title?j_(t):null,r=((e.type||"")+" legend").trim(),i=e.scales,o=Object.keys(i),a=t.context,s=a.scales[i[o[0]]].value,u=a.dataflow.locale();return M_(r)+(n?` titled '${n}'`:"")+" for "+D_(o)+" with "+f_(u,s,t)}function j_(t){try{return Object(rt["i"])(Object(rt["U"])(t.items).items[0].text).join(" ")}catch(e){return null}}function D_(t){return t=t.map(t=>t+("fill"===t||"stroke"===t?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Object(rt["U"])(t)}function M_(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const N_=t=>(t+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;");function I_(t,e,n){var r,i,o="<"+t;if(e)for(r in e)i=e[r],null!=i&&(o+=" "+r+'="'+N_(i)+'"');return n&&(o+=" "+n),o+">"}function R_(t){return"</"+t+">"}const F_={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},P_={fill:"none","stroke-miterlimit":10},$_=0,L_=Qg.xmlns;function z_(t){wv.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var B_=Object(rt["y"])(z_,wv),U_=wv.prototype;function W_(t,e,n){var r,i,o;if("radial"===e.gradient){var a=dv(t,n++,"pattern",L_);a.setAttribute("id",Nh+e.id),a.setAttribute("viewBox","0,0,1,1"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("preserveAspectRatio","xMidYMid slice"),a=dv(a,0,"rect",L_),a.setAttribute("width","1"),a.setAttribute("height","1"),a.setAttribute("fill","url("+nO()+"#"+e.id+")"),t=dv(t,n++,"radialGradient",L_),t.setAttribute("id",e.id),t.setAttribute("fx",e.x1),t.setAttribute("fy",e.y1),t.setAttribute("fr",e.r1),t.setAttribute("cx",e.x2),t.setAttribute("cy",e.y2),t.setAttribute("r",e.r2)}else t=dv(t,n++,"linearGradient",L_),t.setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2);for(r=0,i=e.stops.length;r<i;++r)o=dv(t,r,"stop",L_),o.setAttribute("offset",e.stops[r].offset),o.setAttribute("stop-color",e.stops[r].color);return pv(t,r),n}function V_(t,e,n){var r;return t=dv(t,n,"clipPath",L_),t.setAttribute("id",e.id),e.path?(r=dv(t,0,"path",L_),r.setAttribute("d",e.path)):(r=dv(t,0,"rect",L_),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height)),pv(t,1),n+1}function H_(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function q_(t,e,n){e=e.lastChild.previousSibling;let r,i=0;vg(n,n=>{r=t.draw(e,n,r),++i}),pv(e,1+i)}function G_(t,e,n,r,i){let o,a=t._svg;if(!a&&(o=e.ownerDocument,a=hv(o,r,L_),t._svg=a,t.mark&&(a.__data__=t,a.__values__={fill:"default"},"g"===r))){const e=hv(o,"path",L_);a.appendChild(e),e.__data__=t;const n=hv(o,"g",L_);a.appendChild(n),n.__data__=t;const r=hv(o,"path",L_);a.appendChild(r),r.__data__=t,r.__values__={fill:"default"}}return(a.ownerSVGElement!==i||X_(a,n))&&e.insertBefore(a,n?n.nextSibling:e.firstChild),a}function X_(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}B_.initialize=function(t,e,n,r){if(this._defs={gradient:{},clipping:{}},t){this._svg=dv(t,0,"svg",L_),this._svg.setAttribute("class","marks"),pv(t,1),this._root=dv(this._svg,$_,"g",L_);for(const t in P_)this._root.setAttribute(t,P_[t]);pv(this._svg,$_+1)}return this.background(this._bgcolor),U_.initialize.call(this,t,e,n,r)},B_.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),U_.background.apply(this,arguments)},B_.resize=function(t,e,n,r){return U_.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},B_.canvas=function(){return this._svg},B_.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in Qg)t[e]=Qg[e];var n=this._bgcolor?I_("rect",{width:this._width,height:this._height,fill:this._bgcolor})+R_("rect"):"";return I_("svg",t)+(this._defs.el?this._defs.el.outerHTML:"")+n+this._root.outerHTML+R_("svg")},B_._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),pv(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},B_.updateDefs=function(){const t=this._svg,e=this._defs;let n=e.el,r=0;for(const i in e.gradient)n||(e.el=n=dv(t,$_,"defs",L_)),r=W_(n,e.gradient[i],r);for(const i in e.clipping)n||(e.el=n=dv(t,$_,"defs",L_)),r=V_(n,e.clipping[i],r);n&&(0===r?(t.removeChild(n),e.el=null):pv(n,r))},B_._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},B_.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},B_.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},B_._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length||!this._dirtyID)return!0;var e,n,r,i,o,a,s,u=++this._dirtyID;for(o=0,a=t.length;o<a;++o)e=t[o],n=e.mark,n.marktype!==r&&(r=n.marktype,i=tv[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,H_(e,u),n.items.forEach((function(t){t.dirty=u}))),n.zdirty||(e.exit?(i.nested&&n.items.length?(s=n.items[0],s._svg&&this._update(i,s._svg,s)):e._svg&&(s=e._svg.parentNode,s&&s.removeChild(e._svg)),e._svg=null):(e=i.nested?n.items[0]:e,e._update!==u&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,H_(e,u)),e._update=u)));return!this._dirtyAll},B_.draw=function(t,e,n){if(!this.isDirty(e))return e._svg;var r,i=this._svg,o=tv[e.marktype],a=!1===e.interactive?"none":null,s="g"===o.tag,u=null,c=0;r=G_(e,t,n,"g",i),r.setAttribute("class",gv(e));const l=S_(e);for(const f in l)tO(r,f,l[f]);s||tO(r,"pointer-events",a),tO(r,"clip-path",e.clip?Tp(this,e,e.group):null);const h=t=>{const e=this.isDirty(t),n=G_(t,r,u,o.tag,i);e&&(this._update(o,n,t),s&&q_(this,n,t)),u=n,++c};return o.nested?e.items.length&&h(e.items[0]):vg(e,h),pv(r,c),r};var Y_=null,K_=null,Z_={group:function(t,e,n){const r=Y_=e.childNodes[2];K_=r.__values__,t.foreground(Q_,n,this),K_=e.__values__,Y_=e.childNodes[1],t.content(Q_,n,this);const i=Y_=e.childNodes[0];t.background(Q_,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==K_.events&&(tO(r,"pointer-events",o),tO(i,"pointer-events",o),K_.events=o),n.strokeForeground&&n.stroke){const t=n.fill;tO(r,"display",null),this.style(i,n),tO(i,"stroke",null),t&&(n.fill=null),K_=r.__values__,this.style(r,n),t&&(n.fill=t),Y_=null}else tO(r,"display","none")},image:function(t,e,n){!1===n.smooth?(J_(e,"image-rendering","optimizeSpeed"),J_(e,"image-rendering","pixelated")):J_(e,"image-rendering",null)},text:function(t,e,n){let r,i,o,a,s=Fm(n);Object(rt["A"])(s)?(i=s.map(t=>$m(n,t)),r=i.join("\n"),r!==K_.text&&(pv(e,0),o=e.ownerDocument,a=Im(n),i.forEach((t,r)=>{const i=hv(o,"tspan",L_);i.__data__=n,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",a)),e.appendChild(i)}),K_.text=r)):(i=$m(n,s),i!==K_.text&&(e.textContent=i,K_.text=i)),tO(e,"font-family",Bm(n)),tO(e,"font-size",Nm(n)+"px"),tO(e,"font-style",n.fontStyle),tO(e,"font-variant",n.fontVariant),tO(e,"font-weight",n.fontWeight)}};function J_(t,e,n){n!==K_[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),K_[e]=n)}function Q_(t,e,n){e!==K_[t]&&(n?eO(Y_,t,e,n):tO(Y_,t,e),K_[t]=e)}function tO(t,e,n){null!=n?t.setAttribute(e,n):t.removeAttribute(e)}function eO(t,e,n,r){null!=n?t.setAttributeNS(r,e,n):t.removeAttributeNS(r,e)}function nO(){let t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function rO(t){wv.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}B_._update=function(t,e,n){Y_=e,K_=e.__values__,O_(Q_,n),t.attr(Q_,n,this);const r=Z_[t.type];r&&r.call(this,t,e,n),Y_&&this.style(Y_,n)},B_.style=function(t,e){if(null!=e)for(const n in F_){let r="font"===n?Bm(e):e[n];if(r===K_[n])continue;const i=F_[n];null==r?t.removeAttribute(i):(Ih(r)&&(r=Rh(r,this._defs.gradient,nO())),t.setAttribute(i,r+"")),K_[n]=r}};var iO=Object(rt["y"])(rO,wv),oO=wv.prototype;function aO(t,e,n,r,i){if(null==e)return t;if("bgrect"===r&&!1===n.interactive&&(t["pointer-events"]="none"),"bgfore"===r&&(!1===n.interactive&&(t["pointer-events"]="none"),t.display="none",null!==e.fill))return t;"image"===r&&!1===e.smooth&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),"text"===r&&(t["font-family"]=Bm(e),t["font-size"]=Nm(e)+"px",e.fontStyle&&(t["font-style"]=e.fontStyle),e.fontVariant&&(t["font-variant"]=e.fontVariant),e.fontWeight&&(t["font-weight"]=e.fontWeight));for(const o in F_){let n=e[o];const r=F_[o];("transparent"!==n||"fill"!==r&&"stroke"!==r)&&null!=n&&(Ih(n)&&(n=Rh(n,i.gradient,"")),t[r]=n)}return t}function sO(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}iO.resize=function(t,e,n,r){oO.resize.call(this,t,e,n,r);var i=this._origin,o=this._text,a={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in Qg)a[s]=Qg[s];o.head=I_("svg",a);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),o.bg=u?I_("rect",{width:this._width,height:this._height,fill:u})+R_("rect"):"",o.root=I_("g",Object(rt["o"])({},P_,{transform:"translate("+i+")"})),o.foot=R_("g")+R_("svg"),this},iO.background=function(){var t=oO.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},iO.svg=function(){var t=this._text;return t.head+t.defs+t.bg+t.root+t.body+t.foot},iO._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},iO.buildDefs=function(){let t,e="";for(const n in this._defs.gradient){const r=this._defs.gradient[n],i=r.stops;"radial"===r.gradient?(e+=I_(t="pattern",{id:Nh+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e+=I_("rect",{width:"1",height:"1",fill:"url(#"+n+")"})+R_("rect"),e+=R_(t),e+=I_(t="radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e+=I_(t="linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let t=0;t<i.length;++t)e+=I_("stop",{offset:i[t].offset,"stop-color":i[t].color})+R_("stop");e+=R_(t)}for(const n in this._defs.clipping){const t=this._defs.clipping[n];e+=I_("clipPath",{id:n}),t.path?e+=I_("path",{d:t.path})+R_("path"):e+=I_("rect",{x:0,y:0,width:t.width,height:t.height})+R_("rect"),e+=R_("clipPath")}return e?I_("defs")+e+R_("defs"):""},iO.attr=function(t,e,n,r){const i={},o=(t,e,n,r)=>{i[r||t]=e};return Array.isArray(n)?n.forEach(t=>t(o,e,this)):n(o,e,this),r&&aO(i,e,t,r,this._defs),i},iO.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then(t=>{t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t})}return null},iO.mark=function(t){const e=tv[t.marktype],n=e.tag,r=[O_,e.attr];let i="";i+=I_("g",Object(rt["o"])({class:gv(t),"clip-path":t.clip?Tp(this,t,t.group):null},S_(t),{"pointer-events":"g"!==n&&!1===t.interactive?"none":null}));const o=o=>{const a=this.href(o);if(a&&(i+=I_("a",a)),i+=I_(n,this.attr(t,o,r,"g"!==n?n:null)),"text"===n){const t=Fm(o);if(Object(rt["A"])(t)){const e={x:0,dy:Im(o)};for(let n=0;n<t.length;++n)i+=I_("tspan",n?e:null)+sO($m(o,t[n]))+R_("tspan")}else i+=sO($m(o,t))}else if("g"===n){const n=o.strokeForeground,r=o.fill,a=o.stroke;n&&a&&(o.stroke=null),i+=I_("path",this.attr(t,o,e.background,"bgrect"))+R_("path"),i+=I_("g",this.attr(t,o,e.content))+this.markGroup(o)+R_("g"),n&&a?(r&&(o.fill=null),o.stroke=a,i+=I_("path",this.attr(t,o,e.foreground,"bgrect"))+R_("path"),r&&(o.fill=r)):i+=I_("path",this.attr(t,o,e.foreground,"bgfore"))+R_("path")}i+=R_(n),a&&(i+=R_("a"))};return e.nested?t.items&&t.items.length&&o(t.items[0]):vg(t,o),i+R_("g")},iO.markGroup=function(t){let e="";return vg(t,t=>{e+=this.mark(t)}),e};var uO="canvas",cO="png",lO="svg",hO="none",fO={Canvas:uO,PNG:cO,SVG:lO,None:hO},dO={};function pO(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(dO[t]=e,this):dO[t]}function gO(t,e,n){const r=[],i=(new Ep).union(e),o=t.marktype;return o?mO(t,i,n,r):"group"===o?yO(t,i,n,r):Object(rt["n"])("Intersect scene must be mark node or group item.")}function mO(t,e,n,r){if(vO(t,e,n)){const i=t.items,o=t.marktype,a=i.length;let s=0;if("group"===o)for(;s<a;++s)yO(i[s],e,n,r);else for(const t=tv[o].isect;s<a;++s){let n=i[s];bO(n,e,t)&&r.push(n)}}return r}function vO(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}function yO(t,e,n,r){n&&n(t.mark)&&bO(t,e,tv.group.isect)&&r.push(t);const i=t.items,o=i&&i.length;if(o){const a=t.x||0,s=t.y||0;e.translate(-a,-s);for(let t=0;t<o;++t)mO(i[t],e,n,r);e.translate(a,s)}return r}function bO(t,e,n){const r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}dO[uO]=dO[cO]={renderer:ey,headless:ey,handler:Hv},dO[lO]={renderer:z_,headless:rO,handler:ay},dO[hO]={};var xO=new Ep,wO=function(t){var e=t.clip;if(Object(rt["D"])(e))e(Hp(xO.clear()));else{if(!e)return;xO.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(xO)},_O=1e-9;function OO(t,e,n){return t===e||("path"===n?SO(t,e):t instanceof Date&&e instanceof Date?+t===+e:Object(rt["E"])(t)&&Object(rt["E"])(e)?Math.abs(t-e)<=_O:t&&e&&(Object(rt["F"])(t)||Object(rt["F"])(e))?null!=t&&null!=e&&CO(t,e):t==e)}function SO(t,e){return OO(qf(t),qf(e))}function CO(t,e){var n,r,i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!OO(t[n],e[n],n))return!1;return typeof t===typeof e}function kO(){Ap(),Mh()}function AO(t){ns.call(this,null,t)}var TO=Object(rt["y"])(AO,ns);function EO(t,e,n){return e(t.bounds.clear(),t,n)}TO.transform=function(t,e){var n,r=e.dataflow,i=t.mark,o=i.marktype,a=tv[o],s=a.bound,u=i.bounds;if(a.nested)i.items.length&&r.dirty(i.items[0]),u=EO(i,s),i.items.forEach((function(t){t.bounds.clear().union(u)}));else if(o===sh||t.modified())switch(e.visit(e.MOD,t=>r.dirty(t)),u.clear(),i.items.forEach(t=>u.union(EO(t,s))),i.role){case uh:case fh:case ch:e.reflow()}else n=e.changed(e.REM),e.visit(e.ADD,t=>{u.union(EO(t,s))}),e.visit(e.MOD,t=>{n=n||u.alignsWith(t.bounds),r.dirty(t),u.union(EO(t,s))}),n&&(u.clear(),i.items.forEach(t=>u.union(t.bounds)));return wO(i),e.modifies("bounds")};var jO=":vega_identifier:";function DO(t){ns.call(this,0,t)}DO.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};var MO=Object(rt["y"])(DO,ns);function NO(t){var e=t._signals[jO];return e||(t._signals[jO]=e=t.add(0)),e}function IO(t){ns.call(this,null,t)}MO.transform=function(t,e){var n=NO(e.dataflow),r=n.value,i=t.as;return e.visit(e.ADD,t=>{t[i]||(t[i]=++r)}),n.set(this.value=r),e};var RO=Object(rt["y"])(IO,ns);function FO(t){var e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function PO(t){ns.call(this,null,t)}RO.transform=function(t,e){var n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,FO(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);var r=n.marktype===sh?Mp:Dp;return e.visit(e.ADD,t=>r.call(t,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e};var $O=Object(rt["y"])(PO,ns),LO={parity:t=>t.filter((t,e)=>e%2?t.opacity=0:1),greedy:(t,e)=>{var n;return t.filter((t,r)=>r&&zO(n.bounds,t.bounds,e)?t.opacity=0:(n=t,1))}};function zO(t,e,n){return n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2)}function BO(t,e){for(var n,r=1,i=t.length,o=t[0].bounds;r<i;o=n,++r)if(zO(o,n=t[r].bounds,e))return!0}function UO(t){var e=t.bounds;return e.width()>1&&e.height()>1}function WO(t,e,n){var r=t.range(),i=new Ep;return e===Xl||e===Zl?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),t=>i.encloses(t.bounds)}function VO(t){return t.forEach(t=>t.opacity=1),t}function HO(t,e){return t.reflow(e.modified()).modifies("opacity")}function qO(t){ns.call(this,null,t)}$O.transform=function(t,e){var n,r,i,o=LO[t.method]||LO.parity,a=e.materialize(e.SOURCE).source,s=t.separation||0;if(a&&a.length){if(!t.method)return t.modified("method")&&(VO(a),e=HO(e,t)),e;if(a=a.filter(UO),a.length){if(t.sort&&(a=a.slice().sort(t.sort)),n=VO(a),e=HO(e,t),n.length>=3&&BO(n,s)){do{n=o(n,s)}while(n.length>=3&&BO(n,s));n.length<3&&!Object(rt["U"])(a).opacity&&(n.length>1&&(Object(rt["U"])(n).opacity=0),Object(rt["U"])(a).opacity=1)}return t.boundScale&&t.boundTolerance>=0&&(r=WO(t.boundScale,t.boundOrient,+t.boundTolerance),a.forEach(t=>{r(t)||(t.opacity=0)})),i=n[0].mark.bounds.clear(),a.forEach(t=>{t.opacity&&i.union(t.bounds)}),e}}};var GO=Object(rt["y"])(qO,ns);GO.transform=function(t,e){var n=e.dataflow;if(e.visit(e.ALL,t=>n.dirty(t)),e.fields&&e.fields["zindex"]){var r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}};const XO=new Ep;function YO(t,e,n){return t[e]===n?0:(t[e]=n,1)}function KO(t){var e=t.items[0].orient;return e===Yl||e===Kl}function ZO(t){var e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function JO(t,e,n,r){var i,o,a=e.items[0],s=a.datum,u=null!=a.translate?a.translate:.5,c=a.orient,l=ZO(s),h=a.range,f=a.offset,d=a.position,p=a.minExtent,g=a.maxExtent,m=s.title&&a.items[l[2]].items[0],v=a.titlePadding,y=a.bounds,b=m&&Pm(m),x=0,w=0;switch(XO.clear().union(y),y.clear(),(i=l[0])>-1&&y.union(a.items[i].bounds),(i=l[1])>-1&&y.union(a.items[i].bounds),c){case Xl:x=d||0,w=-f,o=Math.max(p,Math.min(g,-y.y1)),y.add(0,-o).add(h,0),m&&QO(t,m,o,v,b,0,-1,y);break;case Yl:x=-f,w=d||0,o=Math.max(p,Math.min(g,-y.x1)),y.add(-o,0).add(0,h),m&&QO(t,m,o,v,b,1,-1,y);break;case Kl:x=n+f,w=d||0,o=Math.max(p,Math.min(g,y.x2)),y.add(0,0).add(o,h),m&&QO(t,m,o,v,b,1,1,y);break;case Zl:x=d||0,w=r+f,o=Math.max(p,Math.min(g,y.y2)),y.add(0,0).add(h,o),m&&QO(t,m,o,v,0,0,1,y);break;default:x=a.x,w=a.y}return Lp(y.translate(x,w),a),YO(a,"x",x+u)|YO(a,"y",w+u)&&(a.bounds=XO,t.dirty(a),a.bounds=y,t.dirty(a)),a.mark.bounds.clear().union(y)}function QO(t,e,n,r,i,o,a,s){const u=e.bounds;if(e.auto){const s=a*(n+i+r);let c=0,l=0;t.dirty(e),o?c=(e.x||0)-(e.x=s):l=(e.y||0)-(e.y=s),e.mark.bounds.clear().union(u.translate(-c,-l)),t.dirty(e)}s.union(u)}const tS=(t,e)=>Math.floor(Math.min(t,e)),eS=(t,e)=>Math.ceil(Math.max(t,e));function nS(t){for(var e,n,r=t.items,i=r.length,o=0,a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};o<i;++o)if(e=r[o],n=e.items,e.marktype===sh)switch(e.role){case uh:case fh:case ch:break;case dh:a.rowheaders.push(...n);break;case ph:a.rowfooters.push(...n);break;case mh:a.colheaders.push(...n);break;case vh:a.colfooters.push(...n);break;case gh:a.rowtitle=n[0];break;case yh:a.coltitle=n[0];break;default:a.marks.push(...n)}return a}function rS(t){return(new Ep).set(0,0,t.width||0,t.height||0)}function iS(t){var e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function oS(t,e,n){var r=Object(rt["F"])(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function aS(t){return t<0?Math.ceil(-t):0}function sS(t,e,n){var r,i,o,a,s,u,c,l,h,f,d,p=!n.nodirty,g=n.bounds===Th?rS:iS,m=XO.set(0,0,0,0),v=oS(n.align,Eh),y=oS(n.align,jh),b=oS(n.padding,Eh),x=oS(n.padding,jh),w=n.columns||e.length,_=w<=0?1:Math.ceil(e.length/w),O=e.length,S=Array(O),C=Array(w),k=0,A=Array(O),T=Array(_),E=0,j=Array(O),D=Array(O),M=Array(O);for(i=0;i<w;++i)C[i]=0;for(i=0;i<_;++i)T[i]=0;for(i=0;i<O;++i)u=e[i],s=M[i]=g(u),u.x=u.x||0,j[i]=0,u.y=u.y||0,D[i]=0,o=i%w,a=~~(i/w),k=Math.max(k,c=Math.ceil(s.x2)),E=Math.max(E,l=Math.ceil(s.y2)),C[o]=Math.max(C[o],c),T[a]=Math.max(T[a],l),S[i]=b+aS(s.x1),A[i]=x+aS(s.y1),p&&t.dirty(e[i]);for(i=0;i<O;++i)i%w===0&&(S[i]=0),i<w&&(A[i]=0);if(v===Ah)for(o=1;o<w;++o){for(d=0,i=o;i<O;i+=w)d<S[i]&&(d=S[i]);for(i=o;i<O;i+=w)S[i]=d+C[o-1]}else if(v===kh){for(d=0,i=0;i<O;++i)i%w&&d<S[i]&&(d=S[i]);for(i=0;i<O;++i)i%w&&(S[i]=d+k)}else for(v=!1,o=1;o<w;++o)for(i=o;i<O;i+=w)S[i]+=C[o-1];if(y===Ah)for(a=1;a<_;++a){for(d=0,i=a*w,r=i+w;i<r;++i)d<A[i]&&(d=A[i]);for(i=a*w;i<r;++i)A[i]=d+T[a-1]}else if(y===kh){for(d=0,i=w;i<O;++i)d<A[i]&&(d=A[i]);for(i=w;i<O;++i)A[i]=d+E}else for(y=!1,a=1;a<_;++a)for(i=a*w,r=i+w;i<r;++i)A[i]+=T[a-1];for(h=0,i=0;i<O;++i)h=S[i]+(i%w?h:0),j[i]+=h-e[i].x;for(o=0;o<w;++o)for(f=0,i=o;i<O;i+=w)f+=A[i],D[i]+=f-e[i].y;if(v&&oS(n.center,Eh)&&_>1)for(i=0;i<O;++i)s=v===kh?k:C[i%w],h=s-M[i].x2-e[i].x-j[i],h>0&&(j[i]+=h/2);if(y&&oS(n.center,jh)&&1!==w)for(i=0;i<O;++i)s=y===kh?E:T[~~(i/w)],f=s-M[i].y2-e[i].y-D[i],f>0&&(D[i]+=f/2);for(i=0;i<O;++i)m.union(M[i].translate(j[i],D[i]));switch(h=oS(n.anchor,oh),f=oS(n.anchor,ah),oS(n.anchor,Eh)){case ih:h-=m.width();break;case rh:h-=m.width()/2}switch(oS(n.anchor,jh)){case ih:f-=m.height();break;case rh:f-=m.height()/2}for(h=Math.round(h),f=Math.round(f),m.clear(),i=0;i<O;++i)e[i].mark.bounds.clear();for(i=0;i<O;++i)u=e[i],u.x+=j[i]+=h,u.y+=D[i]+=f,m.union(u.mark.bounds.union(u.bounds.translate(j[i],D[i]))),p&&t.dirty(u);return m}function uS(t,e,n){var r,i,o,a,s,u,c,l=nS(e),h=l.marks,f=n.bounds===Th?cS:lS,d=n.offset,p=n.columns||h.length,g=p<=0?1:Math.ceil(h.length/p),m=g*p;const v=sS(t,h,n);v.empty()&&v.set(0,0,0,0),l.rowheaders&&(u=oS(n.headerBand,jh,null),r=hS(t,l.rowheaders,h,p,g,-oS(d,"rowHeader"),tS,0,f,"x1",0,p,1,u)),l.colheaders&&(u=oS(n.headerBand,Eh,null),i=hS(t,l.colheaders,h,p,p,-oS(d,"columnHeader"),tS,1,f,"y1",0,1,p,u)),l.rowfooters&&(u=oS(n.footerBand,jh,null),o=hS(t,l.rowfooters,h,p,g,oS(d,"rowFooter"),eS,0,f,"x2",p-1,p,1,u)),l.colfooters&&(u=oS(n.footerBand,Eh,null),a=hS(t,l.colfooters,h,p,p,oS(d,"columnFooter"),eS,1,f,"y2",m-p,1,p,u)),l.rowtitle&&(s=oS(n.titleAnchor,jh),c=oS(d,"rowTitle"),c=s===ih?o+c:r-c,u=oS(n.titleBand,jh,.5),fS(t,l.rowtitle,c,0,v,u)),l.coltitle&&(s=oS(n.titleAnchor,Eh),c=oS(d,"columnTitle"),c=s===ih?a+c:i-c,u=oS(n.titleBand,Eh,.5),fS(t,l.coltitle,c,1,v,u))}function cS(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function lS(t,e){return t.bounds[e]}function hS(t,e,n,r,i,o,a,s,u,c,l,h,f,d){var p,g,m,v,y,b,x,w,_,O=n.length,S=0,C=0;if(!O)return S;for(p=l;p<O;p+=h)n[p]&&(S=a(S,u(n[p],c)));if(!e.length)return S;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),S+=o,g=0,v=e.length;g<v;++g)t.dirty(e[g]),e[g].mark.bounds.clear();for(p=l,g=0,v=e.length;g<v;++g,p+=h){for(b=e[g],y=b.mark.bounds,m=p;m>=0&&null==(x=n[m]);m-=f);s?(w=null==d?x.x:Math.round(x.bounds.x1+d*x.bounds.width()),_=S):(w=S,_=null==d?x.y:Math.round(x.bounds.y1+d*x.bounds.height())),y.union(b.bounds.translate(w-(b.x||0),_-(b.y||0))),b.x=w,b.y=_,t.dirty(b),C=a(C,y[c])}return C}function fS(t,e,n,r,i,o){if(e){t.dirty(e);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),e.bounds.translate(a-(e.x||0),s-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=a,e.y=s,t.dirty(e)}}function dS(t,e){const n=t[e]||{};return(e,r)=>null!=n[e]?n[e]:null!=t[e]?t[e]:r}function pS(t,e){var n=-1/0;return t.forEach(t=>{null!=t.offset&&(n=Math.max(n,t.offset))}),n>-1/0?n:e}function gS(t,e,n,r,i,o,a){const s=dS(n,e),u=pS(t,s("offset",0)),c=s("anchor",nh),l=c===ih?1:c===rh?.5:0,h={align:Ah,bounds:s("bounds",Th),columns:"vertical"===s("direction")?1:t.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(e){case Yl:h.anchor={x:Math.floor(r.x1)-u,column:ih,y:l*(a||r.height()+2*r.y1),row:c};break;case Kl:h.anchor={x:Math.ceil(r.x2)+u,y:l*(a||r.height()+2*r.y1),row:c};break;case Xl:h.anchor={y:Math.floor(i.y1)-u,row:ih,x:l*(o||i.width()+2*i.x1),column:c};break;case Zl:h.anchor={y:Math.ceil(i.y2)+u,x:l*(o||i.width()+2*i.x1),column:c};break;case Jl:h.anchor={x:u,y:u};break;case Ql:h.anchor={x:o-u,y:u,column:ih};break;case th:h.anchor={x:u,y:a-u,row:ih};break;case eh:h.anchor={x:o-u,y:a-u,column:ih,row:ih};break}return h}function mS(t,e){var n,r,i=e.items[0],o=i.datum,a=i.orient,s=i.bounds,u=i.x,c=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),yS(t,i,i.items[0].items[0]),s=vS(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),o.type===xh&&wS(i.items[0].items[0].items[0].items),a!==Ch&&(i.x=u=0,i.y=c=0),i.width=n,i.height=r,Lp(s.set(u,c,u+n,c+r),i),i.mark.bounds.clear().union(s),i}function vS(t,e){return t.items.forEach(t=>e.union(t.bounds)),e.x1=t.padding,e.y1=t.padding,e}function yS(t,e,n){var r=e.padding,i=r-n.x,o=r-n.y;if(e.datum.title){var a=e.items[1].items[0],s=a.anchor,u=e.titlePadding||0,c=r-a.x,l=r-a.y;switch(a.orient){case Yl:i+=Math.ceil(a.bounds.width())+u;break;case Kl:case Zl:break;default:o+=a.bounds.height()+u}switch((i||o)&&xS(t,n,i,o),a.orient){case Yl:l+=bS(e,n,a,s,1,1);break;case Kl:c+=bS(e,n,a,ih,0,0)+u,l+=bS(e,n,a,s,1,1);break;case Zl:c+=bS(e,n,a,s,0,0),l+=bS(e,n,a,ih,-1,0,1)+u;break;default:c+=bS(e,n,a,s,0,0)}(c||l)&&xS(t,a,c,l),(c=Math.round(a.bounds.x1-r))<0&&(xS(t,n,-c,0),xS(t,a,-c,0))}else(i||o)&&xS(t,n,i,o)}function bS(t,e,n,r,i,o,a){const s="symbol"!==t.datum.type,u=n.datum.vgrad,c=!s||!o&&u||a?e:e.items[0],l=c.bounds[i?"y2":"x2"]-t.padding,h=u&&o?l:0,f=u&&o?0:l,d=i<=0?0:Pm(n);return Math.round(r===nh?h:r===ih?f-d:.5*(l-d))}function xS(t,e,n,r){e.x+=n,e.y+=r,e.bounds.translate(n,r),e.mark.bounds.translate(n,r),t.dirty(e)}function wS(t){var e=t.reduce((t,e)=>(t[e.column]=Math.max(e.bounds.x2-e.x,t[e.column]||0),t),{});t.forEach(t=>{t.width=e[t.column],t.height=t.bounds.y2-t.y})}function _S(t,e,n,r,i){var o,a=e.items[0],s=a.frame,u=a.orient,c=a.anchor,l=a.offset,h=a.padding,f=a.items[0].items[0],d=a.items[1]&&a.items[1].items[0],p=u===Yl||u===Kl?r:n,g=0,m=0,v=0,y=0,b=0;if(s!==sh?u===Yl?(g=i.y2,p=i.y1):u===Kl?(g=i.y1,p=i.y2):(g=i.x1,p=i.x2):u===Yl&&(g=r,p=0),o=c===nh?g:c===ih?p:(g+p)/2,d&&d.text){switch(u){case Xl:case Zl:b=f.bounds.height()+h;break;case Yl:y=f.bounds.width()+h;break;case Kl:y=-f.bounds.width()-h;break}XO.clear().union(d.bounds),XO.translate(y-(d.x||0),b-(d.y||0)),YO(d,"x",y)|YO(d,"y",b)&&(t.dirty(d),d.bounds.clear().union(XO),d.mark.bounds.clear().union(XO),t.dirty(d)),XO.clear().union(d.bounds)}else XO.clear();switch(XO.union(f.bounds),u){case Xl:m=o,v=i.y1-XO.height()-l;break;case Yl:m=i.x1-XO.width()-l,v=o;break;case Kl:m=i.x2+XO.width()+l,v=o;break;case Zl:m=o,v=i.y2+l;break;default:m=a.x,v=a.y}return YO(a,"x",m)|YO(a,"y",v)&&(XO.translate(m,v),t.dirty(a),a.bounds.clear().union(XO),e.bounds.clear().union(XO),t.dirty(a)),a.bounds}function OS(t){ns.call(this,null,t)}var SS=Object(rt["y"])(OS,ns);function CS(t){return t&&"legend-entry"!==t.mark.role}function kS(t,e,n){var r,i,o,a,s,u,c=e.items,l=Math.max(0,e.width||0),h=Math.max(0,e.height||0),f=(new Ep).set(0,0,l,h),d=f.clone(),p=f.clone(),g=[];for(s=0,u=c.length;s<u;++s)switch(i=c[s],i.role){case uh:a=KO(i)?d:p,a.union(JO(t,i,l,h));break;case ch:r=i;break;case fh:g.push(mS(t,i));break;case lh:case hh:case dh:case ph:case gh:case mh:case vh:case yh:d.union(i.bounds),p.union(i.bounds);break;default:f.union(i.bounds)}if(g.length){const e={};g.forEach(t=>{o=t.orient||Kl,o!==Ch&&(e[o]||(e[o]=[])).push(t)});for(let r in e){const i=e[r];sS(t,i,gS(i,r,n.legends,d,p,l,h))}g.forEach(e=>{const r=e.bounds;if(r.equals(e._bounds)||(e.bounds=e._bounds,t.dirty(e),e.bounds=r,t.dirty(e)),n.autosize&&n.autosize.type===wh)switch(e.orient){case Yl:case Kl:f.add(r.x1,0).add(r.x2,0);break;case Xl:case Zl:f.add(0,r.y1).add(0,r.y2)}else f.union(r)})}f.union(d).union(p),r&&f.union(_S(t,r,l,h,f)),e.clip&&f.set(0,0,e.width||0,e.height||0),AS(t,e,f,n)}function AS(t,e,n,r){const i=r.autosize||{},o=i.type;if(t._autosize<1||!o)return;let a=t._width,s=t._height,u=Math.max(0,e.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,e.height||0),f=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.y2-h));if(i.contains===bh){const e=t.padding();a-=e.left+e.right,s-=e.top+e.bottom}o===Ch?(c=0,f=0,u=a,h=s):o===wh?(u=Math.max(0,a-c-l),h=Math.max(0,s-f-d)):o===_h?(u=Math.max(0,a-c-l),s=h+f+d):o===Oh?(a=u+c+l,h=Math.max(0,s-f-d)):o===Sh&&(a=u+c+l,s=h+f+d),t._resizeView(a,s,u,h,[c,f],i.resize)}function TS(t){ns.call(this,null,t)}SS.transform=function(t,e){var n=e.dataflow;return t.mark.items.forEach(e=>{t.layout&&uS(n,e,t.layout),kS(n,e,t)}),CS(t.mark.group)?e.reflow():e};var ES=Object(rt["y"])(TS,ns);function jS(t){ns.call(this,null,t)}ES.transform=function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=this.value,o=t.scale,a=null==t.count?t.values?t.values.length:10:t.count,s=qw(o,a,t.minstep),u=t.format||Yw(n,o,s,t.formatSpecifier,t.formatType,!!t.values),c=t.values?Gw(o,t.values,s):Xw(o,s);return i&&(r.rem=i),i=c.map((function(t,e){return ht({index:e/(c.length-1||1),value:t,label:u(t)})})),t.extra&&i.length&&i.push(ht({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r};var DS=Object(rt["y"])(jS,ns);function MS(){return ht({})}function NS(t){const e=Object(rt["s"])().test(t=>t.exit);return e.lookup=n=>e.get(t(n)),e}function IS(t){ns.call(this,null,t)}DS.transform=function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||MS,o=t.key||ct,a=this.value;return Object(rt["A"])(r.encode)&&(r.encode=null),a&&(t.modified("key")||e.modified(o))&&Object(rt["n"])("DataJoin does not support modified key function or fields."),a||(e=e.addAll(),this.value=a=NS(o)),e.visit(e.ADD,t=>{const e=o(t);let n=a.get(e);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(n=i(t),a.set(e,n),r.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,t=>{const e=o(t),n=a.get(e);n&&(n.datum=t,r.mod.push(n))}),e.visit(e.REM,t=>{const e=o(t),n=a.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),(e.clean()||t.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r};var RS=Object(rt["y"])(IS,ns);function FS(t){ns.call(this,[],t)}RS.transform=function(t,e){var n=e.fork(e.ADD_REM),r=t.mod||!1,i=t.encoders,o=e.encode;if(Object(rt["A"])(o)){if(!n.changed()&&!o.every((function(t){return i[t]})))return e.StopPropagation;o=o[0],n.encode=null}var a="enter"===o,s=i.update||rt["r"],u=i.enter||rt["r"],c=i.exit||rt["r"],l=(o&&!a?i[o]:s)||rt["r"];if(e.changed(e.ADD)&&(e.visit(e.ADD,(function(e){u(e,t),s(e,t)})),n.modifies(u.output),n.modifies(s.output),l!==rt["r"]&&l!==s&&(e.visit(e.ADD,(function(e){l(e,t)})),n.modifies(l.output))),e.changed(e.REM)&&c!==rt["r"]&&(e.visit(e.REM,(function(e){c(e,t)})),n.modifies(c.output)),a||l!==rt["r"]){var h=e.MOD|(t.modified()?e.REFLOW:0);a?(e.visit(h,(function(e){var i=u(e,t)||r;(l(e,t)||i)&&n.mod.push(e)})),n.mod.length&&n.modifies(u.output)):e.visit(h,(function(e){(l(e,t)||r)&&n.mod.push(e)})),n.mod.length&&n.modifies(l.output)}return n.changed()?n:e.StopPropagation};var PS=Object(rt["y"])(FS,ns);PS.transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n,r,i,o,a,s=e.dataflow.locale(),u=e.fork(e.NO_SOURCE|e.NO_FIELDS),c=this.value,l=t.type||zw,h=t.scale,f=+t.limit,d=qw(h,null==t.count?5:t.count,t.minstep),p=!!t.values||l===zw,g=t.format||i_(s,h,d,l,t.formatSpecifier,t.formatType,p),m=t.values||Qw(h,d);return c&&(u.rem=c),l===zw?(f&&m.length>f?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),c=m.slice(0,f-1),a=!0):c=m,Object(rt["D"])(i=t.size)?(t.values||0!==h(c[0])||(c=c.slice(1)),o=c.reduce((function(e,n){return Math.max(e,i(n,t))}),0)):i=Object(rt["l"])(o=i||8),c=c.map((function(e,n){return ht({index:n,label:g(e,n,c),value:e,offset:o,size:i(e,t)})})),a&&(a=m[c.length],c.push(ht({index:c.length,label:`…${m.length-c.length} entries`,value:a,offset:o,size:i(a,t)})))):l===Uw?(n=h.domain(),r=Dw(h,n[0],Object(rt["U"])(n)),m.length<3&&!t.values&&n[0]!==Object(rt["U"])(n)&&(m=[n[0],Object(rt["U"])(n)]),c=m.map((function(t,e){return ht({index:e,label:g(t,e,m),value:t,perc:r(t)})}))):(i=m.length-1,r=l_(h),c=m.map((function(t,e){return ht({index:e,label:g(t,e,m),value:t,perc:e?r(t):0,perc2:e===i?1:r(m[e+1])})}))),u.source=c,u.add=c,this.value=c,u};var $S=Object(rt["s"])({line:HS,"line-radial":qS,arc:GS,"arc-radial":XS,curve:YS,"curve-radial":KS,"orthogonal-horizontal":ZS,"orthogonal-vertical":JS,"orthogonal-radial":QS,"diagonal-horizontal":tC,"diagonal-vertical":eC,"diagonal-radial":nC});function LS(t){return t.source.x}function zS(t){return t.source.y}function BS(t){return t.target.x}function US(t){return t.target.y}function WS(t){ns.call(this,{},t)}WS.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};var VS=Object(rt["y"])(WS,ns);function HS(t,e,n,r){return"M"+t+","+e+"L"+n+","+r}function qS(t,e,n,r){return HS(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))}function GS(t,e,n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+t+","+e+"A"+a+","+a+" "+s+" 0 1 "+n+","+r}function XS(t,e,n,r){return GS(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))}function YS(t,e,n,r){var i=n-t,o=r-e,a=.2*(i+o),s=.2*(o-i);return"M"+t+","+e+"C"+(t+a)+","+(e+s)+" "+(n+s)+","+(r-a)+" "+n+","+r}function KS(t,e,n,r){return YS(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))}function ZS(t,e,n,r){return"M"+t+","+e+"V"+r+"H"+n}function JS(t,e,n,r){return"M"+t+","+e+"H"+n+"V"+r}function QS(t,e,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(n),s=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*i+","+e*o+"A"+e+","+e+" 0 0,"+(u?1:0)+" "+e*a+","+e*s+"L"+r*a+","+r*s}function tC(t,e,n,r){var i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r}function eC(t,e,n,r){var i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r}function nC(t,e,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(n),s=Math.sin(n),u=(e+r)/2;return"M"+e*i+","+e*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s}function rC(t,e){let n=0;if(void 0===e)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function iC(t){ns.call(this,null,t)}VS.transform=function(t,e){var n=t.sourceX||LS,r=t.sourceY||zS,i=t.targetX||BS,o=t.targetY||US,a=t.as||"path",s=t.orient||"vertical",u=t.shape||"line",c=$S.get(u+"-"+s)||$S.get(u);return c||Object(rt["n"])("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,(function(t){t[a]=c(n(t),r(t),i(t),o(t))})),e.reflow(t.modified()).modifies(a)},iC.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};var oC=Object(rt["y"])(iC,ns);oC.transform=function(t,e){var n,r,i,o=t.as||["startAngle","endAngle"],a=o[0],s=o[1],u=t.field||rt["O"],c=t.startAngle||0,l=null!=t.endAngle?t.endAngle:2*Math.PI,h=e.source,f=h.map(u),d=f.length,p=c,g=(l-c)/rC(f),m=vl(d);for(t.sort&&m.sort((function(t,e){return f[t]-f[e]})),n=0;n<d;++n)i=f[m[n]],r=h[m[n]],r[a]=p,r[s]=p+=i*g;return this.value=f,e.reflow(t.modified()).modifies(o)};var aC=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}};function sC(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}var uC=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return sC((n-r/e)*e,a,i,o,s)}},cC=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return sC((n-r/e)*e,i,o,a,s)}},lC=function(t){return function(){return t}};function hC(t,e){return function(n){return t+n*e}}function fC(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function dC(t){return 1===(t=+t)?pC:function(e,n){return n-e?fC(e,n,t):lC(isNaN(e)?n:e)}}function pC(t,e){var n=e-t;return n?hC(t,n):lC(isNaN(t)?e:t)}var gC=function t(e){var n=dC(e);function r(t,e){var r=n((t=Object(Zy["f"])(t)).r,(e=Object(Zy["f"])(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=pC(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function mC(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Object(Zy["f"])(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}mC(uC),mC(cC);var vC=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function yC(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bC(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=TC(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var xC=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},wC=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},_C=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=TC(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},OC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SC=new RegExp(OC.source,"g");function CC(t){return function(){return t}}function kC(t){return function(e){return t(e)+""}}var AC=function(t,e){var n,r,i,o=OC.lastIndex=SC.lastIndex=0,a=-1,s=[],u=[];t+="",e+="";while((n=OC.exec(t))&&(r=SC.exec(e)))(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:wC(n,r)})),o=SC.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?kC(u[0].x):CC(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},TC=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?lC(e):("number"===r?wC:"string"===r?(n=Object(Zy["a"])(e))?(e=n,gC):AC:e instanceof Zy["a"]?gC:e instanceof Date?xC:yC(e)?vC:Array.isArray(e)?bC:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?_C:wC)(t,e)},EC=5;function jC(t){const e=t.type;return!t.bins&&(e===hy||e===dy||e===py)}function DC(t){return Bx(t)&&t!==yy}var MC=Object(rt["db"])(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function NC(t){ns.call(this,null,t),this.modified(!0)}var IC=Object(rt["y"])(NC,ns);function RC(t){var e,n=t.type,r="";return n===yy?yy+"-"+hy:(FC(t)&&(e=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0,r=2===e?yy+"-":3===e?by+"-":""),(r+n||hy).toLowerCase())}function FC(t){const e=t.type;return Bx(e)&&e!==my&&e!==vy&&(t.scheme||t.range&&t.range.length&&t.range.every(rt["H"]))}function PC(t,e,n){var r=$C(t,e.domainRaw,n);if(r>-1)return r;var i,o,a=e.domain,s=t.type,u=e.zero||void 0===e.zero&&jC(t);if(!a)return 0;if(DC(s)&&e.padding&&a[0]!==Object(rt["U"])(a)&&(a=LC(s,a,e.range,e.padding,e.exponent,e.constant)),(u||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(a=a.slice()).length-1||1,u&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=e.domainMin&&(a[0]=e.domainMin),null!=e.domainMax&&(a[i]=e.domainMax),null!=e.domainMid)){o=e.domainMid;const t=o>a[i]?i+1:o<a[0]?0:i;t!==i&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(t,0,o)}return t.domain(zC(s,a,n)),s===Oy&&t.unknown(e.domainImplicit?zy:void 0),e.nice&&t.nice&&t.nice(!0!==e.nice&&qw(t,e.nice)||null),a.length}function $C(t,e,n){return e?(t.domain(zC(t.type,e,n)),e.length):-1}function LC(t,e,n,r,i,o){var a=Math.abs(Object(rt["U"])(n)-n[0]),s=a/(a-2*r),u=t===fy?Object(rt["mb"])(e,null,s):t===py?Object(rt["nb"])(e,null,s,.5):t===dy?Object(rt["nb"])(e,null,s,i||1):t===gy?Object(rt["ob"])(e,null,s,o||1):Object(rt["lb"])(e,null,s);return e=e.slice(),e[0]=u[0],e[e.length-1]=u[1],e}function zC(t,e,n){if(Vx(t)){var r=Math.abs(e.reduce((function(t,e){return t+(e<0?-1:e>0?1:0)}),0));r!==e.length&&n.warn("Log scale domain includes zero: "+Object(rt["Z"])(e))}return e}function BC(t,e,n){let r=e.bins;if(r&&!Object(rt["A"])(r)){let e=t.domain(),n=e[0],i=Object(rt["U"])(e),o=null==r.start?n:r.start,a=null==r.stop?i:r.stop,s=r.step;s||Object(rt["n"])("Scale bins parameter missing step property."),o<n&&(o=s*Math.ceil(n/s)),a>i&&(a=s*Math.floor(i/s)),r=vl(o,a+s/2,s)}return r?t.bins=r:t.bins&&delete t.bins,t.type===ky&&(r?e.domain||e.domainRaw||(t.domain(r),n=r.length):t.bins=t.domain()),n}function UC(t,e,n){var r=t.type,i=e.round||!1,o=e.range;if(null!=e.rangeStep)o=WC(r,e,n);else if(e.scheme&&(o=VC(r,e,n),Object(rt["D"])(o))){if(t.interpolator)return t.interpolator(o);Object(rt["n"])(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&qx(r))return t.interpolator(Ew(qC(o,e.reverse),e.interpolate,e.interpolateGamma));o&&e.interpolate&&t.interpolate?t.interpolate(Mw(e.interpolate,e.interpolateGamma)):Object(rt["D"])(t.round)?t.round(i):Object(rt["D"])(t.rangeRound)&&t.interpolate(i?aC:TC),o&&t.range(qC(o,e.reverse))}function WC(t,e,n){t!==Cy&&t!==Sy&&Object(rt["n"])("Only band and point scales support rangeStep.");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i=t===Sy?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*cy(n,i,r)]}function VC(t,e,n){var r,i,o=e.schemeExtent;return Object(rt["A"])(e.scheme)?i=Ew(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),i=Lw(r),i||Object(rt["n"])("Unrecognized scheme name: "+e.scheme)),n=t===_y?n+1:t===ky?n-1:t===xy||t===wy?+e.schemeCount||EC:n,qx(t)?HC(i,o,e.reverse):Object(rt["D"])(i)?jw(HC(i,o),n):t===Oy?i:i.slice(0,n)}function HC(t,e,n){return Object(rt["D"])(t)&&(e||n)?Tw(t,qC(e||[0,1],n)):t}function qC(t,e){return e?t.slice().reverse():t}function GC(t){ns.call(this,null,t)}IC.transform=function(t,e){var n=e.dataflow,r=this.value,i=RC(t);for(i in r&&i===r.type||(this.value=r=$x(i)()),t)if(!MC[i]){if("padding"===i&&DC(r.type))continue;Object(rt["D"])(r[i])?r[i](t[i]):n.warn("Unsupported scale property: "+i)}return UC(r,t,BC(r,t,PC(r,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)};var XC=Object(rt["y"])(GC,ns);XC.transform=function(t,e){var n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(gt(t.sort)),this.modified(n),e};var YC="zero",KC="center",ZC="normalize",JC=["y0","y1"];function QC(t){ns.call(this,null,t)}QC.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:YC,values:[YC,KC,ZC]},{name:"as",type:"string",array:!0,length:2,default:JC}]};var tk=Object(rt["y"])(QC,ns);function ek(t,e,n,r,i){for(var o,a=(e-t.sum)/2,s=t.length,u=0;u<s;++u)o=t[u],o[r]=a,o[i]=a+=Math.abs(n(o))}function nk(t,e,n,r,i){for(var o,a=1/t.sum,s=0,u=t.length,c=0,l=0;c<u;++c)o=t[c],o[r]=s,o[i]=s=a*(l+=Math.abs(n(o)))}function rk(t,e,n,r,i){for(var o,a,s=0,u=0,c=t.length,l=0;l<c;++l)a=t[l],o=+n(a),o<0?(a[r]=u,a[i]=u+=o):(a[r]=s,a[i]=s+=o)}function ik(t,e,n,r){var i,o,a,s,u,c,l,h,f,d=[],p=function(t){return t(u)};if(null==e)d.push(t.slice());else for(i={},o=0,a=t.length;o<a;++o)u=t[o],c=e.map(p),l=i[c],l||(i[c]=l=[],d.push(l)),l.push(u);for(c=0,f=0,s=d.length;c<s;++c){for(l=d[c],o=0,h=0,a=l.length;o<a;++o)h+=Math.abs(r(l[o]));l.sum=h,h>f&&(f=h),n&&l.sort(n)}return d.max=f,d}function ok(){}tk.transform=function(t,e){var n,r,i,o,a=t.as||JC,s=a[0],u=a[1],c=gt(t.sort),l=t.field||rt["O"],h=t.offset===KC?ek:t.offset===ZC?nk:rk;for(n=ik(e.source,t.groupby,c,l),r=0,i=n.length,o=n.max;r<i;++r)h(n[r],o,l,s,u);return e.reflow(t.modified()).modifies(a)};const ak=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];var sk=function(){var t=1,e=1,n=s;function r(t,e){return e.map(e=>i(t,e))}function i(t,e){var r=[],i=[];return o(t,e,(function(o){n(o,t,e),uk(o)>0?r.push([o]):i.push(o)})),i.forEach((function(t){for(var e,n=0,i=r.length;n<i;++n)if(-1!==ck((e=r[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:e,coordinates:r}}function o(n,r,i){var o,s,u,c,l,h,f=new Array,d=new Array;o=s=-1,c=n[0]>=r,ak[c<<1].forEach(p);while(++o<t-1)u=c,c=n[o+1]>=r,ak[u|c<<1].forEach(p);ak[c<<0].forEach(p);while(++s<e-1){o=-1,c=n[s*t+t]>=r,l=n[s*t]>=r,ak[c<<1|l<<2].forEach(p);while(++o<t-1)u=c,c=n[s*t+t+o+1]>=r,h=l,l=n[s*t+o+1]>=r,ak[u|c<<1|l<<2|h<<3].forEach(p);ak[c|l<<3].forEach(p)}o=-1,l=n[s*t]>=r,ak[l<<2].forEach(p);while(++o<t-1)h=l,l=n[s*t+o+1]>=r,ak[l<<2|h<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+o,t[0][1]+s],u=[t[1][0]+o,t[1][1]+s],c=a(r),l=a(u);(e=d[c])?(n=f[l])?(delete d[e.end],delete f[n.start],e===n?(e.ring.push(u),i(e.ring)):f[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(u),d[e.end=l]=e):(e=f[l])?(n=d[c])?(delete f[e.start],delete d[n.end],e===n?(e.ring.push(u),i(e.ring)):f[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(r),f[e.start=c]=e):f[c]=d[l]={start:c,end:l,ring:[r,u]}}ak[l<<3].forEach(p)}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var o,a=n[0],s=n[1],u=0|a,c=0|s,l=r[c*t+u];a>0&&a<t&&u===a&&(o=r[c*t+u-1],n[0]=a+(i-o)/(l-o)-.5),s>0&&s<e&&c===s&&(o=r[(c-1)*t+u],n[1]=s+(i-o)/(l-o)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.floor(n[0]),o=Math.floor(n[1]);return i>=0&&o>=0||Object(rt["n"])("invalid size"),t=i,e=o,r},r.smooth=function(t){return arguments.length?(n=t?s:ok,r):n===s},r};function uk(t){var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];while(++e<n)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}function ck(t,e){var n,r=-1,i=e.length;while(++r<i)if(n=lk(t,e[r]))return n;return 0}function lk(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],c=u[0],l=u[1],h=t[s],f=h[0],d=h[1];if(hk(u,h,e))return 0;l>r!==d>r&&n<(f-c)*(r-l)/(d-l)+c&&(i=-i)}return i}function hk(t,e,n){var r;return fk(t,e,n)&&dk(t[r=+(t[0]===e[0])],n[r],e[r])}function fk(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function dk(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}var pk=function(t,e,n){return function(r){var i=Object(rt["p"])(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,u=e?Le(o,a,t):s/(t+1);return vl(u,a,u)}};function gk(t){ns.call(this,null,t)}gk.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};var mk=Object(rt["y"])(gk,ns);function vk(t,e,n){const r=pk(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(t.map(t=>Ss(e(t).values)))}function yk(t,e,n,r){let i=r.scale||e.scale,o=r.translate||e.translate;if(Object(rt["D"])(i)&&(i=i(n,r)),Object(rt["D"])(o)&&(o=o(n,r)),(1===i||null==i)&&!o)return;const a=(Object(rt["E"])(i)?i:i[0])||1,s=(Object(rt["E"])(i)?i:i[1])||1,u=o&&o[0]||0,c=o&&o[1]||0;t.forEach(bk(e,a,s,u,c))}function bk(t,e,n,r,i){const o=t.x1||0,a=t.y1||0,s=e*n<0;function u(t){t.forEach(c)}function c(t){s&&t.reverse(),t.forEach(l)}function l(t){t[0]=(t[0]-o)*e+r,t[1]=(t[1]-a)*n+i}return function(t){return t.coordinates.forEach(u),t}}function xk(t,e,n){const r=t>=0?t:Fs(e,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function wk(t){return Object(rt["D"])(t)?t:Object(rt["l"])(+t)}mk.transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=t.field||rt["x"],o=sk().smooth(!1!==t.smooth),a=t.thresholds||vk(r,i,t),s=null===t.as?null:t.as||"contour",u=[];return r.forEach(e=>{const n=i(e),r=o.size([n.width,n.height])(n.values,Object(rt["A"])(a)?a:a(n.values));yk(r,n,e,t),r.forEach(t=>{u.push(dt(e,ht(null!=s?{[s]:t}:t)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n};var _k=function(){var t=t=>t[0],e=t=>t[1],n=rt["O"],r=[-1,-1],i=960,o=500,a=2;function s(s,u){const c=xk(r[0],s,t)>>a,l=xk(r[1],s,e)>>a,h=c?c+2:0,f=l?l+2:0,d=2*h+(i>>a),p=2*f+(o>>a),g=new Float32Array(d*p),m=new Float32Array(d*p);let v=g;s.forEach(r=>{const i=h+(+t(r)>>a),o=f+(+e(r)>>a);i>=0&&i<d&&o>=0&&o<p&&(g[i+o*d]+=+n(r))}),c>0&&l>0?(Ok(d,p,g,m,c),Sk(d,p,m,g,l),Ok(d,p,g,m,c),Sk(d,p,m,g,l),Ok(d,p,g,m,c),Sk(d,p,m,g,l)):c>0?(Ok(d,p,g,m,c),Ok(d,p,m,g,c),Ok(d,p,g,m,c),v=m):l>0&&(Sk(d,p,g,m,l),Sk(d,p,m,g,l),Sk(d,p,g,m,l),v=m);let y=u?Math.pow(2,-2*a):1/rC(v);for(let t=0,e=d*p;t<e;++t)v[t]*=y;return{values:v,scale:1<<a,width:d,height:p,x1:h,y1:f,x2:h+(i>>a),y2:f+(o>>a)}}return s.x=function(e){return arguments.length?(t=wk(e),s):t},s.y=function(t){return arguments.length?(e=wk(t),s):e},s.weight=function(t){return arguments.length?(n=wk(t),s):n},s.size=function(t){if(!arguments.length)return[i,o];var e=+t[0],n=+t[1];return e>=0&&n>=0||Object(rt["n"])("invalid size"),i=e,o=n,s},s.cellSize=function(t){return arguments.length?((t=+t)>=1||Object(rt["n"])("invalid cell size"),a=Math.floor(Math.log(t)/Math.LN2),s):1<<a},s.bandwidth=function(t){return arguments.length?(t=Object(rt["i"])(t),1===t.length&&(t=[+t[0],+t[0]]),2!==t.length&&Object(rt["n"])("invalid bandwidth"),r=t,s):r},s};function Ok(t,e,n,r,i){const o=1+(i<<1);for(let a=0;a<e;++a)for(let e=0,s=0;e<t+i;++e)e<t&&(s+=n[e+a*t]),e>=i&&(e>=o&&(s-=n[e-o+a*t]),r[e-i+a*t]=s/Math.min(e+1,t-1+o-e,o))}function Sk(t,e,n,r,i){const o=1+(i<<1);for(let a=0;a<t;++a)for(let s=0,u=0;s<e+i;++s)s<e&&(u+=n[a+s*t]),s>=i&&(s>=o&&(u-=n[a+(s-o)*t]),r[a+(s-i)*t]=u/Math.min(s+1,e-1+o-s,o))}function Ck(t){ns.call(this,null,t)}Ck.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var kk=Object(rt["y"])(Ck,ns);const Ak=["x","y","weight","size","cellSize","bandwidth"];function Tk(t,e){return Ak.forEach(n=>null!=e[n]?t[n](e[n]):0),t}function Ek(t,e){var n,r,i,o,a,s,u=[],c=t=>t(o);if(null==e)u.push(t);else for(n={},r=0,i=t.length;r<i;++r)o=t[r],a=e.map(c),s=n[a],s||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}function jk(t){ns.call(this,null,t)}kk.transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=Ek(r,t.groupby),o=(t.groupby||[]).map(rt["h"]),a=Tk(_k(),t),s=t.as||"grid",u=[];function c(t,e){for(let n=0;n<o.length;++n)t[o[n]]=e[n];return t}return u=i.map(e=>ht(c({[s]:a(e,t.counts)},e.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n},jk.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};var Dk=Object(rt["y"])(jk,ns);Dk.transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),o=sk().smooth(!1!==t.smooth),a=t.values,s=t.thresholds||pk(t.count||10,t.nice,!!a),u=t.size;return a||(a=e.materialize(e.SOURCE).source,n=Tk(_k(),t)(a,!0),r=bk(n,n.scale||1,n.scale||1,0,0),u=[n.width,n.height],a=n.values),s=Object(rt["A"])(s)?s:s(a),a=o.size(u)(a,s),r&&a.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(a||[]).map(ht),i};var Mk="Feature",Nk="FeatureCollection",Ik="MultiPoint";function Rk(t){ns.call(this,null,t)}Rk.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};var Fk=Object(rt["y"])(Rk,ns);Fk.transform=function(t,e){var n,r=this._features,i=this._points,o=t.fields,a=o&&o[0],s=o&&o[1],u=t.geojson||!o&&rt["x"],c=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified(Object(rt["g"])(u))||a&&e.modified(Object(rt["g"])(a))||s&&e.modified(Object(rt["g"])(s)),this.value&&!n||(c=e.SOURCE,this._features=r=[],this._points=i=[]),u&&e.visit(c,(function(t){r.push(u(t))})),a&&s&&(e.visit(c,(function(t){var e=a(t),n=s(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&i.push([e,n])})),r=r.concat({type:Mk,geometry:{type:Ik,coordinates:i}})),this.value={type:Nk,features:r}};var Pk=function(t){return t};function $k(t,e){t&&zk.hasOwnProperty(t.type)&&zk[t.type](t,e)}var Lk={Feature:function(t,e){$k(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,r=-1,i=n.length;while(++r<i)$k(n[r].geometry,e)}},zk={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Bk(t.coordinates,e,0)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)Bk(n[r],e,0)},Polygon:function(t,e){Uk(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)Uk(n[r],e)},GeometryCollection:function(t,e){var n=t.geometries,r=-1,i=n.length;while(++r<i)$k(n[r],e)}};function Bk(t,e,n){var r,i=-1,o=t.length-n;e.lineStart();while(++i<o)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Uk(t,e){var n=-1,r=t.length;e.polygonStart();while(++n<r)Bk(t[n],e,1);e.polygonEnd()}var Wk=function(t,e){t&&Lk.hasOwnProperty(t.type)?Lk[t.type](t,e):$k(t,e)},Vk=function(){return new Hk};function Hk(){this.reset()}Hk.prototype={constructor:Hk,reset:function(){this.s=this.t=0},add:function(t){Gk(qk,t,this.t),Gk(this,qk.s,this.s),this.s?this.t+=qk.t:this.s=qk.t},valueOf:function(){return this.s}};var qk=new Hk;function Gk(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Xk=1e-6,Yk=1e-12,Kk=Math.PI,Zk=Kk/2,Jk=Kk/4,Qk=2*Kk,tA=180/Kk,eA=Kk/180,nA=Math.abs,rA=Math.atan,iA=Math.atan2,oA=Math.cos,aA=(Math.ceil,Math.exp),sA=(Math.floor,Math.log),uA=Math.pow,cA=Math.sin,lA=Math.sign||function(t){return t>0?1:t<0?-1:0},hA=Math.sqrt,fA=Math.tan;function dA(t){return t>1?0:t<-1?Kk:Math.acos(t)}function pA(t){return t>1?Zk:t<-1?-Zk:Math.asin(t)}function gA(){}var mA,vA,yA,bA,xA=Vk(),wA=Vk(),_A={point:gA,lineStart:gA,lineEnd:gA,polygonStart:function(){_A.lineStart=OA,_A.lineEnd=kA},polygonEnd:function(){_A.lineStart=_A.lineEnd=_A.point=gA,xA.add(nA(wA)),wA.reset()},result:function(){var t=xA/2;return xA.reset(),t}};function OA(){_A.point=SA}function SA(t,e){_A.point=CA,mA=yA=t,vA=bA=e}function CA(t,e){wA.add(bA*t-yA*e),yA=t,bA=e}function kA(){CA(mA,vA)}var AA=_A,TA=1/0,EA=TA,jA=-TA,DA=jA,MA={point:NA,lineStart:gA,lineEnd:gA,polygonStart:gA,polygonEnd:gA,result:function(){var t=[[TA,EA],[jA,DA]];return jA=DA=-(EA=TA=1/0),t}};function NA(t,e){t<TA&&(TA=t),t>jA&&(jA=t),e<EA&&(EA=e),e>DA&&(DA=e)}var IA,RA,FA,PA,$A=MA,LA=0,zA=0,BA=0,UA=0,WA=0,VA=0,HA=0,qA=0,GA=0,XA={point:YA,lineStart:KA,lineEnd:QA,polygonStart:function(){XA.lineStart=tT,XA.lineEnd=eT},polygonEnd:function(){XA.point=YA,XA.lineStart=KA,XA.lineEnd=QA},result:function(){var t=GA?[HA/GA,qA/GA]:VA?[UA/VA,WA/VA]:BA?[LA/BA,zA/BA]:[NaN,NaN];return LA=zA=BA=UA=WA=VA=HA=qA=GA=0,t}};function YA(t,e){LA+=t,zA+=e,++BA}function KA(){XA.point=ZA}function ZA(t,e){XA.point=JA,YA(FA=t,PA=e)}function JA(t,e){var n=t-FA,r=e-PA,i=hA(n*n+r*r);UA+=i*(FA+t)/2,WA+=i*(PA+e)/2,VA+=i,YA(FA=t,PA=e)}function QA(){XA.point=YA}function tT(){XA.point=nT}function eT(){rT(IA,RA)}function nT(t,e){XA.point=rT,YA(IA=FA=t,RA=PA=e)}function rT(t,e){var n=t-FA,r=e-PA,i=hA(n*n+r*r);UA+=i*(FA+t)/2,WA+=i*(PA+e)/2,VA+=i,i=PA*t-FA*e,HA+=i*(FA+t),qA+=i*(PA+e),GA+=3*i,YA(FA=t,PA=e)}var iT=XA;function oT(t){this._context=t}oT.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Qk);break}},result:gA};var aT,sT,uT,cT,lT,hT=Vk(),fT={point:gA,lineStart:function(){fT.point=dT},lineEnd:function(){aT&&pT(sT,uT),fT.point=gA},polygonStart:function(){aT=!0},polygonEnd:function(){aT=null},result:function(){var t=+hT;return hT.reset(),t}};function dT(t,e){fT.point=pT,sT=cT=t,uT=lT=e}function pT(t,e){cT-=t,lT-=e,hT.add(hA(cT*cT+lT*lT)),cT=t,lT=e}var gT=fT;function mT(){this._string=[]}function vT(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}mT.prototype={_radius:4.5,_circle:vT(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=vT(this._radius)),this._string.push("M",t,",",e,this._circle);break}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var yT=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),Wk(t,n(r))),r.result()}return o.area=function(t){return Wk(t,n(AA)),AA.result()},o.measure=function(t){return Wk(t,n(gT)),gT.result()},o.bounds=function(t){return Wk(t,n($A)),$A.result()},o.centroid=function(t){return Wk(t,n(iT)),iT.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,Pk):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new mT):new oT(e=t),"function"!==typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},bT=function(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:gA,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},xT=function(t,e){return nA(t[0]-e[0])<Xk&&nA(t[1]-e[1])<Xk};function wT(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var _T=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(xT(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*Xk}s.push(n=new wT(r,t,null,!0)),u.push(n.o=new wT(r,null,n,!1)),s.push(n=new wT(a,t,null,!1)),u.push(n.o=new wT(a,null,n,!0))}})),s.length){for(u.sort(e),OT(s),OT(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;var c,l,h=s[0];while(1){var f=h,d=!0;while(f.v)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,d=!d}while(!f.v);i.lineEnd()}}};function OT(t){if(e=t.length){var e,n,r=0,i=t[0];while(++r<e)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ST(t){return[iA(t[1],t[0]),pA(t[2])]}function CT(t){var e=t[0],n=t[1],r=oA(n);return[r*oA(e),r*cA(e),cA(n)]}function kT(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function AT(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function TT(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ET(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function jT(t){var e=hA(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var DT=Vk();function MT(t){return nA(t[0])<=Kk?t[0]:lA(t[0])*((nA(t[0])+Kk)%Qk-Kk)}var NT=function(t,e){var n=MT(e),r=e[1],i=cA(r),o=[cA(n),-oA(n),0],a=0,s=0;DT.reset(),1===i?r=Zk+Xk:-1===i&&(r=-Zk-Xk);for(var u=0,c=t.length;u<c;++u)if(h=(l=t[u]).length)for(var l,h,f=l[h-1],d=MT(f),p=f[1]/2+Jk,g=cA(p),m=oA(p),v=0;v<h;++v,d=b,g=w,m=_,f=y){var y=l[v],b=MT(y),x=y[1]/2+Jk,w=cA(x),_=oA(x),O=b-d,S=O>=0?1:-1,C=S*O,k=C>Kk,A=g*w;if(DT.add(iA(A*S*cA(C),m*_+A*oA(C))),a+=k?O+S*Qk:O,k^d>=n^b>=n){var T=AT(CT(f),CT(y));jT(T);var E=AT(o,T);jT(E);var j=(k^O>=0?-1:1)*pA(E[2]);(r>j||r===j&&(T[0]||T[1]))&&(s+=k^O>=0?1:-1)}}return(a<-Xk||a<Xk&&DT<-Xk)^1&s},IT=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},RT=function(t){return 1===t.length&&(t=FT(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function FT(t){return function(e,n){return IT(t(e),n)}}var PT=RT(IT);PT.right,PT.left;var $T=Array.prototype;$T.slice,$T.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var LT=function(t){var e,n,r,i=t.length,o=-1,a=0;while(++o<i)a+=t[o].length;n=new Array(a);while(--i>=0){r=t[i],e=r.length;while(--e>=0)n[--a]=r[e]}return n};var zT=function(t,e,n,r){return function(i){var o,a,s,u=e(i),c=bT(),l=e(c),h=!1,f={point:d,lineStart:g,lineEnd:m,polygonStart:function(){f.point=v,f.lineStart=y,f.lineEnd=b,a=[],o=[]},polygonEnd:function(){f.point=d,f.lineStart=g,f.lineEnd=m,a=LT(a);var t=NT(o,r);a.length?(h||(i.polygonStart(),h=!0),_T(a,UT,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function g(){f.point=p,u.lineStart()}function m(){f.point=d,u.lineEnd()}function v(t,e){s.push([t,e]),l.point(t,e)}function y(){l.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),f=c.result(),d=f.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if(n=f[0],(e=n.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter(BT))}return f}};function BT(t){return t.length>1}function UT(t,e){return((t=t.x)[0]<0?t[1]-Zk-Xk:Zk-t[1])-((e=e.x)[0]<0?e[1]-Zk-Xk:Zk-e[1])}var WT=zT((function(){return!0}),VT,qT,[-Kk,-Zk]);function VT(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Kk:-Kk,u=nA(o-n);nA(u-Kk)<Xk?(t.point(n,r=(r+a)/2>0?Zk:-Zk),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Kk&&(nA(n-i)<Xk&&(n-=i*Xk),nA(o-s)<Xk&&(o-=s*Xk),r=HT(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function HT(t,e,n,r){var i,o,a=cA(t-n);return nA(a)>Xk?rA((cA(e)*(o=oA(r))*cA(n)-cA(r)*(i=oA(e))*cA(t))/(i*o*a)):(e+r)/2}function qT(t,e,n,r){var i;if(null==t)i=n*Zk,r.point(-Kk,i),r.point(0,i),r.point(Kk,i),r.point(Kk,0),r.point(Kk,-i),r.point(0,-i),r.point(-Kk,-i),r.point(-Kk,0),r.point(-Kk,i);else if(nA(t[0]-e[0])>Xk){var o=t[0]<e[0]?Kk:-Kk;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}var GT=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n};function XT(t,e){return[nA(t)>Kk?t+Math.round(-t/Qk)*Qk:t,e]}function YT(t,e,n){return(t%=Qk)?e||n?GT(ZT(t),JT(e,n)):ZT(t):e||n?JT(e,n):XT}function KT(t){return function(e,n){return e+=t,[e>Kk?e-Qk:e<-Kk?e+Qk:e,n]}}function ZT(t){var e=KT(t);return e.invert=KT(-t),e}function JT(t,e){var n=oA(t),r=cA(t),i=oA(e),o=cA(e);function a(t,e){var a=oA(e),s=oA(t)*a,u=cA(t)*a,c=cA(e),l=c*n+s*r;return[iA(u*i-l*o,s*n-c*r),pA(l*i+u*o)]}return a.invert=function(t,e){var a=oA(e),s=oA(t)*a,u=cA(t)*a,c=cA(e),l=c*i-u*o;return[iA(u*i+c*o,s*n+l*r),pA(l*n-s*r)]},a}XT.invert=XT;var QT=function(t){function e(e){return e=t(e[0]*eA,e[1]*eA),e[0]*=tA,e[1]*=tA,e}return t=YT(t[0]*eA,t[1]*eA,t.length>2?t[2]*eA:0),e.invert=function(e){return e=t.invert(e[0]*eA,e[1]*eA),e[0]*=tA,e[1]*=tA,e},e};function tE(t,e,n,r,i,o){if(n){var a=oA(e),s=cA(e),u=r*n;null==i?(i=e+r*Qk,o=e-u/2):(i=eE(a,i),o=eE(a,o),(r>0?i<o:i>o)&&(i+=r*Qk));for(var c,l=i;r>0?l>o:l<o;l-=u)c=ST([a,-s*oA(l),-s*cA(l)]),t.point(c[0],c[1])}}function eE(t,e){e=CT(e),e[0]-=t,jT(e);var n=dA(-e[1]);return((-e[2]<0?-n:n)+Qk-Xk)%Qk}var nE=function(t){var e=oA(t),n=6*eA,r=e>0,i=nA(e)>Xk;function o(e,r,i,o){tE(o,t,n,i,e,r)}function a(t,n){return oA(t)*oA(n)>e}function s(t){var e,n,o,s,l;return{lineStart:function(){s=o=!1,l=1},point:function(h,f){var d,p=[h,f],g=a(h,f),m=r?g?0:c(h,f):g?c(h+(h<0?Kk:-Kk),f):0;if(!e&&(s=o=g)&&t.lineStart(),g!==o&&(d=u(e,p),(!d||xT(e,d)||xT(p,d))&&(p[2]=1)),g!==o)l=0,g?(t.lineStart(),d=u(p,e),t.point(d[0],d[1])):(d=u(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^g){var v;m&n||!(v=u(p,e,!0))||(l=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!g||e&&xT(e,p)||t.point(p[0],p[1]),e=p,o=g,n=m},lineEnd:function(){o&&t.lineEnd(),e=null},clean:function(){return l|(s&&o)<<1}}}function u(t,n,r){var i=CT(t),o=CT(n),a=[1,0,0],s=AT(i,o),u=kT(s,s),c=s[0],l=u-c*c;if(!l)return!r&&t;var h=e*u/l,f=-e*c/l,d=AT(a,s),p=ET(a,h),g=ET(s,f);TT(p,g);var m=d,v=kT(p,m),y=kT(m,m),b=v*v-y*(kT(p,p)-1);if(!(b<0)){var x=hA(b),w=ET(m,(-v-x)/y);if(TT(w,p),w=ST(w),!r)return w;var _,O=t[0],S=n[0],C=t[1],k=n[1];S<O&&(_=O,O=S,S=_);var A=S-O,T=nA(A-Kk)<Xk,E=T||A<Xk;if(!T&&k<C&&(_=C,C=k,k=_),E?T?C+k>0^w[1]<(nA(w[0]-O)<Xk?C:k):C<=w[1]&&w[1]<=k:A>Kk^(O<=w[0]&&w[0]<=S)){var j=ET(m,(-v+x)/y);return TT(j,p),[w,ST(j)]}}}function c(e,n){var i=r?t:Kk-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return zT(a,s,o,r?[0,-t]:[-Kk,t-Kk])},rE=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],h=0,f=1,d=c-s,p=l-u;if(a=n-s,d||!(a>0)){if(a/=d,d<0){if(a<h)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>h&&(h=a)}if(a=i-s,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>h&&(h=a)}else if(d>0){if(a<h)return;a<f&&(f=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>h&&(h=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<f&&(f=a)}return h>0&&(t[0]=s+h*d,t[1]=u+h*p),f<1&&(e[0]=s+f*d,e[1]=u+f*p),!0}}}}},iE=1e9,oE=-iE;function aE(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,h=0;if(null==i||(l=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return nA(r[0]-t)<Xk?i>0?0:3:nA(r[0]-n)<Xk?i>0?2:1:nA(r[1]-e)<Xk?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,h,f,d,p,g,m,v,y,b=a,x=bT(),w={point:_,lineStart:k,lineEnd:A,polygonStart:S,polygonEnd:C};function _(t,e){i(t,e)&&b.point(t,e)}function O(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,h=s[0],f=h[0],d=h[1];u<l;++u)o=f,a=d,h=s[u],f=h[0],d=h[1],a<=r?d>r&&(f-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(f-o)*(r-a)<(d-a)*(t-o)&&--e;return e}function S(){b=x,u=[],c=[],y=!0}function C(){var t=O(),e=y&&t,n=(u=LT(u)).length;(e||n)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&_T(u,s,t,o,a),a.polygonEnd()),b=a,u=c=l=null}function k(){w.point=T,c&&c.push(l=[]),v=!0,m=!1,p=g=NaN}function A(){u&&(T(h,f),d&&m&&x.rejoin(),u.push(x.result())),w.point=_,m&&b.lineEnd()}function T(o,a){var s=i(o,a);if(c&&l.push([o,a]),v)h=o,f=a,d=s,v=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&m)b.point(o,a);else{var u=[p=Math.max(oE,Math.min(iE,p)),g=Math.max(oE,Math.min(iE,g))],x=[o=Math.max(oE,Math.min(iE,o)),a=Math.max(oE,Math.min(iE,a))];rE(u,x,t,e,n,r)?(m||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1):s&&(b.lineStart(),b.point(o,a),y=!1)}p=o,g=a,m=s}return w}}function sE(t){return function(e){var n=new uE;for(var r in t)n[r]=t[r];return n.stream=e,n}}function uE(){}function cE(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Wk(n,t.stream($A)),e($A.result()),null!=r&&t.clipExtent(r),t}function lE(t,e,n){return cE(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function hE(t,e,n){return lE(t,[[0,0],e],n)}function fE(t,e,n){return cE(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function dE(t,e,n){return cE(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}uE.prototype={constructor:uE,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var pE=16,gE=oA(30*eA),mE=function(t,e){return+e?yE(t,e):vE(t)};function vE(t){return sE({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function yE(t,e){function n(r,i,o,a,s,u,c,l,h,f,d,p,g,m){var v=c-r,y=l-i,b=v*v+y*y;if(b>4*e&&g--){var x=a+f,w=s+d,_=u+p,O=hA(x*x+w*w+_*_),S=pA(_/=O),C=nA(nA(_)-1)<Xk||nA(o-h)<Xk?(o+h)/2:iA(w,x),k=t(C,S),A=k[0],T=k[1],E=A-r,j=T-i,D=y*E-v*j;(D*D/b>e||nA((v*E+y*j)/b-.5)>.3||a*f+s*d+u*p<gE)&&(n(r,i,o,a,s,u,A,T,C,x/=O,w/=O,_,g,m),m.point(A,T),n(A,T,C,x,w,_,c,l,h,f,d,p,g,m))}}return function(e){var r,i,o,a,s,u,c,l,h,f,d,p,g={point:m,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){l=NaN,g.point=y,e.lineStart()}function y(r,i){var o=CT([r,i]),a=t(r,i);n(l,h,c,f,d,p,l=a[0],h=a[1],c=r,f=o[0],d=o[1],p=o[2],pE,e),e.point(l,h)}function b(){g.point=m,e.lineEnd()}function x(){v(),g.point=w,g.lineEnd=_}function w(t,e){y(r=t,e),i=l,o=h,a=f,s=d,u=p,g.point=y}function _(){n(l,h,c,f,d,p,i,o,r,a,s,u,pE,e),g.lineEnd=b,b()}return g}}var bE=sE({point:function(t,e){this.stream.point(t*eA,e*eA)}});function xE(t){return sE({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function wE(t,e,n,r,i){function o(o,a){return o*=r,a*=i,[e+t*o,n-t*a]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}function _E(t,e,n,r,i,o){var a=oA(o),s=cA(o),u=a*t,c=s*t,l=a/t,h=s/t,f=(s*n-a*e)/t,d=(s*e+a*n)/t;function p(t,o){return t*=r,o*=i,[u*t-c*o+e,n-c*t-u*o]}return p.invert=function(t,e){return[r*(l*t-h*e+f),i*(d-h*t-l*e)]},p}function OE(t){return SE((function(){return t}))()}function SE(t){var e,n,r,i,o,a,s,u,c,l,h=150,f=480,d=250,p=0,g=0,m=0,v=0,y=0,b=0,x=1,w=1,_=null,O=WT,S=null,C=Pk,k=.5;function A(t){return u(t[0]*eA,t[1]*eA)}function T(t){return t=u.invert(t[0],t[1]),t&&[t[0]*tA,t[1]*tA]}function E(){var t=_E(h,0,0,x,w,b).apply(null,e(p,g)),r=(b?_E:wE)(h,f-t[0],d-t[1],x,w,b);return n=YT(m,v,y),s=GT(e,r),u=GT(n,s),a=mE(s,k),j()}function j(){return c=l=null,A}return A.stream=function(t){return c&&l===t?c:c=bE(xE(n)(O(a(C(l=t)))))},A.preclip=function(t){return arguments.length?(O=t,_=void 0,j()):O},A.postclip=function(t){return arguments.length?(C=t,S=r=i=o=null,j()):C},A.clipAngle=function(t){return arguments.length?(O=+t?nE(_=t*eA):(_=null,WT),j()):_*tA},A.clipExtent=function(t){return arguments.length?(C=null==t?(S=r=i=o=null,Pk):aE(S=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),j()):null==S?null:[[S,r],[i,o]]},A.scale=function(t){return arguments.length?(h=+t,E()):h},A.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],E()):[f,d]},A.center=function(t){return arguments.length?(p=t[0]%360*eA,g=t[1]%360*eA,E()):[p*tA,g*tA]},A.rotate=function(t){return arguments.length?(m=t[0]%360*eA,v=t[1]%360*eA,y=t.length>2?t[2]%360*eA:0,E()):[m*tA,v*tA,y*tA]},A.angle=function(t){return arguments.length?(b=t%360*eA,E()):b*tA},A.reflectX=function(t){return arguments.length?(x=t?-1:1,E()):x<0},A.reflectY=function(t){return arguments.length?(w=t?-1:1,E()):w<0},A.precision=function(t){return arguments.length?(a=mE(s,k=t*t),j()):hA(k)},A.fitExtent=function(t,e){return lE(A,t,e)},A.fitSize=function(t,e){return hE(A,t,e)},A.fitWidth=function(t,e){return fE(A,t,e)},A.fitHeight=function(t,e){return dE(A,t,e)},function(){return e=t.apply(this,arguments),A.invert=e.invert&&T,E()}}function CE(t){var e=0,n=Kk/3,r=SE(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*eA,n=t[1]*eA):[e*tA,n*tA]},i}function kE(t){var e=oA(t);function n(t,n){return[t*e,cA(n)/e]}return n.invert=function(t,n){return[t/e,pA(n*e)]},n}function AE(t,e){var n=cA(t),r=(n+cA(e))/2;if(nA(r)<Xk)return kE(t);var i=1+n*(2*r-n),o=hA(i)/r;function a(t,e){var n=hA(i-2*r*cA(e))/r;return[n*cA(t*=r),o-n*oA(t)]}return a.invert=function(t,e){var n=o-e,a=iA(t,nA(n))*lA(n);return n*r<0&&(a-=Kk*lA(t)*lA(n)),[a/r,pA((i-(t*t+n*n)*r*r)/(2*r))]},a}var TE=function(){return CE(AE).scale(155.424).center([0,33.6442])},EE=function(){return TE().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function jE(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}var DE=function(){var t,e,n,r,i,o,a=EE(),s=TE().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=TE().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:t=jE([a.stream(e=n),s.stream(n),u.stream(n)])},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),r=s.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+Xk,l+.12*e+Xk],[o-.214*e-Xk,l+.234*e-Xk]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+Xk,l+.166*e+Xk],[o-.115*e-Xk,l+.234*e-Xk]]).stream(c),h()},l.fitExtent=function(t,e){return lE(l,t,e)},l.fitSize=function(t,e){return hE(l,t,e)},l.fitWidth=function(t,e){return fE(l,t,e)},l.fitHeight=function(t,e){return dE(l,t,e)},l.scale(1070)};function ME(t){return function(e,n){var r=oA(e),i=oA(n),o=t(r*i);return[o*i*cA(e),o*cA(n)]}}function NE(t){return function(e,n){var r=hA(e*e+n*n),i=t(r),o=cA(i),a=oA(i);return[iA(e*o,r*a),pA(r&&n*o/r)]}}var IE=ME((function(t){return hA(2/(1+t))}));IE.invert=NE((function(t){return 2*pA(t/2)}));var RE=function(){return OE(IE).scale(124.75).clipAngle(179.999)},FE=ME((function(t){return(t=dA(t))&&t/cA(t)}));FE.invert=NE((function(t){return t}));var PE=function(){return OE(FE).scale(79.4188).clipAngle(179.999)};function $E(t,e){return[t,sA(fA((Zk+e)/2))]}$E.invert=function(t,e){return[t,2*rA(aA(e))-Zk]};var LE=function(){return zE($E).scale(961/Qk)};function zE(t){var e,n,r,i=OE(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var o=Kk*a(),s=i(QT(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===$E?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),l()):a()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function BE(t){return fA((Zk+t)/2)}function UE(t,e){var n=oA(t),r=t===e?cA(t):sA(n/oA(e))/sA(BE(e)/BE(t)),i=n*uA(BE(t),r)/r;if(!r)return $E;function o(t,e){i>0?e<-Zk+Xk&&(e=-Zk+Xk):e>Zk-Xk&&(e=Zk-Xk);var n=i/uA(BE(e),r);return[n*cA(r*t),i-n*oA(r*t)]}return o.invert=function(t,e){var n=i-e,o=lA(r)*hA(t*t+n*n),a=iA(t,nA(n))*lA(n);return n*r<0&&(a-=Kk*lA(t)*lA(n)),[a/r,2*rA(uA(i/o,1/r))-Zk]},o}var WE=function(){return CE(UE).scale(109.5).parallels([30,30])};function VE(t,e){return[t,e]}VE.invert=VE;var HE=function(){return OE(VE).scale(152.63)};function qE(t,e){var n=oA(t),r=t===e?cA(t):(n-oA(e))/(e-t),i=n/r+t;if(nA(r)<Xk)return VE;function o(t,e){var n=i-e,o=r*t;return[n*cA(o),i-n*oA(o)]}return o.invert=function(t,e){var n=i-e,o=iA(t,nA(n))*lA(n);return n*r<0&&(o-=Kk*lA(t)*lA(n)),[o/r,i-lA(r)*hA(t*t+n*n)]},o}var GE=function(){return CE(qE).scale(131.154).center([0,13.9389])},XE=1.340264,YE=-.081106,KE=893e-6,ZE=.003796,JE=hA(3)/2,QE=12;function tj(t,e){var n=pA(JE*cA(e)),r=n*n,i=r*r*r;return[t*oA(n)/(JE*(XE+3*YE*r+i*(7*KE+9*ZE*r))),n*(XE+YE*r+i*(KE+ZE*r))]}tj.invert=function(t,e){for(var n,r,i,o=e,a=o*o,s=a*a*a,u=0;u<QE;++u)if(r=o*(XE+YE*a+s*(KE+ZE*a))-e,i=XE+3*YE*a+s*(7*KE+9*ZE*a),o-=n=r/i,a=o*o,s=a*a*a,nA(n)<Yk)break;return[JE*t*(XE+3*YE*a+s*(7*KE+9*ZE*a))/oA(o),pA(cA(o)/JE)]};var ej=function(){return OE(tj).scale(177.158)};function nj(t,e){var n=oA(e),r=oA(t)*n;return[n*cA(t)/r,cA(e)/r]}nj.invert=NE(rA);var rj=function(){return OE(nj).scale(144.049).clipAngle(60)},ij=function(){var t,e,n,r,i,o,a,s=1,u=0,c=0,l=1,h=1,f=0,d=null,p=1,g=1,m=sE({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),v=Pk;function y(){return p=s*l,g=s*h,o=a=null,b}function b(n){var r=n[0]*p,i=n[1]*g;if(f){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+c]}return b.invert=function(n){var r=n[0]-u,i=n[1]-c;if(f){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/p,i/g]},b.stream=function(t){return o&&a===t?o:o=m(v(a=t))},b.postclip=function(t){return arguments.length?(v=t,d=n=r=i=null,y()):v},b.clipExtent=function(t){return arguments.length?(v=null==t?(d=n=r=i=null,Pk):aE(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==d?null:[[d,n],[r,i]]},b.scale=function(t){return arguments.length?(s=+t,y()):s},b.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],y()):[u,c]},b.angle=function(n){return arguments.length?(f=n%360*eA,e=cA(f),t=oA(f),y()):f*tA},b.reflectX=function(t){return arguments.length?(l=t?-1:1,y()):l<0},b.reflectY=function(t){return arguments.length?(h=t?-1:1,y()):h<0},b.fitExtent=function(t,e){return lE(b,t,e)},b.fitSize=function(t,e){return hE(b,t,e)},b.fitWidth=function(t,e){return fE(b,t,e)},b.fitHeight=function(t,e){return dE(b,t,e)},b};function oj(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}oj.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(nA(n)>Xk&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var aj=function(){return OE(oj).scale(175.295)};function sj(t,e){return[oA(e)*cA(t),cA(e)]}sj.invert=NE(pA);var uj=function(){return OE(sj).scale(249.5).clipAngle(90+Xk)};function cj(t,e){var n=oA(e),r=1+oA(t)*n;return[n*cA(t)/r,cA(e)/r]}cj.invert=NE((function(t){return 2*rA(t)}));var lj=function(){return OE(cj).scale(250).clipAngle(142)};function hj(t,e){return[sA(fA((Zk+e)/2)),-t]}hj.invert=function(t,e){return[-e,2*rA(aA(t))-Zk]};var fj=function(){var t=zE(hj),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};function dj(){}var pj=function(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:dj,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},gj=1e-6,mj=Math.PI,vj=mj/2,yj=mj/4,bj=2*mj,xj=180/mj,wj=mj/180,_j=Math.abs,Oj=Math.atan,Sj=Math.atan2,Cj=Math.cos,kj=(Math.ceil,Math.exp,Math.floor,Math.log,Math.pow,Math.sin),Aj=Math.sign||function(t){return t>0?1:t<0?-1:0},Tj=Math.sqrt;Math.tan;function Ej(t){return t>1?0:t<-1?mj:Math.acos(t)}function jj(t){return t>1?vj:t<-1?-vj:Math.asin(t)}var Dj=function(t,e){return _j(t[0]-e[0])<gj&&_j(t[1]-e[1])<gj};function Mj(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var Nj=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Dj(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*gj}s.push(n=new Mj(r,t,null,!0)),u.push(n.o=new Mj(r,null,n,!1)),s.push(n=new Mj(a,t,null,!1)),u.push(n.o=new Mj(a,null,n,!0))}})),s.length){for(u.sort(e),Ij(s),Ij(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;var c,l,h=s[0];while(1){var f=h,d=!0;while(f.v)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,d=!d}while(!f.v);i.lineEnd()}}};function Ij(t){if(e=t.length){var e,n,r=0,i=t[0];while(++r<e)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var Rj=function(){return new Fj};function Fj(){this.reset()}Fj.prototype={constructor:Fj,reset:function(){this.s=this.t=0},add:function(t){$j(Pj,t,this.t),$j(this,Pj.s,this.s),this.s?this.t+=Pj.t:this.s=Pj.t},valueOf:function(){return this.s}};var Pj=new Fj;function $j(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Lj(t){return[Sj(t[1],t[0]),jj(t[2])]}function zj(t){var e=t[0],n=t[1],r=Cj(n);return[r*Cj(e),r*kj(e),kj(n)]}function Bj(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Uj(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Wj(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Vj(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Hj(t){var e=Tj(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var qj=Rj();function Gj(t){return _j(t[0])<=mj?t[0]:Aj(t[0])*((_j(t[0])+mj)%bj-mj)}var Xj=function(t,e){var n=Gj(e),r=e[1],i=kj(r),o=[kj(n),-Cj(n),0],a=0,s=0;qj.reset(),1===i?r=vj+gj:-1===i&&(r=-vj-gj);for(var u=0,c=t.length;u<c;++u)if(h=(l=t[u]).length)for(var l,h,f=l[h-1],d=Gj(f),p=f[1]/2+yj,g=kj(p),m=Cj(p),v=0;v<h;++v,d=b,g=w,m=_,f=y){var y=l[v],b=Gj(y),x=y[1]/2+yj,w=kj(x),_=Cj(x),O=b-d,S=O>=0?1:-1,C=S*O,k=C>mj,A=g*w;if(qj.add(Sj(A*S*kj(C),m*_+A*Cj(C))),a+=k?O+S*bj:O,k^d>=n^b>=n){var T=Uj(zj(f),zj(y));Hj(T);var E=Uj(o,T);Hj(E);var j=(k^O>=0?-1:1)*jj(E[2]);(r>j||r===j&&(T[0]||T[1]))&&(s+=k^O>=0?1:-1)}}return(a<-gj||a<gj&&qj<-gj)^1&s},Yj=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Kj=function(t){return 1===t.length&&(t=Zj(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function Zj(t){return function(e,n){return Yj(t(e),n)}}var Jj=Kj(Yj);Jj.right,Jj.left;var Qj=Array.prototype;Qj.slice,Qj.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var tD=function(t){var e,n,r,i=t.length,o=-1,a=0;while(++o<i)a+=t[o].length;n=new Array(a);while(--i>=0){r=t[i],e=r.length;while(--e>=0)n[--a]=r[e]}return n};var eD=function(t,e,n,r){return function(i){var o,a,s,u=e(i),c=pj(),l=e(c),h=!1,f={point:d,lineStart:g,lineEnd:m,polygonStart:function(){f.point=v,f.lineStart=y,f.lineEnd=b,a=[],o=[]},polygonEnd:function(){f.point=d,f.lineStart=g,f.lineEnd=m,a=tD(a);var t=Xj(o,r);a.length?(h||(i.polygonStart(),h=!0),Nj(a,rD,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function g(){f.point=p,u.lineStart()}function m(){f.point=d,u.lineEnd()}function v(t,e){s.push([t,e]),l.point(t,e)}function y(){l.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),f=c.result(),d=f.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if(n=f[0],(e=n.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter(nD))}return f}};function nD(t){return t.length>1}function rD(t,e){return((t=t.x)[0]<0?t[1]-vj-gj:vj-t[1])-((e=e.x)[0]<0?e[1]-vj-gj:vj-e[1])}var iD=eD((function(){return!0}),oD,sD,[-mj,-vj]);function oD(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?mj:-mj,u=_j(o-n);_j(u-mj)<gj?(t.point(n,r=(r+a)/2>0?vj:-vj),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=mj&&(_j(n-i)<gj&&(n-=i*gj),_j(o-s)<gj&&(o-=s*gj),r=aD(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function aD(t,e,n,r){var i,o,a=kj(t-n);return _j(a)>gj?Oj((kj(e)*(o=Cj(r))*kj(n)-kj(r)*(i=Cj(e))*kj(t))/(i*o*a)):(e+r)/2}function sD(t,e,n,r){var i;if(null==t)i=n*vj,r.point(-mj,i),r.point(0,i),r.point(mj,i),r.point(mj,0),r.point(mj,-i),r.point(0,-i),r.point(-mj,-i),r.point(-mj,0),r.point(-mj,i);else if(_j(t[0]-e[0])>gj){var o=t[0]<e[0]?mj:-mj;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}var uD=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n};function cD(t,e){return[_j(t)>mj?t+Math.round(-t/bj)*bj:t,e]}function lD(t,e,n){return(t%=bj)?e||n?uD(fD(t),dD(e,n)):fD(t):e||n?dD(e,n):cD}function hD(t){return function(e,n){return e+=t,[e>mj?e-bj:e<-mj?e+bj:e,n]}}function fD(t){var e=hD(t);return e.invert=hD(-t),e}function dD(t,e){var n=Cj(t),r=kj(t),i=Cj(e),o=kj(e);function a(t,e){var a=Cj(e),s=Cj(t)*a,u=kj(t)*a,c=kj(e),l=c*n+s*r;return[Sj(u*i-l*o,s*n-c*r),jj(l*i+u*o)]}return a.invert=function(t,e){var a=Cj(e),s=Cj(t)*a,u=kj(t)*a,c=kj(e),l=c*i-u*o;return[Sj(u*i+c*o,s*n+l*r),jj(l*n-s*r)]},a}cD.invert=cD;function pD(t,e,n,r,i,o){if(n){var a=Cj(e),s=kj(e),u=r*n;null==i?(i=e+r*bj,o=e-u/2):(i=gD(a,i),o=gD(a,o),(r>0?i<o:i>o)&&(i+=r*bj));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Lj([a,-s*Cj(l),-s*kj(l)]),t.point(c[0],c[1])}}function gD(t,e){e=zj(e),e[0]-=t,Hj(e);var n=Ej(-e[1]);return((-e[2]<0?-n:n)+bj-gj)%bj}var mD=function(t){var e=Cj(t),n=6*wj,r=e>0,i=_j(e)>gj;function o(e,r,i,o){pD(o,t,n,i,e,r)}function a(t,n){return Cj(t)*Cj(n)>e}function s(t){var e,n,o,s,l;return{lineStart:function(){s=o=!1,l=1},point:function(h,f){var d,p=[h,f],g=a(h,f),m=r?g?0:c(h,f):g?c(h+(h<0?mj:-mj),f):0;if(!e&&(s=o=g)&&t.lineStart(),g!==o&&(d=u(e,p),(!d||Dj(e,d)||Dj(p,d))&&(p[2]=1)),g!==o)l=0,g?(t.lineStart(),d=u(p,e),t.point(d[0],d[1])):(d=u(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^g){var v;m&n||!(v=u(p,e,!0))||(l=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!g||e&&Dj(e,p)||t.point(p[0],p[1]),e=p,o=g,n=m},lineEnd:function(){o&&t.lineEnd(),e=null},clean:function(){return l|(s&&o)<<1}}}function u(t,n,r){var i=zj(t),o=zj(n),a=[1,0,0],s=Uj(i,o),u=Bj(s,s),c=s[0],l=u-c*c;if(!l)return!r&&t;var h=e*u/l,f=-e*c/l,d=Uj(a,s),p=Vj(a,h),g=Vj(s,f);Wj(p,g);var m=d,v=Bj(p,m),y=Bj(m,m),b=v*v-y*(Bj(p,p)-1);if(!(b<0)){var x=Tj(b),w=Vj(m,(-v-x)/y);if(Wj(w,p),w=Lj(w),!r)return w;var _,O=t[0],S=n[0],C=t[1],k=n[1];S<O&&(_=O,O=S,S=_);var A=S-O,T=_j(A-mj)<gj,E=T||A<gj;if(!T&&k<C&&(_=C,C=k,k=_),E?T?C+k>0^w[1]<(_j(w[0]-O)<gj?C:k):C<=w[1]&&w[1]<=k:A>mj^(O<=w[0]&&w[0]<=S)){var j=Vj(m,(-v+x)/y);return Wj(j,p),[w,Lj(j)]}}}function c(e,n){var i=r?t:mj-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return eD(a,s,o,r?[0,-t]:[-mj,t-mj])},vD=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],h=0,f=1,d=c-s,p=l-u;if(a=n-s,d||!(a>0)){if(a/=d,d<0){if(a<h)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>h&&(h=a)}if(a=i-s,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>h&&(h=a)}else if(d>0){if(a<h)return;a<f&&(f=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>h&&(h=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<f&&(f=a)}return h>0&&(t[0]=s+h*d,t[1]=u+h*p),f<1&&(e[0]=s+f*d,e[1]=u+f*p),!0}}}}},yD=1e9,bD=-yD;function xD(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,h=0;if(null==i||(l=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return _j(r[0]-t)<gj?i>0?0:3:_j(r[0]-n)<gj?i>0?2:1:_j(r[1]-e)<gj?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,h,f,d,p,g,m,v,y,b=a,x=pj(),w={point:_,lineStart:k,lineEnd:A,polygonStart:S,polygonEnd:C};function _(t,e){i(t,e)&&b.point(t,e)}function O(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,h=s[0],f=h[0],d=h[1];u<l;++u)o=f,a=d,h=s[u],f=h[0],d=h[1],a<=r?d>r&&(f-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(f-o)*(r-a)<(d-a)*(t-o)&&--e;return e}function S(){b=x,u=[],c=[],y=!0}function C(){var t=O(),e=y&&t,n=(u=tD(u)).length;(e||n)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&Nj(u,s,t,o,a),a.polygonEnd()),b=a,u=c=l=null}function k(){w.point=T,c&&c.push(l=[]),v=!0,m=!1,p=g=NaN}function A(){u&&(T(h,f),d&&m&&x.rejoin(),u.push(x.result())),w.point=_,m&&b.lineEnd()}function T(o,a){var s=i(o,a);if(c&&l.push([o,a]),v)h=o,f=a,d=s,v=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&m)b.point(o,a);else{var u=[p=Math.max(bD,Math.min(yD,p)),g=Math.max(bD,Math.min(yD,g))],x=[o=Math.max(bD,Math.min(yD,o)),a=Math.max(bD,Math.min(yD,a))];vD(u,x,t,e,n,r)?(m||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1):s&&(b.lineStart(),b.point(o,a),y=!1)}p=o,g=a,m=s}return w}}var wD=function(t){return t};function _D(t){return function(e){var n=new OD;for(var r in t)n[r]=t[r];return n.stream=e,n}}function OD(){}function SD(t,e){t&&kD.hasOwnProperty(t.type)&&kD[t.type](t,e)}OD.prototype={constructor:OD,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var CD={Feature:function(t,e){SD(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,r=-1,i=n.length;while(++r<i)SD(n[r].geometry,e)}},kD={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){AD(t.coordinates,e,0)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)AD(n[r],e,0)},Polygon:function(t,e){TD(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)TD(n[r],e)},GeometryCollection:function(t,e){var n=t.geometries,r=-1,i=n.length;while(++r<i)SD(n[r],e)}};function AD(t,e,n){var r,i=-1,o=t.length-n;e.lineStart();while(++i<o)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function TD(t,e){var n=-1,r=t.length;e.polygonStart();while(++n<r)AD(t[n],e,1);e.polygonEnd()}var ED=function(t,e){t&&CD.hasOwnProperty(t.type)?CD[t.type](t,e):SD(t,e)},jD=1/0,DD=jD,MD=-jD,ND=MD,ID={point:RD,lineStart:dj,lineEnd:dj,polygonStart:dj,polygonEnd:dj,result:function(){var t=[[jD,DD],[MD,ND]];return MD=ND=-(DD=jD=1/0),t}};function RD(t,e){t<jD&&(jD=t),t>MD&&(MD=t),e<DD&&(DD=e),e>ND&&(ND=e)}var FD=ID;function PD(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),ED(n,t.stream(FD)),e(FD.result()),null!=r&&t.clipExtent(r),t}function $D(t,e,n){return PD(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function LD(t,e,n){return $D(t,[[0,0],e],n)}function zD(t,e,n){return PD(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function BD(t,e,n){return PD(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}var UD=16,WD=Cj(30*wj),VD=function(t,e){return+e?qD(t,e):HD(t)};function HD(t){return _D({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function qD(t,e){function n(r,i,o,a,s,u,c,l,h,f,d,p,g,m){var v=c-r,y=l-i,b=v*v+y*y;if(b>4*e&&g--){var x=a+f,w=s+d,_=u+p,O=Tj(x*x+w*w+_*_),S=jj(_/=O),C=_j(_j(_)-1)<gj||_j(o-h)<gj?(o+h)/2:Sj(w,x),k=t(C,S),A=k[0],T=k[1],E=A-r,j=T-i,D=y*E-v*j;(D*D/b>e||_j((v*E+y*j)/b-.5)>.3||a*f+s*d+u*p<WD)&&(n(r,i,o,a,s,u,A,T,C,x/=O,w/=O,_,g,m),m.point(A,T),n(A,T,C,x,w,_,c,l,h,f,d,p,g,m))}}return function(e){var r,i,o,a,s,u,c,l,h,f,d,p,g={point:m,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){l=NaN,g.point=y,e.lineStart()}function y(r,i){var o=zj([r,i]),a=t(r,i);n(l,h,c,f,d,p,l=a[0],h=a[1],c=r,f=o[0],d=o[1],p=o[2],UD,e),e.point(l,h)}function b(){g.point=m,e.lineEnd()}function x(){v(),g.point=w,g.lineEnd=_}function w(t,e){y(r=t,e),i=l,o=h,a=f,s=d,u=p,g.point=y}function _(){n(l,h,c,f,d,p,i,o,r,a,s,u,UD,e),g.lineEnd=b,b()}return g}}var GD=_D({point:function(t,e){this.stream.point(t*wj,e*wj)}});function XD(t){return _D({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function YD(t,e,n,r,i){function o(o,a){return o*=r,a*=i,[e+t*o,n-t*a]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}function KD(t,e,n,r,i,o){var a=Cj(o),s=kj(o),u=a*t,c=s*t,l=a/t,h=s/t,f=(s*n-a*e)/t,d=(s*e+a*n)/t;function p(t,o){return t*=r,o*=i,[u*t-c*o+e,n-c*t-u*o]}return p.invert=function(t,e){return[r*(l*t-h*e+f),i*(d-h*t-l*e)]},p}function ZD(t){return JD((function(){return t}))()}function JD(t){var e,n,r,i,o,a,s,u,c,l,h=150,f=480,d=250,p=0,g=0,m=0,v=0,y=0,b=0,x=1,w=1,_=null,O=iD,S=null,C=wD,k=.5;function A(t){return u(t[0]*wj,t[1]*wj)}function T(t){return t=u.invert(t[0],t[1]),t&&[t[0]*xj,t[1]*xj]}function E(){var t=KD(h,0,0,x,w,b).apply(null,e(p,g)),r=(b?KD:YD)(h,f-t[0],d-t[1],x,w,b);return n=lD(m,v,y),s=uD(e,r),u=uD(n,s),a=VD(s,k),j()}function j(){return c=l=null,A}return A.stream=function(t){return c&&l===t?c:c=GD(XD(n)(O(a(C(l=t)))))},A.preclip=function(t){return arguments.length?(O=t,_=void 0,j()):O},A.postclip=function(t){return arguments.length?(C=t,S=r=i=o=null,j()):C},A.clipAngle=function(t){return arguments.length?(O=+t?mD(_=t*wj):(_=null,iD),j()):_*xj},A.clipExtent=function(t){return arguments.length?(C=null==t?(S=r=i=o=null,wD):xD(S=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),j()):null==S?null:[[S,r],[i,o]]},A.scale=function(t){return arguments.length?(h=+t,E()):h},A.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],E()):[f,d]},A.center=function(t){return arguments.length?(p=t[0]%360*wj,g=t[1]%360*wj,E()):[p*xj,g*xj]},A.rotate=function(t){return arguments.length?(m=t[0]%360*wj,v=t[1]%360*wj,y=t.length>2?t[2]%360*wj:0,E()):[m*xj,v*xj,y*xj]},A.angle=function(t){return arguments.length?(b=t%360*wj,E()):b*xj},A.reflectX=function(t){return arguments.length?(x=t?-1:1,E()):x<0},A.reflectY=function(t){return arguments.length?(w=t?-1:1,E()):w<0},A.precision=function(t){return arguments.length?(a=VD(s,k=t*t),j()):Tj(k)},A.fitExtent=function(t,e){return $D(A,t,e)},A.fitSize=function(t,e){return LD(A,t,e)},A.fitWidth=function(t,e){return zD(A,t,e)},A.fitHeight=function(t,e){return BD(A,t,e)},function(){return e=t.apply(this,arguments),A.invert=e.invert&&T,E()}}var QD=Math.abs,tM=(Math.atan,Math.atan2,Math.ceil,Math.cos),eM=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),nM=(Math.tan,1e-6),rM=Math.PI,iM=rM/2,oM=(Math.SQRT1_2,sM(2));sM(rM);function aM(t){return t>1?iM:t<-1?-iM:Math.asin(t)}function sM(t){return t>0?Math.sqrt(t):0}function uM(t,e){var n,r=t*eM(e),i=30;do{e-=n=(e+eM(e)-r)/(1+tM(e))}while(QD(n)>nM&&--i>0);return e/2}function cM(t,e,n){function r(r,i){return[t*r*tM(i=uM(n,i)),e*eM(i)]}return r.invert=function(r,i){return i=aM(i/e),[r/(t*tM(i)),aM((2*i+eM(2*i))/n)]},r}var lM=cM(oM/iM,oM,rM),hM=function(){return ZD(lM).scale(169.529)},fM=yT(),dM=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function pM(t,e){return function n(){var r=e();return r.type=t,r.path=yT().projection(r),r.copy=r.copy||function(){var t=n();return dM.forEach((function(e){r[e]&&t[e](r[e]())})),t.path.pointRadius(r.path.pointRadius()),t},r}}function gM(t,e){if(!t||"string"!==typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(vM[t]=pM(t,e),this):vM[t]||null}function mM(t){return t&&t.path||fM}var vM={albers:EE,albersusa:DE,azimuthalequalarea:RE,azimuthalequidistant:PE,conicconformal:WE,conicequalarea:TE,conicequidistant:GE,equalEarth:ej,equirectangular:HE,gnomonic:rj,identity:ij,mercator:LE,mollweide:hM,naturalEarth1:aj,orthographic:uj,stereographic:lj,transversemercator:fj};for(var yM in vM)gM(yM,vM[yM]);function bM(t){ns.call(this,null,t)}bM.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};var xM=Object(rt["y"])(bM,ns);function wM(t,e){var n=t.pointRadius();return t.context(null),null!=e&&t.pointRadius(e),n}function _M(t){ns.call(this,null,t)}xM.transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||rt["x"],o=t.as||"path",a=n.SOURCE;function s(t){t[o]=r(i(t))}!r||t.modified()?(this.value=r=mM(t.projection),n.materialize().reflow()):a=i===rt["x"]||e.modified(i.fields)?n.ADD_MOD:n.ADD;var u=wM(r,t.pointRadius);return n.visit(a,s),r.pointRadius(u),n.modifies(o)},_M.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};var OM=Object(rt["y"])(_M,ns);function SM(t){ns.call(this,null,t)}OM.transform=function(t,e){var n,r=t.projection,i=t.fields[0],o=t.fields[1],a=t.as||["x","y"],s=a[0],u=a[1];function c(t){var e=r([i(t),o(t)]);e?(t[s]=e[0],t[u]=e[1]):(t[s]=void 0,t[u]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,c):(n=e.modified(i.fields)||e.modified(o.fields),e.visit(n?e.ADD_MOD:e.ADD,c)),e.modifies(a)},SM.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};var CM=Object(rt["y"])(SM,ns);function kM(t,e,n){var r=null==n?function(n){return t(e(n))}:function(r){var i=t.pointRadius(),o=t.pointRadius(n)(e(r));return t.pointRadius(i),o};return r.context=function(e){return t.context(e),r},r}CM.transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.as||"shape",o=n.ADD;return r&&!t.modified()||(this.value=r=kM(mM(t.projection),t.field||Object(rt["t"])("datum"),t.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,(function(t){t[i]=r})),n.modifies(i)};var AM=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},TM=function(t){return 1===t.length&&(t=EM(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function EM(t){return function(e,n){return AM(t(e),n)}}var jM=TM(AM);jM.right,jM.left;var DM=Array.prototype,MM=(DM.slice,DM.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);while(++r<i)o[r]=t+r*n;return o});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var NM=1e-6,IM=(Math.PI,Math.abs),RM=(Math.atan,Math.atan2,Math.cos,Math.ceil);Math.exp,Math.floor,Math.log,Math.pow,Math.sin,Math.sign,Math.sqrt,Math.tan;function FM(t,e,n){var r=MM(t,e-NM,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function PM(t,e,n){var r=MM(t,e-NM,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function $M(){var t,e,n,r,i,o,a,s,u,c,l,h,f=10,d=f,p=90,g=360,m=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return MM(RM(r/p)*p,n,p).map(l).concat(MM(RM(s/g)*g,a,g).map(h)).concat(MM(RM(e/f)*f,t,f).filter((function(t){return IM(t%p)>NM})).map(u)).concat(MM(RM(o/d)*d,i,d).filter((function(t){return IM(t%g)>NM})).map(c))}return v.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(h(a).slice(1),l(n).reverse().slice(1),h(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),v.precision(m)):[[r,s],[n,a]]},v.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),v.precision(m)):[[e,o],[t,i]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],v):[p,g]},v.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],v):[f,d]},v.precision=function(f){return arguments.length?(m=+f,u=FM(o,i,90),c=PM(e,t,m),l=FM(s,a,90),h=PM(r,n,m),v):m},v.extentMajor([[-180,-90+NM],[180,90-NM]]).extentMinor([[-180,-80-NM],[180,80+NM]])}function LM(t){ns.call(this,[],t),this.generator=$M()}LM.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};var zM=Object(rt["y"])(LM,ns);zM.transform=function(t,e){var n,r=this.value,i=this.generator;if(!r.length||t.modified())for(var o in t)Object(rt["D"])(i[o])&&i[o](t[o]);return n=i(),r.length?e.mod.push(pt(r[0],n)):e.add.push(ht(n)),r[0]=n,e};var BM=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function UM(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function WM(){}var VM=.7,HM=1/VM,qM="\\s*([+-]?\\d+)\\s*",GM="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",XM="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YM=/^#([0-9a-f]{3,8})$/,KM=new RegExp("^rgb\\("+[qM,qM,qM]+"\\)$"),ZM=new RegExp("^rgb\\("+[XM,XM,XM]+"\\)$"),JM=new RegExp("^rgba\\("+[qM,qM,qM,GM]+"\\)$"),QM=new RegExp("^rgba\\("+[XM,XM,XM,GM]+"\\)$"),tN=new RegExp("^hsl\\("+[GM,XM,XM]+"\\)$"),eN=new RegExp("^hsla\\("+[GM,XM,XM,GM]+"\\)$"),nN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rN(){return this.rgb().formatHex()}function iN(){return mN(this).formatHsl()}function oN(){return this.rgb().formatRgb()}function aN(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=YM.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?sN(e):3===n?new hN(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?uN(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?uN(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=KM.exec(t))?new hN(e[1],e[2],e[3],1):(e=ZM.exec(t))?new hN(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=JM.exec(t))?uN(e[1],e[2],e[3],e[4]):(e=QM.exec(t))?uN(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=tN.exec(t))?gN(e[1],e[2]/100,e[3]/100,1):(e=eN.exec(t))?gN(e[1],e[2]/100,e[3]/100,e[4]):nN.hasOwnProperty(t)?sN(nN[t]):"transparent"===t?new hN(NaN,NaN,NaN,0):null}function sN(t){return new hN(t>>16&255,t>>8&255,255&t,1)}function uN(t,e,n,r){return r<=0&&(t=e=n=NaN),new hN(t,e,n,r)}function cN(t){return t instanceof WM||(t=aN(t)),t?(t=t.rgb(),new hN(t.r,t.g,t.b,t.opacity)):new hN}function lN(t,e,n,r){return 1===arguments.length?cN(t):new hN(t,e,n,null==r?1:r)}function hN(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function fN(){return"#"+pN(this.r)+pN(this.g)+pN(this.b)}function dN(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function pN(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function gN(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new yN(t,e,n,r)}function mN(t){if(t instanceof yN)return new yN(t.h,t.s,t.l,t.opacity);if(t instanceof WM||(t=aN(t)),!t)return new yN;if(t instanceof yN)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new yN(a,s,u,t.opacity)}function vN(t,e,n,r){return 1===arguments.length?mN(t):new yN(t,e,n,null==r?1:r)}function yN(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function bN(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function xN(t){ns.call(this,null,t)}BM(WM,aN,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:rN,formatHex:rN,formatHsl:iN,formatRgb:oN,toString:oN}),BM(hN,lN,UM(WM,{brighter:function(t){return t=null==t?HM:Math.pow(HM,t),new hN(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?VM:Math.pow(VM,t),new hN(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fN,formatHex:fN,formatRgb:dN,toString:dN})),BM(yN,vN,UM(WM,{brighter:function(t){return t=null==t?HM:Math.pow(HM,t),new yN(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?VM:Math.pow(VM,t),new yN(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new hN(bN(t>=240?t-240:t+120,i,r),bN(t,i,r),bN(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}})),xN.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};var wN=Object(rt["y"])(xN,ns);function _N(t,e){let n;return Object(rt["D"])(t)?(n=n=>lN(t(n,e)),n.dep=SN(t)):n=Object(rt["l"])(lN(t||"#888")),n}function ON(t,e){let n;return Object(rt["D"])(t)?(n=n=>t(n,e),n.dep=SN(t)):t?n=Object(rt["l"])(t):(n=t=>t.$value/t.$max||0,n.dep=!0),n}function SN(t){if(!Object(rt["D"])(t))return!1;const e=Object(rt["db"])(Object(rt["g"])(t));return e.$x||e.$y||e.$value||e.$max}function CN(t,e,n,r){const i=t.width,o=t.height,a=t.x1||0,s=t.y1||0,u=t.x2||i,c=t.y2||o,l=t.values,h=l?t=>l[t]:rt["kb"],f=Np(u-a,c-s),d=f.getContext("2d"),p=d.getImageData(0,0,u-a,c-s),g=p.data;for(let m=s,v=0;m<c;++m){e.$y=m-s;for(let t=a,o=m*i;t<u;++t,v+=4){e.$x=t-a,e.$value=h(t+o);const i=n(e);g[v+0]=i.r,g[v+1]=i.g,g[v+2]=i.b,g[v+3]=~~(255*r(e))}}return d.putImageData(p,0,0),f}function kN(t){ns.call(this,null,t),this.modified(!0)}wN.transform=function(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,r="shared"===t.resolve,i=t.field||rt["x"],o=ON(t.opacity,t),a=_N(t.color,t),s=t.as||"image",u={$x:0,$y:0,$value:0,$max:r?Ss(n.map(t=>Ss(i(t).values))):0};return n.forEach(t=>{const e=i(t),n=Object(rt["o"])({},t,u);r||(n.$max=Ss(e.values||[])),t[s]=CN(e,n,a.dep?a:Object(rt["l"])(a(n)),o.dep?o:Object(rt["l"])(o(n)))}),e.reflow(!0).modifies(s)};var AN=Object(rt["y"])(kN,ns);function TN(t,e){var n=DN(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function EN(t){var e=gM((t||"mercator").toLowerCase());return e||Object(rt["n"])("Unrecognized projection type: "+t),e()}function jN(t,e,n){Object(rt["D"])(t[e])&&t[e](n)}function DN(t){return t=Object(rt["i"])(t),1===t.length?t[0]:{type:Nk,features:t.reduce((t,e)=>t.concat(MN(e)),[])}}function MN(t){return t.type===Nk?t.features:Object(rt["i"])(t).filter(t=>null!=t).map(t=>t.type===Mk?t:{type:Mk,geometry:t})}AN.transform=function(t,e){var n=this.value;return!n||t.modified("type")?(this.value=n=EN(t.type),dM.forEach((function(e){null!=t[e]&&jN(n,e,t[e])}))):dM.forEach((function(e){t.modified(e)&&jN(n,e,t[e])})),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&TN(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)};var NN=function(t,e){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)i=n[r],a+=i.x,s+=i.y;for(a=a/o-t,s=s/o-e,r=0;r<o;++r)i=n[r],i.x-=a,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},IN=n("80ef"),RN=function(t){return function(){return t}},FN=function(){return 1e-6*(Math.random()-.5)};function PN(t){return t.x+t.vx}function $N(t){return t.y+t.vy}var LN=function(t){var e,n,r=1,i=1;function o(){for(var t,o,s,u,c,l,h,f=e.length,d=0;d<i;++d)for(o=Object(IN["a"])(e,PN,$N).visitAfter(a),t=0;t<f;++t)s=e[t],l=n[s.index],h=l*l,u=s.x+s.vx,c=s.y+s.vy,o.visit(p);function p(t,e,n,i,o){var a=t.data,f=t.r,d=l+f;if(!a)return e>u+d||i<u-d||n>c+d||o<c-d;if(a.index>s.index){var p=u-a.x-a.vx,g=c-a.y-a.vy,m=p*p+g*g;m<d*d&&(0===p&&(p=FN(),m+=p*p),0===g&&(g=FN(),m+=g*g),m=(d-(m=Math.sqrt(m)))/m*r,s.vx+=(p*=m)*(d=(f*=f)/(h+f)),s.vy+=(g*=m)*d,a.vx-=p*(d=1-d),a.vy-=g*d)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=RN(null==t?1:+t)),o.initialize=function(t){e=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"===typeof e?e:RN(+e),s(),o):t},o};function zN(t){return t.index}function BN(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var UN=function(t){var e,n,r,i,o,a=zN,s=l,u=RN(30),c=1;function l(t){return 1/Math.min(i[t.source.index],i[t.target.index])}function h(r){for(var i=0,a=t.length;i<c;++i)for(var s,u,l,h,f,d,p,g=0;g<a;++g)s=t[g],u=s.source,l=s.target,h=l.x+l.vx-u.x-u.vx||FN(),f=l.y+l.vy-u.y-u.vy||FN(),d=Math.sqrt(h*h+f*f),d=(d-n[g])/d*r*e[g],h*=d,f*=d,l.vx-=h*(p=o[g]),l.vy-=f*p,u.vx+=h*(p=1-p),u.vy+=f*p}function f(){if(r){var s,u,c=r.length,l=t.length,h=new Map(r.map((t,e)=>[a(t,e,r),t]));for(s=0,i=new Array(c);s<l;++s)u=t[s],u.index=s,"object"!==typeof u.source&&(u.source=BN(h,u.source)),"object"!==typeof u.target&&(u.target=BN(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(l);s<l;++s)u=t[s],o[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),d(),n=new Array(l),p()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t){r=t,f()},h.links=function(e){return arguments.length?(t=e,f(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(s="function"===typeof t?t:RN(+t),d(),h):s},h.distance=function(t){return arguments.length?(u="function"===typeof t?t:RN(+t),p(),h):u},h},WN=n("df45"),VN=n("b5ae");function HN(t){return t.x}function qN(t){return t.y}var GN=10,XN=Math.PI*(3-Math.sqrt(5)),YN=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=Object(VN["c"])(l),c=Object(WN["a"])("tick","end");function l(){h(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function h(r){var u,c,l=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<l;++u)c=t[u],null==c.fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=GN*Math.sqrt(n),o=n*XN;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return u.restart(l),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.forEach(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)s=t[c],i=e-s.x,o=n-s.y,a=i*i+o*o,a<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},KN=function(){var t,e,n,r,i=RN(-30),o=1,a=1/0,s=.81;function u(r){var i,o=t.length,a=Object(IN["a"])(t,HN,qN).visitAfter(l);for(n=r,i=0;i<o;++i)e=t[i],a.visit(h)}function c(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)n=t[e],r[n.index]=+i(n,e,t)}}function l(t){var e,n,i,o,a,s=0,u=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,o+=n*e.y);t.x=i/u,t.y=o/u}else{e=t,e.x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function h(t,i,u,c){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,f=c-i,d=l*l+h*h;if(f*f/s<d)return d<a&&(0===l&&(l=FN(),d+=l*l),0===h&&(h=FN(),d+=h*h),d<o&&(d=Math.sqrt(o*d)),e.vx+=l*t.value*n/d,e.vy+=h*t.value*n/d),!0;if(!(t.length||d>=a)){(t.data!==e||t.next)&&(0===l&&(l=FN(),d+=l*l),0===h&&(h=FN(),d+=h*h),d<o&&(d=Math.sqrt(o*d)));do{t.data!==e&&(f=r[t.data.index]*n/d,e.vx+=l*f,e.vy+=h*f)}while(t=t.next)}}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"===typeof t?t:RN(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},ZN=function(t){var e,n,r,i=RN(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)i=e[o],i.vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=RN(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:RN(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"===typeof e?e:RN(+e),a(),o):t},o},JN=function(t){var e,n,r,i=RN(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)i=e[o],i.vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=RN(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:RN(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"===typeof e?e:RN(+e),a(),o):t},o},QN={center:NN,collide:LN,nbody:KN,link:UN,x:ZN,y:JN},tI="forces",eI=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],nI=["static","iterations"],rI=["x","y","vx","vy"];function iI(t){ns.call(this,null,t)}iI.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:rI}]};var oI=Object(rt["y"])(iI,ns);function aI(t,e){return function(){t.touch(e).run()}}function sI(t,e){var n=YN(t),r=!1,i=n.stop,o=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,o()},n.stop=function(){return r=!0,i()},uI(n,e,!0).on("end",(function(){r=!0}))}function uI(t,e,n,r){var i,o,a,s,u=Object(rt["i"])(e.forces);for(i=0,o=eI.length;i<o;++i)a=eI[i],a!==tI&&e.modified(a)&&t[a](e[a]);for(i=0,o=u.length;i<o;++i)s=tI+i,a=n||e.modified(tI,i)?lI(u[i]):r&&cI(u[i],r)?t.force(s):null,a&&t.force(s,a);for(o=t.numForces||0;i<o;++i)t.force(tI+i,null);return t.numForces=u.length,t}function cI(t,e){var n,r;for(n in t)if(Object(rt["D"])(r=t[n])&&e.modified(Object(rt["g"])(r)))return 1;return 0}function lI(t){var e,n;for(n in Object(rt["v"])(QN,t.force)||Object(rt["n"])("Unrecognized force: "+t.force),e=QN[t.force](),t)Object(rt["D"])(e[n])&&hI(e[n],t[n],t);return e}function hI(t,e,n){t(Object(rt["D"])(e)?function(t){return e(t,n)}:e)}oI.transform=function(t,e){var n=this.value,r=e.changed(e.ADD_REM),i=t.modified(eI),o=t.iterations||300;if(n?(r&&(e.modifies("index"),n.nodes(e.source)),(i||e.changed(e.MOD))&&uI(n,t,0,e)):(this.value=n=sI(e.source,t),n.on("tick",aI(e.dataflow,this)),t.static||(r=!0,n.tick()),e.modifies("index")),i||r||t.modified(nI)||e.changed()&&t.restart)if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),t.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return e.StopPropagation;return this.finish(t,e)},oI.finish=function(t,e){for(var n,r=e.dataflow,i=this._argops,o=0,a=i.length;o<a;++o)if(n=i[o],n.name===tI&&"link"===n.op._argval.force)for(var s,u=n.op._argops,c=0,l=u.length;c<l;++c)if("links"===u[c].name&&(s=u[c].op.source)){r.pulse(s,r.changeset().reflow());break}return e.reflow(t.modified()).modifies(rI)};var fI=function(t,e,n){var r={};return t.each((function(t){var i=t.data;n(i)&&(r[e(i)]=t)})),t.lookup=r,t};function dI(t){var e=0,n=t.children,r=n&&n.length;if(r)while(--r>=0)e+=n[r].value;else e=1;t.value=e}var pI=function(){return this.eachAfter(dI)},gI=function(t){var e,n,r,i,o=this,a=[o];do{e=a.reverse(),a=[];while(o=e.pop())if(t(o),n=o.children,n)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},mI=function(t){var e,n,r=this,i=[r];while(r=i.pop())if(t(r),e=r.children,e)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},vI=function(t){var e,n,r,i=this,o=[i],a=[];while(i=o.pop())if(a.push(i),e=i.children,e)for(n=0,r=e.length;n<r;++n)o.push(e[n]);while(i=a.pop())t(i);return this},yI=function(t){return this.eachAfter((function(e){var n=+t(e.data)||0,r=e.children,i=r&&r.length;while(--i>=0)n+=r[i].value;e.value=n}))},bI=function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},xI=function(t){var e=this,n=wI(e,t),r=[e];while(e!==n)e=e.parent,r.push(e);var i=r.length;while(t!==n)r.splice(i,0,t),t=t.parent;return r};function wI(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();while(t===e)i=t,t=n.pop(),e=r.pop();return i}var _I=function(){var t=this,e=[t];while(t=t.parent)e.push(t);return e},OI=function(){var t=[];return this.each((function(e){t.push(e)})),t},SI=function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},CI=function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e};function kI(t,e){var n,r,i,o,a,s=new DI(t),u=+t.value&&(s.value=t.value),c=[s];null==e&&(e=TI);while(n=c.pop())if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new DI(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(jI)}function AI(){return kI(this).eachBefore(EI)}function TI(t){return t.children}function EI(t){t.data=t.data.data}function jI(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function DI(t){this.data=t,this.depth=this.height=0,this.parent=null}function MI(t){ns.call(this,null,t)}DI.prototype=kI.prototype={constructor:DI,count:pI,each:gI,eachAfter:vI,eachBefore:mI,sum:yI,sort:bI,path:xI,ancestors:_I,descendants:OI,leaves:SI,links:CI,copy:AI},MI.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var NI=Object(rt["y"])(MI,ns);function II(t){return t.values}function RI(){var t,e=[];function n(t,r){if(r>=e.length)return t;var i,o,a,s=-1,u=t.length,c=e[r++],l={},h={};while(++s<u)i=c(o=t[s])+"",(a=l[i])?a.push(o):l[i]=[o];for(i in l)h[i]=n(l[i],r);return h}function r(t,n){if(++n>e.length)return t;var i,o=[];for(i in t)o.push({key:i,values:r(t[i],n)});return o}return t={entries:t=>r(n(t,0),0),key:n=>(e.push(n),t)}}function FI(t){ns.call(this,null,t)}NI.transform=function(t,e){e.source||Object(rt["n"])("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),o=this.value;return(!o||r||e.changed())&&(o&&o.each(t=>{t.children&&ut(t.data)&&i.rem.push(t.data)}),this.value=o=kI({values:Object(rt["i"])(t.keys).reduce((t,e)=>(t.key(e),t),RI()).entries(i.source)},II),n&&o.each(t=>{t.children&&(t=ht(t.data),i.add.push(t),i.source.push(t))}),fI(o,ct,ct)),i.source.root=o,i};var PI=Object(rt["y"])(FI,ns);function $I(t,e,n){for(var r,i=0,o=e.length;i<o;++i)r=e[i],r in n&&t[r](n[r])}function LI(t,e,n){for(var r=t.data,i=0,o=e.length-1;i<o;++i)r[n[i]]=t[e[i]];r[n[o]]=t.children?t.children.length:0}function zI(t,e){return t.parent===e.parent?1:2}PI.transform=function(t,e){e.source&&e.source.root||Object(rt["n"])(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,i=e.source.root,o=t.as||r;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(gt(t.sort,t=>t.data)),$I(n,this.params,t),n.separation&&n.separation(!1!==t.separation?zI:rt["O"]);try{this.value=n(i)}catch(a){Object(rt["n"])(a)}return i.each((function(t){LI(t,r,o)})),e.reflow(t.modified()).modifies(o).modifies("leaf")};var BI=Array.prototype.slice;function UI(t){var e,n,r=t.length;while(r)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}var WI=function(t){var e,n,r=0,i=(t=UI(BI.call(t))).length,o=[];while(r<i)e=t[r],n&&qI(n,e)?++r:(n=XI(o=VI(o,e)),r=0);return n};function VI(t,e){var n,r;if(GI(e,t))return[e];for(n=0;n<t.length;++n)if(HI(e,t[n])&&GI(KI(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(HI(KI(t[n],t[r]),e)&&HI(KI(t[n],e),t[r])&&HI(KI(t[r],e),t[n])&&GI(ZI(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function HI(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function qI(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function GI(t,e){for(var n=0;n<e.length;++n)if(!qI(t,e[n]))return!1;return!0}function XI(t){switch(t.length){case 1:return YI(t[0]);case 2:return KI(t[0],t[1]);case 3:return ZI(t[0],t[1],t[2])}}function YI(t){return{x:t.x,y:t.y,r:t.r}}function KI(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,h=Math.sqrt(u*u+c*c);return{x:(n+o+u/h*l)/2,y:(r+a+c/h*l)/2,r:(h+i+s)/2}}function ZI(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,h=n.r,f=r-a,d=r-c,p=i-s,g=i-l,m=u-o,v=h-o,y=r*r+i*i-o*o,b=y-a*a-s*s+u*u,x=y-c*c-l*l+h*h,w=d*p-f*g,_=(p*x-g*b)/(2*w)-r,O=(g*m-p*v)/w,S=(d*b-f*x)/(2*w)-i,C=(f*v-d*m)/w,k=O*O+C*C-1,A=2*(o+_*O+S*C),T=_*_+S*S-o*o,E=-(k?(A+Math.sqrt(A*A-4*k*T))/(2*k):T/A);return{x:r+_+O*E,y:i+S+C*E,r:E}}function JI(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,a=t.r+n.r,a*=a,i>a?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function QI(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function tR(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function eR(t){this._=t,this.next=null,this.previous=null}function nR(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,s,u,c,l,h;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;JI(n,e,r=t[2]),e=new eR(e),n=new eR(n),r=new eR(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){JI(e._,n._,r=t[s]),r=new eR(r),u=n.next,c=e.previous,l=n._.r,h=e._.r;do{if(l<=h){if(QI(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}l+=u._.r,u=u.next}else{if(QI(c._,r._)){e=c,e.next=n,n.previous=e,--s;continue t}h+=c._.r,c=c.previous}}while(u!==c.next);r.previous=e,r.next=n,e.next=n.previous=n=r,o=tR(e);while((r=r.next)!==n)(a=tR(r))<o&&(e=r,o=a);n=e.next}e=[n._],r=n;while((r=r.next)!==n)e.push(r._);for(r=WI(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function rR(t){return null==t?null:iR(t)}function iR(t){if("function"!==typeof t)throw new Error;return t}function oR(){return 0}var aR=function(t){return function(){return t}};function sR(t){return Math.sqrt(t.value)}var uR=function(){var t=null,e=1,n=1,r=oR;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(cR(t)).eachAfter(lR(r,.5)).eachBefore(hR(1)):i.eachBefore(cR(sR)).eachAfter(lR(oR,1)).eachAfter(lR(r,i.r/Math.min(e,n))).eachBefore(hR(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=rR(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:aR(+t),i):r},i};function cR(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function lR(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=nR(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function hR(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var fR=["x","y","r","depth","children"];function dR(t){FI.call(this,t)}dR.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fR.length,default:fR}]};var pR=Object(rt["y"])(dR,FI);pR.layout=uR,pR.params=["radius","size","padding"],pR.fields=fR;var gR=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},mR=function(t,e,n,r,i){var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;while(++s<u)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},vR=function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(o(e,a)),r&&i.eachBefore(gR),i}function o(t,e){return function(r){r.children&&mR(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},yR=["x0","y0","x1","y1","depth","children"];function bR(t){FI.call(this,t)}bR.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:yR.length,default:yR}]};var xR=Object(rt["y"])(bR,FI);xR.layout=vR,xR.params=["size","round","padding"],xR.fields=yR;var wR="$",_R={depth:-1},OR={};function SR(t){return t.id}function CR(t){return t.parentId}var kR=function(){var t=SR,e=CR;function n(n){var r,i,o,a,s,u,c,l=n.length,h=new Array(l),f={};for(i=0;i<l;++i)r=n[i],s=h[i]=new DI(r),null!=(u=t(r,i,n))&&(u+="")&&(c=wR+(s.id=u),f[c]=c in f?OR:s);for(i=0;i<l;++i)if(s=h[i],u=e(n[i],i,n),null!=u&&(u+="")){if(a=f[wR+u],!a)throw new Error("missing: "+u);if(a===OR)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=_R,o.eachBefore((function(t){t.depth=t.parent.depth+1,--l})).eachBefore(jI),o.parent=null,l>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=iR(e),n):t},n.parentId=function(t){return arguments.length?(e=iR(t),n):e},n};function AR(t){ns.call(this,null,t)}AR.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};var TR=Object(rt["y"])(AR,ns);function ER(t,e){return t.parent===e.parent?1:2}function jR(t){var e=t.children;return e?e[0]:t.t}function DR(t){var e=t.children;return e?e[e.length-1]:t.t}function MR(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function NR(t){var e,n=0,r=0,i=t.children,o=i.length;while(--o>=0)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function IR(t,e,n){return t.a.parent===e.parent?t.a:n}function RR(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function FR(t){var e,n,r,i,o,a=new RR(t,0),s=[a];while(e=s.pop())if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new RR(r[i],i)),n.parent=e;return(a.parent=new RR(null,0)).children=[a],a}TR.transform=function(t,e){e.source||Object(rt["n"])("Stratify transform requires an upstream data source.");var n=this.value,r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),o=!this.value||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?fI(kR().id(t.key).parentId(t.parentKey)(i.source),t.key,rt["gb"]):fI(kR()([{}]),t.key,t.key)),i.source.root=this.value=n,i},RR.prototype=Object.create(DI.prototype);var PR=function(){var t=ER,e=1,n=1,r=null;function i(i){var s=FR(i);if(s.eachAfter(o),s.parent.m=-s.z,s.eachBefore(a),r)i.eachBefore(u);else{var c=i,l=i,h=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>h.depth&&(h=t)}));var f=c===l?1:t(c,l)/2,d=f-c.x,p=e/(l.x+f+d),g=n/(h.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*g}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){NR(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=s(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(e,n,r){if(n){var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,l=a.m,h=s.m,f=u.m;while(s=DR(s),o=jR(o),s&&o)u=jR(u),a=DR(a),a.a=e,i=s.z+h-o.z-c+t(s._,o._),i>0&&(MR(IR(s,e,r),e,i),c+=i,l+=i),h+=s.m,c+=o.m,f+=u.m,l+=a.m;s&&!DR(a)&&(a.t=s,a.m+=h-l),o&&!jR(u)&&(u.t=o,u.m+=c-f,r=e)}return r}function u(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i};function $R(t,e){return t.parent===e.parent?1:2}function LR(t){return t.reduce(zR,0)/t.length}function zR(t,e){return t+e.x}function BR(t){return 1+t.reduce(UR,0)}function UR(t,e){return Math.max(t,e.y)}function WR(t){var e;while(e=t.children)t=e[0];return t}function VR(t){var e;while(e=t.children)t=e[e.length-1];return t}var HR=function(){var t=$R,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=LR(n),e.y=BR(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=WR(i),u=VR(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},qR={tidy:PR,cluster:HR},GR=["x","y","depth","children"];function XR(t){FI.call(this,t)}XR.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:GR.length,default:GR}]};var YR=Object(rt["y"])(XR,FI);function KR(t){ns.call(this,[],t)}YR.layout=function(t){var e=t||"tidy";if(Object(rt["v"])(qR,e))return qR[e]();Object(rt["n"])("Unrecognized Tree layout method: "+e)},YR.params=["size","nodeSize"],YR.fields=GR,KR.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};var ZR=Object(rt["y"])(KR,ns);ZR.transform=function(t,e){var n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),o={};return r||Object(rt["n"])("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,(function(t){o[ct(t)]=1})),r.each((function(t){var e=t.data,n=t.parent&&t.parent.data;n&&o[ct(e)]&&o[ct(n)]&&i.add.push(ht({source:n,target:e}))})),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,(function(t){o[ct(t)]=1})),n.forEach((function(t){(o[ct(t.source)]||o[ct(t.target)])&&i.mod.push(t)}))),i};var JR=function(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;function l(t,e,n,r,i,o,a){if(t>=e-1){var u=s[t];return u.x0=r,u.y0=i,u.x1=o,void(u.y1=a)}var h=c[t],f=n/2+h,d=t+1,p=e-1;while(d<p){var g=d+p>>>1;c[g]<f?d=g+1:p=g}f-c[d-1]<c[d]-f&&t+1<d&&--d;var m=c[d]-h,v=n-m;if(o-r>a-i){var y=(r*v+o*m)/n;l(t,d,m,r,i,y,a),l(d,e,v,y,i,o,a)}else{var b=(i*v+a*m)/n;l(t,d,m,r,i,o,b),l(d,e,v,r,b,o,a)}}l(0,u,t.value,e,n,r,i)},QR=function(t,e,n,r,i){var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;while(++s<u)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},tF=function(t,e,n,r,i){(1&t.depth?QR:mR)(t,e,n,r,i)},eF=(1+Math.sqrt(5))/2;function nF(t,e,n,r,i,o){var a,s,u,c,l,h,f,d,p,g,m,v=[],y=e.children,b=0,x=0,w=y.length,_=e.value;while(b<w){u=i-n,c=o-r;do{l=y[x++].value}while(!l&&x<w);for(h=f=l,g=Math.max(c/u,u/c)/(_*t),m=l*l*g,p=Math.max(f/m,m/h);x<w;++x){if(l+=s=y[x].value,s<h&&(h=s),s>f&&(f=s),m=l*l*g,d=Math.max(f/m,m/h),d>p){l-=s;break}p=d}v.push(a={value:l,dice:u<c,children:y.slice(b,x)}),a.dice?mR(a,n,r,i,_?r+=c*l/_:o):QR(a,n,r,_?n+=u*l/_:i,o),_-=l,b=x}return v}var rF=function t(e){function n(t,n,r,i,o){nF(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(eF),iF=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e){var a,s,u,c,l,h=-1,f=a.length,d=t.value;while(++h<f){for(s=a[h],u=s.children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?mR(s,n,r,i,r+=(o-r)*s.value/d):QR(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}}else t._squarify=a=nF(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(eF),oF=function(){var t=rF,e=!1,n=1,r=1,i=[0],o=oR,a=oR,s=oR,u=oR,c=oR;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(gR),t}function h(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,h=e.x1-n,f=e.y1-n;h<r&&(r=h=(r+h)/2),f<l&&(l=f=(l+f)/2),e.x0=r,e.y0=l,e.x1=h,e.y1=f,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,l+=a(e)-n,h-=s(e)-n,f-=u(e)-n,h<r&&(r=h=(r+h)/2),f<l&&(l=f=(l+f)/2),t(e,r,l,h,f))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=iR(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o="function"===typeof t?t:aR(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(a="function"===typeof t?t:aR(+t),l):a},l.paddingRight=function(t){return arguments.length?(s="function"===typeof t?t:aR(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"===typeof t?t:aR(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"===typeof t?t:aR(+t),l):c},l},aF={binary:JR,dice:mR,slice:QR,slicedice:tF,squarify:rF,resquarify:iF},sF=["x0","y0","x1","y1","depth","children"];function uF(t){FI.call(this,t)}uF.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:sF.length,default:sF}]};var cF=Object(rt["y"])(uF,FI);cF.layout=function(){var t=oF();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){Object(rt["v"])(aF,e)?t.tile(aF[e]):Object(rt["n"])("Unrecognized Treemap layout method: "+e)},t},cF.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],cF.fields=sF;var lF=function(t,e){var n,r,i,o,a,s,u=[],c=function(t){return t(o)};if(null==e)u.push(t);else for(n={},r=0,i=t.length;r<i;++r)o=t[r],a=e.map(c),s=n[a],s||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u};function hF(t){ns.call(this,null,t)}hF.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};var fF=Object(rt["y"])(hF,ns);fF.transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=lF(r,t.groupby),o=(t.groupby||[]).map(rt["h"]),a=o.length,s=t.as||[Object(rt["h"])(t.x),Object(rt["h"])(t.y)],u=[];i.forEach(e=>{Au(e,t.x,t.y,t.bandwidth||.3).forEach(t=>{const n={};for(let r=0;r<a;++r)n[o[r]]=e.dims[r];n[s[0]]=t[0],n[s[1]]=t[1],u.push(ht(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n};const dF={linear:mu,log:vu,exp:yu,pow:bu,quad:xu,poly:wu};function pF(t,e){return"poly"===t?e:"quad"===t?2:1}function gF(t){ns.call(this,null,t)}gF.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(dF)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};var mF=Object(rt["y"])(gF,ns);mF.transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=lF(r,t.groupby),o=(t.groupby||[]).map(rt["h"]),a=t.method||"linear",s=t.order||3,u=pF(a,s),c=t.as||[Object(rt["h"])(t.x),Object(rt["h"])(t.y)],l=dF[a],h=[];let f=t.extent;Object(rt["v"])(dF,a)||Object(rt["n"])("Invalid regression method: "+a),null!=f&&"log"===a&&f[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),i.forEach(n=>{const r=n.length;if(r<=u)return void e.dataflow.warn("Skipping regression with more parameters than data points.");const i=l(n,t.x,t.y,s);if(t.params)return void h.push(ht({keys:n.dims,coef:i.coef,rSquared:i.rSquared}));const d=f||Object(rt["p"])(n,t.x),p=t=>{const e={};for(let r=0;r<o.length;++r)e[o[r]]=n.dims[r];e[c[0]]=t[0],e[c[1]]=t[1],h.push(ht(e))};"linear"===a?d.forEach(t=>p([t,i.predict(t)])):Mu(i.predict,d,25,200).forEach(p)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n};const vF=Math.pow(2,-52),yF=new Uint32Array(512);class bF{static from(t,e=EF,n=jF){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new bF(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,s=1/0,u=-1/0,c=-1/0;for(let C=0;C<o;C++){const e=t[2*C],n=t[2*C+1];e<a&&(a=e),n<s&&(s=n),e>u&&(u=e),n>c&&(c=n),this._ids[C]=C}const l=(a+u)/2,h=(s+c)/2;let f,d,p,g=1/0;for(let C=0;C<o;C++){const e=wF(l,h,t[2*C],t[2*C+1]);e<g&&(f=C,g=e)}const m=t[2*f],v=t[2*f+1];g=1/0;for(let C=0;C<o;C++){if(C===f)continue;const e=wF(m,v,t[2*C],t[2*C+1]);e<g&&e>0&&(d=C,g=e)}let y=t[2*d],b=t[2*d+1],x=1/0;for(let C=0;C<o;C++){if(C===f||C===d)continue;const e=CF(m,v,y,b,t[2*C],t[2*C+1]);e<x&&(p=C,x=e)}let w=t[2*p],_=t[2*p+1];if(x===1/0){for(let r=0;r<o;r++)this._dists[r]=t[2*r]-t[0]||t[2*r+1]-t[1];AF(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(e[n++]=i,r=this._dists[i])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(OF(m,v,y,b,w,_)){const t=d,e=y,n=b;d=p,y=w,b=_,p=t,w=e,_=n}const O=kF(m,v,y,b,w,_);this._cx=O.x,this._cy=O.y;for(let C=0;C<o;C++)this._dists[C]=wF(t[2*C],t[2*C+1],O.x,O.y);AF(this._ids,this._dists,0,o-1),this._hullStart=f;let S=3;n[f]=e[p]=d,n[d]=e[f]=p,n[p]=e[d]=f,r[f]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(m,v)]=f,i[this._hashKey(y,b)]=d,i[this._hashKey(w,_)]=p,this.trianglesLen=0,this._addTriangle(f,d,p,-1,-1,-1);for(let C,k,A=0;A<this._ids.length;A++){const o=this._ids[A],a=t[2*o],s=t[2*o+1];if(A>0&&Math.abs(a-C)<=vF&&Math.abs(s-k)<=vF)continue;if(C=a,k=s,o===f||o===d||o===p)continue;let u=0;for(let t=0,e=this._hashKey(a,s);t<this._hashSize;t++)if(u=i[(e+t)%this._hashSize],-1!==u&&u!==n[u])break;u=e[u];let c,l=u;while(c=n[l],!OF(a,s,t[2*l],t[2*l+1],t[2*c],t[2*c+1]))if(l=c,l===u){l=-1;break}if(-1===l)continue;let h=this._addTriangle(l,o,n[l],-1,-1,r[l]);r[o]=this._legalize(h+2),r[l]=h,S++;let g=n[l];while(c=n[g],OF(a,s,t[2*g],t[2*g+1],t[2*c],t[2*c+1]))h=this._addTriangle(g,o,c,r[o],-1,r[g]),r[o]=this._legalize(h+2),n[g]=g,S--,g=c;if(l===u)while(c=e[l],OF(a,s,t[2*c],t[2*c+1],t[2*l],t[2*l+1]))h=this._addTriangle(c,o,l,-1,r[l],r[c]),this._legalize(h+2),r[c]=h,n[l]=l,S--,l=c;this._hullStart=e[o]=l,n[l]=e[g]=o,n[o]=g,i[this._hashKey(a,s)]=o,i[this._hashKey(t[2*l],t[2*l+1])]=l}this.hull=new Uint32Array(S);for(let C=0,k=this._hullStart;C<S;C++)this.hull[C]=k,k=n[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(xF(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;while(1){const a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1===a){if(0===i)break;t=yF[--i];continue}const u=a-a%3,c=s+(t+1)%3,l=u+(a+2)%3,h=e[o],f=e[t],d=e[c],p=e[l],g=SF(r[2*h],r[2*h+1],r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1]);if(g){e[t]=p,e[a]=h;const r=n[l];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===l){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(a,n[o]),this._link(o,l);const s=u+(a+1)%3;i<yF.length&&(yF[i++]=s)}else{if(0===i)break;t=yF[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function xF(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function wF(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function _F(t,e,n,r,i,o){const a=(r-e)*(i-t),s=(n-t)*(o-e);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function OF(t,e,n,r,i,o){const a=_F(i,o,t,e,n,r)||_F(t,e,n,r,i,o)||_F(n,r,i,o,t,e);return a<0}function SF(t,e,n,r,i,o,a,s){const u=t-a,c=e-s,l=n-a,h=r-s,f=i-a,d=o-s,p=u*u+c*c,g=l*l+h*h,m=f*f+d*d;return u*(h*m-g*d)-c*(l*m-g*f)+p*(l*d-h*f)<0}function CF(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,c=o-e,l=a*a+s*s,h=u*u+c*c,f=.5/(a*c-s*u),d=(c*l-s*h)*f,p=(a*h-u*l)*f;return d*d+p*p}function kF(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,c=o-e,l=a*a+s*s,h=u*u+c*c,f=.5/(a*c-s*u),d=t+(c*l-s*h)*f,p=e+(a*h-u*l)*f;return{x:d,y:p}}function AF(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let a=i-1;while(a>=n&&e[t[a]]>o)t[a+1]=t[a--];t[a+1]=r}else{const i=n+r>>1;let o=n+1,a=r;TF(t,i,o),e[t[n]]>e[t[r]]&&TF(t,n,r),e[t[o]]>e[t[r]]&&TF(t,o,r),e[t[n]]>e[t[o]]&&TF(t,n,o);const s=t[o],u=e[s];while(1){do{o++}while(e[t[o]]<u);do{a--}while(e[t[a]]>u);if(a<o)break;TF(t,o,a)}t[n+1]=t[a],t[a]=s,r-o+1>=a-n?(AF(t,e,o,r),AF(t,e,n,a-1)):(AF(t,e,n,a-1),AF(t,e,o,r))}}function TF(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function EF(t){return t[0]}function jF(t){return t[1]}const DF=1e-6;class MF{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){t=+t,e=+e,n=+n;const r=t+n,i=e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>DF||Math.abs(this._y1-i)>DF)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class NF{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class IF{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e))||!((i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let f,d,p=0,g=0,m=n.length;p<m;p+=3,g+=2){const e=2*n[p],r=2*n[p+1],o=2*n[p+2],a=t[e],s=t[e+1],u=t[r],c=t[r+1],l=t[o],h=t[o+1],m=u-a,v=c-s,y=l-a,b=h-s,x=m*m+v*v,w=y*y+b*b,_=2*(m*b-v*y);if(_)if(Math.abs(_)<1e-8)f=(a+l)/2,d=(s+h)/2;else{const t=1/_;f=a+(b*x-v*w)*t,d=s+(m*w-y*x)*t}else f=(a+l)/2-1e8*b,d=(s+h)/2+1e8*y;i[g]=f,i[g+1]=d}let o,a,s,u=e[e.length-1],c=4*u,l=t[2*u],h=t[2*u+1];r.fill(0);for(let f=0;f<e.length;++f)u=e[f],o=c,a=l,s=h,c=4*u,l=t[2*u],h=t[2*u+1],r[o+2]=r[c]=s-h,r[o+3]=r[c+1]=l-a}render(t){const e=null==t?t=new MF:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let c=0,l=n.length;c<l;++c){const e=n[c];if(e<c)continue;const r=2*Math.floor(c/3),i=2*Math.floor(e/3),a=o[r],s=o[r+1],u=o[i],l=o[i+1];this._renderSegment(a,s,u,l,t)}let s,u=i[i.length-1];for(let c=0;c<i.length;++c){s=u,u=i[c];const e=2*Math.floor(r[u]/3),n=o[e],l=o[e+1],h=4*s,f=this._project(n,l,a[h+2],a[h+3]);f&&this._renderSegment(n,l,f[0],f[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new MF:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new MF:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;while(r[0]===r[i-2]&&r[1]===r[i-1]&&i>1)i-=2;for(let o=2;o<i;o+=2)r[o]===r[o-2]&&r[o+1]===r[o-1]||e.lineTo(r[o],r[o+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new NF;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const a=this._regioncode(t,e),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return e=+e,e===e&&(n=+n,n===n)&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(e[r]==t[o]&&e[r+1]==t[o+1]&&e[(r+2)%i]==t[(o+a-2)%a]&&e[(r+3)%i]==t[(o+a-1)%a]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(e[2*n],e[2*n+1]),s=s%3===2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let r,i,o,a,s,u=null,c=e[n-2],l=e[n-1],h=this._regioncode(c,l);for(let f=0;f<n;f+=2)if(r=c,i=l,c=e[f],l=e[f+1],o=h,h=this._regioncode(c,l),0===o&&0===h)a=s,s=0,u?u.push(c,l):u=[c,l];else{let e,n,f,d,p;if(0===o){if(null===(e=this._clipSegment(r,i,c,l,o,h)))continue;[n,f,d,p]=e}else{if(null===(e=this._clipSegment(c,l,r,i,h,o)))continue;[d,p,n,f]=e,a=s,s=this._edgecode(n,f),a&&s&&this._edge(t,a,s,u,u.length),u?u.push(n,f):u=[n,f]}a=s,s=this._edgecode(d,p),a&&s&&this._edge(t,a,s,u,u.length),u?u.push(d,p):u=[d,p]}if(u)a=s,s=this._edgecode(u[0],u[1]),a&&s&&this._edge(t,a,s,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,e,n,r,i,o){while(1){if(0===i&&0===o)return[t,e,n,r];if(i&o)return null;let a,s,u=i||o;8&u?(a=t+(n-t)*(this.ymax-e)/(r-e),s=this.ymax):4&u?(a=t+(n-t)*(this.ymin-e)/(r-e),s=this.ymin):2&u?(s=e+(r-e)*(this.xmax-t)/(n-t),a=this.xmax):(s=e+(r-e)*(this.xmin-t)/(n-t),a=this.xmin),i?(t=a,e=s,i=this._regioncode(t,e)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,o){let a,s=Array.from(e);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(let u,c=0,l=s.length,h=this._edgecode(s[l-2],s[l-1]);c<l;c+=2)u=h,h=this._edgecode(s[c],s[c+1]),u&&h&&(c=this._edge(t,u,h,s,c),l=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){while(e!==n){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin;break}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let o=0;o<r.length;o+=2){const t=(o+2)%r.length,e=(o+4)%r.length;(r[o]===r[t]&&r[t]===r[e]||r[o+1]===r[t+1]&&r[t+1]===r[e+1])&&(r.splice(t,2),o-=2)}return i}_project(t,e,n,r){let i,o,a,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(a=this.ymin,o=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(a=this.ymax,o=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(o=this.xmax,a=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(o=this.xmin,a=e+(s=i)*r)}return[o,a]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const RF=2*Math.PI,FF=Math.pow;function PF(t){return t[0]}function $F(t){return t[1]}function LF(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const t=2*e[r],i=2*e[r+1],o=2*e[r+2],a=(n[o]-n[t])*(n[i+1]-n[t+1])-(n[i]-n[t])*(n[o+1]-n[t+1]);if(a>1e-10)return!1}return!0}function zF(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class BF{static from(t,e=PF,n=$F,r){return new BF("length"in t?UF(t,e,n,r):Float64Array.from(WF(t,e,n,r)))}constructor(t){this._delaunator=new bF(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&LF(t)){this.collinear=Int32Array.from({length:e.length/2},(t,e)=>e).sort((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]);const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let o=0,a=e.length/2;o<a;++o){const t=zF(e[2*o],e[2*o+1],i);e[2*o]=t[0],e[2*o+1]=t[1]}this._delaunator=new bF(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let s=0,u=n.length;s<u;++s){const t=i[s%3===2?s-2:s+1];-1!==n[s]&&-1!==o[t]||(o[t]=s)}for(let s=0,u=r.length;s<u;++s)a[r[s]]=s;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(t){return new IF(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const e=a.indexOf(t);return e>0&&(yield a[e-1]),void(e<a.length-1&&(yield a[e+1]))}const s=e[t];if(-1===s)return;let u=s,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=i[u],-1===u){const e=n[(r[t]+1)%n.length];return void(e!==c&&(yield e))}}while(u!==s)}find(t,e,n=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;const r=n;let i;while((i=this._step(n,t,e))>=0&&i!==n&&i!==r)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let c=t,l=FF(e-u[2*t],2)+FF(n-u[2*t+1],2);const h=r[t];let f=h;do{let r=s[f];const h=FF(e-u[2*r],2)+FF(n-u[2*r+1],2);if(h<l&&(l=h,c=r),f=f%3===2?f-2:f+1,s[f]!==t)break;if(f=a[f],-1===f){if(f=i[(o[t]+1)%i.length],f!==r&&FF(e-u[2*f],2)+FF(n-u[2*f+1],2)<l)return f;break}}while(f!==h);return c}render(t){const e=null==t?t=new MF:void 0,{points:n,halfedges:r,triangles:i}=this;for(let o=0,a=r.length;o<a;++o){const e=r[o];if(e<o)continue;const a=2*i[o],s=2*i[e];t.moveTo(n[a],n[a+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e=2){const n=null==t?t=new MF:void 0,{points:r}=this;for(let i=0,o=r.length;i<o;i+=2){const n=r[i],o=r[i+1];t.moveTo(n+e,o),t.arc(n,o,e,0,RF)}return n&&n.value()}renderHull(t){const e=null==t?t=new MF:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let a=1;a<o;++a){const e=2*n[a];t.lineTo(r[e],r[e+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new NF;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new MF:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],s=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[a],r[a+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new NF;return this.renderTriangle(t,e),e.value()}}function UF(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=e.call(r,i,a,t),o[2*a+1]=n.call(r,i,a,t)}return o}function*WF(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}function VF(t){ns.call(this,null,t)}VF.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const HF=Object(rt["y"])(VF,ns),qF=[-1e5,-1e5,1e5,1e5];function GF(t){const e=t[0][0],n=t[0][1];let r=t.length-1;for(;t[r][0]===e&&t[r][1]===n;--r);return"M"+t.slice(0,r+1).join("L")+"Z"}HF.transform=function(t,e){const n=t.as||"path",r=e.source;if(!r||!r.length)return e;let i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:qF;const o=this.value=BF.from(r,t.x,t.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){const t=o.cellPolygon(a);r[a][n]=t?GF(t):null}return e.reflow(t.modified()).modifies(n)};var XF=Math.PI/180,YF=64,KF=2048,ZF=function(){var t,e,n,r,i,o,a,s=[256,256],u=nP,c=[],l=Math.random,h={};function f(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(YF<<5)/e,t.height=KF/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function d(t,e,n){var r,i,o,a=e.x,c=e.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),f=u(s),d=l()<.5?1:-1,p=-d;while(r=f(p+=d)){if(i=~~r[0],o=~~r[1],Math.min(Math.abs(i),Math.abs(o))>=h)break;if(e.x=a+i,e.y=c+o,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>s[0]||e.y+e.y1>s[1])&&(!n||!QF(e,t,s[0]))&&(!n||eP(e,n))){for(var g,m=e.sprite,v=e.width>>5,y=s[0]>>5,b=e.x-(v<<4),x=127&b,w=32-x,_=e.y1-e.y0,O=(e.y+e.y0)*y+(b>>5),S=0;S<_;S++){g=0;for(var C=0;C<=v;C++)t[O+C]|=g<<w|(C<v?(g=m[S*v+C])>>>x:0);O+=y}return e.sprite=null,!0}}return!1}return h.layout=function(){var u=f(Np()),h=iP((s[0]>>5)*s[1]),p=null,g=c.length,m=-1,v=[],y=c.map((function(s){return{text:t(s),font:e(s),style:r(s),weight:i(s),rotate:o(s),size:~~(n(s)+1e-14),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}})).sort((function(t,e){return e.size-t.size}));while(++m<g){var b=y[m];b.x=s[0]*(l()+.5)>>1,b.y=s[1]*(l()+.5)>>1,JF(u,b,y,m),b.hasText&&d(h,b,p)&&(v.push(b),p?tP(p,b):p=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=s[0]>>1,b.y-=s[1]>>1)}return v},h.words=function(t){return arguments.length?(c=t,h):c},h.size=function(t){return arguments.length?(s=[+t[0],+t[1]],h):s},h.font=function(t){return arguments.length?(e=oP(t),h):e},h.fontStyle=function(t){return arguments.length?(r=oP(t),h):r},h.fontWeight=function(t){return arguments.length?(i=oP(t),h):i},h.rotate=function(t){return arguments.length?(o=oP(t),h):o},h.text=function(e){return arguments.length?(t=oP(e),h):t},h.spiral=function(t){return arguments.length?(u=aP[t]||t,h):u},h.fontSize=function(t){return arguments.length?(n=oP(t),h):n},h.padding=function(t){return arguments.length?(a=oP(t),h):a},h.random=function(t){return arguments.length?(l=t,h):l},h};function JF(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,(YF<<5)/o,KF/o);var a,s,u,c,l,h=0,f=0,d=0,p=n.length;--r;while(++r<p){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font,a=i.measureText(e.text+"m").width*o,u=e.size<<1,e.rotate){var g=Math.sin(e.rotate*XF),m=Math.cos(e.rotate*XF),v=a*m,y=a*g,b=u*m,x=u*g;a=Math.max(Math.abs(v+x),Math.abs(v-x))+31>>5<<5,u=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else a=a+31>>5<<5;if(u>d&&(d=u),h+a>=YF<<5&&(h=0,f+=d,d=0),f+u>=KF)break;i.translate((h+(a>>1))/o,(f+(u>>1))/o),e.rotate&&i.rotate(e.rotate*XF),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=a,e.height=u,e.xoff=h,e.yoff=f,e.x1=a>>1,e.y1=u>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,h+=a}var w=i.getImageData(0,0,(YF<<5)/o,KF/o).data,_=[];while(--r>=0)if(e=n[r],e.hasText){for(a=e.width,s=a>>5,u=e.y1-e.y0,c=0;c<u*s;c++)_[c]=0;if(h=e.xoff,null==h)return;f=e.yoff;var O=0,S=-1;for(l=0;l<u;l++){for(c=0;c<a;c++){var C=s*l+(c>>5),k=w[(f+l)*(YF<<5)+(h+c)<<2]?1<<31-c%32:0;_[C]|=k,O|=k}O?S=l:(e.y0++,u--,l--,f++)}e.y1=e.y0+S,e.sprite=_.slice(0,(e.y1-e.y0)*s)}}}function QF(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),s=127&a,u=32-s,c=t.y1-t.y0,l=(t.y+t.y0)*n+(a>>5),h=0;h<c;h++){r=0;for(var f=0;f<=o;f++)if((r<<u|(f<o?(r=i[h*o+f])>>>s:0))&e[l+f])return!0;l+=n}return!1}function tP(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function eP(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function nP(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function rP(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(t){var o=t<0?-1:1;switch(Math.sqrt(1+4*o*t)-o&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e;break}return[r,i]}}function iP(t){var e=[],n=-1;while(++n<t)e[n]=0;return e}function oP(t){return"function"===typeof t?t:function(){return t}}var aP={archimedean:nP,rectangular:rP},sP=["x","y","font","fontSize","fontStyle","fontWeight","angle"],uP=["text","font","rotate","fontSize","fontStyle","fontWeight"];function cP(t){ns.call(this,ZF(),t)}cP.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:sP}]};var lP=Object(rt["y"])(cP,ns);function hP(t){return new Uint8Array(t)}function fP(t){return new Uint16Array(t)}function dP(t){return new Uint32Array(t)}function pP(){var t=8,e=[],n=dP(0),r=mP(0,t),i=mP(0,t);return{data:function(){return e},seen:function(){return n=gP(n,e.length)},add:function(t){for(var n,r=0,i=e.length,o=t.length;r<o;++r)n=t[r],n._index=i++,e.push(n)},remove:function(t,n){var o,a,s,u=e.length,c=Array(u-t),l=e;for(a=0;!n[a]&&a<u;++a)c[a]=e[a],l[a]=a;for(s=a;a<u;++a)o=e[a],n[a]?l[a]=-1:(l[a]=s,r[s]=r[a],i[s]=i[a],c[s]=o,o._index=s++),r[a]=0;return e=c,l},size:function(){return e.length},curr:function(){return r},prev:function(){return i},reset:function(t){i[t]=r[t]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(t,e){r[t]|=e},clear:function(t,e){r[t]&=~e},resize:function(e,n){var o=r.length;(e>o||n>t)&&(t=Math.max(n,t),r=mP(e,t,r),i=mP(e,t))}}}function gP(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function mP(t,e,n){var r=(e<257?hP:e<65537?fP:dP)(t);return n&&r.set(n),r}lP.transform=function(t,e){function n(n){var r=t[n];return Object(rt["D"])(r)&&e.modified(r.fields)}!t.size||t.size[0]&&t.size[1]||Object(rt["n"])("Wordcloud size dimensions must be non-zero.");var r=t.modified();if(r||e.changed(e.ADD_REM)||uP.some(n)){var i,o=e.materialize(e.SOURCE).source,a=this.value,s=t.as||sP,u=t.fontSize||14;if(Object(rt["D"])(u)?i=t.fontSizeRange:u=Object(rt["l"])(u),i){var c=u,l=$x("sqrt")().domain(Object(rt["p"])(o,c)).range(i);u=function(t){return l(c(t))}}o.forEach((function(t){t[s[0]]=NaN,t[s[1]]=NaN,t[s[3]]=0}));for(var h,f,d=a.words(o).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(u).random($s).layout(),p=a.size(),g=p[0]>>1,m=p[1]>>1,v=0,y=d.length;v<y;++v)h=d[v],f=h.datum,f[s[0]]=h.x+g,f[s[1]]=h.y+m,f[s[2]]=h.font,f[s[3]]=h.size,f[s[4]]=h.style,f[s[5]]=h.weight,f[s[6]]=h.rotate;return e.reflow(r).modifies(s)}};var vP=function(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var n,i=this,o=i.bisect(i.range,t.value),a=t.index,s=o[0],u=o[1],c=a.length;for(n=0;n<s;++n)e[a[n]]|=r;for(n=u;n<c;++n)e[a[n]]|=r;return i}}},yP=function(t,e){return Array.from(e,e=>t[e])};function bP(){var t=dP(0),e=[],n=0;function r(r,i,o){if(!i.length)return[];var a,s,u,c=n,l=i.length,h=Array(l),f=dP(l);for(u=0;u<l;++u)h[u]=r(i[u]),f[u]=u;if(h=xP(h,f),c)a=e,s=t,e=Array(c+l),t=dP(c+l),wP(o,a,s,c,h,f,l,e,t);else{if(o>0)for(u=0;u<l;++u)f[u]+=o;e=h,t=f}return n=c+l,{index:f,value:h}}function i(r,i){var o,a,s,u=n;for(a=0;!i[t[a]]&&a<u;++a);for(s=a;a<u;++a)i[o=t[a]]||(t[s]=o,e[s]=e[a],++s);n=u-r}function o(e){for(var r=0,i=n;r<i;++r)t[r]=e[t[r]]}function a(t,r){var i;return r?i=r.length:(r=e,i=n),[Fy(r,t[0],0,i),Ry(r,t[1],0,i)]}return{insert:r,remove:i,bisect:a,reindex:o,index:function(){return t},size:function(){return n}}}function xP(t,e){return t.sort.call(e,(function(e,n){var r=t[e],i=t[n];return r<i?-1:r>i?1:0})),yP(t,e)}function wP(t,e,n,r,i,o,a,s,u){var c,l=0,h=0;for(c=0;l<r&&h<a;++c)e[l]<i[h]?(s[c]=e[l],u[c]=n[l++]):(s[c]=i[h],u[c]=o[h++]+t);for(;l<r;++l,++c)s[c]=e[l],u[c]=n[l];for(;h<a;++h,++c)s[c]=i[h],u[c]=o[h]+t}function _P(t){ns.call(this,pP(),t),this._indices=null,this._dims=null}_P.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var OP=Object(rt["y"])(_P,ns);function SP(t){ns.call(this,null,t)}OP.transform=function(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some((function(t){return e.modified(t.fields)}));return n?this.reinit(t,e):this.eval(t,e)}return this.init(t,e)},OP.init=function(t,e){for(var n,r,i=t.fields,o=t.query,a=this._indices={},s=this._dims=[],u=o.length,c=0;c<u;++c)n=i[c].fname,r=a[n]||(a[n]=bP()),s.push(vP(r,c,o[c]));return this.eval(t,e)},OP.reinit=function(t,e){var n,r,i,o,a,s,u,c,l,h=e.materialize().fork(),f=t.fields,d=t.query,p=this._indices,g=this._dims,m=this.value,v=m.curr(),y=m.prev(),b=m.all(),x=h.rem=h.add,w=h.mod,_=d.length,O={};if(y.set(v),e.rem.length&&(a=this.remove(t,e,h)),e.add.length&&m.add(e.add),e.mod.length)for(s={},o=e.mod,u=0,c=o.length;u<c;++u)s[o[u]._index]=1;for(u=0;u<_;++u)l=f[u],(!g[u]||t.modified("fields",u)||e.modified(l.fields))&&(i=l.fname,(n=O[i])||(p[i]=r=bP(),O[i]=n=r.insert(l,e.source,0)),g[u]=vP(r,u,d[u]).onAdd(n,v));for(u=0,c=m.data().length;u<c;++u)a[u]||(y[u]!==v[u]?x.push(u):s[u]&&v[u]!==b&&w.push(u));return m.mask=(1<<_)-1,h},OP.eval=function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},OP.insert=function(t,e,n){var r,i,o,a=e.add,s=this.value,u=this._dims,c=this._indices,l=t.fields,h={},f=n.add,d=s.size(),p=d+a.length,g=u.length;s.resize(p,g),s.add(a);var m=s.curr(),v=s.prev(),y=s.all();for(r=0;r<g;++r)i=l[r].fname,o=h[i]||(h[i]=c[i].insert(l[r],a,d)),u[r].onAdd(o,m);for(;d<p;++d)v[d]=y,m[d]!==y&&f.push(d)},OP.modify=function(t,e){var n,r,i,o=e.mod,a=this.value,s=a.curr(),u=a.all(),c=t.mod;for(n=0,r=c.length;n<r;++n)i=c[n]._index,s[i]!==u&&o.push(i)},OP.remove=function(t,e,n){var r,i,o,a,s=this._indices,u=this.value,c=u.curr(),l=u.prev(),h=u.all(),f={},d=n.rem,p=e.rem;for(r=0,i=p.length;r<i;++r)o=p[r]._index,f[o]=1,l[o]=a=c[o],c[o]=h,a!==h&&d.push(o);for(o in s)s[o].remove(i,f);return this.reindex(e,i,f),f},OP.reindex=function(t,e,n){var r=this._indices,i=this.value;t.runAfter((function(){var t=i.remove(e,n);for(var o in r)r[o].reindex(t)}))},OP.update=function(t,e,n){var r,i,o=this._dims,a=t.query,s=e.stamp,u=o.length,c=0;for(n.filters=0,i=0;i<u;++i)t.modified("query",i)&&(r=i,++c);if(1===c)c=o[r].one,this.incrementOne(o[r],a[r],n.add,n.rem);else for(i=0,c=0;i<u;++i)t.modified("query",i)&&(c|=o[i].one,this.incrementAll(o[i],a[i],s,n.add),n.rem=n.add);return c},OP.incrementAll=function(t,e,n,r){var i,o,a,s=this.value,u=s.seen(),c=s.curr(),l=s.prev(),h=t.index(),f=t.bisect(t.range),d=t.bisect(e),p=d[0],g=d[1],m=f[0],v=f[1],y=t.one;if(p<m)for(i=p,o=Math.min(m,g);i<o;++i)a=h[i],u[a]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;else if(p>m)for(i=m,o=Math.min(p,v);i<o;++i)a=h[i],u[a]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;if(g>v)for(i=Math.max(p,v),o=g;i<o;++i)a=h[i],u[a]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;else if(g<v)for(i=Math.max(m,g),o=v;i<o;++i)a=h[i],u[a]!==n&&(l[a]=c[a],u[a]=n,r.push(a)),c[a]^=y;t.range=e.slice()},OP.incrementOne=function(t,e,n,r){var i,o,a,s=this.value,u=s.curr(),c=t.index(),l=t.bisect(t.range),h=t.bisect(e),f=h[0],d=h[1],p=l[0],g=l[1],m=t.one;if(f<p)for(i=f,o=Math.min(p,d);i<o;++i)a=c[i],u[a]^=m,n.push(a);else if(f>p)for(i=p,o=Math.min(f,g);i<o;++i)a=c[i],u[a]^=m,r.push(a);if(d>g)for(i=Math.max(f,g),o=d;i<o;++i)a=c[i],u[a]^=m,n.push(a);else if(d<g)for(i=Math.max(p,d),o=g;i<o;++i)a=c[i],u[a]^=m,r.push(a);t.range=e.slice()},SP.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};var CP=Object(rt["y"])(SP,ns);CP.transform=function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(0===(i&n))return e.StopPropagation;var o=e.fork(e.ALL),a=r.data(),s=r.curr(),u=r.prev(),c=function(t){return s[t]&n?null:a[t]};return o.filter(o.MOD,c),i&i-1?(o.filter(o.ADD,(function(t){var e=s[t]&n,r=!e&&e^u[t]&n;return r?a[t]:null})),o.filter(o.REM,(function(t){var e=s[t]&n,r=e&&!(e^e^u[t]&n);return r?a[t]:null}))):(o.filter(o.ADD,c),o.filter(o.REM,(function(t){return(s[t]&n)===i?a[t]:null}))),o.filter(o.SOURCE,(function(t){return c(t._index)}))};var kP=n("f161");function AP(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),TP(e,t.description()))}function TP(t,e){t&&(null==e?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}var EP=function(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})};const jP="default";var DP=function(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:jP,item:null}));t.on(t.events("view","mousemove"),e,(function(t,n){const r=e.value,i=r?Object(rt["H"])(r)?r:r.user:jP,o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}})),t.add(null,(function(e){let n=e.cursor,r=this.value;return Object(rt["H"])(n)||(r=n.item,n=n.user),MP(t,n&&n!==jP?n:r||n),r}),{cursor:e})};function MP(t,e){const n=t.globalCursor()?"undefined"!==typeof document&&document.body:t.container();if(n)return null==e?n.style.removeProperty("cursor"):n.style.cursor=e}function NP(t,e){var n=t._runtime.data;return Object(rt["v"])(n,e)||Object(rt["n"])("Unrecognized data set: "+e),n[e]}function IP(t,e){return arguments.length<2?NP(this,t).values.value:RP.call(this,t,vt().remove(rt["gb"]).insert(e))}function RP(t,e){mt(e)||Object(rt["n"])("Second argument to changes must be a changeset.");var n=NP(this,t);return n.modified=!0,this.pulse(n.input,e)}function FP(t,e){return RP.call(this,t,vt().insert(e))}function PP(t,e){return RP.call(this,t,vt().remove(e))}function $P(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function LP(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function zP(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function BP(t){var e=zP(t),n=$P(t),r=LP(t);t._renderer.background(t.background()),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach((function(e){try{e(n,r)}catch(i){t.error(i)}}))}var UP=function(t,e,n){var r,i,o,a=t._renderer,s=a&&a.canvas();return s&&(o=zP(t),i=e.changedTouches?e.changedTouches[0]:e,r=mv(i,s),r[0]-=o[0],r[1]-=o[1]),e.dataflow=t,e.item=n,e.vega=WP(t,n,r),e};function WP(t,e,n){var r=e?"group"===e.mark.marktype?e:e.mark.group:null;function i(t){var n,i=r;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(t){if(!t)return n;Object(rt["H"])(t)&&(t=i(t));var e=n.slice();while(t)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:Object(rt["l"])(t),item:Object(rt["l"])(e||{}),group:i,xy:o,x:function(t){return o(t)[0]},y:function(t){return o(t)[1]}}}const VP="view",HP="timer",qP="window",GP={trap:!1};function XP(t){const e=Object(rt["o"])({defaults:{}},t),n=(t,e)=>{e.forEach(e=>{Object(rt["A"])(t[e])&&(t[e]=Object(rt["db"])(t[e]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}function YP(t,e){var n=t._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[e]:i?!i[e]:t.preventDefault()))}function KP(t,e,n){const r=t._eventConfig&&t._eventConfig[e];return!(!1===r||Object(rt["F"])(r)&&!r[n])||(t.warn(`Blocked ${e} ${n} event listener.`),!1)}function ZP(t,e,n){var r,i=this,o=new Mt(n),a=function(n,r){i.runAsync(null,()=>{t===VP&&YP(i,e)&&n.preventDefault(),o.receive(UP(i,n,r))})};if(t===HP)KP(i,"timer",e)&&i.timer(a,e);else if(t===VP)KP(i,"view",e)&&i.addEventListener(e,a,GP);else if(t===qP?KP(i,"window",e)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&KP(i,"selector",e)&&(r=document.querySelectorAll(t)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(e,a);i._eventListeners.push({type:e,sources:r,handler:a})}else i.warn("Can not resolve event source: "+t);return o}function JP(t){return t.item}function QP(t){return t.item.mark.source}function t$(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}var e$=function(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","mouseover",JP),QP,t$(t)),this.on(this.events("view","mouseout",JP),QP,t$(e)),this},n$=function(){var t,e,n,r=this._tooltip,i=this._timers,o=this._eventListeners;t=i.length;while(--t>=0)i[t].stop();t=o.length;while(--t>=0){n=o[t],e=n.sources.length;while(--e>=0)n.sources[e].removeEventListener(n.type,n.handler)}return r&&r.call(this,this._handler,null,null,null),this},r$=function(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r};const i$="vega-bind",o$="vega-bind-name",a$="vega-bind-radio";var s$=function(t,e,n){if(!e)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:e=>{e!==t.signal(r.signal)&&t.runAsync(null,(function(){i.source=!0,t.signal(r.signal,e)}))}},r.debounce&&(i.update=Object(rt["m"])(r.debounce,i.update))),u$(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0),i};function u$(t,e,n,r){const i=r$("div",{class:i$}),o="radio"===n.input?i:i.appendChild(r$("label"));o.appendChild(r$("span",{class:o$},n.name||n.signal)),e.appendChild(i);let a=c$;switch(n.input){case"checkbox":a=l$;break;case"select":a=h$;break;case"radio":a=f$;break;case"range":a=d$;break}a(t,o,n,r)}function c$(t,e,n,r){const i=r$("input");for(const o in n)"signal"!==o&&"element"!==o&&i.setAttribute("input"===o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",()=>t.update(i.value)),t.elements=[i],t.set=t=>i.value=t}function l$(t,e,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=r$("input",i);e.appendChild(o),o.addEventListener("change",()=>t.update(o.checked)),t.elements=[o],t.set=t=>o.checked=!!t||null}function h$(t,e,n,r){const i=r$("select",{name:n.signal}),o=n.labels||[];n.options.forEach((t,e)=>{const n={value:t};p$(t,r)&&(n.selected=!0),i.appendChild(r$("option",n,(o[e]||t)+""))}),e.appendChild(i),i.addEventListener("change",()=>{t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=t=>{for(let e=0,r=n.options.length;e<r;++e)if(p$(n.options[e],t))return void(i.selectedIndex=e)}}function f$(t,e,n,r){const i=r$("span",{class:a$}),o=n.labels||[];e.appendChild(i),t.elements=n.options.map((e,a)=>{const s={type:"radio",name:n.signal,value:e};p$(e,r)&&(s.checked=!0);const u=r$("input",s);u.addEventListener("change",()=>t.update(e));const c=r$("label",{},(o[a]||e)+"");return c.prepend(u),i.appendChild(c),u}),t.set=e=>{const n=t.elements,r=n.length;for(let t=0;t<r;++t)p$(n[t].value,e)&&(n[t].checked=!0)}}function d$(t,e,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Le(o,i,100),s=r$("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const u=r$("span",{},+r);e.appendChild(s),e.appendChild(u);const c=()=>{u.textContent=s.value,t.update(+s.value)};s.addEventListener("input",c),s.addEventListener("change",c),t.elements=[s],t.set=t=>{s.value=t,u.textContent=t}}function p$(t,e){return t===e||t+""===e+""}var g$=function(t,e,n,r,i,o){return e=e||new r(t.loader()),e.initialize(n,$P(t),LP(t),zP(t),i,o).background(t.background())},m$=function(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null},v$=function(t,e,n,r){var i=new r(t.loader(),m$(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,zP(t),t);return e&&e.handlers().forEach((function(t){i.on(t.type,t.handler)})),i},y$=function(t,e){const n=this,r=n._renderType,i=n._eventConfig.bind,o=pO(r);t=n._el=t?b$(n,t):null,AP(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||Hv,s=t?o.renderer:o.headless;return n._renderer=s?g$(n,n._renderer,t,s):null,n._handler=v$(n,n._handler,t,a),n._redraw=!0,t&&"none"!==i&&(e=e?n._elBind=b$(n,e):t.appendChild(r$("form",{class:"vega-bindings"})),n._bind.forEach((function(t){t.param.element&&"container"!==i&&(t.element=b$(n,t.param.element))})),n._bind.forEach((function(t){s$(n,t.element||e,t)}))),n};function b$(t,e){if("string"===typeof e){if("undefined"===typeof document)return t.error("DOM document instance not found."),null;if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}if(e)try{e.innerHTML=""}catch(n){e=null,t.error(n)}return e}const x$=t=>+t||0,w$=t=>({top:t,bottom:t,left:t,right:t});var _$=function(t){return Object(rt["F"])(t)?{top:x$(t.top),bottom:x$(t.bottom),left:x$(t.left),right:x$(t.right)}:w$(x$(t))},O$=async function(t,e,n,r){const i=pO(e),o=i&&i.headless;return o||Object(rt["n"])("Unrecognized renderer type: "+e),await t.runAsync(),g$(t,null,null,o,n,r).renderAsync(t._scenegraph.root)},S$=async function(t,e){t!==fO.Canvas&&t!==fO.SVG&&t!==fO.PNG&&Object(rt["n"])("Unrecognized image type: "+t);const n=await O$(this,t,e);return t===fO.SVG?C$(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")};function C$(t,e){var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}var k$=async function(t,e){const n=await O$(this,fO.Canvas,t,e);return n.canvas()},A$=async function(t){const e=await O$(this,fO.SVG,t);return e.svg()};function T$(t){const e=this.context.data[t];return e?e.values.value:[]}function E$(t,e,n){const r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i}function j$(t,e){const n=this.context.dataflow,r=this.context.data[t],i=r.input;return n.pulse(i,n.changeset().remove(rt["gb"]).insert(e)),1}var D$=function(t,e,n){if(t){const n=this.context.dataflow,r=t.mark.source;n.pulse(r,n.changeset().encode(t,e))}return void 0!==n?n:t};const M$=t=>function(e,n){const r=this.context.dataflow.locale();return r[t](n)(e)},N$=M$("format"),I$=M$("timeFormat"),R$=M$("utcFormat"),F$=M$("timeParse"),P$=M$("utcParse");var $$=new Date(2e3,0,1);function L$(t,e,n){return Number.isInteger(t)&&Number.isInteger(e)?($$.setYear(2e3),$$.setMonth(t),$$.setDate(e),I$.call(this,$$,n)):""}function z$(t){return L$.call(this,t,1,"%B")}function B$(t){return L$.call(this,t,1,"%b")}function U$(t){return L$.call(this,0,2+t,"%A")}function W$(t){return L$.call(this,0,2+t,"%a")}const V$=":",H$="@",q$="%",G$="$";var X$,Y$,K$,Z$,J$,Q$="RawCode",tL="Literal",eL="Property",nL="Identifier",rL="ArrayExpression",iL="BinaryExpression",oL="CallExpression",aL="ConditionalExpression",sL="LogicalExpression",uL="MemberExpression",cL="ObjectExpression",lL="UnaryExpression";function hL(t){this.type=t}function fL(t){switch(t.type){case rL:return t.elements;case iL:case sL:return[t.left,t.right];case oL:var e=t.arguments.slice();return e.unshift(t.callee),e;case aL:return[t.test,t.consequent,t.alternate];case uL:return[t.object,t.property];case cL:return t.properties;case eL:return[t.key,t.value];case lL:return[t.argument];case nL:case tL:case Q$:default:return[]}}hL.prototype.visit=function(t){var e,n,r,i=this;if(t(i))return 1;for(e=fL(i),n=0,r=e.length;n<r;++n)if(e[n].visit(t))return 1};var dL=1,pL=2,gL=3,mL=4,vL=5,yL=6,bL=7,xL=8,wL=9;X$={},X$[dL]="Boolean",X$[pL]="<end>",X$[gL]="Identifier",X$[mL]="Keyword",X$[vL]="Null",X$[yL]="Numeric",X$[bL]="Punctuator",X$[xL]="String",X$[wL]="RegularExpression";var _L="ArrayExpression",OL="BinaryExpression",SL="CallExpression",CL="ConditionalExpression",kL="Identifier",AL="Literal",TL="LogicalExpression",EL="MemberExpression",jL="ObjectExpression",DL="Property",ML="UnaryExpression",NL="Unexpected token %0",IL="Unexpected number",RL="Unexpected string",FL="Unexpected identifier",PL="Unexpected reserved word",$L="Unexpected end of input",LL="Invalid regular expression",zL="Invalid regular expression: missing /",BL="Octal literals are not allowed in strict mode.",UL="Duplicate data property in object literal not allowed in strict mode",WL="ILLEGAL",VL="Disabled.",HL=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),qL=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function GL(t,e){if(!t)throw new Error("ASSERT: "+e)}function XL(t){return t>=48&&t<=57}function YL(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function KL(t){return"01234567".indexOf(t)>=0}function ZL(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function JL(t){return 10===t||13===t||8232===t||8233===t}function QL(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&HL.test(String.fromCharCode(t))}function tz(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&qL.test(String.fromCharCode(t))}var ez={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function nz(){var t;while(K$<Z$){if(t=Y$.charCodeAt(K$),!ZL(t)&&!JL(t))break;++K$}}function rz(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)K$<Z$&&YL(Y$[K$])?(r=Y$[K$++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):Dz({},NL,WL);return String.fromCharCode(i)}function iz(){var t,e,n,r;t=Y$[K$],e=0,"}"===t&&Dz({},NL,WL);while(K$<Z$){if(t=Y$[K$++],!YL(t))break;e=16*e+"0123456789abcdef".indexOf(t.toLowerCase())}return(e>1114111||"}"!==t)&&Dz({},NL,WL),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function oz(){var t,e;t=Y$.charCodeAt(K$++),e=String.fromCharCode(t),92===t&&(117!==Y$.charCodeAt(K$)&&Dz({},NL,WL),++K$,t=rz("u"),t&&"\\"!==t&&QL(t.charCodeAt(0))||Dz({},NL,WL),e=t);while(K$<Z$){if(t=Y$.charCodeAt(K$),!tz(t))break;++K$,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==Y$.charCodeAt(K$)&&Dz({},NL,WL),++K$,t=rz("u"),t&&"\\"!==t&&tz(t.charCodeAt(0))||Dz({},NL,WL),e+=t)}return e}function az(){var t,e;t=K$++;while(K$<Z$){if(e=Y$.charCodeAt(K$),92===e)return K$=t,oz();if(!tz(e))break;++K$}return Y$.slice(t,K$)}function sz(){var t,e,n;return t=K$,e=92===Y$.charCodeAt(K$)?oz():az(),n=1===e.length?gL:ez.hasOwnProperty(e)?mL:"null"===e?vL:"true"===e||"false"===e?dL:gL,{type:n,value:e,start:t,end:K$}}function uz(){var t,e,n,r,i=K$,o=Y$.charCodeAt(K$),a=Y$[K$];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++K$,{type:bL,value:String.fromCharCode(o),start:i,end:K$};default:if(t=Y$.charCodeAt(K$+1),61===t)switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return K$+=2,{type:bL,value:String.fromCharCode(o)+String.fromCharCode(t),start:i,end:K$};case 33:case 61:return K$+=2,61===Y$.charCodeAt(K$)&&++K$,{type:bL,value:Y$.slice(i,K$),start:i,end:K$}}}return r=Y$.substr(K$,4),">>>="===r?(K$+=4,{type:bL,value:r,start:i,end:K$}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(K$+=3,{type:bL,value:n,start:i,end:K$}):(e=n.substr(0,2),a===e[1]&&"+-<>&|".indexOf(a)>=0||"=>"===e?(K$+=2,{type:bL,value:e,start:i,end:K$}):"<>=!+-*%&|^/".indexOf(a)>=0?(++K$,{type:bL,value:a,start:i,end:K$}):void Dz({},NL,WL)))}function cz(t){var e="";while(K$<Z$){if(!YL(Y$[K$]))break;e+=Y$[K$++]}return 0===e.length&&Dz({},NL,WL),QL(Y$.charCodeAt(K$))&&Dz({},NL,WL),{type:yL,value:parseInt("0x"+e,16),start:t,end:K$}}function lz(t){var e="0"+Y$[K$++];while(K$<Z$){if(!KL(Y$[K$]))break;e+=Y$[K$++]}return(QL(Y$.charCodeAt(K$))||XL(Y$.charCodeAt(K$)))&&Dz({},NL,WL),{type:yL,value:parseInt(e,8),octal:!0,start:t,end:K$}}function hz(){var t,e,n;if(n=Y$[K$],GL(XL(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=K$,t="","."!==n){if(t=Y$[K$++],n=Y$[K$],"0"===t){if("x"===n||"X"===n)return++K$,cz(e);if(KL(n))return lz(e);n&&XL(n.charCodeAt(0))&&Dz({},NL,WL)}while(XL(Y$.charCodeAt(K$)))t+=Y$[K$++];n=Y$[K$]}if("."===n){t+=Y$[K$++];while(XL(Y$.charCodeAt(K$)))t+=Y$[K$++];n=Y$[K$]}if("e"===n||"E"===n)if(t+=Y$[K$++],n=Y$[K$],"+"!==n&&"-"!==n||(t+=Y$[K$++]),XL(Y$.charCodeAt(K$)))while(XL(Y$.charCodeAt(K$)))t+=Y$[K$++];else Dz({},NL,WL);return QL(Y$.charCodeAt(K$))&&Dz({},NL,WL),{type:yL,value:parseFloat(t),start:e,end:K$}}function fz(){var t,e,n,r,i="",o=!1;t=Y$[K$],GL("'"===t||'"'===t,"String literal must starts with a quote"),e=K$,++K$;while(K$<Z$){if(n=Y$[K$++],n===t){t="";break}if("\\"===n)if(n=Y$[K$++],n&&JL(n.charCodeAt(0)))"\r"===n&&"\n"===Y$[K$]&&++K$;else switch(n){case"u":case"x":"{"===Y$[K$]?(++K$,i+=iz()):i+=rz(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:KL(n)?(r="01234567".indexOf(n),0!==r&&(o=!0),K$<Z$&&KL(Y$[K$])&&(o=!0,r=8*r+"01234567".indexOf(Y$[K$++]),"0123".indexOf(n)>=0&&K$<Z$&&KL(Y$[K$])&&(r=8*r+"01234567".indexOf(Y$[K$++]))),i+=String.fromCharCode(r)):i+=n;break}else{if(JL(n.charCodeAt(0)))break;i+=n}}return""!==t&&Dz({},NL,WL),{type:xL,value:i,octal:o,start:e,end:K$}}function dz(t,e){var n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(t,e){if(parseInt(e,16)<=1114111)return"x";Dz({},LL)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){Dz({},LL)}try{return new RegExp(t,e)}catch(i){return null}}function pz(){var t,e,n,r,i;t=Y$[K$],GL("/"===t,"Regular expression literal must start with a slash"),e=Y$[K$++],n=!1,r=!1;while(K$<Z$)if(t=Y$[K$++],e+=t,"\\"===t)t=Y$[K$++],JL(t.charCodeAt(0))&&Dz({},zL),e+=t;else if(JL(t.charCodeAt(0)))Dz({},zL);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||Dz({},zL),i=e.substr(1,e.length-2),{value:i,literal:e}}function gz(){var t,e,n;e="",n="";while(K$<Z$){if(t=Y$[K$],!tz(t.charCodeAt(0)))break;++K$,"\\"===t&&K$<Z$?Dz({},NL,WL):(n+=t,e+=t)}return n.search(/[^gimuy]/g)>=0&&Dz({},LL,n),{value:n,literal:e}}function mz(){var t,e,n,r;return J$=null,nz(),t=K$,e=pz(),n=gz(),r=dz(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:K$}}function vz(t){return t.type===gL||t.type===mL||t.type===dL||t.type===vL}function yz(){var t;return nz(),K$>=Z$?{type:pL,start:K$,end:K$}:(t=Y$.charCodeAt(K$),QL(t)?sz():40===t||41===t||59===t?uz():39===t||34===t?fz():46===t?XL(Y$.charCodeAt(K$+1))?hz():uz():XL(t)?hz():uz())}function bz(){var t;return t=J$,K$=t.end,J$=yz(),K$=t.end,t}function xz(){var t;t=K$,J$=yz(),K$=t}function wz(t){var e=new hL(_L);return e.elements=t,e}function _z(t,e,n){var r=new hL("||"===t||"&&"===t?TL:OL);return r.operator=t,r.left=e,r.right=n,r}function Oz(t,e){var n=new hL(SL);return n.callee=t,n.arguments=e,n}function Sz(t,e,n){var r=new hL(CL);return r.test=t,r.consequent=e,r.alternate=n,r}function Cz(t){var e=new hL(kL);return e.name=t,e}function kz(t){var e=new hL(AL);return e.value=t.value,e.raw=Y$.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function Az(t,e,n){var r=new hL(EL);return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function Tz(t){var e=new hL(jL);return e.properties=t,e}function Ez(t,e,n){var r=new hL(DL);return r.key=e,r.value=n,r.kind=t,r}function jz(t,e){var n=new hL(ML);return n.operator=t,n.argument=e,n.prefix=!0,n}function Dz(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(function(t,e){return GL(e<r.length,"Message reference must be in range"),r[e]}));throw n=new Error(i),n.index=K$,n.description=i,n}function Mz(t){t.type===pL&&Dz(t,$L),t.type===yL&&Dz(t,IL),t.type===xL&&Dz(t,RL),t.type===gL&&Dz(t,FL),t.type===mL&&Dz(t,PL),Dz(t,NL,t.value)}function Nz(t){var e=bz();e.type===bL&&e.value===t||Mz(e)}function Iz(t){return J$.type===bL&&J$.value===t}function Rz(t){return J$.type===mL&&J$.value===t}function Fz(){var t=[];K$=J$.start,Nz("[");while(!Iz("]"))Iz(",")?(bz(),t.push(null)):(t.push(Jz()),Iz("]")||Nz(","));return bz(),wz(t)}function Pz(){var t;return K$=J$.start,t=bz(),t.type===xL||t.type===yL?(t.octal&&Dz(t,BL),kz(t)):Cz(t.value)}function $z(){var t,e,n,r;return K$=J$.start,t=J$,t.type===gL?(n=Pz(),Nz(":"),r=Jz(),Ez("init",n,r)):t.type!==pL&&t.type!==bL?(e=Pz(),Nz(":"),r=Jz(),Ez("init",e,r)):void Mz(t)}function Lz(){var t,e,n,r=[],i={},o=String;K$=J$.start,Nz("{");while(!Iz("}"))t=$z(),e=t.key.type===kL?t.key.name:o(t.key.value),n="$"+e,Object.prototype.hasOwnProperty.call(i,n)?Dz({},UL):i[n]=!0,r.push(t),Iz("}")||Nz(",");return Nz("}"),Tz(r)}function zz(){var t;return Nz("("),t=Qz(),Nz(")"),t}var Bz={if:1};function Uz(){var t,e,n;if(Iz("("))return zz();if(Iz("["))return Fz();if(Iz("{"))return Lz();if(t=J$.type,K$=J$.start,t===gL||Bz[J$.value])n=Cz(bz().value);else if(t===xL||t===yL)J$.octal&&Dz(J$,BL),n=kz(bz());else{if(t===mL)throw new Error(VL);t===dL?(e=bz(),e.value="true"===e.value,n=kz(e)):t===vL?(e=bz(),e.value=null,n=kz(e)):Iz("/")||Iz("/=")?(n=kz(mz()),xz()):Mz(bz())}return n}function Wz(){var t=[];if(Nz("("),!Iz(")"))while(K$<Z$){if(t.push(Jz()),Iz(")"))break;Nz(",")}return Nz(")"),t}function Vz(){var t;return K$=J$.start,t=bz(),vz(t)||Mz(t),Cz(t.value)}function Hz(){return Nz("."),Vz()}function qz(){var t;return Nz("["),t=Qz(),Nz("]"),t}function Gz(){var t,e,n;for(t=Uz();;)if(Iz("."))n=Hz(),t=Az(".",t,n);else if(Iz("("))e=Wz(),t=Oz(t,e);else{if(!Iz("["))break;n=qz(),t=Az("[",t,n)}return t}function Xz(){var t=Gz();if(J$.type===bL&&(Iz("++")||Iz("--")))throw new Error(VL);return t}function Yz(){var t,e;if(J$.type!==bL&&J$.type!==mL)e=Xz();else{if(Iz("++")||Iz("--"))throw new Error(VL);if(Iz("+")||Iz("-")||Iz("~")||Iz("!"))t=bz(),e=Yz(),e=jz(t.value,e);else{if(Rz("delete")||Rz("void")||Rz("typeof"))throw new Error(VL);e=Xz()}}return e}function Kz(t){var e=0;if(t.type!==bL&&t.type!==mL)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break;default:break}return e}function Zz(){var t,e,n,r,i,o,a,s,u,c;if(t=J$,u=Yz(),r=J$,i=Kz(r),0===i)return u;r.prec=i,bz(),e=[t,J$],a=Yz(),o=[u,r,a];while((i=Kz(J$))>0){while(o.length>2&&i<=o[o.length-2].prec)a=o.pop(),s=o.pop().value,u=o.pop(),e.pop(),n=_z(s,u,a),o.push(n);r=bz(),r.prec=i,o.push(r),e.push(J$),n=Yz(),o.push(n)}c=o.length-1,n=o[c],e.pop();while(c>1)e.pop(),n=_z(o[c-1].value,o[c-2],n),c-=2;return n}function Jz(){var t,e,n;return t=Zz(),Iz("?")&&(bz(),e=Jz(),Nz(":"),n=Jz(),t=Sz(t,e,n)),t}function Qz(){var t=Jz();if(Iz(","))throw new Error(VL);return t}var tB=function(t){Y$=t,K$=0,Z$=Y$.length,J$=null,xz();var e=Qz();if(J$.type!==pL)throw new Error("Unexpect token after expression.");return e},eB={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},nB=function(t){function e(e,n,r,i){var o=t(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}function n(t,n,r){return function(i){return e(t,i,n,r)}}var r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&Object(rt["n"])("Missing arguments to clamp function."),e.length>3&&Object(rt["n"])("Too many arguments to clamp function.");var n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),join:n("join",null),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),reverse:function(e){return"("+t(e[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),replace:n("replace",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(e){e.length<3&&Object(rt["n"])("Missing arguments to if function."),e.length>3&&Object(rt["n"])("Too many arguments to if function.");var n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};function rB(t){var e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}var iB=function(t){t=t||{};var e=t.whitelist?Object(rt["db"])(t.whitelist):{},n=t.blacklist?Object(rt["db"])(t.blacklist):{},r=t.constants||eB,i=(t.functions||nB)(h),o=t.globalvar,a=t.fieldvar,s={},u={},c=0,l=Object(rt["D"])(o)?o:function(t){return o+'["'+t+'"]'};function h(t){if(Object(rt["H"])(t))return t;var e=f[t.type];return null==e&&Object(rt["n"])("Unsupported type: "+t.type),e(t)}var f={Literal:function(t){return t.raw},Identifier:function(t){var i=t.name;return c>0?i:Object(rt["v"])(n,i)?Object(rt["n"])("Illegal identifier: "+i):Object(rt["v"])(r,i)?r[i]:Object(rt["v"])(e,i)?i:(s[i]=1,l(i))},MemberExpression:function(t){var e=!t.computed,n=h(t.object);e&&(c+=1);var r=h(t.property);return n===a&&(u[rB(r)]=1),e&&(c-=1),n+(e?"."+r:"["+r+"]")},CallExpression:function(t){"Identifier"!==t.callee.type&&Object(rt["n"])("Illegal callee type: "+t.callee.type);var e=t.callee.name,n=t.arguments,r=Object(rt["v"])(i,e)&&i[e];return r||Object(rt["n"])("Unrecognized function: "+e),Object(rt["D"])(r)?r(n):r+"("+n.map(h).join(",")+")"},ArrayExpression:function(t){return"["+t.elements.map(h).join(",")+"]"},BinaryExpression:function(t){return"("+h(t.left)+t.operator+h(t.right)+")"},UnaryExpression:function(t){return"("+t.operator+h(t.argument)+")"},ConditionalExpression:function(t){return"("+h(t.test)+"?"+h(t.consequent)+":"+h(t.alternate)+")"},LogicalExpression:function(t){return"("+h(t.left)+t.operator+h(t.right)+")"},ObjectExpression:function(t){return"{"+t.properties.map(h).join(",")+"}"},Property:function(t){c+=1;var e=h(t.key);return c-=1,e+":"+h(t.value)}};function d(t){var e={code:h(t),globals:Object.keys(s),fields:Object.keys(u)};return s={},u={},e}return d.functions=i,d.constants=r,d};function oB(t,e,n,r){e[0].type!==tL&&Object(rt["n"])("First argument to data functions must be a string literal.");const i=e[0].value,o=V$+i;if(!Object(rt["v"])(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(a){}}function aB(t,e,n,r){e[0].type!==tL&&Object(rt["n"])("First argument to indata must be a string literal."),e[1].type!==tL&&Object(rt["n"])("Second argument to indata must be a string literal.");const i=e[0].value,o=e[1].value,a=H$+o;Object(rt["v"])(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function sB(t,e,n,r){if(e[0].type===tL)uB(n,r,e[0].value);else for(t in n.scales)uB(n,r,t)}function uB(t,e,n){const r=q$+n;if(!Object(rt["v"])(e,r))try{e[r]=t.scaleRef(n)}catch(i){}}function cB(t,e){let n;return Object(rt["D"])(t)?t:Object(rt["H"])(t)?(n=e.scales[t])&&n.value:void 0}function lB(t,e,n){e.__bandwidth=t=>t&&t.bandwidth?t.bandwidth():0,n._bandwidth=sB,n._range=sB,n._scale=sB;const r=e=>"_["+(e.type===tL?Object(rt["Z"])(q$+e.value):Object(rt["Z"])(q$)+"+"+t(e))+"]";return{_bandwidth:t=>`this.__bandwidth(${r(t[0])})`,_range:t=>r(t[0])+".range()",_scale:e=>`${r(e[0])}(${t(e[1])})`}}var hB=function(){return new fB};function fB(){this.reset()}fB.prototype={constructor:fB,reset:function(){this.s=this.t=0},add:function(t){pB(dB,t,this.t),pB(this,dB.s,this.s),this.s?this.t+=dB.t:this.s=dB.t},valueOf:function(){return this.s}};var dB=new fB;function pB(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var gB=1e-6,mB=1e-12,vB=Math.PI,yB=vB/2,bB=vB/4,xB=2*vB,wB=180/vB,_B=vB/180,OB=Math.abs,SB=(Math.atan,Math.atan2),CB=Math.cos,kB=(Math.ceil,Math.exp,Math.floor,Math.log,Math.pow,Math.sin),AB=(Math.sign,Math.sqrt);Math.tan;function TB(t){return t>1?yB:t<-1?-yB:Math.asin(t)}function EB(){}function jB(t,e){t&&MB.hasOwnProperty(t.type)&&MB[t.type](t,e)}var DB={Feature:function(t,e){jB(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,r=-1,i=n.length;while(++r<i)jB(n[r].geometry,e)}},MB={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){NB(t.coordinates,e,0)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)NB(n[r],e,0)},Polygon:function(t,e){IB(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)IB(n[r],e)},GeometryCollection:function(t,e){var n=t.geometries,r=-1,i=n.length;while(++r<i)jB(n[r],e)}};function NB(t,e,n){var r,i=-1,o=t.length-n;e.lineStart();while(++i<o)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function IB(t,e){var n=-1,r=t.length;e.polygonStart();while(++n<r)NB(t[n],e,1);e.polygonEnd()}var RB,FB,PB,$B,LB,zB=function(t,e){t&&DB.hasOwnProperty(t.type)?DB[t.type](t,e):jB(t,e)},BB=hB(),UB=hB(),WB={point:EB,lineStart:EB,lineEnd:EB,polygonStart:function(){BB.reset(),WB.lineStart=VB,WB.lineEnd=HB},polygonEnd:function(){var t=+BB;UB.add(t<0?xB+t:t),this.lineStart=this.lineEnd=this.point=EB},sphere:function(){UB.add(xB)}};function VB(){WB.point=qB}function HB(){GB(RB,FB)}function qB(t,e){WB.point=GB,RB=t,FB=e,t*=_B,e*=_B,PB=t,$B=CB(e=e/2+bB),LB=kB(e)}function GB(t,e){t*=_B,e*=_B,e=e/2+bB;var n=t-PB,r=n>=0?1:-1,i=r*n,o=CB(e),a=kB(e),s=LB*a,u=$B*o+s*CB(i),c=s*r*kB(i);BB.add(SB(c,u)),PB=t,$B=o,LB=a}var XB=function(t){return UB.reset(),zB(t,WB),2*UB};function YB(t){return[SB(t[1],t[0]),TB(t[2])]}function KB(t){var e=t[0],n=t[1],r=CB(n);return[r*CB(e),r*kB(e),kB(n)]}function ZB(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function JB(t){var e=AB(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var QB,tU,eU,nU,rU,iU,oU,aU,sU,uU,cU=hB(),lU={point:hU,lineStart:dU,lineEnd:pU,polygonStart:function(){lU.point=gU,lU.lineStart=mU,lU.lineEnd=vU,cU.reset(),WB.polygonStart()},polygonEnd:function(){WB.polygonEnd(),lU.point=hU,lU.lineStart=dU,lU.lineEnd=pU,BB<0?(QB=-(eU=180),tU=-(nU=90)):cU>gB?nU=90:cU<-gB&&(tU=-90),uU[0]=QB,uU[1]=eU},sphere:function(){QB=-(eU=180),tU=-(nU=90)}};function hU(t,e){sU.push(uU=[QB=t,eU=t]),e<tU&&(tU=e),e>nU&&(nU=e)}function fU(t,e){var n=KB([t*_B,e*_B]);if(aU){var r=ZB(aU,n),i=[r[1],-r[0],0],o=ZB(i,r);JB(o),o=YB(o);var a,s=t-rU,u=s>0?1:-1,c=o[0]*wB*u,l=OB(s)>180;l^(u*rU<c&&c<u*t)?(a=o[1]*wB,a>nU&&(nU=a)):(c=(c+360)%360-180,l^(u*rU<c&&c<u*t)?(a=-o[1]*wB,a<tU&&(tU=a)):(e<tU&&(tU=e),e>nU&&(nU=e))),l?t<rU?yU(QB,t)>yU(QB,eU)&&(eU=t):yU(t,eU)>yU(QB,eU)&&(QB=t):eU>=QB?(t<QB&&(QB=t),t>eU&&(eU=t)):t>rU?yU(QB,t)>yU(QB,eU)&&(eU=t):yU(t,eU)>yU(QB,eU)&&(QB=t)}else sU.push(uU=[QB=t,eU=t]);e<tU&&(tU=e),e>nU&&(nU=e),aU=n,rU=t}function dU(){lU.point=fU}function pU(){uU[0]=QB,uU[1]=eU,lU.point=hU,aU=null}function gU(t,e){if(aU){var n=t-rU;cU.add(OB(n)>180?n+(n>0?360:-360):n)}else iU=t,oU=e;WB.point(t,e),fU(t,e)}function mU(){WB.lineStart()}function vU(){gU(iU,oU),WB.lineEnd(),OB(cU)>gB&&(QB=-(eU=180)),uU[0]=QB,uU[1]=eU,aU=null}function yU(t,e){return(e-=t)<0?e+360:e}function bU(t,e){return t[0]-e[0]}function xU(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var wU,_U,OU,SU,CU,kU,AU,TU,EU,jU,DU,MU,NU,IU,RU,FU,PU=function(t){var e,n,r,i,o,a,s;if(nU=eU=-(QB=tU=1/0),sU=[],zB(t,lU),n=sU.length){for(sU.sort(bU),e=1,r=sU[0],o=[r];e<n;++e)i=sU[e],xU(r,i[0])||xU(r,i[1])?(yU(r[0],i[1])>yU(r[0],r[1])&&(r[1]=i[1]),yU(i[0],r[1])>yU(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(s=yU(r[1],i[0]))>a&&(a=s,QB=i[0],eU=r[1])}return sU=uU=null,QB===1/0||tU===1/0?[[NaN,NaN],[NaN,NaN]]:[[QB,tU],[eU,nU]]},$U={sphere:EB,point:LU,lineStart:BU,lineEnd:VU,polygonStart:function(){$U.lineStart=HU,$U.lineEnd=qU},polygonEnd:function(){$U.lineStart=BU,$U.lineEnd=VU}};function LU(t,e){t*=_B,e*=_B;var n=CB(e);zU(n*CB(t),n*kB(t),kB(e))}function zU(t,e,n){++wU,OU+=(t-OU)/wU,SU+=(e-SU)/wU,CU+=(n-CU)/wU}function BU(){$U.point=UU}function UU(t,e){t*=_B,e*=_B;var n=CB(e);IU=n*CB(t),RU=n*kB(t),FU=kB(e),$U.point=WU,zU(IU,RU,FU)}function WU(t,e){t*=_B,e*=_B;var n=CB(e),r=n*CB(t),i=n*kB(t),o=kB(e),a=SB(AB((a=RU*o-FU*i)*a+(a=FU*r-IU*o)*a+(a=IU*i-RU*r)*a),IU*r+RU*i+FU*o);_U+=a,kU+=a*(IU+(IU=r)),AU+=a*(RU+(RU=i)),TU+=a*(FU+(FU=o)),zU(IU,RU,FU)}function VU(){$U.point=LU}function HU(){$U.point=GU}function qU(){XU(MU,NU),$U.point=LU}function GU(t,e){MU=t,NU=e,t*=_B,e*=_B,$U.point=XU;var n=CB(e);IU=n*CB(t),RU=n*kB(t),FU=kB(e),zU(IU,RU,FU)}function XU(t,e){t*=_B,e*=_B;var n=CB(e),r=n*CB(t),i=n*kB(t),o=kB(e),a=RU*o-FU*i,s=FU*r-IU*o,u=IU*i-RU*r,c=AB(a*a+s*s+u*u),l=TB(c),h=c&&-l/c;EU+=h*a,jU+=h*s,DU+=h*u,_U+=l,kU+=l*(IU+(IU=r)),AU+=l*(RU+(RU=i)),TU+=l*(FU+(FU=o)),zU(IU,RU,FU)}var YU=function(t){wU=_U=OU=SU=CU=kU=AU=TU=EU=jU=DU=0,zB(t,$U);var e=EU,n=jU,r=DU,i=e*e+n*n+r*r;return i<mB&&(e=kU,n=AU,r=TU,_U<gB&&(e=OU,n=SU,r=CU),i=e*e+n*n+r*r,i<mB)?[NaN,NaN]:[SB(n,e)*wB,TB(r/AB(i))*wB]};function KU(t,e){return function(n,r,i){if(n){const e=cB(n,(i||this).context);return e&&e.path[t](r)}return e(r)}}const ZU=KU("area",XB),JU=KU("bounds",PU),QU=KU("centroid",YU);var tW=function(t){let e=this.context.group,n=!1;if(e)while(t){if(t===e){n=!0;break}t=t.mark.group}return n};function eW(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function nW(){return eW(this.context.dataflow,"warn",arguments)}function rW(){return eW(this.context.dataflow,"info",arguments)}function iW(){return eW(this.context.dataflow,"debug",arguments)}var oW=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function aW(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function sW(){}var uW=.7,cW=1/uW,lW="\\s*([+-]?\\d+)\\s*",hW="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",fW="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dW=/^#([0-9a-f]{3,8})$/,pW=new RegExp("^rgb\\("+[lW,lW,lW]+"\\)$"),gW=new RegExp("^rgb\\("+[fW,fW,fW]+"\\)$"),mW=new RegExp("^rgba\\("+[lW,lW,lW,hW]+"\\)$"),vW=new RegExp("^rgba\\("+[fW,fW,fW,hW]+"\\)$"),yW=new RegExp("^hsl\\("+[hW,fW,fW]+"\\)$"),bW=new RegExp("^hsla\\("+[hW,fW,fW,hW]+"\\)$"),xW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function wW(){return this.rgb().formatHex()}function _W(){return IW(this).formatHsl()}function OW(){return this.rgb().formatRgb()}function SW(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=dW.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?CW(e):3===n?new EW(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?kW(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?kW(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=pW.exec(t))?new EW(e[1],e[2],e[3],1):(e=gW.exec(t))?new EW(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=mW.exec(t))?kW(e[1],e[2],e[3],e[4]):(e=vW.exec(t))?kW(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=yW.exec(t))?NW(e[1],e[2]/100,e[3]/100,1):(e=bW.exec(t))?NW(e[1],e[2]/100,e[3]/100,e[4]):xW.hasOwnProperty(t)?CW(xW[t]):"transparent"===t?new EW(NaN,NaN,NaN,0):null}function CW(t){return new EW(t>>16&255,t>>8&255,255&t,1)}function kW(t,e,n,r){return r<=0&&(t=e=n=NaN),new EW(t,e,n,r)}function AW(t){return t instanceof sW||(t=SW(t)),t?(t=t.rgb(),new EW(t.r,t.g,t.b,t.opacity)):new EW}function TW(t,e,n,r){return 1===arguments.length?AW(t):new EW(t,e,n,null==r?1:r)}function EW(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function jW(){return"#"+MW(this.r)+MW(this.g)+MW(this.b)}function DW(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function MW(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function NW(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new FW(t,e,n,r)}function IW(t){if(t instanceof FW)return new FW(t.h,t.s,t.l,t.opacity);if(t instanceof sW||(t=SW(t)),!t)return new FW;if(t instanceof FW)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new FW(a,s,u,t.opacity)}function RW(t,e,n,r){return 1===arguments.length?IW(t):new FW(t,e,n,null==r?1:r)}function FW(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function PW(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function $W(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function LW(t){const e=TW(t),n=$W(e.r),r=$W(e.g),i=$W(e.b);return.2126*n+.7152*r+.0722*i}function zW(t,e){const n=LW(t),r=LW(e),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}oW(sW,SW,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:wW,formatHex:wW,formatHsl:_W,formatRgb:OW,toString:OW}),oW(EW,TW,aW(sW,{brighter:function(t){return t=null==t?cW:Math.pow(cW,t),new EW(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?uW:Math.pow(uW,t),new EW(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jW,formatHex:jW,formatRgb:DW,toString:DW})),oW(FW,RW,aW(sW,{brighter:function(t){return t=null==t?cW:Math.pow(cW,t),new FW(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?uW:Math.pow(uW,t),new FW(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new EW(PW(t>=240?t-240:t+120,i,r),PW(t,i,r),PW(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var BW=function(){var t=[].slice.call(arguments);return t.unshift({}),rt["o"].apply(null,t)};function UW(t,e){return t===e||t!==t&&e!==e||(Object(rt["A"])(t)?!(!Object(rt["A"])(e)||t.length!==e.length)&&WW(t,e):!(!Object(rt["F"])(t)||!Object(rt["F"])(e))&&VW(t,e))}function WW(t,e){for(let n=0,r=t.length;n<r;++n)if(!UW(t[n],e[n]))return!1;return!0}function VW(t,e){for(let n in t)if(!UW(t[n],e[n]))return!1;return!0}function HW(t){return e=>VW(t,e)}var qW=function(t,e,n,r,i,o){let a,s,u=this.context.dataflow,c=this.context.data[t],l=c.input,h=c.changes,f=u.stamp();if(!1===u._trigger||!(l.value.length||e||r))return 0;if((!h||h.stamp<f)&&(c.changes=h=u.changeset(),h.stamp=f,u.runAfter((function(){c.modified=!0,u.pulse(l,h).run()}),!0,1)),n&&(a=!0===n?rt["gb"]:Object(rt["A"])(n)||ut(n)?n:HW(n),h.remove(a)),e&&h.insert(e),r&&(a=HW(r),l.value.some(a)?h.remove(a):h.insert(r)),i)for(s in o)h.modify(i,s,o[s]);return 1};function GW(t){const e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)}function XW(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}function YW(t,e,n){return cy(t||0,e||0,n||0)}function KW(t,e){const n=cB(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function ZW(t,e){const n=cB(t,(e||this).context);return n?n.copy():void 0}function JW(t,e){const n=cB(t,(e||this).context);return n?n.domain():[]}function QW(t,e,n){const r=cB(t,(n||this).context);return r?Object(rt["A"])(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}function tV(t,e){const n=cB(t,(e||this).context);return n&&n.range?n.range():[]}function eV(t,e,n){const r=cB(t,(n||this).context);return r?r(e):void 0}var nV=function(t,e,n,r,i){t=cB(t,(i||this).context);const o=Ph(e,n);let a=t.domain(),s=a[0],u=Object(rt["U"])(a),c=rt["x"];return u-s?c=Dw(t,s,u):t=(t.interpolator?$x("sequential")().interpolator(t.interpolator()):$x("linear")().interpolate(t.interpolate()).range(t.range())).domain([s=0,u=1]),t.ticks&&(a=t.ticks(+r||15),s!==a[0]&&a.unshift(s),u!==Object(rt["U"])(a)&&a.push(u)),a.forEach(e=>o.stop(c(e),t(e))),o};function rV(t,e,n){const r=cB(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}}function iV(t){let e=null;return function(n){return n?od(n,e=e||qf(t)):t}}const oV=t=>t.data;function aV(t,e){const n=T$.call(e,t);return n.root&&n.root.lookup||{}}function sV(t,e,n){const r=aV(t,this),i=r[e],o=r[n];return i&&o?i.path(o).map(oV):void 0}function uV(t,e){const n=aV(t,this)[e];return n?n.ancestors().map(oV):void 0}const cV=()=>"undefined"!==typeof window&&window||null;function lV(){const t=cV();return t?t.screen:{}}function hV(){const t=cV();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function fV(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}const dV="intersect",pV="union",gV="vlMulti",mV="or",vV="and";var yV="E",bV="R",xV="R-E",wV="R-LE",_V="R-RE",OV="index:unit";function SV(t,e){for(var n,r,i=e.fields,o=e.values,a=i.length,s=0;s<a;++s)if(r=i[s],r.getter=rt["t"].getter||Object(rt["t"])(r.field),n=r.getter(t),Object(rt["C"])(n)&&(n=Object(rt["cb"])(n)),Object(rt["C"])(o[s])&&(o[s]=Object(rt["cb"])(o[s])),Object(rt["C"])(o[s][0])&&(o[s]=o[s].map(rt["cb"])),r.type===yV){if(Object(rt["A"])(o[s])?o[s].indexOf(n)<0:n!==o[s])return!1}else if(r.type===bV){if(!Object(rt["z"])(n,o[s]))return!1}else if(r.type===_V){if(!Object(rt["z"])(n,o[s],!0,!1))return!1}else if(r.type===xV){if(!Object(rt["z"])(n,o[s],!1,!1))return!1}else if(r.type===wV&&!Object(rt["z"])(n,o[s],!1,!0))return!1;return!0}function CV(t,e,n){for(var r,i,o,a,s,u=this.context.data[t],c=u?u.values.value:[],l=u?u[OV]&&u[OV].value:void 0,h=n===dV,f=c.length,d=0;d<f;++d)if(r=c[d],l&&h){if(i=i||{},o=i[a=r.unit]||0,-1===o)continue;if(s=SV(e,r),i[a]=s?-1:++o,s&&1===l.size)return!0;if(!s&&o===l.get(a).count)return!1}else if(s=SV(e,r),h^s)return s;return f&&h}function kV(t,e,n){for(var r,i,o,a,s,u,c,l,h,f,d,p=this.context.data[t],g=p?p.values.value:[],m={},v={},y={},b=g.length,x=0;x<b;++x){for(r=g[x],a=r.unit,i=r.fields,o=r.values,f=0,d=i.length;f<d;++f)s=i[f],u=m[s.field]||(m[s.field]={}),c=u[a]||(u[a]=[]),y[s.field]=l=s.type.charAt(0),h=AV[l+"_union"],u[a]=h(c,Object(rt["i"])(o[f]));n&&(c=v[a]||(v[a]=[]),c.push(Object(rt["i"])(o).reduce((t,e,n)=>(t[i[n].field]=e,t),{})))}return e=e||pV,Object.keys(m).forEach((function(t){m[t]=Object.keys(m[t]).map(e=>m[t][e]).reduce((n,r)=>void 0===n?r:AV[y[t]+"_"+e](n,r))})),g=Object.keys(v),n&&g.length&&(m[gV]=e===pV?{[mV]:g.reduce((t,e)=>(t.push.apply(t,v[e]),t),[])}:{[vV]:g.map(t=>({[mV]:v[t]}))}),m}var AV={E_union:function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter((function(t){return e.indexOf(t)>=0})):e},R_union:function(t,e){var n=Object(rt["cb"])(e[0]),r=Object(rt["cb"])(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]},R_intersect:function(t,e){var n=Object(rt["cb"])(e[0]),r=Object(rt["cb"])(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]}};const TV=":",EV="@";function jV(t,e,n,r){e[0].type!==tL&&Object(rt["n"])("First argument to selection functions must be a string literal.");const i=e[0].value,o=e.length>=2&&Object(rt["U"])(e).value,a="unit",s=EV+a,u=TV+i;o!==dV||Object(rt["v"])(r,s)||(r[s]=n.getData(i).indataRef(n,a)),Object(rt["v"])(r,u)||(r[u]=n.getData(i).tuplesRef())}var DV=Math.PI/180,MV=180/Math.PI,NV=18,IV=.96422,RV=1,FV=.82521,PV=4/29,$V=6/29,LV=3*$V*$V,zV=$V*$V*$V;function BV(t){if(t instanceof WV)return new WV(t.l,t.a,t.b,t.opacity);if(t instanceof KV)return ZV(t);t instanceof EW||(t=AW(t));var e,n,r=GV(t.r),i=GV(t.g),o=GV(t.b),a=VV((.2225045*r+.7168786*i+.0606169*o)/RV);return r===i&&i===o?e=n=a:(e=VV((.4360747*r+.3850649*i+.1430804*o)/IV),n=VV((.0139322*r+.0971045*i+.7141733*o)/FV)),new WV(116*a-16,500*(e-a),200*(a-n),t.opacity)}function UV(t,e,n,r){return 1===arguments.length?BV(t):new WV(t,e,n,null==r?1:r)}function WV(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function VV(t){return t>zV?Math.pow(t,1/3):t/LV+PV}function HV(t){return t>$V?t*t*t:LV*(t-PV)}function qV(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function GV(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function XV(t){if(t instanceof KV)return new KV(t.h,t.c,t.l,t.opacity);if(t instanceof WV||(t=BV(t)),0===t.a&&0===t.b)return new KV(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*MV;return new KV(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function YV(t,e,n,r){return 1===arguments.length?XV(t):new KV(t,e,n,null==r?1:r)}function KV(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function ZV(t){if(isNaN(t.h))return new WV(t.l,0,0,t.opacity);var e=t.h*DV;return new WV(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}oW(WV,UV,aW(sW,{brighter:function(t){return new WV(this.l+NV*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new WV(this.l-NV*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=IV*HV(e),t=RV*HV(t),n=FV*HV(n),new EW(qV(3.1338561*e-1.6168667*t-.4906146*n),qV(-.9787684*e+1.9161415*t+.033454*n),qV(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),oW(KV,YV,aW(sW,{brighter:function(t){return new KV(this.h,this.c,this.l+NV*(null==t?1:t),this.opacity)},darker:function(t){return new KV(this.h,this.c,this.l-NV*(null==t?1:t),this.opacity)},rgb:function(){return ZV(this).rgb()}}));var JV=function(t,e,n){if(!t)return[];const[r,i]=t,o=(new Ep).set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return gO(a,o,QV(e))};function QV(t){let e=null;if(t){const n=Object(rt["i"])(t.marktype),r=Object(rt["i"])(t.markname);e=t=>(!n.length||n.some(e=>t.marktype===e))&&(!r.length||r.some(e=>t.name===e))}return e}const tH={random:function(){return $s()},cumulativeNormal:Ks,cumulativeLogNormal:ru,cumulativeUniform:cu,densityNormal:Ys,densityLogNormal:nu,densityUniform:uu,quantileNormal:Zs,quantileLogNormal:iu,quantileUniform:lu,sampleNormal:Xs,sampleLogNormal:eu,sampleUniform:su,isArray:rt["A"],isBoolean:rt["B"],isDate:rt["C"],isDefined:function(t){return void 0!==t},isNumber:rt["E"],isObject:rt["F"],isRegExp:rt["G"],isString:rt["H"],isTuple:ut,isValid:function(t){return null!=t&&t===t},toBoolean:rt["ab"],toDate:rt["bb"],toNumber:rt["cb"],toString:rt["eb"],flush:rt["u"],lerp:rt["J"],merge:BW,pad:rt["P"],peek:rt["U"],span:rt["X"],inrange:rt["z"],truncate:rt["fb"],rgb:TW,lab:UV,hcl:YV,hsl:RW,luminance:LW,contrast:zW,sequence:vl,format:N$,utcFormat:R$,utcParse:P$,utcOffset:ni,utcSequence:oi,timeFormat:I$,timeParse:F$,timeOffset:ei,timeSequence:ii,timeUnitSpecifier:Mn,monthFormat:z$,monthAbbrevFormat:B$,dayFormat:U$,dayAbbrevFormat:W$,quarter:rt["V"],utcquarter:rt["hb"],week:lr,utcweek:mr,dayofyear:cr,utcdayofyear:gr,warn:nW,info:rW,debug:iW,extent:rt["p"],inScope:tW,intersect:JV,clampRange:rt["j"],pinchDistance:GW,pinchAngle:XW,screen:lV,containerSize:fV,windowSize:hV,bandspace:YW,setdata:j$,pathShape:iV,panLinear:rt["Q"],panLog:rt["R"],panPow:rt["S"],panSymlog:rt["T"],zoomLinear:rt["lb"],zoomLog:rt["mb"],zoomPow:rt["nb"],zoomSymlog:rt["ob"],encode:D$,modify:qW},eH=["view","item","group","xy","x","y"],nH="event.vega.",rH="this.",iH={};function oH(t){const e=nB(t);eH.forEach(t=>e[t]=nH+t);for(let n in tH)e[n]=rH+n;return Object(rt["o"])(e,lB(t,tH,iH)),e}function aH(t,e,n){return 1===arguments.length?tH[t]:(tH[t]=e,n&&(iH[t]=n),uH&&(uH.functions[t]=rH+t),this)}aH("bandwidth",KW,sB),aH("copy",ZW,sB),aH("domain",JW,sB),aH("range",tV,sB),aH("invert",QW,sB),aH("scale",eV,sB),aH("gradient",nV,sB),aH("geoArea",ZU,sB),aH("geoBounds",JU,sB),aH("geoCentroid",QU,sB),aH("geoShape",rV,sB),aH("indata",E$,aB),aH("data",T$,oB),aH("treePath",sV,oB),aH("treeAncestors",uV,oB),aH("vlSelectionTest",CV,jV),aH("vlSelectionResolve",kV,jV);const sH={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:t=>"_["+Object(rt["Z"])(G$+t)+"]",functions:oH,constants:eB,visitors:iH};var uH=iB(sH),cH=function(t,e){var n,r,i={};try{t=Object(rt["H"])(t)?t:Object(rt["Z"])(t)+"",n=tB(t)}catch(o){Object(rt["n"])("Expression parse error: "+t)}return n.visit(t=>{if(t.type===oL){var n=t.callee.name,r=sH.visitors[n];r&&r(n,t.arguments,e,i)}}),r=uH(n),r.globals.forEach(t=>{var n=G$+t;!Object(rt["v"])(i,n)&&e.getSignal(t)&&(i[n]=e.signalRef(t))}),{$expr:Object(rt["o"])({code:r.code},e.options.ast?{ast:n}:null),$fields:r.fields,$params:i}},lH=function(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(t=>e.parseOperator(t)),n.forEach(t=>e.parseOperatorParameters(t)),(t.streams||[]).forEach(t=>e.parseStream(t)),(t.updates||[]).forEach(t=>e.parseUpdate(t)),e.resolve()};const hH=Object(rt["db"])(["rule"]),fH=Object(rt["db"])(["group","image","rect"]);function dH(t,e){let n="";return hH[e]||(t.x2&&(t.x?(fH[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(fH[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function pH(t){return(t+"").toLowerCase()}function gH(t){return"operator"===pH(t)}function mH(t){return"collect"===pH(t)}function vH(t,e,n){";"!==n[n.length-1]&&(n="return("+n+");");var r=Function.apply(null,e.concat(n));return t&&t.functions?r.bind(t.functions):r}function yH(t,e,n,r){return`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}\n  : (u > v || v == null) && u != null ? ${r}\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n  : v !== v && u === u ? ${r} : `}var bH={operator:(t,e)=>vH(t,["_"],e.code),parameter:(t,e)=>vH(t,["datum","_"],e.code),event:(t,e)=>vH(t,["event"],e.code),handler:(t,e)=>{const n=`var datum=event.item&&event.item.datum;return ${e.code};`;return vH(t,["_","event"],n)},encode:(t,e)=>{const{marktype:n,channels:r}=e;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const t="o["+Object(rt["Z"])(o)+"]";i+=`$=${r[o].code};if(${t}!==$)${t}=$,m=1;`}return i+=dH(r,n),i+="return m;",vH(t,["item","_"],i)},codegen:{get(t){const e=`[${t.map(rt["Z"]).join("][")}]`,n=Function("_",`return _${e};`);return n.path=e,n},comparator(t,e){let n;const r=(t,r)=>{const i=e[r];let o,a;return t.path?(o="a"+t.path,a="b"+t.path):((n=n||{})["f"+r]=t,o=`this.f${r}(a)`,a=`this.f${r}(b)`),yH(o,a,-i,i)},i=Function("a","b","var u, v; return "+t.map(r).join("")+"0;");return n?i.bind(n):i}}};function xH(t){const e=this;gH(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function wH(t){const e=this;if(t.params){const n=e.get(t.id);n||Object(rt["n"])("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function _H(t,e){e=e||{};const n=this;for(const r in t){const i=t[r];e[r]=Object(rt["A"])(i)?i.map(t=>OH(t,n,e)):OH(i,n,e)}return e}function OH(t,e,n){if(!t||!Object(rt["F"])(t))return t;for(let r,i=0,o=SH.length;i<o;++i)if(r=SH[i],Object(rt["v"])(t,r.key))return r.parse(t,e,n);return t}var SH=[{key:"$ref",parse:CH},{key:"$key",parse:AH},{key:"$expr",parse:kH},{key:"$field",parse:TH},{key:"$encode",parse:jH},{key:"$compare",parse:EH},{key:"$context",parse:DH},{key:"$subflow",parse:MH},{key:"$tupleid",parse:NH}];function CH(t,e){return e.get(t.$ref)||Object(rt["n"])("Operator not defined: "+t.$ref)}function kH(t,e,n){t.$params&&e.parseParameters(t.$params,n);const r="e:"+t.$expr.code+"_"+t.$name;return e.fn[r]||(e.fn[r]=Object(rt["f"])(e.parameterExpression(t.$expr),t.$fields,t.$name))}function AH(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=Object(rt["I"])(t.$key,t.$flat,e.expr.codegen))}function TH(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Object(rt["t"])(t.$field,t.$name,e.expr.codegen))}function EH(t,e){const n="c:"+t.$compare+"_"+t.$order,r=Object(rt["i"])(t.$compare).map(t=>t&&t.$tupleid?ct:t);return e.fn[n]||(e.fn[n]=Object(rt["k"])(r,t.$order,e.expr.codegen))}function jH(t,e){const n=t.$encode,r={};for(const i in n){const t=n[i];r[i]=Object(rt["f"])(e.encodeExpression(t.$expr),t.$fields),r[i].output=t.$output}return r}function DH(t,e){return e}function MH(t,e){const n=t.$subflow;return function(t,r,i){const o=e.fork().parse(n),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a.detachSubflow=()=>e.detach(o),a}}function NH(){return ct}var IH=function(t){var e,n=this,r=null!=t.filter?n.eventExpression(t.filter):void 0,i=null!=t.stream?n.get(t.stream):void 0;t.source?i=n.events(t.source,t.type,r):t.merge&&(e=t.merge.map(t=>n.get(t)),i=e[0].merge.apply(e[0],e.slice(1))),t.between&&(e=t.between.map(t=>n.get(t)),i=i.between(e[0],e[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&Object(rt["n"])("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),n.stream(t,i)},RH=function(t){var e=this,n=Object(rt["F"])(n=t.source)?n.$ref:n,r=e.get(n),i=null,o=t.update,a=void 0;r||Object(rt["n"])("Source not defined: "+t.source),i=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),o&&o.$expr&&(o.$params&&(a=e.parseParameters(o.$params)),o=e.handlerExpression(o.$expr)),e.update(t,r,i,o,a)},FH={skip:!0};function PH(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(n=>{var i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(n=>{var r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)})}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map(e=>e.getState(t))),n}function $H(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(t=>{n.update(e.signals[t],i[t],FH)}),Object.keys(r||{}).forEach(t=>{n.pulse(e.data[t].input,n.changeset().remove(rt["gb"]).insert(r[t]))}),(t.subcontext||[]).forEach((t,n)=>{var r=e.subcontext[n];r&&r.setState(t)})}var LH=function(t,e,n,r){return new zH(t,e,n,r)};function zH(t,e,n,r){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=r||bH,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function BH(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}zH.prototype=BH.prototype={fork(){const t=new BH(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(e=>e!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,r=n.dataflow,i=t.value;if(n.set(t.id,e),mH(t.type)&&i&&(i.$ingest?r.ingest(e,i.$ingest,i.$format):i.$request?r.preload(e,i.$request,i.$format):r.pulse(e,r.changeset().insert(i))),t.root&&(n.root=e),t.parent){var o=n.get(t.parent.$ref);o?(r.connect(o,[e]),e.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(t.parent.$ref),r.connect(o,[e]),e.targets().add(o)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const a in t.data){const r=n.data[a]||(n.data[a]={});t.data[a].forEach(t=>r[t]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[pH(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:lH,parseOperator:xH,parseOperatorParameters:wH,parseParameters:_H,parseStream:IH,parseUpdate:RH,getState:PH,setState:$H};var UH=function(t,e,n){return LH(t,is,tH,n).parse(e)};function WH(t){var e=this._runtime.scales;return Object(rt["v"])(e,t)||Object(rt["n"])("Unrecognized scale or projection: "+t),e[t].value}var VH="width",HH="height",qH="padding",GH={skip:!0};function XH(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===qH?r.left+r.right:0)}function YH(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===qH?r.top+r.bottom:0)}function KH(t){var e=t._signals,n=e[VH],r=e[HH],i=e[qH];function o(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,(function(e){t._width=e.size,t._viewWidth=XH(t,e.size),o()}),{size:n}),t._resizeHeight=t.add(null,(function(e){t._height=e.size,t._viewHeight=YH(t,e.size),o()}),{size:r});var a=t.add(null,o,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function ZH(t,e,n,r,i,o){this.runAfter((function(a){var s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(VH,n,GH),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(HH,r,GH),a._resizeHeight.skip(!0)),a._viewWidth!==t&&(a._resize=1,a._viewWidth=t),a._viewHeight!==e&&(a._resize=1,a._viewHeight=e),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(t=>t.resize())}),!1,1)}function JH(t){return this._runtime.getState(t||{data:QH,signals:tq,recurse:!0})}function QH(t,e){return e.modified&&Object(rt["A"])(e.input.value)&&t.indexOf("_:vega:_")}function tq(t,e){return!("parent"===t||e instanceof is.proxy)}function eq(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},t=>{t._trigger=!0}),this}var nq,rq,iq=0,oq=0,aq=0,sq=1e3,uq=0,cq=0,lq=0,hq="object"===typeof performance&&performance.now?performance:Date,fq="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function dq(){return cq||(fq(pq),cq=hq.now()+lq)}function pq(){cq=0}function gq(){this._call=this._time=this._next=null}function mq(t,e,n){var r=new gq;return r.restart(t,e,n),r}function vq(){dq(),++iq;var t,e=nq;while(e)(t=cq-e._time)>=0&&e._call.call(null,t),e=e._next;--iq}function yq(){cq=(uq=hq.now())+lq,iq=oq=0;try{vq()}finally{iq=0,xq(),cq=0}}function bq(){var t=hq.now(),e=t-uq;e>sq&&(lq-=e,uq=t)}function xq(){var t,e,n=nq,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:nq=e);rq=t,wq(r)}function wq(t){if(!iq){oq&&(oq=clearTimeout(oq));var e=t-cq;e>24?(t<1/0&&(oq=setTimeout(yq,t-hq.now()-lq)),aq&&(aq=clearInterval(aq))):(aq||(uq=hq.now(),aq=setInterval(bq,sq)),iq=1,fq(yq))}}gq.prototype=mq.prototype={constructor:gq,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?dq():+n)+(null==e?0:+e),this._next||rq===this||(rq?rq._next=this:nq=this,rq=this),this._call=t,this._time=n,wq()},stop:function(){this._call&&(this._call=null,this._time=1/0,wq())}};var _q=function(t,e,n){var r=new gq,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?dq():+n,r.restart((function o(a){a+=i,r.restart(o,i+=e,n),t(a)}),e,n),r)},Oq=function(t,e){function n(e){t({timestamp:Date.now(),elapsed:e})}this._timers.push(_q(n,e))},Sq=function(t,e,n,r){var i=t.element();i&&i.setAttribute("title",Cq(r))};function Cq(t){return null==t?"":Object(rt["A"])(t)?Aq(t):Object(rt["F"])(t)&&!Object(rt["C"])(t)?kq(t):t+""}function kq(t){return Object.keys(t).map((function(e){var n=t[e];return e+": "+(Object(rt["A"])(n)?Aq(n):Tq(n))})).join("\n")}function Aq(t){return"["+t.map(Tq).join(", ")+"]"}function Tq(t){return Object(rt["A"])(t)?"[…]":Object(rt["F"])(t)&&!Object(rt["C"])(t)?"{…}":t}function Eq(t,e){const n=this;if(e=e||{},Qa.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),null!=e.logLevel&&n.logLevel(e.logLevel),e.locale||t.locale){const r=Object(rt["o"])({},t.locale,e.locale);n.locale(na(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||fO.Canvas,n._scenegraph=new uv;const r=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||Sq,n._redraw=!0,n._handler=(new Hv).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=XP(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=UH(n,t,e.expr);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(t=>({state:null,param:Object(rt["o"])({},t)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=XH(n,n._width),n._viewHeight=YH(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,KH(n),EP(n),DP(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind)}var jq=Object(rt["y"])(Eq,Qa);function Dq(t,e){return Object(rt["v"])(t._signals,e)?t._signals[e]:Object(rt["n"])("Unrecognized signal name: "+Object(rt["Z"])(e))}function Mq(t,e){const n=(t._targets||[]).filter(t=>t._update&&t._update.handler===e);return n.length?n[0]:null}function Nq(t,e,n,r){var i=Mq(n,r);return i||(i=m$(t,()=>r(e,n.value)),i.handler=r,t.on(n,null,i)),t}function Iq(t,e,n){var r=Mq(e,n);return r&&e._targets.remove(r),t}jq.evaluate=async function(t,e,n){if(await Qa.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,BP(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&ot(this,n),this},jq.dirty=function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},jq.description=function(t){if(arguments.length){const e=null!=t?t+"":null;return e!==this._desc&&TP(this._el,this._desc=e),this}return this._desc},jq.container=function(){return this._el},jq.scenegraph=function(){return this._scenegraph},jq.origin=function(){return this._origin.slice()},jq.signal=function(t,e,n){var r=Dq(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},jq.width=function(t){return arguments.length?this.signal("width",t):this.signal("width")},jq.height=function(t){return arguments.length?this.signal("height",t):this.signal("height")},jq.padding=function(t){return arguments.length?this.signal("padding",_$(t)):_$(this.signal("padding"))},jq.autosize=function(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},jq.background=function(t){return arguments.length?this.signal("background",t):this.signal("background")},jq.renderer=function(t){return arguments.length?(pO(t)||Object(rt["n"])("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},jq.tooltip=function(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},jq.loader=function(t){return arguments.length?(t!==this._loader&&(Qa.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},jq.resize=function(){return this._autosize=1,this.touch(Dq(this,"autosize"))},jq._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},jq._resizeView=ZH,jq.addEventListener=function(t,e,n){var r=e;return n&&!1===n.trap||(r=m$(this,e),r.raw=e),this._handler.on(t,r),this},jq.removeEventListener=function(t,e){var n,r,i=this._handler.handlers(t),o=i.length;while(--o>=0)if(r=i[o].type,n=i[o].handler,t===r&&(e===n||e===n.raw)){this._handler.off(r,n);break}return this},jq.addResizeListener=function(t){var e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},jq.removeResizeListener=function(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},jq.addSignalListener=function(t,e){return Nq(this,t,Dq(this,t),e)},jq.removeSignalListener=function(t,e){return Iq(this,Dq(this,t),e)},jq.addDataListener=function(t,e){return Nq(this,t,NP(this,t).values,e)},jq.removeDataListener=function(t,e){return Iq(this,NP(this,t).values,e)},jq.globalCursor=function(t){if(arguments.length){if(this._globalCursor!==!!t){const e=MP(this,null);this._globalCursor=!!t,e&&MP(this,e)}return this}return this._globalCursor},jq.preventDefault=function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},jq.timer=Oq,jq.events=ZP,jq.finalize=n$,jq.hover=e$,jq.data=IP,jq.change=RP,jq.insert=FP,jq.remove=PP,jq.scale=WH,jq.initialize=y$,jq.toImageURL=S$,jq.toCanvas=k$,jq.toSVG=A$,jq.getState=JH,jq.setState=eq;var Rq=function(t){return Object(rt["F"])(t)?t:{type:t||"pad"}};const Fq=t=>+t||0,Pq=t=>({top:t,bottom:t,left:t,right:t});var $q=function(t){return Object(rt["F"])(t)?t.signal?t:{top:Fq(t.top),bottom:Fq(t.bottom),left:Fq(t.left),right:Fq(t.right)}:Pq(Fq(t))};const Lq=t=>Object(rt["F"])(t)&&!Object(rt["A"])(t)?Object(rt["o"])({},t):{value:t};function zq(t,e,n,r){return null!=n?(Object(rt["F"])(n)&&!Object(rt["A"])(n)?t.update[e]=n:t[r||"enter"][e]={value:n},1):0}function Bq(t,e,n){for(const r in e)zq(t,r,e[r]);for(const r in n)zq(t,r,n[r],"update")}function Uq(t,e,n){for(const r in e)n&&Object(rt["v"])(n,r)||(t[r]=Object(rt["o"])(t[r]||{},e[r]));return t}function Wq(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}var Vq="mark",Hq="frame",qq="scope",Gq="axis",Xq="axis-domain",Yq="axis-grid",Kq="axis-label",Zq="axis-tick",Jq="axis-title",Qq="legend",tG="legend-band",eG="legend-entry",nG="legend-gradient",rG="legend-label",iG="legend-symbol",oG="legend-title",aG="title",sG="title-text",uG="title-subtitle",cG=function(t,e,n,r,i){const o={},a={};let s,u,c,l;for(u in u="lineBreak","text"!==e||null==i[u]||Wq(u,t)||lG(o,u,i[u]),("legend"==n||String(n).startsWith("axis"))&&(n=null),l=n===Hq?i.group:n===Vq?Object(rt["o"])({},i.mark,i[e]):null,l)c=Wq(u,t)||("fill"===u||"stroke"===u)&&(Wq("fill",t)||Wq("stroke",t)),c||lG(o,u,l[u]);for(u in Object(rt["i"])(r).forEach(e=>{const n=i.style&&i.style[e];for(const r in n)Wq(r,t)||lG(o,r,n[r])}),t=Object(rt["o"])({},t),o)l=o[u],l.signal?(s=s||{})[u]=l:a[u]=l;return t.enter=Object(rt["o"])(a,t.enter),s&&(t.update=Object(rt["o"])(s,t.update)),t};function lG(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const hG=t=>Object(rt["H"])(t)?Object(rt["Z"])(t):t.signal?`(${t.signal})`:vG(t);function fG(t){if(null!=t.gradient)return gG(t);let e=t.signal?`(${t.signal})`:t.color?pG(t.color):null!=t.field?vG(t.field):void 0!==t.value?Object(rt["Z"])(t.value):void 0;return null!=t.scale&&(e=bG(t,e)),void 0===e&&(e=null),null!=t.exponent&&(e=`pow(${e},${mG(t.exponent)})`),null!=t.mult&&(e+="*"+mG(t.mult)),null!=t.offset&&(e+="+"+mG(t.offset)),t.round&&(e=`round(${e})`),e}const dG=(t,e,n,r)=>`(${t}(${[e,n,r].map(fG).join(",")})+'')`;function pG(t){return t.c?dG("hcl",t.h,t.c,t.l):t.h||t.s?dG("hsl",t.h,t.s,t.l):t.l||t.a?dG("lab",t.l,t.a,t.b):t.r||t.g||t.b?dG("rgb",t.r,t.g,t.b):null}function gG(t){const e=[t.start,t.stop,t.count].map(t=>null==t?null:Object(rt["Z"])(t));while(e.length&&null==Object(rt["U"])(e))e.pop();return e.unshift(hG(t.gradient)),`gradient(${e.join(",")})`}function mG(t){return Object(rt["F"])(t)?"("+fG(t)+")":t}function vG(t){return yG(Object(rt["F"])(t)?t:{datum:t})}function yG(t){let e,n,r;if(t.signal)e="datum",r=t.signal;else if(t.group||t.parent){n=Math.max(1,t.level||1),e="item";while(n-- >0)e+=".mark.group";t.parent?(r=t.parent,e+=".datum"):r=t.group}else t.datum?(e="datum",r=t.datum):Object(rt["n"])("Invalid field reference: "+Object(rt["Z"])(t));return t.signal||(r=Object(rt["H"])(r)?Object(rt["Y"])(r).map(rt["Z"]).join("]["):yG(r)),e+"["+r+"]"}function bG(t,e){const n=hG(t.scale);return null!=t.range?e=`lerp(_range(${n}), ${+t.range})`:(void 0!==e&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(1===+t.band?"":"*"+mG(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),null==e&&(e="0")),e}var xG=function(t){let e="";return t.forEach(t=>{const n=fG(t);e+=t.test?`(${t.test})?${n}:`:n}),":"===Object(rt["U"])(e)&&(e+="null"),e},wG=function(t,e,n,r,i,o){const a={};o=o||{},o.encoders={$encode:a},t=cG(t,e,n,r,i.config);for(const s in t)a[s]=_G(t[s],e,o,i);return o};function _G(t,e,n,r){const i={},o={};for(const a in t)null!=t[a]&&(i[a]=SG(OG(t[a]),r,n,o));return{$expr:{marktype:e,channels:i},$fields:Object.keys(o),$output:Object.keys(t)}}function OG(t){return Object(rt["A"])(t)?xG(t):fG(t)}function SG(t,e,n,r){const i=cH(t,e);return i.$fields.forEach(t=>r[t]=1),Object(rt["o"])(n,i.$params),i.$expr}var CG="outer",kG=["value","update","init","react","bind"];function AG(t,e){Object(rt["n"])(t+' for "outer" push: '+Object(rt["Z"])(e))}var TG=function(t,e){var n=t.name;if(t.push===CG)e.signals[n]||AG("No prior signal definition",n),kG.forEach((function(e){void 0!==t[e]&&AG("Invalid property ",e)}));else{var r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}};function EG(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function jG(t,e,n,r){return new EG(t,e,n,r)}function DG(t,e){return jG("operator",t,e)}function MG(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function NG(t,e){return e?{$field:t,$name:e}:{$field:t}}var IG=NG("key");function RG(t,e){return{$compare:t,$order:e}}function FG(t,e){var n={$key:t};return e&&(n.$flat=!0),n}var PG="ascending",$G="descending";function LG(t){return Object(rt["F"])(t)?(t.order===$G?"-":"+")+zG(t.op,t.field):""}function zG(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}var BG="scope",UG="view";function WG(t){return t&&t.signal}function VG(t){return t&&t.expr}function HG(t){if(WG(t))return!0;if(Object(rt["F"])(t))for(var e in t)if(HG(t[e]))return!0;return!1}function qG(t,e){return null!=t?t:e}function GG(t){return t&&t.signal||t}var XG="timer";function YG(t,e){var n=t.merge?ZG:t.stream?JG:t.type?QG:Object(rt["n"])("Invalid stream specification: "+Object(rt["Z"])(t));return n(t,e)}function KG(t){return t===BG?UG:t||UG}function ZG(t,e){var n=t.merge.map(t=>YG(t,e)),r=tX({merge:n},t,e);return e.addStream(r).id}function JG(t,e){var n=YG(t.stream,e),r=tX({stream:n},t,e);return e.addStream(r).id}function QG(t,e){var n,r;return t.type===XG?(n=e.event(XG,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(KG(t.source),t.type),r=tX({stream:n},t,e),1===Object.keys(r).length?n:e.addStream(r).id}function tX(t,e,n){var r=e.between;return r&&(2!==r.length&&Object(rt["n"])('Stream "between" parameter must have 2 entries: '+Object(rt["Z"])(e)),t.between=[YG(r[0],n),YG(r[1],n)]),r=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(eX(e.marktype,e.markname,e.markrole)),e.source===BG&&r.push("inScope(event.item)"),r.length&&(t.filter=cH("("+r.join(")&&(")+")",n).$expr),null!=(r=e.throttle)&&(t.throttle=+r),null!=(r=e.debounce)&&(t.debounce=+r),e.consume&&(t.consume=!0),t}function eX(t,e,n){var r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}var nX,rX,iX=function(t,e,n){return nX=e||oX,rX=n||gX,yX(t.trim()).map(bX)},oX="view",aX="[",sX="]",uX="{",cX="}",lX=":",hX=",",fX="@",dX=">",pX=/[[\]{}]/,gX={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function mX(t){return rX[t]}function vX(t,e,n,r,i){for(var o,a=0,s=t.length;e<s;++e){if(o=t[e],!a&&o===n)return e;i&&i.indexOf(o)>=0?--a:r&&r.indexOf(o)>=0&&++a}return e}function yX(t){var e=[],n=0,r=t.length,i=0;while(i<r)i=vX(t,i,hX,aX+uX,sX+cX),e.push(t.substring(n,i).trim()),n=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function bX(t){return"["===t[0]?xX(t):wX(t)}function xX(t){var e,n,r=t.length,i=1;if(i=vX(t,i,sX,aX,sX),i===r)throw"Empty between selector: "+t;if(e=yX(t.substring(1,i)),2!==e.length)throw"Between selector must have two elements: "+t;if(t=t.slice(i+1).trim(),t[0]!==dX)throw"Expected '>' after between selector: "+t;return e=e.map(bX),n=bX(t.slice(1).trim()),n.between?{between:e,stream:n}:(n.between=e,n)}function wX(t){var e,n,r={source:nX},i=[],o=[0,0],a=0,s=0,u=t.length,c=0;if(t[u-1]===cX){if(c=t.lastIndexOf(uX),!(c>=0))throw"Unmatched right brace: "+t;try{o=_X(t.substring(c+1,u-1))}catch(l){throw"Invalid throttle specification: "+t}t=t.slice(0,c).trim(),u=t.length,c=0}if(!u)throw t;if(t[0]===fX&&(a=++c),e=vX(t,c,lX),e<u&&(i.push(t.substring(s,e).trim()),s=c=++e),c=vX(t,c,aX),c===u)i.push(t.substring(s,u).trim());else if(i.push(t.substring(s,c).trim()),n=[],s=++c,s===u)throw"Unmatched left bracket: "+t;while(c<u){if(c=vX(t,c,sX),c===u)throw"Unmatched left bracket: "+t;if(n.push(t.substring(s,c).trim()),c<u-1&&t[++c]!==aX)throw"Expected left bracket: "+t;s=++c}if(!(u=i.length)||pX.test(i[u-1]))throw"Invalid event selector: "+t;return u>1?(r.type=i[1],a?r.markname=i[0].slice(1):mX(i[0])?r.marktype=i[0]:r.source=i[0]):r.type=i[0],"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),o[0]&&(r.throttle=o[0]),o[1]&&(r.debounce=o[1]),r}function _X(t){var e=t.split(hX);if(!t.length||e.length>2)throw t;return e.map((function(e){var n=+e;if(n!==n)throw t;return n}))}const OX={code:"_.$value",ast:{type:"Identifier",value:"value"}};var SX=function(t,e,n){var r=t.events,i=t.update,o=t.encode,a=[],s={target:n};r||Object(rt["n"])("Signal update missing events specification."),Object(rt["H"])(r)&&(r=iX(r,e.isSubscope()?BG:UG)),r=Object(rt["i"])(r).filter(t=>t.signal||t.scale?(a.push(t),0):1),a.length>1&&(a=[kX(a)]),r.length&&a.push(r.length>1?{merge:r}:r[0]),null!=o&&(i&&Object(rt["n"])("Signal encode and update are mutually exclusive."),i="encode(item(),"+Object(rt["Z"])(o)+")"),s.update=Object(rt["H"])(i)?cH(i,e):null!=i.expr?cH(i.expr,e):null!=i.value?i.value:null!=i.signal?{$expr:OX,$params:{$value:e.signalRef(i.signal)}}:Object(rt["n"])("Invalid signal update specification."),t.force&&(s.options={force:!0}),a.forEach((function(t){e.addUpdate(Object(rt["o"])(CX(t,e),s))}))};function CX(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):YG(t,e)}}function kX(t){return{signal:"["+t.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}var AX=function(t,e){var n=e.getSignal(t.name),r=t.update;t.init&&(r?Object(rt["n"])("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=cH(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach((function(t){SX(t,e,n.id)}))};const TX=t=>(e,n,r)=>jG(t,n,e||void 0,r);var EX=TX("aggregate"),jX=TX("axisticks"),DX=TX("bound"),MX=TX("collect"),NX=TX("compare"),IX=TX("datajoin"),RX=TX("encode"),FX=TX("expression"),PX=(TX("extent"),TX("facet")),$X=TX("field"),LX=TX("key"),zX=TX("legendentries"),BX=TX("load"),UX=TX("mark"),WX=TX("multiextent"),VX=TX("multivalues"),HX=TX("overlap"),qX=TX("params"),GX=TX("prefacet"),XX=TX("projection"),YX=TX("proxy"),KX=TX("relay"),ZX=TX("render"),JX=TX("scale"),QX=TX("sieve"),tY=TX("sortitems"),eY=TX("viewlayout"),nY=TX("values"),rY=0,iY={min:"min",max:"max",count:"sum"};function oY(t,e){var n=t.type||"linear";Lx(n)||Object(rt["n"])("Unrecognized scale type: "+Object(rt["Z"])(n)),e.addScale(t.name,{type:n,domain:void 0})}function aY(t,e){var n,r=e.getScale(t.name).params;for(n in r.domain=lY(t.domain,t,e),null!=t.range&&(r.range=_Y(t,e,r)),null!=t.interpolate&&wY(t.interpolate,r),null!=t.nice&&(r.nice=xY(t.nice)),null!=t.bins&&(r.bins=bY(t.bins,e)),t)Object(rt["v"])(r,n)||"name"===n||(r[n]=sY(t[n],e))}function sY(t,e){return Object(rt["F"])(t)?t.signal?e.signalRef(t.signal):Object(rt["n"])("Unsupported object: "+Object(rt["Z"])(t)):t}function uY(t,e){return t.signal?e.signalRef(t.signal):t.map(t=>sY(t,e))}function cY(t){Object(rt["n"])("Can not find data set: "+Object(rt["Z"])(t))}function lY(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(Object(rt["A"])(t)?hY:t.fields?dY:fY)(t,e,n);null==e.domainMin&&null==e.domainMax||Object(rt["n"])("No scale domain defined for domainMin/domainMax to override.")}function hY(t,e,n){return t.map((function(t){return sY(t,n)}))}function fY(t,e,n){var r=n.getData(t.data);return r||cY(t.data),Ux(e.type)?r.valuesRef(n,t.field,mY(t.sort,!1)):Gx(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function dY(t,e,n){var r=t.data,i=t.fields.reduce((function(t,e){return e=Object(rt["H"])(e)?{data:r,field:e}:Object(rt["A"])(e)||e.signal?pY(e,n):e,t.push(e),t}),[]);return(Ux(e.type)?gY:Gx(e.type)?vY:yY)(t,n,i)}function pY(t,e){var n="_:vega:_"+rY++,r=MX({});if(Object(rt["A"])(t))r.value={$ingest:t};else if(t.signal){var i="setdata("+Object(rt["Z"])(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,QX({})]),{data:n,field:"data"}}function gY(t,e,n){var r,i,o,a,s,u=mY(t.sort,!0);return r=n.map((function(t){var n=e.getData(t.data);return n||cY(t.data),n.countsRef(e,t.field,u)})),i={groupby:IG,pulse:r},u&&(o=u.op||"count",s=u.field?zG(o,u.field):"count",i.ops=[iY[o]],i.fields=[e.fieldRef(s)],i.as=[s]),o=e.add(EX(i)),a=e.add(MX({pulse:MG(o)})),s=e.add(nY({field:IG,sort:e.sortRef(u),pulse:MG(a)})),MG(s)}function mY(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field&&t.op&&!iY[t.op]&&Object(rt["n"])("Multiple domain scales can not be sorted using "+t.op):Object(rt["n"])("No field provided for sort aggregate op: "+t.op):Object(rt["F"])(t)?t.field="key":t={field:"key"}),t}function vY(t,e,n){var r=n.map((function(t){var n=e.getData(t.data);return n||cY(t.data),n.domainRef(e,t.field)}));return MG(e.add(VX({values:r})))}function yY(t,e,n){var r=n.map((function(t){var n=e.getData(t.data);return n||cY(t.data),n.extentRef(e,t.field)}));return MG(e.add(WX({extents:r})))}function bY(t,e){return t.signal||Object(rt["A"])(t)?uY(t,e):e.objectProperty(t)}function xY(t){return Object(rt["F"])(t)?{interval:sY(t.interval),step:sY(t.step)}:sY(t)}function wY(t,e){e.interpolate=sY(t.type||t),null!=t.gamma&&(e.interpolateGamma=sY(t.gamma))}function _Y(t,e,n){var r=t.range,i=e.config.range;if(r.signal)return e.signalRef(r.signal);if(Object(rt["H"])(r)){if(i&&Object(rt["v"])(i,r))return t=Object(rt["o"])({},t,{range:i[r]}),_Y(t,e,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=Ux(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(rt["n"])("Unrecognized scale range value: "+Object(rt["Z"])(r))}else{if(r.scheme)return n.scheme=Object(rt["A"])(r.scheme)?uY(r.scheme,e):sY(r.scheme,e),r.extent&&(n.schemeExtent=uY(r.extent,e)),void(r.count&&(n.schemeCount=sY(r.count,e)));if(r.step)return void(n.rangeStep=sY(r.step,e));if(Ux(t.type)&&!Object(rt["A"])(r))return lY(r,t,e);Object(rt["A"])(r)||Object(rt["n"])("Unsupported range type: "+Object(rt["Z"])(r))}return r.map(t=>(Object(rt["A"])(t)?uY:sY)(t,e))}var OY=function(t,e){var n=e.config.projection||{},r={};for(var i in t)"name"!==i&&(r[i]=SY(t[i],i,e));for(i in n)null==r[i]&&(r[i]=SY(n[i],i,e));e.addProjection(t.name,r)};function SY(t,e,n){return Object(rt["A"])(t)?t.map((function(t){return SY(t,e,n)})):Object(rt["F"])(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:Object(rt["n"])("Unsupported parameter object: "+Object(rt["Z"])(t)):t}const CY="top",kY="left",AY="right",TY="bottom",EY="center",jY="vertical",DY="start",MY="middle",NY="end",IY="index",RY="label",FY="offset",PY="perc",$Y="perc2",LY="value",zY="guide-label",BY="guide-title",UY="group-title",WY="group-subtitle",VY="symbol",HY="gradient",qY="discrete",GY="size",XY="shape",YY="fill",KY="stroke",ZY="strokeWidth",JY="strokeDash",QY="opacity",tK=[GY,XY,YY,KY,ZY,JY,QY],eK={name:1,style:1,interactive:1},nK={value:0},rK={value:1};var iK="group",oK="rect",aK="rule",sK="symbol",uK="text",cK=function(t){return t.type=iK,t.interactive=t.interactive||!1,t};function lK(t,e){const n=(n,r)=>qG(t[n],qG(e[n],r));return n.isVertical=n=>jY===qG(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>qG(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>qG(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>qG(t.columns,qG(e.columns,+n.isVertical(!0))),n}function hK(t,e){var n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function fK(t,e,n){var r=e.config.style[n];return r&&r[t]}function dK(t,e,n){return`item.anchor === '${DY}' ? ${t} : item.anchor === '${NY}' ? ${e} : ${n}`}const pK=dK(Object(rt["Z"])(kY),Object(rt["Z"])(AY),Object(rt["Z"])(EY));function gK(t){let e,n,r=t("tickBand"),i=t("tickOffset");return r?r.signal?(e={signal:`(${r.signal}) === 'extent' ? 1 : 0.5`},n={signal:`(${r.signal}) === 'extent'`},Object(rt["F"])(i)||(i={signal:`(${r.signal}) === 'extent' ? 0 : ${i}`})):"extent"===r?(e=1,n=!0,i=0):(e=.5,n=!1):(e=t("bandPosition"),n=t("tickExtra")),{extra:n,band:e,offset:i}}function mK(t,e){return e?t?Object(rt["F"])(t)?Object.assign({},t,{offset:mK(t.offset,e)}):{value:t,offset:e}:e:t}var vK=function(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=Uq(t.encode,e,eK)):t.interactive=!1,t},yK=function(t,e,n,r){var i,o,a,s,u,c,l=lK(t,n),h=l.isVertical(),f=l.gradientThickness(),d=l.gradientLength();return h?(a=[0,1],s=[0,0],u=f,c=d):(a=[0,0],s=[1,0],u=d,c=f),i={enter:o={opacity:nK,x:nK,y:nK,width:Lq(u),height:Lq(c)},update:Object(rt["o"])({},o,{opacity:rK,fill:{gradient:e,start:a,stop:s}}),exit:{opacity:nK}},Bq(i,{stroke:l("gradientStrokeColor"),strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")}),vK({type:oK,role:nG,encode:i},r)},bK=function(t,e,n,r,i){var o,a,s,u,c,l,h=lK(t,n),f=h.isVertical(),d=h.gradientThickness(),p=h.gradientLength(),g="";return f?(s="y",c="y2",u="x",l="width",g="1-"):(s="x",c="x2",u="y",l="height"),a={opacity:nK,fill:{scale:e,field:LY}},a[s]={signal:g+"datum."+PY,mult:p},a[u]=nK,a[c]={signal:g+"datum."+$Y,mult:p},a[l]=Lq(d),o={enter:a,update:Object(rt["o"])({},a,{opacity:rK}),exit:{opacity:nK}},Bq(o,{stroke:h("gradientStrokeColor"),strokeWidth:h("gradientStrokeWidth")},{opacity:h("gradientOpacity")}),vK({type:oK,role:tG,key:LY,from:i,encode:o},r)};const xK=`datum.${PY}<=0?"${kY}":datum.${PY}>=1?"${AY}":"${EY}"`,wK=`datum.${PY}<=0?"${TY}":datum.${PY}>=1?"${CY}":"${MY}"`;var _K=function(t,e,n,r){var i,o,a,s,u,c=lK(t,e),l=c.isVertical(),h=Lq(c.gradientThickness()),f=c.gradientLength(),d=c("labelOverlap"),p="";return i={enter:o={opacity:nK},update:a={opacity:rK,text:{field:RY}},exit:{opacity:nK}},Bq(i,{fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontStyle:c("labelFontStyle"),fontWeight:c("labelFontWeight"),limit:qG(t.labelLimit,e.gradientLabelLimit)}),l?(o.align={value:"left"},o.baseline=a.baseline={signal:wK},s="y",u="x",p="1-"):(o.align=a.align={signal:xK},o.baseline={value:"top"},s="x",u="y"),o[s]=a[s]={signal:p+"datum."+PY,mult:f},o[u]=a[u]=h,h.offset=qG(t.labelOffset,e.gradientLabelOffset)||0,d=d?{separation:c("labelSeparation"),method:d,order:"datum."+IY}:void 0,vK({type:uK,role:rG,style:zY,key:LY,from:r,encode:i,overlap:d},n)},OK=function(t,e,n,r,i){var o,a,s,u,c,l,h,f=lK(t,e),d=n.entries,p=!(!d||!d.interactive),g=d?d.name:void 0,m=f("clipHeight"),v=f("symbolOffset"),y={data:"value"},b={},x=`(${i}) ? datum.${FY} : datum.${GY}`,w=m?Lq(m):{field:GY},_="datum."+IY,O=`max(1, ${i})`;w.mult=.5,b={enter:o={opacity:nK,x:{signal:x,mult:.5,offset:v},y:w},update:a={opacity:rK,x:o.x,y:o.y},exit:{opacity:nK}};var S=null,C=null;return t.fill||(S=e.symbolBaseFillColor,C=e.symbolBaseStrokeColor),Bq(b,{fill:f("symbolFillColor",S),shape:f("symbolType"),size:f("symbolSize"),stroke:f("symbolStrokeColor",C),strokeDash:f("symbolDash"),strokeDashOffset:f("symbolDashOffset"),strokeWidth:f("symbolStrokeWidth")},{opacity:f("symbolOpacity")}),tK.forEach((function(e){t[e]&&(a[e]=o[e]={scale:t[e],field:LY})})),u=vK({type:sK,role:iG,key:LY,from:y,clip:!!m||void 0,encode:b},n.symbols),s=Lq(v),s.offset=f("labelOffset"),b={enter:o={opacity:nK,x:{signal:x,offset:s},y:w},update:a={opacity:rK,text:{field:RY},x:o.x,y:o.y},exit:{opacity:nK}},Bq(b,{align:f("labelAlign"),baseline:f("labelBaseline"),fill:f("labelColor"),fillOpacity:f("labelOpacity"),font:f("labelFont"),fontSize:f("labelFontSize"),fontStyle:f("labelFontStyle"),fontWeight:f("labelFontWeight"),limit:f("labelLimit")}),c=vK({type:uK,role:rG,style:zY,key:LY,from:y,encode:b},n.labels),b={enter:{noBound:{value:!m},width:nK,height:m?Lq(m):nK,opacity:nK},exit:{opacity:nK},update:a={opacity:rK,row:{signal:null},column:{signal:null}}},f.isVertical(!0)?(l=`ceil(item.mark.items.length / ${O})`,a.row.signal=`${_}%${l}`,a.column.signal=`floor(${_} / ${l})`,h={field:["row",_]}):(a.row.signal=`floor(${_} / ${O})`,a.column.signal=`${_} % ${O}`,h={field:_}),a.column.signal=`(${i})?${a.column.signal}:${_}`,r={facet:{data:r,name:"value",groupby:IY}},cK({role:qq,from:r,encode:Uq(b,d,eK),marks:[u,c],name:g,interactive:p,sort:h})};function SK(t,e){const n=lK(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const CK='item.orient === "left"',kK='item.orient === "right"',AK=`(${CK} || ${kK})`,TK="datum.vgrad && "+AK,EK=dK('"top"','"bottom"','"middle"'),jK=dK('"right"','"left"','"center"'),DK=`datum.vgrad && ${kK} ? (${jK}) : (${AK} && !(datum.vgrad && ${CK})) ? "left" : ${pK}`,MK=`item._anchor || (${AK} ? "middle" : "start")`,NK=`${TK} ? (${CK} ? -90 : 90) : 0`,IK=`${AK} ? (datum.vgrad ? (${kK} ? "bottom" : "top") : ${EK}) : "top"`;var RK=function(t,e,n,r){var i,o=lK(t,e);return i={enter:{opacity:nK},update:{opacity:rK,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:nK}},Bq(i,{orient:o("titleOrient"),_anchor:o("titleAnchor"),anchor:{signal:MK},angle:{signal:NK},align:{signal:DK},baseline:{signal:IK},text:t.title,fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),baseline:o("titleBaseline")}),vK({type:uK,role:oG,style:BY,from:r,encode:i},n)},FK=function(t,e){var n;return Object(rt["F"])(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+PK(t.path)+")":t.sphere&&(n="geoShape("+PK(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t};function PK(t){return Object(rt["F"])(t)&&t.signal?t.signal:Object(rt["Z"])(t)}var $K=function(t){var e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")&&e.indexOf("title")?t.type===iK?qq:e||Vq:e},LK=function(t){return{marktype:t.type,name:t.name||void 0,role:t.role||$K(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}},zK=function(t,e){return t&&t.signal?e.signalRef(t.signal):!1!==t},BK=function(t,e){var n=os(t.type);n||Object(rt["n"])("Unrecognized transform type: "+Object(rt["Z"])(t.type));var r=jG(n.type.toLowerCase(),null,UK(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r};function UK(t,e,n){var r,i,o,a={};for(i=0,o=t.params.length;i<o;++i)r=t.params[i],a[r.name]=WK(r,e,n);return a}function WK(t,e,n){var r=t.type,i=e[t.name];return"index"===r?HK(t,e,n):void 0!==i?"param"===r?qK(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!WG(i)?i.map((function(e){return VK(t,e,n)})):VK(t,i,n):void(t.required&&Object(rt["n"])("Missing required "+Object(rt["Z"])(e.type)+" parameter: "+Object(rt["Z"])(t.name)))}function VK(t,e,n){var r=t.type;if(WG(e))return ZK(r)?Object(rt["n"])("Expression references can not be signals."):JK(r)?n.fieldRef(e):QK(r)?n.compareRef(e):n.signalRef(e.signal);var i=t.expr||JK(r);return i&&XK(e)?n.exprRef(e.expr,e.as):i&&YK(e)?NG(e.field,e.as):ZK(r)?cH(e,n):KK(r)?MG(n.getData(e).values):JK(r)?NG(e):QK(r)?n.compareRef(e):e}function HK(t,e,n){return Object(rt["H"])(e.from)||Object(rt["n"])('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function qK(t,e,n){var r=e[t.name];return t.array?(Object(rt["A"])(r)||Object(rt["n"])("Expected an array of sub-parameters. Instead: "+Object(rt["Z"])(r)),r.map((function(e){return GK(t,e,n)}))):GK(t,r,n)}function GK(t,e,n){var r,i,o,a,s;for(a=0,s=t.params.length;a<s;++a){for(o in i=t.params[a],i.key)if(i.key[o]!==e[o]){i=null;break}if(i)break}return i||Object(rt["n"])("Unsupported parameter: "+Object(rt["Z"])(e)),r=Object(rt["o"])(UK(i,e,n),i.key),MG(n.add(qX(r)))}function XK(t){return t&&t.expr}function YK(t){return t&&t.field}function KK(t){return"data"===t}function ZK(t){return"expr"===t}function JK(t){return"field"===t}function QK(t){return"compare"===t}var tZ=function(t,e,n){var r,i,o,a,s;return t?(r=t.facet)&&(e||Object(rt["n"])("Only group marks can be faceted."),null!=r.field?a=s=eZ(r,n):(t.data?s=MG(n.getData(t.data).aggregate):(o=BK(Object(rt["o"])({type:"aggregate",groupby:Object(rt["i"])(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=eZ(r,n),a=s=MG(n.add(o))),i=n.keyRef(r.groupby,!0))):a=MG(n.add(MX(null,[{}]))),a||(a=eZ(t,n)),{key:i,pulse:a,parent:s}};function eZ(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:MG(e.getData(t.data).output)}function nZ(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}nZ.fromEntries=function(t,e){var n=e.length,r=1,i=e[0],o=e[n-1],a=e[n-2],s=null;for(i&&"load"===i.type&&(i=e[1]),t.add(e[0]);r<n;++r)e[r].params.pulse=MG(e[r-1]),t.add(e[r]),"aggregate"===e[r].type&&(s=e[r]);return new nZ(t,i,a,o,s)};var rZ=nZ.prototype;function iZ(t){return Object(rt["H"])(t)?t:null}function oZ(t,e,n){var r,i=zG(n.op,n.field);if(e.ops){for(var o=0,a=e.as.length;o<a;++o)if(e.as[o]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function aZ(t,e,n,r,i,o,a){var s,u,c=e[n]||(e[n]={}),l=LG(o),h=iZ(i);if(null!=h&&(t=e.scope,h+=l?"|"+l:"",s=c[h]),!s){var f=o?{field:IG,pulse:e.countsRef(t,i,o)}:{field:t.fieldRef(i),pulse:MG(e.output)};l&&(f.sort=t.sortRef(o)),u=t.add(jG(r,void 0,f)),a&&(e.index[i]=u),s=MG(u),null!=h&&(c[h]=s)}return s}rZ.countsRef=function(t,e,n){var r,i,o,a=this,s=a.counts||(a.counts={}),u=iZ(e);return null!=u&&(t=a.scope,r=s[u]),r?n&&n.field&&oZ(t,r.agg.params,n):(o={groupby:t.fieldRef(e,"key"),pulse:MG(a.output)},n&&n.field&&oZ(t,o,n),i=t.add(EX(o)),r=t.add(MX({pulse:MG(i)})),r={agg:i,ref:MG(r)},null!=u&&(s[u]=r)),r.ref},rZ.tuplesRef=function(){return MG(this.values)},rZ.extentRef=function(t,e){return aZ(t,this,"extent","extent",e,!1)},rZ.domainRef=function(t,e){return aZ(t,this,"domain","values",e,!1)},rZ.valuesRef=function(t,e,n){return aZ(t,this,"vals","values",e,n||!0)},rZ.lookupRef=function(t,e){return aZ(t,this,"lookup","tupleindex",e,!1)},rZ.indataRef=function(t,e){return aZ(t,this,"indata","tupleindex",e,!0,!0)};var sZ=function(t,e,n){var r,i,o,a,s=t.from.facet,u=s.name,c=eZ(s,e);s.name||Object(rt["n"])("Facet must have a name: "+Object(rt["Z"])(s)),s.data||Object(rt["n"])("Facet must reference a data set: "+Object(rt["Z"])(s)),s.field?a=e.add(GX({field:e.fieldRef(s.field),pulse:c})):s.groupby?a=e.add(PX({key:e.keyRef(s.groupby),group:MG(e.proxy(n.parent)),pulse:c})):Object(rt["n"])("Facet must specify groupby or field: "+Object(rt["Z"])(s)),r=e.fork(),i=r.add(MX()),o=r.add(QX({pulse:MG(i)})),r.addData(u,new nZ(r,i,i,o)),r.addSignal("parent",null),a.params.subflow={$subflow:r.parse(t).toRuntime()}},uZ=function(t,e,n){var r=e.add(GX({pulse:n.pulse})),i=e.fork();i.add(QX()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(t).toRuntime()}},cZ=function(t,e,n){var r,i,o=t.remove,a=t.insert,s=t.toggle,u=t.modify,c=t.values,l=e.add(DG());r="if("+t.trigger+',modify("'+n+'",'+[a,o,s,u,c].map((function(t){return null==t?"null":t})).join(",")+"),0)",i=cH(r,e),l.update=i.$expr,l.params=i.$params},lZ=function(t,e){var n,r,i,o,a,s,u,c,l,h,f,d,p,g,m=$K(t),v=t.type===iK,y=t.from&&t.from.facet,b=t.layout||m===qq||m===Hq,x=m===Vq||b||y,w=t.overlap;i=tZ(t.from,v,e),r=e.add(IX({key:i.key||(t.key?NG(t.key):void 0),pulse:i.pulse,clean:!v})),h=MG(r),r=o=e.add(MX({pulse:h})),r=e.add(UX({markdef:LK(t),interactive:zK(t.interactive,e),clip:FK(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:MG(r)})),f=MG(r),r=a=e.add(RX(wG(t.encode,t.type,m,t.style,e,{mod:!1,pulse:f}))),r.params.parent=e.encode(),t.transform&&t.transform.forEach((function(t){const n=BK(t,e),i=n.metadata;(i.generates||i.changes)&&Object(rt["n"])("Mark transforms should not generate new data."),i.nomod||(a.params.mod=!0),n.params.pulse=MG(r),e.add(r=n)})),t.sort&&(r=e.add(tY({sort:e.compareRef(t.sort),pulse:MG(r)}))),d=MG(r),(y||b)&&(b=e.add(eY({layout:e.objectProperty(t.layout),legends:e.legends,mark:f,pulse:d})),p=MG(b)),s=e.add(DX({mark:f,pulse:p||d})),g=MG(s),v&&(x&&(n=e.operators,n.pop(),b&&n.pop()),e.pushState(d,p||g,h),y?sZ(t,e,i):x?uZ(t,e,i):e.parse(t),e.popState(),x&&(b&&n.push(b),n.push(s))),w&&(g=hZ(w,g,e)),u=e.add(ZX({pulse:g})),c=e.add(QX({pulse:MG(u)},void 0,e.parent())),null!=t.name&&(l=t.name,e.addData(l,new nZ(e,o,u,c)),t.on&&t.on.forEach((function(t){(t.insert||t.remove||t.toggle)&&Object(rt["n"])("Marks only support modify triggers."),cZ(t,e,l)})))};function hZ(t,e,n){var r,i=t.method,o=t.bound,a=t.separation,s={separation:WG(a)?n.signalRef(a.signal):a,method:WG(i)?n.signalRef(i.signal):i,pulse:e};return t.order&&(s.sort=n.compareRef({field:t.order})),o&&(r=o.tolerance,s.boundTolerance=WG(r)?n.signalRef(r.signal):+r,s.boundScale=n.scaleRef(o.scale),s.boundOrient=o.orient),MG(n.add(HX(s)))}var fZ=function(t,e){var n,r,i,o,a,s,u,c,l=e.config.legend,h=t.encode||{},f=h.legend||{},d=f.name||void 0,p=f.interactive,g=f.style,m=lK(t,l),v={},y=0;return tK.forEach(e=>t[e]?(v[e]=t[e],y=y||t[e]):0),y||Object(rt["n"])("Missing valid scale for legend."),a=dZ(t,e.scaleType(y)),s={title:null!=t.title,scales:v,type:a,vgrad:"symbol"!==a&&m.isVertical()},u=MG(e.add(MX(null,[s]))),f=Uq(gZ(m,t,l),f,eK),n={enter:{x:{value:0},y:{value:0}}},c=MG(e.add(zX(i={type:a,scale:e.scaleRef(y),count:e.objectProperty(m("tickCount")),limit:e.property(m("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),a===HY?(o=[yK(t,y,l,h.gradient),_K(t,l,h.labels,c)],i.count=i.count||e.signalRef(`max(2,2*floor((${GG(m.gradientLength())})/100))`)):a===qY?o=[bK(t,y,l,h.gradient,c),_K(t,l,h.labels,c)]:(r=SK(t,l),o=[OK(t,l,h,c,GG(r.columns))],i.size=mZ(t,e,o[0].marks)),o=[cK({role:eG,from:u,encode:n,marks:o,layout:r,interactive:p})],s.title&&o.push(RK(t,l,h.title,u)),lZ(cK({role:Qq,from:u,encode:f,marks:o,aria:m("aria"),description:m("description"),zindex:m("zindex"),name:d,interactive:p,style:g}),e)};function dZ(t,e){var n=t.type||VY;return t.type||1!==pZ(t)||!t.fill&&!t.stroke||(n=Bx(e)?HY:Wx(e)?qY:VY),n!==HY?n:Wx(e)?qY:HY}function pZ(t){return tK.reduce((function(e,n){return e+(t[n]?1:0)}),0)}function gZ(t,e,n){var r={enter:{},update:{}};return Bq(r,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),r}function mZ(t,e,n){var r=GG(vZ("size",t,n)),i=GG(vZ("strokeWidth",t,n)),o=GG(yZ(n[1].encode,e,zY));return cH(`max(ceil(sqrt(${r})+${i}),${o})`,e)}function vZ(t,e,n){return e[t]?`scale("${e[t]}",datum)`:hK(t,n[0].encode)}function yZ(t,e,n){return hK("fontSize",t)||fK("fontSize",e,n)}const bZ=`item.orient==="${kY}"?-90:item.orient==="${AY}"?90:0`;var xZ=function(t,e){t=Object(rt["H"])(t)?{text:t}:t;var n,r,i=lK(t,e.config.title),o=t.encode||{},a=o.group||{},s=a.name||void 0,u=a.interactive,c=a.style,l=[];return n={},r=MG(e.add(MX(null,[n]))),l.push(OZ(t,i,wZ(t),r)),t.subtitle&&l.push(SZ(t,i,o.subtitle,r)),lZ(cK({role:aG,from:r,encode:_Z(i,a),marks:l,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:u,style:c}),e)};function wZ(t){const e=t.encode;return e&&e.title||Object(rt["o"])({name:t.name,interactive:t.interactive,style:t.style},e)}function _Z(t,e){var n={enter:{},update:{}};return Bq(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:pK},angle:{signal:bZ},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),Uq(n,e,eK)}function OZ(t,e,n,r){var i={value:0},o=t.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Bq(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),vK({type:uK,role:sG,style:UY,from:r,encode:a},n)}function SZ(t,e,n,r){var i={value:0},o=t.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Bq(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),vK({type:uK,role:uG,style:WY,from:r,encode:a},n)}function CZ(t,e){var n=[];t.transform&&t.transform.forEach((function(t){n.push(BK(t,e))})),t.on&&t.on.forEach((function(n){cZ(n,e,t.name)})),e.addDataPipeline(t.name,kZ(t,e,n))}function kZ(t,e,n){var r,i,o,a,s,u=[],c=null,l=!1,h=!1;for(t.values?HG(t.values)||HG(t.format)?(u.push(TZ(e,t)),u.push(c=AZ())):u.push(c=AZ({$ingest:t.values,$format:t.format})):t.url?HG(t.url)||HG(t.format)?(u.push(TZ(e,t)),u.push(c=AZ())):u.push(c=AZ({$request:t.url,$format:t.format})):t.source&&(c=r=Object(rt["i"])(t.source).map((function(t){return MG(e.getData(t).output)})),u.push(null)),i=0,o=n.length;i<o;++i)a=n[i],s=a.metadata,c||s.source||u.push(c=AZ()),u.push(a),s.generates&&(h=!0),s.modifies&&!h&&(l=!0),s.source?c=a:s.changes&&(c=null);return r&&(o=r.length-1,u[0]=KX({derive:l,pulse:o?r:r[0]}),(l||o)&&u.splice(1,0,AZ())),c||u.push(AZ()),u.push(QX({})),u}function AZ(t){var e=MX({},t);return e.metadata={source:!0},e}function TZ(t,e){return BX({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const EZ=t=>t===TY||t===CY,jZ=(t,e,n)=>WG(t)?PZ(t.signal,e,n):t===kY||t===CY?e:n,DZ=(t,e,n)=>WG(t)?RZ(t.signal,e,n):EZ(t)?e:n,MZ=(t,e,n)=>WG(t)?FZ(t.signal,e,n):EZ(t)?n:e,NZ=(t,e,n)=>WG(t)?$Z(t.signal,e,n):t===CY?{value:e}:{value:n},IZ=(t,e,n)=>WG(t)?LZ(t.signal,e,n):t===AY?{value:e}:{value:n},RZ=(t,e,n)=>zZ(`${t} === '${CY}' || ${t} === '${TY}'`,e,n),FZ=(t,e,n)=>zZ(`${t} !== '${CY}' && ${t} !== '${TY}'`,e,n),PZ=(t,e,n)=>UZ(`${t} === '${kY}' || ${t} === '${CY}'`,e,n),$Z=(t,e,n)=>UZ(`${t} === '${CY}'`,e,n),LZ=(t,e,n)=>UZ(`${t} === '${AY}'`,e,n),zZ=(t,e,n)=>(e=null!=e?Lq(e):e,n=null!=n?Lq(n):n,BZ(e)&&BZ(n)?(e=e?e.signal||Object(rt["Z"])(e.value):null,n=n?n.signal||Object(rt["Z"])(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[Object(rt["o"])({test:t},e)].concat(n||[])),BZ=t=>null==t||1===Object.keys(t).length,UZ=(t,e,n)=>({signal:`${t} ? (${VZ(e)}) : (${VZ(n)})`}),WZ=(t,e,n,r,i)=>({signal:(null!=r?`${t} === '${kY}' ? (${VZ(r)}) : `:"")+(null!=n?`${t} === '${TY}' ? (${VZ(n)}) : `:"")+(null!=i?`${t} === '${AY}' ? (${VZ(i)}) : `:"")+(null!=e?`${t} === '${CY}' ? (${VZ(e)}) : `:"")+"(null)"}),VZ=t=>WG(t)?t.signal:null==t?null:Object(rt["Z"])(t),HZ=(t,e)=>0===e?0:WG(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},qZ=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function GZ(t,e,n,r){let i;if(e&&Object(rt["v"])(e,t))return e[t];if(Object(rt["v"])(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return r[BY][i]}if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return r[zY][i]}return null}function XZ(t){const e={};for(const n of t)if(n)for(const t in n)e[t]=1;return Object.keys(e)}var YZ=function(t,e){var n,r,i,o=e.config,a=o.style,s=o.axis,u="band"===e.scaleType(t.scale)&&o.axisBand,c=t.orient;if(WG(c)){const t=XZ([o.axisX,o.axisY]),e=XZ([o.axisTop,o.axisBottom,o.axisLeft,o.axisRight]);for(i of(n={},t))n[i]=DZ(c,GZ(i,o.axisX,s,a),GZ(i,o.axisY,s,a));for(i of(r={},e))r[i]=WZ(c.signal,GZ(i,o.axisTop,s,a),GZ(i,o.axisBottom,s,a),GZ(i,o.axisLeft,s,a),GZ(i,o.axisRight,s,a))}else n=c===CY||c===TY?o.axisX:o.axisY,r=o["axis"+c[0].toUpperCase()+c.slice(1)];var l=n||r||u?Object(rt["o"])({},s,n,r,u):s;return l},KZ=function(t,e,n,r){var i,o,a,s=lK(t,e),u=t.orient;i={enter:o={opacity:nK},update:a={opacity:rK},exit:{opacity:nK}},Bq(i,{stroke:s("domainColor"),strokeCap:s("domainCap"),strokeDash:s("domainDash"),strokeDashOffset:s("domainDashOffset"),strokeWidth:s("domainWidth"),strokeOpacity:s("domainOpacity")});const c=ZZ(t,0),l=ZZ(t,1);return o.x=a.x=DZ(u,c,nK),o.x2=a.x2=DZ(u,l),o.y=a.y=MZ(u,c,nK),o.y2=a.y2=MZ(u,l),vK({type:aK,role:Xq,from:r,encode:i},n)};function ZZ(t,e){return{scale:t.scale,range:e}}var JZ=function(t,e,n,r,i){var o,a,s,u,c,l,h,f,d=lK(t,e),p=t.orient,g=t.gridScale,m=jZ(p,1,-1),v=QZ(t.offset,m);return o={enter:a={opacity:nK},update:u={opacity:rK},exit:s={opacity:nK}},Bq(o,{stroke:d("gridColor"),strokeCap:d("gridCap"),strokeDash:d("gridDash"),strokeDashOffset:d("gridDashOffset"),strokeOpacity:d("gridOpacity"),strokeWidth:d("gridWidth")}),c={scale:t.scale,field:LY,band:i.band,extra:i.extra,offset:i.offset,round:d("tickRound")},f=DZ(p,{signal:"height"},{signal:"width"}),l=g?{scale:g,range:0,mult:m,offset:v}:{value:0,offset:v},h=g?{scale:g,range:1,mult:m,offset:v}:Object(rt["o"])(f,{mult:m,offset:v}),a.x=u.x=DZ(p,c,l),a.y=u.y=MZ(p,c,l),a.x2=u.x2=MZ(p,h),a.y2=u.y2=DZ(p,h),s.x=DZ(p,c),s.y=MZ(p,c),vK({type:aK,role:Yq,key:LY,from:r,encode:o},n)};function QZ(t,e){if(1===e);else if(Object(rt["F"])(t)){let n=t=Object(rt["o"])({},t);while(null!=n.mult){if(!Object(rt["F"])(n.mult))return n.mult=WG(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n=n.mult=Object(rt["o"])({},n.mult)}n.mult=e}else t=WG(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);return t}var tJ=function(t,e,n,r,i,o){var a,s,u,c,l,h,f=lK(t,e),d=t.orient,p=jZ(d,-1,1);return a={enter:s={opacity:nK},update:c={opacity:rK},exit:u={opacity:nK}},Bq(a,{stroke:f("tickColor"),strokeCap:f("tickCap"),strokeDash:f("tickDash"),strokeDashOffset:f("tickDashOffset"),strokeOpacity:f("tickOpacity"),strokeWidth:f("tickWidth")}),l=Lq(i),l.mult=p,h={scale:t.scale,field:LY,band:o.band,extra:o.extra,offset:o.offset,round:f("tickRound")},c.y=s.y=DZ(d,nK,h),c.y2=s.y2=DZ(d,l),u.x=DZ(d,h),c.x=s.x=MZ(d,nK,h),c.x2=s.x2=MZ(d,l),u.y=MZ(d,h),vK({type:aK,role:Zq,key:LY,from:r,encode:a},n)};function eJ(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}var nJ=function(t,e,n,r,i,o){var a,s,u,c,l,h,f,d,p,g,m=lK(t,e),v=t.orient,y=t.scale,b=jZ(v,-1,1),x=GG(m("labelFlush")),w=GG(m("labelFlushOffset")),_=0===x||!!x,O=m("labelAlign"),S=m("labelBaseline");return c=Lq(i),c.mult=b,c.offset=Lq(m("labelPadding")||0),c.offset.mult=b,l={scale:y,field:LY,band:.5,offset:mK(o.offset,m("labelOffset"))},h=DZ(v,_?eJ(y,x,'"left"','"right"','"center"'):{value:"center"},IZ(v,"left","right")),f=DZ(v,NZ(v,"bottom","top"),_?eJ(y,x,'"top"','"bottom"','"middle"'):{value:"middle"}),g=eJ(y,x,`-(${w})`,w,0),_=_&&w,s={opacity:nK,x:DZ(v,l,c),y:MZ(v,l,c)},a={enter:s,update:u={opacity:rK,text:{field:RY},x:s.x,y:s.y,align:h,baseline:f},exit:{opacity:nK,x:s.x,y:s.y}},Bq(a,{dx:!O&&_?DZ(v,g):null,dy:!S&&_?MZ(v,g):null}),Bq(a,{angle:m("labelAngle"),fill:m("labelColor"),fillOpacity:m("labelOpacity"),font:m("labelFont"),fontSize:m("labelFontSize"),fontWeight:m("labelFontWeight"),fontStyle:m("labelFontStyle"),limit:m("labelLimit"),lineHeight:m("labelLineHeight")},{align:O,baseline:S}),d=m("labelBound"),p=m("labelOverlap"),p=p||d?{separation:m("labelSeparation"),method:p,order:"datum.index",bound:d?{scale:y,orient:v,tolerance:d}:null}:void 0,u.align!==h&&(u.align=qZ(u.align,h)),u.baseline!==f&&(u.baseline=qZ(u.baseline,f)),vK({type:uK,role:Kq,style:zY,key:LY,from:r,encode:a,overlap:p},n)},rJ=function(t,e,n,r){var i,o,a,s,u=lK(t,e),c=t.orient,l=jZ(c,-1,1);return i={enter:o={opacity:nK,anchor:Lq(u("titleAnchor",null)),align:{signal:pK}},update:a=Object(rt["o"])({},o,{opacity:rK,text:Lq(t.title)}),exit:{opacity:nK}},s={signal:`lerp(range("${t.scale}"), ${dK(0,1,.5)})`},a.x=DZ(c,s),a.y=MZ(c,s),o.angle=DZ(c,nK,HZ(l,90)),o.baseline=DZ(c,NZ(c,TY,CY),{value:TY}),a.angle=o.angle,a.baseline=o.baseline,Bq(i,{fill:u("titleColor"),fillOpacity:u("titleOpacity"),font:u("titleFont"),fontSize:u("titleFontSize"),fontStyle:u("titleFontStyle"),fontWeight:u("titleFontWeight"),limit:u("titleLimit"),lineHeight:u("titleLineHeight")},{align:u("titleAlign"),angle:u("titleAngle"),baseline:u("titleBaseline")}),iJ(u,c,i,n),i.update.align=qZ(i.update.align,o.align),i.update.angle=qZ(i.update.angle,o.angle),i.update.baseline=qZ(i.update.baseline,o.baseline),vK({type:uK,role:Jq,style:BY,from:r,encode:i},n)};function iJ(t,e,n,r){const i=(t,e)=>null!=t?(n.update[e]=qZ(Lq(t),n.update[e]),!1):!Wq(e,r),o=i(t("titleX"),"x"),a=i(t("titleY"),"y");n.enter.auto=a===o?Lq(a):DZ(e,Lq(a),Lq(o))}var oJ=function(t,e){var n,r,i,o,a,s=YZ(t,e),u=t.encode||{},c=u.axis||{},l=c.name||void 0,h=c.interactive,f=c.style,d=lK(t,s),p=gK(d);return n={scale:t.scale,ticks:!!d("ticks"),labels:!!d("labels"),grid:!!d("grid"),domain:!!d("domain"),title:null!=t.title},r=MG(e.add(MX({},[n]))),c=Uq(aJ(d,t),c,eK),i=MG(e.add(jX({scale:e.scaleRef(t.scale),extra:e.property(p.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),a=[],n.grid&&a.push(JZ(t,s,u.grid,i,p)),n.ticks&&(o=d("tickSize"),a.push(tJ(t,s,u.ticks,i,o,p))),n.labels&&(o=n.ticks?o:0,a.push(nJ(t,s,u.labels,i,o,p))),n.domain&&a.push(KZ(t,s,u.domain,r)),n.title&&a.push(rJ(t,s,u.title,r)),lZ(cK({role:Gq,from:r,encode:c,marks:a,aria:d("aria"),description:d("description"),zindex:d("zindex"),name:l,interactive:h,style:f}),e)};function aJ(t,e){var n={enter:{},update:{}};return Bq(n,{orient:t("orient"),offset:t("offset")||0,position:qG(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n}var sJ=function(t,e,n){var r=Object(rt["i"])(t.signals),i=Object(rt["i"])(t.scales);return n||r.forEach(t=>TG(t,e)),Object(rt["i"])(t.projections).forEach(t=>OY(t,e)),i.forEach(t=>oY(t,e)),Object(rt["i"])(t.data).forEach(t=>CZ(t,e)),i.forEach(t=>aY(t,e)),(n||r).forEach(t=>AX(t,e)),Object(rt["i"])(t.axes).forEach(t=>oJ(t,e)),Object(rt["i"])(t.marks).forEach(t=>lZ(t,e)),Object(rt["i"])(t.legends).forEach(t=>fZ(t,e)),t.title&&xZ(t.title,e),e.parseLambdas(),e};const uJ=t=>Uq({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function cJ(t,e){const n=e.config,r=MG(e.root=e.add(DG())),i=hJ(t,n);i.forEach(t=>TG(t,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const o=e.add(MX()),a=e.add(RX(wG(uJ(t.encode),iK,Hq,t.style,e,{pulse:MG(o)}))),s=e.add(eY({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:r,pulse:MG(a)}));e.operators.pop(),e.pushState(MG(a),MG(s),null),sJ(t,e,i),e.operators.push(s);let u=e.add(DX({mark:r,pulse:MG(s)}));return u=e.add(ZX({pulse:MG(u)})),u=e.add(QX({pulse:MG(u)})),e.addData("root",new nZ(e,o,o,u)),e}function lJ(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function hJ(t,e){const n=n=>qG(t[n],e[n]),r=[lJ("background",n("background")),lJ("autosize",Rq(n("autosize"))),lJ("padding",$q(n("padding"))),lJ("width",n("width")||0),lJ("height",n("height")||0)],i=r.reduce((t,e)=>(t[e.name]=e,t),{}),o={};return Object(rt["i"])(t.signals).forEach(t=>{Object(rt["v"])(i,t.name)?t=Object(rt["o"])(i[t.name],t):r.push(t),o[t.name]=t}),Object(rt["i"])(e.signals).forEach(t=>{Object(rt["v"])(o,t.name)||Object(rt["v"])(i,t.name)||r.push(t)}),r}function fJ(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function dJ(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}var pJ=fJ.prototype=dJ.prototype;function gJ(t){return(Object(rt["A"])(t)?mJ:vJ)(t)}function mJ(t){for(var e,n="[",r=0,i=t.length;r<i;++r)e=t[r],n+=(r>0?",":"")+(Object(rt["F"])(e)?e.signal||gJ(e):Object(rt["Z"])(e));return n+"]"}function vJ(t){var e,n,r="{",i=0;for(e in t)n=t[e],r+=(++i>1?",":"")+Object(rt["Z"])(e)+":"+(Object(rt["F"])(n)?n.signal||gJ(n):Object(rt["Z"])(n));return r+"}"}pJ.parse=function(t){return sJ(t,this)},pJ.fork=function(){return new dJ(this)},pJ.isSubscope=function(){return this._subid>0},pJ.toRuntime=function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},pJ.id=function(){return(this._subid?this._subid+":":0)+this._id++},pJ.add=function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach((function(e){e.$ref=t.id})),t.refs=null),t},pJ.proxy=function(t){var e=t instanceof EG?MG(t):t;return this.add(YX({value:e}))},pJ.addStream=function(t){return this.streams.push(t),t.id=this.id(),t},pJ.addUpdate=function(t){return this.updates.push(t),t},pJ.finish=function(){var t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){var r,i;t&&(r=t.data||(t.data={}),i=r[e]||(r[e]=[]),i.push(n))}for(t in this.data)for(var r in e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values"),e.index)n(e.index[r],t,"index:"+r);return this},pJ.pushState=function(t,e,n){this._encode.push(MG(this.add(QX({pulse:t})))),this._parent.push(e),this._lookup.push(n?MG(this.proxy(n)):null),this._markpath.push(-1)},pJ.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},pJ.parent=function(){return Object(rt["U"])(this._parent)},pJ.encode=function(){return Object(rt["U"])(this._encode)},pJ.lookup=function(){return Object(rt["U"])(this._lookup)},pJ.markpath=function(){var t=this._markpath;return++t[t.length-1]},pJ.fieldRef=function(t,e){if(Object(rt["H"])(t))return NG(t,e);t.signal||Object(rt["n"])("Unsupported field reference: "+Object(rt["Z"])(t));var n,r=t.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},e&&(n.as=e),this.field[r]=i=MG(this.add($X(n)))),i},pJ.compareRef=function(t){function e(t){return WG(t)?(r=!0,n.signalRef(t.signal)):VG(t)?(r=!0,n.exprRef(t.expr)):t}var n=this,r=!1,i=Object(rt["i"])(t.field).map(e),o=Object(rt["i"])(t.order).map(e);return r?MG(this.add(NX({fields:i,orders:o}))):RG(i,o)},pJ.keyRef=function(t,e){function n(t){return WG(t)?(i=!0,MG(r[t.signal])):t}var r=this.signals,i=!1;return t=Object(rt["i"])(t).map(n),i?MG(this.add(LX({fields:t,flat:e}))):FG(t,e)},pJ.sortRef=function(t){if(!t)return t;var e=zG(t.op,t.field),n=t.order||PG;return n.signal?MG(this.add(NX({fields:e,orders:this.signalRef(n.signal)}))):RG(e,n)},pJ.event=function(t,e){var n=t+":"+e;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},pJ.hasOwnSignal=function(t){return Object(rt["v"])(this.signals,t)},pJ.addSignal=function(t,e){this.hasOwnSignal(t)&&Object(rt["n"])("Duplicate signal name: "+Object(rt["Z"])(t));var n=e instanceof EG?e:this.add(DG(e));return this.signals[t]=n},pJ.getSignal=function(t){return this.signals[t]||Object(rt["n"])("Unrecognized signal name: "+Object(rt["Z"])(t)),this.signals[t]},pJ.signalRef=function(t){return this.signals[t]?MG(this.signals[t]):(Object(rt["v"])(this.lambdas,t)||(this.lambdas[t]=this.add(DG(null))),MG(this.lambdas[t]))},pJ.parseLambdas=function(){for(var t=Object.keys(this.lambdas),e=0,n=t.length;e<n;++e){var r=t[e],i=cH(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},pJ.property=function(t){return t&&t.signal?this.signalRef(t.signal):t},pJ.objectProperty=function(t){return t&&Object(rt["F"])(t)?this.signalRef(t.signal||gJ(t)):t},pJ.exprRef=function(t,e){var n={expr:cH(t,this)};return e&&(n.expr.$name=e),MG(this.add(FX(n)))},pJ.addBinding=function(t,e){this.bindings||Object(rt["n"])("Nested signals do not support binding: "+Object(rt["Z"])(t)),this.bindings.push(Object(rt["o"])({signal:t},e))},pJ.addScaleProj=function(t,e){Object(rt["v"])(this.scales,t)&&Object(rt["n"])("Duplicate scale or projection name: "+Object(rt["Z"])(t)),this.scales[t]=this.add(e)},pJ.addScale=function(t,e){this.addScaleProj(t,JX(e))},pJ.addProjection=function(t,e){this.addScaleProj(t,XX(e))},pJ.getScale=function(t){return this.scales[t]||Object(rt["n"])("Unrecognized scale name: "+Object(rt["Z"])(t)),this.scales[t]},pJ.projectionRef=pJ.scaleRef=function(t){return MG(this.getScale(t))},pJ.projectionType=pJ.scaleType=function(t){return this.getScale(t).params.type},pJ.addData=function(t,e){return Object(rt["v"])(this.data,t)&&Object(rt["n"])("Duplicate data set name: "+Object(rt["Z"])(t)),this.data[t]=e},pJ.getData=function(t){return this.data[t]||Object(rt["n"])("Undefined data set name: "+Object(rt["Z"])(t)),this.data[t]},pJ.addDataPipeline=function(t,e){return Object(rt["v"])(this.data,t)&&Object(rt["n"])("Duplicate data set name: "+Object(rt["Z"])(t)),this.addData(t,nZ.fromEntries(this,e))};var yJ=function(){const t="sans-serif",e=30,n=2,r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:n},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:t,fontSize:11},trail:{fill:r,size:n},style:{"guide-label":{fill:i,font:t,fontSize:10},"guide-title":{fill:i,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:t,fontSize:12},point:{size:e,strokeWidth:n,shape:"circle"},circle:{size:e,strokeWidth:n},square:{size:e,strokeWidth:n,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}},bJ=function(t,e,n){return Object(rt["F"])(t)||Object(rt["n"])("Input Vega specification must be an object."),e=Object(rt["N"])(yJ(),e,t.config),cJ(t,new fJ(e,n)).toRuntime()};Object(rt["o"])(is,o,s,u,c,l,h,f,d,p,g);var xJ=n("a87b");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function wJ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;Object.create;Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,t.call(r,e-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var _J=n("6715"),OJ=n.n(_J),SJ=n("46ad"),CJ=n.n(SJ),kJ=n("f011"),AJ=n.n(kJ);function TJ(t){return!!t.or}function EJ(t){return!!t.and}function jJ(t){return!!t.not}function DJ(t,e){if(jJ(t))DJ(t.not,e);else if(EJ(t))for(const n of t.and)DJ(n,e);else if(TJ(t))for(const n of t.or)DJ(n,e);else e(t)}function MJ(t,e){return jJ(t)?{not:MJ(t.not,e)}:EJ(t)?{and:t.and.map(t=>MJ(t,e))}:TJ(t)?{or:t.or.map(t=>MJ(t,e))}:e(t)}const NJ=CJ.a,IJ=OJ.a;function RJ(t,e){const n={};for(const r of e)Object(rt["v"])(t,r)&&(n[r]=t[r]);return n}function FJ(t,e){const n=Object.assign({},t);for(const r of e)delete n[r];return n}Set.prototype["toJSON"]=function(){return`Set(${[...this].map(t=>AJ()(t)).join(",")})`};const PJ=AJ.a;function $J(t){if(Object(rt["E"])(t))return t;const e=Object(rt["H"])(t)?t:AJ()(t);if(e.length<250)return e;let n=0;for(let r=0;r<e.length;r++){const t=e.charCodeAt(r);n=(n<<5)-n+t,n&=n}return n}function LJ(t){return!1===t||null===t}function zJ(t,e){return t.indexOf(e)>-1}function BJ(t,e){let n=0;for(const[r,i]of t.entries())if(e(i,r,n++))return!0;return!1}function UJ(t,e){let n=0;for(const[r,i]of t.entries())if(!e(i,r,n++))return!1;return!0}function WJ(t,...e){for(const n of e)VJ(t,null!==n&&void 0!==n?n:{});return t}function VJ(t,e){for(const n of ZJ(e))Object(rt["jb"])(t,n,e[n],!0)}function HJ(t,e){const n=[],r={};let i;for(const o of t)i=e(o),i in r||(r[i]=1,n.push(o));return n}function qJ(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function GJ(t,e){for(const n of t)if(e.has(n))return!0;return!1}function XJ(t){const e=new Set;for(const n of t){const t=Object(rt["Y"])(n),r=t.map((t,e)=>0===e?t:`[${t}]`),i=r.map((t,e)=>r.slice(0,e+1).join(""));for(const n of i)e.add(n)}return e}function YJ(t,e){return void 0===t||void 0===e||GJ(XJ(t),XJ(e))}function KJ(t){return 0===ZJ(t).length}const ZJ=Object.keys,JJ=Object.values;function QJ(t){const e=[];for(const n in t)Object(rt["v"])(t,n)&&e.push({key:n,value:t[n]});return e}function tQ(t){return!0===t||!1===t}function eQ(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function nQ(t,e){return jJ(t)?"!("+nQ(t.not,e)+")":EJ(t)?"("+t.and.map(t=>nQ(t,e)).join(") && (")+")":TJ(t)?"("+t.or.map(t=>nQ(t,e)).join(") || (")+")":e(t)}function rQ(t,e){if(0===e.length)return!0;const n=e.shift();return n in t&&rQ(t[n],e)&&delete t[n],KJ(t)}function iQ(t){return t.charAt(0).toUpperCase()+t.substr(1)}function oQ(t,e="datum"){const n=Object(rt["Y"])(t),r=[];for(let i=1;i<=n.length;i++){const t=`[${n.slice(0,i).map(rt["Z"]).join("][")}]`;r.push(`${e}${t}`)}return r.join(" && ")}function aQ(t,e="datum"){return`${e}[${Object(rt["Z"])(Object(rt["Y"])(t).join("."))}]`}function sQ(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function uQ(t){return""+Object(rt["Y"])(t).map(sQ).join("\\.")}function cQ(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function lQ(t){return""+Object(rt["Y"])(t).join(".")}function hQ(t){return t?Object(rt["Y"])(t).length:0}function fQ(...t){for(const e of t)if(void 0!==e)return e}let dQ=42;function pQ(t){const e=++dQ;return t?String(t)+e:e}function gQ(t){return mQ(t)?t:"__"+t}function mQ(t){return 0===t.indexOf("__")}function vQ(t){if(void 0!==t)return(t%360+360)%360}function yQ(t){return!!Object(rt["E"])(t)||!isNaN(t)&&!isNaN(parseFloat(t))}const bQ={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};function xQ(t){return t&&t["condition"]}const wQ=["domain","grid","labels","ticks","title"],_Q={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},OQ={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},SQ=Object.assign(Object.assign({},OQ),{style:1,labelExpr:1,encoding:1});function CQ(t){return!!SQ[t]}ZJ(SQ);const kQ={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},AQ=kQ.arc,TQ=kQ.area,EQ=kQ.bar,jQ=kQ.image,DQ=kQ.line,MQ=kQ.point,NQ=kQ.rect,IQ=kQ.rule,RQ=kQ.text,FQ=kQ.tick,PQ=kQ.trail,$Q=kQ.circle,LQ=kQ.square,zQ=kQ.geoshape;function BQ(t){return zJ(["line","area","trail"],t)}function UQ(t){return zJ(["rect","bar","image","arc"],t)}const WQ=ZJ(kQ);function VQ(t){return t["type"]}Object(rt["db"])(WQ);const HQ=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],qQ=["fill","fillOpacity"],GQ=[...HQ,...qQ],XQ={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1},YQ=ZJ(XQ),KQ={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},ZQ={color:"#4c78a8",invalid:"filter",timeUnitBand:1},JQ={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},QQ=5,t0={binSpacing:1,continuousBandSize:QQ,timeUnitBandPosition:.5},e0={binSpacing:0,continuousBandSize:QQ,timeUnitBandPosition:.5},n0={thickness:1};function r0(t){return VQ(t)?t.type:t}function i0(t){return"mark"in t}class o0{constructor(t,e){this.name=t,this.run=e}hasMatchingType(t){return!!i0(t)&&r0(t.mark)===this.name}}const a0={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},s0={count:1,min:1,max:1};function u0(t){return!!t&&!!t["argmin"]}function c0(t){return!!t&&!!t["argmax"]}ZJ(a0);function l0(t){return Object(rt["H"])(t)&&!!a0[t]}const h0=["count","valid","missing","distinct"];function f0(t){return Object(rt["H"])(t)&&zJ(h0,t)}function d0(t){return Object(rt["H"])(t)&&zJ(["min","max"],t)}const p0=["count","sum","distinct","valid","missing"],g0=["mean","average","median","q1","q3","min","max"],m0=Object(rt["db"])(g0),v0="row",y0="column",b0="facet",x0="x",w0="y",_0="x2",O0="y2",S0="radius",C0="radius2",k0="theta",A0="theta2",T0="latitude",E0="longitude",j0="latitude2",D0="longitude2",M0="color",N0="fill",I0="stroke",R0="shape",F0="size",P0="angle",$0="opacity",L0="fillOpacity",z0="strokeOpacity",B0="strokeWidth",U0="strokeDash",W0="text",V0="order",H0="detail",q0="key",G0="tooltip",X0="href",Y0="url",K0="description",Z0={x:1,y:1,x2:1,y2:1},J0={theta:1,theta2:1,radius:1,radius2:1};function Q0(t){return t in J0}const t1={longitude:1,longitude2:1,latitude:1,latitude2:1};function e1(t){switch(t){case T0:return"y";case j0:return"y2";case E0:return"x";case D0:return"x2"}}function n1(t){return t in t1}const r1=ZJ(t1),i1=Object.assign(Object.assign(Object.assign(Object.assign({},Z0),J0),t1),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function o1(t){return t===M0||t===N0||t===I0}const a1={row:1,column:1,facet:1},s1=ZJ(a1),u1=Object.assign(Object.assign({},i1),a1),c1=ZJ(u1),{order:l1,detail:h1,tooltip:f1}=u1,d1=wJ(u1,["order","detail","tooltip"]),{row:p1,column:g1,facet:m1}=d1,v1=wJ(d1,["row","column","facet"]);ZJ(d1),ZJ(v1);function y1(t){return!!v1[t]}function b1(t){return!!u1[t]}const x1=[_0,O0,j0,D0,A0,C0];function w1(t){const e=_1(t);return e!==t}function _1(t){switch(t){case _0:return x0;case O0:return w0;case j0:return T0;case D0:return E0;case A0:return k0;case C0:return S0}return t}function O1(t){if(Q0(t))switch(t){case k0:return"startAngle";case A0:return"endAngle";case S0:return"outerRadius";case C0:return"innerRadius"}return t}function S1(t){switch(t){case x0:return _0;case w0:return O0;case T0:return j0;case E0:return D0;case k0:return A0;case S0:return C0}}function C1(t){switch(t){case x0:case _0:return"width";case w0:case O0:return"height"}}function k1(t){switch(t){case x0:return"xOffset";case w0:return"yOffset";case _0:return"x2Offset";case O0:return"y2Offset";case k0:return"thetaOffset";case S0:return"radiusOffset";case A0:return"theta2Offset";case C0:return"radius2Offset"}}ZJ(i1);const{x:A1,y:T1,x2:E1,y2:j1,latitude:D1,longitude:M1,latitude2:N1,longitude2:I1,theta:R1,theta2:F1,radius:P1,radius2:$1}=i1,L1=wJ(i1,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),z1=ZJ(L1),B1={x:1,y:1},U1=ZJ(B1);function W1(t){return t in B1}const V1={theta:1,radius:1},H1=ZJ(V1);function q1(t){return"width"===t?x0:w0}const{text:G1,tooltip:X1,href:Y1,url:K1,description:Z1,detail:J1,key:Q1,order:t2}=L1,e2=wJ(L1,["text","tooltip","href","url","description","detail","key","order"]),n2=ZJ(e2);function r2(t){return!!L1[t]}function i2(t){switch(t){case M0:case N0:case I0:case F0:case R0:case $0:case B0:case U0:return!0;case L0:case z0:case P0:return!1}}const o2=Object.assign(Object.assign(Object.assign({},B1),V1),e2),a2=ZJ(o2);function s2(t){return!!o2[t]}function u2(t,e){return f2(t)[e]}const c2={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:l2}=c2,h2=wJ(c2,["geoshape"]);function f2(t){switch(t){case M0:case N0:case I0:case K0:case H0:case q0:case G0:case X0:case V0:case $0:case L0:case z0:case B0:case b0:case v0:case y0:return c2;case x0:case w0:case T0:case E0:return h2;case _0:case O0:case j0:case D0:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case F0:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case U0:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case R0:return{point:"always",geoshape:"always"};case W0:return{text:"always"};case P0:return{point:"always",square:"always",text:"always"};case Y0:return{image:"always"};case k0:return{text:"always",arc:"always"};case S0:return{text:"always",arc:"always"};case A0:case C0:return{arc:"always"}}}function d2(t){switch(t){case x0:case w0:case k0:case S0:case F0:case P0:case B0:case $0:case L0:case z0:case _0:case O0:case A0:case C0:return;case b0:case v0:case y0:case R0:case U0:case W0:case G0:case X0:case Y0:case K0:return"discrete";case M0:case N0:case I0:return"flexible";case T0:case E0:case j0:case D0:case H0:case q0:case V0:return}}function p2(t){return Object(rt["B"])(t)&&(t=t8(t,void 0)),"bin"+ZJ(t).map(e=>y2(t[e])?eQ(`_${e}_${Object.entries(t[e])}`):eQ(`_${e}_${t[e]}`)).join("")}function g2(t){return!0===t||v2(t)&&!t.binned}function m2(t){return"binned"===t||v2(t)&&!0===t.binned}function v2(t){return Object(rt["F"])(t)}function y2(t){return null===t||void 0===t?void 0:t["selection"]}function b2(t){switch(t){case v0:case y0:case F0:case M0:case N0:case I0:case B0:case $0:case L0:case z0:case R0:return 6;case U0:return 4;default:return 10}}function x2(t){return`Invalid specification ${JSON.stringify(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const w2='Autosize "fit" only works for single views and layered views.';function _2(t){const e="width"==t?"Width":"Height";return e+' "container" only works for single views and layered views.'}function O2(t){const e="width"==t?"Width":"Height",n="width"==t?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${n}".`}function S2(t){return t?`Dropping "fit-${t}" because spec has discrete ${C1(t)}.`:'Dropping "fit" because spec has discrete size.'}function C2(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function k2(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function A2(t){return`The "nearest" transform is not supported for ${t} marks.`}function T2(t){return`Selection not supported for ${t} yet.`}function E2(t){return`Cannot find a selection named "${t}".`}const j2="Scale bindings are currently only supported for scales with unbinned, continuous domains.",D2="Legend bindings are only supported for selections over an individual field or encoding channel.";function M2(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}function N2(t){return`Unknown repeated value "${t}".`}function I2(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}const R2="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function F2(t){return`Unrecognized parse "${t}".`}function P2(t,e,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${e}.`}function $2(t){return`Ignoring an invalid transform: ${PJ(t)}.`}const L2='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function z2(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function B2(t){return`Layer's shared ${t.join(",")} channel ${1===t.length?"is":"are"} overriden.`}function U2(t){const{parentProjection:e,projection:n}=t;return`Layer's shared projection ${PJ(e)} is overridden by a child projection ${PJ(n)}.`}const W2="Arc marks uses theta channel rather than angle, replacing angle with theta.";function V2(t,e,n){return`Channel ${t} is a ${e}. Converted to {value: ${PJ(n)}}.`}function H2(t){return`Invalid field type "${t}".`}function q2(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function G2(t){return`Invalid aggregation operator "${t}".`}function X2(t,e){return`Missing type for channel "${t}", using "${e}" instead.`}function Y2(t,e){const{fill:n,stroke:r}=e;return`Dropping color ${t} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function K2(t,e){return`Dropping ${PJ(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}function Z2(t,e,n){return`${t}-encoding with type ${e} is deprecated. Replacing with ${n}-encoding.`}const J2="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Q2(t,e,n){return`${t} dropped as it is incompatible with "${e}"${n?" when "+n:""}.`}function t3(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function e3(t){return t+" encoding should be discrete (ordinal / nominal / binned)."}function n3(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function r3(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${"ordinal"===e?"order":"magnitude"}.`}function i3(t,e){const n=t&&e?"x2 and y2":t?"x2":"y2";return`Line mark is for continuous lines and thus cannot be used with ${n}. We will use the rule mark (line segments) instead.`}function o3(t,e){return`Specified orient "${t}" overridden with "${e}".`}const a3="Custom domain scale cannot be unioned with default field-based domain.",s3='Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.';function u3(t){return`Cannot use the scale property "${t}" with non-color channel.`}function c3(t){return`Using unaggregated domain with raw field has no effect (${PJ(t)}).`}function l3(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function h3(t){return`Unaggregated domain is currently unsupported for log scale (${PJ(t)}).`}function f3(t){return`Cannot apply size to non-oriented mark "${t}".`}function d3(t,e,n){return`Channel "${t}" does not work with "${e}" scale. We are using "${n}" scale instead.`}function p3(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function g3(t,e,n){return`${n}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function m3(t,e){return`Scale type "${e}" does not work with mark "${t}".`}function v3(t){return`The step for "${t}" is dropped because the ${"width"===t?"x":"y"} is continuous.`}function y3(t,e,n,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${PJ(n)} and ${PJ(r)}). Using ${PJ(n)}.`}function b3(t,e,n,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${PJ(n)} and ${PJ(r)}). Using the union of the two domains.`}function x3(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function w3(t){return`Dropping sort property ${PJ(t)} as unioned domains only support boolean or op "count", "min", and "max".`}const _3="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",O3="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",S3="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",C3="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",k3="Invalid channel for axis.";function A3(t){return`Cannot stack "${t}" if there is already "${t}2".`}function T3(t){return`Cannot stack non-linear scale (${t}).`}function E3(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function j3(t,e){return`Invalid ${t}: ${PJ(e)}.`}function D3(t){return`Dropping day from datetime ${PJ(t)} as day cannot be combined with other units.`}function M3(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function N3(t,e,n){return`${t} is not usually used with ${e} for ${n}.`}function I3(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function R3(t,e){return`Center is not needed to be specified in ${e} when extent is ${t}.`}function F3(t){return`1D error band does not support ${t}.`}function P3(t){return`Channel ${t} is required for "binned" bin.`}function $3(t){return`Domain for ${t} is required for threshold scale.`}const L3=Object(rt["K"])(rt["e"]);let z3=L3;function B3(t){return z3=t,z3}function U3(){return z3=L3,z3}function W3(...t){z3.warn(...t)}function V3(...t){z3.debug(...t)}function H3(t){if(t&&Object(rt["F"])(t))for(const e of i5)if(e in t)return!0;return!1}const q3=["january","february","march","april","may","june","july","august","september","october","november","december"],G3=q3.map(t=>t.substr(0,3)),X3=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Y3=X3.map(t=>t.substr(0,3));function K3(t){if(yQ(t)&&(t=+t),Object(rt["E"])(t))return t>4&&W3(v.invalidTimeUnit("quarter",t)),t-1;throw new Error(v.invalidTimeUnit("quarter",t))}function Z3(t){if(yQ(t)&&(t=+t),Object(rt["E"])(t))return t-1;{const e=t.toLowerCase(),n=q3.indexOf(e);if(-1!==n)return n;const r=e.substr(0,3),i=G3.indexOf(r);if(-1!==i)return i;throw new Error(v.invalidTimeUnit("month",t))}}function J3(t){if(yQ(t)&&(t=+t),Object(rt["E"])(t))return t%7;{const e=t.toLowerCase(),n=X3.indexOf(e);if(-1!==n)return n;const r=e.substr(0,3),i=Y3.indexOf(r);if(-1!==i)return i;throw new Error(v.invalidTimeUnit("day",t))}}function Q3(t,e){const n=[];if(e&&void 0!==t.day&&ZJ(t).length>1&&(W3(v.droppedDay(t)),t=IJ(t),delete t.day),void 0!==t.year?n.push(t.year):n.push(2012),void 0!==t.month){const r=e?Z3(t.month):t.month;n.push(r)}else if(void 0!==t.quarter){const r=e?K3(t.quarter):t.quarter;n.push(Object(rt["E"])(r)?3*r:r+"*3")}else n.push(0);if(void 0!==t.date)n.push(t.date);else if(void 0!==t.day){const r=e?J3(t.day):t.day;n.push(Object(rt["E"])(r)?r+1:r+"+1")}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const e=t[r];n.push("undefined"===typeof e?0:e)}return n}function t5(t){const e=Q3(t,!0),n=e.join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function e5(t){const e=Q3(t,!1),n=e.join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function n5(t){const e=Q3(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}const r5={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},i5=ZJ(r5);function o5(t){return!!r5[t]}function a5(t){return t.startsWith("utc")}function s5(t){return t.substr(3)}const u5={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function c5(t){const e=[];for(const n of i5)l5(t,n)&&e.push(n);return e}function l5(t,e){const n=t.indexOf(e);return!(n<0)&&(!(n>0&&"seconds"===e&&"i"===t.charAt(n-1))&&(!(t.length>n+3&&"day"===e&&"o"===t.charAt(n+3))&&!(n>0&&"year"===e&&"f"===t.charAt(n-1))))}function h5(t,e,{end:n}={end:!1}){const r=oQ(e),i=a5(t)?"utc":"";function o(t){return"quarter"===t?`(${i}quarter(${r})-1)`:`${i}${t}(${r})`}let a;const s={};for(const u of i5)l5(t,u)&&(s[u]=o(u),a=u);return n&&(s[a]+="+1"),e5(s)}function f5(t){if(!t)return;const e=c5(t);return`timeUnitSpecifier(${AJ()(e)}, ${AJ()(u5)})`}function d5(t,e,n){if(!t)return;const r=f5(t),i=n||a5(t);return`${i?"utc":"time"}Format(${e}, ${r})`}function p5(t){if(!t)return;let e;return Object(rt["H"])(t)?e={unit:t}:Object(rt["F"])(t)&&(e=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),a5(e.unit)&&(e.utc=!0,e.unit=s5(e.unit)),e}function g5(t){const e=p5(t),{utc:n}=e,r=wJ(e,["utc"]);return r.unit?(n?"utc":"")+ZJ(r).map(t=>eQ(`${"unit"===t?"":`_${t}_`}${r[t]}`)).join(""):(n?"utc":"")+"timeunit"+ZJ(r).map(t=>eQ(`_${t}_${r[t]}`)).join("")}function m5(t){return t&&!!t["signal"]}function v5(t){return!!t["step"]}function y5(t){return!Object(rt["A"])(t)&&("fields"in t&&!("data"in t))}function b5(t){return!Object(rt["A"])(t)&&("fields"in t&&"data"in t)}function x5(t){return!Object(rt["A"])(t)&&("field"in t&&"data"in t)}const w5={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1},_5=ZJ(w5),O5={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},S5=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function C5(t){return null===t||void 0===t?void 0:t["selection"]}function k5(t){return t&&!!t.field&&void 0!==t.equal}function A5(t){return t&&!!t.field&&void 0!==t.lt}function T5(t){return t&&!!t.field&&void 0!==t.lte}function E5(t){return t&&!!t.field&&void 0!==t.gt}function j5(t){return t&&!!t.field&&void 0!==t.gte}function D5(t){if(t&&t.field){if(Object(rt["A"])(t.range)&&2===t.range.length)return!0;if(m5(t.range))return!0}return!1}function M5(t){return t&&!!t.field&&(Object(rt["A"])(t.oneOf)||Object(rt["A"])(t.in))}function N5(t){return t&&!!t.field&&void 0!==t.valid}function I5(t){return M5(t)||k5(t)||D5(t)||A5(t)||E5(t)||T5(t)||j5(t)}function R5(t,e){return o8(t,{timeUnit:e,wrapTime:!0})}function F5(t,e){return t.map(t=>R5(t,e))}function P5(t,e=!0){var n;const{field:r}=t,i=null===(n=p5(t.timeUnit))||void 0===n?void 0:n.unit,o=i?"time("+h5(i,r)+")":N6(t,{expr:"datum"});if(k5(t))return o+"==="+R5(t.equal,i);if(A5(t)){const e=t.lt;return`${o}<${R5(e,i)}`}if(E5(t)){const e=t.gt;return`${o}>${R5(e,i)}`}if(T5(t)){const e=t.lte;return`${o}<=${R5(e,i)}`}if(j5(t)){const e=t.gte;return`${o}>=${R5(e,i)}`}if(M5(t))return`indexof([${F5(t.oneOf,i).join(",")}], ${o}) !== -1`;if(N5(t))return $5(o,t.valid);if(D5(t)){const{range:n}=t,r=m5(n)?{signal:n.signal+"[0]"}:n[0],a=m5(n)?{signal:n.signal+"[1]"}:n[1];if(null!==r&&null!==a&&e)return"inrange("+o+", ["+R5(r,i)+", "+R5(a,i)+"])";const s=[];return null!==r&&s.push(`${o} >= ${R5(r,i)}`),null!==a&&s.push(`${o} <= ${R5(a,i)}`),s.length>0?s.join(" && "):"true"}throw new Error("Invalid field predicate: "+JSON.stringify(t))}function $5(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function L5(t){var e;return I5(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:null===(e=p5(t.timeUnit))||void 0===e?void 0:e.unit}):t}const z5={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};const B5=z5.quantitative,U5=z5.ordinal,W5=z5.temporal,V5=z5.nominal,H5=z5.geojson,q5=ZJ(z5);function G5(t){if(t)switch(t=t.toLowerCase(),t){case"q":case B5:return"quantitative";case"t":case W5:return"temporal";case"o":case U5:return"ordinal";case"n":case V5:return"nominal";case H5:return"geojson"}}const X5={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Y5={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},K5=ZJ(Y5);function Z5(t,e){const n=Y5[t],r=Y5[e];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const J5={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Q5(t){return J5[t]}const t4=["linear","log","pow","sqrt","symlog","time","utc"],e4=Object(rt["db"])(t4),n4=["linear","log","pow","sqrt","symlog"],r4=Object(rt["db"])(n4);function i4(t){return t in r4}const o4=["quantile","quantize","threshold"],a4=Object(rt["db"])(o4),s4=t4.concat(["quantile","quantize","threshold","sequential","identity"]),u4=Object(rt["db"])(s4),c4=["ordinal","bin-ordinal","point","band"],l4=Object(rt["db"])(c4);function h4(t){return t in l4}function f4(t){return t in u4}function d4(t){return t in e4}function p4(t){return t in a4}const g4={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function m4(t){return!Object(rt["H"])(t)&&!!t["name"]}function v4(t){return null===t||void 0===t?void 0:t["selection"]}function y4(t){return t&&t["unionWith"]}const b4={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:x4,domain:w4,range:_4,scheme:O4}=(ZJ(b4),b4),S4=wJ(b4,["type","domain","range","scheme"]),C4=ZJ(S4);j4();function k4(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!zJ(["point","band","identity"],t);case"bins":return!zJ(["point","band","identity","ordinal"],t);case"round":return d4(t)||"band"===t||"point"===t;case"padding":return d4(t)||zJ(["point","band"],t);case"paddingOuter":case"align":return zJ(["point","band"],t);case"paddingInner":return"band"===t;case"domainMid":case"clamp":return d4(t);case"nice":return d4(t)||"quantize"===t||"threshold"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"constant":return"symlog"===t;case"zero":return f4(t)&&!zJ(["log","time","utc","threshold","quantile"],t)}}function A4(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return o1(t)?void 0:v.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function T4(t,e){return zJ([U5,V5],e)?void 0===t||h4(t):e===W5?zJ([X5.TIME,X5.UTC,void 0],t):e!==B5||zJ([X5.LOG,X5.POW,X5.SQRT,X5.SYMLOG,X5.QUANTILE,X5.QUANTIZE,X5.THRESHOLD,X5.LINEAR,void 0],t)}function E4(t,e){if(!s2(t))return!1;switch(t){case x0:case w0:case k0:case S0:return d4(e)||zJ(["band","point"],e);case F0:case B0:case $0:case L0:case z0:case P0:return d4(e)||p4(e)||zJ(["band","point","ordinal"],e);case M0:case N0:case I0:return"band"!==e;case U0:return"ordinal"===e||p4(e);case R0:return"ordinal"===e}}function j4(){var t;const e={};for(const n of c1)for(const r of q5)for(const i of K5){const o=D4(n,r);E4(n,i)&&T4(i,r)&&(e[o]=null!==(t=e[o])&&void 0!==t?t:[],e[o].push(i))}return e}function D4(t,e){return t+"_"+e}function M4(t){const{channel:e,channelDef:n,markDef:r,scale:i,config:o}=t,a=L4(t);return x6(n)&&!f0(n.aggregate)&&i&&d4(i.get("type"))&&!1===i.get("zero")?N4({fieldDef:n,channel:e,markDef:r,ref:a,config:o}):a}function N4({fieldDef:t,channel:e,markDef:n,ref:r,config:i}){if(BQ(n.type))return r;const o=g8("invalid",n,i);return null===o?r:[I4(t,e),r]}function I4(t,e){const n=R4(t,!0),r=_1(e),i="y"===r?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function R4(t,e=!0){return $5(Object(rt["H"])(t)?t:N6(t,{expr:"datum"}),!e)}function F4(t){const{datum:e}=t;return H3(e)?t5(e):""+JSON.stringify(e)}function P4(t,e,n,r){const i={};if(e&&(i.scale=e),_6(t)){const{datum:e}=t;H3(e)?i.signal=t5(e):m5(e)?i.signal=e.signal:i.value=e}else i.field=N6(t,n);if(r){const{offset:t,band:e}=r;t&&(i.offset=t),e&&(i.band=e)}return i}function $4({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:n,offset:r,startSuffix:i,band:o=.5}){const a=0<o&&o<1?"datum":void 0,s=N6(e,{expr:a,suffix:i}),u=void 0!==n?N6(n,{expr:a}):N6(e,{suffix:"end",expr:a}),c={};if(0===o||1===o){c.scale=t;const e=0===o?s:u;c.field=e}else{const e=`${o} * ${s} + ${1-o} * ${u}`;c.signal=`scale("${t}", ${e})`}return r&&(c.offset=r),c}function L4({channel:t,channelDef:e,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:c,band:l}){var h;if(e){if(C6(e)){if(k6(e)){l=null!==l&&void 0!==l?l:p6({channel:t,fieldDef:e,fieldDef2:n,markDef:r,stack:s,config:i,isMidPoint:!0});const{bin:a,timeUnit:c,type:h}=e;if(g2(a)||l&&c&&h===W5)return s&&s.impute?P4(e,o,{binSuffix:"mid"},{offset:u}):l?$4({scaleName:o,fieldOrDatumDef:e,band:l,offset:u}):P4(e,o,s8(e,t)?{binSuffix:"range"}:{},{offset:u});if(m2(a)){if(x6(n))return $4({scaleName:o,fieldOrDatumDef:e,fieldOrDatumDef2:n,band:l,offset:u});{const e=t===x0?_0:O0;W3(v.channelRequiredForBinned(e))}}}const c=null===a||void 0===a?void 0:a.get("type");return P4(e,o,h4(c)?{binSuffix:"range"}:{},{offset:u,band:"band"===c?null!==(h=null!==l&&void 0!==l?l:e.band)&&void 0!==h?h:.5:void 0})}if(A6(e)){const n=e.value,r=u?{offset:u}:{};return Object.assign(Object.assign({},z4(t,n)),r)}}return Object(rt["D"])(c)&&(c=c()),c?Object.assign(Object.assign({},c),u?{offset:u}:{}):c}function z4(t,e){return zJ(["x","x2"],t)&&"width"===e?{field:{group:"width"}}:zJ(["y","y2"],t)&&"height"===e?{field:{group:"height"}}:l8(e)}function B4(t){return t&&"number"!==t&&"time"!==t}function U4(t,e,n){return`${t}(${e}${n?", "+JSON.stringify(n):""})`}const W4=" – ";function V4({fieldOrDatumDef:t,format:e,formatType:n,expr:r,normalizeStack:i,config:o}){var a,s;if(B4(n))return q4({fieldOrDatumDef:t,format:e,formatType:n,expr:r,config:o});const u=H4(t,r,i);if(r8(t)){const n=t6(u,x6(t)?null===(a=p5(t.timeUnit))||void 0===a?void 0:a.unit:void 0,e,o.timeFormat,T6(t)&&(null===(s=t.scale)||void 0===s?void 0:s.type)===X5.UTC);return n?{signal:n}:void 0}if(e=Y4(w6(t),e,o),x6(t)&&g2(t.bin)){const i=N6(t,{expr:r,binSuffix:"end"});return{signal:Q4(u,i,e,n,o)}}return e||"quantitative"===w6(t)?{signal:""+Z4(u,e)}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function H4(t,e,n){return x6(t)?n?`${N6(t,{expr:e,suffix:"end"})}-${N6(t,{expr:e,suffix:"start"})}`:N6(t,{expr:e}):F4(t)}function q4({fieldOrDatumDef:t,format:e,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a=null!==a&&void 0!==a?a:H4(t,r,i),x6(t)&&g2(t.bin)){const i=N6(t,{expr:r,binSuffix:"end"});return{signal:Q4(a,i,e,n,o)}}return{signal:U4(n,a,e)}}function G4(t,e,n,r,i,o){var a;if(!B4(r)){if(r8(t)){const e=x6(t)?null===(a=p5(t.timeUnit))||void 0===a?void 0:a.unit:void 0;return K4(n,e,i,o)}return Y4(e,n,i)}}function X4(t,e,n){return t&&(m5(t)||"number"===t||"time"===t)?t:r8(e)&&"time"!==n&&"utc"!==n?"time":void 0}function Y4(t,e,n){return Object(rt["H"])(e)?e:t===B5?n.numberFormat:void 0}function K4(t,e,n,r){return t||(e?{signal:f5(e)}:r?void 0:n.timeFormat)}function Z4(t,e){return`format(${t}, "${e||""}")`}function J4(t,e,n,r){var i;return B4(n)?U4(n,t,e):Z4(t,null!==(i=Object(rt["H"])(e)?e:void 0)&&void 0!==i?i:r.numberFormat)}function Q4(t,e,n,r,i){const o=J4(t,n,r,i),a=J4(e,n,r,i);return`${$5(t,!1)} ? "null" : ${o} + "${W4}" + ${a}`}function t6(t,e,n,r,i){return!e||n?(n=Object(rt["H"])(n)?n:r,`${i?"utc":"time"}Format(${t}, '${n}')`):d5(e,t,i)}const e6="min",n6={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function r6(t){return t in n6}function i6(t){return!!t&&!!t["encoding"]}function o6(t){return!!t&&("count"===t["op"]||!!t["field"])}function a6(t){return!!t&&Object(rt["A"])(t)}function s6(t){return"row"in t||"column"in t}function u6(t){return!!t&&"header"in t}function c6(t){return"facet"in t}function l6(t){return t["selection"]}function h6(t){return t&&!Object(rt["H"])(t)&&"repeat"in t}function f6(t){const{field:e,timeUnit:n,bin:r,aggregate:i}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:e})}function d6(t){return k6(t)&&"sort"in t}function p6({channel:t,fieldDef:e,fieldDef2:n,markDef:r,stack:i,config:o,isMidPoint:a}){if(C6(e)&&void 0!==e.band)return e.band;if(x6(e)){const{timeUnit:t,bin:i}=e;if(t&&!n)return a?m8("timeUnitBandPosition",r,o):UQ(r.type)?m8("timeUnitBand",r,o):0;if(g2(i))return UQ(r.type)&&!a?1:.5}return(null===i||void 0===i?void 0:i.fieldChannel)===t&&a?.5:void 0}function g6(t,e,n,r,i,o){return!!(g2(e.bin)||e.timeUnit&&k6(e)&&"temporal"===e.type)&&!!p6({channel:t,fieldDef:e,fieldDef2:n,stack:r,markDef:i,config:o})}function m6(t){return!!t&&"condition"in t}function v6(t){const e=t&&t["condition"];return!!e&&!Object(rt["A"])(e)&&x6(e)}function y6(t){const e=t&&t["condition"];return!!e&&!Object(rt["A"])(e)&&C6(e)}function b6(t){const e=t&&t["condition"];return!!e&&(Object(rt["A"])(e)||A6(e))}function x6(t){return!!t&&(!!t["field"]||"count"===t["aggregate"])}function w6(t){return t&&t["type"]}function _6(t){return!!t&&"datum"in t}function O6(t){return k6(t)&&R6(t)||S6(t)}function S6(t){return _6(t)&&Object(rt["E"])(t.datum)}function C6(t){return x6(t)||_6(t)}function k6(t){return!!t&&("field"in t&&"type"in t||"count"===t["aggregate"])}function A6(t){return t&&"value"in t&&"value"in t}function T6(t){return!!t&&("scale"in t||"sort"in t)}function E6(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function j6(t){return!!t&&"legend"in t}function D6(t){return!!t&&("format"in t||"formatType"in t)}function M6(t){return"op"in t}function N6(t,e={}){var n,r,i;let o=t.field;const a=e.prefix;let s=e.suffix,u="";if(F6(t))o=gQ("count");else{let a;if(!e.nofn)if(M6(t))a=t.op;else{const{bin:c,aggregate:l,timeUnit:h}=t;g2(c)?(a=p2(c),s=(null!==(n=e.binSuffix)&&void 0!==n?n:"")+(null!==(r=e.suffix)&&void 0!==r?r:"")):l?c0(l)?(u=`["${o}"]`,o="argmax_"+l.argmax):u0(l)?(u=`["${o}"]`,o="argmin_"+l.argmin):a=String(l):h&&(a=g5(h),s=(!zJ(["range","mid"],e.binSuffix)&&e.binSuffix||"")+(null!==(i=e.suffix)&&void 0!==i?i:""))}a&&(o=o?`${a}_${o}`:a)}return s&&(o=`${o}_${s}`),a&&(o=`${a}_${o}`),e.forAs?lQ(o):e.expr?aQ(o,e.expr)+u:uQ(o)+u}function I6(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return x6(t)&&!!t.bin;case"temporal":return!1}throw new Error(v.invalidFieldType(t.type))}function R6(t){return!I6(t)}function F6(t){return"count"===t.aggregate}function P6(t,e){var n;const{field:r,bin:i,timeUnit:o,aggregate:a}=t;if("count"===a)return e.countTitle;if(g2(i))return r+" (binned)";if(o){const t=null===(n=p5(o))||void 0===n?void 0:n.unit;if(t)return`${r} (${c5(t).join("-")})`}else if(a)return c0(a)?`${r} for max ${a.argmax}`:u0(a)?`${r} for min ${a.argmin}`:`${iQ(a)} of ${r}`;return r}function $6(t){const{aggregate:e,bin:n,timeUnit:r,field:i}=t;if(c0(e))return`${i} for argmax(${e.argmax})`;if(u0(e))return`${i} for argmin(${e.argmin})`;const o=p5(r),a=e||(null===o||void 0===o?void 0:o.unit)||(null===o||void 0===o?void 0:o.maxbins)&&"timeunit"||g2(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}const L6=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return $6(t);default:return P6(t,e)}};let z6=L6;function B6(t){z6=t}function U6(){B6(L6)}function W6(t,e,{allowDisabling:n,includeDefault:r=!0}){var i,o;const a=null!==(i=V6(t))&&void 0!==i?i:{},s=a.title;if(!x6(t))return s;const u=t,c=r?H6(u,e):void 0;return n?fQ(s,u.title,c):null!==(o=null!==s&&void 0!==s?s:u.title)&&void 0!==o?o:c}function V6(t){return E6(t)&&t.axis?t.axis:j6(t)&&t.legend?t.legend:u6(t)&&t.header?t.header:void 0}function H6(t,e){return z6(t,e)}function q6(t){var e;if(D6(t)){const{format:e,formatType:n}=t;return{format:e,formatType:n}}{const n=null!==(e=V6(t))&&void 0!==e?e:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function G6(t,e){if(t.timeUnit)return"temporal";if(g2(t.bin))return"quantitative";switch(d2(e)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function X6(t){return x6(t)?t:v6(t)?t.condition:void 0}function Y6(t){return C6(t)?t:y6(t)?t.condition:void 0}function K6(t,e,n){if(Object(rt["H"])(t)||Object(rt["E"])(t)||Object(rt["B"])(t)){const n=Object(rt["H"])(t)?"string":Object(rt["E"])(t)?"number":"boolean";return W3(v.primitiveChannelDef(e,n,t)),{value:t}}return C6(t)?Z6(t,e,n):y6(t)?Object.assign(Object.assign({},t),{condition:Z6(t.condition,e,n)}):t}function Z6(t,e,n){if(D6(t)){const{format:r,formatType:i}=t,o=wJ(t,["format","formatType"]);if(B4(i)&&!n.customFormatTypes)return W3(v.customFormatTypeNotAllowed(e)),Z6(o,e,n)}else{const r=E6(t)?"axis":j6(t)?"legend":u6(t)?"header":null;if(r&&t[r]){const i=t[r],{format:o,formatType:a}=i,s=wJ(i,["format","formatType"]);if(B4(a)&&!n.customFormatTypes)return W3(v.customFormatTypeNotAllowed(e)),Z6(Object.assign(Object.assign({},t),{[r]:s}),e,n)}}return x6(t)?Q6(t,e):J6(t)}function J6(t){let e=t["type"];if(e)return t;const{datum:n}=t;return e=Object(rt["E"])(n)?"quantitative":Object(rt["H"])(n)?"nominal":H3(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:e})}function Q6(t,e){const{aggregate:n,timeUnit:r,bin:i,field:o}=t,a=Object.assign({},t);if(!n||l0(n)||c0(n)||u0(n)||(W3(v.invalidAggregate(n)),delete a.aggregate),r&&(a.timeUnit=p5(r)),o&&(a.field=""+o),g2(i)&&(a.bin=t8(i,e)),m2(i)&&!W1(e)&&W3(`Channel ${e} should not be used with "binned" bin.`),k6(a)){const{type:t}=a,e=G5(t);t!==e&&(a.type=e),"quantitative"!==t&&f0(n)&&(W3(v.invalidFieldTypeForCountAggregate(t,n)),a.type="quantitative")}else if(!w1(e)){const t=G6(a,e);W3(v.missingFieldType(e,t)),a["type"]=t}if(k6(a)){const{compatible:t,warning:n}=n8(a,e);t||W3(n)}if(d6(a)&&Object(rt["H"])(a.sort)){const{sort:t}=a;if(r6(t))return Object.assign(Object.assign({},a),{sort:{encoding:t}});const e=t.substr(1);if("-"===t.charAt(0)&&r6(e))return Object.assign(Object.assign({},a),{sort:{encoding:e,order:"descending"}})}if(u6(a)){const{header:t}=a,{orient:e}=t,n=wJ(t,["orient"]);if(e)return Object.assign(Object.assign({},a),{header:Object.assign(Object.assign({},n),{labelOrient:t.labelOrient||e,titleOrient:t.titleOrient||e})})}return a}function t8(t,e){return Object(rt["B"])(t)?{maxbins:b2(e)}:"binned"===t?{binned:!0}:t.maxbins||t.step?t:Object.assign(Object.assign({},t),{maxbins:b2(e)})}const e8={compatible:!0};function n8(t,e){const n=t.type;if("geojson"===n&&"shape"!==e)return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case v0:case y0:case b0:return R6(t)?{compatible:!1,warning:v.facetChannelShouldBeDiscrete(e)}:e8;case x0:case w0:case M0:case N0:case I0:case W0:case H0:case q0:case G0:case X0:case Y0:case P0:case k0:case S0:case K0:return e8;case E0:case D0:case T0:case j0:return n!==B5?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:e8;case $0:case L0:case z0:case B0:case F0:case A0:case C0:case _0:case O0:return"nominal"!==n||t["sort"]?e8:{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`};case U0:return zJ(["ordinal","nominal"],t.type)?e8:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case R0:return zJ(["ordinal","nominal","geojson"],t.type)?e8:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case V0:return"nominal"!==t.type||"sort"in t?e8:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}function r8(t){const{formatType:e}=q6(t);return"time"===e||!e&&i8(t)}function i8(t){return t&&("temporal"===t["type"]||x6(t)&&!!t.timeUnit)}function o8(t,{timeUnit:e,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var o;const a=e&&(null===(o=p5(e))||void 0===o?void 0:o.unit);let s,u=a||"temporal"===n;return m5(t)?s=t.signal:H3(t)?(u=!0,s=t5(t)):(Object(rt["H"])(t)||Object(rt["E"])(t))&&u&&(s=`datetime(${JSON.stringify(t)})`,o5(a)&&(Object(rt["E"])(t)&&t<1e4||Object(rt["H"])(t)&&isNaN(Date.parse(t)))&&(s=t5({[a]:t}))),s?r&&u?`time(${s})`:s:i?void 0:JSON.stringify(t)}function a8(t,e){const{type:n}=t;return e.map(e=>{const r=o8(e,{timeUnit:x6(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:e})}function s8(t,e){return g2(t.bin)?s2(e)&&zJ(["ordinal","nominal"],t.type):(console.warn("Only call this method for binned field defs."),!1)}function u8(t){const{anchor:e,frame:n,offset:r,orient:i,color:o,subtitleColor:a,subtitleFont:s,subtitleFontSize:u,subtitleFontStyle:c,subtitleFontWeight:l,subtitleLineHeight:h,subtitlePadding:f}=t,d=wJ(t,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),p=Object.assign(Object.assign({},d),o?{fill:o}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign({},e?{anchor:e}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a?{subtitleColor:a}:{}),s?{subtitleFont:s}:{}),u?{subtitleFontSize:u}:{}),c?{subtitleFontStyle:c}:{}),l?{subtitleFontWeight:l}:{}),h?{subtitleLineHeight:h}:{}),f?{subtitlePadding:f}:{}),v=RJ(p,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:p,subtitleMarkConfig:v,nonMark:g,subtitle:m}}function c8(t){return Object(rt["H"])(t)||Object(rt["A"])(t)&&Object(rt["H"])(t[0])}function l8(t){return m5(t)?t:void 0!==t?{value:t}:void 0}function h8(t){return m5(t)?t.signal:Object(rt["Z"])(t.value)}function f8(t){return m5(t)?t.signal:null==t?null:Object(rt["Z"])(t)}function d8(t,e,n){for(const r of n){const n=m8(r,e.markDef,e.config);void 0!==n&&(t[r]=l8(n))}return t}function p8(t){var e;return[].concat(t.type,null!==(e=t.style)&&void 0!==e?e:[])}function g8(t,e,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&void 0!==e[i]?e[i]:void 0!==e[t]?e[t]:!o||i&&i!==t?m8(t,e,n,r):void 0}function m8(t,e,n,{vgChannel:r}={}){return fQ(r?v8(t,e,n.style):void 0,v8(t,e,n.style),r?n[e.type][r]:void 0,n[e.type][t],r?n.mark[r]:n.mark[t])}function v8(t,e,n){return y8(t,p8(e),n)}function y8(t,e,n){let r;e=Object(rt["i"])(e);for(const i of e){const e=n[i];e&&void 0!==e[t]&&(r=e[t])}return r}function b8(t,e){return Object(rt["i"])(t).reduce((t,n)=>{var r;return t.field.push(N6(n,e)),t.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),t},{field:[],order:[]})}function x8(t,e){const n=[...t];return e.forEach(t=>{for(const e of n)if(NJ(e,t))return;n.push(t)}),n}function w8(t,e){return NJ(t,e)||!e?t:t?[...Object(rt["i"])(t),...Object(rt["i"])(e)].join(", "):e}function _8(t,e){const n=t.value,r=e.value;if(null==n||null===r)return{explicit:t.explicit,value:null};if((c8(n)||m5(n))&&(c8(r)||m5(r)))return{explicit:t.explicit,value:w8(n,r)};if(c8(n)||m5(n))return{explicit:t.explicit,value:n};if(c8(r)||m5(r))return{explicit:t.explicit,value:r};if(!c8(n)&&!m5(n)&&!c8(r)&&!m5(r))return{explicit:t.explicit,value:x8(n,r)};throw new Error("It should never reach here")}function O8(t,e){const n=t&&t[e];return!!n&&(Object(rt["A"])(n)?BJ(n,t=>!!t.field):x6(n)||v6(n))}function S8(t){return BJ(c1,e=>{if(O8(t,e)){const n=t[e];if(Object(rt["A"])(n))return BJ(n,t=>!!t.aggregate);{const t=X6(n);return t&&!!t.aggregate}}return!1})}function C8(t,e){const n=[],r=[],i=[],o=[],a={};return E8(t,(s,u)=>{if(x6(s)){const{field:c,aggregate:l,bin:h,timeUnit:f}=s,d=wJ(s,["field","aggregate","bin","timeUnit"]);if(l||f||h){const t=V6(s),p=t&&t.title;let g=N6(s,{forAs:!0});const m=Object.assign(Object.assign(Object.assign({},p?[]:{title:W6(s,e,{allowDisabling:!0})}),d),{field:g});if(l){let t;if(c0(l)?(t="argmax",g=N6({op:"argmax",field:l.argmax},{forAs:!0}),m.field=`${g}.${c}`):u0(l)?(t="argmin",g=N6({op:"argmin",field:l.argmin},{forAs:!0}),m.field=`${g}.${c}`):"boxplot"!==l&&"errorbar"!==l&&"errorband"!==l&&(t=l),t){const e={op:t,as:g};c&&(e.field=c),o.push(e)}}else if(n.push(g),k6(s)&&g2(h)){if(r.push({bin:h,field:c,as:g}),n.push(N6(s,{binSuffix:"end"})),s8(s,u)&&n.push(N6(s,{binSuffix:"range"})),W1(u)){const t={field:g+"_end"};a[u+"2"]=t}m.bin="binned",w1(u)||(m["type"]=B5)}else if(f){i.push({timeUnit:f,field:c,as:g});const t=k6(s)&&s.type!==W5&&"time";t&&(u===W0||u===G0?m["formatType"]=t:r2(u)?m["legend"]=Object.assign({formatType:t},m["legend"]):W1(u)&&(m["axis"]=Object.assign({formatType:t},m["axis"])))}a[u]=m}else n.push(c),a[u]=t[u]}else a[u]=t[u]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function k8(t,e,n){const r=u2(e,n);if(!r)return!1;if("binned"===r){const n=t[e===_0?x0:w0];return!!(x6(n)&&x6(t[e])&&m2(n.bin))}return!0}function A8(t,e,n){const r=e.type;return ZJ(t).reduce((i,o)=>{if(!b1(o))return W3(v.invalidEncodingChannel(o)),i;const a=t[o];if("angle"!==o||"arc"!==r||t.theta||(W3(v.REPLACE_ANGLE_WITH_THETA),o=k0),!k8(t,o,r))return W3(v.incompatibleChannel(o,r)),i;if(o===F0&&"line"===r){const e=X6(t[o]);if(null===e||void 0===e?void 0:e.aggregate)return W3(v.LINE_WITH_VARYING_SIZE),i}if(o===M0&&(e.filled?"fill"in t:"stroke"in t))return W3(v.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),i;if(o===H0||o===V0&&!Object(rt["A"])(a)&&!A6(a)||o===G0&&Object(rt["A"])(a))a&&(i[o]=Object(rt["i"])(a).reduce((t,e)=>(x6(e)?t.push(Q6(e,o)):W3(v.emptyFieldDef(e,o)),t),[]));else{if(o===G0&&null===a)i[o]=null;else if(!x6(a)&&!_6(a)&&!A6(a)&&!m6(a)&&!m5(a))return W3(v.emptyFieldDef(a,o)),i;i[o]=K6(a,o,n)}return i},{})}function T8(t){const e=[];for(const n of ZJ(t))if(O8(t,n)){const r=t[n],i=Object(rt["i"])(r);for(const t of i)x6(t)?e.push(t):v6(t)&&e.push(t.condition)}return e}function E8(t,e,n){if(t)for(const r of ZJ(t)){const i=t[r];if(Object(rt["A"])(i))for(const t of i)e.call(n,t,r);else e.call(n,i,r)}}function j8(t,e,n,r){return t?ZJ(t).reduce((n,i)=>{const o=t[i];return Object(rt["A"])(o)?o.reduce((t,n)=>e.call(r,t,n,i),n):e.call(r,n,o,i)},n):n}function D8(t,e){return ZJ(e).reduce((n,r)=>{switch(r){case x0:case w0:case X0:case K0:case Y0:case _0:case O0:case k0:case A0:case S0:case C0:case T0:case E0:case j0:case D0:case W0:case R0:case P0:case G0:return n;case V0:if("line"===t||"trail"===t)return n;case H0:case q0:{const t=e[r];if(Object(rt["A"])(t)||x6(t))for(const e of Object(rt["i"])(t))e.aggregate||n.push(N6(e,{}));return n}case F0:if("trail"===t)return n;case M0:case N0:case I0:case $0:case L0:case z0:case U0:case B0:{const t=X6(e[r]);return t&&!t.aggregate&&n.push(N6(t,{})),n}}},[])}function M8(t){const{tooltip:e}=t,n=wJ(t,["tooltip"]);if(!e)return{filteredEncoding:t};let r,i;if(Object(rt["A"])(e)){for(const t of e)t.aggregate?(r||(r=[]),r.push(t)):(i||(i=[]),i.push(t));r&&(n.tooltip=r)}else e["aggregate"]?n.tooltip=e:i=e;return Object(rt["A"])(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function N8(t,e,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=t.map(({fieldPrefix:t,titlePrefix:n})=>{const i=r?" of "+e.field:"";return{field:t+e.field,type:e.type,title:m5(n)?{signal:n+`"${escape(i)}"`}:n+i}});return{tooltip:[...i,...T8(n)]}}function I8(t){const{axis:e,title:n,field:r}=t;return e&&void 0!==e.title?void 0:fQ(n,r)}function R8(t,e,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:u,positionPrefix:c,endPositionPrefix:l,aria:h,extraEncoding:f={}})=>{const d=I8(n);return F8(t,s,i,h,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[e]:Object.assign(Object.assign(Object.assign({field:c+"_"+n.field,type:n.type},void 0!==d?{title:d}:{}),void 0!==o?{scale:o}:{}),void 0!==a?{axis:a}:{})},Object(rt["H"])(l)?{[e+"2"]:{field:l+"_"+n.field}}:{}),r),f)})}}function F8(t,e,n,r,i){const{clip:o,color:a,opacity:s}=t,u=t.type;return t[e]||void 0===t[e]&&n[e]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[e]),o?{clip:o}:{}),a?{color:a}:{}),s?{opacity:s}:{}),VQ(i.mark)?i.mark:{type:i.mark}),{style:`${u}-${e}`}),Object(rt["B"])(t[e])?{}:t[e]),!1===r?{aria:r}:{})})]:[]}function P8(t,e,n){const{encoding:r}=t,i="vertical"===e?"y":"x",o=r[i],a=r[i+"2"],s=r[i+"Error"],u=r[i+"Error2"];return{continuousAxisChannelDef:$8(o,n),continuousAxisChannelDef2:$8(a,n),continuousAxisChannelDefError:$8(s,n),continuousAxisChannelDefError2:$8(u,n),continuousAxis:i}}function $8(t,e){if(t&&t.aggregate){const{aggregate:n}=t,r=wJ(t,["aggregate"]);return n!==e&&W3(v.errorBarContinuousAxisHasCustomizedAggregate(n,e)),r}return t}function L8(t,e){const{mark:n,encoding:r}=t,{x:i,y:o}=r;if(O6(i)){if(O6(o)){const t=x6(i)&&i.aggregate,r=x6(o)&&o.aggregate;if(t||r!==e){if(r||t!==e){if(t===e&&r===e)throw new Error("Both x and y cannot have aggregate");return VQ(n)&&n.orient?n.orient:"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(O6(o))return"vertical";throw new Error("Need a valid continuous axis for "+e+"s")}const z8="boxplot",B8=["box","median","outliers","rule","ticks"],U8=new o0(z8,V8);function W8(t){return Object(rt["E"])(t)?"tukey":t}function V8(t,{config:e}){var n,r;const{mark:i,encoding:o,selection:a,projection:s}=t,u=wJ(t,["mark","encoding","selection","projection"]),c=VQ(i)?i:{type:i};a&&W3(v.selectionNotSupported("boxplot"));const l=null!==(n=c.extent)&&void 0!==n?n:e.boxplot.extent,h=g8("size",c,e),f=W8(l),{transform:d,continuousAxisChannelDef:p,continuousAxis:g,groupby:m,aggregate:y,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:_}=q8(t,l,e),{color:O,size:S}=b,C=wJ(b,["color","size"]),k=t=>R8(c,g,p,t,e.boxplot),A=k(C),T=k(b),E=k(Object.assign(Object.assign({},C),S?{size:S}:{})),j=N8([{fieldPrefix:"min-max"===f?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===f?"lower_whisker_":"min_",titlePrefix:"Min"}],p,b),D={type:"tick",color:"black",opacity:1,orient:x,invalid:null},M="min-max"===f?j:N8([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,b),N=[...A({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:M}),...A({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:M}),...A({partName:"ticks",mark:D,positionPrefix:"lower_whisker",aria:!1,extraEncoding:M}),...A({partName:"ticks",mark:D,positionPrefix:"upper_whisker",aria:!1,extraEncoding:M})],I=[..."tukey"!==f?N:[],...T({partName:"box",mark:Object.assign(Object.assign({type:"bar"},h?{size:h}:{}),{orient:w,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:j}),...E({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Object(rt["F"])(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{}),h?{size:h}:{}),{orient:x,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:j})];let R;if("min-max"!==f){const t=`datum["lower_box_${p.field}"]`,n=`datum["upper_box_${p.field}"]`,r=`(${n} - ${t})`,i=`${t} - ${l} * ${r}`,o=`${n} + ${l} * ${r}`,a=`datum["${p.field}"]`,s={joinaggregate:H8(p.field),groupby:m};let u=void 0;"tukey"===f&&(u={transform:[{filter:`(${i} <= ${a}) && (${a} <= ${o})`},{aggregate:[{op:"min",field:p.field,as:"lower_whisker_"+p.field},{op:"max",field:p.field,as:"upper_whisker_"+p.field},{op:"min",field:"lower_box_"+p.field,as:"lower_box_"+p.field},{op:"max",field:"upper_box_"+p.field,as:"upper_box_"+p.field},...y],groupby:m}],layer:N});const{tooltip:h}=C,d=wJ(C,["tooltip"]),{scale:v,axis:b}=p,x=I8(p),w=F8(c,"outliers",e.boxplot,!0,{transform:[{filter:`(${a} < ${i}) || (${a} > ${o})`}],mark:"point",encoding:Object.assign(Object.assign({[g]:Object.assign(Object.assign(Object.assign({field:p.field,type:p.type},void 0!==x?{title:x}:{}),void 0!==v?{scale:v}:{}),void 0!==b?{axis:b}:{})},d),_?{tooltip:_}:{})})[0];w&&u?R={transform:[s],layer:[w,u]}:w?(R=w,R.transform.unshift(s)):u&&(R=u,R.transform.unshift(s))}return R?Object.assign(Object.assign({},u),{layer:[R,{transform:d,layer:I}]}):Object.assign(Object.assign({},u),{transform:(null!==(r=u.transform)&&void 0!==r?r:[]).concat(d),layer:I})}function H8(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}function q8(t,e,n){const r=L8(t,z8),{continuousAxisChannelDef:i,continuousAxis:o}=P8(t,r,z8),a=i.field,s=W8(e),u=[...H8(a),{op:"median",field:a,as:"mid_box_"+a},{op:"min",field:a,as:("min-max"===s?"lower_whisker_":"min_")+a},{op:"max",field:a,as:("min-max"===s?"upper_whisker_":"max_")+a}],c="min-max"===s||"tukey"===s?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:"iqr_"+a},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${e}, datum["max_${a}"])`,as:"upper_whisker_"+a},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${e}, datum["min_${a}"])`,as:"lower_whisker_"+a}],l=t.encoding,h=o,f=(l[h],wJ(l,["symbol"===typeof h?h:h+""])),{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=M8(f),{bins:g,timeUnits:m,aggregate:v,groupby:y,encoding:b}=C8(p,n),x="vertical"===r?"horizontal":"vertical",w=r,_=[...g,...m,{aggregate:[...v,...u],groupby:y},...c];return{transform:_,groupby:y,aggregate:v,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:d}}const G8="errorbar",X8=["ticks","rule"],Y8=new o0(G8,K8);function K8(t,{config:e}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:u,tooltipEncoding:c}=e7(t,G8,e),l=R8(s,i,r,o,e.errorbar),h={type:"tick",orient:a},f=[...l({partName:"ticks",mark:h,positionPrefix:"lower",aria:!1,extraEncoding:c}),...l({partName:"ticks",mark:h,positionPrefix:"upper",aria:!1,extraEncoding:c}),...l({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return Object.assign(Object.assign(Object.assign({},u),{transform:n}),f.length>1?{layer:f}:Object.assign({},f[0]))}function Z8(t,e){const{encoding:n}=t;if(J8(n))return{orient:L8(t,e),inputType:"raw"};const r=Q8(n),i=t7(n),o=n.x,a=n.y;if(r){if(i)throw new Error(e+" cannot be both type aggregated-upper-lower and aggregated-error");const t=n.x2,r=n.y2;if(C6(t)&&C6(r))throw new Error(e+" cannot have both x2 and y2");if(C6(t)){if(O6(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in "+e)}if(C6(r)){if(O6(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in "+e)}throw new Error("No ranged axis")}{const t=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(C6(r)&&!C6(t))throw new Error(e+" cannot have xError2 without xError");if(C6(s)&&!C6(i))throw new Error(e+" cannot have yError2 without yError");if(C6(t)&&C6(i))throw new Error(e+" cannot have both xError and yError with both are quantiative");if(C6(t)){if(O6(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(C6(i)){if(O6(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function J8(t){return(C6(t.x)||C6(t.y))&&!C6(t.x2)&&!C6(t.y2)&&!C6(t.xError)&&!C6(t.xError2)&&!C6(t.yError)&&!C6(t.yError2)}function Q8(t){return C6(t.x2)||C6(t.y2)}function t7(t){return C6(t.xError)||C6(t.xError2)||C6(t.yError)||C6(t.yError2)}function e7(t,e,n){var r;const{mark:i,encoding:o,selection:a,projection:s}=t,u=wJ(t,["mark","encoding","selection","projection"]),c=VQ(i)?i:{type:i};a&&W3(v.selectionNotSupported(e));const{orient:l,inputType:h}=Z8(t,e),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:g,continuousAxis:m}=P8(t,l,e),{errorBarSpecificAggregate:y,postAggregateCalculates:b,tooltipSummary:x,tooltipTitleWithFieldName:w}=n7(c,f,d,p,g,h,e,n),_=o,O=m,S=(_[O],"x"===m?"x2":"y2"),C=(_[S],"x"===m?"xError":"yError"),k=(_[C],"x"===m?"xError2":"yError2"),A=(_[k],wJ(_,["symbol"===typeof O?O:O+"","symbol"===typeof S?S:S+"","symbol"===typeof C?C:C+"","symbol"===typeof k?k:k+""])),{bins:T,timeUnits:E,aggregate:j,groupby:D,encoding:M}=C8(A,n),N=[...j,...y],I="raw"!==h?[]:D,R=N8(x,f,M,w);return{transform:[...null!==(r=u.transform)&&void 0!==r?r:[],...T,...E,...0===N.length?[]:[{aggregate:N,groupby:I}],...b],groupby:I,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:c,outerSpec:u,tooltipEncoding:R}}function n7(t,e,n,r,i,o,a,s){let u=[],c=[];const l=e.field;let h,f=!1;if("raw"===o){const e=t.center?t.center:t.extent?"iqr"===t.extent?"median":"mean":s.errorbar.center,n=t.extent?t.extent:"mean"===e?"stderr":"iqr";if("median"===e!==("iqr"===n)&&W3(v.errorBarCenterIsUsedWithWrongExtent(e,n,a)),"stderr"===n||"stdev"===n)u=[{op:n,field:l,as:"extent_"+l},{op:e,field:l,as:"center_"+l}],c=[{calculate:`datum["center_${l}"] + datum["extent_${l}"]`,as:"upper_"+l},{calculate:`datum["center_${l}"] - datum["extent_${l}"]`,as:"lower_"+l}],h=[{fieldPrefix:"center_",titlePrefix:iQ(e)},{fieldPrefix:"upper_",titlePrefix:r7(e,n,"+")},{fieldPrefix:"lower_",titlePrefix:r7(e,n,"-")}],f=!0;else{let e,r,i;t.center&&t.extent&&W3(v.errorBarCenterIsNotNeeded(t.extent,a)),"ci"===n?(e="mean",r="ci0",i="ci1"):(e="median",r="q1",i="q3"),u=[{op:r,field:l,as:"lower_"+l},{op:i,field:l,as:"upper_"+l},{op:e,field:l,as:"center_"+l}],h=[{fieldPrefix:"upper_",titlePrefix:W6({field:l,aggregate:i,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:W6({field:l,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:W6({field:l,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&W3(v.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),"aggregated-upper-lower"===o?(h=[],c=[{calculate:`datum["${n.field}"]`,as:"upper_"+l},{calculate:`datum["${l}"]`,as:"lower_"+l}]):"aggregated-error"===o&&(h=[{fieldPrefix:"",titlePrefix:l}],c=[{calculate:`datum["${l}"] + datum["${r.field}"]`,as:"upper_"+l}],i?c.push({calculate:`datum["${l}"] + datum["${i.field}"]`,as:"lower_"+l}):c.push({calculate:`datum["${l}"] - datum["${r.field}"]`,as:"lower_"+l}));for(const t of c)h.push({fieldPrefix:t.as.substring(0,6),titlePrefix:cQ(cQ(t.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:u,tooltipSummary:h,tooltipTitleWithFieldName:f}}function r7(t,e,n){return iQ(t)+" "+n+" "+e}const i7="errorband",o7=["band","borders"],a7=new o0(i7,s7);function s7(t,{config:e}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:u}=e7(t,i7,e),c=a,l=R8(c,i,r,o,e.errorband),h=void 0!==t.encoding.x&&void 0!==t.encoding.y;let f={type:h?"area":"rect"},d={type:h?"line":"rule"};const p=Object.assign(Object.assign({},c.interpolate?{interpolate:c.interpolate}:{}),c.tension&&c.interpolate?{tension:c.tension}:{});return h?(f=Object.assign(Object.assign(Object.assign({},f),p),{ariaRoleDescription:"errorband"}),d=Object.assign(Object.assign({},d),p)):c.interpolate?W3(v.errorBand1DNotSupport("interpolate")):c.tension&&W3(v.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},s),{transform:n,layer:[...l({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...l({partName:"borders",mark:d,positionPrefix:"lower",aria:!1,extraEncoding:u}),...l({partName:"borders",mark:d,positionPrefix:"upper",aria:!1,extraEncoding:u})]})}const u7={};function c7(t,e,n){const r=new o0(t,e);u7[t]={normalizer:r,parts:n}}function l7(){return ZJ(u7)}c7(z8,V8,B8),c7(G8,K8,X8),c7(i7,s7,o7);const h7=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],f7=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],d7={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},p7={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},g7={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},m7=(ZJ(g7),"_vgsid_"),v7={single:{on:"click",fields:[m7],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[m7],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function y7(t){return!!t&&("legend"===t||!!t.legend)}function b7(t){return y7(t)&&Object(rt["F"])(t)}function x7(t){return _7(t)||O7(t)||w7(t)}function w7(t){return"concat"in t}function _7(t){return"vconcat"in t}function O7(t){return"hconcat"in t}function S7(t){return Object(rt["F"])(t)&&void 0!==t["step"]}function C7(t){return t["view"]||t["width"]||t["height"]}const k7=20,A7={align:1,bounds:1,center:1,columns:1,spacing:1},T7=ZJ(A7);function E7(t,e,n){var r,i;const o=n[e],a={},{spacing:s,columns:u}=o;void 0!==s&&(a.spacing=s),void 0!==u&&(c6(t)&&!s6(t.facet)||w7(t))&&(a.columns=u),_7(t)&&(a.columns=1);for(const c of T7)if(void 0!==t[c])if("spacing"===c){const e=t[c];a[c]=Object(rt["E"])(e)?e:{row:null!==(r=e.row)&&void 0!==r?r:s,column:null!==(i=e.column)&&void 0!==i?i:s}}else a[c]=t[c];return a}function j7(t,e){var n;return null!==(n=t[e])&&void 0!==n?n:t["width"===e?"continuousWidth":"continuousHeight"]}function D7(t,e){const n=M7(t,e);return S7(n)?n.step:N7}function M7(t,e){var n;const r=null!==(n=t[e])&&void 0!==n?n:t["width"===e?"discreteWidth":"discreteHeight"];return fQ(r,{step:t.step})}const N7=20,I7={continuousWidth:200,continuousHeight:200,step:N7};const R7={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:I7,mark:ZQ,arc:{},area:{},bar:t0,circle:{},geoshape:{},image:{},line:{},point:{},rect:e0,rule:{color:"black"},square:{},text:{color:"black"},tick:n0,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:g4,projection:{},legend:p7,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:v7,style:{},title:{},facet:{spacing:k7},concat:{spacing:k7}},F7=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],P7={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},$7={blue:F7[0],orange:F7[1],red:F7[2],teal:F7[3],green:F7[4],yellow:F7[5],purple:F7[6],pink:F7[7],brown:F7[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function L7(t={}){return{signals:[{name:"color",value:Object(rt["F"])(t)?Object.assign(Object.assign({},$7),t):$7}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function z7(t){return{signals:[{name:"fontSize",value:Object(rt["F"])(t)?Object.assign(Object.assign({},P7),t):P7}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function B7(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function U7(t={}){const{color:e,font:n,fontSize:r}=t,i=wJ(t,["color","font","fontSize"]);return Object(rt["N"])({},R7,n?B7(n):{},e?L7(e):{},r?z7(r):{},i||{})}const W7=["view",...WQ],V7=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],H7=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},KQ);function q7(t){t=IJ(t);for(const e of V7)delete t[e];if(t.axis)for(const e in t.axis)xQ(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of h7)delete t.legend[e];if(t.mark){for(const e of YQ)delete t.mark[e];t.mark.tooltip&&Object(rt["F"])(t.mark.tooltip)&&delete t.mark.tooltip}for(const e of W7){for(const r of YQ)delete t[e][r];const n=H7[e];if(n)for(const r of n)delete t[e][r];X7(t,e)}for(const e of l7())delete t[e];G7(t);for(const e in t)Object(rt["F"])(t[e])&&KJ(t[e])&&delete t[e];return KJ(t)?void 0:t}function G7(t){const{titleMarkConfig:e,subtitleMarkConfig:n,subtitle:r}=u8(t.title);KJ(e)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),e)),KJ(n)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),n)),KJ(r)?delete t.title:t.title=r}function X7(t,e,n,r){const i=r?t[e][r]:t[e];"view"===e&&(n="cell");const o=Object.assign(Object.assign({},i),t.style[null!==n&&void 0!==n?n:e]);KJ(o)||(t.style[null!==n&&void 0!==n?n:e]=o),r||delete t[e]}function Y7(t){return"layer"in t}function K7(t){return"repeat"in t}function Z7(t){return!Object(rt["A"])(t.repeat)&&t.repeat["layer"]}class J7{map(t,e){return c6(t)?this.mapFacet(t,e):K7(t)?this.mapRepeat(t,e):O7(t)?this.mapHConcat(t,e):_7(t)?this.mapVConcat(t,e):w7(t)?this.mapConcat(t,e):this.mapLayerOrUnit(t,e)}mapLayerOrUnit(t,e){if(Y7(t))return this.mapLayer(t,e);if(i0(t))return this.mapUnit(t,e);throw new Error(v.invalidSpec(t))}mapLayer(t,e){return Object.assign(Object.assign({},t),{layer:t.layer.map(t=>this.mapLayerOrUnit(t,e))})}mapHConcat(t,e){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(t=>this.map(t,e))})}mapVConcat(t,e){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(t=>this.map(t,e))})}mapConcat(t,e){const{concat:n}=t,r=wJ(t,["concat"]);return Object.assign(Object.assign({},r),{concat:n.map(t=>this.map(t,e))})}mapFacet(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}mapRepeat(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}}const Q7={zero:1,center:1,normalize:1};function t9(t){return t in Q7}const e9=new Set([AQ,EQ,TQ,IQ,MQ,$Q,LQ,DQ,RQ,FQ]),n9=new Set([EQ,TQ,AQ]);function r9(t,e){var n,r;const i="x"===e?"y":"radius",o=t[e],a=t[i];if(x6(o)&&x6(a))if("quantitative"===w6(o)&&"quantitative"===w6(a)){if(o.stack)return e;if(a.stack)return i;const t=x6(o)&&!!o.aggregate,s=x6(a)&&!!a.aggregate;if(t!==s)return t?e:i;{const t=null===(n=o.scale)||void 0===n?void 0:n.type,s=null===(r=a.scale)||void 0===r?void 0:r.type;if(t&&"linear"!==t)return i;if(s&&"linear"!==s)return e}}else{if("quantitative"===w6(o))return e;if("quantitative"===w6(a))return i}else{if("quantitative"===w6(o))return e;if("quantitative"===w6(a))return i}}function i9(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function o9(t,e,n={}){const r=VQ(t)?t.type:t;if(!e9.has(r))return null;const i=r9(e,"x")||r9(e,"theta");if(!i)return null;const o=e[i],a=x6(o)?N6(o,{}):void 0;let s=i9(i),u=e[s],c=x6(u)?N6(u,{}):void 0;c===a&&(c=void 0,u=void 0,s=void 0);const l=z1.reduce((t,n)=>{if("tooltip"!==n&&O8(e,n)){const r=e[n];for(const e of Object(rt["i"])(r)){const r=X6(e);if(r.aggregate)continue;const i=N6(r,{});i&&i===c||t.push({channel:n,fieldDef:r})}}return t},[]);let h;if(void 0!==o.stack?h=Object(rt["B"])(o.stack)?o.stack?"zero":null:o.stack:l.length>0&&n9.has(r)&&(h="zero"),!h||!t9(h))return null;if(S8(e)&&0===l.length)return null;if(o.scale&&o.scale.type&&o.scale.type!==X5.LINEAR){if(n.disallowNonLinearStack)return null;W3(v.cannotStackNonLinearScale(o.scale.type))}return C6(e[S1(i)])?(void 0!==o.stack&&W3(v.cannotStackRangedMark(i)),null):(x6(o)&&o.aggregate&&!zJ(p0,o.aggregate)&&W3(v.stackNonSummativeAggregate(o.aggregate)),{groupbyChannel:u?s:void 0,groupbyField:c,fieldChannel:i,impute:null!==o.impute&&BQ(r),stackBy:l,offset:h})}function a9(t){const{point:e,line:n}=t,r=wJ(t,["point","line"]);return ZJ(r).length>1?r:r.type}function s9(t){for(const e of["line","area","rule","trail"])t[e]&&(t=Object.assign(Object.assign({},t),{[e]:FJ(t[e],["point","line"])}));return t}function u9(t,e={},n){return"transparent"===t.point?{opacity:0}:t.point?Object(rt["F"])(t.point)?t.point:{}:void 0!==t.point?null:e.point||n.shape?Object(rt["F"])(e.point)?e.point:{}:void 0}function c9(t,e={}){return t.line?!0===t.line?{}:t.line:void 0!==t.line?null:e.line?!0===e.line?{}:e.line:void 0}class l9{constructor(){this.name="path-overlay"}hasMatchingType(t,e){if(i0(t)){const{mark:n,encoding:r}=t,i=VQ(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!u9(i,e[i.type],r);case"area":return!!u9(i,e[i.type],r)||!!c9(i,e[i.type])}}return!1}run(t,e,n){const{config:r}=e,{selection:i,projection:o,encoding:a,mark:s}=t,u=wJ(t,["selection","projection","encoding","mark"]),c=VQ(s)?s:{type:s},l=u9(c,r[c.type],a),h="area"===c.type&&c9(c,r[c.type]),f=[Object.assign(Object.assign({},i?{selection:i}:{}),{mark:a9(Object.assign(Object.assign({},"area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{}),c)),encoding:FJ(a,["shape"])})],d=o9(c,a);let p=a;if(d){const{fieldChannel:t,offset:e}=d;p=Object.assign(Object.assign({},a),{[t]:Object.assign(Object.assign({},a[t]),e?{stack:e}:{})})}return h&&f.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"line"},RJ(c,["clip","interpolate","tension","tooltip"])),h),encoding:p})),l&&f.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},RJ(c,["clip","tooltip"])),l),encoding:p})),n(Object.assign(Object.assign({},u),{layer:f}),Object.assign(Object.assign({},e),{config:s9(r)}))}}class h9{constructor(){this.name="RangeStep"}hasMatchingType(t){var e;if(i0(t)&&t.encoding)for(const n of U1){const r=t.encoding[n];if(r&&C6(r)&&(null===(e=null===r||void 0===r?void 0:r.scale)||void 0===e?void 0:e["rangeStep"]))return!0}return!1}run(t){var e;const n={};let r=Object.assign({},t.encoding);for(const i of U1){const t=C1(i),o=r[i];if(o&&C6(o)&&(null===(e=null===o||void 0===o?void 0:o.scale)||void 0===e?void 0:e["rangeStep"])){const{scale:e}=o,a=wJ(o,["scale"]),s=e,{rangeStep:u}=s,c=wJ(s,["rangeStep"]);n[t]={step:e["rangeStep"]},W3(v.RANGE_STEP_DEPRECATED),r=Object.assign(Object.assign({},r),{[i]:Object.assign(Object.assign({},a),KJ(c)?{}:{scale:c})})}}return Object.assign(Object.assign(Object.assign({},n),t),{encoding:r})}}function f9(t,e){return e?s6(t)?y9(t,e):g9(t,e):t}function d9(t,e){return e?y9(t,e):t}function p9(t,e,n){const r=e[t];return h6(r)?r.repeat in n?Object.assign(Object.assign({},e),{[t]:n[r.repeat]}):void W3(v.noSuchRepeatedValue(r.repeat)):e}function g9(t,e){if(t=p9("field",t,e),void 0!==t){if(null===t)return null;if(d6(t)&&o6(t.sort)){const n=p9("field",t.sort,e);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function m9(t,e){if(x6(t))return g9(t,e);{const n=p9("datum",t,e);return n===t||n.type||(n.type="nominal"),n}}function v9(t,e){if(!C6(t)){if(y6(t)){const n=m9(t.condition,e);if(n)return Object.assign(Object.assign({},t),{condition:n});{const{condition:e}=t,n=wJ(t,["condition"]);return n}}return t}{const n=m9(t,e);if(n)return n;if(m6(t))return{condition:t.condition}}}function y9(t,e){const n={};for(const r in t)if(Object(rt["v"])(t,r)){const i=t[r];if(Object(rt["A"])(i))n[r]=i.map(t=>v9(t,e)).filter(t=>t);else{const t=v9(i,e);void 0!==t&&(n[r]=t)}}return n}class b9{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(i0(t)){const{encoding:e,mark:n}=t;if("line"===n)for(const t of x1){const n=_1(t),r=e[n];if(e[t]&&(x6(r)&&!m2(r.bin)||_6(r)))return!0}}return!1}run(t,e,n){const{encoding:r}=t;return W3(v.lineWithRange(!!r.x2,!!r.y2)),n(Object.assign(Object.assign({},t),{mark:"rule"}),e)}}class x9 extends J7{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[U8,Y8,a7,new l9,new b9,new h9]}map(t,e){if(i0(t)){const n=O8(t.encoding,v0),r=O8(t.encoding,y0),i=O8(t.encoding,b0);if(n||r||i)return this.mapFacetedUnit(t,e)}return super.map(t,e)}mapUnit(t,e){const{parentEncoding:n,parentProjection:r}=e,i=Object.assign(Object.assign({},t),{encoding:d9(t.encoding,e.repeater)});if(n||r)return this.mapUnitWithParentEncodingOrProjection(i,e);const o=this.mapLayerOrUnit.bind(this);for(const a of this.nonFacetUnitNormalizers)if(a.hasMatchingType(i,e.config))return a.run(i,e,o);return i}mapRepeat(t,e){return Z7(t)?this.mapLayerRepeat(t,e):this.mapNonLayerRepeat(t,e)}mapLayerRepeat(t,e){const{repeat:n,spec:r}=t,i=wJ(t,["repeat","spec"]),{row:o,column:a,layer:s}=n,{repeater:u={},repeaterPrefix:c=""}=e;return o||a?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),a?{column:a}:{}),spec:{repeat:{layer:s},spec:r}}),e):Object.assign(Object.assign({},i),{layer:s.map(t=>{const n=Object.assign(Object.assign({},u),{layer:t}),i=(r.name||"")+c+"child__layer_"+eQ(t),o=this.mapLayerOrUnit(r,Object.assign(Object.assign({},e),{repeater:n,repeaterPrefix:i}));return o.name=i,o})})}mapNonLayerRepeat(t,e){var n;const{repeat:r,spec:i,data:o}=t,a=wJ(t,["repeat","spec","data"]);!Object(rt["A"])(r)&&t.columns&&(t=FJ(t,["columns"]),W3(v.columnsNotSupportByRowCol("repeat")));const s=[],{repeater:u={},repeaterPrefix:c=""}=e,l=!Object(rt["A"])(r)&&r.row||[u?u.row:null],h=!Object(rt["A"])(r)&&r.column||[u?u.column:null],f=Object(rt["A"])(r)&&r||[u?u.repeat:null];for(const p of f)for(const t of l)for(const n of h){const o={repeat:p,row:t,column:n,layer:u.layer},a=(i.name||"")+c+"child__"+(Object(rt["A"])(r)?""+eQ(p):(r.row?"row_"+eQ(t):"")+(r.column?"column_"+eQ(n):"")),l=this.map(i,Object.assign(Object.assign({},e),{repeater:o,repeaterPrefix:a}));l.name=a,s.push(FJ(l,["data"]))}const d=Object(rt["A"])(r)?t.columns:r.column?r.column.length:1;return Object.assign(Object.assign({data:null!==(n=i.data)&&void 0!==n?n:o,align:"all"},a),{columns:d,concat:s})}mapFacet(t,e){const{facet:n}=t;return s6(n)&&t.columns&&(t=FJ(t,["columns"]),W3(v.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,e)}mapUnitWithParentEncodingOrProjection(t,e){const{encoding:n,projection:r}=t,{parentEncoding:i,parentProjection:o,config:a}=e,s=_9({parentProjection:o,projection:r}),u=w9({parentEncoding:i,encoding:d9(n,e.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),s?{projection:s}:{}),u?{encoding:u}:{}),{config:a})}mapFacetedUnit(t,e){const n=t.encoding,{row:r,column:i,facet:o}=n,a=wJ(n,["row","column","facet"]),{mark:s,width:u,projection:c,height:l,view:h,selection:f,encoding:d}=t,p=wJ(t,["mark","width","projection","height","view","selection","encoding"]),{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},e),v=d9(a,e.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},p),m),{facet:g,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{width:u}:{}),l?{height:l}:{}),h?{view:h}:{}),c?{projection:c}:{}),{mark:s,encoding:v}),f?{selection:f}:{})}),e)}getFacetMappingAndLayout(t,e){var n;const{row:r,column:i,facet:o}=t;if(r||i){o&&W3(v.facetChannelDropped([...r?[v0]:[],...i?[y0]:[]]));const e={},a={};for(const r of[v0,y0]){const i=t[r];if(i){const{align:t,center:o,spacing:s,columns:u}=i,c=wJ(i,["align","center","spacing","columns"]);e[r]=c;for(const e of["align","center","spacing"])void 0!==i[e]&&(a[e]=null!==(n=a[e])&&void 0!==n?n:{},a[e][r]=i[e])}}return{facetMapping:e,layout:a}}{const{align:t,center:n,spacing:r,columns:i}=o,a=wJ(o,["align","center","spacing","columns"]);return{facetMapping:f9(a,e.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},t?{align:t}:{}),n?{center:n}:{}),r?{spacing:r}:{}),i?{columns:i}:{})}}}mapLayer(t,e){var{parentEncoding:n,parentProjection:r}=e,i=wJ(e,["parentEncoding","parentProjection"]);const{encoding:o,projection:a}=t,s=wJ(t,["encoding","projection"]),u=Object.assign(Object.assign({},i),{parentEncoding:w9({parentEncoding:n,encoding:o}),parentProjection:_9({parentProjection:r,projection:a})});return super.mapLayer(s,u)}}function w9(t){const{parentEncoding:e,encoding:n}=t;if(e&&n){const t=ZJ(e).reduce((t,e)=>(n[e]&&t.push(e),t),[]);t.length>0&&W3(v.encodingOverridden(t))}const r=Object.assign(Object.assign({},null!==e&&void 0!==e?e:{}),null!==n&&void 0!==n?n:{});return KJ(r)?void 0:r}function _9(t){const{parentProjection:e,projection:n}=t;return e&&n&&W3(v.projectionOverridden({parentProjection:e,projection:n})),null!==n&&void 0!==n?n:e}function O9(t,e){void 0===e&&(e=U7(t.config));const n=C9(t,e),{width:r,height:i}=t,o=A9(n,{width:r,height:i,autosize:t.autosize},e);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const S9=new x9;function C9(t,e={}){return S9.map(t,{config:e})}function k9(t){return Object(rt["H"])(t)?{type:t}:null!==t&&void 0!==t?t:{}}function A9(t,e,n){let{width:r,height:i}=e;const o=i0(t)||Y7(t),a={};o?"container"==r&&"container"==i?(a.type="fit",a.contains="padding"):"container"==r?(a.type="fit-x",a.contains="padding"):"container"==i&&(a.type="fit-y",a.contains="padding"):("container"==r&&(W3(v.containerSizeNonSingle("width")),r=void 0),"container"==i&&(W3(v.containerSizeNonSingle("height")),i=void 0));const s=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?k9(n.autosize):{}),k9(t.autosize));if("fit"!==s.type||o||(W3(v.FIT_NON_SINGLE),s.type="pad"),"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&W3(v.containerSizeNotCompatibleWithAutosize("width")),"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&W3(v.containerSizeNotCompatibleWithAutosize("height")),!NJ(s,{type:"pad"}))return s}function T9(t){return"fit"===t||"fit-x"===t||"fit-y"===t}function E9(t){return t?"fit-"+q1(t):"fit"}const j9=["background","padding"];function D9(t){return j9.reduce((e,n)=>(t&&void 0!==t[n]&&(e[n]=t[n]),e),{})}class M9{constructor(t={},e={}){this.explicit=t,this.implicit=e}clone(){return new M9(IJ(this.explicit),IJ(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return fQ(this.explicit[t],this.implicit[t])}getWithExplicit(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,e){void 0!==e.value&&this.set(t,e.value,e.explicit)}set(t,e,n){return delete this[n?"implicit":"explicit"][t],this[n?"explicit":"implicit"][t]=e,this}copyKeyFromSplit(t,e){void 0!==e.explicit[t]?this.set(t,e.explicit[t],!0):void 0!==e.implicit[t]&&this.set(t,e.implicit[t],!1)}copyKeyFromObject(t,e){void 0!==e[t]&&this.set(t,e[t],!0)}copyAll(t){for(const e of ZJ(t.combine())){const n=t.getWithExplicit(e);this.setWithExplicit(e,n)}}}function N9(t){return{explicit:!0,value:t}}function I9(t){return{explicit:!1,value:t}}function R9(t){return(e,n,r,i)=>{const o=t(e.value,n.value);return o>0?e:o<0?n:F9(e,n,r,i)}}function F9(t,e,n,r){return t.explicit&&e.explicit&&W3(v.mergeConflictingProperty(n,r,t.value,e.value)),t}function P9(t,e,n,r,i=F9){return void 0===t||void 0===t.value?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:NJ(t.value,e.value)?t:i(t,e,n,r)}class $9 extends M9{constructor(t={},e={},n=!1){super(t,e),this.explicit=t,this.implicit=e,this.parseNothing=n}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function L9(t){return"url"in t}function z9(t){return"values"in t}function B9(t){return"name"in t&&!L9(t)&&!z9(t)&&!U9(t)}function U9(t){return t&&(W9(t)||V9(t)||H9(t))}function W9(t){return"sequence"in t}function V9(t){return"sphere"in t}function H9(t){return"graticule"in t}const q9="main",G9="raw";function X9(t){return"filter"in t}function Y9(t){return void 0!==(null===t||void 0===t?void 0:t["stop"])}function K9(t){return"lookup"in t}function Z9(t){return"data"in t}function J9(t){return"selection"in t}function Q9(t){return"pivot"in t}function ttt(t){return"density"in t}function ett(t){return"quantile"in t}function ntt(t){return"regression"in t}function rtt(t){return"loess"in t}function itt(t){return"sample"in t}function ott(t){return"window"in t}function att(t){return"joinaggregate"in t}function stt(t){return"flatten"in t}function utt(t){return"calculate"in t}function ctt(t){return"bin"in t}function ltt(t){return"impute"in t}function htt(t){return"timeUnit"in t}function ftt(t){return"aggregate"in t}function dtt(t){return"stack"in t}function ptt(t){return"fold"in t}function gtt(t){return t.map(t=>X9(t)?{filter:MJ(t.filter,L5)}:t)}function mtt(t,e,n,r){const i=m6(e)&&e.condition,o=r(e);if(i){const e=Object(rt["i"])(i),a=e.map(e=>{const n=r(e),i=l6(e)?vnt(t,e.selection):xnt(t,e.test);return Object.assign({test:i},n)});return{[n]:[...a,...void 0!==o?[o]:[]]}}return void 0!==o?{[n]:o}:{}}function vtt(t,e="text"){const n=t.encoding[e];return mtt(t,n,e,e=>ytt(e,t.config))}function ytt(t,e,n="datum"){if(t){if(A6(t))return l8(t.value);if(C6(t)){const{format:r,formatType:i}=q6(t);return V4({fieldOrDatumDef:t,format:r,formatType:i,expr:n,config:e})}}}function btt(t,e={}){const{encoding:n,markDef:r,config:i,stack:o}=t,a=n.tooltip;if(Object(rt["A"])(a))return{tooltip:wtt({tooltip:a},o,i,e)};{const s=e.reactiveGeom?"datum.datum":"datum";return mtt(t,a,"tooltip",t=>{const a=ytt(t,i,s);if(a)return a;if(null===t)return;let u=g8("tooltip",r,i);return!0===u&&(u={content:"encoding"}),Object(rt["H"])(u)?{value:u}:Object(rt["F"])(u)?"encoding"===u.content?wtt(n,o,i,e):{signal:s}:void 0})}}function xtt(t,e,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",a=[];function s(r,s){const u=_1(s),c=k6(r)?r:Object.assign(Object.assign({},r),{type:t[u].type}),l=Object(rt["i"])(W6(c,n,{allowDisabling:!1})).join(", ");let h;if(W1(s)){const r="x"===s?"x2":"y2",a=X6(t[r]);if(m2(c.bin)&&a){const t=N6(c,{expr:o}),e=N6(a,{expr:o}),{format:s,formatType:u}=q6(c);h=Q4(t,e,s,u,n),i[r]=!0}else if(e&&e.fieldChannel===s&&"normalize"===e.offset){const{format:t,formatType:e}=q6(c);h=V4({fieldOrDatumDef:c,format:t,formatType:e,expr:o,config:n,normalizeStack:!0}).signal}}h=null!==h&&void 0!==h?h:ytt(c,n,o).signal,a.push({channel:s,key:l,value:h})}E8(t,(t,e)=>{x6(t)?s(t,e):v6(t)&&s(t.condition,e)});const u={};for(const{channel:c,key:l,value:h}of a)i[c]||u[l]||(u[Object(rt["Z"])(l)]=h);return u}function wtt(t,e,n,{reactiveGeom:r}={}){const i=xtt(t,e,n,{reactiveGeom:r}),o=QJ(i).map(({key:t,value:e})=>`${t}: ${e}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function _tt(t){const{markDef:e,config:n}=t,r=g8("aria",e,n);return!1===r?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),Ott(t)),Stt(t))}function Ott(t){const{mark:e,markDef:n,config:r}=t;if(!1===r.aria)return{};const i=g8("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:e in O5?{}:{ariaRoleDescription:{value:e}}}function Stt(t){const{encoding:e,markDef:n,config:r,stack:i}=t,o=e.description;if(o)return mtt(t,o,"description",e=>ytt(e,t.config));const a=g8("description",n,r);if(null!=a)return{description:l8(a)};if(!1===r.aria)return{};const s=xtt(e,i,r);return KJ(s)?void 0:{description:{signal:QJ(s).map(({key:t,value:e})=>`${t} + ": " + (${e})`).join(' + "; " + ')}}}function Ctt(t,e,n={}){const{markDef:r,encoding:i,config:o}=e,{vgChannel:a}=n;let{defaultRef:s,defaultValue:u}=n;void 0===s&&(u=null!==u&&void 0!==u?u:g8(t,r,o,{vgChannel:a,ignoreVgConfig:!0}),void 0!==u&&(s=l8(u)));const c=i[t];return mtt(e,c,null!==a&&void 0!==a?a:t,n=>L4({channel:t,channelDef:n,markDef:r,config:o,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:s}))}function ktt(t,e={filled:void 0}){var n,r,i,o;const{markDef:a,encoding:s,config:u}=t,{type:c}=a,l=null!==(n=e.filled)&&void 0!==n?n:g8("filled",a,u),h=zJ(["bar","point","circle","square","geoshape"],c)?"transparent":void 0,f=null!==(i=null!==(r=g8(!0===l?"color":void 0,a,u,{vgChannel:"fill"}))&&void 0!==r?r:u.mark[!0===l&&"color"])&&void 0!==i?i:h,d=null!==(o=g8(!1===l?"color":void 0,a,u,{vgChannel:"stroke"}))&&void 0!==o?o:u.mark[!1===l&&"color"],p=l?"fill":"stroke",g=Object.assign(Object.assign({},f?{fill:l8(f)}:{}),d?{stroke:l8(d)}:{});return a.color&&(l?a.fill:a.stroke)&&W3(v.droppingColor("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},g),Ctt("color",t,{vgChannel:p,defaultValue:l?f:d})),Ctt("fill",t,{defaultValue:s.fill?f:void 0})),Ctt("stroke",t,{defaultValue:s.stroke?d:void 0}))}function Att(t,e){const n=k1(t),r=e[n];if(r)return r}function Ttt(t,e,{defaultPos:n,vgChannel:r,isMidPoint:i}){const{encoding:o,markDef:a,config:s,stack:u}=e,c=o[t],l=o[S1(t)],h=e.scaleName(t),f=e.getScaleComponent(t),d=Att(t,a),p=jtt({model:e,defaultPos:n,channel:t,scaleName:h,scale:f}),g=!c&&W1(t)&&(o.latitude||o.longitude)?{field:e.getName(t)}:Ett({channel:t,channelDef:c,channel2Def:l,markDef:a,config:s,isMidPoint:i,scaleName:h,scale:f,stack:u,offset:d,defaultRef:p});return g?{[r||t]:g}:void 0}function Ett(t){const{channel:e,channelDef:n,isMidPoint:r,scaleName:i,stack:o,offset:a,markDef:s,config:u}=t;if(C6(n)&&o&&e===o.fieldChannel){if(x6(n)){const t=p6({channel:e,fieldDef:n,isMidPoint:r,markDef:s,stack:o,config:u});if(void 0!==t)return $4({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:t,offset:a})}return P4(n,i,{suffix:"end"},{offset:a})}return M4(t)}function jtt({model:t,defaultPos:e,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=t;return()=>{const s=_1(n),u=O1(n),c=g8(n,o,a,{vgChannel:u});if(void 0!==c)return z4(n,c);switch(e){case"zeroOrMin":case"zeroOrMax":if(r){const t=i.get("type");if(zJ([X5.LOG,X5.TIME,X5.UTC],t));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===e)return"y"===s?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const e=t[C1(n)];return Object.assign(Object.assign({},e),{mult:.5})}}}}const Dtt={left:"x",center:"xc",right:"x2"},Mtt={top:"y",middle:"yc",bottom:"y2"};function Ntt(t,e,n,r="middle"){if("radius"===t||"theta"===t)return O1(t);const i="x"===t?"align":"baseline",o=g8(i,e,n);return"x"===t?Dtt[o||("top"===r?"left":"center")]:Mtt[o||r]}function Itt(t,e,{defaultPos:n,defaultPos2:r,range:i}){return i?Rtt(t,e,{defaultPos:n,defaultPos2:r}):Ttt(t,e,{defaultPos:n})}function Rtt(t,e,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=e,a=S1(t),s=C1(t),u=Ftt(e,r,a),c=u[s]?Ntt(t,i,o):O1(t);return Object.assign(Object.assign({},Ttt(t,e,{defaultPos:n,vgChannel:c})),u)}function Ftt(t,e,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=t,u=_1(n),c=C1(n),l=O1(n),h=r[u],f=t.scaleName(u),d=t.getScaleComponent(u),p=Att(n in r||n in o?n:u,t.markDef);if(!h&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude))return{[l]:{field:t.getName(n)}};const g=Ptt({channel:n,channelDef:h,channel2Def:r[n],markDef:o,config:s,scaleName:f,scale:d,stack:a,offset:p,defaultRef:void 0});return void 0!==g?{[l]:g}:$tt(n,o)||$tt(n,{[n]:v8(n,o,s.style),[c]:v8(c,o,s.style)})||$tt(n,s[i])||$tt(n,s.mark)||{[l]:jtt({model:t,defaultPos:e,channel:n,scaleName:f,scale:d})()}}function Ptt({channel:t,channelDef:e,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:c}){return C6(e)&&s&&t.charAt(0)===s.fieldChannel.charAt(0)?P4(e,o,{suffix:"start"},{offset:u}):M4({channel:t,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:u,defaultRef:c})}function $tt(t,e){const n=C1(t),r=O1(t);return void 0!==e[r]?{[r]:z4(t,e[r])}:void 0!==e[t]?{[r]:z4(t,e[t])}:e[n]?{[n]:z4(t,e[n])}:void 0}function Ltt(t,e,n){var r,i,o,a;const{config:s,encoding:u,markDef:c,stack:l}=t,h=S1(e),f=C1(e),d=u[e],p=u[h],g=t.getScaleComponent(e),m=g?g.get("type"):void 0,v=t.scaleName(e),y=c.orient,b=null!==(i=null!==(r=u[f])&&void 0!==r?r:u.size)&&void 0!==i?i:g8("size",c,s,{vgChannel:f}),x="bar"===n&&("x"===e?"vertical"===y:"horizontal"===y);if(x6(d)&&(g2(d.bin)||m2(d.bin)||d.timeUnit&&!p)&&!b&&!h4(m)){const n=p6({channel:e,fieldDef:d,stack:l,markDef:c,config:s}),r=null===(o=t.component.axes[e])||void 0===o?void 0:o[0],i=null!==(a=null===r||void 0===r?void 0:r.get("translate"))&&void 0!==a?a:.5;return Wtt({fieldDef:d,fieldDef2:p,channel:e,markDef:c,scaleName:v,band:n,axisTranslate:i,spacing:W1(e)?g8("binSpacing",c,s):void 0,reverse:g.get("reverse"),config:s})}return(C6(d)&&h4(m)||x)&&!p?Btt(n,d,e,t):Rtt(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function ztt(t,e,n,r,i,o){if(r){const e=r.get("type");if("point"===e||"band"===e){if(void 0!==i[t].discreteBandSize)return{value:i[t].discreteBandSize};if(e===X5.POINT){const t=r.get("range");return v5(t)&&Object(rt["E"])(t.step)?{value:t.step-2}:{value:N7-2}}return{scale:n,band:o}}return{value:i[t].continuousBandSize}}const a=D7(i.view,e),s=fQ(i[t].discreteBandSize,a-2);return void 0!==s?{value:s}:void 0}function Btt(t,e,n,r){var i;const{markDef:o,encoding:a,config:s,stack:u}=r,c=o.orient,l=r.scaleName(n),h=r.getScaleComponent(n),f=C1(n),d=S1(n),p="horizontal"===c&&"y"===n||"vertical"===c&&"x"===n,g=g8(p?"size":f,o,s,{vgChannel:f});let m;(a.size||void 0!==g)&&(p?m=Ctt("size",r,{vgChannel:f,defaultValue:g}):W3(v.cannotApplySizeToNonOrientedMark(o.type)));const y=null!==(i=C6(e)?p6({channel:n,fieldDef:e,markDef:o,stack:u,config:s}):void 0)&&void 0!==i?i:1;m=m||{[f]:ztt(t,f,l,h,s,y)};const b="band"!==(null===h||void 0===h?void 0:h.get("type"))||!("band"in m[f]),x=Ntt(n,o,s,b?"middle":"top"),w=Att(n,o),_=M4({channel:n,channelDef:e,markDef:o,config:s,scaleName:l,scale:h,stack:u,offset:w,defaultRef:jtt({model:r,defaultPos:"mid",channel:n,scaleName:l,scale:h}),band:b?.5:(1-y)/2});if(f)return Object.assign({[x]:_},m);{const t=O1(d),e=m[f],n=w?Object.assign(Object.assign({},e),{offset:w}):e;return{[x]:_,[t]:Object(rt["A"])(_)?[_[0],Object.assign(Object.assign({},_[1]),{offset:n})]:Object.assign(Object.assign({},_),{offset:n})}}}function Utt(t,e,n,r,i){if(Q0(t))return 0;const o="x"===t||"y2"===t?-e/2:e/2;if(m5(n)){const t=f8(i);return{signal:`${n.signal} ? ${r-o}${t?"-"+t:""} : ${r+o}${t?"+"+t:""}`}}if(m5(i)){const t=r+(n?-o:o);return{signal:`${t||""}${n?" - ":t?" + ":""}${i.signal}`}}return i=i||0,r+(n?-i-o:+i+o)}function Wtt({fieldDef:t,fieldDef2:e,channel:n,band:r,scaleName:i,markDef:o,spacing:a=0,axisTranslate:s,reverse:u,config:c}){const l=S1(n),h=O1(n),f=O1(l),d=Att(n,o);if(g2(t.bin)||t.timeUnit)return{[f]:Vtt({channel:n,fieldDef:t,scaleName:i,markDef:o,band:(1-r)/2,offset:Utt(l,a,u,s,d),config:c}),[h]:Vtt({channel:n,fieldDef:t,scaleName:i,markDef:o,band:1-(1-r)/2,offset:Utt(n,a,u,s,d),config:c})};if(m2(t.bin)){const r=P4(t,i,{},{offset:Utt(l,a,u,s,d)});if(x6(e))return{[f]:r,[h]:P4(e,i,{},{offset:Utt(n,a,u,s,d)})};if(v2(t.bin)&&t.bin.step)return{[f]:r,[h]:{signal:`scale("${i}", ${N6(t,{expr:"datum"})} + ${t.bin.step})`,offset:Utt(n,a,u,s,d)}}}W3(v.channelRequiredForBinned(l))}function Vtt({channel:t,fieldDef:e,scaleName:n,markDef:r,band:i,offset:o,config:a}){const s=$4({scaleName:n,fieldOrDatumDef:e,band:i,offset:o});return N4({fieldDef:e,channel:t,markDef:r,ref:s,config:a})}const Htt=new Set(["aria"]);function qtt(t,e){const{fill:n,stroke:r}="include"===e.color?ktt(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Xtt(t.markDef,e)),Gtt(t,"fill",n)),Gtt(t,"stroke",r)),Ctt("opacity",t)),Ctt("fillOpacity",t)),Ctt("strokeOpacity",t)),Ctt("strokeWidth",t)),Ctt("strokeDash",t)),btt(t)),vtt(t,"href")),_tt(t))}function Gtt(t,e,n){const{config:r,mark:i,markDef:o}=t,a=g8("invalid",o,r);if("hide"===a&&n&&!BQ(i)){const r=Ytt(t,{invalid:!0,channels:a2});if(r)return{[e]:[{test:r,value:null},...Object(rt["i"])(n)]}}return n?{[e]:n}:{}}function Xtt(t,e){return _5.reduce((n,r)=>(Htt.has(r)||void 0===t[r]||"ignore"===e[r]||(n[r]=l8(t[r])),n),{})}function Ytt(t,{invalid:e=!1,channels:n}){const r=n.reduce((e,n)=>{const r=t.getScaleComponent(n);if(r){const i=r.get("type"),o=t.vgField(n,{expr:"datum"});o&&f4(i)&&(e[o]=!0)}return e},{}),i=ZJ(r);if(i.length>0){const t=e?"||":"&&";return i.map(t=>R4(t,e)).join(` ${t} `)}}function Ktt(t){const{config:e,markDef:n}=t,r=g8("invalid",n,e);if(r){const e=Ztt(t,{channels:U1});if(e)return{defined:{signal:e}}}return{}}function Ztt(t,{invalid:e=!1,channels:n}){const r=n.reduce((e,n)=>{const r=t.getScaleComponent(n);if(r){const i=r.get("type"),o=t.vgField(n,{expr:"datum"});o&&f4(i)&&(e[o]=!0)}return e},{}),i=ZJ(r);if(i.length>0){const t=e?"||":"&&";return i.map(t=>R4(t,e)).join(` ${t} `)}}function Jtt(t,e){if(void 0!==e)return{[t]:l8(e)}}const Qtt="voronoi",tet={has:t=>"interval"!==t.type&&t.nearest,parse:(t,e)=>{if(e.events)for(const n of e.events)n.markname=t.getName(Qtt)},marks:(t,e,n)=>{const{x:r,y:i}=e.project.hasChannel,o=t.mark;if(BQ(o))return W3(v.nearestNotSupportForContinuous(o)),n;const a={name:t.getName(Qtt),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},btt(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let s=0,u=!1;return n.forEach((e,n)=>{var r;const i=null!==(r=e.name)&&void 0!==r?r:"";i===t.component.mark[0].name?s=n:i.indexOf(Qtt)>=0&&(u=!0)}),u||n.splice(s+1,0,a),n}};var eet=tet;class net{constructor(t,e){this.debugName=e,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,e){this._children.indexOf(t)>-1?console.warn("Attempt to add the same child twice."):void 0!==e?this._children.splice(e,0,t):this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);return this._children.splice(e,1),e}remove(){let t=this._parent.removeChild(this);for(const e of this._children)e._parent=this._parent,this._parent.addChild(e,t++)}insertAsParentOf(t){const e=t.parent;e.removeChild(this),this.parent=e,t.parent=this}swapWithParent(){const t=this._parent,e=t.parent;for(const n of this._children)n.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=e,t.parent=this}}class ret extends net{constructor(t,e,n,r){super(t,e),this.type=n,this.refCounts=r,this._source=this._name=e,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName="clone_"+this.debugName,t._source=this._source,t._name="clone_"+this._name,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash="Output "+pQ()),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}class iet extends net{constructor(t,e){super(t),this.formula=e}clone(){return new iet(null,IJ(this.formula))}static makeFromEncoding(t,e){const n=e.reduceFieldDef((t,n,r)=>{const{field:i,timeUnit:o}=n,a=uat(e)?e.encoding[S1(r)]:void 0,s=uat(e)&&g6(r,n,a,e.stack,e.markDef,e.config);if(o){const e=N6(n,{forAs:!0});t[$J({as:e,field:i,timeUnit:o})]=Object.assign({as:e,field:i,timeUnit:o},s?{band:!0}:{})}return t},{});return KJ(n)?null:new iet(t,n)}static makeFromTransform(t,e){const n=Object.assign({},e),{timeUnit:r}=n,i=wJ(n,["timeUnit"]),o=p5(r),a=Object.assign(Object.assign({},i),{timeUnit:o});return new iet(t,{[$J(a)]:a})}merge(t){this.formula=Object.assign({},this.formula);for(const e in t.formula)this.formula[e]&&!t.formula[e].band||(this.formula[e]=t.formula[e]);for(const e of t.children)t.removeChild(e),e.parent=this;t.remove()}producedFields(){return new Set(JJ(this.formula).map(t=>t.as))}dependentFields(){return new Set(JJ(this.formula).map(t=>t.field))}hash(){return"TimeUnit "+$J(this.formula)}assemble(){const t=[];for(const e of JJ(this.formula)){const{field:n,as:r,timeUnit:i}=e,o=p5(i),{unit:a,utc:s}=o,u=wJ(o,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:uQ(n),type:"timeunit"},a?{units:c5(a)}:{}),s?{timezone:"utc"}:{}),u),{as:[r,r+"_end"]}))}return t}}const oet="_tuple_fields";class aet{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}const set={has:()=>!0,parse:(t,e,n)=>{var r,i,o;const a=e.name,s=null!==(r=e.project)&&void 0!==r?r:e.project=new aet,u={},c={},l=new Set,h=(t,e)=>{const n="visual"===e?t.channel:t.field;let r=eQ(`${a}_${n}`);for(let i=1;l.has(r);i++)r=eQ(`${a}_${n}_${i}`);return l.add(r),{[e]:r}};if(!n.fields&&!n.encodings){const e=t.config.selection[n.type];if(n.init)for(const t of Object(rt["i"])(n.init))for(const r of ZJ(t))y1(r)?(n.encodings||(n.encodings=[])).push(r):"interval"===n.type?(W3('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=e.encodings):(n.fields||(n.fields=[])).push(r);else n.encodings=e.encodings,n.fields=e.fields}for(const f of null!==(i=n.fields)&&void 0!==i?i:[]){const t={type:"E",field:f};t.signals=Object.assign({},h(t,"data")),s.items.push(t),s.hasField[f]=t}for(const f of null!==(o=n.encodings)&&void 0!==o?o:[]){const n=t.fieldDef(f);if(n){let r=n.field;if(n.aggregate){W3(v.cannotProjectAggregate(f,n.aggregate));continue}if(!r){W3(v.cannotProjectOnChannelWithoutField(f));continue}if(n.timeUnit){r=t.vgField(f);const e={timeUnit:n.timeUnit,as:r,field:n.field};c[$J(e)]=e}if(!u[r]){let i="E";if("interval"===e.type){const e=t.getScaleComponent(f).get("type");f4(e)&&(i="R")}else n.bin&&(i="R-RE");const o={field:r,channel:f,type:i};o.signals=Object.assign(Object.assign({},h(o,"data")),h(o,"visual")),s.items.push(u[r]=o),s.hasField[r]=s.hasChannel[f]=u[r]}}else W3(v.cannotProjectOnChannelWithoutField(f))}if(n.init){const t=t=>s.items.map(e=>void 0!==t[e.channel]?t[e.channel]:t[e.field]);if("interval"===n.type)e.init=t(n.init);else{const r=Object(rt["i"])(n.init);e.init=r.map(t)}}KJ(c)||(s.timeUnit=new iet(null,c))},signals:(t,e,n)=>{const r=e.name+oet,i=n.filter(t=>t.name===r);return i.length>0?n:n.concat({name:r,value:e.project.items.map(t=>{const{signals:e,hasLegend:n}=t,r=wJ(t,["signals","hasLegend"]);return r.field=uQ(r.field),r})})}};var uet=set;const cet={has:t=>"single"===t.type&&"global"===t.resolve&&t.bind&&"scales"!==t.bind&&!y7(t.bind),parse:(t,e,n,r)=>{r.on||delete e.events,r.clear||delete e.clear},topLevelSignals:(t,e,n)=>{const r=e.name,i=e.project,o=e.bind,a=e.init&&e.init[0],s=eet.has(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((t,i)=>{var u,c;const l=eQ(`${r}_${t.field}`),h=n.filter(t=>t.name===l);h.length||n.unshift(Object.assign(Object.assign({name:l},a?{init:Pet(a[i])}:{value:null}),{on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Object(rt["Z"])(t.field)}] : null`}]:[],bind:null!==(c=null!==(u=o[t.field])&&void 0!==u?u:o[t.channel])&&void 0!==c?c:o}))}),n},signals:(t,e,n)=>{const r=e.name,i=e.project,o=n.filter(t=>t.name===r+int)[0],a=r+oet,s=i.items.map(t=>eQ(`${r}_${t.field}`)),u=s.map(t=>t+" !== null").join(" && ");return s.length&&(o.update=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}};var het=cet;const fet="_toggle",det={has:t=>"multi"===t.type&&!!t.toggle,signals:(t,e,n)=>n.concat({name:e.name+fet,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const n=e.name+int,r=e.name+fet;return`${r} ? null : ${n}, `+("global"===e.resolve?r+" ? null : true, ":`${r} ? null : {unit: ${lnt(t)}}, `)+`${r} ? ${n} : null`}};var pet=det;const get={has:t=>void 0!==t.clear&&!1!==t.clear,parse:(t,e,n)=>{n.clear&&(e.clear=Object(rt["H"])(n.clear)?iX(n.clear,"scope"):n.clear)},topLevelSignals:(t,e,n)=>{if(het.has(e))for(const r of e.project.items){const t=n.findIndex(t=>t.name===eQ(`${e.name}_${r.field}`));-1!==t&&n[t].on.push({events:e.clear,update:"null"})}return n},signals:(t,e,n)=>{function r(t,r){-1!==t&&n[t].on&&n[t].on.push({events:e.clear,update:r})}if("interval"===e.type)for(const i of e.project.items){const t=n.findIndex(t=>t.name===i.signals.visual);if(r(t,"[0, 0]"),-1===t){const t=n.findIndex(t=>t.name===i.signals.data);r(t,"null")}}else{let t=n.findIndex(t=>t.name===e.name+int);r(t,"null"),pet.has(e)&&(t=n.findIndex(t=>t.name===e.name+fet),r(t,"false"))}return n}};var met=get;const vet={has:t=>"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind,parse:(t,e)=>{const n=e.scales=[];for(const r of e.project.items){const i=r.channel;if(!s2(i))continue;const o=t.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!f4(a)){W3(v.SCALE_BINDINGS_CONTINUOUS);continue}const s={selection:e.name,field:r.field};o.set("selectionExtent",s,!0),n.push(r)}},topLevelSignals:(t,e,n)=>{const r=e.scales.filter(t=>0===n.filter(e=>e.name===t.signals.data).length);if(!t.parent||xet(t)||0===r.length)return n;const i=n.filter(t=>t.name===e.name)[0];let o=i.update;if(o.indexOf(ant)>=0)i.update=`{${r.map(t=>`${Object(rt["Z"])(t.field)}: ${t.signals.data}`).join(", ")}}`;else{for(const t of r){const e=`${Object(rt["Z"])(t.field)}: ${t.signals.data}`;o.indexOf(e)<0&&(o=`${o.substring(0,o.length-1)}, ${e}}`)}i.update=o}return n.concat(r.map(t=>({name:t.signals.data})))},signals:(t,e,n)=>{if(t.parent&&!xet(t))for(const r of e.scales){const t=n.filter(t=>t.name===r.signals.data)[0];t.push="outer",delete t.value,delete t.update}return n}};var yet=vet;function bet(t,e){const n=Object(rt["Z"])(t.scaleName(e));return`domain(${n})`}function xet(t){var e;return t.parent&&hat(t.parent)&&(null!==(e=!t.parent.parent)&&void 0!==e?e:xet(t.parent.parent))}const wet={has:t=>{const e="global"===t.resolve&&t.bind&&y7(t.bind),n=1===t.project.items.length&&t.project.items[0].field!==m7;return e&&!n&&W3(v.LEGEND_BINDINGS_PROJECT_LENGTH),e&&n},parse:(t,e,n,r)=>{var i;if(r.on||delete e.events,r.clear||delete e.clear,r.on||r.clear){const t='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of e.events)n.filter=Object(rt["i"])(null!==(i=n.filter)&&void 0!==i?i:[]),n.filter.indexOf(t)<0&&n.filter.push(t)}const o=b7(e.bind)?e.bind.legend:"click",a=Object(rt["H"])(o)?iX(o,"view"):Object(rt["i"])(o);e.bind={legend:{merge:a}}},topLevelSignals:(t,e,n)=>{const r=e.name,i=b7(e.bind)&&e.bind.legend,o=t=>e=>{const n=IJ(e);return n.markname=t,n};for(const a of e.project.items){if(!a.hasLegend)continue;const t=eQ(a.field)+"_legend",s=`${r}_${t}`,u=n.filter(t=>t.name===s);if(0===u.length){const r=i.merge.map(o(t+"_symbols")).concat(i.merge.map(o(t+"_labels"))).concat(i.merge.map(o(t+"_entries")));n.unshift(Object.assign(Object.assign({name:s},e.init?{}:{value:null}),{on:[{events:r,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:"!event.item || !datum ? null : "+s,force:!0}]}))}}return n},signals:(t,e,n)=>{const r=e.name,i=e.project,o=n.find(t=>t.name===r+int),a=r+oet,s=i.items.filter(t=>t.hasLegend).map(t=>eQ(`${r}_${eQ(t.field)}_legend`)),u=s.map(t=>t+" !== null").join(" && "),c=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;e.events&&s.length>0?o.on.push({events:s.map(t=>({signal:t})),update:c}):s.length>0&&(o.update=c,delete o.value,delete o.on);const l=n.find(t=>t.name===r+fet),h=b7(e.bind)&&e.bind.legend;return l&&(e.events?l.on.push(Object.assign(Object.assign({},l.on[0]),{events:h})):l.on[0].events=h),n}};var _et=wet;function Oet(t,e,n){var r;const i=null===(r=t.fieldDef(e))||void 0===r?void 0:r.field;unt(t,t=>{var r,o;const a=null!==(r=t.project.hasField[i])&&void 0!==r?r:t.project.hasChannel[e];if(a&&wet.has(t)){const e=null!==(o=n.get("selections"))&&void 0!==o?o:[];e.push(t.name),n.set("selections",e,!1),a.hasLegend=!0}})}const Cet="_translate_anchor",ket="_translate_delta",Aet={has:t=>"interval"===t.type&&t.translate,signals:(t,e,n)=>{const r=e.name,i=yet.has(e),o=r+Cet,{x:a,y:s}=e.project.hasChannel;let u=iX(e.translate,"scope");return i||(u=u.map(t=>(t.between[0].markname=r+qet,t))),n.push({name:o,value:{},on:[{events:u.map(t=>t.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==a?", extent_x: "+(i?bet(t,x0):`slice(${a.signals.visual})`):"")+(void 0!==s?", extent_y: "+(i?bet(t,w0):`slice(${s.signals.visual})`):"")+"}"}]},{name:r+ket,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==a&&Eet(t,e,a,"width",n),void 0!==s&&Eet(t,e,s,"height",n),n}};var Tet=Aet;function Eet(t,e,n,r,i){var o;const a=e.name,s=a+Cet,u=a+ket,c=n.channel,l=yet.has(e),h=i.filter(t=>t.name===n.signals[l?"data":"visual"])[0],f=t.getSizeSignalRef(r).signal,d=t.getScaleComponent(c),p=d.get("type"),g=l&&c===x0?"-":"",m=`${s}.extent_${c}`,v=`${g}${u}.${c} / `+(l?""+f:`span(${m})`),y=l?"log"===p?"panLog":"pow"===p?"panPow":"panLinear":"panLinear",b=`${y}(${m}, ${v}`+(l&&"pow"===p?", "+(null!==(o=d.get("exponent"))&&void 0!==o?o:1):"")+")";h.on.push({events:{signal:u},update:l?b:`clampRange(${b}, 0, ${f})`})}const jet="_zoom_anchor",Det="_zoom_delta",Met={has:t=>"interval"===t.type&&t.zoom,signals:(t,e,n)=>{const r=e.name,i=yet.has(e),o=r+Det,{x:a,y:s}=e.project.hasChannel,u=Object(rt["Z"])(t.scaleName(x0)),c=Object(rt["Z"])(t.scaleName(w0));let l=iX(e.zoom,"scope");return i||(l=l.map(t=>(t.markname=r+qet,t))),n.push({name:r+jet,on:[{events:l,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(t=>!!t).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:l,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==a&&Iet(t,e,a,"width",n),void 0!==s&&Iet(t,e,s,"height",n),n}};var Net=Met;function Iet(t,e,n,r,i){var o;const a=e.name,s=n.channel,u=yet.has(e),c=i.filter(t=>t.name===n.signals[u?"data":"visual"])[0],l=t.getSizeSignalRef(r).signal,h=t.getScaleComponent(s),f=h.get("type"),d=u?bet(t,s):c.name,p=a+Det,g=`${a}${jet}.${s}`,m=u?"log"===f?"zoomLog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear",v=`${m}(${d}, ${g}, ${p}`+(u&&"pow"===f?", "+(null!==(o=h.get("exponent"))&&void 0!==o?o:1):"")+")";c.on.push({events:{signal:p},update:u?v:`clampRange(${v}, 0, ${l})`})}const Ret=[uet,pet,yet,_et,Tet,Net,het,eet,met];function Fet(t,e){for(const n of Ret)n.has(t)&&e(n)}function Pet(t,e=!0,n=rt["x"]){if(Object(rt["A"])(t)){const r=t.map(t=>Pet(t,e,n));return e?`[${r.join(", ")}]`:r}return H3(t)?n(e?t5(t):n5(t)):e?n(JSON.stringify(t)):t}function $et(t,e){return unt(t,(n,r)=>{const i=n.name;let o=r.modifyExpr(t,n);e.push(...r.signals(t,n)),Fet(n,r=>{r.signals&&(e=r.signals(t,n,e)),r.modifyExpr&&(o=r.modifyExpr(t,n,o))}),e.push({name:i+ont,on:[{events:{signal:n.name+int},update:`modify(${Object(rt["Z"])(n.name+rnt)}, ${o})`}]})}),Het(e)}function Let(t,e){if(t.component.selection&&ZJ(t.component.selection).length){const n=Object(rt["Z"])(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:iX("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Het(e)}function zet(t,e){let n=!1;if(unt(t,(r,i)=>{const o=r.name,a=Object(rt["Z"])(o+rnt),s=e.filter(t=>t.name===o);if(0===s.length){const t="global"===r.resolve?"union":r.resolve,n="multi"===r.type?", true)":")";e.push({name:r.name,update:`${ant}(${a}, ${Object(rt["Z"])(t)}${n}`})}n=!0,i.topLevelSignals&&(e=i.topLevelSignals(t,r,e)),Fet(r,n=>{n.topLevelSignals&&(e=n.topLevelSignals(t,r,e))})}),n){const t=e.filter(t=>"unit"===t.name);0===t.length&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return Het(e)}function Bet(t,e){const n=[...e];return unt(t,e=>{const r={name:e.name+rnt};if(e.init){const n=e.project.items.map(t=>{const{signals:e}=t,n=wJ(t,["signals"]);return n}),i=e.init.map(t=>Pet(t,!1));r.values="interval"===e.type?[{unit:lnt(t,{escape:!1}),fields:n,values:i}]:i.map(e=>({unit:lnt(t,{escape:!1}),fields:n,values:e}))}const i=n.filter(t=>t.name===e.name+rnt);i.length||n.push(r)}),n}function Uet(t,e){return unt(t,(n,r)=>{e=r.marks?r.marks(t,n,e):e,Fet(n,r=>{r.marks&&(e=r.marks(t,n,e))})}),e}function Wet(t,e){for(const n of t.children)uat(n)&&(e=Uet(n,e));return e}function Vet(t,e){const n=e.selection,r=t.getSelectionComponent(n,eQ(n));return{signal:ynt(r,e)}}function Het(t){return t.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const qet="_brush",Get="_scale_trigger",Xet={signals:(t,e)=>{const n=e.name,r=n+oet,i=yet.has(e),o=[],a=[],s=[];if(e.translate&&!i){const t="!event.item || event.item.mark.name !== "+Object(rt["Z"])(n+qet);Zet(e,(e,n)=>{var r;const i=Object(rt["i"])(null!==(r=n.between[0].filter)&&void 0!==r?r:n.between[0].filter=[]);return i.indexOf(t)<0&&i.push(t),e})}e.project.items.forEach((n,r)=>{const i=n.channel;if(i!==x0&&i!==w0)return void W3("Interval selections only support x and y encoding channels.");const u=e.init?e.init[r]:null,c=Ket(t,e,n,u),l=n.signals.data,h=n.signals.visual,f=Object(rt["Z"])(t.scaleName(i)),d=t.getScaleComponent(i).get("type"),p=f4(d)?"+":"";o.push(...c),a.push(l),s.push({scaleName:t.scaleName(i),expr:`(!isArray(${l}) || (${p}invert(${f}, ${h})[0] === ${p}${l}[0] && ${p}invert(${f}, ${h})[1] === ${p}${l}[1]))`})}),i||o.push({name:n+Get,value:{},on:[{events:s.map(t=>({scale:t.scaleName})),update:s.map(t=>t.expr).join(" && ")+` ? ${n+Get} : {}`}]});const u=e.init,c=`unit: ${lnt(t)}, fields: ${r}, values`;return o.concat(Object.assign(Object.assign({name:n+int},u?{init:`{${c}: ${Pet(u)}}`}:{}),{on:[{events:[{signal:a.join(" || ")}],update:a.join(" && ")+` ? {${c}: [${a}]} : null`}]}))},modifyExpr:(t,e)=>{const n=e.name+int;return n+", "+("global"===e.resolve?"true":`{unit: ${lnt(t)}}`)},marks:(t,e,n)=>{const r=e.name,{x:i,y:o}=e.project.hasChannel,a=i&&i.signals.visual,s=o&&o.signals.visual,u=`data(${Object(rt["Z"])(e.name+rnt)})`;if(yet.has(e))return n;const c={x:void 0!==i?{signal:a+"[0]"}:{value:0},y:void 0!==o?{signal:s+"[0]"}:{value:0},x2:void 0!==i?{signal:a+"[1]"}:{field:{group:"width"}},y2:void 0!==o?{signal:s+"[1]"}:{field:{group:"height"}}};if("global"===e.resolve)for(const m of ZJ(c))c[m]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${lnt(t)}`},c[m]),{value:0}];const l=e.mark,{fill:h,fillOpacity:f,cursor:d}=l,p=wJ(l,["fill","fillOpacity","cursor"]),g=ZJ(p).reduce((t,e)=>(t[e]=[{test:[void 0!==i&&`${a}[0] !== ${a}[1]`,void 0!==o&&`${s}[0] !== ${s}[1]`].filter(t=>t).join(" && "),value:p[e]},{value:null}],t),{});return[{name:r+qet+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:h},fillOpacity:{value:f}},update:c}},...n,{name:r+qet,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},d?{cursor:{value:d}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},c),g)}}]}};var Yet=Xet;function Ket(t,e,n,r){const i=n.channel,o=n.signals.visual,a=n.signals.data,s=yet.has(e),u=Object(rt["Z"])(t.scaleName(i)),c=t.getScaleComponent(i),l=c?c.get("type"):void 0,h=t=>`scale(${u}, ${t})`,f=t.getSizeSignalRef(i===x0?"width":"height").signal,d=i+"(unit)",p=Zet(e,(t,e)=>[...t,{events:e.between[0],update:`[${d}, ${d}]`},{events:e,update:`[${o}[0], clamp(${d}, 0, ${f})]`}]);return p.push({events:{signal:e.name+Get},update:f4(l)?`[${h(a+"[0]")}, ${h(a+"[1]")}]`:"[0, 0]"}),s?[{name:a,on:[]}]:[Object.assign(Object.assign({name:o},r?{init:Pet(r,!0,h)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:a},r?{init:Pet(r)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]})]}function Zet(t,e){return t.events.reduce((t,n)=>n.between?e(t,n):(W3(n+" is not an ordered event stream for interval selections."),t),[])}function Jet(t,e){const n=e.name,r=n+oet,i=e.project,o="(item().isVoronoi ? datum.datum : datum)",a=i.items.map(e=>{const n=t.fieldDef(e.channel);return n&&n.bin?`[${o}[${Object(rt["Z"])(t.vgField(e.channel,{}))}], ${o}[${Object(rt["Z"])(t.vgField(e.channel,{binSuffix:"end"}))}]]`:`${o}[${Object(rt["Z"])(e.field)}]`}).join(", "),s=`unit: ${lnt(t)}, fields: ${r}, values`,u=e.events;return[{name:n+int,on:u?[{events:u,update:`datum && item().mark.marktype !== 'group' ? {${s}: [${a}]} : null`,force:!0}]:[]}]}const Qet={signals:Jet,modifyExpr:(t,e)=>{const n=e.name+int;return n+", "+("global"===e.resolve?"null":`{unit: ${lnt(t)}}`)}};var tnt=Qet;const ent={signals:Jet,modifyExpr:(t,e)=>{const n=e.name+int;return n+", "+("global"===e.resolve?"true":`{unit: ${lnt(t)}}`)}};var nnt=ent;const rnt="_store",int="_tuple",ont="_modify",ant="vlSelectionResolve",snt={single:nnt,multi:tnt,interval:Yet};function unt(t,e){const n=t.component.selection;if(n)for(const r of JJ(n)){const t=e(r,snt[r.type]);if(!0===t)break}}function cnt(t){let e=t.parent;while(e){if(cat(e))break;e=e.parent}return e}function lnt(t,{escape:e}={escape:!0}){let n=e?Object(rt["Z"])(t.name):t.name;const r=cnt(t);if(r){const{facet:t}=r;for(const e of s1)t[e]&&(n+=` + '__facet_${e}_' + (facet[${Object(rt["Z"])(r.vgField(e))}])`)}return n}function hnt(t){let e=!1;return unt(t,t=>{e=e||t.project.items.some(t=>t.field===m7)}),e}function fnt(t){const e=[];return"Identifier"===t.type?[t.name]:"Literal"===t.type?[t.value]:("MemberExpression"===t.type&&(e.push(...fnt(t.object)),e.push(...fnt(t.property))),e)}function dnt(t){return"MemberExpression"===t.object.type?dnt(t.object):"datum"===t.object.name}function pnt(t){const e=tB(t),n=new Set;return e.visit(t=>{"MemberExpression"===t.type&&dnt(t)&&n.add(fnt(t).slice(1).join("."))}),n}class gnt extends net{constructor(t,e,n){super(t),this.model=e,this.filter=n,this.expr=xnt(this.model,this.filter,this),this._dependentFields=pnt(this.expr)}clone(){return new gnt(null,this.model,IJ(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return"Filter "+this.expr}}function mnt(t,e){var n;const r={},i=t.config.selection;for(const o of ZJ(null!==e&&void 0!==e?e:{})){const a=IJ(e[o]),s=i[a.type],{fields:u,encodings:c}=s,l=wJ(s,["fields","encodings"]);for(const t in l)"encodings"===t&&a.fields||"fields"===t&&a.encodings||("mark"===t&&(a[t]=Object.assign(Object.assign({},l[t]),a[t])),void 0!==a[t]&&!0!==a[t]||(a[t]=null!==(n=l[t])&&void 0!==n?n:a[t]));const h=eQ(o),f=r[h]=Object.assign(Object.assign({},a),{name:h,events:Object(rt["H"])(a.on)?iX(a.on,"scope"):IJ(a.on)});Fet(f,n=>{n.has(f)&&n.parse&&n.parse(t,f,a,e[o])})}return r}function vnt(t,e,n,r="datum"){const i=[];function o(e){const o=eQ(e),a=t.getSelectionComponent(o,e),s=Object(rt["Z"])(o+rnt);if(a.project.timeUnit){const e=null!==n&&void 0!==n?n:t.component.data.raw,r=a.project.timeUnit.clone();e.parent?r.insertAsParentOf(e):e.parent=r}return"none"!==a.empty&&i.push(s),`vlSelectionTest(${s}, ${r}`+("global"===a.resolve?")":`, ${Object(rt["Z"])(a.resolve)})`)}const a=nQ(e,o);return(i.length?"!("+i.map(t=>`length(data(${t}))`).join(" || ")+") || ":"")+`(${a})`}function ynt(t,e){const n=e["encoding"];let r=e["field"];if(n||r){if(n&&!r){const i=t.project.items.filter(t=>t.channel===n);!i.length||i.length>1?(r=t.project.items[0].field,W3((i.length?"Multiple ":"No ")+`matching ${Object(rt["Z"])(n)} encoding found for selection ${Object(rt["Z"])(e.selection)}. `+`Using "field": ${Object(rt["Z"])(r)}.`)):r=i[0].field}}else r=t.project.items[0].field,t.project.items.length>1&&W3(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Object(rt["Z"])(r)}.`);return`${t.name}[${Object(rt["Z"])(r)}]`}function bnt(t,e){unt(t,n=>{const r=n.name,i=t.getName("lookup_"+r);t.component.data.outputNodes[i]=n.materialized=new ret(new gnt(e,t,{selection:r}),i,"lookup",t.component.data.outputNodeRefCounts)})}function xnt(t,e,n){return nQ(e,e=>Object(rt["H"])(e)?e:C5(e)?vnt(t,e.selection,n):P5(e))}function wnt(t,e){if(t)return Object(rt["A"])(t)&&!c8(t)?t.map(t=>H6(t,e)).join(", "):t}function _nt(t,e,n,r){var i,o,a;t.encode=null!==(i=t.encode)&&void 0!==i?i:{},t.encode[e]=null!==(o=t.encode[e])&&void 0!==o?o:{},t.encode[e].update=null!==(a=t.encode[e].update)&&void 0!==a?a:{},t.encode[e].update[n]=r}function Ont(t,e,n,r={header:!1}){var i,o;const a=t.combine(),{disable:s,orient:u,scale:c,labelExpr:l,title:h,zindex:f}=a,d=wJ(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!s){for(const t in d){const n=_Q[t],r=d[t];if(n&&n!==e&&"both"!==n)delete d[t];else if(xQ(r)){const{condition:e}=r,n=wJ(r,["condition"]),i=Object(rt["i"])(e),o=bQ[t];if(o){const{vgProp:e,part:r}=o,a=[...i.map(t=>{const{test:e}=t,n=wJ(t,["test"]);return Object.assign({test:xnt(null,e)},n)}),n];_nt(d,r,e,a),delete d[t]}else if(null===o){const e={signal:i.map(t=>{const{test:e}=t,n=wJ(t,["test"]);return`${xnt(null,e)} ? ${h8(n)} : `}).join("")+h8(n)};d[t]=e}}else if(m5(r)){const e=bQ[t];if(e){const{vgProp:n,part:i}=e;_nt(d,i,n,r),delete d[t]}}}if("grid"===e){if(!d.grid)return;if(d.encode){const{grid:t}=d.encode;d.encode=Object.assign({},t?{grid:t}:{}),KJ(d.encode)&&delete d.encode}return Object.assign(Object.assign({scale:c,orient:u},d),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:fQ(f,0)})}{if(!r.header&&t.mainExtracted)return;if(void 0!==l){let t=l;(null===(o=null===(i=d.encode)||void 0===i?void 0:i.labels)||void 0===o?void 0:o.update)&&m5(d.encode.labels.update.text)&&(t=cQ(l,"datum.label",d.encode.labels.update.text.signal)),_nt(d,"labels","text",{signal:t})}if(null===d.labelAlign&&delete d.labelAlign,d.encode){for(const e of wQ)t.hasAxisPart(e)||delete d.encode[e];KJ(d.encode)&&delete d.encode}const e=wnt(h,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:c,orient:u,grid:!1},e?{title:e}:{}),d),!1===n.aria?{aria:!1}:{}),{zindex:fQ(f,0)})}}}function Snt(t){const{axes:e}=t.component,n=[];for(const r of U1)if(e[r])for(const i of e[r])if(!i.get("disable")&&!i.get("gridScale")){const e="x"===r?"height":"width",i=t.getSizeSignalRef(e).signal;e!==i&&n.push({name:e,update:i})}return n}function Cnt(t,e){const{x:n=[],y:r=[]}=t;return[...n.map(t=>Ont(t,"grid",e)),...r.map(t=>Ont(t,"grid",e)),...n.map(t=>Ont(t,"main",e)),...r.map(t=>Ont(t,"main",e))].filter(t=>t)}const knt={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Ant={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Tnt=ZJ(knt),Ent=ZJ(Ant);function jnt(t,e,n,r){return Object.assign.apply(null,[{},...t.map(t=>{if("axisOrient"===t){const t="x"===n?"bottom":"left",i=e["x"===n?"axisBottom":"axisLeft"]||{},o=e["x"===n?"axisTop":"axisRight"]||{},a=new Set([...ZJ(i),...ZJ(o)]),s={};for(const e of a.values())s[e]={signal:`${r["signal"]} === "${t}" ? ${f8(i[e])} : ${f8(o[e])}`};return s}return e[t]})])}function Dnt(t,e,n,r){const i="band"===e?["axisDiscrete","axisBand"]:"point"===e?["axisDiscrete","axisPoint"]:i4(e)?["axisQuantitative"]:"time"===e||"utc"===e?["axisTemporal"]:[],o="x"===t?"axisX":"axisY",a=m5(n)?"axisOrient":"axis"+iQ(n),s=[...i,...i.map(t=>o+t.substr(4))],u=["axis",a,o];return{vlOnlyAxisConfig:jnt(s,r,t,n),vgAxisConfig:jnt(u,r,t,n),axisConfigStyle:Mnt([...u,...s],r)}}function Mnt(t,e){var n;const r=[{}];for(const i of t){let t=null===(n=e[i])||void 0===n?void 0:n.style;if(t){t=Object(rt["i"])(t);for(const n of t)r.push(e.style[n])}}return Object.assign.apply(null,r)}function Nnt(t,e,n,r={}){var i;const o=y8(t,n,e.style);if(void 0!==o)return{configFrom:"style",configValue:o};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==(null===(i=r[a])||void 0===i?void 0:i[t]))return{configFrom:a,configValue:r[a][t]};return{}}const Int={scale:({model:t,channel:e})=>t.scaleName(e),format:({fieldOrDatumDef:t,config:e,axis:n})=>{const{format:r,formatType:i}=n;return G4(t,t.type,r,i,e,!0)},formatType:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:r}=t;return X4(r,e,n)},grid:({fieldOrDatumDef:t,axis:e,scaleType:n})=>{var r;return(!x6(t)||!m2(t.bin))&&(null!==(r=e.grid)&&void 0!==r?r:Rnt(n,t))},gridScale:({model:t,channel:e})=>Fnt(t,e),labelAlign:({axis:t,labelAngle:e,orient:n,channel:r})=>t.labelAlign||znt(e,n,r),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:n,channel:r})=>t.labelBaseline||Lnt(e,n,r),labelFlush:({axis:t,fieldOrDatumDef:e,channel:n})=>{var r;return null!==(r=t.labelFlush)&&void 0!==r?r:Bnt(e.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{var r;return null!==(r=t.labelOverlap)&&void 0!==r?r:Unt(e.type,n)},orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var o;const a="x"===t?"width":"y"===t?"height":void 0,s=a?e.getSizeSignalRef(a):void 0;return null!==(o=n.tickCount)&&void 0!==o?o:Vnt({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},title:({axis:t,model:e,channel:n})=>{if(void 0!==t.title)return t.title;const r=Hnt(e,n);if(void 0!==r)return r;const i=e.typedFieldDef(n),o="x"===n?"x2":"y2",a=e.fieldDef(o);return x8(i?[f6(i)]:[],x6(a)?[f6(a)]:[])},values:({axis:t,fieldOrDatumDef:e})=>qnt(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:n})=>{var r;return null!==(r=t.zindex)&&void 0!==r?r:Gnt(n,e)}};function Rnt(t,e){return!h4(t)&&x6(e)&&!g2(null===e||void 0===e?void 0:e.bin)}function Fnt(t,e){const n="x"===e?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function Pnt(t,e,n,r,i){const o=null===e||void 0===e?void 0:e.labelAngle;if(void 0!==o)return m5(o)?o:vQ(o);{const{configValue:o}=Nnt("labelAngle",t.config,null===e||void 0===e?void 0:e.style,i);return void 0!==o?vQ(o):n===x0&&zJ([V5,U5],r.type)?270:void 0}}function $nt(t){return`(((${t.signal} % 360) + 360) % 360)`}function Lnt(t,e,n,r){if(void 0!==t){if("x"===n){if(m5(t)){const n=$nt(t),r=m5(e)?`(${e.signal} === "top")`:"top"===e;return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${r} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(m5(e)){const n=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${n} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)===("top"===e)?"bottom":"top"}if(m5(t)){const n=$nt(t),i=m5(e)?`(${e.signal} === "left")`:"left"===e,o=r?'"middle"':"null";return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${o} : (45 <= ${n} && ${n} <= 135) === ${i} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return r?"middle":null;if(m5(e)){const n=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)===("left"===e)?"top":"bottom"}}function znt(t,e,n){if(void 0===t)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(m5(t)){const n=$nt(t),a=m5(e)?`(${e.signal} === "${o}")`:e===o;return{signal:`(${i?"("+n+" + 90)":n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${a} ? "left" : "right"`}}if((t+i)%180===0)return r?null:"center";if(m5(e)){const n=i<t&&t<180+i?"===":"!==",r=`${e.signal} ${n} "${o}"`;return{signal:r+' ? "left" : "right"'}}return(i<t&&t<180+i)===(e===o)?"left":"right"}function Bnt(t,e){if("x"===e&&zJ(["quantitative","temporal"],t))return!0}function Unt(t,e){if("nominal"!==t)return"log"!==e||"greedy"}function Wnt(t){return"x"===t?"bottom":"left"}function Vnt({fieldOrDatumDef:t,scaleType:e,size:n,values:r}){var i;if(!r&&!h4(e)&&"log"!==e){if(x6(t)){if(g2(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&zJ(["month","hours","day","quarter"],null===(i=p5(t.timeUnit))||void 0===i?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Hnt(t,e){const n="x"===e?"x2":"y2",r=t.fieldDef(e),i=t.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?w8(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}function qnt(t,e){const n=t.values;return Object(rt["A"])(n)?a8(e,n):m5(n)?n:void 0}function Gnt(t,e){return"rect"===t&&I6(e)?1:0}class Xnt extends net{constructor(t,e){super(t),this.transform=e,this._dependentFields=pnt(this.transform.calculate)}clone(){return new Xnt(null,IJ(this.transform))}static parseAllForSortIndex(t,e){return e.forEachFieldDef((e,n)=>{if(T6(e)&&a6(e.sort)){const{field:r,timeUnit:i}=e,o=e.sort,a=o.map((t,e)=>`${P5({field:r,timeUnit:i,equal:t})} ? ${e} : `).join("")+o.length;t=new Xnt(t,{calculate:a,as:Ynt(e,n,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return"Calculate "+$J(this.transform)}}function Ynt(t,e,n){return N6(t,Object.assign({prefix:e,suffix:"sort_index"},null!==n&&void 0!==n?n:{}))}function Knt(t,e){return zJ(["top","bottom"],e)?"column":zJ(["left","right"],e)||"row"===t?"row":"column"}function Znt(t,e,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return fQ(((null===e||void 0===e?void 0:e.header)||{})[t],i[t],n.header[t])}function Jnt(t,e,n,r){const i={};for(const o of t){const t=Znt(o,e,n,r);void 0!==t&&(i[o]=t)}return i}const Qnt=["row","column"],trt=["header","footer"];function ert(t,e){const n=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=Jnt(["titleAnchor","titleAngle","titleOrient"],i,r,e),u=Knt(e,s),c=vQ(a);return{name:e+"-title",type:"group",role:u+"-title",title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===e?{orient:"left"}:{}),{style:"guide-title"}),rrt(c,u)),nrt(u,c,o)),hrt(r,i,e,Tnt,knt))}}function nrt(t,e,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=znt(e,"row"===t?"left":"top","row"===t?"y":"x");return r?{align:r}:{}}function rrt(t,e){const n=Lnt(t,"row"===e?"left":"top","row"===e?"y":"x",!0);return n?{baseline:n}:{}}function irt(t,e){const n=t.component.layoutHeaders[e],r=[];for(const i of trt)if(n[i])for(const o of n[i]){const a=srt(t,e,i,n,o);null!=a&&r.push(a)}return r}function ort(t,e){var n;const{sort:r}=t;return o6(r)?{field:N6(r,{expr:"datum"}),order:null!==(n=r.order)&&void 0!==n?n:"ascending"}:Object(rt["A"])(r)?{field:Ynt(t,e,{expr:"datum"}),order:"ascending"}:{field:N6(t,{expr:"datum"}),order:null!==r&&void 0!==r?r:"ascending"}}function art(t,e,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:u}=Jnt(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t,n,e),c=V4({fieldOrDatumDef:t,format:r,formatType:i,expr:"parent",config:n}).signal,l=Knt(e,s);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?cQ(cQ(u,"datum.label",c),"datum.value",N6(t,{expr:"parent"})):c}},"row"===e?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),rrt(o,l)),nrt(l,o,a)),hrt(n,t,e,Ent,Ant))}function srt(t,e,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=t.config?t.config:void 0;if(a&&i.labels){const{labelOrient:t}=Jnt(["labelOrient"],a,s,e);("row"===e&&!zJ(["top","bottom"],t)||"column"===e&&!zJ(["left","right"],t))&&(o=art(a,e,s))}const u=cat(t)&&!s6(t.facet),c=i.axes,l=(null===c||void 0===c?void 0:c.length)>0;if(o||l){const s="row"===e?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${e}_${n}`),type:"group",role:`${e}-${n}`},r.facetFieldDef?{from:{data:t.getName(e+"_domain")},sort:ort(a,e)}:{}),l&&u?{from:{data:t.getName("facet_domain_"+e)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{}),l?{axes:c}:{})}}return null}const urt={column:{start:0,end:1},row:{start:1,end:0}};function crt(t,e){return urt[e][t]}function lrt(t,e){const n={};for(const r of s1){const i=t[r];if(null===i||void 0===i?void 0:i.facetFieldDef){const{titleAnchor:t,titleOrient:o}=Jnt(["titleAnchor","titleOrient"],i.facetFieldDef,e,r),a=Knt(r,o),s=crt(t,a);void 0!==s&&(n[a]=s)}}return KJ(n)?void 0:n}function hrt(t,e,n,r,i){const o={};for(const a of r){if(!i[a])continue;const r=Znt(a,e,t,n);void 0!==r&&(o[i[a]]=r)}return o}function frt(t){return[...drt(t,"width"),...drt(t,"height"),...drt(t,"childWidth"),...drt(t,"childHeight")]}function drt(t,e){const n="width"===e?"x":"y",r=t.component.layoutSize.get(e);if(!r||"merged"===r)return[];const i=t.getSizeSignalRef(e).signal;if("step"===r){const e=t.getScaleComponent(n);if(e){const r=e.get("type"),o=e.get("range");if(h4(r)&&v5(o)){const r=t.scaleName(n);if(cat(t.parent)){const e=t.parent.component.resolve;if("independent"===e.scale[n])return[prt(r,o)]}return[prt(r,o),{name:i,update:grt(r,e,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const e=i.endsWith("width"),n=e?"containerSize()[0]":"containerSize()[1]",r=j7(t.config.view,e?"width":"height"),o=`isFinite(${n}) ? ${n} : ${r}`;return[{name:i,init:o,on:[{update:o,events:"window:resize"}]}]}return[{name:i,value:r}]}function prt(t,e){return{name:t+"_step",value:e.step}}function grt(t,e,n){const r=e.get("type"),i=e.get("padding"),o=fQ(e.get("paddingOuter"),i);let a=e.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,`bandspace(${n}, ${a}, ${o}) * ${t}_step`}function mrt(t){return"childWidth"===t?"width":"childHeight"===t?"height":t}function vrt(t,e){return ZJ(t).reduce((n,r)=>{const i=t[r];return Object.assign(Object.assign({},n),mtt(e,i,r,t=>m5(t)?t:{value:t.value}))},{})}function yrt(t,e){if(hat(e)||cat(e))return"shared";if(lat(e))return W1(t)?"independent":"shared";throw new Error("invalid model type for resolve")}function brt(t,e){const n=t.scale[e],r=W1(e)?"axis":"legend";return"independent"===n?("shared"===t[r][e]&&W3(v.independentScaleMeansIndependentGuide(e)),"independent"):t[r][e]||"shared"}const xrt=Object.assign(Object.assign({},g7),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),wrt=ZJ(xrt);class _rt extends M9{}const Ort={symbols:Srt,gradient:Crt,labels:krt,entries:Art};function Srt(t,{fieldOrDatumDef:e,model:n,channel:r,legendCmpt:i,legendType:o}){var a,s,u,c,l;if("symbol"!==o)return;const{markDef:h,encoding:f,config:d,mark:p}=n,g=h.filled&&"trail"!==p;let m=Object.assign(Object.assign({},d8({},n,GQ)),ktt(n,{filled:g}));const v=null!==(a=Trt(f.opacity))&&void 0!==a?a:h.opacity;if(m.fill)if("fill"===r||g&&r===M0)delete m.fill;else if(m.fill["field"])i.get("symbolFillColor")?delete m.fill:(m.fill=l8(null!==(s=d.legend.symbolBaseFillColor)&&void 0!==s?s:"black"),m.fillOpacity=l8(null!==v&&void 0!==v?v:1));else if(Object(rt["A"])(m.fill)){const t=null!==(l=null!==(c=Ert(null!==(u=f.fill)&&void 0!==u?u:f.color))&&void 0!==c?c:h.fill)&&void 0!==l?l:g&&h.color;t&&(m.fill=l8(t))}if(m.stroke)if("stroke"===r||!g&&r===M0)delete m.stroke;else if(m.stroke["field"])delete m.stroke;else if(Object(rt["A"])(m.stroke)){const t=fQ(Ert(f.stroke||f.color),h.stroke,g?h.color:void 0);t&&(m.stroke={value:t})}if(r!==$0){const t=x6(e)&&Drt(n,i,e);t?m.opacity=[Object.assign({test:t},l8(null!==v&&void 0!==v?v:1)),l8(d.legend.unselectedOpacity)]:v&&(m.opacity=l8(v))}return m=Object.assign(Object.assign({},m),t),KJ(m)?void 0:m}function Crt(t,{model:e,legendType:n}){if("gradient"!==n)return;let r={};const i=Trt(e.encoding.opacity)||e.markDef.opacity;return i&&(r.opacity=l8(i)),r=Object.assign(Object.assign({},r),t),KJ(r)?void 0:r}function krt(t,{fieldOrDatumDef:e,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=x6(e)?Drt(n,i,e):void 0,u=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:c,formatType:l}=o,h=B4(l)?q4({fieldOrDatumDef:e,field:"datum.value",format:c,formatType:l,config:a}):void 0,f=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),h?{text:h}:{}),t);return KJ(f)?void 0:f}function Art(t,{legendCmpt:e}){const n=e.get("selections");return(null===n||void 0===n?void 0:n.length)?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}function Trt(t){return jrt(t,(t,e)=>Math.max(t,e.value))}function Ert(t){return jrt(t,(t,e)=>fQ(t,e.value))}function jrt(t,e){return b6(t)?Object(rt["i"])(t.condition).reduce(e,t.value):A6(t)?t.value:void 0}function Drt(t,e,n){const r=e.get("selections");if(!(null===r||void 0===r?void 0:r.length))return;const i=Object(rt["Z"])(n.field);return r.map(t=>{const e=Object(rt["Z"])(eQ(t)+rnt);return`(!length(data(${e})) || (${t}[${i}] && indexof(${t}[${i}], datum.value) >= 0))`}).join(" || ")}const Mrt={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:n})=>{const{format:r,formatType:i}=e;return G4(t,t.type,r,i,n,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:r}=t;return X4(r,e,n)},gradientLength:t=>{var e,n;const{legend:r,legendConfig:i}=t;return null!==(n=null!==(e=r.gradientLength)&&void 0!==e?e:i.gradientLength)&&void 0!==n?n:Lrt(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:n})=>{var r,i;return null!==(i=null!==(r=t.labelOverlap)&&void 0!==r?r:e.labelOverlap)&&void 0!==i?i:Brt(n)},symbolType:({legend:t,markDef:e,channel:n,encoding:r})=>{var i;return null!==(i=t.symbolType)&&void 0!==i?i:Irt(e.type,n,r.shape,e.shape)},title:({fieldOrDatumDef:t,config:e})=>W6(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:n})=>{if(o1(n)&&d4(e)){if("gradient"===t)return}else if("symbol"===t)return;return t},values:({fieldOrDatumDef:t,legend:e})=>Nrt(e,t)};function Nrt(t,e){const n=t.values;return Object(rt["A"])(n)?a8(e,n):m5(n)?n:void 0}function Irt(t,e,n,r){var i;if("shape"!==e){const t=null!==(i=Ert(n))&&void 0!==i?i:r;if(t)return t}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Rrt(t){const{legend:e}=t;return fQ(e.type,Frt(t))}function Frt({channel:t,timeUnit:e,scaleType:n}){if(o1(t)){if(zJ(["quarter","month","day"],e))return"symbol";if(d4(n))return"gradient"}return"symbol"}function Prt({legendConfig:t,legendType:e,orient:n,legend:r}){var i,o;return null!==(o=null!==(i=r.direction)&&void 0!==i?i:t[e?"gradientDirection":"symbolDirection"])&&void 0!==o?o:$rt(n,e)}function $rt(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===e?"horizontal":void 0}}function Lrt({legendConfig:t,model:e,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:u}=t;if(d4(i))return"horizontal"===n?"top"===r||"bottom"===r?zrt(e,"width",a,o):a:zrt(e,"height",u,s)}function zrt(t,e,n,r){const i=t.getSizeSignalRef(e).signal;return{signal:`clamp(${i}, ${n}, ${r})`}}function Brt(t){if(zJ(["quantile","threshold","log"],t))return"greedy"}function Urt(t){const e=uat(t)?Wrt(t):Grt(t);return t.component.legends=e,e}function Wrt(t){const{encoding:e}=t,n={};for(const r of[M0,...f7]){const i=Y6(e[r]);i&&t.getScaleComponent(r)&&(r===R0&&x6(i)&&i.type===H5||(n[r]=qrt(t,r)))}return n}function Vrt(t,e){const n=t.scaleName(e);if("trail"===t.mark){if("color"===e)return{stroke:n};if("size"===e)return{strokeWidth:n}}return"color"===e?t.markDef.filled?{fill:n}:{stroke:n}:{[e]:n}}function Hrt(t,e,n,r){switch(e){case"disable":return void 0!==n;case"values":return!!(null===n||void 0===n?void 0:n.values);case"title":if("title"===e&&t===(null===r||void 0===r?void 0:r.title))return!0}return t===(n||{})[e]}function qrt(t,e){var n,r,i;let o=t.legend(e);const{markDef:a,encoding:s,config:u}=t,c=u.legend,l=new _rt({},Vrt(t,e));Oet(t,e,l);const h=void 0!==o?!o:c.disable;if(l.set("disable",h,void 0!==o),h)return l;o=o||{};const f=t.getScaleComponent(e).get("type"),d=Y6(s[e]),p=x6(d)?null===(n=p5(d.timeUnit))||void 0===n?void 0:n.unit:void 0,g=o.orient||u.legend.orient||"right",m=Rrt({legend:o,channel:e,timeUnit:p,scaleType:f}),v=Prt({legend:o,legendType:m,orient:g,legendConfig:c}),y={legend:o,channel:e,model:t,markDef:a,encoding:s,fieldOrDatumDef:d,legendConfig:c,config:u,scaleType:f,orient:g,legendType:m,direction:v};for(const O of wrt){const n=O in Mrt?Mrt[O](y):o[O];if(void 0!==n){const r=Hrt(n,O,o,t.fieldDef(e));(r||void 0===u.legend[O])&&l.set(O,n,r)}}const b=null!==(r=null===o||void 0===o?void 0:o.encoding)&&void 0!==r?r:{},x=l.get("selections"),w={},_={fieldOrDatumDef:d,model:t,channel:e,legendCmpt:l,legendType:m};for(const O of["labels","legend","title","symbols","gradient","entries"]){const e=vrt(null!==(i=b[O])&&void 0!==i?i:{},t),n=O in Ort?Ort[O](e,_):e;void 0===n||KJ(n)||(w[O]=Object.assign(Object.assign(Object.assign({},(null===x||void 0===x?void 0:x.length)&&x6(d)?{name:`${eQ(d.field)}_legend_${O}`}:{}),(null===x||void 0===x?void 0:x.length)?{interactive:!!x}:{}),{update:n}))}return KJ(w)||l.set("encode",w,!!(null===o||void 0===o?void 0:o.encoding)),l}function Grt(t){const{legends:e,resolve:n}=t.component;for(const r of t.children){Urt(r);for(const i of ZJ(r.component.legends))n.legend[i]=brt(t.component.resolve,i),"shared"===n.legend[i]&&(e[i]=Xrt(e[i],r.component.legends[i]),e[i]||(n.legend[i]="independent",delete e[i]))}for(const r of ZJ(e))for(const e of t.children)e.component.legends[r]&&"shared"===n.legend[r]&&delete e.component.legends[r];return e}function Xrt(t,e){var n,r,i,o;if(!t)return e.clone();const a=t.getWithExplicit("orient"),s=e.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;let u=!1;for(const c of wrt){const n=P9(t.getWithExplicit(c),e.getWithExplicit(c),c,"legend",(t,e)=>{switch(c){case"symbolType":return Yrt(t,e);case"title":return _8(t,e);case"type":return u=!0,I9("symbol")}return F9(t,e,c,"legend")});t.setWithExplicit(c,n)}return u&&((null===(r=null===(n=t.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)&&rQ(t.implicit,["encode","gradient"]),(null===(o=null===(i=t.explicit)||void 0===i?void 0:i.encode)||void 0===o?void 0:o.gradient)&&rQ(t.explicit,["encode","gradient"])),t}function Yrt(t,e){return"circle"===e.value?e:t}function Krt(t,e,n,r){var i,o,a;t.encode=null!==(i=t.encode)&&void 0!==i?i:{},t.encode[e]=null!==(o=t.encode[e])&&void 0!==o?o:{},t.encode[e].update=null!==(a=t.encode[e].update)&&void 0!==a?a:{},t.encode[e].update[n]=r}function Zrt(t){const e=t.component.legends,n={};for(const i of ZJ(e)){const r=t.getScaleComponent(i),o=PJ(r.get("domains"));if(n[o])for(const t of n[o]){const r=Xrt(t,e[i]);r||n[o].push(e[i])}else n[o]=[e[i].clone()]}const r=JJ(n).flat().map(e=>Jrt(e,t.config)).filter(t=>void 0!==t);return r}function Jrt(t,e){var n,r,i;const o=t.combine(),{disable:a,labelExpr:s,selections:u}=o,c=wJ(o,["disable","labelExpr","selections"]);if(!a){if(!1===e.aria&&void 0==c.aria&&(c.aria=!1),null===(n=c.encode)||void 0===n?void 0:n.symbols){const t=c.encode.symbols.update;!t.fill||"transparent"===t.fill["value"]||t.stroke||c.stroke||(t.stroke={value:"transparent"});for(const e of f7)c[e]&&delete t[e]}if(c.title||delete c.title,void 0!==s){let t=s;(null===(i=null===(r=c.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&m5(c.encode.labels.update.text)&&(t=cQ(s,"datum.label",c.encode.labels.update.text.signal)),Krt(c,"labels","text",{signal:t})}for(const t in c){const e=c[t];if(m5(e)){const n=d7[t];if(n){const{vgProp:r,part:i}=n;Krt(c,i,r,e),delete c[t]}}}return c}}function Qrt(t){return hat(t)||lat(t)?tit(t):eit(t)}function tit(t){return t.children.reduce((t,e)=>t.concat(e.assembleProjections()),eit(t))}function eit(t){const e=t.component.projection;if(!e||e.merged)return[];const n=e.combine(),{name:r}=n;if(e.data){const i={signal:`[${e.size.map(t=>t.signal).join(", ")}]`},o=e.data.reduce((e,n)=>{const r=m5(n)?n.signal:`data('${t.lookupDataSource(n)}')`;return zJ(e,r)||e.push(r),e},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const nit=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class rit extends M9{constructor(t,e,n,r){super(Object.assign({},e),{name:t}),this.specifiedProjection=e,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function iit(t){t.component.projection=uat(t)?oit(t):uit(t)}function oit(t){var e;if(t.hasProjection){const n=t.specifiedProjection,r=!(n&&(null!=n.scale||null!=n.translate)),i=r?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,o=r?ait(t):void 0;return new rit(t.projectionName(!0),Object.assign(Object.assign({},null!==(e=t.config.projection)&&void 0!==e?e:{}),null!==n&&void 0!==n?n:{}),i,o)}}function ait(t){const e=[],{encoding:n}=t;for(const r of[[E0,T0],[D0,j0]])(Y6(n[r[0]])||Y6(n[r[1]]))&&e.push({signal:t.getName("geojson_"+e.length)});return t.channelHasField(R0)&&t.typedFieldDef(R0).type===H5&&e.push({signal:t.getName("geojson_"+e.length)}),0===e.length&&e.push(t.requestDataName(q9)),e}function sit(t,e){const n=UJ(nit,n=>!Object(rt["v"])(t.explicit,n)&&!Object(rt["v"])(e.explicit,n)||!(!Object(rt["v"])(t.explicit,n)||!Object(rt["v"])(e.explicit,n)||PJ(t.get(n))!==PJ(e.get(n)))),r=PJ(t.size)===PJ(e.size);if(r){if(n)return t;if(PJ(t.explicit)===PJ({}))return e;if(PJ(e.explicit)===PJ({}))return t}return null}function uit(t){if(0===t.children.length)return;let e;for(const r of t.children)iit(r);const n=UJ(t.children,t=>{const n=t.component.projection;if(n){if(e){const t=sit(e,n);return t&&(e=t),!!t}return e=n,!0}return!0});if(e&&n){const n=t.projectionName(!0),r=new rit(n,e.specifiedProjection,e.size,IJ(e.data));for(const e of t.children){const t=e.component.projection;t&&(t.isFit&&r.data.push(...e.component.projection.data),e.renameProjection(t.get("name"),n),t.merged=!0)}return r}}function cit(t,e,n,r){var i,o;if(s8(e,n)){const a=uat(t)&&null!==(o=null!==(i=t.axis(n))&&void 0!==i?i:t.legend(n))&&void 0!==o?o:{},s=N6(e,{expr:"datum"}),u=N6(e,{expr:"datum",binSuffix:"end"});return{formulaAs:N6(e,{binSuffix:"range",forAs:!0}),formula:Q4(s,u,a.format,a.formatType,r)}}return{}}function lit(t,e){return`${p2(t)}_${e}`}function hit(t,e){return{signal:t.getName(e+"_bins"),extentSignal:t.getName(e+"_extent")}}function fit(t,e,n){var r;const i=null!==(r=t8(n,void 0))&&void 0!==r?r:{},o=lit(i,e);return t.getName(o+"_bins")}function dit(t){return"as"in t}function pit(t,e,n){let r,i;r=dit(t)?Object(rt["H"])(t.as)?[t.as,t.as+"_end"]:[t.as[0],t.as[1]]:[N6(t,{forAs:!0}),N6(t,{binSuffix:"end",forAs:!0})];const o=Object.assign({},t8(e,void 0)),a=lit(o,t.field),{signal:s,extentSignal:u}=hit(n,a);if(y2(o.extent)){const t=o.extent,e=t.selection;i=ynt(n.getSelectionComponent(eQ(e),e),t),delete o.extent}const c=Object.assign(Object.assign(Object.assign({bin:o,field:t.field,as:[r]},s?{signal:s}:{}),u?{extentSignal:u}:{}),i?{span:i}:{});return{key:a,binComponent:c}}class git extends net{constructor(t,e){super(t),this.bins=e}clone(){return new git(null,IJ(this.bins))}static makeFromEncoding(t,e){const n=e.reduceFieldDef((t,n,r)=>{if(k6(n)&&g2(n.bin)){const{key:i,binComponent:o}=pit(n,n.bin,e);t[i]=Object.assign(Object.assign(Object.assign({},o),t[i]),cit(e,n,r,e.config))}return t},{});return KJ(n)?null:new git(t,n)}static makeFromTransform(t,e,n){const{key:r,binComponent:i}=pit(e,e.bin,n);return new git(t,{[r]:i})}merge(t,e){for(const n of ZJ(t.bins))n in this.bins?(e(t.bins[n].signal,this.bins[n].signal),this.bins[n].as=HJ([...this.bins[n].as,...t.bins[n].as],$J)):this.bins[n]=t.bins[n];for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}producedFields(){return new Set(JJ(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(JJ(this.bins).map(t=>t.field))}hash(){return"Bin "+$J(this.bins)}assemble(){return JJ(this.bins).flatMap(t=>{const e=[],[n,...r]=t.as,i=t.bin,{extent:o}=i,a=wJ(i,["extent"]),s=Object.assign(Object.assign(Object.assign({type:"bin",field:uQ(t.field),as:n,signal:t.signal},y2(o)?{extent:null}:{extent:o}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!o&&t.extentSignal&&(e.push({type:"extent",field:uQ(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),e.push(s);for(const u of r)for(let t=0;t<2;t++)e.push({type:"formula",expr:N6({field:n[t]},{expr:"datum"}),as:u[t]});return t.formula&&e.push({type:"formula",expr:t.formula,as:t.formulaAs}),e})}}class mit extends net{constructor(t){let e;if(super(null),t=null!==t&&void 0!==t?t:{name:"source"},U9(t)||(e=t.format?Object.assign({},FJ(t.format,["parse"])):{}),z9(t))this._data={values:t.values};else if(L9(t)){if(this._data={url:t.url},!e.type){let n=/(?:\.([^.]+))?$/.exec(t.url)[1];zJ(["json","csv","tsv","dsv","topojson"],n)||(n="json"),e.type=n}}else V9(t)?this._data={values:[{type:"Sphere"}]}:(B9(t)||U9(t))&&(this._data={});this._generator=U9(t),t.name&&(this._name=t.name),e&&!KJ(e)&&(this._data.format=e)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}function vit(t){for(const e of t){for(const t of e.children)if(t.parent!==e)return console.error("Dataflow graph is inconsistent.",e,t),!1;if(!vit(e.children))return!1}return!0}class yit extends net{constructor(t,e){super(t),this.params=e}clone(){return new yit(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return"Graticule "+$J(this.params)}assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}class bit extends net{constructor(t,e){super(t),this.params=e}clone(){return new bit(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([null!==(t=this.params.as)&&void 0!==t?t:"data"])}hash(){return"Hash "+$J(this.params)}assemble(){return Object.assign({type:"sequence"},this.params)}}function xit(t){return t instanceof mit||t instanceof yit||t instanceof bit}class wit{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}}class _it extends wit{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:t,mutatedFlag:e}){t&&this.setContinue(),e&&this.setMutated()}reset(){}optimizeNextFromLeaves(t){if(xit(t))return!1;const e=t.parent,{continueFlag:n}=this.run(t);return n&&this.optimizeNextFromLeaves(e),this.mutatedFlag}}class Oit extends wit{}function Sit(t,e,n,r){const i=uat(r)?r.encoding[S1(e)]:void 0;if(k6(n)&&uat(r)&&g6(e,n,i,r.stack,r.markDef,r.config))t.add(N6(n,{})),t.add(N6(n,{suffix:"end"})),n.bin&&s8(n,e)&&t.add(N6(n,{binSuffix:"range"}));else if(n1(e)){const n=e1(e);t.add(r.getName(n))}else t.add(N6(n));return t}function Cit(t,e){var n;for(const r of ZJ(e)){const i=e[r];for(const e of ZJ(i))r in t?t[r][e]=new Set([...null!==(n=t[r][e])&&void 0!==n?n:[],...i[e]]):t[r]={[e]:i[e]}}}class kit extends net{constructor(t,e,n){super(t),this.dimensions=e,this.measures=n}clone(){return new kit(null,new Set(this.dimensions),IJ(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,e){let n=!1;e.forEachFieldDef(t=>{t.aggregate&&(n=!0)});const r={},i=new Set;return n?(e.forEachFieldDef((t,n)=>{var o,a,s,u;const{aggregate:c,field:l}=t;if(c)if("count"===c)r["*"]=null!==(o=r["*"])&&void 0!==o?o:{},r["*"]["count"]=new Set([N6(t,{forAs:!0})]);else{if(u0(c)||c0(c)){const t=u0(c)?"argmin":"argmax",e=c[t];r[e]=null!==(a=r[e])&&void 0!==a?a:{},r[e][t]=new Set([N6({op:t,field:e},{forAs:!0})])}else r[l]=null!==(s=r[l])&&void 0!==s?s:{},r[l][c]=new Set([N6(t,{forAs:!0})]);s2(n)&&"unaggregated"===e.scaleDomain(n)&&(r[l]=null!==(u=r[l])&&void 0!==u?u:{},r[l]["min"]=new Set([N6({field:l,aggregate:"min"},{forAs:!0})]),r[l]["max"]=new Set([N6({field:l,aggregate:"max"},{forAs:!0})]))}else Sit(i,n,t,e)}),i.size+ZJ(r).length===0?null:new kit(t,i,r)):null}static makeFromTransform(t,e){var n,r,i;const o=new Set,a={};for(const s of e.aggregate){const{op:t,field:e,as:i}=s;t&&("count"===t?(a["*"]=null!==(n=a["*"])&&void 0!==n?n:{},a["*"]["count"]=new Set([i||N6(s,{forAs:!0})])):(a[e]=null!==(r=a[e])&&void 0!==r?r:{},a[e][t]=new Set([i||N6(s,{forAs:!0})])))}for(const s of null!==(i=e.groupby)&&void 0!==i?i:[])o.add(s);return o.size+ZJ(a).length===0?null:new kit(t,o,a)}merge(t){return qJ(this.dimensions,t.dimensions)?(Cit(this.measures,t.measures),!0):(V3("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ZJ(this.measures)])}producedFields(){const t=new Set;for(const e of ZJ(this.measures))for(const n of ZJ(this.measures[e])){const r=this.measures[e][n];0===r.size?t.add(`${n}_${e}`):r.forEach(t.add,t)}return t}hash(){return"Aggregate "+$J({dimensions:this.dimensions,measures:this.measures})}assemble(){const t=[],e=[],n=[];for(const i of ZJ(this.measures))for(const r of ZJ(this.measures[i]))for(const o of this.measures[i][r])n.push(o),t.push(r),e.push("*"===i?null:uQ(i));const r={type:"aggregate",groupby:[...this.dimensions].map(uQ),ops:t,fields:e,as:n};return r}}class Ait extends net{constructor(t,e,n,r){super(t),this.model=e,this.name=n,this.data=r;for(const i of s1){const t=e.facet[i];if(t){const{bin:n,sort:r}=t;this[i]=Object.assign({name:e.getName(i+"_domain"),fields:[N6(t),...g2(n)?[N6(t,{binSuffix:"end"})]:[]]},o6(r)?{sortField:r}:Object(rt["A"])(r)?{sortIndexField:Ynt(t,i)}:{})}}this.childModel=e.child}hash(){let t="Facet";for(const e of s1)this[e]&&(t+=` ${e.charAt(0)}:${$J(this[e])}`);return t}get fields(){var t;const e=[];for(const n of s1)(null===(t=this[n])||void 0===t?void 0:t.fields)&&e.push(...this[n].fields);return e}dependentFields(){const t=new Set(this.fields);for(const e of s1)this[e]&&(this[e].sortField&&t.add(this[e].sortField.field),this[e].sortIndexField&&t.add(this[e].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const e of U1){const n=this.childModel.component.scales[e];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(h4(r)&&v5(i)){const n=Oot(this.childModel,e),r=_ot(n);r?t[e]=r:W3(`Unknown field for ${e}. Cannot calculate view size.`)}}}return t}assembleRowColumnHeaderData(t,e,n){const r={row:"y",column:"x"}[t],i=[],o=[],a=[];n&&n[r]&&(e?(i.push("distinct_"+n[r]),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push("distinct_"+n[r]));const{sortField:s,sortIndexField:u}=this[t];if(s){const{op:t=e6,field:e}=s;i.push(e),o.push(t),a.push(N6(s,{forAs:!0}))}else u&&(i.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:null!==e&&void 0!==e?e:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},i.length?{fields:i,ops:o,as:a}:{})]}}assembleFacetHeaderData(t){var e,n;const{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,o=[],a={};for(const c of Qnt){for(const t of trt){const r=null!==(e=i[c]&&i[c][t])&&void 0!==e?e:[];for(const t of r)if((null===(n=t.axes)||void 0===n?void 0:n.length)>0){a[c]=!0;break}}if(a[c]){const t=`length(data("${this.facet.name}"))`,e="row"===c?r?{signal:`ceil(${t} / ${r})`}:1:r?{signal:`min(${t}, ${r})`}:{signal:t};o.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:e}]})}}const{row:s,column:u}=a;return(s||u)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,t)),o}assemble(){var t,e;const n=[];let r=null;const i=this.getChildIndependentFieldsWithStep(),{column:o,row:a,facet:s}=this;if(o&&a&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(null!==(t=i.x)&&void 0!==t?t:[],null!==(e=i.y)&&void 0!==e?e:[]),a=o.map(()=>"distinct");n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:a}]})}for(const u of[y0,v0])this[u]&&n.push(this.assembleRowColumnHeaderData(u,r,i));if(s){const t=this.assembleFacetHeaderData(i);t&&n.push(...t)}return n}}function Tit(t){return"'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]?t.slice(1,-1):t}function Eit(t,e){const n=oQ(t);if("number"===e)return`toNumber(${n})`;if("boolean"===e)return`toBoolean(${n})`;if("string"===e)return`toString(${n})`;if("date"===e)return`toDate(${n})`;if("flatten"===e)return n;if(0===e.indexOf("date:")){const t=Tit(e.slice(5,e.length));return`timeParse(${n},'${t}')`}if(0===e.indexOf("utc:")){const t=Tit(e.slice(4,e.length));return`utcParse(${n},'${t}')`}return W3(v.unrecognizedParse(e)),null}function jit(t){const e={};return DJ(t.filter,t=>{var n;if(I5(t)){let r=null;k5(t)?r=t.equal:D5(t)?r=t.range[0]:M5(t)&&(r=(null!==(n=t.oneOf)&&void 0!==n?n:t["in"])[0]),r&&(H3(r)?e[t.field]="date":Object(rt["E"])(r)?e[t.field]="number":Object(rt["H"])(r)&&(e[t.field]="string")),t.timeUnit&&(e[t.field]="date")}}),e}function Dit(t){const e={};function n(t){r8(t)?e[t.field]="date":"quantitative"===t.type&&d0(t.aggregate)?e[t.field]="number":hQ(t.field)>1?t.field in e||(e[t.field]="flatten"):T6(t)&&o6(t.sort)&&hQ(t.sort.field)>1&&(t.sort.field in e||(e[t.sort.field]="flatten"))}if((uat(t)||cat(t))&&t.forEachFieldDef((e,r)=>{if(k6(e))n(e);else{const i=_1(r),o=t.fieldDef(i);n(Object.assign(Object.assign({},e),{type:o.type}))}}),uat(t)){const{mark:n,markDef:r,encoding:i}=t;if(BQ(n)&&!t.encoding.order){const t="horizontal"===r.orient?"y":"x",n=i[t];x6(n)&&"quantitative"===n.type&&!(n.field in e)&&(e[n.field]="number")}}return e}function Mit(t){const e={};if(uat(t)&&t.component.selection)for(const n of ZJ(t.component.selection)){const r=t.component.selection[n];for(const t of r.project.items)!t.channel&&hQ(t.field)>1&&(e[t.field]="flatten")}return e}class Nit extends net{constructor(t,e){super(t),this._parse=e}clone(){return new Nit(null,IJ(this._parse))}hash(){return"Parse "+$J(this._parse)}static makeExplicit(t,e,n){let r={};const i=e.data;return!U9(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(t,r,{},n)}static makeWithAncestors(t,e,n,r){for(const a of ZJ(n)){const t=r.getWithExplicit(a);void 0!==t.value&&(t.explicit||t.value===n[a]||"derived"===t.value||"flatten"===n[a]?delete n[a]:W3(v.differentParse(a,n[a],t.value)))}for(const a of ZJ(e)){const t=r.get(a);void 0!==t&&(t===e[a]?delete e[a]:W3(v.differentParse(a,e[a],t)))}const i=new M9(e,n);r.copyAll(i);const o={};for(const a of ZJ(i.combine())){const t=i.get(a);null!==t&&(o[a]=t)}return 0===ZJ(o).length||r.parseNothing?null:new Nit(t,o)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const e of ZJ(this._parse)){const n=this._parse[e];1===hQ(e)&&(t[e]=n)}return t}producedFields(){return new Set(ZJ(this._parse))}dependentFields(){return new Set(ZJ(this._parse))}assembleTransforms(t=!1){return ZJ(this._parse).filter(e=>!t||hQ(e)>1).map(t=>{const e=Eit(t,this._parse[t]);if(!e)return null;const n={type:"formula",expr:e,as:lQ(t)};return n}).filter(t=>null!==t)}}class Iit extends net{clone(){return new Iit(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([m7])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:m7}}}class Rit extends net{constructor(t,e){super(t),this.transform=e}clone(){return new Rit(null,IJ(this.transform))}addDimensions(t){this.transform.groupby=HJ(this.transform.groupby.concat(t),t=>t)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(t=>t.field).filter(t=>void 0!==t).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var e;return null!==(e=t.as)&&void 0!==e?e:N6(t)}hash(){return"JoinAggregateTransform "+$J(this.transform)}assemble(){const t=[],e=[],n=[];for(const i of this.transform.joinaggregate)e.push(i.op),n.push(this.getDefaultName(i)),t.push(void 0===i.field?null:i.field);const r=this.transform.groupby;return Object.assign({type:"joinaggregate",as:n,ops:e,fields:t},void 0!==r?{groupby:r}:{})}}function Fit(t){return t.stack.stackBy.reduce((t,e)=>{const n=e.fieldDef,r=N6(n);return r&&t.push(r),t},[])}function Pit(t){return Object(rt["A"])(t)&&t.every(t=>Object(rt["H"])(t))&&t.length>1}class $it extends net{constructor(t,e){super(t),this._stack=e}clone(){return new $it(null,IJ(this._stack))}static makeFromTransform(t,e){const{stack:n,groupby:r,as:i,offset:o="zero"}=e,a=[],s=[];if(void 0!==e.sort)for(const l of e.sort)a.push(l.field),s.push(fQ(l.order,"ascending"));const u={field:a,order:s};let c;return c=Pit(i)?i:Object(rt["H"])(i)?[i,i+"_end"]:[e.stack+"_start",e.stack+"_end"],new $it(t,{stackField:n,groupby:r,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(t,e){const n=e.stack,{encoding:r}=e;if(!n)return null;const{groupbyChannel:i,fieldChannel:o,offset:a,impute:s}=n;let u;if(i){const t=r[i];u=X6(t)}const c=Fit(e),l=e.encoding.order;let h;return h=Object(rt["A"])(l)||x6(l)?b8(l):c.reduce((t,e)=>(t.field.push(e),t.order.push("y"===o?"descending":"ascending"),t),{field:[],order:[]}),new $it(t,{dimensionFieldDef:u,stackField:e.vgField(o),facetby:[],stackby:c,sort:h,offset:a,impute:s,as:[e.vgField(o,{suffix:"start",forAs:!0}),e.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return"Stack "+$J(this._stack)}getGroupbyFields(){const{dimensionFieldDef:t,impute:e,groupby:n}=this._stack;return t?t.bin?e?[N6(t,{binSuffix:"mid"})]:[N6(t,{}),N6(t,{binSuffix:"end"})]:[N6(t)]:null!==n&&void 0!==n?n:[]}assemble(){const t=[],{facetby:e,dimensionFieldDef:n,stackField:r,stackby:i,sort:o,offset:a,impute:s,as:u}=this._stack;if(s&&n){const{band:o=.5,bin:a}=n;a&&t.push({type:"formula",expr:o+"*"+N6(n,{expr:"datum"})+`+${1-o}*`+N6(n,{expr:"datum",binSuffix:"end"}),as:N6(n,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:r,groupby:[...i,...e],key:N6(n,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...e],field:r,sort:o,as:u,offset:a}),t}}class Lit extends net{constructor(t,e){super(t),this.transform=e}clone(){return new Lit(null,IJ(this.transform))}addDimensions(t){this.transform.groupby=HJ(this.transform.groupby.concat(t),t=>t)}dependentFields(){var t,e;const n=new Set;return(null!==(t=this.transform.groupby)&&void 0!==t?t:[]).forEach(n.add,n),(null!==(e=this.transform.sort)&&void 0!==e?e:[]).forEach(t=>n.add(t.field)),this.transform.window.map(t=>t.field).filter(t=>void 0!==t).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var e;return null!==(e=t.as)&&void 0!==e?e:N6(t)}hash(){return"WindowTransform "+$J(this.transform)}assemble(){var t;const e=[],n=[],r=[],i=[];for(const h of this.transform.window)n.push(h.op),r.push(this.getDefaultName(h)),i.push(void 0===h.param?null:h.param),e.push(void 0===h.field?null:h.field);const o=this.transform.frame,a=this.transform.groupby;if(o&&null===o[0]&&null===o[1]&&n.every(t=>l0(t)))return Object.assign({type:"joinaggregate",as:r,ops:n,fields:e},void 0!==a?{groupby:a}:{});const s=[],u=[];if(void 0!==this.transform.sort)for(const h of this.transform.sort)s.push(h.field),u.push(null!==(t=h.order)&&void 0!==t?t:"ascending");const c={field:s,order:u},l=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:i,as:r,ops:n,fields:e,sort:c},void 0!==l?{ignorePeers:l}:{}),void 0!==a?{groupby:a}:{}),void 0!==o?{frame:o}:{})}}class zit extends _it{run(t){const e=t.parent;if(t instanceof Nit){if(xit(e))return this.flags;if(e.numChildren()>1)return this.setContinue(),this.flags;if(e instanceof Nit)this.setMutated(),e.merge(t);else{if(YJ(e.producedFields(),t.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),t.swapWithParent()}}return this.setContinue(),this.flags}}class Bit extends Oit{mergeNodes(t,e){const n=e.shift();for(const r of e)t.removeChild(r),r.parent=n,r.remove()}run(t){const e=t.children.map(t=>t.hash()),n={};for(let r=0;r<e.length;r++)void 0===n[e[r]]?n[e[r]]=[t.children[r]]:n[e[r]].push(t.children[r]);for(const r of ZJ(n))n[r].length>1&&(this.setMutated(),this.mergeNodes(t,n[r]));for(const r of t.children)this.run(r);return this.mutatedFlag}}class Uit extends _it{run(t){return t instanceof ret||t.numChildren()>0||t instanceof Ait||(this.setMutated(),t.remove()),this.flags}}class Wit extends _it{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(t){if(this.setContinue(),t instanceof iet){const e=t.producedFields();GJ(e,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...e]),this.prev=t}return this.flags}reset(){this.fields.clear()}}class Vit extends _it{run(t){this.setContinue();const e=t.parent,n=e.children.filter(t=>t instanceof iet),r=n.pop();for(const i of n)this.setMutated(),r.merge(i);return this.flags}}function Hit(t){function e(n){if(!(n instanceof Ait)){const r=n.clone();if(r instanceof ret){const e=tot+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof kit||r instanceof $it||r instanceof Lit||r instanceof Rit)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}return e}function qit(t){if(t instanceof Ait)if(1!==t.numChildren()||t.children[0]instanceof ret){const e=t.model.component.data.main;Git(e);const n=Hit(t),r=t.children.map(n).flat();for(const t of r)t.parent=e}else{const e=t.children[0];(e instanceof kit||e instanceof $it||e instanceof Lit||e instanceof Rit)&&e.addDimensions(t.fields),e.swapWithParent(),qit(t)}else t.children.map(qit)}function Git(t){if(t instanceof ret&&t.type===q9&&1===t.numChildren()){const e=t.children[0];e instanceof Ait||(e.swapWithParent(),Git(t))}}class Xit extends Oit{constructor(){super()}run(t){t instanceof ret&&!t.isRequired()&&(this.setMutated(),t.remove());for(const e of t.children)this.run(e);return this.mutatedFlag}}class Yit extends Oit{constructor(t){super(),this.requiresSelectionId=t&&hnt(t)}run(t){t instanceof Iit&&(this.requiresSelectionId&&(xit(t.parent)||t.parent instanceof kit||t.parent instanceof Nit)||(this.setMutated(),t.remove()));for(const e of t.children)this.run(e);return this.mutatedFlag}}class Kit extends _it{run(t){const e=t.parent,n=[...e.children],r=e.children.filter(t=>t instanceof Nit);if(e.numChildren()>1&&r.length>=1){const t={},i=new Set;for(const e of r){const n=e.parse;for(const e of ZJ(n))e in t?t[e]!==n[e]&&i.add(e):t[e]=n[e]}for(const e of i)delete t[e];if(!KJ(t)){this.setMutated();const r=new Nit(e,t);for(const i of n){if(i instanceof Nit)for(const e of ZJ(t))delete i.parse[e];e.removeChild(i),i.parent=r,i instanceof Nit&&0===ZJ(i.parse).length&&i.remove()}}}return this.setContinue(),this.flags}}class Zit extends _it{run(t){const e=t.parent,n=e.children.filter(t=>t instanceof kit),r={};for(const i of n){const t=$J(i.groupBy);t in r||(r[t]=[]),r[t].push(i)}for(const i of ZJ(r)){const t=r[i];if(t.length>1){const n=t.pop();for(const r of t)n.merge(r)&&(e.removeChild(r),r.parent=n,r.remove(),this.setMutated())}}return this.setContinue(),this.flags}}class Jit extends _it{constructor(t){super(),this.model=t}run(t){const e=t.parent,n=!(xit(e)||e instanceof gnt||e instanceof Nit||e instanceof Iit),r=[],i=[];for(const o of e.children)o instanceof git&&(n&&!YJ(e.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const t=r.pop();for(const e of r)t.merge(e,this.model.renameSignal.bind(this.model));this.setMutated(),e instanceof git?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(i.length>1){const t=i.pop();for(const e of i)t.merge(e,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}}class Qit extends _it{run(t){const e=t.parent,n=[...e.children],r=BJ(n,t=>t instanceof ret);if(!r||e.numChildren()<=1)return this.setContinue(),this.flags;const i=[];let o;for(const a of n)if(a instanceof ret){let t=a;while(1===t.numChildren()){const e=t.children[0];if(!(e instanceof ret))break;t=e}i.push(...t.children),o?(e.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=t,this.setMutated()):o=t}else i.push(a);if(i.length){this.setMutated();for(const t of i)t.parent.removeChild(t),t.parent=o}return this.setContinue(),this.flags}}const tot="scale_",eot=5;function not(t){const e=[];function n(t){if(0===t.numChildren())e.push(t);else for(const e of t.children)n(e)}for(const r of t)n(r);return e}function rot(t){return t}function iot(t,e){const n=e.map(e=>{if(t instanceof _it){const n=t.optimizeNextFromLeaves(e);return t.reset(),n}return t.run(e)});return n.some(rot)}function oot(t,e){let n=t.sources;const r=new Set;return r.add(iot(new Xit,n)),r.add(iot(new Yit(e),n)),n=n.filter(t=>t.numChildren()>0),r.add(iot(new Uit,not(n))),n=n.filter(t=>t.numChildren()>0),r.add(iot(new zit,not(n))),r.add(iot(new Jit(e),not(n))),r.add(iot(new Wit,not(n))),r.add(iot(new Kit,not(n))),r.add(iot(new Zit,not(n))),r.add(iot(new Vit,not(n))),r.add(iot(new Bit,n)),r.add(iot(new Qit,not(n))),t.sources=n,r.has(!0)}function aot(t,e){vit(t.sources);let n=0,r=0;for(let i=0;i<eot;i++){if(!oot(t,e))break;n++}t.sources.map(qit);for(let i=0;i<eot;i++){if(!oot(t,e))break;r++}vit(t.sources),Math.max(n,r)===eot&&W3(`Maximum optimization runs(${eot}) reached.`)}class sot{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,e){return new sot(()=>t(e))}}function uot(t){uat(t)?cot(t):lot(t)}function cot(t){const e=t.component.scales;for(const n of ZJ(e)){const r=fot(t,n),i=e[n];if(i.setWithExplicit("domains",r),vot(t,n),t.component.data.isFaceted){let e=t;while(!cat(e)&&e.parent)e=e.parent;const i=e.component.resolve.scale[n];if("shared"===i)for(const t of r.value)x5(t)&&(t.data=tot+t.data.replace(tot,""))}}}function lot(t){for(const n of t.children)uot(n);const e=t.component.scales;for(const n of ZJ(e)){let r,i=null;for(const e of t.children){const t=e.component.scales[n];if(t){r=void 0===r?t.getWithExplicit("domains"):P9(r,t.getWithExplicit("domains"),"domains","scale",xot);const e=t.get("selectionExtent");i&&e&&i.selection!==e.selection&&W3("The same selection must be used to override scale domains in a layered view."),i=e}}e[n].setWithExplicit("domains",r),i&&e[n].set("selectionExtent",i,!0)}}function hot(t,e,n,r){if("unaggregated"===t){const{valid:t,reason:r}=bot(e,n);if(!t)return void W3(r)}else if(void 0===t&&r.useUnaggregatedDomain){const{valid:t}=bot(e,n);if(t)return"unaggregated"}return t}function fot(t,e){const n=t.getScaleComponent(e).get("type"),{encoding:r}=t,i=hot(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return i!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign(Object.assign({},t.specifiedScales[e]),{domain:i})),"x"===e&&Y6(r.x2)?Y6(r.x)?P9(got(n,i,t,"x"),got(n,i,t,"x2"),"domain","scale",xot):got(n,i,t,"x2"):"y"===e&&Y6(r.y2)?Y6(r.y)?P9(got(n,i,t,"y"),got(n,i,t,"y2"),"domain","scale",xot):got(n,i,t,"y2"):got(n,i,t,e)}function dot(t,e,n){return t.map(t=>{const r=o8(t,{timeUnit:n,type:e});return{signal:`{data: ${r}}`}})}function pot(t,e,n){var r;const i=null===(r=p5(n))||void 0===r?void 0:r.unit;return"temporal"===e||i?dot(t,e,i):[t]}function got(t,e,n,r){const{encoding:i}=n,o=Y6(i[r]),{type:a}=o,s=o["timeUnit"];if(y4(e)){const i=got(t,void 0,n,r),o=pot(e.unionWith,a,s);return N9([...i.value,...o])}if(m5(e))return N9([e]);if(e&&"unaggregated"!==e&&!v4(e))return N9(pot(e,a,s));const u=n.stack;if(u&&r===u.fieldChannel){if("normalize"===u.offset)return I9([[0,1]]);const t=n.requestDataName(q9);return I9([{data:t,field:n.vgField(r,{suffix:"start"})},{data:t,field:n.vgField(r,{suffix:"end"})}])}const c=s2(r)&&x6(o)?yot(n,r,t):void 0;if(_6(o)){const t=pot([o.datum],a,s);return I9(t)}const l=o;if("unaggregated"===e){const t=n.requestDataName(q9),{field:e}=o;return I9([{data:t,field:N6({field:e,aggregate:"min"})},{data:t,field:N6({field:e,aggregate:"max"})}])}if(g2(l.bin)){if(h4(t))return I9("bin-ordinal"===t?[]:[{data:tQ(c)?n.requestDataName(q9):n.requestDataName(G9),field:n.vgField(r,s8(l,r)?{binSuffix:"range"}:{}),sort:!0!==c&&Object(rt["F"])(c)?c:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:t}=l;if(g2(t)){const e=fit(n,l.field,t);return I9([new sot(()=>{const t=n.getSignalName(e);return`[${t}.start, ${t}.stop]`})])}return I9([{data:n.requestDataName(q9),field:n.vgField(r,{})}])}}if(l.timeUnit&&zJ(["time","utc"],t)&&g6(r,l,uat(n)?n.encoding[S1(r)]:void 0,n.stack,n.markDef,n.config)){const t=n.requestDataName(q9);return I9([{data:t,field:n.vgField(r)},{data:t,field:n.vgField(r,{suffix:"end"})}])}return I9(c?[{data:tQ(c)?n.requestDataName(q9):n.requestDataName(G9),field:n.vgField(r),sort:c}]:[{data:n.requestDataName(q9),field:n.vgField(r)}])}function mot(t,e){const{op:n,field:r,order:i}=t;return Object.assign(Object.assign({op:null!==n&&void 0!==n?n:e?"sum":e6},r?{field:uQ(r)}:{}),i?{order:i}:{})}function vot(t,e){var n;const r=t.component.scales[e],i=t.specifiedScales[e].domain,o=null===(n=t.fieldDef(e))||void 0===n?void 0:n.bin,a=v4(i)&&i,s=v2(o)&&y2(o.extent)&&o.extent;(a||s)&&r.set("selectionExtent",null!==a&&void 0!==a?a:s,!0)}function yot(t,e,n){if(!h4(n))return;const r=t.fieldDef(e),i=r.sort;if(a6(i))return{op:"min",field:Ynt(r,e),order:"ascending"};const{stack:o}=t,a=o?[...o.groupbyField?[o.groupbyField]:[],...o.stackBy.map(t=>t.fieldDef.field)]:void 0;if(o6(i)){const t=o&&!zJ(a,i.field);return mot(i,t)}if(i6(i)){const{encoding:e,order:n}=i,r=t.fieldDef(e),{aggregate:s,field:u}=r,c=o&&!zJ(a,u);if(u0(s)||c0(s))return mot({field:N6(r),order:n},c);if(l0(s)||!s)return mot({op:s,field:u,order:n},c)}else{if("descending"===i)return{op:"min",field:t.vgField(e),order:"descending"};if(zJ(["ascending",void 0],i))return!0}}function bot(t,e){const{aggregate:n,type:r}=t;return n?Object(rt["H"])(n)&&!m0[n]?{valid:!1,reason:v.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===e?{valid:!1,reason:v.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:v.unaggregateDomainHasNoEffectForRawField(t)}}function xot(t,e,n,r){return t.explicit&&e.explicit&&W3(v.mergeConflictingDomainProperty(n,r,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function wot(t){const e=HJ(t.map(t=>{if(x5(t)){const{sort:e}=t,n=wJ(t,["sort"]);return n}return t}),$J),n=HJ(t.map(t=>{if(x5(t)){const e=t.sort;return void 0===e||tQ(e)||("op"in e&&"count"===e.op&&delete e.field,"ascending"===e.order&&delete e.order),e}}).filter(t=>void 0!==t),$J);if(0===e.length)return;if(1===e.length){const e=t[0];if(x5(e)&&n.length>0){let t=n[0];if(n.length>1)W3(v.MORE_THAN_ONE_SORT),t=!0;else if(Object(rt["F"])(t)&&"field"in t){const n=t.field;e.field===n&&(t=!t.order||{order:t.order})}return Object.assign(Object.assign({},e),{sort:t})}return e}const r=HJ(n.map(t=>tQ(t)||!("op"in t)||t.op in s0?t:(W3(v.domainSortDropped(t)),!0)),$J);let i;1===r.length?i=r[0]:r.length>1&&(W3(v.MORE_THAN_ONE_SORT),i=!0);const o=HJ(t.map(t=>x5(t)?t.data:null),t=>t);if(1===o.length&&null!==o[0]){const t=Object.assign({data:o[0],fields:e.map(t=>t.field)},i?{sort:i}:{});return t}return Object.assign({fields:e},i?{sort:i}:{})}function _ot(t){if(x5(t)&&Object(rt["H"])(t.field))return t.field;if(y5(t)){let e;for(const n of t.fields)if(x5(n)&&Object(rt["H"])(n.field))if(e){if(e!==n.field)return W3(v.FACETED_INDEPENDENT_DIFFERENT_SOURCES),e}else e=n.field;return W3(v.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),e}if(b5(t)){W3(v.FACETED_INDEPENDENT_SAME_SOURCE);const e=t.fields[0];return Object(rt["H"])(e)?e:void 0}}function Oot(t,e){const n=t.component.scales[e],r=n.get("domains").map(e=>(x5(e)&&(e.data=t.lookupDataSource(e.data)),e));return wot(r)}function Sot(t){return hat(t)||lat(t)?t.children.reduce((t,e)=>t.concat(Sot(e)),Cot(t)):Cot(t)}function Cot(t){return ZJ(t.component.scales).reduce((e,n)=>{const r=t.component.scales[n];if(r.merged)return e;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:u,range:c,reverse:l}=i,h=wJ(i,["name","type","selectionExtent","domains","range","reverse"]),f=kot(i.range,o,n);let d;s&&(d=Vet(t,s));const p=Oot(t,n);return e.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:a},p?{domain:p}:{}),d?{domainRaw:d}:{}),{range:f}),void 0!==l?{reverse:l}:{}),h)),e},[])}function kot(t,e,n){return W1(n)&&v5(t)?{step:{signal:e+"_step"}}:t}class Aot extends M9{constructor(t,e){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",e)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||BJ(this.get("domains"),t=>Object(rt["A"])(t)&&2===t.length&&t[0]<=0&&t[1]>=0)}}const Tot=["range","scheme"];function Eot(t){return"x"===t?"width":"y"===t?"height":void 0}function jot(t){const e=t.component.scales;for(const n of a2){const r=e[n];if(!r)continue;const i=Mot(n,t);r.setWithExplicit("range",i)}}function Dot(t,e){const n=t.fieldDef(e);if(n&&n.bin&&g2(n.bin)){const r=fit(t,n.field,n.bin),i=Eot(e),o=t.getName(i);return new sot(()=>{const e=t.getSignalName(r),n=`(${e}.stop - ${e}.start) / ${e}.step`;return`${t.getSignalName(o)} / (${n})`})}}function Mot(t,e){const n=e.specifiedScales[t],{size:r}=e,i=e.getScaleComponent(t),o=i.get("type");for(const a of Tot)if(void 0!==n[a]){const r=k4(o,a),i=A4(t,a);if(r)if(i)W3(i);else switch(a){case"range":return Object(rt["A"])(n.range)&&W1(t)?N9(n.range.map(t=>{if("width"===t||"height"===t){const n=e.getName(t),r=e.getSignalName.bind(e);return sot.fromName(r,n)}return t})):N9(n.range);case"scheme":return N9(Not(n[a]))}else W3(v.scalePropertyNotWorkWithScaleType(o,a,t))}if(t===x0||t===w0){const e=t===x0?"width":"height",n=r[e];if(S7(n)){if(h4(o))return N9({step:n.step});W3(v.stepDropped(e))}}return I9(Iot(t,e))}function Not(t){return m4(t)?Object.assign({scheme:t.name},FJ(t,["name"])):{scheme:t}}function Iot(t,e){const{size:n,config:r,mark:i,encoding:o}=e,a=e.getSignalName.bind(e),{type:s}=Y6(o[t]),u=e.getScaleComponent(t),c=u.get("type"),{domain:l,domainMid:h}=e.specifiedScales[t];switch(t){case x0:case w0:{if(zJ(["point","band"],c))if(t!==x0||n.width){if(t===w0&&!n.height){const t=M7(r.view,"height");if(S7(t))return t}}else{const t=M7(r.view,"width");if(S7(t))return t}const i=Eot(t),o=e.getName(i);return t===w0&&f4(c)?[sot.fromName(a,o),0]:[0,sot.fromName(a,o)]}case F0:{const o=e.component.scales[t].get("zero"),a=Pot(i,o,r),s=Lot(i,n,e,r);return p4(c)?Fot(a,s,Rot(c,r,l,t)):[a,s]}case k0:return[0,2*Math.PI];case P0:return[0,360];case S0:return[0,new sot(()=>{const t=e.getSignalName("width"),n=e.getSignalName("height");return`min(${t},${n})/2`})];case B0:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case U0:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case R0:return"symbol";case M0:case N0:case I0:return"ordinal"===c?"nominal"===s?"category":"ordinal":void 0!==h?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case $0:case L0:case z0:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel "+t)}function Rot(t,e,n,r){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return void 0!==n&&Object(rt["A"])(n)?n.length+1:(W3(v.domainRequiredForThresholdScale(r)),3)}}function Fot(t,e,n){const r=()=>{const r=f8(e),i=f8(t),o=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${o}, ${o})`};return m5(e)?new sot(r):{signal:r()}}function Pot(t,e,n){if(e)return m5(e)?{signal:`${e.signal} ? 0 : ${Pot(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(v.incompatibleChannel("size",t))}const $ot=.95;function Lot(t,e,n,r){const i={x:Dot(n,"x"),y:Dot(n,"y")};switch(t){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const t=zot(e,i,r.view);return Object(rt["E"])(t)?t-1:new sot(()=>t.signal+" - 1")}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const t=zot(e,i,r.view);return Object(rt["E"])(t)?Math.pow($ot*t,2):new sot(()=>`pow(${$ot} * ${t.signal}, 2)`)}}throw new Error(v.incompatibleChannel("size",t))}function zot(t,e,n){const r=S7(t.width)?t.width.step:D7(n,"width"),i=S7(t.height)?t.height.step:D7(n,"height");return e.x||e.y?new sot(()=>{const t=[e.x?e.x.signal:r,e.y?e.y.signal:i];return`min(${t.join(", ")})`}):Math.min(r,i)}function Bot(t,e){uat(t)?Uot(t,e):Hot(t,e)}function Uot(t,e){const n=t.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=t;for(const s of ZJ(n)){const u=a[s],c=n[s],l=t.getScaleComponent(s),h=Y6(i[s]),f=u[e],d=l.get("type"),p=l.get("padding"),g=l.get("paddingInner"),m=k4(d,e),y=A4(s,e);if(void 0!==f&&(m?y&&W3(y):W3(v.scalePropertyNotWorkWithScaleType(d,e,s))),m&&void 0===y)if(void 0!==f)c.copyKeyFromObject(e,u);else{const n=e in Wot?Wot[e]({model:t,channel:s,fieldOrDatumDef:h,scaleType:d,scalePadding:p,scalePaddingInner:g,domain:u.domain,markDef:o,config:r}):r.scale[e];void 0!==n&&c.set(e,n,!1)}}}const Wot={bins:({model:t,fieldOrDatumDef:e})=>x6(e)?qot(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>Got(t,e.type),nice:({scaleType:t,channel:e,fieldOrDatumDef:n})=>Xot(t,e,n),padding:({channel:t,scaleType:e,fieldOrDatumDef:n,markDef:r,config:i})=>Yot(t,e,i.scale,n,r,i.bar),paddingInner:({scalePadding:t,channel:e,markDef:n,config:r})=>Kot(t,e,n.type,r.scale),paddingOuter:({scalePadding:t,channel:e,scaleType:n,markDef:r,scalePaddingInner:i,config:o})=>Zot(t,e,n,r.type,i,o.scale),reverse:({fieldOrDatumDef:t,scaleType:e,channel:n,config:r})=>{const i=x6(t)?t.sort:void 0;return Jot(e,i,n,r.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:n,markDef:r,scaleType:i})=>Qot(t,e,n,r,i)};function Vot(t){uat(t)?jot(t):Hot(t,"range")}function Hot(t,e){const n=t.component.scales;for(const r of t.children)"range"===e?Vot(r):Bot(r,e);for(const r of ZJ(n)){let i;for(const n of t.children){const t=n.component.scales[r];if(t){const n=t.getWithExplicit(e);i=P9(i,n,e,"scale",R9((t,n)=>{switch(e){case"range":return t.step&&n.step?t.step-n.step:0}return 0}))}}n[r].setWithExplicit(e,i)}}function qot(t,e){const n=e.bin;if(g2(n)){const r=fit(t,e.field,n);return new sot(()=>t.getSignalName(r))}if(m2(n)&&v2(n)&&void 0!==n.step)return{step:n.step}}function Got(t,e){if(zJ([M0,N0,I0],t)&&"nominal"!==e)return"hcl"}function Xot(t,e,n){var r;if(!(null===(r=X6(n))||void 0===r?void 0:r.bin)&&!zJ([X5.TIME,X5.UTC],t))return e in B1||void 0}function Yot(t,e,n,r,i,o){if(t in B1){if(d4(e)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:e,orient:a}=i;if("bar"===e&&(!x6(r)||!r.bin&&!r.timeUnit)&&("vertical"===a&&"x"===t||"horizontal"===a&&"y"===t))return o.continuousBandSize}if(e===X5.POINT)return n.pointPadding}}function Kot(t,e,n,r){if(void 0===t&&e in B1){const{bandPaddingInner:t,barBandPaddingInner:e,rectBandPaddingInner:i}=r;return fQ(t,"bar"===n?e:i)}}function Zot(t,e,n,r,i,o){if(void 0===t&&e in B1&&n===X5.BAND){const{bandPaddingOuter:t}=o;return fQ(t,m5(i)?{signal:i.signal+"/2"}:i/2)}}function Jot(t,e,n,r){return"x"===n&&void 0!==r.xReverse?f4(t)&&"descending"===e?m5(r.xReverse)?{signal:"!"+r.xReverse.signal}:!r.xReverse:r.xReverse:!(!f4(t)||"descending"!==e)||void 0}function Qot(t,e,n,r,i){const o=!!n&&"unaggregated"!==n;if(o&&f4(i)){if(Object(rt["A"])(n)){const t=n[0],e=n[n.length-1];if(t<=0&&e>=0)return!0}return!1}if("size"===t&&"quantitative"===e.type&&!p4(i))return!0;if((!x6(e)||!e.bin)&&zJ([...U1,...H1],t)){const{orient:e,type:n}=r;return!zJ(["bar","area","line","trail"],n)||!("horizontal"===e&&"y"===t||"vertical"===e&&"x"===t)}return!1}function tat(t,e,n,r){const i=eat(e,n,r),{type:o}=t;return s2(e)?void 0!==o?E4(e,o)?x6(n)&&!T4(o,n.type)?(W3(v.scaleTypeNotWorkWithFieldDef(o,i)),i):o:(W3(v.scaleTypeNotWorkWithChannel(e,o,i)),i):i:null}function eat(t,e,n){var r;switch(e.type){case"nominal":case"ordinal":if(o1(t)||"discrete"===d2(t))return"shape"===t&&"ordinal"===e.type&&W3(v.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(t in B1){if(zJ(["rect","bar","image","rule"],n))return"band"}else if("arc"===n&&t in V1)return"band";return void 0!==e.band||E6(e)&&(null===(r=e.axis)||void 0===r?void 0:r.tickBand)?"band":"point";case"temporal":return o1(t)?"time":"discrete"===d2(t)?(W3(v.discreteChannelCannotEncode(t,"temporal")),"ordinal"):x6(e)&&e.timeUnit&&p5(e.timeUnit).utc?"utc":"time";case"quantitative":return o1(t)?x6(e)&&g2(e.bin)?"bin-ordinal":"linear":"discrete"===d2(t)?(W3(v.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(v.invalidFieldType(e.type))}function nat(t,{ignoreRange:e}={}){rat(t),uot(t);for(const n of C4)Bot(t,n);e||Vot(t)}function rat(t){uat(t)?t.component.scales=iat(t):t.component.scales=aat(t)}function iat(t){const{encoding:e,mark:n}=t;return a2.reduce((r,i)=>{const o=Y6(e[i]);if(o&&n===zQ&&i===R0&&o.type===H5)return r;let a=o&&o["scale"];if(o&&null!==a&&!1!==a){a=null!==a&&void 0!==a?a:{};const e=tat(a,i,o,n);r[i]=new Aot(t.scaleName(i+"",!0),{value:e,explicit:a.type===e})}return r},{})}const oat=R9((t,e)=>Q5(t)-Q5(e));function aat(t){var e;const n=t.component.scales={},r={},i=t.component.resolve;for(const o of t.children){rat(o);for(const n of ZJ(o.component.scales))if(i.scale[n]=null!==(e=i.scale[n])&&void 0!==e?e:yrt(n,t),"shared"===i.scale[n]){const t=r[n],e=o.component.scales[n].getWithExplicit("type");t?Z5(t.value,e.value)?r[n]=P9(t,e,"type","scale",oat):(i.scale[n]="independent",delete r[n]):r[n]=e}}for(const o of ZJ(r)){const e=t.scaleName(o,!0),i=r[o];n[o]=new Aot(e,i);for(const n of t.children){const t=n.component.scales[o];t&&(n.renameScale(t.get("name"),e),t.merged=!0)}}return n}class sat{constructor(){this.nameMap={}}rename(t,e){this.nameMap[t]=e}has(t){return void 0!==this.nameMap[t]}get(t){while(this.nameMap[t]&&t!==this.nameMap[t])t=this.nameMap[t];return t}}function uat(t){return"unit"===(null===t||void 0===t?void 0:t.type)}function cat(t){return"facet"===(null===t||void 0===t?void 0:t.type)}function lat(t){return"concat"===(null===t||void 0===t?void 0:t.type)}function hat(t){return"layer"===(null===t||void 0===t?void 0:t.type)}class fat{constructor(t,e,n,r,i,o,a){var s,u;this.type=e,this.parent=n,this.config=i,this.view=a,this.children=[],this.correctDataNames=t=>(t.from&&t.from.data&&(t.from.data=this.lookupDataSource(t.from.data)),t.from&&t.from.facet&&t.from.facet.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t),this.parent=n,this.config=i,this.name=null!==(s=t.name)&&void 0!==s?s:r,this.title=c8(t.title)?{text:t.title}:t.title,this.scaleNameMap=n?n.scaleNameMap:new sat,this.projectionNameMap=n?n.projectionNameMap:new sat,this.signalNameMap=n?n.signalNameMap:new sat,this.data=t.data,this.description=t.description,this.transforms=gtt(null!==(u=t.transform)&&void 0!==u?u:[]),this.layout="layer"===e||"unit"===e?{}:E7(t,e,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:c6(t)||n&&n.component.data.isFaceted&&void 0===t.data},layoutSize:new M9,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?IJ(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){nat(this)}parseProjection(){iit(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Urt(this)}assembleGroupStyle(){var t,e;if("unit"===this.type||"layer"===this.type)return null!==(e=null===(t=this.view)||void 0===t?void 0:t.style)&&void 0!==e?e:"cell"}assembleEncodeFromView(t){const{style:e}=t,n=wJ(t,["style"]),r={};for(const i of ZJ(n)){const t=n[i];void 0!==t&&(r[i]=l8(t))}return r}assembleGroupEncodeEntry(t){let e={};return this.view&&(e=this.assembleEncodeFromView(this.view)),t||(this.description&&(e["description"]=l8(this.description)),"unit"!==this.type&&"layer"!==this.type)?KJ(e)?void 0:e:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==e&&void 0!==e?e:{})}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:e}=t,n=wJ(t,["spacing"]),{component:r,config:i}=this,o=lrt(r.layoutHeaders,i);return Object.assign(Object.assign(Object.assign({padding:e},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let e=[];for(const n of s1)t[n].title&&e.push(ert(this,n));for(const n of Qnt)e=e.concat(irt(this,n));return e}assembleAxes(){return Cnt(this.component.axes,this.config)}assembleLegends(){return Zrt(this)}assembleProjections(){return Qrt(this)}assembleTitle(){var t,e,n;const r=null!==(t=this.title)&&void 0!==t?t:{},{encoding:i}=r,o=wJ(r,["encoding"]),a=Object.assign(Object.assign(Object.assign({},u8(this.config.title).nonMark),o),i?{encode:{update:i}}:{});if(a.text)return zJ(["unit","layer"],this.type)?zJ(["middle",void 0],a.anchor)&&(a.frame=null!==(e=a.frame)&&void 0!==e?e:"group"):a.anchor=null!==(n=a.anchor)&&void 0!==n?n:"start",KJ(a)?void 0:a}assembleGroup(t=[]){const e={};t=t.concat(this.assembleSignals()),t.length>0&&(e.signals=t);const n=this.assembleLayout();n&&(e.layout=n),e.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||cat(this.parent)?Sot(this):[];r.length>0&&(e.scales=r);const i=this.assembleAxes();i.length>0&&(e.axes=i);const o=this.assembleLegends();return o.length>0&&(e.legends=o),e}getName(t){return eQ((this.name?this.name+"_":"")+t)}requestDataName(t){var e;const n=this.getName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(null!==(e=r[n])&&void 0!==e?e:0)+1,n}getSizeSignalRef(t){if(cat(this.parent)){const e=mrt(t),n=q1(e),r=this.component.scales[n];if(r&&!r.merged){const t=r.get("type"),e=r.get("range");if(h4(t)&&v5(e)){const t=r.get("name"),e=Oot(this,n),i=_ot(e);if(i){const e=N6({aggregate:"distinct",field:i},{expr:"datum"});return{signal:grt(t,r,e)}}return W3(`Unknown field for ${n}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const e=this.component.data.outputNodes[t];return e?e.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,e){this.signalNameMap.rename(t,e)}renameScale(t,e){this.scaleNameMap.rename(t,e)}renameProjection(t,e){this.projectionNameMap.rename(t,e)}scaleName(t,e){return e?this.getName(t):b1(t)&&s2(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const e=this.component.scales[t];return e&&!e.merged?e:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,e){let n=this.component.selection[t];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(t,e)),!n)throw new Error(v.selectionNotFound(e));return n}hasAxisOrientSignalRef(){var t,e;return(null===(t=this.component.axes.x)||void 0===t?void 0:t.some(t=>t.hasOrientSignalRef()))||(null===(e=this.component.axes.y)||void 0===e?void 0:e.some(t=>t.hasOrientSignalRef()))}}class dat extends fat{vgField(t,e={}){const n=this.fieldDef(t);if(n)return N6(n,e)}reduceFieldDef(t,e){return j8(this.getMapping(),(e,n,r)=>{const i=X6(n);return i?t(e,i,r):e},e)}forEachFieldDef(t,e){E8(this.getMapping(),(e,n)=>{const r=X6(e);r&&t(r,n)},e)}}class pat extends net{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=IJ(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"value",null!==(i=o[1])&&void 0!==i?i:"density"]}clone(){return new pat(null,IJ(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"DensityTransform "+$J(this.transform)}assemble(){const t=this.transform,{density:e}=t,n=wJ(t,["density"]),r=Object.assign({type:"kde",field:e},n);return r}}class gat extends net{constructor(t,e){super(t),this.filter=e}clone(){return new gat(null,Object.assign({},this.filter))}static make(t,e){const{config:n,mark:r,markDef:i}=e,o=g8("invalid",i,n);if("filter"!==o)return null;const a=e.reduceFieldDef((t,n,i)=>{const o=s2(i)&&e.getScaleComponent(i);if(o){const e=o.get("type");f4(e)&&"count"!==n.aggregate&&!BQ(r)&&(t[n.field]=n)}return t},{});return ZJ(a).length?new gat(t,a):null}dependentFields(){return new Set(ZJ(this.filter))}producedFields(){return new Set}hash(){return"FilterInvalid "+$J(this.filter)}assemble(){const t=ZJ(this.filter).reduce((t,e)=>{const n=this.filter[e],r=N6(n,{expr:"datum"});return null!==n&&("temporal"===n.type?t.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(t.push(`isValid(${r})`),t.push(`isFinite(+${r})`))),t},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class mat extends net{constructor(t,e){super(t),this.transform=e,this.transform=IJ(e);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map((t,e)=>{var n;return null!==(n=r[e])&&void 0!==n?n:t})}clone(){return new mat(this.parent,IJ(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return"FlattenTransform "+$J(this.transform)}assemble(){const{flatten:t,as:e}=this.transform,n={type:"flatten",fields:t,as:e};return n}}class vat extends net{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=IJ(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"key",null!==(i=o[1])&&void 0!==i?i:"value"]}clone(){return new vat(null,IJ(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return"FoldTransform "+$J(this.transform)}assemble(){const{fold:t,as:e}=this.transform,n={type:"fold",fields:t,as:e};return n}}class yat extends net{constructor(t,e,n,r){super(t),this.fields=e,this.geojson=n,this.signal=r}clone(){return new yat(null,IJ(this.fields),this.geojson,this.signal)}static parseAll(t,e){if(e.component.projection&&!e.component.projection.isFit)return t;let n=0;for(const r of[[E0,T0],[D0,j0]]){const i=r.map(t=>{const n=Y6(e.encoding[t]);return x6(n)?n.field:_6(n)?{expr:""+n.datum}:A6(n)?{expr:""+n["value"]}:void 0});(i[0]||i[1])&&(t=new yat(t,i,null,e.getName("geojson_"+n++)))}if(e.channelHasField(R0)){const r=e.typedFieldDef(R0);r.type===H5&&(t=new yat(t,null,r.field,e.getName("geojson_"+n++)))}return t}dependentFields(){var t;const e=(null!==(t=this.fields)&&void 0!==t?t:[]).filter(rt["H"]);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${$J(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}class bat extends net{constructor(t,e,n,r){super(t),this.projection=e,this.fields=n,this.as=r}clone(){return new bat(null,this.projection,IJ(this.fields),IJ(this.as))}static parseAll(t,e){if(!e.projectionName())return t;for(const n of[[E0,T0],[D0,j0]]){const r=n.map(t=>{const n=Y6(e.encoding[t]);return x6(n)?n.field:_6(n)?{expr:""+n.datum}:A6(n)?{expr:""+n["value"]}:void 0}),i=n[0]===D0?"2":"";(r[0]||r[1])&&(t=new bat(t,e.projectionName(),r,[e.getName("x"+i),e.getName("y"+i)]))}return t}dependentFields(){return new Set(this.fields.filter(rt["H"]))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${$J(this.fields)} ${$J(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class xat extends net{constructor(t,e){super(t),this.transform=e}clone(){return new xat(null,IJ(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:e=0,stop:n,step:r}=t,i=[e,n,...r?[r]:[]].join(",");return{signal:`sequence(${i})`}}static makeFromTransform(t,e){return new xat(t,e)}static makeFromEncoding(t,e){const n=e.encoding,r=n.x,i=n.y;if(x6(r)&&x6(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,{method:s,value:u,frame:c,keyvals:l}=o.impute,h=D8(e.mark,n);return new xat(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:a.field},s?{method:s}:{}),void 0!==u?{value:u}:{}),c?{frame:c}:{}),void 0!==l?{keyvals:l}:{}),h.length?{groupby:h}:{}))}return null}hash(){return"Impute "+$J(this.transform)}assemble(){const{impute:t,key:e,keyvals:n,method:r,groupby:i,value:o,frame:a=[null,null]}=this.transform,s=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:e},n?{keyvals:Y9(n)?this.processSequence(n):n}:{}),{method:"value"}),i?{groupby:i}:{}),{value:r&&"value"!==r?null:o});if(r&&"value"!==r){const e=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:a,ignorePeers:!1},i?{groupby:i}:{}),n={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[s,e,n]}return[s]}}class wat extends net{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=IJ(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:e.on,null!==(i=o[1])&&void 0!==i?i:e.loess]}clone(){return new wat(null,IJ(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"LoessTransform "+$J(this.transform)}assemble(){const t=this.transform,{loess:e,on:n}=t,r=wJ(t,["loess","on"]),i=Object.assign({type:"loess",x:n,y:e},r);return i}}class _at extends net{constructor(t,e,n){super(t),this.transform=e,this.secondary=n}clone(){return new _at(null,IJ(this.transform),this.secondary)}static make(t,e,n,r){const i=e.component.data.sources,{from:o}=n;let a=null;if(Z9(o)){let t=Vat(o.data,i);t||(t=new mit(o.data),i.push(t));const n=e.getName("lookup_"+r);a=new ret(t,n,"lookup",e.component.data.outputNodeRefCounts),e.component.data.outputNodes[n]=a}else if(J9(o)){const t=o.selection;if(n=Object.assign({as:t},n),a=e.getSelectionComponent(eQ(t),t).materialized,!a)throw new Error(v.noSameUnitLookup(t))}return new _at(t,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Object(rt["i"])(this.transform.as):this.transform.from.fields)}hash(){return"Lookup "+$J({transform:this.transform,secondary:this.secondary})}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Object(rt["i"])(this.transform.as)}:{});else{let e=this.transform.as;Object(rt["H"])(e)||(W3(v.NO_FIELDS_NEEDS_AS),e="_lookup"),t={as:[e]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}class Oat extends net{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=IJ(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"prob",null!==(i=o[1])&&void 0!==i?i:"value"]}clone(){return new Oat(null,IJ(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"QuantileTransform "+$J(this.transform)}assemble(){const t=this.transform,{quantile:e}=t,n=wJ(t,["quantile"]),r=Object.assign({type:"quantile",field:e},n);return r}}class Sat extends net{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=IJ(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:e.on,null!==(i=o[1])&&void 0!==i?i:e.regression]}clone(){return new Sat(null,IJ(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"RegressionTransform "+$J(this.transform)}assemble(){const t=this.transform,{regression:e,on:n}=t,r=wJ(t,["regression","on"]),i=Object.assign({type:"regression",x:n,y:e},r);return i}}class Cat extends net{constructor(t,e){super(t),this.transform=e}clone(){return new Cat(null,IJ(this.transform))}addDimensions(t){var e;this.transform.groupby=HJ((null!==(e=this.transform.groupby)&&void 0!==e?e:[]).concat(t),t=>t)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}hash(){return"PivotTransform "+$J(this.transform)}assemble(){const{pivot:t,value:e,groupby:n,limit:r,op:i}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:e},void 0!==r?{limit:r}:{}),void 0!==i?{op:i}:{}),void 0!==n?{groupby:n}:{})}}class kat extends net{constructor(t,e){super(t),this.transform=e}clone(){return new kat(null,IJ(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return"SampleTransform "+$J(this.transform)}assemble(){return{type:"sample",size:this.transform.sample}}}function Aat(t){let e=0;function n(r,i){var o;if(r instanceof mit&&!r.isGenerator&&!L9(r.data)){t.push(i);const e={name:null,source:i.name,transform:[]};i=e}if(r instanceof Nit&&(r.parent instanceof mit&&!i.source?(i.format=Object.assign(Object.assign({},null!==(o=i.format)&&void 0!==o?o:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Ait){i.name||(i.name="data_"+e++),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source;for(const e of r.assemble())t.push(e)}else{if((r instanceof yit||r instanceof bit||r instanceof gat||r instanceof gnt||r instanceof Xnt||r instanceof bat||r instanceof yat||r instanceof kit||r instanceof _at||r instanceof Lit||r instanceof Rit||r instanceof vat||r instanceof mat||r instanceof pat||r instanceof wat||r instanceof Oat||r instanceof Sat||r instanceof Iit||r instanceof kat||r instanceof Cat)&&i.transform.push(r.assemble()),(r instanceof git||r instanceof iet||r instanceof xat||r instanceof $it)&&i.transform.push(...r.assemble()),r instanceof ret)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof ret)r.setSource(i.name);else if(i.name||(i.name="data_"+e++),r.setSource(i.name),1===r.numChildren()){t.push(i);const e={name:null,source:i.name,transform:[]};i=e}switch(r.numChildren()){case 0:r instanceof ret&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+e++);let o=i.name;!i.source||i.transform.length>0?t.push(i):o=i.source;for(const t of r.children){const e={name:null,source:o,transform:[]};n(t,e)}break}}}}return n}function Tat(t){const e=[],n=Aat(e);for(const r of t.children)n(r,{source:t.name,name:null,transform:[]});return e}function Eat(t,e){var n,r;const i=[],o=Aat(i);let a=0;for(const u of t.sources){u.hasName()||(u.dataName="source_"+a++);const t=u.assemble();o(u,t)}for(const u of i)0===u.transform.length&&delete u.transform;let s=0;for(const[u,c]of i.entries())0!==(null!==(n=c.transform)&&void 0!==n?n:[]).length||c.source||i.splice(s++,0,i.splice(u,1)[0]);for(const u of i)for(const e of null!==(r=u.transform)&&void 0!==r?r:[])"lookup"===e.type&&(e.from=t.outputNodes[e.from].getSource());for(const u of i)u.name in e&&(u.values=e[u.name]);return i}function jat(t){return"top"===t||"left"===t||m5(t)?"header":"footer"}function Dat(t){for(const e of s1)Mat(t,e);Iat(t,"x"),Iat(t,"y")}function Mat(t,e){var n;const{facet:r,config:i,child:o,component:a}=t;if(t.channelHasField(e)){const s=r[e],u=Znt("title",null,i,e);let c=W6(s,i,{allowDisabling:!0,includeDefault:void 0===u||!!u});o.component.layoutHeaders[e].title&&(c=Object(rt["A"])(c)?c.join(", "):c,c+=" / "+o.component.layoutHeaders[e].title,o.component.layoutHeaders[e].title=null);const l=Znt("labelOrient",s,i,e),h=null!==(n=s.header)&&void 0!==n?n:{},f=fQ(h.labels,i.header.labels,!0),d=zJ(["bottom","right"],l)?"footer":"header";a.layoutHeaders[e]={title:c,facetFieldDef:s,[d]:"facet"===e?[]:[Nat(t,e,f)]}}}function Nat(t,e,n){const r="row"===e?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function Iat(t,e){var n;const{child:r}=t;if(r.component.axes[e]){const{layoutHeaders:i,resolve:o}=t.component;if(o.axis[e]=brt(o,e),"shared"===o.axis[e]){const o="x"===e?"column":"row",a=i[o];for(const i of r.component.axes[e]){const e=jat(i.get("orient"));a[e]=null!==(n=a[e])&&void 0!==n?n:[Nat(t,o,!1)];const r=Ont(i,"main",t.config,{header:!0});r&&a[e][0].axes.push(r),i.mainExtracted=!0}}}}function Rat(t){Pat(t),$at(t,"width"),$at(t,"height")}function Fat(t){Pat(t);const e=1===t.layout.columns?"width":"childWidth",n=void 0===t.layout.columns?"height":"childHeight";$at(t,e),$at(t,n)}function Pat(t){for(const e of t.children)e.parseLayoutSize()}function $at(t,e){const n=mrt(e),r=q1(n),i=t.component.resolve,o=t.component.layoutSize;let a;for(const s of t.children){const t=s.component.layoutSize.getWithExplicit(n),e=i.scale[r];if("independent"===e&&"step"===t.value){a=void 0;break}if(a){if("independent"===e&&a.value!==t.value){a=void 0;break}a=P9(a,t,n,"")}else a=t}if(a){for(const r of t.children)t.renameSignal(r.getName(n),t.getName(e)),r.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(e,a)}else o.setWithExplicit(e,{explicit:!1,value:void 0})}function Lat(t){const{size:e,component:n}=t;for(const r of U1){const i=C1(r);if(e[i]){const t=e[i];n.layoutSize.set(i,S7(t)?"step":t,!0)}else{const e=zat(t,i);n.layoutSize.set(i,e,!1)}}}function zat(t,e){const n="width"===e?"x":"y",r=t.config,i=t.getScaleComponent(n);if(i){const t=i.get("type"),n=i.get("range");if(h4(t)){const t=M7(r.view,e);return v5(n)||S7(t)?"step":t}return j7(r.view,e)}if(t.hasProjection||"arc"===t.mark)return j7(r.view,e);{const t=M7(r.view,e);return S7(t)?t.step:t}}function Bat(t,e,n){return N6(e,Object.assign({suffix:"by_"+N6(t)},null!==n&&void 0!==n?n:{}))}class Uat extends dat{constructor(t,e,n,r){super(t,"facet",e,n,r,t.resolve),this.child=qst(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet,r)}initFacet(t,e){return s6(t)?j8(t,(t,n,r)=>zJ([v0,y0],r)?void 0===n.field?(W3(v.emptyFieldDef(n,r)),t):(t[r]=K6(n,r,e),t):(W3(v.incompatibleChannel(r,"facet")),t),{}):{facet:K6(t,"facet",e)}}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Gat(this),this.child.parseData()}parseLayoutSize(){Pat(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Dat(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,e,n;const r={};for(const i of s1)for(const o of trt){const a=this.component.layoutHeaders[i],s=a[o],{facetFieldDef:u}=a;if(u){const e=Znt("titleOrient",u,this.config,i);if(zJ(["right","bottom"],e)){const n=Knt(i,e);r.titleAnchor=null!==(t=r.titleAnchor)&&void 0!==t?t:{},r.titleAnchor[n]="end"}}if(null===s||void 0===s?void 0:s[0]){const t="row"===i?"height":"width",s="header"===o?"headerBand":"footerBand";"facet"===i||this.child.component.layoutSize.get(t)||(r[s]=null!==(e=r[s])&&void 0!==e?e:{},r[s][i]=.5),a.title&&(r.offset=null!==(n=r.offset)&&void 0!==n?n:{},r.offset["row"===i?"rowTitle":"columnTitle"]=10)}}return r}assembleDefaultLayout(){const{column:t,row:e}=this.facet,n=t?this.columnDistinctSignal():e?1:void 0;let r="all";return(e||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(r="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),n?{columns:n}:{}),{bounds:"full",align:r})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Uat)){const t=this.getName("column_domain");return{signal:`length(data('${t}'))`}}}assembleGroup(t){return this.parent&&this.parent instanceof Uat?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:N6(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],e=[],n=[];if(this.child instanceof Uat){if(this.child.channelHasField("column")){const r=N6(this.child.facet.column);t.push(r),e.push("distinct"),n.push("distinct_"+r)}}else for(const r of U1){const i=this.child.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(h4(o)&&v5(a)){const i=Oot(this.child,r),o=_ot(i);o?(t.push(o),e.push("distinct"),n.push("distinct_"+o)):W3(`Unknown field for ${r}. Cannot calculate view size.`)}}}return{fields:t,ops:e,as:n}}assembleFacet(){const{name:t,data:e}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:o,as:a}=this.getCardinalityAggregateForChild(),s=[];for(const c of s1){const t=this.facet[c];if(t){s.push(N6(t));const{bin:e,sort:u}=t;if(g2(e)&&s.push(N6(t,{binSuffix:"end"})),o6(u)){const{field:e,op:s=e6}=u,c=Bat(t,u);n&&r?(i.push(c),o.push("max"),a.push(c)):(i.push(e),o.push(s),a.push(c))}else if(Object(rt["A"])(u)){const e=Ynt(t,c);i.push(e),o.push("max"),a.push(e)}}}const u=!!n&&!!r;return Object.assign({name:t,data:e,groupby:s},u||i.length>0?{aggregate:Object.assign(Object.assign({},u?{cross:u}:{}),i.length?{fields:i,ops:o,as:a}:{})}:{})}facetSortFields(t){const{facet:e}=this,n=e[t];return n?o6(n.sort)?[Bat(n,n.sort,{expr:"datum"})]:Object(rt["A"])(n.sort)?[Ynt(n,t,{expr:"datum"})]:[N6(n,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:e}=this,n=e[t];if(n){const{sort:t}=n,e=(o6(t)?t.order:!Object(rt["A"])(t)&&t)||"ascending";return[e]}return[]}assembleLabelTitle(){const{facet:t,config:e}=this;if(t.facet)return art(t.facet,"facet",e);const n={row:["top","bottom"],column:["left","right"]};for(const r of Qnt)if(t[r]){const i=Znt("labelOrient",t[r],e,r);if(zJ(n[r],i))return art(t[r],r,e)}}assembleMarks(){const{child:t}=this,e=this.component.data.facetRoot,n=Tat(e),r=t.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle(),a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},i?{title:i}:{}),o?{style:o}:{}),{from:{facet:this.assembleFacet()},sort:{field:s1.map(t=>this.facetSortFields(t)).flat(),order:s1.map(t=>this.facetSortOrder(t)).flat()}}),n.length>0?{data:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup(Let(this,[])));return[a]}getMapping(){return this.facet}}function Wat(t,e){const{row:n,column:r}=e;if(n&&r){let e=null;for(const i of[n,r])if(o6(i.sort)){const{field:n,op:r=e6}=i.sort;t=e=new Rit(t,{joinaggregate:[{op:r,field:n,as:Bat(i,i.sort,{forAs:!0})}],groupby:[N6(i)]})}return e}return null}function Vat(t,e){var n,r,i,o,a,s,u,c,l,h;for(const f of e){const e=f.data;if((!t.name||!f.hasName()||t.name===f.dataName)&&((!(null===(n=t["format"])||void 0===n?void 0:n.mesh)||!(null===(r=e.format)||void 0===r?void 0:r.feature))&&(!(null===(i=t["format"])||void 0===i?void 0:i.feature)&&!(null===(o=e.format)||void 0===o?void 0:o.feature)||(null===(a=t["format"])||void 0===a?void 0:a.feature)===(null===(s=e.format)||void 0===s?void 0:s.feature))&&(!(null===(u=t["format"])||void 0===u?void 0:u.mesh)&&!(null===(c=e.format)||void 0===c?void 0:c.mesh)||(null===(l=t["format"])||void 0===l?void 0:l.mesh)===(null===(h=e.format)||void 0===h?void 0:h.mesh))))if(z9(t)&&z9(e)){if(NJ(t.values,e.values))return f}else if(L9(t)&&L9(e)){if(t.url===e.url)return f}else if(B9(t)&&t.name===f.dataName)return f}return null}function Hat(t,e){if(t.data||!t.parent){if(null===t.data){const t=new mit({values:[]});return e.push(t),t}const n=Vat(t.data,e);if(n)return U9(t.data)||(n.data.format=WJ({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{const n=new mit(t.data);return e.push(n),n}}return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function qat(t,e,n){var r,i;let o=0;for(const a of e.transforms){let s,u=void 0;if(utt(a))s=t=new Xnt(t,a),u="derived";else if(X9(a)){const i=jit(a);s=t=null!==(r=Nit.makeWithAncestors(t,{},i,n))&&void 0!==r?r:t,t=new gnt(t,e,a.filter)}else if(ctt(a))s=t=git.makeFromTransform(t,a,e),u="number";else if(htt(a)){u="date";const e=n.getWithExplicit(a.field);void 0===e.value&&(t=new Nit(t,{[a.field]:u}),n.set(a.field,u,!1)),s=t=iet.makeFromTransform(t,a)}else if(ftt(a))s=t=kit.makeFromTransform(t,a),u="number",hnt(e)&&(t=new Iit(t));else if(K9(a))s=t=_at.make(t,e,a,o++),u="derived";else if(ott(a))s=t=new Lit(t,a),u="number";else if(att(a))s=t=new Rit(t,a),u="number";else if(dtt(a))s=t=$it.makeFromTransform(t,a),u="derived";else if(ptt(a))s=t=new vat(t,a),u="derived";else if(stt(a))s=t=new mat(t,a),u="derived";else if(Q9(a))s=t=new Cat(t,a),u="derived";else if(itt(a))t=new kat(t,a);else if(ltt(a))s=t=xat.makeFromTransform(t,a),u="derived";else if(ttt(a))s=t=new pat(t,a),u="derived";else if(ett(a))s=t=new Oat(t,a),u="derived";else if(ntt(a))s=t=new Sat(t,a),u="derived";else{if(!rtt(a)){W3(v.invalidTransformIgnored(a));continue}s=t=new wat(t,a),u="derived"}if(s&&void 0!==u)for(const t of null!==(i=s.producedFields())&&void 0!==i?i:[])n.set(t,u,!1)}return t}function Gat(t){var e,n,r,i,o,a,s,u,c,l;let h=Hat(t,t.component.data.sources);const{outputNodes:f,outputNodeRefCounts:d}=t.component.data,p=t.parent?t.parent.component.data.ancestorParse.clone():new $9,g=t.data;U9(g)?(W9(g)?h=new bit(h,g.sequence):H9(g)&&(h=new yit(h,g.graticule)),p.parseNothing=!0):null===(null===(e=null===g||void 0===g?void 0:g.format)||void 0===e?void 0:e.parse)&&(p.parseNothing=!0),h=null!==(n=Nit.makeExplicit(h,t,p))&&void 0!==n?n:h,h=new Iit(h);const m=t.parent&&hat(t.parent);(uat(t)||cat(t))&&m&&(h=null!==(r=git.makeFromEncoding(h,t))&&void 0!==r?r:h),t.transforms.length>0&&(h=qat(h,t,p));const v=Mit(t),y=Dit(t);h=null!==(i=Nit.makeWithAncestors(h,{},Object.assign(Object.assign({},v),y),p))&&void 0!==i?i:h,uat(t)&&(h=yat.parseAll(h,t),h=bat.parseAll(h,t)),(uat(t)||cat(t))&&(m||(h=null!==(o=git.makeFromEncoding(h,t))&&void 0!==o?o:h),h=null!==(a=iet.makeFromEncoding(h,t))&&void 0!==a?a:h,h=Xnt.parseAllForSortIndex(h,t));const b=t.getName(G9),x=new ret(h,b,G9,d);if(f[b]=x,h=x,uat(t)){const e=kit.makeFromEncoding(h,t);e&&(h=e,hnt(t)&&(h=new Iit(h))),h=null!==(s=xat.makeFromEncoding(h,t))&&void 0!==s?s:h,h=null!==(u=$it.makeFromEncoding(h,t))&&void 0!==u?u:h}uat(t)&&(h=null!==(c=gat.make(h,t))&&void 0!==c?c:h);const w=t.getName(q9),_=new ret(h,w,q9,d);f[w]=_,h=_,uat(t)&&bnt(t,_);let O=null;if(cat(t)){const e=t.getName("facet");h=null!==(l=Wat(h,t.facet))&&void 0!==l?l:h,O=new Ait(h,t,e,_.getSource()),f[e]=O}return Object.assign(Object.assign({},t.component.data),{outputNodes:f,outputNodeRefCounts:d,raw:x,main:_,facetRoot:O,ancestorParse:p})}class Xat extends fat{constructor(t,e,n,r){var i,o,a,s;super(t,"concat",e,n,r,t.resolve),"shared"!==(null===(o=null===(i=t.resolve)||void 0===i?void 0:i.axis)||void 0===o?void 0:o.x)&&"shared"!==(null===(s=null===(a=t.resolve)||void 0===a?void 0:a.axis)||void 0===s?void 0:s.y)||W3(v.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((t,e)=>qst(t,this,this.getName("concat_"+e),void 0,r))}parseData(){this.component.data=Gat(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const e of ZJ(t.component.selection))this.component.selection[e]=t.component.selection[e]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return _7(t)?t.vconcat:O7(t)?t.hconcat:t.concat}parseLayoutSize(){Fat(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((t,e)=>e.assembleSelectionTopLevelSignals(t),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=frt(this);for(const e of this.children)t.push(...e.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((t,e)=>e.assembleSelectionData(t),t)}assembleMarks(){return this.children.map(t=>{const e=t.assembleTitle(),n=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},e?{title:e}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup())})}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},null!=t?{columns:t}:{}),{bounds:"full",align:"each"})}}function Yat(t){return!1===t||null===t}const Kat=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},OQ),{labelExpr:1,encode:1}),Zat=ZJ(Kat);class Jat extends M9{constructor(t={},e={},n=!1){super(),this.explicit=t,this.implicit=e,this.mainExtracted=n}clone(){return new Jat(IJ(this.explicit),IJ(this.implicit),this.mainExtracted)}hasAxisPart(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!Yat(this.get(t)))}hasOrientSignalRef(){return m5(this.explicit.orient)}}function Qat(t,e,n){var r;const{encoding:i,config:o}=t,a=null!==(r=Y6(i[e]))&&void 0!==r?r:Y6(i[S1(e)]),s=t.axis(e)||{},{format:u,formatType:c}=s;return B4(c)?Object.assign({text:q4({fieldOrDatumDef:a,field:"datum.value",format:u,formatType:c,config:o})},n):n}function tst(t){return U1.reduce((e,n)=>(t.component.scales[n]&&(e[n]=[sst(n,t)]),e),{})}const est={bottom:"top",top:"bottom",left:"right",right:"left"};function nst(t){var e;const{axes:n,resolve:r}=t.component,i={top:0,bottom:0,right:0,left:0};for(const o of t.children){o.parseAxesAndHeaders();for(const e of ZJ(o.component.axes))r.axis[e]=brt(t.component.resolve,e),"shared"===r.axis[e]&&(n[e]=rst(n[e],o.component.axes[e]),n[e]||(r.axis[e]="independent",delete n[e]))}for(const o of U1){for(const a of t.children)if(a.component.axes[o]){if("independent"===r.axis[o]){n[o]=(null!==(e=n[o])&&void 0!==e?e:[]).concat(a.component.axes[o]);for(const t of a.component.axes[o]){const{value:e,explicit:n}=t.getWithExplicit("orient");if(!m5(e)){if(i[e]>0&&!n){const n=est[e];i[e]>i[n]&&t.set("orient",n,!1)}i[e]++}}}delete a.component.axes[o]}if("independent"===r.axis[o]&&n[o]&&n[o].length>1)for(const t of n[o])t.get("grid")&&!t.explicit.grid&&(t.implicit.grid=!1)}}function rst(t,e){if(!t)return e.map(t=>t.clone());{if(t.length!==e.length)return;const n=t.length;for(let r=0;r<n;r++){const n=t[r],i=e[r];if(!!n!==!!i)return;if(n&&i){const e=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(e.explicit&&o.explicit&&e.value!==o.value)return;t[r]=ist(n,i)}}}return t}function ist(t,e){for(const n of Zat){const r=P9(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(t,e)=>{switch(n){case"title":return _8(t,e);case"gridScale":return{explicit:t.explicit,value:fQ(t.value,e.value)}}return F9(t,e,n,"axis")});t.setWithExplicit(n,r)}return t}function ost(t,e,n,r,i){if("disable"===e)return void 0!==n;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(m5(n.labelAngle)?n.labelAngle:vQ(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===Hnt(r,i))return!0}return t===n[e]}const ast=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function sst(t,e){var n,r,i;let o=e.axis(t);const a=new Jat,s=Y6(e.encoding[t]),{mark:u,config:c}=e,l=(null===o||void 0===o?void 0:o.orient)||(null===(n=c["x"===t?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(r=c.axis)||void 0===r?void 0:r.orient)||Wnt(t),h=e.getScaleComponent(t).get("type"),f=Dnt(t,h,l,e.config),d=void 0!==o?!o:Nnt("disable",c,null===o||void 0===o?void 0:o.style,f).configValue;if(a.set("disable",d,void 0!==o),d)return a;o=o||{};const p=Pnt(e,o,t,s,f),g={fieldOrDatumDef:s,axis:o,channel:t,model:e,scaleType:h,orient:l,labelAngle:p,mark:u,config:c};for(const y of Zat){const n=y in Int?Int[y](g):CQ(y)?o[y]:void 0,r=void 0!==n,i=ost(n,y,o,e,t);if(r&&i)a.set(y,n,i);else{const{configValue:t,configFrom:s}=CQ(y)&&"values"!==y?Nnt(y,e.config,o.style,f):{},u=void 0!==t;r&&!u?a.set(y,n,i):("vgAxisConfig"!==s||ast.has(y)&&u||xQ(t)||m5(t))&&a.set(y,t,!1)}}const m=null!==(i=o.encoding)&&void 0!==i?i:{},v=wQ.reduce((n,r)=>{var i;if(!a.hasAxisPart(r))return n;const o=vrt(null!==(i=m[r])&&void 0!==i?i:{},e),s="labels"===r?Qat(e,t,o):o;return void 0===s||KJ(s)||(n[r]={update:s}),n},{});return KJ(v)||a.set("encode",v,!!o.encoding||void 0!==o.labelAngle),a}function ust({encoding:t,size:e}){for(const n of U1){const r=C1(n);S7(e[r])&&O6(t[n])&&(delete e[r],W3(v.stepDropped(r)))}return e}function cst(t,e,n,{graticule:r}){const i=VQ(t)?Object.assign({},t):{type:t},o=g8("orient",i,n);if(i.orient=dst(i.type,e,o),void 0!==o&&o!==i.orient&&W3(v.orientOverridden(i.orient,o)),"bar"===i.type&&i.orient){const t=g8("cornerRadiusEnd",i,n);if(void 0!==t){const n="horizontal"===i.orient&&e.x2||"vertical"===i.orient&&e.y2?["cornerRadius"]:JQ[i.orient];for(const e of n)i[e]=t;void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}const a=g8("opacity",i,n);void 0===a&&(i.opacity=hst(i.type,e));const s=i.filled;void 0===s&&(i.filled=!r&&fst(i,n));const u=g8("cursor",i,n);return void 0===u&&(i.cursor=lst(i,e,n)),i}function lst(t,e,n){return e.href||t.href||g8("href",t,n)?"pointer":t.cursor}function hst(t,e){if(zJ([MQ,FQ,$Q,LQ],t)&&!S8(e))return.7}function fst(t,e){const n=m8("filled",t,e),r=t.type;return fQ(n,r!==MQ&&r!==DQ&&r!==IQ)}function dst(t,e,n){switch(t){case MQ:case $Q:case LQ:case RQ:case NQ:case jQ:return}const{x:r,y:i,x2:o,y2:a}=e;switch(t){case EQ:if(x6(r)&&(m2(r.bin)||x6(i)&&i.aggregate&&!r.aggregate))return"vertical";if(x6(i)&&(m2(i.bin)||x6(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(x6(r)&&r.type===B5&&!g2(r.bin)||S6(r)))return"horizontal";if(!a&&(x6(i)&&i.type===B5&&!g2(i.bin)||S6(i)))return"vertical"}case IQ:if(o&&(!x6(r)||!m2(r.bin))&&a&&(!x6(i)||!m2(i.bin)))return;case TQ:if(a)return x6(i)&&m2(i.bin)?"horizontal":"vertical";if(o)return x6(r)&&m2(r.bin)?"vertical":"horizontal";if(t===IQ){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case DQ:case FQ:{const e=O6(r),o=O6(i);if(e&&!o)return"tick"!==t?"horizontal":"vertical";if(!e&&o)return"tick"!==t?"vertical":"horizontal";if(e&&o){const e=r,o=i,a=e.type===W5,s=o.type===W5;return a&&!s?"tick"!==t?"vertical":"horizontal":!a&&s?"tick"!==t?"horizontal":"vertical":!e.aggregate&&o.aggregate?"tick"!==t?"vertical":"horizontal":e.aggregate&&!o.aggregate?"tick"!==t?"horizontal":"vertical":n||"vertical"}return n||void 0}}return"vertical"}const pst={vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Ttt("x",t,{defaultPos:"mid"})),Ttt("y",t,{defaultPos:"mid"})),Ltt(t,"radius","arc")),Ltt(t,"theta","arc"))},gst={vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),Itt("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===t.markDef.orient})),Itt("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===t.markDef.orient})),Ktt(t))},mst={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ltt(t,"x","bar")),Ltt(t,"y","bar"))},vst={vgMark:"shape",encodeEntry:t=>Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{const{encoding:e}=t,n=e.shape,r=Object.assign({type:"geoshape",projection:t.projectionName()},n&&x6(n)&&n.type===H5?{field:N6(n,{expr:"datum"})}:{});return[r]}},yst={vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Ltt(t,"x","image")),Ltt(t,"y","image")),vtt(t,"url"))},bst={vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Ttt("x",t,{defaultPos:"mid"})),Ttt("y",t,{defaultPos:"mid"})),Ctt("size",t,{vgChannel:"strokeWidth"})),Ktt(t))},xst={vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Ttt("x",t,{defaultPos:"mid"})),Ttt("y",t,{defaultPos:"mid"})),Ctt("size",t)),Ktt(t))};function wst(t,e){const{config:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Ttt("x",t,{defaultPos:"mid"})),Ttt("y",t,{defaultPos:"mid"})),Ctt("size",t)),Ctt("angle",t)),_st(t,n,e))}function _st(t,e,n){return n?{shape:{value:n}}:Ctt("shape",t)}const Ost={vgMark:"symbol",encodeEntry:t=>wst(t)},Sst={vgMark:"symbol",encodeEntry:t=>wst(t,"circle")},Cst={vgMark:"symbol",encodeEntry:t=>wst(t,"square")},kst={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ltt(t,"x","rect")),Ltt(t,"y","rect"))},Ast={vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,n=e.orient;return t.encoding.x||t.encoding.y||t.encoding.latitude||t.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Itt("x",t,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n})),Itt("y",t,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n})),Ctt("size",t,{vgChannel:"strokeWidth"})):{}}},Tst={vgMark:"text",encodeEntry:t=>{const{config:e,encoding:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qtt(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Ttt("x",t,{defaultPos:"mid"})),Ttt("y",t,{defaultPos:"mid"})),vtt(t)),Ctt("size",t,{vgChannel:"fontSize"})),Ctt("angle",t)),Jtt("align",Est(t.markDef,n,e))),Jtt("baseline",jst(t.markDef,n,e))),Ttt("radius",t,{defaultPos:null,isMidPoint:!0})),Ttt("theta",t,{defaultPos:null,isMidPoint:!0}))}};function Est(t,e,n){const r=g8("align",t,n);if(void 0===r)return"center"}function jst(t,e,n){const r=g8("baseline",t,n);if(void 0===r)return"middle"}const Dst={vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:n}=t,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qtt(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ttt("x",t,{defaultPos:"mid",vgChannel:"xc"})),Ttt("y",t,{defaultPos:"mid",vgChannel:"yc"})),Ctt("size",t,{defaultValue:Mst(t),vgChannel:i})),{[o]:l8(g8("thickness",n,e))})}};function Mst(t){var e;const{config:n,markDef:r}=t,{orient:i}=r,o="horizontal"===i?"width":"height",a=t.getScaleComponent("horizontal"===i?"x":"y"),s=null!==(e=g8("size",r,n,{vgChannel:o}))&&void 0!==e?e:n.tick.bandSize;if(void 0!==s)return s;{const t=a?a.get("range"):void 0;if(t&&v5(t)&&Object(rt["E"])(t.step))return 3*t.step/4;const e=D7(n.view,o);return 3*e/4}}const Nst={arc:pst,area:gst,bar:mst,circle:Sst,geoshape:vst,image:yst,line:bst,point:Ost,rect:kst,rule:Ast,square:Cst,text:Tst,tick:Dst,trail:xst};function Ist(t){return zJ([DQ,TQ,PQ],t.mark)?Fst(t):zJ([EQ],t.mark)?$st(t):zst(t)}const Rst="faceted_path_";function Fst(t){const e=D8(t.mark,t.encoding),n=zst(t,{fromPrefix:e.length>0?Rst:""});return e.length>0?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:Rst+t.requestDataName(q9),data:t.requestDataName(q9),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}const Pst="stack_group_";function $st(t){const e=S5.some(e=>g8(e,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e){const[e]=zst(t,{fromPrefix:Pst}),n=t.scaleName(t.stack.fieldChannel),r=(e={})=>t.vgField(t.stack.fieldChannel,e),i=(t,e)=>{const i=[r({prefix:"min",suffix:"start",expr:e}),r({prefix:"max",suffix:"start",expr:e}),r({prefix:"min",suffix:"end",expr:e}),r({prefix:"max",suffix:"end",expr:e})];return`${t}(${i.map(t=>`scale('${n}',${t})`).join(",")})`};let o,a;"x"===t.stack.fieldChannel?(o=Object.assign(Object.assign({},RJ(e.encode.update,["y","yc","y2","height",...S5])),{x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},e.encode.update=Object.assign(Object.assign({},FJ(e.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=Object.assign(Object.assign({},RJ(e.encode.update,["x","xc","x2","width"])),{y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},e.encode.update=Object.assign(Object.assign({},FJ(e.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const l of S5){const n=m8(l,t.markDef,t.config);e.encode.update[l]?(o[l]=e.encode.update[l],delete e.encode.update[l]):n&&(o[l]=l8(n)),n&&(e.encode.update[l]={value:0})}const s=t.fieldDef(t.stack.groupbyChannel),u=N6(s)?[N6(s)]:[];((null===s||void 0===s?void 0:s.bin)||(null===s||void 0===s?void 0:s.timeUnit))&&u.push(N6(s,{binSuffix:"end"}));const c=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"];return o=c.reduce((n,r)=>{if(e.encode.update[r])return Object.assign(Object.assign({},n),{[r]:e.encode.update[r]});{const e=m8(r,t.markDef,t.config);return void 0!==e?Object.assign(Object.assign({},n),{[r]:l8(e)}):n}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(q9),name:Pst+t.requestDataName(q9),groupby:u,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[e]}]}]}return zst(t)}function Lst(t){const{encoding:e,stack:n,mark:r,markDef:i,config:o}=t,a=e.order;if(!(!Object(rt["A"])(a)&&A6(a)&&LJ(a.value)||!a&&LJ(g8("order",i,o)))){if((Object(rt["A"])(a)||x6(a))&&!n)return b8(a,{expr:"datum"});if(BQ(r)){const n="horizontal"===i.orient?"y":"x",r=e[n];if(x6(r)){const e=r.sort;if(Object(rt["A"])(e))return{field:N6(r,{prefix:n,suffix:"sort_index",expr:"datum"})};if(o6(e))return{field:N6({aggregate:S8(t.encoding)?e.op:void 0,field:e.field},{expr:"datum"})};if(i6(e)){const n=t.fieldDef(e.encoding);return{field:N6(n,{expr:"datum"}),order:e.order}}return null===e?void 0:{field:N6(r,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}function zst(t,e={fromPrefix:""}){const{mark:n,markDef:r,config:i}=t,o=fQ(r.clip,Bst(t),Ust(t)),a=p8(r),s=t.encoding.key,u=Lst(t),c=Wst(t),l=g8("aria",r,i),h=Nst[n].postEncodingTransform?Nst[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:Nst[n].vgMark},o?{clip:!0}:{}),a?{style:a}:{}),s?{key:s.field}:{}),u?{sort:u}:{}),c||{}),!1===l?{aria:l}:{}),{from:{data:e.fromPrefix+t.requestDataName(q9)},encode:{update:Nst[n].encodeEntry(t)}}),h?{transform:h}:{})]}function Bst(t){const e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return!!(e&&e.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}function Ust(t){const e=t.component.projection;return!(!e||e.isFit)||void 0}function Wst(t){if(!t.component.selection)return null;const e=ZJ(t.component.selection).length;let n=e,r=t.parent;while(r&&0===n)n=ZJ(r.component.selection).length,r=r.parent;return n?{interactive:e>0}:null}class Vst extends dat{constructor(t,e,n,r={},i){var o,a;super(t,"unit",e,n,i,void 0,C7(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];const s=VQ(t.mark)?t.mark.type:t.mark;this.markDef=cst(t.mark,null!==(o=t.encoding)&&void 0!==o?o:{},i,{graticule:t.data&&H9(t.data)});const u=this.encoding=A8(null!==(a=t.encoding)&&void 0!==a?a:{},this.markDef,i);this.size=ust({encoding:u,size:C7(t)?Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):r}),this.stack=o9(s,u),this.specifiedScales=this.initScales(s,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegend(u),this.specifiedProjection=t.projection,this.selection=t.selection}get hasProjection(){const{encoding:t}=this,e=this.mark===zQ,n=t&&r1.some(e=>C6(t[e]));return e||n}scaleDomain(t){const e=this.specifiedScales[t];return e?e.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,e){return a2.reduce((t,n)=>{var r;const i=Y6(e[n]);return i&&(t[n]=null!==(r=i.scale)&&void 0!==r?r:{}),t},{})}initAxes(t){return U1.reduce((e,n)=>{const r=t[n];if(C6(r)||n===x0&&C6(t.x2)||n===w0&&C6(t.y2)){const t=C6(r)?r.axis:void 0;e[n]=t?Object.assign({},t):t}return e},{})}initLegend(t){return n2.reduce((e,n)=>{const r=Y6(t[n]);if(r&&i2(n)){const t=r.legend;e[n]=t?Object.assign({},t):t}return e},{})}parseData(){this.component.data=Gat(this)}parseLayoutSize(){Lat(this)}parseSelections(){this.component.selection=mnt(this,this.selection)}parseMarkGroup(){this.component.mark=Ist(this)}parseAxesAndHeaders(){this.component.axes=tst(this)}assembleSelectionTopLevelSignals(t){return zet(this,t)}assembleSignals(){return[...Snt(this),...$et(this,[])]}assembleSelectionData(t){return Bet(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return frt(this)}assembleMarks(){var t;let e=null!==(t=this.component.mark)&&void 0!==t?t:[];return this.parent&&hat(this.parent)||(e=Uet(this,e)),e.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return O8(this.encoding,t)}fieldDef(t){const e=this.encoding[t];return X6(e)}typedFieldDef(t){const e=this.fieldDef(t);return k6(e)?e:null}}class Hst extends fat{constructor(t,e,n,r,i){super(t,"layer",e,n,i,t.resolve,t.view);const o=Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((t,e)=>{if(Y7(t))return new Hst(t,this,this.getName("layer_"+e),o,i);if(i0(t))return new Vst(t,this,this.getName("layer_"+e),o,i);throw new Error(v.invalidSpec(t))})}parseData(){this.component.data=Gat(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Rat(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const e of ZJ(t.component.selection))this.component.selection[e]=t.component.selection[e]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){nst(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((t,e)=>e.assembleSelectionTopLevelSignals(t),t)}assembleSignals(){return this.children.reduce((t,e)=>t.concat(e.assembleSignals()),Snt(this))}assembleLayoutSignals(){return this.children.reduce((t,e)=>t.concat(e.assembleLayoutSignals()),frt(this))}assembleSelectionData(t){return this.children.reduce((t,e)=>e.assembleSelectionData(t),t)}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const e of this.children)if(t=e.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Wet(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,e)=>t.concat(e.assembleLegends()),Zrt(this))}}function qst(t,e,n,r,i){if(c6(t))return new Uat(t,e,n,i);if(Y7(t))return new Hst(t,e,n,r,i);if(i0(t))return new Vst(t,e,n,r,i);if(x7(t))return new Xat(t,e,n,i);throw new Error(v.invalidSpec(t))}function Gst(t,e={}){e.logger&&B3(e.logger),e.fieldTitle&&B6(e.fieldTitle);try{const n=U7(Object(rt["N"])(e.config,t.config)),r=O9(t,n),i=qst(r,null,"",void 0,n);i.parse(),aot(i.component.data,i);const o=Yst(i,Xst(t,r.autosize,n,i),t.datasets,t.usermeta);return{spec:o,normalized:r}}finally{e.logger&&U3(),e.fieldTitle&&U6()}}function Xst(t,e,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(void 0===e?(e={type:"pad"},r.hasAxisOrientSignalRef()&&(e.resize=!0)):Object(rt["H"])(e)&&(e={type:e}),i&&o&&T9(e.type))if("step"===i&&"step"===o)W3(v.droppingFit()),e.type="pad";else if("step"===i||"step"===o){const t="step"===i?"width":"height";W3(v.droppingFit(q1(t)));const n="width"===t?"height":"width";e.type=E9(n)}return Object.assign(Object.assign(Object.assign({},1===ZJ(e).length&&e.type?"pad"===e.type?{}:{autosize:e.type}:{autosize:e}),D9(n)),D9(t))}function Yst(t,e,n={},r){const i=t.config?q7(t.config):void 0,o=[].concat(t.assembleSelectionData([]),Eat(t.component.data,n)),a=t.assembleProjections(),s=t.assembleTitle(),u=t.assembleGroupStyle(),c=t.assembleGroupEncodeEntry(!0);let l=t.assembleLayoutSignals();return l=l.filter(t=>"width"!==t.name&&"height"!==t.name||void 0===t.value||(e[t.name]=+t.value,!1)),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),e),s?{title:s}:{}),u?{style:u}:{}),c?{encode:{update:c}}:{}),{data:o}),a.length>0?{projections:a}:{}),t.assembleGroup([...l,...t.assembleSelectionTopLevelSignals([])])),i?{config:i}:{}),r?{usermeta:r}:{})}class Kst extends J7{mapUnit(t,{config:e}){if(t.encoding){const{encoding:n,transform:r}=t,{bins:i,timeUnits:o,aggregate:a,groupby:s,encoding:u}=C8(n,e),c=[...r||[],...i,...o,...0===a.length?[]:[{aggregate:a,groupby:s}]];return Object.assign(Object.assign(Object.assign({},t),c.length>0?{transform:c}:{}),{encoding:u})}return t}}const Zst=new Kst;function Jst(t,e){return Zst.map(t,{config:e})}const Qst=xJ.version;var tut=n("81ab"),eut=n.n(tut),nut=n("ab0f");const rut="#fff",iut="#888",out={background:"#333",title:{color:rut},style:{"guide-label":{fill:rut},"guide-title":{fill:rut}},axis:{domainColor:rut,gridColor:iut,tickColor:rut}};var aut=out;const sut="#4572a7",uut={background:"#fff",arc:{fill:sut},area:{fill:sut},line:{stroke:sut,strokeWidth:2},path:{stroke:sut},rect:{fill:sut},shape:{stroke:sut},symbol:{fill:sut,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}};var cut=uut;const lut="#30a2da",hut="#cbcbcb",fut="#999",dut="#333",put="#f0f0f0",gut="#333",mut={arc:{fill:lut},area:{fill:lut},axis:{domainColor:hut,grid:!0,gridColor:hut,gridWidth:1,labelColor:fut,labelFontSize:10,titleColor:dut,tickColor:hut,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:put,group:{fill:put},legend:{labelColor:gut,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:gut,titleFontSize:14,titlePadding:10},line:{stroke:lut,strokeWidth:2},path:{stroke:lut,strokeWidth:.5},rect:{fill:lut},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:lut},bar:{binSpacing:2,fill:lut,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}};var vut=mut;const yut="#000",but={group:{fill:"#e5e5e5"},arc:{fill:yut},area:{fill:yut},line:{stroke:yut},path:{stroke:yut},rect:{fill:yut},shape:{stroke:yut},symbol:{fill:yut,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}};var xut=but;const wut=22,_ut="normal",Out="Benton Gothic, sans-serif",Sut=11.5,Cut="normal",kut="#82c6df",Aut="Benton Gothic Bold, sans-serif",Tut="normal",Eut=13,jut={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Dut={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Aut,fontSize:wut,fontWeight:_ut},arc:{fill:kut},area:{fill:kut},line:{stroke:kut,strokeWidth:2},path:{stroke:kut},rect:{fill:kut},shape:{stroke:kut},symbol:{fill:kut,size:30},axis:{labelFont:Out,labelFontSize:Sut,labelFontWeight:Cut,titleFont:Aut,titleFontSize:Eut,titleFontWeight:Tut},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Out,labelFontSize:Sut,symbolType:"square",titleFont:Aut,titleFontSize:Eut,titleFontWeight:Tut},range:{category:jut["category-6"],diverging:jut["fireandice-6"],heatmap:jut["fire-7"],ordinal:jut["fire-7"],ramp:jut["fire-7"]}};var Mut=Dut;const Nut="#ab5787",Iut="#979797",Rut={background:"#f9f9f9",arc:{fill:Nut},area:{fill:Nut},line:{stroke:Nut},path:{stroke:Nut},rect:{fill:Nut},shape:{stroke:Nut},symbol:{fill:Nut,size:30},axis:{domainColor:Iut,domainWidth:.5,gridWidth:.2,labelColor:Iut,tickColor:Iut,tickWidth:.2,titleColor:Iut},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}};var Fut=Rut;const Put="#3e5c69",$ut={background:"#fff",arc:{fill:Put},area:{fill:Put},line:{stroke:Put},path:{stroke:Put},rect:{fill:Put},shape:{stroke:Put},symbol:{fill:Put},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}};var Lut=$ut;const zut="#1696d2",But="#000000",Uut="#FFFFFF",Wut="Lato",Vut="Lato",Hut="Lato",qut="#DEDDDD",Gut=18,Xut={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Yut={background:Uut,title:{anchor:"start",fontSize:Gut,font:Wut},axisX:{domain:!0,domainColor:But,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Vut,labelAngle:0,tickColor:But,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Wut},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:qut,gridWidth:1,labelFontSize:12,labelFont:Vut,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Wut,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Vut,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Wut,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Xut["six-groups-cat-1"],diverging:Xut["diverging-colors"],heatmap:Xut["diverging-colors"],ordinal:Xut["six-groups-seq"],ramp:Xut["shades-blue"]},area:{fill:zut},rect:{fill:zut},line:{color:zut,stroke:zut,strokeWidth:5},trail:{color:zut,stroke:zut,strokeWidth:0,size:1},path:{stroke:zut,strokeWidth:.5},point:{filled:!0},text:{font:Hut,color:zut,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:zut,stroke:null}},arc:{fill:zut},shape:{stroke:zut},symbol:{fill:zut,size:30}};var Kut=Yut;const Zut="#3366CC",Jut="#ccc",Qut="Arial, sans-serif",tct={arc:{fill:Zut},area:{fill:Zut},path:{stroke:Zut},rect:{fill:Zut},shape:{stroke:Zut},symbol:{stroke:Zut},circle:{fill:Zut},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Qut,fontSize:12},"guide-title":{font:Qut,fontSize:12},"group-title":{font:Qut,fontSize:12}},title:{font:Qut,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Jut,tickColor:Jut,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}};var ect=tct;const nct=nut.version;var rct=n("de20"),ict="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const oct="vg-tooltip-element",act={offsetX:10,offsetY:10,id:oct,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:sct,maxDepth:2};function sct(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function uct(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return ict.toString().replace(oct,t)}var cct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function lct(t,e,n){if(Object(rt["A"])(t))return`[${t.map(t=>e(Object(rt["H"])(t)?t:fct(t,n))).join(", ")}]`;if(Object(rt["F"])(t)){let r="";const i=t,{title:o,image:a}=i,s=cct(i,["title","image"]);o&&(r+=`<h2>${e(o)}</h2>`),a&&(r+=`<img src="${e(a)}">`);const u=Object.keys(s);if(u.length>0){r+="<table>";for(const t of u){let i=s[t];void 0!==i&&(Object(rt["F"])(i)&&(i=fct(i,n)),r+=`<tr><td class="key">${e(t)}:</td><td class="value">${e(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return e(t)}function hct(t){const e=[];return function(n,r){if("object"!==typeof r||null===r)return r;const i=e.indexOf(this)+1;return e.length=i,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}function fct(t,e){return JSON.stringify(t,hct(e))}function dct(t,e,n,r){let i=t.clientX+n;i+e.width>window.innerWidth&&(i=+t.clientX-n-e.width);let o=t.clientY+r;return o+e.height>window.innerHeight&&(o=+t.clientY-r-e.height),{x:i,y:o}}class pct{constructor(t){this.options=Object.assign(Object.assign({},act),t);const e=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const t=document.createElement("style");t.setAttribute("id",this.options.styleId),t.innerHTML=uct(e);const n=document.head;n.childNodes.length>0?n.insertBefore(t,n.childNodes[0]):n.appendChild(t)}this.el=document.getElementById(e),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",e),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(t,e,n,r){if(null==r||""===r)return void this.el.classList.remove("visible",this.options.theme+"-theme");this.el.innerHTML=lct(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",this.options.theme+"-theme");const{x:i,y:o}=dct(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${i}px`)}}rct.version;var gct,mct=function(t,e,n){const r=t.open(e),i=1e4,o=250,{origin:a}=new URL(e);let s=~~(i/o);function u(e){e.source===r&&(s=0,t.removeEventListener("message",u,!1))}function c(){s<=0||(r.postMessage(n,a),setTimeout(c,o),s-=1)}t.addEventListener("message",u,!1),setTimeout(c,o)},vct='.vega-embed {\n  position: relative;\n  display: inline-block; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: scroll;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function yct(t,...e){for(const n of e)bct(t,n);return t}function bct(t,e){for(const n of Object.keys(e))Object(rt["jb"])(t,n,e[n],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t});const xct=m;let wct=y;const _ct="undefined"!==typeof window?window:void 0;void 0===wct&&(null===(gct=null===_ct||void 0===_ct?void 0:_ct["vl"])||void 0===gct?void 0:gct.compile)&&(wct=_ct["vl"]);const Oct={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Sct={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Cct={vega:"Vega","vega-lite":"Vega-Lite"},kct={vega:xct.version,"vega-lite":wct?wct.version:"not available"},Act={vega:t=>t,"vega-lite":(t,e)=>wct.compile(t,{config:e}).spec},Tct='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function Ect(t){return"function"===typeof t}function jct(t,e,n,r){const i=`<html><head>${e}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+t+o),a.document.title=Cct[r]+" JSON Source"}function Dct(t,e){var n;if(t.$schema){const r=eut()(t.$schema);e&&e!==r.library&&console.warn(`The given visualization spec is written in ${Cct[r.library]}, but mode argument sets ${null!==(n=Cct[e])&&void 0!==n?n:e}.`);const i=r.library;return Object(nt["satisfies"])(kct[i],"^"+r.version.slice(1))||console.warn(`The input spec uses ${Cct[i]} ${r.version}, but the current version of ${Cct[i]} is v${kct[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":null!==e&&void 0!==e?e:"vega"}function Mct(t){return!(!t||!("load"in t))}function Nct(t,e,n={}){var r,i,o;return x(this,void 0,void 0,(function*(){const a=Mct(n.loader)?n.loader:xct.loader(n.loader),s=Object(rt["H"])(e)?JSON.parse(yield a.load(e)):e,u=yield Ict(null!==(r=s.usermeta&&s.usermeta["embedOptions"])&&void 0!==r?r:{},a),c=yield Ict(n,a),l=Object.assign(Object.assign({},yct(c,u)),{config:Object(rt["N"])(null!==(i=c.config)&&void 0!==i?i:{},null!==(o=u.config)&&void 0!==o?o:{})});return yield Rct(t,s,l,a)}))}function Ict(t,e){var n;return x(this,void 0,void 0,(function*(){const r=Object(rt["H"])(t.config)?JSON.parse(yield e.load(t.config)):null!==(n=t.config)&&void 0!==n?n:{},i=Object(rt["H"])(t.patch)?JSON.parse(yield e.load(t.patch)):t.patch;return Object.assign(Object.assign(Object.assign({},t),i?{patch:i}:{}),r?{config:r}:{})}))}function Rct(t,e,n={},r){var i,o,a,s,u,c;return x(this,void 0,void 0,(function*(){const l=n.theme?Object(rt["N"])(b[n.theme],null!==(i=n.config)&&void 0!==i?i:{}):n.config,h=Object(rt["B"])(n.actions)?n.actions:yct({},Oct,null!==(o=n.actions)&&void 0!==o?o:{}),f=Object.assign(Object.assign({},Sct),n.i18n),d=null!==(a=n.renderer)&&void 0!==a?a:"canvas",p=null!==(s=n.logLevel)&&void 0!==s?s:xct.Warn,g=null!==(u=n.downloadFileName)&&void 0!==u?u:"visualization";if(!1!==n.defaultStyle){const t="vega-embed-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?(null!==vct&&void 0!==vct?vct:"").toString():n.defaultStyle,document.head.appendChild(e)}}const m=Dct(e,n.mode);let v=Act[m](e,l);if("vega-lite"===m&&v.$schema){const t=eut()(v.$schema);Object(nt["satisfies"])(kct.vega,"^"+t.version.slice(1))||console.warn(`The compiled spec uses Vega ${t.version}, but current version is v${kct.vega}.`)}const y="string"===typeof t?document.querySelector(t):t;if(!y)throw Error(t+" does not exist");y.classList.add("vega-embed"),h&&y.classList.add("has-actions"),y.innerHTML="";const w=n.patch;w&&(v=w instanceof Function?w(v):$(v,w,!0,!1).newDocument),n.formatLocale&&xct.formatLocale(n.formatLocale),n.timeFormatLocale&&xct.timeFormatLocale(n.timeFormatLocale);const _=xct.parse(v,"vega-lite"===m?{}:l),O=new xct.View(_,{loader:r,logLevel:p,renderer:d});if(!1!==n.tooltip){let t;t=Ect(n.tooltip)?n.tooltip:new pct(!0===n.tooltip?{}:n.tooltip).call,O.tooltip(t)}let S,{hover:C}=n;if(void 0===C&&(C="vega"===m),C){const{hoverSet:t,updateSet:e}="boolean"===typeof C?{}:C;O.hover(t,e)}if(n&&(null!=n.width&&O.width(n.width),null!=n.height&&O.height(n.height),null!=n.padding&&O.padding(n.padding)),yield O.initialize(t).runAsync(),!1!==h){let t=y;if(!1!==n.defaultStyle){const e=document.createElement("details");e.title=f.CLICK_TO_VIEW_ACTIONS,y.append(e),t=e;const n=document.createElement("summary");n.innerHTML=Tct,e.append(n),S=t=>{e.contains(t.target)||e.removeAttribute("open")},document.addEventListener("click",S)}const r=document.createElement("div");if(t.append(r),r.classList.add("vega-actions"),!0===h||!1!==h.export)for(const e of["svg","png"])if(!0===h||!0===h.export||h.export[e]){const t=f[e.toUpperCase()+"_ACTION"],i=document.createElement("a");i.text=t,i.href="#",i.target="_blank",i.download=`${g}.${e}`,i.addEventListener("mousedown",(function(t){return x(this,void 0,void 0,(function*(){t.preventDefault();const r=yield O.toImageURL(e,n.scaleFactor);this.href=r}))})),r.append(i)}if(!0===h||!1!==h.source){const t=document.createElement("a");t.text=f.SOURCE_ACTION,t.href="#",t.addEventListener("click",(function(t){var r,i;jct(et()(e),null!==(r=n.sourceHeader)&&void 0!==r?r:"",null!==(i=n.sourceFooter)&&void 0!==i?i:"",m),t.preventDefault()})),r.append(t)}if("vega-lite"===m&&(!0===h||!1!==h.compiled)){const t=document.createElement("a");t.text=f.COMPILED_ACTION,t.href="#",t.addEventListener("click",(function(t){var e,r;jct(et()(v),null!==(e=n.sourceHeader)&&void 0!==e?e:"",null!==(r=n.sourceFooter)&&void 0!==r?r:"","vega"),t.preventDefault()})),r.append(t)}if(!0===h||!1!==h.editor){const t=null!==(c=n.editorUrl)&&void 0!==c?c:"https://vega.github.io/editor/",i=document.createElement("a");i.text=f.EDITOR_ACTION,i.href="#",i.addEventListener("click",(function(n){mct(window,t,{config:l,mode:m,renderer:d,spec:et()(e)}),n.preventDefault()})),r.append(i)}}function k(){S&&document.removeEventListener("click",S),O.finalize()}return{view:O,spec:e,vgSpec:v,finalize:k}}))}},"7aec":function(t,e,n){(function(t){var r;(function(t,i,o){function a(t){var e=this;function n(t,e){var n,r,i,o,a,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,o=-32;o<u;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,n=s[127&o]^=r+a,i=0==n?i+1:0);for(i>=128&&(s[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;t.w=a,t.X=s,t.i=i}e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},n(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xor4096=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},"7b0b":function(t,e,n){var r=n("1d80");t.exports=function(t){return Object(r(t))}},"7b9e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=["Webkit"],i=["Moz"],o=["ms"],a=["Webkit","Moz"],s=["Webkit","ms"],u=["Webkit","Moz","ms"];e.default={plugins:[],prefixMap:{appearance:a,userSelect:u,textEmphasisPosition:r,textEmphasis:r,textEmphasisStyle:r,textEmphasisColor:r,boxDecorationBreak:r,clipPath:r,maskImage:r,maskMode:r,maskRepeat:r,maskPosition:r,maskClip:r,maskOrigin:r,maskSize:r,maskComposite:r,mask:r,maskBorderSource:r,maskBorderMode:r,maskBorderSlice:r,maskBorderWidth:r,maskBorderOutset:r,maskBorderRepeat:r,maskBorder:r,maskType:r,textDecorationStyle:r,textDecorationSkip:r,textDecorationLine:r,textDecorationColor:r,filter:r,fontFeatureSettings:r,breakAfter:u,breakBefore:u,breakInside:u,columnCount:a,columnFill:a,columnGap:a,columnRule:a,columnRuleColor:a,columnRuleStyle:a,columnRuleWidth:a,columns:a,columnSpan:a,columnWidth:a,writingMode:s,flex:r,flexBasis:r,flexDirection:r,flexGrow:r,flexFlow:r,flexShrink:r,flexWrap:r,alignContent:r,alignItems:r,alignSelf:r,justifyContent:r,order:r,transform:r,transformOrigin:r,transformOriginX:r,transformOriginY:r,backfaceVisibility:r,perspective:r,perspectiveOrigin:r,transformStyle:r,transformOriginZ:r,animation:r,animationDelay:r,animationDirection:r,animationFillMode:r,animationDuration:r,animationIterationCount:r,animationName:r,animationPlayState:r,animationTimingFunction:r,backdropFilter:r,fontKerning:r,scrollSnapType:s,scrollSnapPointsX:s,scrollSnapPointsY:s,scrollSnapDestination:s,scrollSnapCoordinate:s,shapeImageThreshold:r,shapeImageMargin:r,shapeImageOutside:r,hyphens:u,flowInto:s,flowFrom:s,regionFragment:s,textAlignLast:i,tabSize:i,wrapFlow:o,wrapThrough:o,wrapMargin:o,gridTemplateColumns:o,gridTemplateRows:o,gridTemplateAreas:o,gridTemplate:o,gridAutoColumns:o,gridAutoRows:o,gridAutoFlow:o,grid:o,gridRowStart:o,gridColumnStart:o,gridRowEnd:o,gridRow:o,gridColumn:o,gridColumnEnd:o,gridColumnGap:o,gridRowGap:o,gridArea:o,gridGap:o,textSizeAdjust:s,borderImage:r,borderImageOutset:r,borderImageRepeat:r,borderImageSlice:r,borderImageSource:r,borderImageWidth:r,transitionDelay:r,transitionDuration:r,transitionProperty:r,transitionTimingFunction:r}},t.exports=e["default"]},"7c73":function(t,e,n){var r,i=n("825a"),o=n("37e8"),a=n("7839"),s=n("d012"),u=n("1be4"),c=n("cc12"),l=n("f772"),h=">",f="<",d="prototype",p="script",g=l("IE_PROTO"),m=function(){},v=function(t){return f+p+h+t+f+"/"+p+h},y=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=c("iframe"),n="java"+p+":";return e.style.display="none",u.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},x=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}x=r?y(r):b();var t=a.length;while(t--)delete x[d][a[t]];return x()};s[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(m[d]=i(t),n=new m,m[d]=null,n[g]=t):n=x(),void 0===e?n:o(n,e)}},"7d63":function(t,e,n){const r=n("3fce"),i=(t,e)=>new r(t,e).set.map(t=>t.map(t=>t.value).join(" ").trim().split(" "));t.exports=i},"7d6d":function(t,e){var n={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};function r(t,e,r){return n.hasOwnProperty(e)?r*t.dpr:r}t.exports=r},"7dd0":function(t,e,n){"use strict";var r=n("23e7"),i=n("9ed3"),o=n("e163"),a=n("d2bb"),s=n("d44e"),u=n("9112"),c=n("6eeb"),l=n("b622"),h=n("c430"),f=n("3f8c"),d=n("ae93"),p=d.IteratorPrototype,g=d.BUGGY_SAFARI_ITERATORS,m=l("iterator"),v="keys",y="values",b="entries",x=function(){return this};t.exports=function(t,e,n,l,d,w,_){i(n,e,l);var O,S,C,k=function(t){if(t===d&&D)return D;if(!g&&t in E)return E[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)};case b:return function(){return new n(this,t)}}return function(){return new n(this)}},A=e+" Iterator",T=!1,E=t.prototype,j=E[m]||E["@@iterator"]||d&&E[d],D=!g&&j||k(d),M="Array"==e&&E.entries||j;if(M&&(O=o(M.call(new t)),p!==Object.prototype&&O.next&&(h||o(O)===p||(a?a(O,p):"function"!=typeof O[m]&&u(O,m,x)),s(O,A,!0,!0),h&&(f[A]=x))),d==y&&j&&j.name!==y&&(T=!0,D=function(){return j.call(this)}),h&&!_||E[m]===D||u(E,m,D),f[e]=D,d)if(S={values:k(y),keys:w?D:k(v),entries:k(b)},_)for(C in S)(g||T||!(C in E))&&c(E,C,S[C]);else r({target:e,proto:!0,forced:g||T},S);return S}},"7e63":function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("6d8b")),o=i.each,a=i.filter,s=i.map,u=i.isArray,c=i.indexOf,l=i.isObject,h=i.isString,f=i.createHashMap,d=i.assert,p=i.clone,g=i.merge,m=i.extend,v=i.mixin,y=n("e0d3"),b=n("4319"),x=n("6cb7"),w=n("8971"),_=n("e47b"),O=n("0f99"),S=O.resetSourceDefaulter,C="\0_ec_inner",k=b.extend({init:function(t,e,n,r){n=n||{},this.option=null,this._theme=new b(n),this._optionManager=r},setOption:function(t,e){d(!(C in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,n=this._optionManager;if(!t||"recreate"===t){var r=n.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(r)):E.call(this,r),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var i=n.getTimelineOption(this);i&&(this.mergeOption(i),e=!0)}if(!t||"recreate"===t||"media"===t){var a=n.getMediaOption(this,this._api);a.length&&o(a,(function(t){this.mergeOption(t,e=!0)}),this)}return e},mergeOption:function(t){var e=this.option,n=this._componentsMap,r=[];function i(r,i){var a=y.normalizeToArray(t[r]),s=y.mappingToExists(n.get(r),a);y.makeIdAndName(s),o(s,(function(t,e){var n=t.option;l(n)&&(t.keyInfo.mainType=r,t.keyInfo.subType=D(r,n,t.exist))}));var u=j(n,i);e[r]=[],n.set(r,[]),o(s,(function(t,i){var o=t.exist,a=t.option;if(d(l(a)||o,"Empty component definition"),a){var s=x.getClass(r,t.keyInfo.subType,!0);if(o&&o.constructor===s)o.name=t.keyInfo.name,o.mergeOption(a,this),o.optionUpdated(a,!1);else{var c=m({dependentModels:u,componentIndex:i},t.keyInfo);o=new s(a,this,this,c),m(o,c),o.init(a,this,this,c),o.optionUpdated(null,!0)}}else o.mergeOption({},this),o.optionUpdated({},!1);n.get(r)[i]=o,e[r][i]=o.option}),this),"series"===r&&M(this,n.get("series"))}S(this),o(t,(function(t,n){null!=t&&(x.hasClass(n)?n&&r.push(n):e[n]=null==e[n]?p(t):g(e[n],t,!0))})),x.topologicalTravel(r,x.getAllClassMainTypes(),i,this),this._seriesIndicesMap=f(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var t=p(this.option);return o(t,(function(e,n){if(x.hasClass(n)){e=y.normalizeToArray(e);for(var r=e.length-1;r>=0;r--)y.isIdInner(e[r])&&e.splice(r,1);t[n]=e}})),delete t[C],t},getTheme:function(){return this._theme},getComponent:function(t,e){var n=this._componentsMap.get(t);if(n)return n[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var n,r=t.index,i=t.id,o=t.name,l=this._componentsMap.get(e);if(!l||!l.length)return[];if(null!=r)u(r)||(r=[r]),n=a(s(r,(function(t){return l[t]})),(function(t){return!!t}));else if(null!=i){var h=u(i);n=a(l,(function(t){return h&&c(i,t.id)>=0||!h&&t.id===i}))}else if(null!=o){var f=u(o);n=a(l,(function(t){return f&&c(o,t.name)>=0||!f&&t.name===o}))}else n=l.slice();return N(n,t)},findComponents:function(t){var e=t.query,n=t.mainType,r=o(e),i=r?this.queryComponents(r):this._componentsMap.get(n);return s(N(i,t));function o(t){var e=n+"Index",r=n+"Id",i=n+"Name";return!t||null==t[e]&&null==t[r]&&null==t[i]?null:{mainType:n,index:t[e],id:t[r],name:t[i]}}function s(e){return t.filter?a(e,t.filter):e}},eachComponent:function(t,e,n){var r=this._componentsMap;if("function"===typeof t)n=e,e=t,r.each((function(t,r){o(t,(function(t,i){e.call(n,r,t,i)}))}));else if(h(t))o(r.get(t),e,n);else if(l(t)){var i=this.findComponents(t);o(i,e,n)}},getSeriesByName:function(t){var e=this._componentsMap.get("series");return a(e,(function(e){return e.name===t}))},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(t){var e=this._componentsMap.get("series");return a(e,(function(e){return e.subType===t}))},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(t,e){I(this),o(this._seriesIndices,(function(n){var r=this._componentsMap.get("series")[n];t.call(e,r,n)}),this)},eachRawSeries:function(t,e){o(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(t,e,n){I(this),o(this._seriesIndices,(function(r){var i=this._componentsMap.get("series")[r];i.subType===t&&e.call(n,i,r)}),this)},eachRawSeriesByType:function(t,e,n){return o(this.getSeriesByType(t),e,n)},isSeriesFiltered:function(t){return I(this),null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){I(this);var n=a(this._componentsMap.get("series"),t,e);M(this,n)},restoreData:function(t){var e=this._componentsMap;M(this,e.get("series"));var n=[];e.each((function(t,e){n.push(e)})),x.topologicalTravel(n,x.getAllClassMainTypes(),(function(n,r){o(e.get(n),(function(e){("series"!==n||!A(e,t))&&e.restoreData()}))}))}});function A(t,e){if(e){var n=e.seiresIndex,r=e.seriesId,i=e.seriesName;return null!=n&&t.componentIndex!==n||null!=r&&t.id!==r||null!=i&&t.name!==i}}function T(t,e){var n=t.color&&!t.colorLayer;o(e,(function(e,r){"colorLayer"===r&&n||x.hasClass(r)||("object"===typeof e?t[r]=t[r]?g(t[r],e,!1):p(e):null==t[r]&&(t[r]=e))}))}function E(t){t=t,this.option={},this.option[C]=1,this._componentsMap=f({series:[]}),this._seriesIndices,this._seriesIndicesMap,T(t,this._theme.option),g(t,w,!1),this.mergeOption(t)}function j(t,e){u(e)||(e=e?[e]:[]);var n={};return o(e,(function(e){n[e]=(t.get(e)||[]).slice()})),n}function D(t,e,n){var r=e.type?e.type:n?n.subType:x.determineSubType(t,e);return r}function M(t,e){t._seriesIndicesMap=f(t._seriesIndices=s(e,(function(t){return t.componentIndex}))||[])}function N(t,e){return e.hasOwnProperty("subType")?a(t,(function(t){return t.subType===e.subType})):t}function I(t){}v(k,_);var R=k;t.exports=R},"7ed6":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(){return"undefined"!==typeof navigator&&null!=navigator}function i(){if(r()){const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function o(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}n.r(e),n.d(e,"isMobile",(function(){return i})),n.d(e,"isBrowser",(function(){return o}))},"7f9a":function(t,e,n){var r=n("da84"),i=n("8925"),o=r.WeakMap;t.exports="function"===typeof o&&/native code/.test(i(o))},"80ef":function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return i(this.cover(e,n),e,n,t)};function i(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,h,f,d=t._root,p={data:r},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(!d)return t._root=p,t;while(d.length)if((c=e>=(o=(g+v)/2))?g=o:v=o,(l=n>=(a=(m+y)/2))?m=a:y=a,i=d,!(d=d[h=l<<1|c]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+v)/2))?g=o:v=o,(l=n>=(a=(m+y)/2))?m=a:y=a}while((h=l<<1|c)===(f=(u>=a)<<1|s>=o));return i[f]=d,i[h]=p,t}function o(t){var e,n,r,o,a=t.length,s=new Array(a),u=new Array(a),c=1/0,l=1/0,h=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=r,u[n]=o,r<c&&(c=r),r>h&&(h=r),o<l&&(l=o),o>f&&(f=o));if(c>h||l>f)return this;for(this.cover(c,l).cover(h,f),n=0;n<a;++n)i(this,s[n],u[n],t[n]);return this}var a=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{var a,s,u=i-n,c=this._root;while(n>t||t>=i||r>e||e>=o)switch(s=(e<r)<<1|t<n,a=new Array(4),a[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},s=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},u=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},c=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},l=function(t,e,n){var r,i,o,a,s,u,l,h=this._x0,f=this._y0,d=this._x1,p=this._y1,g=[],m=this._root;m&&g.push(new c(m,h,f,d,p)),null==n?n=1/0:(h=t-n,f=e-n,d=t+n,p=e+n,n*=n);while(u=g.pop())if(!(!(m=u.node)||(i=u.x0)>d||(o=u.y0)>p||(a=u.x1)<h||(s=u.y1)<f))if(m.length){var v=(i+a)/2,y=(o+s)/2;g.push(new c(m[3],v,y,a,s),new c(m[2],i,y,v,s),new c(m[1],v,o,a,y),new c(m[0],i,o,v,y)),(l=(e>=y)<<1|t>=v)&&(u=g[g.length-1],g[g.length-1]=g[g.length-1-l],g[g.length-1-l]=u)}else{var b=t-+this._x.call(null,m.data),x=e-+this._y.call(null,m.data),w=b*b+x*x;if(w<n){var _=Math.sqrt(n=w);h=t-_,f=e-_,d=t+_,p=e+_,r=m.data}}return r},h=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,h,f,d=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!d)return this;if(d.length)while(1){if((c=o>=(s=(p+m)/2))?p=s:m=s,(l=a>=(u=(g+v)/2))?g=u:v=u,e=d,!(d=d[h=l<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}while(d.data!==t)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)};function f(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}var d=function(){return this._root},p=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},g=function(t){var e,n,r,i,o,a,s=[],u=this._root;u&&s.push(new c(u,this._x0,this._y0,this._x1,this._y1));while(e=s.pop())if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var l=(r+o)/2,h=(i+a)/2;(n=u[3])&&s.push(new c(n,l,h,o,a)),(n=u[2])&&s.push(new c(n,r,h,l,a)),(n=u[1])&&s.push(new c(n,l,i,o,h)),(n=u[0])&&s.push(new c(n,r,i,l,h))}return this},m=function(t){var e,n=[],r=[];this._root&&n.push(new c(this._root,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,l=e.y1,h=(a+u)/2,f=(s+l)/2;(o=i[0])&&n.push(new c(o,a,s,h,f)),(o=i[1])&&n.push(new c(o,h,s,u,f)),(o=i[2])&&n.push(new c(o,a,f,h,l)),(o=i[3])&&n.push(new c(o,h,f,u,l))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.x1,e.y1);return this};function v(t){return t[0]}var y=function(t){return arguments.length?(this._x=t,this):this._x};function b(t){return t[1]}var x=function(t){return arguments.length?(this._y=t,this):this._y};function w(t,e,n){var r=new _(null==e?v:e,null==n?b:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function _(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function O(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var S=w.prototype=_.prototype;S.copy=function(){var t,e,n=new _(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=O(r),n;t=[{source:r,target:n._root=new Array(4)}];while(r=t.pop())for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=O(e));return n},S.add=r,S.addAll=o,S.cover=a,S.data=s,S.extent=u,S.find=l,S.remove=h,S.removeAll=f,S.root=d,S.size=p,S.visit=g,S.visitAfter=m,S.x=y,S.y=x},"80f0":function(t,e){function n(t){return t}function r(t,e,r,i,o){this._old=t,this._new=e,this._oldKeyGetter=r||n,this._newKeyGetter=i||n,this.context=o}function i(t,e,n,r,i){for(var o=0;o<t.length;o++){var a="_ec_"+i[r](t[o],o),s=e[a];null==s?(n.push(a),e[a]=o):(s.length||(e[a]=s=[s]),s.push(o))}}r.prototype={constructor:r,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,n={},r={},o=[],a=[];for(i(t,n,o,"_oldKeyGetter",this),i(e,r,a,"_newKeyGetter",this),l=0;l<t.length;l++){var s=o[l],u=r[s];if(null!=u){var c=u.length;c?(1===c&&(r[s]=null),u=u.shift()):r[s]=null,this._update&&this._update(u,l)}else this._remove&&this._remove(l)}for(var l=0;l<a.length;l++){s=a[l];if(r.hasOwnProperty(s)){u=r[s];if(null==u)continue;if(u.length){var h=0;for(c=u.length;h<c;h++)this._add&&this._add(u[h])}else this._add&&this._add(u)}}}};var o=r;t.exports=o},"81ab":function(t,e,n){"use strict";function r(t){var e=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g,n=e.exec(t).slice(1,3),r=n[0],i=n[1];return{library:r,version:i}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"81d5":function(t,e,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("50c4");t.exports=function(t){var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);while(c>s)e[s++]=t;return e}},"825a":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},"82eb":function(t,e){var n={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},r=9;e.ContextCachedBy=n,e.WILL_BE_RESTORED=r},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"840c":function(t,e,n){"use strict";function r(t,e){if("position"===t&&"sticky"===e)return["-webkit-sticky","sticky"]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e["default"]},8418:function(t,e,n){"use strict";var r=n("c04e"),i=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},"843e":function(t,e,n){var r=n("6d8b"),i=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function o(t){r.each(i,(function(e){this[e]=r.bind(t[e],t)}),this)}var a=o;t.exports=a},"84ce":function(t,e,n){var r=n("6d8b"),i=r.each,o=r.map,a=n("3842"),s=a.linearMap,u=a.getPixelPrecision,c=a.round,l=n("e073"),h=l.createAxisTicks,f=l.createAxisLabels,d=l.calculateCategoryInterval,p=[0,1],g=function(t,e,n){this.dim=t,this.scale=e,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function m(t,e){var n=t[1]-t[0],r=e,i=n/r/2;t[0]+=i,t[1]-=i}function v(t,e,n,r){var o=e.length;if(t.onBand&&!n&&o){var a,s,u=t.getExtent();if(1===o)e[0].coord=u[0],a=e[1]={coord:u[0]};else{var l=e[o-1].tickValue-e[0].tickValue,h=(e[o-1].coord-e[0].coord)/l;i(e,(function(t){t.coord-=h/2}));var f=t.scale.getExtent();s=1+f[1]-e[o-1].tickValue,a={coord:e[o-1].coord+h*s},e.push(a)}var d=u[0]>u[1];p(e[0].coord,u[0])&&(r?e[0].coord=u[0]:e.shift()),r&&p(u[0],e[0].coord)&&e.unshift({coord:u[0]}),p(u[1],a.coord)&&(r?a.coord=u[1]:e.pop()),r&&p(a.coord,u[1])&&e.push({coord:u[1]})}function p(t,e){return t=c(t),e=c(e),d?t>e:t<e}}g.prototype={constructor:g,contain:function(t){var e=this._extent,n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]);return t>=n&&t<=r},containData:function(t){return this.scale.contain(t)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return u(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var n=this._extent;n[0]=t,n[1]=e},dataToCoord:function(t,e){var n=this._extent,r=this.scale;return t=r.normalize(t),this.onBand&&"ordinal"===r.type&&(n=n.slice(),m(n,r.count())),s(t,p,n,e)},coordToData:function(t,e){var n=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&(n=n.slice(),m(n,r.count()));var i=s(t,n,p,e);return this.scale.scale(i)},pointToData:function(t,e){},getTicksCoords:function(t){t=t||{};var e=t.tickModel||this.getTickModel(),n=h(this,e),r=n.ticks,i=o(r,(function(t){return{coord:this.dataToCoord(t),tickValue:t}}),this),a=e.get("alignWithLabel");return v(this,i,a,t.clamp),i},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var n=this.scale.getMinorTicks(e),r=o(n,(function(t){return o(t,(function(t){return{coord:this.dataToCoord(t),tickValue:t}}),this)}),this);return r},getViewLabels:function(){return f(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var r=Math.abs(t[1]-t[0]);return Math.abs(r)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return d(this)}};var y=g;t.exports=y},"84ec":function(t,e){var n=Math.log(2);function r(t,e,i,o,a,s){var u=o+"-"+a,c=t.length;if(s.hasOwnProperty(u))return s[u];if(1===e){var l=Math.round(Math.log((1<<c)-1&~a)/n);return t[i][l]}var h=o|1<<i,f=i+1;while(o&1<<f)f++;for(var d=0,p=0,g=0;p<c;p++){var m=1<<p;m&a||(d+=(g%2?-1:1)*t[i][p]*r(t,e-1,f,h,a|m,s),g++)}return s[u]=d,d}function i(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],i={},o=r(n,8,0,0,0,i);if(0!==o){for(var a=[],s=0;s<8;s++)for(var u=0;u<8;u++)null==a[u]&&(a[u]=0),a[u]+=((s+u)%2?-1:1)*r(n,7,0===s?1:0,1<<s,1<<u,i)/o*e[s];return function(t,e,n){var r=e*a[6]+n*a[7]+1;t[0]=(e*a[0]+n*a[1]+a[2])/r,t[1]=(e*a[3]+n*a[4]+a[5])/r}}}e.buildTransformer=i},"857a":function(t,e,n){var r=n("1d80"),i=/"/g;t.exports=function(t,e,n,o){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),s+">"+a+"</"+e+">"}},"857d":function(t,e){var n=2*Math.PI;function r(t){return t%=n,t<0&&(t+=n),t}e.normalizeRadian=r},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},"862d":function(t,e,n){var r=n("6d8b"),i=r.createHashMap,o=r.each,a=r.isString,s=r.defaults,u=r.extend,c=r.isObject,l=r.clone,h=n("e0d3"),f=h.normalizeToArray,d=n("0f99"),p=d.guessOrdinal,g=d.BE_ORDINAL,m=n("ec6f"),v=n("2f45"),y=v.OTHER_DIMENSIONS,b=n("562e");function x(t,e,n){m.isInstance(e)||(e=m.seriesDataToSource(e)),n=n||{},t=(t||[]).slice();for(var r=(n.dimsDef||[]).slice(),h=i(),d=i(),v=[],x=w(e,t,r,n.dimCount),O=0;O<x;O++){var S=r[O]=u({},c(r[O])?r[O]:{name:r[O]}),C=S.name,k=v[O]=new b;null!=C&&null==h.get(C)&&(k.name=k.displayName=C,h.set(C,O)),null!=S.type&&(k.type=S.type),null!=S.displayName&&(k.displayName=S.displayName)}var A=n.encodeDef;!A&&n.encodeDefaulter&&(A=n.encodeDefaulter(e,x)),A=i(A),A.each((function(t,e){if(t=f(t).slice(),1===t.length&&!a(t[0])&&t[0]<0)A.set(e,!1);else{var n=A.set(e,[]);o(t,(function(t,r){a(t)&&(t=h.get(t)),null!=t&&t<x&&(n[r]=t,E(v[t],e,r))}))}}));var T=0;function E(t,e,n){null!=y.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,d.set(e,!0))}o(t,(function(t,e){var n,r,i;if(a(t))n=t,t={};else{n=t.name;var u=t.ordinalMeta;t.ordinalMeta=null,t=l(t),t.ordinalMeta=u,r=t.dimsDef,i=t.otherDims,t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}var h=A.get(n);if(!1!==h){h=f(h);if(!h.length)for(var d=0;d<(r&&r.length||1);d++){while(T<v.length&&null!=v[T].coordDim)T++;T<v.length&&h.push(T++)}o(h,(function(e,o){var a=v[e];if(E(s(a,t),n,o),null==a.name&&r){var u=r[o];!c(u)&&(u={name:u}),a.name=a.displayName=u.name,a.defaultTooltip=u.defaultTooltip}i&&s(a.otherDims,i)}))}}));var j=n.generateCoord,D=n.generateCoordCount,M=null!=D;D=j?D||1:0;for(var N=j||"value",I=0;I<x;I++){k=v[I]=v[I]||new b;var R=k.coordDim;null==R&&(k.coordDim=_(N,d,M),k.coordDimIndex=0,(!j||D<=0)&&(k.isExtraCoord=!0),D--),null==k.name&&(k.name=_(k.coordDim,h)),null!=k.type||p(e,I,k.name)!==g.Must&&(!k.isExtraCoord||null==k.otherDims.itemName&&null==k.otherDims.seriesName)||(k.type="ordinal")}return v}function w(t,e,n,r){var i=Math.max(t.dimensionsDetectCount||1,e.length,n.length,r||0);return o(e,(function(t){var e=t.dimsDef;e&&(i=Math.max(i,e.length))})),i}function _(t,e,n){if(n||null!=e.get(t)){var r=0;while(null!=e.get(t+r))r++;t+=r}return e.set(t,!0),t}var O=x;t.exports=O},8689:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=["-webkit-","-moz-",""],i={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function o(t,e){if("cursor"===t&&i.hasOwnProperty(e))return r.map((function(t){return t+e}))}t.exports=e["default"]},"86d4":function(t,e,n){const r=n("bbfd"),i=n("3fce"),o=n("bac4"),a=(t,e)=>{t=new i(t,e);let n=new r("0.0.0");if(t.test(n))return n;if(n=new r("0.0.0-0"),t.test(n))return n;n=null;for(let i=0;i<t.set.length;++i){const e=t.set[i];e.forEach(t=>{const e=new r(t.semver.version);switch(t.operator){case">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case"":case">=":n&&!o(n,e)||(n=e);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+t.operator)}})}return n&&t.test(n)?n:null};t.exports=a},8728:function(t,e){function n(t,e,n,r,i,o){if(o>e&&o>r||o<e&&o<r)return 0;if(r===e)return 0;var a=r<e?1:-1,s=(o-e)/(r-e);1!==s&&0!==s||(a=r<e?.5:-.5);var u=s*(n-t)+t;return u===i?1/0:u>i?a:0}t.exports=n},8756:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=n("ad68"),a=i(n("7ad3")),s=n("1309"),u=n("4149"),c=n("5629"),l={maxBins:12,fontSize:11};function h(t,e,n={}){return r(this,void 0,void 0,(function*(){const r=d(e),i=Object.assign({},l,n),o={actions:!1,mode:"vega-lite",defaultStyle:!1},c=s.subSurface(t,"histogram");if(!1!==n.stats){const e=s.subSurface(t,"stats",{prepend:!0});let o;o=n.stats?n.stats:u.arrayStats(r.map(t=>t.value)),f(o,e,{fontSize:i.fontSize})}if(0===r.length)return;const h=[];for(let t=0;t<r.length;t++){const e=r[t].value;null!=e&&isFinite(e)&&h.push(r[t])}const p={width:i.width||s.getDefaultWidth(c),height:i.height||s.getDefaultHeight(c),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:h},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:i.fontSize,titleFontSize:i.fontSize},text:{fontSize:i.fontSize},legend:{labelFontSize:i.fontSize,titleFontSize:i.fontSize}},encoding:{x:{bin:{maxbins:i.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:i.color||"#001B44"}}};return a.default(c,p,o)}))}function f(t,e,n){const r=o.format(",.4~f"),i=o.format(".4~p"),a=[],s=[];if(null!=t.numVals&&(a.push("Num Vals"),s.push(r(t.numVals))),null!=t.min&&(a.push("Min"),s.push(r(t.min))),null!=t.max&&(a.push("Max"),s.push(r(t.max))),null!=t.numZeros){a.push("# Zeros");let e="";t.numVals&&(e=t.numZeros>0?`(${i(t.numZeros/t.numVals)})`:""),s.push(`${r(t.numZeros)} ${e}`)}if(null!=t.numNans){a.push("# NaNs");let e="";t.numVals&&(e=t.numNans>0?`(${i(t.numNans/t.numVals)})`:""),s.push(`${r(t.numNans)} ${e}`)}if(null!=t.numInfs){a.push("# Infinity");let e="";t.numVals&&(e=t.numInfs>0?`(${i(t.numInfs/t.numVals)})`:""),s.push(`${r(t.numInfs)} ${e}`)}c.table(e,{headers:a,values:[s]},n)}function d(t){if(null==t.length)throw new Error("input data must be an array");if(0===t.length)return[];if("object"===typeof t[0]){if(null==t[0].value)throw new Error("input data must have a value field");return t}{const e=Array(t.length);for(let n=0;n<t.length;n++)e[n]={value:t[n]};return e}}e.histogram=h},"87b1":function(t,e,n){var r=n("cbe5"),i=n("4fac"),o=r.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){i.buildPath(t,e,!0)}});t.exports=o},"88b3":function(t,e){var n="\0__throttleOriginMethod",r="\0__throttleRate",i="\0__throttleType";function o(t,e,n){var r,i,o,a,s,u=0,c=0,l=null;function h(){c=(new Date).getTime(),l=null,t.apply(o,a||[])}e=e||0;var f=function(){r=(new Date).getTime(),o=this,a=arguments;var t=s||e,f=s||n;s=null,i=r-(f?u:c)-t,clearTimeout(l),f?l=setTimeout(h,t):i>=0?h():l=setTimeout(h,-i),u=r};return f.clear=function(){l&&(clearTimeout(l),l=null)},f.debounceNextCall=function(t){s=t},f}function a(t,e,a,s){var u=t[e];if(u){var c=u[n]||u,l=u[i],h=u[r];if(h!==a||l!==s){if(null==a||!s)return t[e]=c;u=t[e]=o(c,a,"debounce"===s),u[n]=c,u[i]=s,u[r]=a}return u}}function s(t,e){var r=t[e];r&&r[n]&&(t[e]=r[n])}e.throttle=o,e.createOrUpdate=a,e.clear=s},8918:function(t,e,n){var r=n("6d8b"),i=n("625e"),o=i.parseClassType,a=0;function s(t){return[t||"",a++,Math.random().toFixed(5)].join("_")}function u(t){var e={};return t.registerSubTypeDefaulter=function(t,n){t=o(t),e[t.main]=n},t.determineSubType=function(n,r){var i=r.type;if(!i){var a=o(n).main;t.hasSubTypes(n)&&e[a]&&(i=e[a](r))}return i},t}function c(t,e){function n(t){var n={},a=[];return r.each(t,(function(s){var u=i(n,s),c=u.originalDeps=e(s),l=o(c,t);u.entryCount=l.length,0===u.entryCount&&a.push(s),r.each(l,(function(t){r.indexOf(u.predecessor,t)<0&&u.predecessor.push(t);var e=i(n,t);r.indexOf(e.successor,t)<0&&e.successor.push(s)}))})),{graph:n,noEntryList:a}}function i(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}function o(t,e){var n=[];return r.each(t,(function(t){r.indexOf(e,t)>=0&&n.push(t)})),n}t.topologicalTravel=function(t,e,i,o){if(t.length){var a=n(e),s=a.graph,u=a.noEntryList,c={};r.each(t,(function(t){c[t]=!0}));while(u.length){var l=u.pop(),h=s[l],f=!!c[l];f&&(i.call(o,l,h.originalDeps.slice()),delete c[l]),r.each(h.successor,f?p:d)}r.each(c,(function(){throw new Error("Circle dependency may exists")}))}function d(t){s[t].entryCount--,0===s[t].entryCount&&u.push(t)}function p(t){c[t]=!0,d(t)}}}e.getUID=s,e.enableSubTypeDefaulter=u,e.enableTopologicalTravel=c},8925:function(t,e,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},8970:function(t,e,n){const r=n("a236"),i=(t,e)=>{const n=r(t,e);return n&&n.prerelease.length?n.prerelease:null};t.exports=i},8971:function(t,e){var n="";"undefined"!==typeof navigator&&(n=navigator.platform||"");var r={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:n.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};t.exports=r},"897a":function(t,e,n){var r=n("22d1"),i=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];function o(t){return r.browser.ie&&r.browser.version>=11?function(){var e,n=this.__clipPaths,r=this.style;if(n)for(var o=0;o<n.length;o++){var a=n[o],s=a&&a.shape,u=a&&a.type;if(s&&("sector"===u&&s.startAngle===s.endAngle||"rect"===u&&(!s.width||!s.height))){for(var c=0;c<i.length;c++)i[c][2]=r[i[c][0]],r[i[c][0]]=i[c][1];e=!0;break}}if(t.apply(this,arguments),e)for(c=0;c<i.length;c++)r[i[c][0]]=i[c][2]}:t}t.exports=o},"89e3":function(t,e,n){var r=n("3842"),i=n("eda2"),o=n("e0d8"),a=n("944e"),s=r.round,u=o.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),u.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=a.getIntervalPrecision(t)},getTicks:function(t){var e=this._interval,n=this._extent,r=this._niceExtent,i=this._intervalPrecision,o=[];if(!e)return o;var a=1e4;n[0]<r[0]&&(t?o.push(s(r[0]-e,i)):o.push(n[0]));var u=r[0];while(u<=r[1]){if(o.push(u),u=s(u+e,i),u===o[o.length-1])break;if(o.length>a)return[]}var c=o.length?o[o.length-1]:r[1];return n[1]>c&&(t?o.push(s(c+e,i)):o.push(n[1])),o},getMinorTicks:function(t){for(var e=this.getTicks(!0),n=[],i=this.getExtent(),o=1;o<e.length;o++){var a=e[o],s=e[o-1],u=0,c=[],l=a-s,h=l/t;while(u<t-1){var f=r.round(s+(u+1)*h);f>i[0]&&f<i[1]&&c.push(f),u++}n.push(c)}return n},getLabel:function(t,e){if(null==t)return"";var n=e&&e.precision;return null==n?n=r.getPrecisionSafe(t)||0:"auto"===n&&(n=this._intervalPrecision),t=s(t,n,!0),i.addCommas(t)},niceTicks:function(t,e,n){t=t||5;var r=this._extent,i=r[1]-r[0];if(isFinite(i)){i<0&&(i=-i,r.reverse());var o=a.intervalScaleNiceTicks(r,t,e,n);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax||(e[1]+=n/2),e[0]-=n/2}else e[1]=1;var r=e[1]-e[0];isFinite(r)||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;t.fixMin||(e[0]=s(Math.floor(e[0]/i)*i)),t.fixMax||(e[1]=s(Math.ceil(e[1]/i)*i))}});u.create=function(){return new u};var c=u;t.exports=c},"89ed":function(t,e,n){(function(t){var r;(function(t,i,o){function a(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.tychei=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},"8b7f":function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("6d8b")),o=i.createHashMap,a=(i.retrieve,i.each);function s(t){this.coordSysName=t,this.coordSysDims=[],this.axisMap=o(),this.categoryAxisMap=o(),this.firstCategoryDimIndex=null}function u(t){var e=t.get("coordinateSystem"),n=new s(e),r=c[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}var c={cartesian2d:function(t,e,n,r){var i=t.getReferringComponents("xAxis")[0],o=t.getReferringComponents("yAxis")[0];e.coordSysDims=["x","y"],n.set("x",i),n.set("y",o),l(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),l(o)&&(r.set("y",o),e.firstCategoryDimIndex,e.firstCategoryDimIndex=1)},singleAxis:function(t,e,n,r){var i=t.getReferringComponents("singleAxis")[0];e.coordSysDims=["single"],n.set("single",i),l(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var i=t.getReferringComponents("polar")[0],o=i.findAxisModel("radiusAxis"),a=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",o),n.set("angle",a),l(o)&&(r.set("radius",o),e.firstCategoryDimIndex=0),l(a)&&(r.set("angle",a),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var i=t.ecModel,o=i.getComponent("parallel",t.get("parallelIndex")),s=e.coordSysDims=o.dimensions.slice();a(o.parallelAxisIndex,(function(t,o){var a=i.getComponent("parallelAxis",t),u=s[o];n.set(u,a),l(a)&&null==e.firstCategoryDimIndex&&(r.set(u,a),e.firstCategoryDimIndex=o)}))}};function l(t){return"category"===t.get("type")}e.getCoordSysInfoBySeries=u},"8bd6":function(t,e,n){const r=n("38cb"),i=(t,e,n)=>r(t,e,">",n);t.exports=i},"8c2a":function(t,e,n){var r=n("6d8b"),i=n("e0d8"),o=n("3842"),a=n("89e3"),s=i.prototype,u=a.prototype,c=o.getPrecisionSafe,l=o.round,h=Math.floor,f=Math.ceil,d=Math.pow,p=Math.log,g=i.extend({type:"log",base:10,$constructor:function(){i.apply(this,arguments),this._originalScale=new a},getTicks:function(t){var e=this._originalScale,n=this._extent,i=e.getExtent();return r.map(u.getTicks.call(this,t),(function(t){var r=o.round(d(this.base,t));return r=t===n[0]&&e.__fixMin?m(r,i[0]):r,r=t===n[1]&&e.__fixMax?m(r,i[1]):r,r}),this)},getMinorTicks:u.getMinorTicks,getLabel:u.getLabel,scale:function(t){return t=s.scale.call(this,t),d(this.base,t)},setExtent:function(t,e){var n=this.base;t=p(t)/p(n),e=p(e)/p(n),u.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=s.getExtent.call(this);e[0]=d(t,e[0]),e[1]=d(t,e[1]);var n=this._originalScale,r=n.getExtent();return n.__fixMin&&(e[0]=m(e[0],r[0])),n.__fixMax&&(e[1]=m(e[1],r[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=p(t[0])/p(e),t[1]=p(t[1])/p(e),s.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n===1/0||n<=0)){var r=o.quantity(n),i=t/n*r;i<=.5&&(r*=10);while(!isNaN(r)&&Math.abs(r)<1&&Math.abs(r)>0)r*=10;var a=[o.round(f(e[0]/r)*r),o.round(h(e[1]/r)*r)];this._interval=r,this._niceExtent=a}},niceExtent:function(t){u.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});function m(t,e){return l(t,c(e))}r.each(["contain","normalize"],(function(t){g.prototype[t]=function(e){return e=p(e)/p(this.base),s[t].call(this,e)}})),g.create=function(){return new g};var v=g;t.exports=v},"8c4f":function(t,e,n){"use strict";
/*!
  * vue-router v3.4.3
  * (c) 2020 Evan You
  * @license MIT
  */function r(t,e){0}function i(t,e){for(var n in e)t[n]=e[n];return t}var o={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var n=e.props,r=e.children,o=e.parent,s=e.data;s.routerView=!0;var u=o.$createElement,c=n.name,l=o.$route,h=o._routerViewCache||(o._routerViewCache={}),f=0,d=!1;while(o&&o._routerRoot!==o){var p=o.$vnode?o.$vnode.data:{};p.routerView&&f++,p.keepAlive&&o._directInactive&&o._inactive&&(d=!0),o=o.$parent}if(s.routerViewDepth=f,d){var g=h[c],m=g&&g.component;return m?(g.configProps&&a(m,s,g.route,g.configProps),u(m,s,r)):u()}var v=l.matched[f],y=v&&v.components[c];if(!v||!y)return h[c]=null,u();h[c]={component:y},s.registerRouteInstance=function(t,e){var n=v.instances[c];(e&&n!==t||!e&&n===t)&&(v.instances[c]=e)},(s.hook||(s.hook={})).prepatch=function(t,e){v.instances[c]=e.componentInstance},s.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==v.instances[c]&&(v.instances[c]=t.componentInstance)};var b=v.props&&v.props[c];return b&&(i(h[c],{route:l,configProps:b}),a(y,s,l,b)),u(y,s,r)}};function a(t,e,n,r){var o=e.props=s(n,r);if(o){o=e.props=i({},o);var a=e.attrs=e.attrs||{};for(var u in o)t.props&&u in t.props||(a[u]=o[u],delete o[u])}}function s(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0;default:0}}var u=/[!'()*]/g,c=function(t){return"%"+t.charCodeAt(0).toString(16)},l=/%2C/g,h=function(t){return encodeURIComponent(t).replace(u,c).replace(l,",")},f=decodeURIComponent;function d(t,e,n){void 0===e&&(e={});var r,i=n||g;try{r=i(t||"")}catch(s){r={}}for(var o in e){var a=e[o];r[o]=Array.isArray(a)?a.map(p):p(a)}return r}var p=function(t){return null==t||"object"===typeof t?t:String(t)};function g(t){var e={};return t=t.trim().replace(/^(\?|#|&)/,""),t?(t.split("&").forEach((function(t){var n=t.replace(/\+/g," ").split("="),r=f(n.shift()),i=n.length>0?f(n.join("=")):null;void 0===e[r]?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]})),e):e}function m(t){var e=t?Object.keys(t).map((function(e){var n=t[e];if(void 0===n)return"";if(null===n)return h(e);if(Array.isArray(n)){var r=[];return n.forEach((function(t){void 0!==t&&(null===t?r.push(h(e)):r.push(h(e)+"="+h(t)))})),r.join("&")}return h(e)+"="+h(n)})).filter((function(t){return t.length>0})).join("&"):null;return e?"?"+e:""}var v=/\/?$/;function y(t,e,n,r){var i=r&&r.options.stringifyQuery,o=e.query||{};try{o=b(o)}catch(s){}var a={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:o,params:e.params||{},fullPath:_(e,i),matched:t?w(t):[]};return n&&(a.redirectedFrom=_(n,i)),Object.freeze(a)}function b(t){if(Array.isArray(t))return t.map(b);if(t&&"object"===typeof t){var e={};for(var n in t)e[n]=b(t[n]);return e}return t}var x=y(null,{path:"/"});function w(t){var e=[];while(t)e.unshift(t),t=t.parent;return e}function _(t,e){var n=t.path,r=t.query;void 0===r&&(r={});var i=t.hash;void 0===i&&(i="");var o=e||m;return(n||"/")+o(r)+i}function O(t,e){return e===x?t===e:!!e&&(t.path&&e.path?t.path.replace(v,"")===e.path.replace(v,"")&&t.hash===e.hash&&S(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&S(t.query,e.query)&&S(t.params,e.params)))}function S(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((function(n){var r=t[n],i=e[n];return null==r||null==i?r===i:"object"===typeof r&&"object"===typeof i?S(r,i):String(r)===String(i)}))}function C(t,e){return 0===t.path.replace(v,"/").indexOf(e.path.replace(v,"/"))&&(!e.hash||t.hash===e.hash)&&k(t.query,e.query)}function k(t,e){for(var n in e)if(!(n in t))return!1;return!0}function A(t,e,n){var r=t.charAt(0);if("/"===r)return t;if("?"===r||"#"===r)return e+t;var i=e.split("/");n&&i[i.length-1]||i.pop();for(var o=t.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function T(t){var e="",n="",r=t.indexOf("#");r>=0&&(e=t.slice(r),t=t.slice(0,r));var i=t.indexOf("?");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{path:t,query:n,hash:e}}function E(t){return t.replace(/\/\//g,"/")}var j=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},D=K,M=P,N=$,I=B,R=Y,F=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function P(t,e){var n,r=[],i=0,o=0,a="",s=e&&e.delimiter||"/";while(null!=(n=F.exec(t))){var u=n[0],c=n[1],l=n.index;if(a+=t.slice(o,l),o=l+u.length,c)a+=c[1];else{var h=t[o],f=n[2],d=n[3],p=n[4],g=n[5],m=n[6],v=n[7];a&&(r.push(a),a="");var y=null!=f&&null!=h&&h!==f,b="+"===m||"*"===m,x="?"===m||"*"===m,w=n[2]||s,_=p||g;r.push({name:d||i++,prefix:f||"",delimiter:w,optional:x,repeat:b,partial:y,asterisk:!!v,pattern:_?W(_):v?".*":"[^"+U(w)+"]+?"})}}return o<t.length&&(a+=t.substr(o)),a&&r.push(a),r}function $(t,e){return B(P(t,e),e)}function L(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function z(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function B(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)"object"===typeof t[r]&&(n[r]=new RegExp("^(?:"+t[r].pattern+")$",H(e)));return function(e,r){for(var i="",o=e||{},a=r||{},s=a.pretty?L:encodeURIComponent,u=0;u<t.length;u++){var c=t[u];if("string"!==typeof c){var l,h=o[c.name];if(null==h){if(c.optional){c.partial&&(i+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(j(h)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(l=s(h[f]),!n[u].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");i+=(0===f?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?z(h):s(h),!n[u].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');i+=c.prefix+l}}else i+=c}return i}}function U(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function W(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function V(t,e){return t.keys=e,t}function H(t){return t&&t.sensitive?"":"i"}function q(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return V(t,e)}function G(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(K(t[i],e,n).source);var o=new RegExp("(?:"+r.join("|")+")",H(n));return V(o,e)}function X(t,e,n){return Y(P(t,n),e,n)}function Y(t,e,n){j(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<t.length;a++){var s=t[a];if("string"===typeof s)o+=U(s);else{var u=U(s.prefix),c="(?:"+s.pattern+")";e.push(s),s.repeat&&(c+="(?:"+u+c+")*"),c=s.optional?s.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")",o+=c}}var l=U(n.delimiter||"/"),h=o.slice(-l.length)===l;return r||(o=(h?o.slice(0,-l.length):o)+"(?:"+l+"(?=$))?"),o+=i?"$":r&&h?"":"(?="+l+"|$)",V(new RegExp("^"+o,H(n)),e)}function K(t,e,n){return j(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?q(t,e):j(t)?G(t,e,n):X(t,e,n)}D.parse=M,D.compile=N,D.tokensToFunction=I,D.tokensToRegExp=R;var Z=Object.create(null);function J(t,e,n){e=e||{};try{var r=Z[t]||(Z[t]=D.compile(t));return"string"===typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(i){return""}finally{delete e[0]}}function Q(t,e,n,r){var o="string"===typeof t?{path:t}:t;if(o._normalized)return o;if(o.name){o=i({},t);var a=o.params;return a&&"object"===typeof a&&(o.params=i({},a)),o}if(!o.path&&o.params&&e){o=i({},o),o._normalized=!0;var s=i(i({},e.params),o.params);if(e.name)o.name=e.name,o.params=s;else if(e.matched.length){var u=e.matched[e.matched.length-1].path;o.path=J(u,s,"path "+e.path)}else 0;return o}var c=T(o.path||""),l=e&&e.path||"/",h=c.path?A(c.path,l,n||o.append):l,f=d(c.query,o.query,r&&r.options.parseQuery),p=o.hash||c.hash;return p&&"#"!==p.charAt(0)&&(p="#"+p),{_normalized:!0,path:h,query:f,hash:p}}var tt,et=[String,Object],nt=[String,Array],rt=function(){},it={name:"RouterLink",props:{to:{type:et,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:nt,default:"click"}},render:function(t){var e=this,n=this.$router,r=this.$route,o=n.resolve(this.to,r,this.append),a=o.location,s=o.route,u=o.href,c={},l=n.options.linkActiveClass,h=n.options.linkExactActiveClass,f=null==l?"router-link-active":l,d=null==h?"router-link-exact-active":h,p=null==this.activeClass?f:this.activeClass,g=null==this.exactActiveClass?d:this.exactActiveClass,m=s.redirectedFrom?y(null,Q(s.redirectedFrom),null,n):s;c[g]=O(r,m),c[p]=this.exact?c[g]:C(r,m);var v=c[g]?this.ariaCurrentValue:null,b=function(t){ot(t)&&(e.replace?n.replace(a,rt):n.push(a,rt))},x={click:ot};Array.isArray(this.event)?this.event.forEach((function(t){x[t]=b})):x[this.event]=b;var w={class:c},_=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:u,route:s,navigate:b,isActive:c[p],isExactActive:c[g]});if(_){if(1===_.length)return _[0];if(_.length>1||!_.length)return 0===_.length?t():t("span",{},_)}if("a"===this.tag)w.on=x,w.attrs={href:u,"aria-current":v};else{var S=at(this.$slots.default);if(S){S.isStatic=!1;var k=S.data=i({},S.data);for(var A in k.on=k.on||{},k.on){var T=k.on[A];A in x&&(k.on[A]=Array.isArray(T)?T:[T])}for(var E in x)E in k.on?k.on[E].push(x[E]):k.on[E]=b;var j=S.data.attrs=i({},S.data.attrs);j.href=u,j["aria-current"]=v}else w.on=x}return t(this.tag,w,this.$slots.default)}};function ot(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function at(t){if(t)for(var e,n=0;n<t.length;n++){if(e=t[n],"a"===e.tag)return e;if(e.children&&(e=at(e.children)))return e}}function st(t){if(!st.installed||tt!==t){st.installed=!0,tt=t;var e=function(t){return void 0!==t},n=function(t,n){var r=t.$options._parentVnode;e(r)&&e(r=r.data)&&e(r=r.registerRouteInstance)&&r(t,n)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",o),t.component("RouterLink",it);var r=t.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}var ut="undefined"!==typeof window;function ct(t,e,n,r){var i=e||[],o=n||Object.create(null),a=r||Object.create(null);t.forEach((function(t){lt(i,o,a,t)}));for(var s=0,u=i.length;s<u;s++)"*"===i[s]&&(i.push(i.splice(s,1)[0]),u--,s--);return{pathList:i,pathMap:o,nameMap:a}}function lt(t,e,n,r,i,o){var a=r.path,s=r.name;var u=r.pathToRegexpOptions||{},c=ft(a,i,u.strict);"boolean"===typeof r.caseSensitive&&(u.sensitive=r.caseSensitive);var l={path:c,regex:ht(c,u),components:r.components||{default:r.component},instances:{},name:s,parent:i,matchAs:o,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach((function(r){var i=o?E(o+"/"+r.path):void 0;lt(t,e,n,r,l,i)})),e[l.path]||(t.push(l.path),e[l.path]=l),void 0!==r.alias)for(var h=Array.isArray(r.alias)?r.alias:[r.alias],f=0;f<h.length;++f){var d=h[f];0;var p={path:d,children:r.children};lt(t,e,n,p,i,l.path||"/")}s&&(n[s]||(n[s]=l))}function ht(t,e){var n=D(t,[],e);return n}function ft(t,e,n){return n||(t=t.replace(/\/$/,"")),"/"===t[0]||null==e?t:E(e.path+"/"+t)}function dt(t,e){var n=ct(t),r=n.pathList,i=n.pathMap,o=n.nameMap;function a(t){ct(t,r,i,o)}function s(t,n,a){var s=Q(t,n,!1,e),u=s.name;if(u){var c=o[u];if(!c)return l(null,s);var h=c.regex.keys.filter((function(t){return!t.optional})).map((function(t){return t.name}));if("object"!==typeof s.params&&(s.params={}),n&&"object"===typeof n.params)for(var f in n.params)!(f in s.params)&&h.indexOf(f)>-1&&(s.params[f]=n.params[f]);return s.path=J(c.path,s.params,'named route "'+u+'"'),l(c,s,a)}if(s.path){s.params={};for(var d=0;d<r.length;d++){var p=r[d],g=i[p];if(pt(g.regex,s.path,s.params))return l(g,s,a)}}return l(null,s)}function u(t,n){var r=t.redirect,i="function"===typeof r?r(y(t,n,null,e)):r;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return l(null,n);var a=i,u=a.name,c=a.path,h=n.query,f=n.hash,d=n.params;if(h=a.hasOwnProperty("query")?a.query:h,f=a.hasOwnProperty("hash")?a.hash:f,d=a.hasOwnProperty("params")?a.params:d,u){o[u];return s({_normalized:!0,name:u,query:h,hash:f,params:d},void 0,n)}if(c){var p=gt(c,t),g=J(p,d,'redirect route with path "'+p+'"');return s({_normalized:!0,path:g,query:h,hash:f},void 0,n)}return l(null,n)}function c(t,e,n){var r=J(n,e.params,'aliased route with path "'+n+'"'),i=s({_normalized:!0,path:r});if(i){var o=i.matched,a=o[o.length-1];return e.params=i.params,l(a,e)}return l(null,e)}function l(t,n,r){return t&&t.redirect?u(t,r||n):t&&t.matchAs?c(t,n,t.matchAs):y(t,n,r,e)}return{match:s,addRoutes:a}}function pt(t,e,n){var r=e.match(t);if(!r)return!1;if(!n)return!0;for(var i=1,o=r.length;i<o;++i){var a=t.keys[i-1],s="string"===typeof r[i]?decodeURIComponent(r[i]):r[i];a&&(n[a.name||"pathMatch"]=s)}return!0}function gt(t,e){return A(t,e.parent?e.parent.path:"/",!0)}var mt=ut&&window.performance&&window.performance.now?window.performance:Date;function vt(){return mt.now().toFixed(3)}var yt=vt();function bt(){return yt}function xt(t){return yt=t}var wt=Object.create(null);function _t(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,""),n=i({},window.history.state);return n.key=bt(),window.history.replaceState(n,"",e),window.addEventListener("popstate",Ct),function(){window.removeEventListener("popstate",Ct)}}function Ot(t,e,n,r){if(t.app){var i=t.options.scrollBehavior;i&&t.app.$nextTick((function(){var o=kt(),a=i.call(t,e,n,r?o:null);a&&("function"===typeof a.then?a.then((function(t){Nt(t,o)})).catch((function(t){0})):Nt(a,o))}))}}function St(){var t=bt();t&&(wt[t]={x:window.pageXOffset,y:window.pageYOffset})}function Ct(t){St(),t.state&&t.state.key&&xt(t.state.key)}function kt(){var t=bt();if(t)return wt[t]}function At(t,e){var n=document.documentElement,r=n.getBoundingClientRect(),i=t.getBoundingClientRect();return{x:i.left-r.left-e.x,y:i.top-r.top-e.y}}function Tt(t){return Dt(t.x)||Dt(t.y)}function Et(t){return{x:Dt(t.x)?t.x:window.pageXOffset,y:Dt(t.y)?t.y:window.pageYOffset}}function jt(t){return{x:Dt(t.x)?t.x:0,y:Dt(t.y)?t.y:0}}function Dt(t){return"number"===typeof t}var Mt=/^#\d/;function Nt(t,e){var n="object"===typeof t;if(n&&"string"===typeof t.selector){var r=Mt.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(r){var i=t.offset&&"object"===typeof t.offset?t.offset:{};i=jt(i),e=At(r,i)}else Tt(t)&&(e=Et(t))}else n&&Tt(t)&&(e=Et(t));e&&window.scrollTo(e.x,e.y)}var It=ut&&function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"function"===typeof window.history.pushState)}();function Rt(t,e){St();var n=window.history;try{if(e){var r=i({},n.state);r.key=bt(),n.replaceState(r,"",t)}else n.pushState({key:xt(vt())},"",t)}catch(o){window.location[e?"replace":"assign"](t)}}function Ft(t){Rt(t,!0)}function Pt(t,e,n){var r=function(i){i>=t.length?n():t[i]?e(t[i],(function(){r(i+1)})):r(i+1)};r(0)}var $t={redirected:2,aborted:4,cancelled:8,duplicated:16};function Lt(t,e){return Wt(t,e,$t.redirected,'Redirected when going from "'+t.fullPath+'" to "'+Ht(e)+'" via a navigation guard.')}function zt(t,e){var n=Wt(t,e,$t.duplicated,'Avoided redundant navigation to current location: "'+t.fullPath+'".');return n.name="NavigationDuplicated",n}function Bt(t,e){return Wt(t,e,$t.cancelled,'Navigation cancelled from "'+t.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function Ut(t,e){return Wt(t,e,$t.aborted,'Navigation aborted from "'+t.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}function Wt(t,e,n,r){var i=new Error(r);return i._isRouter=!0,i.from=t,i.to=e,i.type=n,i}var Vt=["params","query","hash"];function Ht(t){if("string"===typeof t)return t;if("path"in t)return t.path;var e={};return Vt.forEach((function(n){n in t&&(e[n]=t[n])})),JSON.stringify(e,null,2)}function qt(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function Gt(t,e){return qt(t)&&t._isRouter&&(null==e||t.type===e)}function Xt(t){return function(e,n,r){var i=!1,o=0,a=null;Yt(t,(function(t,e,n,s){if("function"===typeof t&&void 0===t.cid){i=!0,o++;var u,c=Qt((function(e){Jt(e)&&(e=e.default),t.resolved="function"===typeof e?e:tt.extend(e),n.components[s]=e,o--,o<=0&&r()})),l=Qt((function(t){var e="Failed to resolve async component "+s+": "+t;a||(a=qt(t)?t:new Error(e),r(a))}));try{u=t(c,l)}catch(f){l(f)}if(u)if("function"===typeof u.then)u.then(c,l);else{var h=u.component;h&&"function"===typeof h.then&&h.then(c,l)}}})),i||r()}}function Yt(t,e){return Kt(t.map((function(t){return Object.keys(t.components).map((function(n){return e(t.components[n],t.instances[n],t,n)}))})))}function Kt(t){return Array.prototype.concat.apply([],t)}var Zt="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Jt(t){return t.__esModule||Zt&&"Module"===t[Symbol.toStringTag]}function Qt(t){var e=!1;return function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];if(!e)return e=!0,t.apply(this,n)}}var te=function(t,e){this.router=t,this.base=ee(e),this.current=x,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function ee(t){if(!t)if(ut){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function ne(t,e){var n,r=Math.max(t.length,e.length);for(n=0;n<r;n++)if(t[n]!==e[n])break;return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}function re(t,e,n,r){var i=Yt(t,(function(t,r,i,o){var a=ie(t,e);if(a)return Array.isArray(a)?a.map((function(t){return n(t,r,i,o)})):n(a,r,i,o)}));return Kt(r?i.reverse():i)}function ie(t,e){return"function"!==typeof t&&(t=tt.extend(t)),t.options[e]}function oe(t){return re(t,"beforeRouteLeave",se,!0)}function ae(t){return re(t,"beforeRouteUpdate",se)}function se(t,e){if(e)return function(){return t.apply(e,arguments)}}function ue(t,e,n){return re(t,"beforeRouteEnter",(function(t,r,i,o){return ce(t,i,o,e,n)}))}function ce(t,e,n,r,i){return function(o,a,s){return t(o,a,(function(t){"function"===typeof t&&r.push((function(){le(t,e.instances,n,i)})),s(t)}))}}function le(t,e,n,r){e[n]&&!e[n]._isBeingDestroyed?t(e[n]):r()&&setTimeout((function(){le(t,e,n,r)}),16)}te.prototype.listen=function(t){this.cb=t},te.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},te.prototype.onError=function(t){this.errorCbs.push(t)},te.prototype.transitionTo=function(t,e,n){var r,i=this;try{r=this.router.match(t,this.current)}catch(o){throw this.errorCbs.forEach((function(t){t(o)})),o}this.confirmTransition(r,(function(){var t=i.current;i.updateRoute(r),e&&e(r),i.ensureURL(),i.router.afterHooks.forEach((function(e){e&&e(r,t)})),i.ready||(i.ready=!0,i.readyCbs.forEach((function(t){t(r)})))}),(function(t){n&&n(t),t&&!i.ready&&(i.ready=!0,Gt(t,$t.redirected)?i.readyCbs.forEach((function(t){t(r)})):i.readyErrorCbs.forEach((function(e){e(t)})))}))},te.prototype.confirmTransition=function(t,e,n){var i=this,o=this.current,a=function(t){!Gt(t)&&qt(t)&&(i.errorCbs.length?i.errorCbs.forEach((function(e){e(t)})):(r(!1,"uncaught error during route navigation:"),console.error(t))),n&&n(t)},s=t.matched.length-1,u=o.matched.length-1;if(O(t,o)&&s===u&&t.matched[s]===o.matched[u])return this.ensureURL(),a(zt(o,t));var c=ne(this.current.matched,t.matched),l=c.updated,h=c.deactivated,f=c.activated,d=[].concat(oe(h),this.router.beforeHooks,ae(l),f.map((function(t){return t.beforeEnter})),Xt(f));this.pending=t;var p=function(e,n){if(i.pending!==t)return a(Bt(o,t));try{e(t,o,(function(e){!1===e?(i.ensureURL(!0),a(Ut(o,t))):qt(e)?(i.ensureURL(!0),a(e)):"string"===typeof e||"object"===typeof e&&("string"===typeof e.path||"string"===typeof e.name)?(a(Lt(o,t)),"object"===typeof e&&e.replace?i.replace(e):i.push(e)):n(e)}))}catch(r){a(r)}};Pt(d,p,(function(){var n=[],r=function(){return i.current===t},s=ue(f,n,r),u=s.concat(i.router.resolveHooks);Pt(u,p,(function(){if(i.pending!==t)return a(Bt(o,t));i.pending=null,e(t),i.router.app&&i.router.app.$nextTick((function(){n.forEach((function(t){t()}))}))}))}))},te.prototype.updateRoute=function(t){this.current=t,this.cb&&this.cb(t)},te.prototype.setupListeners=function(){},te.prototype.teardownListeners=function(){this.listeners.forEach((function(t){t()})),this.listeners=[]};var he=function(t){function e(e,n){t.call(this,e,n),this._startLocation=fe(this.base)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router,n=e.options.scrollBehavior,r=It&&n;r&&this.listeners.push(_t());var i=function(){var n=t.current,i=fe(t.base);t.current===x&&i===t._startLocation||t.transitionTo(i,(function(t){r&&Ot(e,t,n,!0)}))};window.addEventListener("popstate",i),this.listeners.push((function(){window.removeEventListener("popstate",i)}))}},e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,(function(t){Rt(E(r.base+t.fullPath)),Ot(r.router,t,o,!1),e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,(function(t){Ft(E(r.base+t.fullPath)),Ot(r.router,t,o,!1),e&&e(t)}),n)},e.prototype.ensureURL=function(t){if(fe(this.base)!==this.current.fullPath){var e=E(this.base+this.current.fullPath);t?Rt(e):Ft(e)}},e.prototype.getCurrentLocation=function(){return fe(this.base)},e}(te);function fe(t){var e=decodeURI(window.location.pathname);return t&&0===e.toLowerCase().indexOf(t.toLowerCase())&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var de=function(t){function e(e,n,r){t.call(this,e,n),r&&pe(this.base)||ge()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router,n=e.options.scrollBehavior,r=It&&n;r&&this.listeners.push(_t());var i=function(){var e=t.current;ge()&&t.transitionTo(me(),(function(n){r&&Ot(t.router,n,e,!0),It||be(n.fullPath)}))},o=It?"popstate":"hashchange";window.addEventListener(o,i),this.listeners.push((function(){window.removeEventListener(o,i)}))}},e.prototype.push=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,(function(t){ye(t.fullPath),Ot(r.router,t,o,!1),e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,(function(t){be(t.fullPath),Ot(r.router,t,o,!1),e&&e(t)}),n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;me()!==e&&(t?ye(e):be(e))},e.prototype.getCurrentLocation=function(){return me()},e}(te);function pe(t){var e=fe(t);if(!/^\/#/.test(e))return window.location.replace(E(t+"/#"+e)),!0}function ge(){var t=me();return"/"===t.charAt(0)||(be("/"+t),!1)}function me(){var t=window.location.href,e=t.indexOf("#");if(e<0)return"";t=t.slice(e+1);var n=t.indexOf("?");if(n<0){var r=t.indexOf("#");t=r>-1?decodeURI(t.slice(0,r))+t.slice(r):decodeURI(t)}else t=decodeURI(t.slice(0,n))+t.slice(n);return t}function ve(t){var e=window.location.href,n=e.indexOf("#"),r=n>=0?e.slice(0,n):e;return r+"#"+t}function ye(t){It?Rt(ve(t)):window.location.hash=t}function be(t){It?Ft(ve(t)):window.location.replace(ve(t))}var xe=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var r=this;this.transitionTo(t,(function(t){r.stack=r.stack.slice(0,r.index+1).concat(t),r.index++,e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var r=this;this.transitionTo(t,(function(t){r.stack=r.stack.slice(0,r.index).concat(t),e&&e(t)}),n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,(function(){e.index=n,e.updateRoute(r)}),(function(t){Gt(t,$t.duplicated)&&(e.index=n)}))}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(te),we=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=dt(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!It&&!1!==t.fallback,this.fallback&&(e="hash"),ut||(e="abstract"),this.mode=e,e){case"history":this.history=new he(this,t.base);break;case"hash":this.history=new de(this,t.base,this.fallback);break;case"abstract":this.history=new xe(this,t.base);break;default:0}},_e={currentRoute:{configurable:!0}};function Oe(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function Se(t,e,n){var r="hash"===n?"#"+e:e;return t?E(t+"/"+r):r}we.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},_e.currentRoute.get=function(){return this.history&&this.history.current},we.prototype.init=function(t){var e=this;if(this.apps.push(t),t.$once("hook:destroyed",(function(){var n=e.apps.indexOf(t);n>-1&&e.apps.splice(n,1),e.app===t&&(e.app=e.apps[0]||null),e.app||e.history.teardownListeners()})),!this.app){this.app=t;var n=this.history;if(n instanceof he||n instanceof de){var r=function(t){var r=n.current,i=e.options.scrollBehavior,o=It&&i;o&&"fullPath"in t&&Ot(e,t,r,!1)},i=function(t){n.setupListeners(),r(t)};n.transitionTo(n.getCurrentLocation(),i,i)}n.listen((function(t){e.apps.forEach((function(e){e._route=t}))}))}},we.prototype.beforeEach=function(t){return Oe(this.beforeHooks,t)},we.prototype.beforeResolve=function(t){return Oe(this.resolveHooks,t)},we.prototype.afterEach=function(t){return Oe(this.afterHooks,t)},we.prototype.onReady=function(t,e){this.history.onReady(t,e)},we.prototype.onError=function(t){this.history.onError(t)},we.prototype.push=function(t,e,n){var r=this;if(!e&&!n&&"undefined"!==typeof Promise)return new Promise((function(e,n){r.history.push(t,e,n)}));this.history.push(t,e,n)},we.prototype.replace=function(t,e,n){var r=this;if(!e&&!n&&"undefined"!==typeof Promise)return new Promise((function(e,n){r.history.replace(t,e,n)}));this.history.replace(t,e,n)},we.prototype.go=function(t){this.history.go(t)},we.prototype.back=function(){this.go(-1)},we.prototype.forward=function(){this.go(1)},we.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(t){return Object.keys(t.components).map((function(e){return t.components[e]}))}))):[]},we.prototype.resolve=function(t,e,n){e=e||this.history.current;var r=Q(t,e,n,this),i=this.match(r,e),o=i.redirectedFrom||i.fullPath,a=this.history.base,s=Se(a,o,this.mode);return{location:r,route:i,href:s,normalizedTo:r,resolved:i}},we.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==x&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(we.prototype,_e),we.install=st,we.version="3.4.3",we.isNavigationFailure=Gt,we.NavigationFailureType=$t,ut&&window.Vue&&window.Vue.use(we),e["a"]=we},"8cb5":function(t,e,n){const{MAX_SAFE_COMPONENT_LENGTH:r}=n("b15c"),i=n("b802");e=t.exports={};const o=e.re=[],a=e.src=[],s=e.t={};let u=0;const c=(t,e,n)=>{const r=u++;i(r,e),s[t]=r,a[r]=e,o[r]=new RegExp(e,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),c("FULL",`^${a[s.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),c("LOOSE",`^${a[s.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",a[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),c("XRANGEIDENTIFIER",a[s.NUMERICIDENTIFIER]+"|x|X|\\*"),c("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),c("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),c("COERCERTL",a[s.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",c("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",c("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},"8d32":function(t,e,n){var r=n("cbe5"),i=r.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,r=e.cy,i=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,u=Math.cos(o),c=Math.sin(o);t.moveTo(u*i+n,c*i+r),t.arc(n,r,i,o,a,!s)}});t.exports=i},"8e43":function(t,e,n){var r=n("6d8b"),i=r.createHashMap,o=r.isObject,a=r.map;function s(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this._map}s.createByAxisModel=function(t){var e=t.option,n=e.data,r=n&&a(n,l);return new s({categories:r,needCollect:!r,deduplication:!1!==e.dedplication})};var u=s.prototype;function c(t){return t._map||(t._map=i(t.categories))}function l(t){return o(t)&&null!=t.value?t.value:t+""}u.getOrdinal=function(t){return c(this).get(t)},u.parseAndCollect=function(t){var e,n=this._needCollect;if("string"!==typeof t&&!n)return t;if(n&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var r=c(this);return e=r.get(t),null==e&&(n?(e=this.categories.length,this.categories[e]=t,r.set(t,e)):e=NaN),e};var h=s;t.exports=h},"8e47":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("b7e4"),o=n("2f09");function a(t){if(t instanceof HTMLElement)return t;if(i.isSurface(t))return t.drawArea;if(i.isSurfaceInfo(t)){const e=o.visor().surface({name:t.name,tab:t.tab,styles:t.styles});return e.drawArea}throw new Error("Not a drawable")}function s(t,e){const n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(t[r]!==e[r])return!1}return!0}function u(){return r(this,void 0,void 0,(function*(){yield new Promise(t=>requestAnimationFrame(t))}))}e.getDrawArea=a,e.shallowEquals=s,e.nextFrame=u},"8ed2":function(t,e,n){n("48c7");var r=n("6cb7"),i=r.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});t.exports=i},9062:function(t,e,n){!function(e,n){t.exports=n()}("undefined"!=typeof self&&self,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);const r="undefined"!=typeof window?window.HTMLElement:Object;var i={mounted(){this.enforceFocus&&document.addEventListener("focusin",this.focusIn)},methods:{focusIn(t){if(!this.isActive)return;if(t.target===this.$el||this.$el.contains(t.target))return;let e=this.container?this.container:this.isFullPage?null:this.$el.parentElement;(this.isFullPage||e&&e.contains(t.target))&&(t.preventDefault(),this.$el.focus())}},beforeDestroy(){document.removeEventListener("focusin",this.focusIn)}};function o(t,e,n,r,i,o,a,s){var u,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}var a=o({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:this.width,height:this.height,stroke:this.color}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[e("g",{attrs:{transform:"translate(1 1)","stroke-width":"2"}},[e("circle",{attrs:{"stroke-opacity":".25",cx:"18",cy:"18",r:"18"}}),e("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[e("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.8s",repeatCount:"indefinite"}})],1)])])])}),[],!1,null,null,null).exports,s=o({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:this.color,width:this.width,height:this.height}},[e("circle",{attrs:{cx:"15",cy:"15",r:"15"}},[e("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})]),e("circle",{attrs:{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"}},[e("animate",{attrs:{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"}})]),e("circle",{attrs:{cx:"105",cy:"15",r:"15"}},[e("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})])])}),[],!1,null,null,null).exports,u=o({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:this.height,width:this.width,fill:this.color}},[e("rect",{attrs:{x:"0",y:"13",width:"4",height:"5"}},[e("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}})]),e("rect",{attrs:{x:"10",y:"13",width:"4",height:"5"}},[e("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}})]),e("rect",{attrs:{x:"20",y:"13",width:"4",height:"5"}},[e("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}}),e("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}})])])}),[],!1,null,null,null).exports,c=o({name:"vue-loading",mixins:[i],props:{active:Boolean,programmatic:Boolean,container:[Object,Function,r],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,opacity:Number,width:Number,height:Number,zIndex:Number,loader:{type:String,default:"spinner"}},data(){return{isActive:this.active}},components:{Spinner:a,Dots:s,Bars:u},beforeMount(){this.programmatic&&(this.container?(this.isFullPage=!1,this.container.appendChild(this.$el)):document.body.appendChild(this.$el))},mounted(){this.programmatic&&(this.isActive=!0),document.addEventListener("keyup",this.keyPress)},methods:{cancel(){this.canCancel&&this.isActive&&(this.hide(),this.onCancel.apply(null,arguments))},hide(){this.$emit("hide"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout(()=>{var t;this.$destroy(),void 0!==(t=this.$el).remove?t.remove():t.parentNode.removeChild(t)},150))},keyPress(t){27===t.keyCode&&this.cancel()}},watch:{active(t){this.isActive=t}},beforeDestroy(){document.removeEventListener("keyup",this.keyPress)}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.transition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"vld-overlay is-active",class:{"is-full-page":t.isFullPage},style:{zIndex:t.zIndex},attrs:{tabindex:"0","aria-busy":t.isActive,"aria-label":"Loading"}},[n("div",{staticClass:"vld-background",style:{background:t.backgroundColor,opacity:t.opacity},on:{click:function(e){return e.preventDefault(),t.cancel(e)}}}),n("div",{staticClass:"vld-icon"},[t._t("before"),t._t("default",[n(t.loader,{tag:"component",attrs:{color:t.color,width:t.width,height:t.height}})]),t._t("after")],2)])])}),[],!1,null,null,null).exports,l=(t,e={},n={})=>({show(r=e,i=n){const o=Object.assign({},e,r,{programmatic:!0}),a=new(t.extend(c))({el:document.createElement("div"),propsData:o}),s=Object.assign({},n,i);return Object.keys(s).map(t=>{a.$slots[t]=s[t]}),a}});n(0),c.install=(t,e={},n={})=>{let r=l(t,e,n);t.$loading=r,t.prototype.$loading=r},e.default=c}]).default}))},"90e3":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},9112:function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9152:function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*g}},"93d0":function(t,e){var n="original",r="arrayRows",i="objectRows",o="keyedColumns",a="unknown",s="typedArray",u="column",c="row";e.SOURCE_FORMAT_ORIGINAL=n,e.SOURCE_FORMAT_ARRAY_ROWS=r,e.SOURCE_FORMAT_OBJECT_ROWS=i,e.SOURCE_FORMAT_KEYED_COLUMNS=o,e.SOURCE_FORMAT_UNKNOWN=a,e.SOURCE_FORMAT_TYPED_ARRAY=s,e.SERIES_LAYOUT_BY_COLUMN=u,e.SERIES_LAYOUT_BY_ROW=c},"944e":function(t,e,n){var r=n("3842"),i=r.round;function o(t,e,n,o){var s={},c=t[1]-t[0],l=s.interval=r.nice(c/e,!0);null!=n&&l<n&&(l=s.interval=n),null!=o&&l>o&&(l=s.interval=o);var h=s.intervalPrecision=a(l),f=s.niceTickExtent=[i(Math.ceil(t[0]/l)*l,h),i(Math.floor(t[1]/l)*l,h)];return u(f,t),s}function a(t){return r.getPrecisionSafe(t)+2}function s(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function u(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),s(t,0,e),s(t,1,e),t[0]>t[1]&&(t[0]=t[1])}e.intervalScaleNiceTicks=o,e.getIntervalPrecision=a,e.fixExtent=u},9489:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},"94b1":function(t,e,n){var r=n("3eba"),i=n("6d8b"),o=n("9d57"),a=o.layout,s=o.largeLayout;n("5aa9"),n("17b8"),n("67cc"),n("01ed"),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,i.curry(a,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,s),r.registerVisual({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}})},"94ca":function(t,e,n){var r=n("d039"),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},"959d":function(t,e,n){"use strict";var r=n("3601"),i=/^-ms-/;function o(t){return r(t.replace(i,"ms-"))}t.exports=o},9680:function(t,e){function n(t,e,n,r,i,o,a){if(0===i)return!1;var s=i,u=0,c=t;if(a>e+s&&a>r+s||a<e-s&&a<r-s||o>t+s&&o>n+s||o<t-s&&o<n-s)return!1;if(t===n)return Math.abs(o-t)<=s/2;u=(e-r)/(t-n),c=(t*r-n*e)/(t-n);var l=u*o-a+c,h=l*l/(u*u+1);return h<=s/2*s/2}e.containStroke=n},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(M){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=C(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(M){return{type:"throw",arg:M}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",g={};function m(){}function v(){}function y(){}var b={};b[o]=function(){return this};var x=Object.getPrototypeOf,w=x&&x(x(j([])));w&&w!==n&&r.call(w,o)&&(b=w);var _=y.prototype=m.prototype=Object.create(b);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;function o(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function C(t,e,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return D()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function j(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:D}}function D(){return{value:e,done:!0}}return v.prototype=_.constructor=y,y.constructor=v,v.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,s,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},O(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(_),u(_,s,"Generator"),_[o]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},9847:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},9850:function(t,e,n){var r=n("401b"),i=n("1687"),o=r.applyTransform,a=Math.min,s=Math.max;function u(t,e,n,r){n<0&&(t+=n,n=-n),r<0&&(e+=r,r=-r),this.x=t,this.y=e,this.width=n,this.height=r}u.prototype={constructor:u,union:function(t){var e=a(t.x,this.x),n=a(t.y,this.y);this.width=s(t.x+t.width,this.x+this.width)-e,this.height=s(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:function(){var t=[],e=[],n=[],r=[];return function(i){if(i){t[0]=n[0]=this.x,t[1]=r[1]=this.y,e[0]=r[0]=this.x+this.width,e[1]=n[1]=this.y+this.height,o(t,t,i),o(e,e,i),o(n,n,i),o(r,r,i),this.x=a(t[0],e[0],n[0],r[0]),this.y=a(t[1],e[1],n[1],r[1]);var u=s(t[0],e[0],n[0],r[0]),c=s(t[1],e[1],n[1],r[1]);this.width=u-this.x,this.height=c-this.y}}}(),calculateTransform:function(t){var e=this,n=t.width/e.width,r=t.height/e.height,o=i.create();return i.translate(o,o,[-e.x,-e.y]),i.scale(o,o,[n,r]),i.translate(o,o,[t.x,t.y]),o},intersect:function(t){if(!t)return!1;t instanceof u||(t=u.create(t));var e=this,n=e.x,r=e.x+e.width,i=e.y,o=e.y+e.height,a=t.x,s=t.x+t.width,c=t.y,l=t.y+t.height;return!(r<a||s<n||o<c||l<i)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new u(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},u.create=function(t){return new u(t.x,t.y,t.width,t.height)};var c=u;t.exports=c},"98b7":function(t,e){var n="undefined"!==typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)};t.exports=n},"998c":function(t,e,n){var r=n("6d8b"),i=n("2306"),o=n("e86a"),a=Math.PI;function s(t,e){e=e||{},r.defaults(e,{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new i.Group,s=new i.Rect({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(s);var u=e.fontSize+" sans-serif",c=new i.Rect({style:{fill:"none",text:e.text,font:u,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});if(n.add(c),e.showSpinner){var l=new i.Arc({shape:{startAngle:-a/2,endAngle:-a/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001});l.animateShape(!0).when(1e3,{endAngle:3*a/2}).start("circularInOut"),l.animateShape(!0).when(1e3,{startAngle:3*a/2}).delay(300).start("circularInOut"),n.add(l)}return n.resize=function(){var n=o.getWidth(e.text,u),r=e.showSpinner?e.spinnerRadius:0,i=(t.getWidth()-2*r-(e.showSpinner&&n?10:0)-n)/2-(e.showSpinner?0:n/2),a=t.getHeight()/2;e.showSpinner&&l.setShape({cx:i,cy:a}),c.setShape({x:i-r,y:a-r,width:2*r,height:2*r}),s.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}t.exports=s},"99af":function(t,e,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("e8b5"),a=n("861d"),s=n("7b0b"),u=n("50c4"),c=n("8418"),l=n("65f0"),h=n("1dde"),f=n("b622"),d=n("2d00"),p=f("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",v=d>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),y=h("concat"),b=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},x=!v||!y;r({target:"Array",proto:!0,forced:x},{concat:function(t){var e,n,r,i,o,a=s(this),h=l(a,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],b(o)){if(i=u(o.length),f+i>g)throw TypeError(m);for(n=0;n<i;n++,f++)n in o&&c(h,f,o[n])}else{if(f>=g)throw TypeError(m);c(h,f++,o)}return h.length=f,h}})},"9ac2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processStyleName=void 0,e.createMarkupForStyles=d;var r=n("959d"),i=(h(r),n("d260")),o=h(i),a=n("fbc0"),s=h(a),u=n("ad65"),c=h(u),l=n("da67");h(l);function h(t){return t&&t.__esModule?t:{default:t}}var f=e.processStyleName=(0,c.default)(s.default);function d(t,e){var n="";for(var r in t){var i=0===r.indexOf("--");if(t.hasOwnProperty(r)&&"label"!==r){var a=t[r];0,null!=a&&(i?n+=r+":"+a+";":(n+=f(r)+":",n+=(0,o.default)(r,a,e)+";"))}}return n||null}},"9b0d":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var r=n("276f");function i(e){return!("function"!==typeof t||!Object(r["D"])(t.isBuffer))&&t.isBuffer(e)}function o(t,e){const n=e&&e.property?Object(r["t"])(e.property):r["x"];return Object(r["F"])(t)&&!i(t)?a(n(t)):n(JSON.parse(t))}function a(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}o.responseType="json"}).call(this,n("b639").Buffer)},"9b6c":function(t,e,n){const r=n("38cb"),i=(t,e,n)=>r(t,e,"<",n);t.exports=i},"9bdb":function(t,e,n){var r=n("282b"),i=r([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),o={getAreaStyle:function(t,e){return i(this,t,e)}};t.exports=o},"9bdd":function(t,e,n){var r=n("825a");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(a){var o=t["return"];throw void 0!==o&&r(o.call(t)),a}}},"9bf2":function(t,e,n){var r=n("83ab"),i=n("0cfb"),o=n("825a"),a=n("c04e"),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9c2c":function(t,e,n){var r=n("401b"),i=r.min,o=r.max,a=r.scale,s=r.distance,u=r.add,c=r.clone,l=r.sub;function h(t,e,n,r){var h,f,d,p,g=[],m=[],v=[],y=[];if(r){d=[1/0,1/0],p=[-1/0,-1/0];for(var b=0,x=t.length;b<x;b++)i(d,d,t[b]),o(p,p,t[b]);i(d,d,r[0]),o(p,p,r[1])}for(b=0,x=t.length;b<x;b++){var w=t[b];if(n)h=t[b?b-1:x-1],f=t[(b+1)%x];else{if(0===b||b===x-1){g.push(c(t[b]));continue}h=t[b-1],f=t[b+1]}l(m,f,h),a(m,m,e);var _=s(w,h),O=s(w,f),S=_+O;0!==S&&(_/=S,O/=S),a(v,m,-_),a(y,m,O);var C=u([],w,v),k=u([],w,y);r&&(o(C,C,d),i(C,C,p),o(k,k,d),i(k,k,p)),g.push(C),g.push(k)}return n&&g.push(g.shift()),g}t.exports=h},"9ca8":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"echarts"})},i=[],o=(n("4160"),n("d81d"),n("3eba")),a=n.n(o),s=n("b047"),u=n.n(s);let c=null;function l(t){return c||(c=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),c(t)}let h=null;function f(t){h||(h=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),h(t)}function d(t){var e=document.createElement("style");return e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),(document.querySelector("head")||document.body).appendChild(e),e}function p(t,e={}){let n=document.createElement(t);return Object.keys(e).forEach(t=>{n[t]=e[t]}),n}function g(t,e,n){let r=window.getComputedStyle(t,n||null)||{display:"none"};return r[e]}function m(t){if(!document.documentElement.contains(t))return{detached:!0,rendered:!1};let e=t;while(e!==document){if("none"===g(e,"display"))return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}var v='.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}';let y=0,b=null;function x(t,e){t.__resize_mutation_handler__||(t.__resize_mutation_handler__=O.bind(t));let n=t.__resize_listeners__;if(!n)if(t.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:e,offsetHeight:n}=t,r=new ResizeObserver(()=>{(t.__resize_observer_triggered__||(t.__resize_observer_triggered__=!0,t.offsetWidth!==e||t.offsetHeight!==n))&&C(t)}),{detached:i,rendered:o}=m(t);t.__resize_observer_triggered__=!1===i&&!1===o,t.__resize_observer__=r,r.observe(t)}else if(t.attachEvent&&t.addEventListener)t.__resize_legacy_resize_handler__=function(){C(t)},t.attachEvent("onresize",t.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);else if(y||(b=d(v)),k(t),t.__resize_rendered__=m(t).rendered,window.MutationObserver){let e=new MutationObserver(t.__resize_mutation_handler__);e.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t.__resize_mutation_observer__=e}t.__resize_listeners__.push(e),y++}function w(t,e){if(t.detachEvent&&t.removeEventListener)return t.detachEvent("onresize",t.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);let n=t.__resize_listeners__;n&&(n.splice(n.indexOf(e),1),n.length||(t.__resize_observer__?(t.__resize_observer__.unobserve(t),t.__resize_observer__.disconnect(),t.__resize_observer__=null):(t.__resize_mutation_observer__&&(t.__resize_mutation_observer__.disconnect(),t.__resize_mutation_observer__=null),t.removeEventListener("scroll",S),t.removeChild(t.__resize_triggers__.triggers),t.__resize_triggers__=null),t.__resize_listeners__=null),!--y&&b&&b.parentNode.removeChild(b))}function _(t){let{width:e,height:n}=t.__resize_last__,{offsetWidth:r,offsetHeight:i}=t;return r!==e||i!==n?{width:r,height:i}:null}function O(){let{rendered:t,detached:e}=m(this);t!==this.__resize_rendered__&&(!e&&this.__resize_triggers__&&(A(this),this.addEventListener("scroll",S,!0)),this.__resize_rendered__=t,C(this))}function S(){A(this),this.__resize_raf__&&f(this.__resize_raf__),this.__resize_raf__=l(()=>{let t=_(this);t&&(this.__resize_last__=t,C(this))})}function C(t){t&&t.__resize_listeners__&&t.__resize_listeners__.forEach(e=>{e.call(t)})}function k(t){let e=g(t,"position");e&&"static"!==e||(t.style.position="relative"),t.__resize_old_position__=e,t.__resize_last__={};let n=p("div",{className:"resize-triggers"}),r=p("div",{className:"resize-expand-trigger"}),i=p("div"),o=p("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(o),t.appendChild(n),t.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:o},A(t),t.addEventListener("scroll",S,!0),t.__resize_last__={width:t.offsetWidth,height:t.offsetHeight}}function A(t){let{expand:e,expandChild:n,contract:r}=t.__resize_triggers__,{scrollWidth:i,scrollHeight:o}=r,{offsetWidth:a,offsetHeight:s,scrollWidth:u,scrollHeight:c}=e;r.scrollLeft=i,r.scrollTop=o,n.style.width=a+1+"px",n.style.height=s+1+"px",e.scrollLeft=u,e.scrollTop=c}var T=["legendselectchanged","legendselected","legendunselected","legendscroll","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected","rendered","finished","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],E=["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],j=["theme","initOptions","autoresize"],D=["manualUpdate","watchShallow"],M={props:{options:Object,theme:[String,Object],initOptions:Object,group:String,autoresize:Boolean,watchShallow:Boolean,manualUpdate:Boolean},data:function(){return{lastArea:0}},watch:{group:function(t){this.chart.group=t}},methods:{mergeOptions:function(t,e,n){this.manualUpdate&&(this.manualOptions=t),this.chart?this.delegateMethod("setOption",t,e,n):this.init(t)},appendData:function(t){this.delegateMethod("appendData",t)},resize:function(t){this.delegateMethod("resize",t)},dispatchAction:function(t){this.delegateMethod("dispatchAction",t)},convertToPixel:function(t,e){return this.delegateMethod("convertToPixel",t,e)},convertFromPixel:function(t,e){return this.delegateMethod("convertFromPixel",t,e)},containPixel:function(t,e){return this.delegateMethod("containPixel",t,e)},showLoading:function(t,e){this.delegateMethod("showLoading",t,e)},hideLoading:function(){this.delegateMethod("hideLoading")},getDataURL:function(t){return this.delegateMethod("getDataURL",t)},getConnectedDataURL:function(t){return this.delegateMethod("getConnectedDataURL",t)},clear:function(){this.delegateMethod("clear")},dispose:function(){this.delegateMethod("dispose")},delegateMethod:function(t){var e;this.chart||this.init();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=this.chart)[t].apply(e,r)},delegateGet:function(t){return this.chart||this.init(),this.chart[t]()},getArea:function(){return this.$el.offsetWidth*this.$el.offsetHeight},init:function(t){var e=this;if(!this.chart){var n=a.a.init(this.$el,this.theme,this.initOptions);this.group&&(n.group=this.group),n.setOption(t||this.manualOptions||this.options||{},!0),T.forEach((function(t){n.on(t,(function(n){e.$emit(t,n)}))})),E.forEach((function(t){n.getZr().on(t,(function(n){e.$emit("zr:".concat(t),n)}))})),this.autoresize&&(this.lastArea=this.getArea(),this.__resizeHandler=u()((function(){0===e.lastArea?(e.mergeOptions({},!0),e.resize(),e.mergeOptions(e.options||e.manualOptions||{},!0)):e.resize(),e.lastArea=e.getArea()}),100,{leading:!0}),x(this.$el,this.__resizeHandler)),Object.defineProperties(this,{width:{configurable:!0,get:function(){return e.delegateGet("getWidth")}},height:{configurable:!0,get:function(){return e.delegateGet("getHeight")}},isDisposed:{configurable:!0,get:function(){return!!e.delegateGet("isDisposed")}},computedOptions:{configurable:!0,get:function(){return e.delegateGet("getOption")}}}),this.chart=n}},initOptionsWatcher:function(){var t=this;this.__unwatchOptions&&(this.__unwatchOptions(),this.__unwatchOptions=null),this.manualUpdate||(this.__unwatchOptions=this.$watch("options",(function(e,n){!t.chart&&e?t.init():t.chart.setOption(e,e!==n)}),{deep:!this.watchShallow}))},destroy:function(){this.autoresize&&w(this.$el,this.__resizeHandler),this.dispose(),this.chart=null},refresh:function(){this.chart&&(this.destroy(),this.init())}},created:function(){var t=this;this.initOptionsWatcher(),j.forEach((function(e){t.$watch(e,(function(){t.refresh()}),{deep:!0})})),D.forEach((function(e){t.$watch(e,(function(){t.initOptionsWatcher(),t.refresh()}))}))},mounted:function(){this.options&&this.init()},activated:function(){this.autoresize&&this.chart&&this.chart.resize()},destroyed:function(){this.chart&&this.destroy()},connect:function(t){"string"!==typeof t&&(t=t.map((function(t){return t.chart}))),a.a.connect(t)},disconnect:function(t){a.a.disConnect(t)},registerMap:function(t,e,n){a.a.registerMap(t,e,n)},registerTheme:function(t,e){a.a.registerTheme(t,e)},graphic:a.a.graphic},N=M,I=(n("1e3c"),n("2877")),R=Object(I["a"])(N,r,i,!1,null,null,null);e["a"]=R.exports},"9cf9":function(t,e){var n=Math.round;function r(t,e,r){if(e){var i=e.x1,a=e.x2,s=e.y1,u=e.y2;t.x1=i,t.x2=a,t.y1=s,t.y2=u;var c=r&&r.lineWidth;c&&(n(2*i)===n(2*a)&&(t.x1=t.x2=o(i,c,!0)),n(2*s)===n(2*u)&&(t.y1=t.y2=o(s,c,!0)))}}function i(t,e,n){if(e){var r=e.x,i=e.y,a=e.width,s=e.height;t.x=r,t.y=i,t.width=a,t.height=s;var u=n&&n.lineWidth;u&&(t.x=o(r,u,!0),t.y=o(i,u,!0),t.width=Math.max(o(r+a,u,!1)-t.x,0===a?0:1),t.height=Math.max(o(i+s,u,!1)-t.y,0===s?0:1))}}function o(t,e,r){if(!e)return t;var i=n(2*t);return(i+n(e))%2===0?i/2:(i+(r?1:-1))/2}e.subPixelOptimizeLine=r,e.subPixelOptimizeRect=i,e.subPixelOptimize=o},"9d57":function(t,e,n){var r=n("6d8b"),i=n("3842"),o=i.parsePercent,a=n("ee1a"),s=a.isDimensionStacked,u=n("cccd"),c="__ec_stack_",l=.5,h="undefined"!==typeof Float32Array?Float32Array:Array;function f(t){return t.get("stack")||c+t.seriesIndex}function d(t){return t.dim+t.index}function p(t){var e=[],n=t.axis,i="axis0";if("category"===n.type){for(var o=n.getBandWidth(),a=0;a<t.count;a++)e.push(r.defaults({bandWidth:o,axisKey:i,stackId:c+a},t));var s=y(e),u=[];for(a=0;a<t.count;a++){var l=s[i][c+a];l.offsetCenter=l.offset+l.width/2,u.push(l)}return u}}function g(t,e){var n=[];return e.eachSeriesByType(t,(function(t){_(t)&&!O(t)&&n.push(t)})),n}function m(t){var e={};r.each(t,(function(t){var n=t.coordinateSystem,r=n.getBaseAxis();if("time"===r.type||"value"===r.type)for(var i=t.getData(),o=r.dim+"_"+r.index,a=i.mapDimension(r.dim),s=0,u=i.count();s<u;++s){var c=i.get(a,s);e[o]?e[o].push(c):e[o]=[c]}}));var n=[];for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(o){o.sort((function(t,e){return t-e}));for(var a=null,s=1;s<o.length;++s){var u=o[s]-o[s-1];u>0&&(a=null===a?u:Math.min(a,u))}n[i]=a}}return n}function v(t){var e=m(t),n=[];return r.each(t,(function(t){var r,i=t.coordinateSystem,a=i.getBaseAxis(),s=a.getExtent();if("category"===a.type)r=a.getBandWidth();else if("value"===a.type||"time"===a.type){var u=a.dim+"_"+a.index,c=e[u],l=Math.abs(s[1]-s[0]),h=a.scale.getExtent(),p=Math.abs(h[1]-h[0]);r=c?l/p*c:l}else{var g=t.getData();r=Math.abs(s[1]-s[0])/g.count()}var m=o(t.get("barWidth"),r),v=o(t.get("barMaxWidth"),r),y=o(t.get("barMinWidth")||1,r),b=t.get("barGap"),x=t.get("barCategoryGap");n.push({bandWidth:r,barWidth:m,barMaxWidth:v,barMinWidth:y,barGap:b,barCategoryGap:x,axisKey:d(a),stackId:f(t)})})),y(n)}function y(t){var e={};r.each(t,(function(t,n){var r=t.axisKey,i=t.bandWidth,o=e[r]||{bandWidth:i,remainedWidth:i,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},a=o.stacks;e[r]=o;var s=t.stackId;a[s]||o.autoWidthCount++,a[s]=a[s]||{width:0,maxWidth:0};var u=t.barWidth;u&&!a[s].width&&(a[s].width=u,u=Math.min(o.remainedWidth,u),o.remainedWidth-=u);var c=t.barMaxWidth;c&&(a[s].maxWidth=c);var l=t.barMinWidth;l&&(a[s].minWidth=l);var h=t.barGap;null!=h&&(o.gap=h);var f=t.barCategoryGap;null!=f&&(o.categoryGap=f)}));var n={};return r.each(e,(function(t,e){n[e]={};var i=t.stacks,a=t.bandWidth,s=o(t.categoryGap,a),u=o(t.gap,1),c=t.remainedWidth,l=t.autoWidthCount,h=(c-s)/(l+(l-1)*u);h=Math.max(h,0),r.each(i,(function(t){var e=t.maxWidth,n=t.minWidth;if(t.width){r=t.width;e&&(r=Math.min(r,e)),n&&(r=Math.max(r,n)),t.width=r,c-=r+u*r,l--}else{var r=h;e&&e<r&&(r=Math.min(e,c)),n&&n>r&&(r=n),r!==h&&(t.width=r,c-=r+u*r,l--)}})),h=(c-s)/(l+(l-1)*u),h=Math.max(h,0);var f,d=0;r.each(i,(function(t,e){t.width||(t.width=h),f=t,d+=t.width*(1+u)})),f&&(d-=f.width*u);var p=-d/2;r.each(i,(function(t,r){n[e][r]=n[e][r]||{bandWidth:a,offset:p,width:t.width},p+=t.width*(1+u)}))})),n}function b(t,e,n){if(t&&e){var r=t[d(e)];return null!=r&&null!=n&&(r=r[f(n)]),r}}function x(t,e){var n=g(t,e),i=v(n),o={},a={};r.each(n,(function(t){var e=t.getData(),n=t.coordinateSystem,r=n.getBaseAxis(),u=f(t),c=i[d(r)][u],l=c.offset,h=c.width,p=n.getOtherAxis(r),g=t.get("barMinHeight")||0;o[u]=o[u]||[],a[u]=a[u]||[],e.setLayout({bandWidth:c.bandWidth,offset:l,size:h});for(var m=e.mapDimension(p.dim),v=e.mapDimension(r.dim),y=s(e,m),b=p.isHorizontal(),x=S(r,p,y),w=0,_=e.count();w<_;w++){var O,C,k,A,T=e.get(m,w),E=e.get(v,w),j=T>=0?"p":"n",D=x;if(y&&(o[u][E]||(o[u][E]={p:x,n:x}),D=o[u][E][j]),b){var M=n.dataToPoint([T,E]);O=D,C=M[1]+l,k=M[0]-x,A=h,Math.abs(k)<g&&(k=(k<0?-1:1)*g),isNaN(k)||y&&(o[u][E][j]+=k)}else{M=n.dataToPoint([E,T]);O=M[0]+l,C=D,k=h,A=M[1]-x,Math.abs(A)<g&&(A=(A<=0?-1:1)*g),isNaN(A)||y&&(o[u][E][j]+=A)}e.setItemLayout(w,{x:O,y:C,width:k,height:A})}}),this)}var w={seriesType:"bar",plan:u(),reset:function(t){if(_(t)&&O(t)){var e=t.getData(),n=t.coordinateSystem,r=n.grid.getRect(),i=n.getBaseAxis(),o=n.getOtherAxis(i),a=e.mapDimension(o.dim),s=e.mapDimension(i.dim),u=o.isHorizontal(),c=u?0:1,f=b(v([t]),i,t).width;return f>l||(f=l),{progress:d}}function d(t,e){var l,d=t.count,p=new h(2*d),g=new h(2*d),m=new h(d),v=[],y=[],b=0,x=0;while(null!=(l=t.next()))y[c]=e.get(a,l),y[1-c]=e.get(s,l),v=n.dataToPoint(y,null,v),g[b]=u?r.x+r.width:v[0],p[b++]=v[0],g[b]=u?v[1]:r.y+r.height,p[b++]=v[1],m[x++]=l;e.setLayout({largePoints:p,largeDataIndices:m,largeBackgroundPoints:g,barWidth:f,valueAxisStart:S(i,o,!1),backgroundStart:u?r.x:r.y,valueAxisHorizontal:u})}}};function _(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function O(t){return t.pipelineContext&&t.pipelineContext.large}function S(t,e,n){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}e.getLayoutOnAxis=p,e.prepareLayoutBarSeries=g,e.makeColumnLayout=v,e.retrieveColumnLayout=b,e.layout=x,e.largeLayout=w},"9e2e":function(t,e,n){var r=n("a73c"),i=n("9850"),o=n("82eb"),a=o.WILL_BE_RESTORED,s=new i,u=function(){};u.prototype={constructor:u,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&r.normalizeTextStyle(n,!0);var i=n.text;if(null!=i&&(i+=""),r.needDrawText(i,n)){t.save();var o=this.transform;n.transformText?this.setTransform(t):o&&(s.copy(e),s.applyTransform(o),e=s),r.renderText(this,t,i,n,e,a),t.restore()}}};var c=u;t.exports=c},"9e47":function(t,e,n){var r=n("6d8b"),i=n("71ad"),o=n("6cb7"),a=n("f934"),s=a.getLayoutParams,u=a.mergeLayoutParam,c=n("8e43"),l=["value","category","time","log"];function h(t,e,n,a){r.each(l,(function(o){e.extend({type:t+"Axis."+o,mergeDefaultAndTheme:function(e,i){var a=this.layoutMode,c=a?s(e):{},l=i.getTheme();r.merge(e,l.get(o+"Axis")),r.merge(e,this.getDefaultOption()),e.type=n(t,e),a&&u(e,c,a)},optionUpdated:function(){var t=this.option;"category"===t.type&&(this.__ordinalMeta=c.createByAxisModel(this))},getCategories:function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:r.mergeAll([{},i[o+"Axis"],a],!0)})})),o.registerSubTypeDefaulter(t+"Axis",r.curry(n,t))}t.exports=h},"9e69":function(t,e,n){var r=n("2b3e"),i=r.Symbol;t.exports=i},"9e7b":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}]},"9ed3":function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),a=n("d44e"),s=n("3f8c"),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},"9f51":function(t,e,n){var r=n("857d"),i=r.normalizeRadian,o=2*Math.PI;function a(t,e,n,r,a,s,u,c,l){if(0===u)return!1;var h=u;c-=t,l-=e;var f=Math.sqrt(c*c+l*l);if(f-h>n||f+h<n)return!1;if(Math.abs(r-a)%o<1e-4)return!0;if(s){var d=r;r=i(a),a=i(d)}else r=i(r),a=i(a);r>a&&(a+=o);var p=Math.atan2(l,c);return p<0&&(p+=o),p>=r&&p<=a||p+o>=r&&p+o<=a}e.containStroke=a},a15a:function(t,e,n){var r=n("6d8b"),i=n("2306"),o=n("9850"),a=n("e86a"),s=a.calculateTextPosition,u=i.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,o=e.height/2;t.moveTo(n,r-o),t.lineTo(n+i,r+o),t.lineTo(n-i,r+o),t.closePath()}}),c=i.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,o=e.height/2;t.moveTo(n,r-o),t.lineTo(n+i,r),t.lineTo(n,r+o),t.lineTo(n-i,r),t.closePath()}}),l=i.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,i=e.width/5*3,o=Math.max(i,e.height),a=i/2,s=a*a/(o-a),u=r-o+a+s,c=Math.asin(s/a),l=Math.cos(c)*a,h=Math.sin(c),f=Math.cos(c),d=.6*a,p=.7*a;t.moveTo(n-l,u+s),t.arc(n,u,a,Math.PI-c,2*Math.PI+c),t.bezierCurveTo(n+l-h*d,u+s+f*d,n,r-p,n,r),t.bezierCurveTo(n,r-p,n-l+h*d,u+s+f*d,n-l,u+s),t.closePath()}}),h=i.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,r=e.width,i=e.x,o=e.y,a=r/3*2;t.moveTo(i,o),t.lineTo(i+a,o+n),t.lineTo(i,o+n/4*3),t.lineTo(i-a,o+n),t.lineTo(i,o),t.closePath()}}),f={line:i.Line,rect:i.Rect,roundRect:i.Rect,square:i.Rect,circle:i.Circle,diamond:c,pin:l,arrow:h,triangle:u},d={line:function(t,e,n,r,i){i.x1=t,i.y1=e+r/2,i.x2=t+n,i.y2=e+r/2},rect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r},roundRect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r,i.r=Math.min(n,r)/4},square:function(t,e,n,r,i){var o=Math.min(n,r);i.x=t,i.y=e,i.width=o,i.height=o},circle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.r=Math.min(n,r)/2},diamond:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r},pin:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},arrow:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},triangle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r}},p={};r.each(f,(function(t,e){p[e]=new t}));var g=i.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var r=s(t,e,n),i=this.shape;return i&&"pin"===i.symbolType&&"inside"===e.textPosition&&(r.y=n.y+.4*n.height),r},buildPath:function(t,e,n){var r=e.symbolType;if("none"!==r){var i=p[r];i||(r="rect",i=p[r]),d[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(t,i.shape,n)}}});function m(t,e){if("image"!==this.type){var n=this.style,r=this.shape;r&&"line"===r.symbolType?n.stroke=t:this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff"):(n.fill&&(n.fill=t),n.stroke&&(n.stroke=t)),this.dirty(!1)}}function v(t,e,n,r,a,s,u){var c,l=0===t.indexOf("empty");return l&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),c=0===t.indexOf("image://")?i.makeImage(t.slice(8),new o(e,n,r,a),u?"center":"cover"):0===t.indexOf("path://")?i.makePath(t.slice(7),{},new o(e,n,r,a),u?"center":"cover"):new g({shape:{symbolType:t,x:e,y:n,width:r,height:a}}),c.__isEmptyBrush=l,c.setColor=m,c.setColor(s),c}e.createSymbol=v},a211:function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},a236:function(t,e,n){const{MAX_LENGTH:r}=n("b15c"),{re:i,t:o}=n("8cb5"),a=n("bbfd"),s=(t,e)=>{if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof a)return t;if("string"!==typeof t)return null;if(t.length>r)return null;const n=e.loose?i[o.LOOSE]:i[o.FULL];if(!n.test(t))return null;try{return new a(t,e)}catch(s){return null}};t.exports=s},a2a3:function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)>=0;t.exports=i},a2ec:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("30bf"),i=n("01de");class o extends r.Component{componentDidMount(){const{name:t,tab:e}=this.props;this.props.registerSurface(t,e,this)}componentDidUpdate(){return!1}render(){const{name:t,visible:e,styles:n}=this.props,a=Object.assign({},o.defaultStyles,n),{width:s,height:u}=a;let{maxHeight:c,maxWidth:l}=a;c=u===o.defaultStyles.height?c:u,l=s===o.defaultStyles.width?l:s;const h=i.css({display:e?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:u,width:s,maxHeight:c,maxWidth:l,overflow:"auto"}),f=i.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),d=i.css({boxSizing:"border-box"});return r.h("div",{className:h+" tf-surface",ref:t=>this.container=t,"data-visible":e},r.h("div",{className:f+" tf-label",ref:t=>this.label=t},t),r.h("div",{className:d+" tf-draw-area",ref:t=>this.drawArea=t}))}}o.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},e.SurfaceComponent=o},a3f7:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return h}));var r=n("6ae2"),i=n("b333"),o=n("34d7"),a=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e){let n=t;if(Object(a["isTypedArray"])(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];const r=[];while(Array.isArray(n)||Object(a["isTypedArray"])(n)&&"string"!==e)r.push(n.length),n=n[0];return Array.isArray(t)&&Object(i["c"])().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&u(t,r,[]),r}function u(t,e,n){if(n=n||[],!Array.isArray(t)&&!Object(a["isTypedArray"])(t))return void Object(a["assert"])(0===e.length,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);Object(a["assert"])(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Object(a["assert"])(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)u(t[i],r,n.concat(i))}function c(t,e,n,r){if(null!=t&&("numeric"!==t&&t!==e||"numeric"===t&&"string"===e))throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}function l(t,e,n,i="numeric"){if(t instanceof o["a"])return c(i,t.dtype,e,n),t;let u=Object(a["inferDtype"])(t);if("string"!==u&&["bool","int32","float32"].indexOf(i)>=0&&(u=i),c(i,u,e,n),null==t||!Object(a["isTypedArray"])(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t){const r=null==t?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const l=s(t,u);Object(a["isTypedArray"])(t)||Array.isArray(t)||(t=[t]);const h=!0,f="string"!==u?Object(a["toTypedArray"])(t,u):Object(a["flatten"])(t,[],h);return r["a"].makeTensor(f,l,u)}function h(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);const i=t;return i.map((t,r)=>l(t,`${e}[${r}]`,n),r)}},a49d:function(t,e,n){var r;(function(i,o){var a,s=this,u=256,c=6,l=52,h="random",f=o.pow(u,c),d=o.pow(2,l),p=2*d,g=u-1;function m(t,e,n){var r=[];e=1==e?{entropy:!0}:e||{};var a=x(b(e.entropy?[t,_(i)]:null==t?w():t,3),r),s=new v(r),l=function(){var t=s.g(c),e=f,n=0;while(t<d)t=(t+n)*u,e*=u,n=s.g(1);while(t>=p)t/=2,e/=2,n>>>=1;return(t+n)/e};return l.int32=function(){return 0|s.g(4)},l.quick=function(){return s.g(4)/4294967296},l.double=l,x(_(s.S),i),(e.pass||n||function(t,e,n,r){return r&&(r.S&&y(r,s),t.state=function(){return y(s,{})}),n?(o[h]=t,e):t})(l,a,"global"in e?e.global:this==o,e.state)}function v(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];n||(t=[n++]);while(i<u)a[i]=i++;for(i=0;i<u;i++)a[i]=a[o=g&o+t[i%n]+(e=a[i])],a[o]=e;(r.g=function(t){var e,n=0,i=r.i,o=r.j,a=r.S;while(t--)e=a[i=g&i+1],n=n*u+a[g&(a[i]=a[o=g&o+e])+(a[o]=e)];return r.i=i,r.j=o,n})(u)}function y(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function b(t,e){var n,r=[],i=typeof t;if(e&&"object"==i)for(n in t)try{r.push(b(t[n],e-1))}catch(o){}return r.length?r:"string"==i?t:t+"\0"}function x(t,e){var n,r=t+"",i=0;while(i<r.length)e[g&i]=g&(n^=19*e[g&i])+r.charCodeAt(i++);return _(e)}function w(){try{var t;return a&&(t=a.randomBytes)?t=t(u):(t=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(t)),_(t)}catch(r){var e=s.navigator,n=e&&e.plugins;return[+new Date,s,n,s.screen,_(i)]}}function _(t){return String.fromCharCode.apply(0,t)}if(o["seed"+h]=m,x(o.random(),i),t.exports){t.exports=m;try{a=n(6)}catch(O){}}else r=function(){return m}.call(e,n,e,t),void 0===r||(t.exports=r)})([],Math)},a49e:function(t,e,n){(function(t){var r;(function(t,i,o){function a(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xorwow=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),a=n("c430"),s=n("83ab"),u=n("4930"),c=n("fdbf"),l=n("d039"),h=n("5135"),f=n("e8b5"),d=n("861d"),p=n("825a"),g=n("7b0b"),m=n("fc6a"),v=n("c04e"),y=n("5c6c"),b=n("7c73"),x=n("df75"),w=n("241c"),_=n("057f"),O=n("7418"),S=n("06cf"),C=n("9bf2"),k=n("d1e7"),A=n("9112"),T=n("6eeb"),E=n("5692"),j=n("f772"),D=n("d012"),M=n("90e3"),N=n("b622"),I=n("e538"),R=n("746f"),F=n("d44e"),P=n("69f3"),$=n("b727").forEach,L=j("hidden"),z="Symbol",B="prototype",U=N("toPrimitive"),W=P.set,V=P.getterFor(z),H=Object[B],q=i.Symbol,G=o("JSON","stringify"),X=S.f,Y=C.f,K=_.f,Z=k.f,J=E("symbols"),Q=E("op-symbols"),tt=E("string-to-symbol-registry"),et=E("symbol-to-string-registry"),nt=E("wks"),rt=i.QObject,it=!rt||!rt[B]||!rt[B].findChild,ot=s&&l((function(){return 7!=b(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=X(H,e);r&&delete H[e],Y(t,e,n),r&&t!==H&&Y(H,e,r)}:Y,at=function(t,e){var n=J[t]=b(q[B]);return W(n,{type:z,tag:t,description:e}),s||(n.description=e),n},st=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof q},ut=function(t,e,n){t===H&&ut(Q,e,n),p(t);var r=v(e,!0);return p(n),h(J,r)?(n.enumerable?(h(t,L)&&t[L][r]&&(t[L][r]=!1),n=b(n,{enumerable:y(0,!1)})):(h(t,L)||Y(t,L,y(1,{})),t[L][r]=!0),ot(t,r,n)):Y(t,r,n)},ct=function(t,e){p(t);var n=m(e),r=x(n).concat(pt(n));return $(r,(function(e){s&&!ht.call(n,e)||ut(t,e,n[e])})),t},lt=function(t,e){return void 0===e?b(t):ct(b(t),e)},ht=function(t){var e=v(t,!0),n=Z.call(this,e);return!(this===H&&h(J,e)&&!h(Q,e))&&(!(n||!h(this,e)||!h(J,e)||h(this,L)&&this[L][e])||n)},ft=function(t,e){var n=m(t),r=v(e,!0);if(n!==H||!h(J,r)||h(Q,r)){var i=X(n,r);return!i||!h(J,r)||h(n,L)&&n[L][r]||(i.enumerable=!0),i}},dt=function(t){var e=K(m(t)),n=[];return $(e,(function(t){h(J,t)||h(D,t)||n.push(t)})),n},pt=function(t){var e=t===H,n=K(e?Q:m(t)),r=[];return $(n,(function(t){!h(J,t)||e&&!h(H,t)||r.push(J[t])})),r};if(u||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=M(t),n=function(t){this===H&&n.call(Q,t),h(this,L)&&h(this[L],e)&&(this[L][e]=!1),ot(this,e,y(1,t))};return s&&it&&ot(H,e,{configurable:!0,set:n}),at(e,t)},T(q[B],"toString",(function(){return V(this).tag})),T(q,"withoutSetter",(function(t){return at(M(t),t)})),k.f=ht,C.f=ut,S.f=ft,w.f=_.f=dt,O.f=pt,I.f=function(t){return at(N(t),t)},s&&(Y(q[B],"description",{configurable:!0,get:function(){return V(this).description}}),a||T(H,"propertyIsEnumerable",ht,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:q}),$(x(nt),(function(t){R(t)})),r({target:z,stat:!0,forced:!u},{for:function(t){var e=String(t);if(h(tt,e))return tt[e];var n=q(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(h(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:lt,defineProperty:ut,defineProperties:ct,getOwnPropertyDescriptor:ft}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:dt,getOwnPropertySymbols:pt}),r({target:"Object",stat:!0,forced:l((function(){O.f(1)}))},{getOwnPropertySymbols:function(t){return O.f(g(t))}}),G){var gt=!u||l((function(){var t=q();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))}));r({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,n){var r,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=e,(d(e)||void 0!==t)&&!st(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!st(e))return e}),i[1]=e,G.apply(null,i)}})}q[B][U]||A(q[B],U,q[B].valueOf),F(q,z),D[L]=!0},a630:function(t,e,n){var r=n("23e7"),i=n("4df4"),o=n("1c7e"),a=!o((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:a},{from:i})},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},a65d:function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=6)}([function(t,e,n){"use strict";function r(){d=!1}function i(t){if(t){if(t!==h){if(t.length!==g.length)throw new Error("Custom alphabet for shortid must be "+g.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter((function(t,e,n){return e!==n.lastIndexOf(t)}));if(e.length)throw new Error("Custom alphabet for shortid must be "+g.length+" unique characters. These characters were not unique: "+e.join(", "));h=t,r()}}else h!==g&&(h=g,r())}function o(t){return i(t),h}function a(t){p.seed(t),f!==t&&(r(),f=t)}function s(){h||i(g);for(var t,e=h.split(""),n=[],r=p.nextValue();e.length>0;)r=p.nextValue(),t=Math.floor(r*e.length),n.push(e.splice(t,1)[0]);return n.join("")}function u(){return d||(d=s())}function c(t){return u()[t]}function l(){return h||g}var h,f,d,p=n(19),g="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";t.exports={get:l,characters:o,seed:a,lookup:c,shuffled:u}},function(t,e,n){"use strict";var r=n(5),i=n.n(r);e.a={animateIn:function(t){i()({targets:t,translateY:"-35px",opacity:1,duration:300,easing:"easeOutCubic"})},animateOut:function(t,e){i()({targets:t,opacity:0,marginTop:"-40px",duration:300,easing:"easeOutExpo",complete:e})},animateOutBottom:function(t,e){i()({targets:t,opacity:0,marginBottom:"-40px",duration:300,easing:"easeOutExpo",complete:e})},animateReset:function(t){i()({targets:t,left:0,opacity:1,duration:300,easing:"easeOutExpo"})},animatePanning:function(t,e,n){i()({targets:t,duration:10,easing:"easeOutQuad",left:e,opacity:n})},animatePanEnd:function(t,e){i()({targets:t,opacity:0,duration:300,easing:"easeOutExpo",complete:e})},clearAnimation:function(t){var e=i.a.timeline();t.forEach((function(t){e.add({targets:t.el,opacity:0,right:"-40px",duration:300,offset:"-=150",easing:"easeOutExpo",complete:function(){t.remove()}})}))}}},function(t,e,n){"use strict";t.exports=n(16)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(8),i=n(1),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(2);n(11).polyfill();var s=function t(e){var n=this;return this.id=a.generate(),this.options=e,this.cached_options={},this.global={},this.groups=[],this.toasts=[],this.container=null,l(this),c(this),this.group=function(e){e||(e={}),e.globalToasts||(e.globalToasts={}),Object.assign(e.globalToasts,n.global);var r=new t(e);return n.groups.push(r),r},this.register=function(t,e,r){return r=r||{},h(n,t,e,r)},this.show=function(t,e){return u(n,t,e)},this.success=function(t,e){return e=e||{},e.type="success",u(n,t,e)},this.info=function(t,e){return e=e||{},e.type="info",u(n,t,e)},this.error=function(t,e){return e=e||{},e.type="error",u(n,t,e)},this.remove=function(t){n.toasts=n.toasts.filter((function(e){return e.el.hash!==t.hash})),t.parentNode&&t.parentNode.removeChild(t)},this.clear=function(t){return i.a.clearAnimation(n.toasts,(function(){t&&t()})),n.toasts=[],!0},this},u=function(t,e,i){i=i||{};var a=null;if("object"!==(void 0===i?"undefined":o(i)))return console.error("Options should be a type of object. given : "+i),null;t.options.singleton&&t.toasts.length>0&&(t.cached_options=i,t.toasts[t.toasts.length-1].goAway(0));var s=Object.assign({},t.options);return Object.assign(s,i),a=n.i(r.a)(t,e,s),t.toasts.push(a),a},c=function(t){var e=t.options.globalToasts,n=function(e,n){return"string"==typeof n&&t[n]?t[n].apply(t,[e,{}]):u(t,e,n)};e&&(t.global={},Object.keys(e).forEach((function(r){t.global[r]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e[r].apply(null,[t,n])}})))},l=function(t){var e=document.createElement("div");e.id=t.id,e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","false"),document.body.appendChild(e),t.container=e},h=function(t,e,n,r){t.options.globalToasts||(t.options.globalToasts={}),t.options.globalToasts[e]=function(t,e){var i=null;return"string"==typeof n&&(i=n),"function"==typeof n&&(i=n(t)),e(i,r)},c(t)}},function(t,e,n){n(22);var r=n(21)(null,null,null,null);t.exports=r.exports},function(t,e,n){(function(n){var r,i,o,a={scope:{}};a.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},a.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==n&&null!=n?n:t},a.global=a.getGlobal(this),a.SYMBOL_PREFIX="jscomp_symbol_",a.initSymbol=function(){a.initSymbol=function(){},a.global.Symbol||(a.global.Symbol=a.Symbol)},a.symbolCounter_=0,a.Symbol=function(t){return a.SYMBOL_PREFIX+(t||"")+a.symbolCounter_++},a.initSymbolIterator=function(){a.initSymbol();var t=a.global.Symbol.iterator;t||(t=a.global.Symbol.iterator=a.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&a.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return a.arrayIterator(this)}}),a.initSymbolIterator=function(){}},a.arrayIterator=function(t){var e=0;return a.iteratorPrototype((function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}))},a.iteratorPrototype=function(t){return a.initSymbolIterator(),t={next:t},t[a.global.Symbol.iterator]=function(){return this},t},a.array=a.array||{},a.iteratorFromArray=function(t,e){a.initSymbolIterator(),t instanceof String&&(t+="");var n=0,r={next:function(){if(n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},a.polyfill=function(t,e,n,r){if(e){for(n=a.global,t=t.split("."),r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}t=t[t.length-1],r=n[t],e=e(r),e!=r&&null!=e&&a.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},a.polyfill("Array.prototype.keys",(function(t){return t||function(){return a.iteratorFromArray(this,(function(t){return t}))}}),"es6-impl","es3");var s=this;!function(n,a){i=[],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,(function(){function t(t){if(!$.col(t))try{return document.querySelectorAll(t)}catch(t){}}function e(t,e){for(var n=t.length,r=2<=arguments.length?arguments[1]:void 0,i=[],o=0;o<n;o++)if(o in t){var a=t[o];e.call(r,a,o,t)&&i.push(a)}return i}function n(t){return t.reduce((function(t,e){return t.concat($.arr(e)?n(e):e)}),[])}function r(e){return $.arr(e)?e:($.str(e)&&(e=t(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function i(t,e){return t.some((function(t){return t===e}))}function o(t){var e,n={};for(e in t)n[e]=t[e];return n}function a(t,e){var n,r=o(t);for(n in t)r[n]=e.hasOwnProperty(n)?e[n]:t[n];return r}function u(t,e){var n,r=o(t);for(n in e)r[n]=$.und(t[n])?e[n]:t[n];return r}function c(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);t=parseInt(e[1],16);var n=parseInt(e[2],16);e=parseInt(e[3],16);return"rgba("+t+","+n+","+e+",1)"}function l(t){function e(t,e,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t);t=parseInt(n[1])/360;var r=parseInt(n[2])/100,i=parseInt(n[3])/100;n=n[4]||1;if(0==r)i=r=t=i;else{var o=.5>i?i*(1+r):i+r-i*r,a=2*i-o;i=e(a,o,t+1/3),r=e(a,o,t);t=e(a,o,t-1/3)}return"rgba("+255*i+","+255*r+","+255*t+","+n+")"}function h(t){if(t=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t))return t[2]}function f(t){return-1<t.indexOf("translate")||"perspective"===t?"px":-1<t.indexOf("rotate")||-1<t.indexOf("skew")?"deg":void 0}function d(t,e){return $.fnc(t)?t(e.target,e.id,e.total):t}function p(t,e){if(e in t.style)return getComputedStyle(t).getPropertyValue(e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function g(t,e){return $.dom(t)&&i(P,e)?"transform":$.dom(t)&&(t.getAttribute(e)||$.svg(t)&&t[e])?"attribute":$.dom(t)&&"transform"!==e&&p(t,e)?"css":null!=t[e]?"object":void 0}function m(t,n){var r=f(n);r=-1<n.indexOf("scale")?1:0+r;if(!(t=t.style.transform))return r;for(var i=[],o=[],a=[],s=/(\w+)\((.+?)\)/g;i=s.exec(t);)o.push(i[1]),a.push(i[2]);return t=e(a,(function(t,e){return o[e]===n})),t.length?t[0]:r}function v(t,e){switch(g(t,e)){case"transform":return m(t,e);case"css":return p(t,e);case"attribute":return t.getAttribute(e)}return t[e]||0}function y(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var r=h(t)||0;switch(e=parseFloat(e),t=parseFloat(t.replace(n[0],"")),n[0][0]){case"+":return e+t+r;case"-":return e-t+r;case"*":return e*t+r}}function b(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function x(t){t=t.points;for(var e,n=0,r=0;r<t.numberOfItems;r++){var i=t.getItem(r);0<r&&(n+=b(e,i)),e=i}return n}function w(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return 2*Math.PI*t.getAttribute("r");case"rect":return 2*t.getAttribute("width")+2*t.getAttribute("height");case"line":return b({x:t.getAttribute("x1"),y:t.getAttribute("y1")},{x:t.getAttribute("x2"),y:t.getAttribute("y2")});case"polyline":return x(t);case"polygon":var e=t.points;return x(t)+b(e.getItem(e.numberOfItems-1),e.getItem(0))}}function _(t,e){function n(n){return n=void 0===n?0:n,t.el.getPointAtLength(1<=e+n?e+n:0)}var r=n(),i=n(-1),o=n(1);switch(t.property){case"x":return r.x;case"y":return r.y;case"angle":return 180*Math.atan2(o.y-i.y,o.x-i.x)/Math.PI}}function O(t,e){var n,r=/-?\d*\.?\d+/g;if(n=$.pth(t)?t.totalLength:t,$.col(n))if($.rgb(n)){var i=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=i?"rgba("+i[1]+",1)":n}else n=$.hex(n)?c(n):$.hsl(n)?l(n):void 0;else i=(i=h(n))?n.substr(0,n.length-i.length):n,n=e&&!/\s/g.test(n)?i+e:i;return n+="",{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:$.str(t)||e?n.split(r):[]}}function S(t){return t=t?n($.arr(t)?t.map(r):r(t)):[],e(t,(function(t,e,n){return n.indexOf(t)===e}))}function C(t){var e=S(t);return e.map((function(t,n){return{target:t,id:n,total:e.length}}))}function k(t,e){var n=o(e);if($.arr(t)){var i=t.length;2!==i||$.obj(t[0])?$.fnc(e.duration)||(n.duration=e.duration/i):t={value:t}}return r(t).map((function(t,n){return n=n?0:e.delay,t=$.obj(t)&&!$.pth(t)?t:{value:t},$.und(t.delay)&&(t.delay=n),t})).map((function(t){return u(t,n)}))}function A(t,e){var n,r={};for(n in t){var i=d(t[n],e);$.arr(i)&&(i=i.map((function(t){return d(t,e)})),1===i.length&&(i=i[0])),r[n]=i}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function T(t){return $.arr(t)?L.apply(this,t):z[t]}function E(t,e){var n;return t.tweens.map((function(r){r=A(r,e);var i=r.value,o=v(e.target,t.name),a=n?n.to.original:o,s=(a=$.arr(i)?i[0]:a,y($.arr(i)?i[1]:i,a));o=h(s)||h(a)||h(o);return r.from=O(a,o),r.to=O(s,o),r.start=n?n.end:t.offset,r.end=r.start+r.delay+r.duration,r.easing=T(r.easing),r.elasticity=(1e3-Math.min(Math.max(r.elasticity,1),999))/1e3,r.isPath=$.pth(i),r.isColor=$.col(r.from.original),r.isColor&&(r.round=1),n=r}))}function j(t,r){return e(n(t.map((function(t){return r.map((function(e){var n=g(t.target,e.name);if(n){var r=E(e,t);e={type:n,property:e.name,animatable:t,tweens:r,duration:r[r.length-1].end,delay:r[0].delay}}else e=void 0;return e}))}))),(function(t){return!$.und(t)}))}function D(t,e,n,r){var i="delay"===t;return e.length?(i?Math.min:Math.max).apply(Math,e.map((function(e){return e[t]}))):i?r.delay:n.offset+r.delay+r.duration}function M(t){var e,n=a(R,t),r=a(F,t),i=C(t.targets),o=[],s=u(n,r);for(e in t)s.hasOwnProperty(e)||"targets"===e||o.push({name:e,offset:s.offset,tweens:k(t[e],r)});return t=j(i,o),u(n,{children:[],animatables:i,animations:t,duration:D("duration",t,n,r),delay:D("delay",t,n,r)})}function N(t){function n(){return window.Promise&&new Promise((function(t){return h=t}))}function r(t){return d.reversed?d.duration-t:t}function i(t){for(var n=0,r={},i=d.animations,o=i.length;n<o;){var a=i[n],s=a.animatable,u=a.tweens,c=u.length-1,l=u[c];c&&(l=e(u,(function(e){return t<e.end}))[0]||l);u=Math.min(Math.max(t-l.start-l.delay,0),l.duration)/l.duration;for(var h=isNaN(u)?1:l.easing(u,l.elasticity),f=(u=l.to.strings,l.round),g=(c=[],void 0),m=(g=l.to.numbers.length,0);m<g;m++){var v=void 0,y=(v=l.to.numbers[m],l.from.numbers[m]);v=l.isPath?_(l.value,h*v):y+h*(v-y);f&&(l.isColor&&2<m||(v=Math.round(v*f)/f)),c.push(v)}if(l=u.length)for(g=u[0],h=0;h<l;h++)f=u[h+1],m=c[h],isNaN(m)||(g=f?g+(m+f):g+(m+" "));else g=c[0];B[a.type](s.target,a.property,g,r,s.id),a.currentValue=g,n++}if(n=Object.keys(r).length)for(i=0;i<n;i++)I||(I=p(document.body,"transform")?"transform":"-webkit-transform"),d.animatables[i].target.style[I]=r[i].join(" ");d.currentTime=t,d.progress=t/d.duration*100}function o(t){d[t]&&d[t](d)}function a(){d.remaining&&!0!==d.remaining&&d.remaining--}function s(t){var e=d.duration,s=d.offset,p=s+d.delay,g=d.currentTime,m=d.reversed,v=r(t);if(d.children.length){var y=d.children,b=y.length;if(v>=d.currentTime)for(var x=0;x<b;x++)y[x].seek(v);else for(;b--;)y[b].seek(v)}(v>=p||!e)&&(d.began||(d.began=!0,o("begin")),o("run")),v>s&&v<e?i(v):(v<=s&&0!==g&&(i(0),m&&a()),(v>=e&&g!==e||!e)&&(i(e),m||a())),o("update"),t>=e&&(d.remaining?(c=u,"alternate"===d.direction&&(d.reversed=!d.reversed)):(d.pause(),d.completed||(d.completed=!0,o("complete"),"Promise"in window&&(h(),f=n()))),l=0)}t=void 0===t?{}:t;var u,c,l=0,h=null,f=n(),d=M(t);return d.reset=function(){var t=d.direction,e=d.loop;for(d.currentTime=0,d.progress=0,d.paused=!0,d.began=!1,d.completed=!1,d.reversed="reverse"===t,d.remaining="alternate"===t&&1===e?2:e,i(0),t=d.children.length;t--;)d.children[t].reset()},d.tick=function(t){u=t,c||(c=u),s((l+u-c)*N.speed)},d.seek=function(t){s(r(t))},d.pause=function(){var t=U.indexOf(d);-1<t&&U.splice(t,1),d.paused=!0},d.play=function(){d.paused&&(d.paused=!1,c=0,l=r(d.currentTime),U.push(d),W||V())},d.reverse=function(){d.reversed=!d.reversed,c=0,l=r(d.currentTime)},d.restart=function(){d.pause(),d.reset(),d.play()},d.finished=f,d.reset(),d.autoplay&&d.play(),d}var I,R={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},F={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},P="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),$={arr:function(t){return Array.isArray(t)},obj:function(t){return-1<Object.prototype.toString.call(t).indexOf("Object")},pth:function(t){return $.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},dom:function(t){return t.nodeType||$.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return $.hex(t)||$.rgb(t)||$.hsl(t)}},L=function(){function t(t,e,n){return(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t}return function(e,n,r,i){if(0<=e&&1>=e&&0<=r&&1>=r){var o=new Float32Array(11);if(e!==n||r!==i)for(var a=0;11>a;++a)o[a]=t(.1*a,e,r);return function(a){if(e===n&&r===i)return a;if(0===a)return 0;if(1===a)return 1;for(var s=0,u=1;10!==u&&o[u]<=a;++u)s+=.1;--u;u=s+(a-o[u])/(o[u+1]-o[u])*.1;var c=3*(1-3*r+3*e)*u*u+2*(3*r-6*e)*u+3*e;if(.001<=c){for(s=0;4>s&&0!==(c=3*(1-3*r+3*e)*u*u+2*(3*r-6*e)*u+3*e);++s){var l=t(u,e,r)-a;u=u-l/c}a=u}else if(0===c)a=u;else{u=s,s=s+.1;var h=0;do{l=u+(s-u)/2,c=t(l,e,r)-a,0<c?s=l:u=l}while(1e-7<Math.abs(c)&&10>++h);a=l}return t(a,n,i)}}}}(),z=function(){function t(t,e){return 0===t||1===t?t:-Math.pow(2,10*(t-1))*Math.sin(2*(t-1-e/(2*Math.PI)*Math.asin(1))*Math.PI/e)}var e,n="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),r={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],t],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(e,n){return 1-t(1-e,n)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(e,n){return.5>e?t(2*e,n)/2:1-t(-2*e+2,n)/2}]},i={linear:L(.25,.25,.75,.75)},o={};for(e in r)o.type=e,r[o.type].forEach(function(t){return function(e,r){i["ease"+t.type+n[r]]=$.fnc(e)?e:L.apply(s,e)}}(o)),o={type:o.type};return i}(),B={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,r,i){r[i]||(r[i]=[]),r[i].push(e+"("+n+")")}},U=[],W=0,V=function(){function t(){W=requestAnimationFrame(e)}function e(e){var n=U.length;if(n){for(var r=0;r<n;)U[r]&&U[r].tick(e),r++;t()}else cancelAnimationFrame(W),W=0}return t}();return N.version="2.2.0",N.speed=1,N.running=U,N.remove=function(t){t=S(t);for(var e=U.length;e--;)for(var n=U[e],r=n.animations,o=r.length;o--;)i(t,r[o].animatable.target)&&(r.splice(o,1),r.length||n.pause())},N.getValue=v,N.path=function(e,n){var r=$.str(e)?t(e)[0]:e,i=n||100;return function(t){return{el:r,property:t,totalLength:w(r)*(i/100)}}},N.setDashoffset=function(t){var e=w(t);return t.setAttribute("stroke-dasharray",e),e},N.bezier=L,N.easings=z,N.timeline=function(t){var e=N(t);return e.pause(),e.duration=0,e.add=function(n){return e.children.forEach((function(t){t.began=!0,t.completed=!0})),r(n).forEach((function(n){var r=u(n,a(F,t||{}));r.targets=r.targets||t.targets,n=e.duration;var i=r.offset;r.autoplay=!1,r.direction=e.direction,r.offset=$.und(i)?n:y(i,n),e.began=!0,e.completed=!0,e.seek(r.offset),r=N(r),r.began=!0,r.completed=!0,r.duration>n&&(e.duration=r.duration),e.children.push(r)})),e.seek(0),e.reset(),e.autoplay&&e.restart(),e},e},N.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},N}))}).call(e,n(25))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(4),o=n.n(i),a={install:function(t,e){e||(e={});var n=new r.a(e);t.component("toasted",o.a),t.toasted=t.prototype.$toasted=n}};"undefined"!=typeof window&&window.Vue&&(window.Toasted=a),e.default=a},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(1),i=this,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n){return setTimeout((function(){n.cached_options.position&&n.cached_options.position.includes("bottom")?r.a.animateOutBottom(t,(function(){n.remove(t)})):r.a.animateOut(t,(function(){n.remove(t)}))}),e),!0},s=function(t,e){return("object"===("undefined"==typeof HTMLElement?"undefined":o(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":o(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)?t.appendChild(e):t.innerHTML=e,i},u=function(t,e){var n=!1;return{el:t,text:function(e){return s(t,e),this},goAway:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800;return n=!0,a(t,r,e)},remove:function(){e.remove(t)},disposed:function(){return n}}}},function(t,e,n){"use strict";var r=n(12),i=n.n(r),o=n(1),a=n(7),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=n(2);String.prototype.includes||Object.defineProperty(String.prototype,"includes",{value:function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}});var c={},l=null,h=function(t){return t.className=t.className||null,t.onComplete=t.onComplete||null,t.position=t.position||"top-right",t.duration=t.duration||null,t.keepOnHover=t.keepOnHover||!1,t.theme=t.theme||"toasted-primary",t.type=t.type||"default",t.containerClass=t.containerClass||null,t.fullWidth=t.fullWidth||!1,t.icon=t.icon||null,t.action=t.action||null,t.fitToScreen=t.fitToScreen||null,t.closeOnSwipe=void 0===t.closeOnSwipe||t.closeOnSwipe,t.iconPack=t.iconPack||"material",t.className&&"string"==typeof t.className&&(t.className=t.className.split(" ")),t.className||(t.className=[]),t.theme&&t.className.push(t.theme.trim()),t.type&&t.className.push(t.type),t.containerClass&&"string"==typeof t.containerClass&&(t.containerClass=t.containerClass.split(" ")),t.containerClass||(t.containerClass=[]),t.position&&t.containerClass.push(t.position.trim()),t.fullWidth&&t.containerClass.push("full-width"),t.fitToScreen&&t.containerClass.push("fit-to-screen"),c=t,t},f=function(t,e){var r=document.createElement("div");if(r.classList.add("toasted"),r.hash=u.generate(),e.className&&e.className.forEach((function(t){r.classList.add(t)})),("object"===("undefined"==typeof HTMLElement?"undefined":s(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":s(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)?r.appendChild(t):r.innerHTML=t,d(e,r),e.closeOnSwipe){var c=new i.a(r,{prevent_default:!1});c.on("pan",(function(t){var e=t.deltaX;r.classList.contains("panning")||r.classList.add("panning");var n=1-Math.abs(e/80);n<0&&(n=0),o.a.animatePanning(r,e,n)})),c.on("panend",(function(t){var n=t.deltaX;Math.abs(n)>80?o.a.animatePanEnd(r,(function(){"function"==typeof e.onComplete&&e.onComplete(),r.parentNode&&l.remove(r)})):(r.classList.remove("panning"),o.a.animateReset(r))}))}if(Array.isArray(e.action))e.action.forEach((function(t){var e=g(t,n.i(a.a)(r,l));e&&r.appendChild(e)}));else if("object"===s(e.action)){var h=g(e.action,n.i(a.a)(r,l));h&&r.appendChild(h)}return r},d=function(t,e){if(t.icon){var n=document.createElement("i");switch(n.setAttribute("aria-hidden","true"),t.iconPack){case"fontawesome":n.classList.add("fa");var r=t.icon.name?t.icon.name:t.icon;r.includes("fa-")?n.classList.add(r.trim()):n.classList.add("fa-"+r.trim());break;case"mdi":n.classList.add("mdi");var i=t.icon.name?t.icon.name:t.icon;i.includes("mdi-")?n.classList.add(i.trim()):n.classList.add("mdi-"+i.trim());break;case"custom-class":var o=t.icon.name?t.icon.name:t.icon;"string"==typeof o?o.split(" ").forEach((function(t){n.classList.add(t)})):Array.isArray(o)&&o.forEach((function(t){n.classList.add(t.trim())}));break;case"callback":var a=t.icon&&t.icon instanceof Function?t.icon:null;a&&(n=a(n));break;default:n.classList.add("material-icons"),n.textContent=t.icon.name?t.icon.name:t.icon}t.icon.after&&n.classList.add("after"),p(t,n,e)}},p=function(t,e,n){t.icon&&(t.icon.after&&t.icon.name?n.appendChild(e):(t.icon.name,n.insertBefore(e,n.firstChild)))},g=function(t,e){if(!t)return null;var n=document.createElement("a");if(n.classList.add("action"),n.classList.add("ripple"),t.text&&(n.text=t.text),t.href&&(n.href=t.href),t.target&&(n.target=t.target),t.icon){n.classList.add("icon");var r=document.createElement("i");switch(c.iconPack){case"fontawesome":r.classList.add("fa"),t.icon.includes("fa-")?r.classList.add(t.icon.trim()):r.classList.add("fa-"+t.icon.trim());break;case"mdi":r.classList.add("mdi"),t.icon.includes("mdi-")?r.classList.add(t.icon.trim()):r.classList.add("mdi-"+t.icon.trim());break;case"custom-class":"string"==typeof t.icon?t.icon.split(" ").forEach((function(t){n.classList.add(t)})):Array.isArray(t.icon)&&t.icon.forEach((function(t){n.classList.add(t.trim())}));break;default:r.classList.add("material-icons"),r.textContent=t.icon}n.appendChild(r)}return t.class&&("string"==typeof t.class?t.class.split(" ").forEach((function(t){n.classList.add(t)})):Array.isArray(t.class)&&t.class.forEach((function(t){n.classList.add(t.trim())}))),t.push&&n.addEventListener("click",(function(n){n.preventDefault(),c.router?(c.router.push(t.push),t.push.dontClose||e.goAway(0)):console.warn("[vue-toasted] : Vue Router instance is not attached. please check the docs")})),t.onClick&&"function"==typeof t.onClick&&n.addEventListener("click",(function(n){t.onClick&&(n.preventDefault(),t.onClick(n,e))})),n};e.a=function(t,e,r){l=t,r=h(r);var i=l.container;r.containerClass.unshift("toasted-container"),i.className!==r.containerClass.join(" ")&&(i.className="",r.containerClass.forEach((function(t){i.classList.add(t)})));var s=f(e,r);e&&i.appendChild(s),s.style.opacity=0,o.a.animateIn(s);var u=r.duration,c=void 0;if(null!==u){var d=function(){return setInterval((function(){null===s.parentNode&&window.clearInterval(c),s.classList.contains("panning")||(u-=20),u<=0&&(o.a.animateOut(s,(function(){"function"==typeof r.onComplete&&r.onComplete(),s.parentNode&&l.remove(s)})),window.clearInterval(c))}),20)};c=d(),r.keepOnHover&&(s.addEventListener("mouseover",(function(){window.clearInterval(c)})),s.addEventListener("mouseout",(function(){c=d()})))}return n.i(a.a)(s,l)}},function(t,e,n){e=t.exports=n(10)(),e.push([t.i,".toasted{padding:0 20px}.toasted.rounded{border-radius:24px}.toasted .primary,.toasted.toasted-primary{border-radius:2px;min-height:38px;line-height:1.1em;background-color:#353535;padding:6px 20px;font-size:15px;font-weight:300;color:#fff;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.toasted .primary.success,.toasted.toasted-primary.success{background:#4caf50}.toasted .primary.error,.toasted.toasted-primary.error{background:#f44336}.toasted .primary.info,.toasted.toasted-primary.info{background:#3f51b5}.toasted .primary .action,.toasted.toasted-primary .action{color:#a1c2fa}.toasted.bubble{border-radius:30px;min-height:38px;line-height:1.1em;background-color:#ff7043;padding:0 20px;font-size:15px;font-weight:300;color:#fff;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.toasted.bubble.success{background:#4caf50}.toasted.bubble.error{background:#f44336}.toasted.bubble.info{background:#3f51b5}.toasted.bubble .action{color:#8e2b0c}.toasted.outline{border-radius:30px;min-height:38px;line-height:1.1em;background-color:#fff;border:1px solid #676767;padding:0 20px;font-size:15px;color:#676767;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);font-weight:700}.toasted.outline.success{color:#4caf50;border-color:#4caf50}.toasted.outline.error{color:#f44336;border-color:#f44336}.toasted.outline.info{color:#3f51b5;border-color:#3f51b5}.toasted.outline .action{color:#607d8b}.toasted-container{position:fixed;z-index:10000}.toasted-container,.toasted-container.full-width{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.toasted-container.full-width{max-width:86%;width:100%}.toasted-container.full-width.fit-to-screen{min-width:100%}.toasted-container.full-width.fit-to-screen .toasted:first-child{margin-top:0}.toasted-container.full-width.fit-to-screen.top-right{top:0;right:0}.toasted-container.full-width.fit-to-screen.top-left{top:0;left:0}.toasted-container.full-width.fit-to-screen.top-center{top:0;left:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.full-width.fit-to-screen.bottom-right{right:0;bottom:0}.toasted-container.full-width.fit-to-screen.bottom-left{left:0;bottom:0}.toasted-container.full-width.fit-to-screen.bottom-center{left:0;bottom:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.top-right{top:10%;right:7%}.toasted-container.top-left{top:10%;left:7%}.toasted-container.top-center{top:10%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.toasted-container.bottom-right{right:5%;bottom:7%}.toasted-container.bottom-left{left:5%;bottom:7%}.toasted-container.bottom-center{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:7%}.toasted-container.bottom-left .toasted,.toasted-container.top-left .toasted{float:left}.toasted-container.bottom-right .toasted,.toasted-container.top-right .toasted{float:right}.toasted-container .toasted{top:35px;width:auto;clear:both;margin-top:10px;position:relative;max-width:100%;height:auto;word-break:normal;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;box-sizing:inherit}.toasted-container .toasted .fa,.toasted-container .toasted .fab,.toasted-container .toasted .far,.toasted-container .toasted .fas,.toasted-container .toasted .material-icons,.toasted-container .toasted .mdi{margin-right:.5rem;margin-left:-.4rem}.toasted-container .toasted .fa.after,.toasted-container .toasted .fab.after,.toasted-container .toasted .far.after,.toasted-container .toasted .fas.after,.toasted-container .toasted .material-icons.after,.toasted-container .toasted .mdi.after{margin-left:.5rem;margin-right:-.4rem}.toasted-container .toasted .action{text-decoration:none;font-size:.8rem;padding:8px;margin:5px -7px 5px 7px;border-radius:3px;text-transform:uppercase;letter-spacing:.03em;font-weight:600;cursor:pointer}.toasted-container .toasted .action.icon{padding:4px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.toasted-container .toasted .action.icon .fa,.toasted-container .toasted .action.icon .material-icons,.toasted-container .toasted .action.icon .mdi{margin-right:0;margin-left:4px}.toasted-container .toasted .action.icon:hover{text-decoration:none}.toasted-container .toasted .action:hover{text-decoration:underline}@media only screen and (max-width:600px){.toasted-container{min-width:100%}.toasted-container .toasted:first-child{margin-top:0}.toasted-container.top-right{top:0;right:0}.toasted-container.top-left{top:0;left:0}.toasted-container.top-center{top:0;left:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.bottom-right{right:0;bottom:0}.toasted-container.bottom-left{left:0;bottom:0}.toasted-container.bottom-center{left:0;bottom:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.bottom-center,.toasted-container.top-center{-ms-flex-align:stretch!important;align-items:stretch!important}.toasted-container.bottom-left .toasted,.toasted-container.bottom-right .toasted,.toasted-container.top-left .toasted,.toasted-container.top-right .toasted{float:none}.toasted-container .toasted{border-radius:0}}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){"use strict";function r(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var u=o[a],c=Object.getOwnPropertyDescriptor(i,u);void 0!==c&&c.enumerable&&(n[u]=i[u])}}return n}function i(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}t.exports={assign:r,polyfill:i}},function(t,e,n){var r;!function(i,o,a,s){"use strict";function u(t,e,n){return setTimeout(d(t,n),e)}function c(t,e,n){return!!Array.isArray(t)&&(l(t,n[e],n),!0)}function l(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function h(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}function f(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&pt(r,n)}function d(t,e){return function(){return t.apply(e,arguments)}}function p(t,e){return typeof t==vt?t.apply(e&&e[0]||s,e):t}function g(t,e){return t===s?e:t}function m(t,e,n){l(x(e),(function(e){t.addEventListener(e,n,!1)}))}function v(t,e,n){l(x(e),(function(e){t.removeEventListener(e,n,!1)}))}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function b(t,e){return t.indexOf(e)>-1}function x(t){return t.trim().split(/\s+/g)}function w(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function _(t){return Array.prototype.slice.call(t,0)}function O(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];w(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function S(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<gt.length;){if(n=gt[o],(r=n?n+i:e)in t)return r;o++}return s}function C(){return Ot++}function k(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}function A(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&n.handler(e)},this.init()}function T(t){var e=t.options.inputClass;return new(e||(kt?U:At?H:Ct?G:B))(t,E)}function E(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&Et&&r-i==0,a=e&(Dt|Mt)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,j(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function j(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=N(e)),i>1&&!n.firstMultiple?n.firstMultiple=N(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=I(r);e.timeStamp=xt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=$(s,u),e.distance=P(s,u),D(n,e),e.offsetDirection=F(e.deltaX,e.deltaY);var c=R(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=bt(c.x)>bt(c.y)?c.x:c.y,e.scale=a?z(a.pointers,r):1,e.rotation=a?L(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,M(n,e);var l=t.element;y(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function D(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Et&&o.eventType!==Dt||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function M(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=Mt&&(u>Tt||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,h=R(u,c,l);r=h.x,i=h.y,n=bt(h.x)>bt(h.y)?h.x:h.y,o=F(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function N(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:yt(t.pointers[n].clientX),clientY:yt(t.pointers[n].clientY)},n++;return{timeStamp:xt(),pointers:e,center:I(e),deltaX:t.deltaX,deltaY:t.deltaY}}function I(t){var e=t.length;if(1===e)return{x:yt(t[0].clientX),y:yt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:yt(n/e),y:yt(r/e)}}function R(t,e,n){return{x:e/t||0,y:n/t||0}}function F(t,e){return t===e?Nt:bt(t)>=bt(e)?t<0?It:Rt:e<0?Ft:Pt}function P(t,e,n){n||(n=Bt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function $(t,e,n){n||(n=Bt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function L(t,e){return $(e[1],e[0],Ut)+$(t[1],t[0],Ut)}function z(t,e){return P(e[0],e[1],Ut)/P(t[0],t[1],Ut)}function B(){this.evEl=Vt,this.evWin=Ht,this.pressed=!1,A.apply(this,arguments)}function U(){this.evEl=Xt,this.evWin=Yt,A.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=Zt,this.evWin=Jt,this.started=!1,A.apply(this,arguments)}function V(t,e){var n=_(t.touches),r=_(t.changedTouches);return e&(Dt|Mt)&&(n=O(n.concat(r),"identifier",!0)),[n,r]}function H(){this.evTarget=te,this.targetIds={},A.apply(this,arguments)}function q(t,e){var n=_(t.touches),r=this.targetIds;if(e&(Et|jt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=_(t.changedTouches),s=[],u=this.target;if(o=n.filter((function(t){return y(t.target,u)})),e===Et)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(Dt|Mt)&&delete r[a[i].identifier],i++;return s.length?[O(o.concat(s),"identifier",!0),s]:void 0}function G(){A.apply(this,arguments);var t=d(this.handler,this);this.touch=new H(this.manager,t),this.mouse=new B(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function X(t,e){t&Et?(this.primaryTouch=e.changedPointers[0].identifier,Y.call(this,e)):t&(Dt|Mt)&&Y.call(this,e)}function Y(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,ee)}}function K(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=ne&&a<=ne)return!0}return!1}function Z(t,e){this.manager=t,this.set(e)}function J(t){if(b(t,se))return se;var e=b(t,ue),n=b(t,ce);return e&&n?se:e||n?e?ue:ce:b(t,ae)?ae:oe}function Q(t){this.options=pt({},this.defaults,t||{}),this.id=C(),this.manager=null,this.options.enable=g(this.options.enable,!0),this.state=he,this.simultaneous={},this.requireFail=[]}function tt(t){return t&me?"cancel":t&pe?"end":t&de?"move":t&fe?"start":""}function et(t){return t==Pt?"down":t==Ft?"up":t==It?"left":t==Rt?"right":""}function nt(t,e){var n=e.manager;return n?n.get(t):t}function rt(){Q.apply(this,arguments)}function it(){rt.apply(this,arguments),this.pX=null,this.pY=null}function ot(){rt.apply(this,arguments)}function at(){Q.apply(this,arguments),this._timer=null,this._input=null}function st(){rt.apply(this,arguments)}function ut(){rt.apply(this,arguments)}function ct(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function lt(t,e){return e=e||{},e.recognizers=g(e.recognizers,lt.defaults.preset),new ht(t,e)}function ht(t,e){this.options=pt({},lt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=T(this),this.touchAction=new Z(this,this.options.touchAction),ft(this,!0),l(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ft(t,e){var n,r=t.element;r.style&&(l(t.options.cssProps,(function(i,o){n=S(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}function dt(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var pt,gt=["","webkit","Moz","MS","ms","o"],mt=o.createElement("div"),vt="function",yt=Math.round,bt=Math.abs,xt=Date.now;pt="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var wt=h((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),_t=h((function(t,e){return wt(t,e,!0)}),"merge","Use `assign`."),Ot=1,St=/mobile|tablet|ip(ad|hone|od)|android/i,Ct="ontouchstart"in i,kt=S(i,"PointerEvent")!==s,At=Ct&&St.test(navigator.userAgent),Tt=25,Et=1,jt=2,Dt=4,Mt=8,Nt=1,It=2,Rt=4,Ft=8,Pt=16,$t=It|Rt,Lt=Ft|Pt,zt=$t|Lt,Bt=["x","y"],Ut=["clientX","clientY"];A.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(k(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(k(this.element),this.evWin,this.domHandler)}};var Wt={mousedown:Et,mousemove:jt,mouseup:Dt},Vt="mousedown",Ht="mousemove mouseup";f(B,A,{handler:function(t){var e=Wt[t.type];e&Et&&0===t.button&&(this.pressed=!0),e&jt&&1!==t.which&&(e=Dt),this.pressed&&(e&Dt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var qt={pointerdown:Et,pointermove:jt,pointerup:Dt,pointercancel:Mt,pointerout:Mt},Gt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Xt="pointerdown",Yt="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(Xt="MSPointerDown",Yt="MSPointerMove MSPointerUp MSPointerCancel"),f(U,A,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=qt[r],o=Gt[t.pointerType]||t.pointerType,a="touch"==o,s=w(e,t.pointerId,"pointerId");i&Et&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(Dt|Mt)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Kt={touchstart:Et,touchmove:jt,touchend:Dt,touchcancel:Mt},Zt="touchstart",Jt="touchstart touchmove touchend touchcancel";f(W,A,{handler:function(t){var e=Kt[t.type];if(e===Et&&(this.started=!0),this.started){var n=V.call(this,t,e);e&(Dt|Mt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Qt={touchstart:Et,touchmove:jt,touchend:Dt,touchcancel:Mt},te="touchstart touchmove touchend touchcancel";f(H,A,{handler:function(t){var e=Qt[t.type],n=q.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var ee=2500,ne=25;f(G,A,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)X.call(this,e,n);else if(i&&K.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var re=S(mt.style,"touchAction"),ie=re!==s,oe="auto",ae="manipulation",se="none",ue="pan-x",ce="pan-y",le=function(){if(!ie)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();Z.prototype={set:function(t){"compute"==t&&(t=this.compute()),ie&&this.manager.element.style&&le[t]&&(this.manager.element.style[re]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return l(this.manager.recognizers,(function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),J(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(!this.manager.session.prevented){var r=this.actions,i=b(r,se)&&!le[se],o=b(r,ce)&&!le[ce],a=b(r,ue)&&!le[ue];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}return a&&o?void 0:i||o&&n&$t||a&&n&Lt?this.preventSrc(e):void 0}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var he=1,fe=2,de=4,pe=8,ge=pe,me=16;Q.prototype={defaults:{},set:function(t){return pt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(c(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=nt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return c(t,"dropRecognizeWith",this)||(t=nt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(c(t,"requireFailure",this))return this;var e=this.requireFail;return t=nt(t,this),-1===w(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(c(t,"dropRequireFailure",this))return this;t=nt(t,this);var e=w(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<pe&&e(n.options.event+tt(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=pe&&e(n.options.event+tt(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|he)))return!1;t++}return!0},recognize:function(t){var e=pt({},t);if(!p(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(ge|me|32)&&(this.state=he),this.state=this.process(e),this.state&(fe|de|pe|me)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},f(rt,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(fe|de),i=this.attrTest(t);return r&&(n&Mt||!i)?e|me:r||i?n&Dt?e|pe:e&fe?e|de:fe:32}}),f(it,rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:zt},getTouchAction:function(){var t=this.options.direction,e=[];return t&$t&&e.push(ce),t&Lt&&e.push(ue),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&$t?(i=0===o?Nt:o<0?It:Rt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?Nt:a<0?Ft:Pt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return rt.prototype.attrTest.call(this,t)&&(this.state&fe||!(this.state&fe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),f(ot,rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[se]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&fe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),f(at,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[oe]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(Dt|Mt)&&!i)this.reset();else if(t.eventType&Et)this.reset(),this._timer=u((function(){this.state=ge,this.tryEmit()}),e.time,this);else if(t.eventType&Dt)return ge;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ge&&(t&&t.eventType&Dt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=xt(),this.manager.emit(this.options.event,this._input)))}}),f(st,rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[se]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&fe)}}),f(ut,rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:$t|Lt,pointers:1},getTouchAction:function(){return it.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&($t|Lt)?e=t.overallVelocity:n&$t?e=t.overallVelocityX:n&Lt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&bt(e)>this.options.velocity&&t.eventType&Dt},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),f(ct,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&Et&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=Dt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||P(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=u((function(){this.state=ge,this.tryEmit()}),e.interval,this),fe):ge}return 32},failTimeout:function(){return this._timer=u((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ge&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),lt.VERSION="2.0.7",lt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[ot,{enable:!1},["rotate"]],[ut,{direction:$t}],[it,{direction:$t},["swipe"]],[ct],[ct,{event:"doubletap",taps:2},["tap"]],[at]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ht.prototype={set:function(t){return pt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&ge)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(fe|de|pe)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(c(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(c(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=w(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return l(x(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return l(x(t),(function(t){e?n[t]&&n[t].splice(w(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&dt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ft(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},pt(lt,{INPUT_START:Et,INPUT_MOVE:jt,INPUT_END:Dt,INPUT_CANCEL:Mt,STATE_POSSIBLE:he,STATE_BEGAN:fe,STATE_CHANGED:de,STATE_ENDED:pe,STATE_RECOGNIZED:ge,STATE_CANCELLED:me,STATE_FAILED:32,DIRECTION_NONE:Nt,DIRECTION_LEFT:It,DIRECTION_RIGHT:Rt,DIRECTION_UP:Ft,DIRECTION_DOWN:Pt,DIRECTION_HORIZONTAL:$t,DIRECTION_VERTICAL:Lt,DIRECTION_ALL:zt,Manager:ht,Input:A,TouchAction:Z,TouchInput:H,MouseInput:B,PointerEventInput:U,TouchMouseInput:G,SingleTouchInput:W,Recognizer:Q,AttrRecognizer:rt,Tap:ct,Pan:it,Swipe:ut,Pinch:ot,Rotate:st,Press:at,on:m,off:v,each:l,merge:_t,extend:wt,assign:pt,inherit:f,bindFn:d,prefixed:S}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=lt,(r=function(){return lt}.call(e,n,e,t))!==s&&(t.exports=r)}(window,document)},function(t,e){t.exports=function(t,e,n){for(var r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*n/e.length),o="";;)for(var a=t(i),s=i;s--;)if(o+=e[a[s]&r]||"",o.length===+n)return o}},function(t,e,n){"use strict";function r(t){var e="",n=Math.floor(.001*(Date.now()-s));return n===o?i++:(i=0,o=n),e+=a(u),e+=a(t),i>0&&(e+=a(i)),e+a(n)}var i,o,a=n(15),s=(n(0),1567752802062),u=7;t.exports=r},function(t,e,n){"use strict";function r(t){for(var e,n=0,r="";!e;)r+=a(o,i.get(),1),e=t<Math.pow(16,n+1),n++;return r}var i=n(0),o=n(18),a=n(13);t.exports=r},function(t,e,n){"use strict";function r(e){return s.seed(e),t.exports}function i(e){return l=e,t.exports}function o(t){return void 0!==t&&s.characters(t),s.shuffled()}function a(){return u(l)}var s=n(0),u=n(14),c=n(17),l=n(20)||0;t.exports=a,t.exports.generate=a,t.exports.seed=r,t.exports.worker=i,t.exports.characters=o,t.exports.isValid=c},function(t,e,n){"use strict";function r(t){return!(!t||"string"!=typeof t||t.length<6)&&!new RegExp("[^"+i.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(t)}var i=n(0);t.exports=r},function(t,e,n){"use strict";var r,i="object"==typeof window&&(window.crypto||window.msCrypto);r=i&&i.getRandomValues?function(t){return i.getRandomValues(new Uint8Array(t))}:function(t){for(var e=[],n=0;n<t;n++)e.push(Math.floor(256*Math.random()));return e},t.exports=r},function(t,e,n){"use strict";function r(){return(o=(9301*o+49297)%233280)/233280}function i(t){o=t}var o=1;t.exports={nextValue:r,seed:i}},function(t,e,n){"use strict";t.exports=0},function(t,e){t.exports=function(t,e,n,r){var i,o=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(i=t,o=t.default);var s="function"==typeof o?o.options:o;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),n&&(s._scopeId=n),r){var u=Object.create(s.computed||null);Object.keys(r).forEach((function(t){var e=r[t];u[t]=function(){return e}})),s.computed=u}return{esModule:i,exports:o,options:s}}},function(t,e,n){var r=n(9);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals),n(23)("df0682cc",r,!0,{})},function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=l[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(o(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(o(n.parts[i]));l[n.id]={id:n.id,refs:1,parts:a}}}}function i(){var t=document.createElement("style");return t.type="text/css",h.appendChild(t),t}function o(t){var e,n,r=document.querySelector("style["+v+'~="'+t.id+'"]');if(r){if(p)return g;r.parentNode.removeChild(r)}if(y){var o=d++;r=f||(f=i()),e=a.bind(null,r,o,!1),n=a.bind(null,r,o,!0)}else r=i(),e=s.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}function a(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function s(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),m.ssrId&&t.setAttribute(v,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var u="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!u)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n(24),l={},h=u&&(document.head||document.getElementsByTagName("head")[0]),f=null,d=0,p=!1,g=function(){},m=null,v="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n,i){p=n,m=i||{};var o=c(t,e);return r(o),function(e){for(var n=[],i=0;i<o.length;i++){var a=o[i],s=l[a.id];s.refs--,n.push(s)}e?(o=c(t,e),r(o)):o=[];for(i=0;i<n.length;i++){s=n[i];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete l[s.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s=o[1],u=o[2],c=o[3],l={id:t+":"+i,css:s,media:u,sourceMap:c};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n}])}))},a691:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},a73c:function(t,e,n){var r=n("6d8b"),i=r.retrieve2,o=r.retrieve3,a=r.each,s=r.normalizeCssArray,u=r.isString,c=r.isObject,l=n("e86a"),h=n("5693"),f=n("5e76"),d=n("7d6d"),p=n("82eb"),g=p.ContextCachedBy,m=p.WILL_BE_RESTORED,v=l.DEFAULT_FONT,y={left:1,right:1,center:1},b={top:1,bottom:1,middle:1},x=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],w={},_={};function O(t){return S(t),a(t.rich,S),t}function S(t){if(t){t.font=l.makeFont(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||y[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||b[n]?n:"top";var r=t.textPadding;r&&(t.textPadding=s(t.textPadding))}}function C(t,e,n,r,i,o){r.rich?A(t,e,n,r,i,o):k(t,e,n,r,i,o)}function k(t,e,n,r,i,o){"use strict";var a,s=D(r),u=!1,c=e.__attrCachedBy===g.PLAIN_TEXT;o!==m?(o&&(a=o.style,u=!s&&c&&a),e.__attrCachedBy=s?g.NONE:g.PLAIN_TEXT):c&&(e.__attrCachedBy=g.NONE);var h=r.font||v;u&&h===(a.font||v)||(e.font=h);var f=t.__computedFont;t.__styleFont!==h&&(t.__styleFont=h,f=t.__computedFont=e.font);var p=r.textPadding,y=r.textLineHeight,b=t.__textCotentBlock;b&&!t.__dirtyText||(b=t.__textCotentBlock=l.parsePlainText(n,f,p,y,r.truncate));var w=b.outerHeight,O=b.lines,S=b.lineHeight,C=I(_,t,r,i),k=C.baseX,A=C.baseY,T=C.textAlign||"left",j=C.textVerticalAlign;E(e,r,i,k,A);var N=l.adjustTextY(A,w,j),R=k,$=N;if(s||p){var z=l.getWidth(n,f),B=z;p&&(B+=p[1]+p[3]);var U=l.adjustTextX(k,B,T);s&&M(t,e,r,U,N,B,w),p&&(R=L(k,T,p),$+=p[0])}e.textAlign=T,e.textBaseline="middle",e.globalAlpha=r.opacity||1;for(var W=0;W<x.length;W++){var V=x[W],H=V[0],q=V[1],G=r[H];u&&G===a[H]||(e[q]=d(e,q,G||V[2]))}$+=S/2;var X=r.textStrokeWidth,Y=u?a.textStrokeWidth:null,K=!u||X!==Y,Z=!u||K||r.textStroke!==a.textStroke,J=F(r.textStroke,X),Q=P(r.textFill);if(J&&(K&&(e.lineWidth=X),Z&&(e.strokeStyle=J)),Q&&(u&&r.textFill===a.textFill||(e.fillStyle=Q)),1===O.length)J&&e.strokeText(O[0],R,$),Q&&e.fillText(O[0],R,$);else for(W=0;W<O.length;W++)J&&e.strokeText(O[W],R,$),Q&&e.fillText(O[W],R,$),$+=S}function A(t,e,n,r,i,o){o!==m&&(e.__attrCachedBy=g.NONE);var a=t.__textCotentBlock;a&&!t.__dirtyText||(a=t.__textCotentBlock=l.parseRichText(n,r)),T(t,e,a,r,i)}function T(t,e,n,r,i){var o=n.width,a=n.outerWidth,s=n.outerHeight,u=r.textPadding,c=I(_,t,r,i),h=c.baseX,f=c.baseY,d=c.textAlign,p=c.textVerticalAlign;E(e,r,i,h,f);var g=l.adjustTextX(h,a,d),m=l.adjustTextY(f,s,p),v=g,y=m;u&&(v+=u[3],y+=u[0]);var b=v+o;D(r)&&M(t,e,r,g,m,a,s);for(var x=0;x<n.lines.length;x++){var w,O=n.lines[x],S=O.tokens,C=S.length,k=O.lineHeight,A=O.width,T=0,N=v,R=b,F=C-1;while(T<C&&(w=S[T],!w.textAlign||"left"===w.textAlign))j(t,e,w,r,k,y,N,"left"),A-=w.width,N+=w.width,T++;while(F>=0&&(w=S[F],"right"===w.textAlign))j(t,e,w,r,k,y,R,"right"),A-=w.width,R-=w.width,F--;N+=(o-(N-v)-(b-R)-A)/2;while(T<=F)w=S[T],j(t,e,w,r,k,y,N+w.width/2,"center"),N+=w.width,T++;y+=k}}function E(t,e,n,r,i){if(n&&e.textRotation){var o=e.textOrigin;"center"===o?(r=n.width/2+n.x,i=n.height/2+n.y):o&&(r=o[0]+n.x,i=o[1]+n.y),t.translate(r,i),t.rotate(-e.textRotation),t.translate(-r,-i)}}function j(t,e,n,r,a,s,u,c){var l=r.rich[n.styleName]||{};l.text=n.text;var h=n.textVerticalAlign,f=s+a/2;"top"===h?f=s+n.height/2:"bottom"===h&&(f=s+a-n.height/2),!n.isLineHolder&&D(l)&&M(t,e,l,"right"===c?u-n.width:"center"===c?u-n.width/2:u,f-n.height/2,n.width,n.height);var d=n.textPadding;d&&(u=L(u,c,d),f-=n.height/2-d[2]-n.textHeight/2),R(e,"shadowBlur",o(l.textShadowBlur,r.textShadowBlur,0)),R(e,"shadowColor",l.textShadowColor||r.textShadowColor||"transparent"),R(e,"shadowOffsetX",o(l.textShadowOffsetX,r.textShadowOffsetX,0)),R(e,"shadowOffsetY",o(l.textShadowOffsetY,r.textShadowOffsetY,0)),R(e,"textAlign",c),R(e,"textBaseline","middle"),R(e,"font",n.font||v);var p=F(l.textStroke||r.textStroke,m),g=P(l.textFill||r.textFill),m=i(l.textStrokeWidth,r.textStrokeWidth);p&&(R(e,"lineWidth",m),R(e,"strokeStyle",p),e.strokeText(n.text,u,f)),g&&(R(e,"fillStyle",g),e.fillText(n.text,u,f))}function D(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function M(t,e,n,r,i,o,a){var s=n.textBackgroundColor,l=n.textBorderWidth,d=n.textBorderColor,p=u(s);if(R(e,"shadowBlur",n.textBoxShadowBlur||0),R(e,"shadowColor",n.textBoxShadowColor||"transparent"),R(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),R(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),p||l&&d){e.beginPath();var g=n.textBorderRadius;g?h.buildPath(e,{x:r,y:i,width:o,height:a,r:g}):e.rect(r,i,o,a),e.closePath()}if(p)if(R(e,"fillStyle",s),null!=n.fillOpacity){var m=e.globalAlpha;e.globalAlpha=n.fillOpacity*n.opacity,e.fill(),e.globalAlpha=m}else e.fill();else if(c(s)){var v=s.image;v=f.createOrUpdateImage(v,null,t,N,s),v&&f.isImageReady(v)&&e.drawImage(v,r,i,o,a)}if(l&&d)if(R(e,"lineWidth",l),R(e,"strokeStyle",d),null!=n.strokeOpacity){m=e.globalAlpha;e.globalAlpha=n.strokeOpacity*n.opacity,e.stroke(),e.globalAlpha=m}else e.stroke()}function N(t,e){e.image=t}function I(t,e,n,r){var i=n.x||0,o=n.y||0,a=n.textAlign,s=n.textVerticalAlign;if(r){var u=n.textPosition;if(u instanceof Array)i=r.x+$(u[0],r.width),o=r.y+$(u[1],r.height);else{var c=e&&e.calculateTextPosition?e.calculateTextPosition(w,n,r):l.calculateTextPosition(w,n,r);i=c.x,o=c.y,a=a||c.textAlign,s=s||c.textVerticalAlign}var h=n.textOffset;h&&(i+=h[0],o+=h[1])}return t=t||{},t.baseX=i,t.baseY=o,t.textAlign=a,t.textVerticalAlign=s,t}function R(t,e,n){return t[e]=d(t,e,n),t[e]}function F(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function P(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function $(t,e){return"string"===typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function L(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function z(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}e.normalizeTextStyle=O,e.renderText=C,e.getBoxPosition=I,e.getStroke=F,e.getFill=P,e.parsePercent=$,e.needDrawText=z},a79d:function(t,e,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),a=n("d039"),s=n("d066"),u=n("4840"),c=n("cdf9"),l=n("6eeb"),h=!!o&&a((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:h},{finally:function(t){var e=u(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype["finally"]||l(o.prototype,"finally",s("Promise").prototype["finally"])},a80f:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},a87b:function(t){t.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"4.13.1","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"scripts":{"changelog":"conventional-changelog -p angular -r 2","build":"yarn build:only","build:only":"yarn tsc:src && rollup -c","postbuild":"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"find build ! -name \'vega-lite-schema.json\' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup \'yarn tsc:src -w\' \'rollup -c -w\'","watch:site":"concurrently --kill-others -n Typescript,Rollup \'yarn tsc:site -w\' \'rollup -c site/rollup.config.js -w\'","watch:test":"jest --watch"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2","ajv":"^6.12.2","chai":"^4.2.0","cheerio":"^1.0.0-rc.3","codecov":"^3.7.0","concurrently":"^5.2.0","conventional-changelog-cli":"^2.0.34","d3":"^5.16.0","eslint":"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3","jest":"^26.0.1","jest-puppeteer":"^4.4.0","mkdirp":"^1.0.4","prettier":"^2.0.5","puppeteer":"^3.1.0","rollup":"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7","terser":"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1","typescript":"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},"dependencies":{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0","tslib":"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0","yargs":"~15.3.1"},"peerDependencies":{"vega":"^5.12.1"},"jest":{"preset":"jest-puppeteer","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false}}')},aa6f:function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return Zt})),n.d(e,"creator",(function(){return u})),n.d(e,"local",(function(){return Qt})),n.d(e,"matcher",(function(){return y})),n.d(e,"mouse",(function(){return re})),n.d(e,"namespace",(function(){return o})),n.d(e,"namespaces",(function(){return i})),n.d(e,"clientPoint",(function(){return ne})),n.d(e,"select",(function(){return Kt})),n.d(e,"selectAll",(function(){return ie})),n.d(e,"selection",(function(){return Yt})),n.d(e,"selector",(function(){return l})),n.d(e,"selectorAll",(function(){return d})),n.d(e,"style",(function(){return Z})),n.d(e,"touch",(function(){return oe})),n.d(e,"touches",(function(){return ae})),n.d(e,"window",(function(){return q})),n.d(e,"event",(function(){return Nt})),n.d(e,"customEvent",(function(){return Bt}));var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},o=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.hasOwnProperty(e)?{space:i[e],local:t}:t};function a(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===r&&e.documentElement.namespaceURI===r?e.createElement(t):e.createElementNS(n,t)}}function s(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var u=function(t){var e=o(t);return(e.local?s:a)(e)};function c(){}var l=function(t){return null==t?c:function(){return this.querySelector(t)}},h=function(t){"function"!==typeof t&&(t=l(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),h=0;h<u;++h)(o=s[h])&&(a=t.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new Gt(r,this._parents)};function f(){return[]}var d=function(t){return null==t?f:function(){return this.querySelectorAll(t)}},p=function(t){"function"!==typeof t&&(t=d(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new Gt(r,i)},g=function(t){return function(){return this.matches(t)}};if("undefined"!==typeof document){var m=document.documentElement;if(!m.matches){var v=m.webkitMatchesSelector||m.msMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector;g=function(t){return function(){return v.call(this,t)}}}}var y=g,b=function(t){"function"!==typeof t&&(t=y(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Gt(r,this._parents)},x=function(t){return new Array(t.length)},w=function(){return new Gt(this._enter||this._groups.map(x),this._parents)};function _(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}_.prototype={constructor:_,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var O=function(t){return function(){return t}},S="$";function C(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new _(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function k(t,e,n,r,i,o,a){var s,u,c,l={},h=e.length,f=o.length,d=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(d[s]=c=S+a.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<f;++s)c=S+a.call(t,o[s],s,o),(u=l[c])?(r[s]=u,u.__data__=o[s],l[c]=null):n[s]=new _(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&l[d[s]]===u&&(i[s]=u)}var A=function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each((function(t){d[++c]=t})),d;var n=e?k:C,r=this._parents,i=this._groups;"function"!==typeof t&&(t=O(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,d=t.call(l,l&&l.__data__,c,r),p=d.length,g=s[c]=new Array(p),m=a[c]=new Array(p),v=u[c]=new Array(f);n(l,h,g,m,v,d,e);for(var y,b,x=0,w=0;x<p;++x)if(y=g[x]){x>=w&&(w=x+1);while(!(b=m[w])&&++w<p);y._next=b||null}}return a=new Gt(a,r),a._enter=s,a._exit=u,a},T=function(){return new Gt(this._exit||this._groups.map(x),this._parents)},E=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||l[d])&&(f[d]=u);for(;s<r;++s)a[s]=e[s];return new Gt(a,this._parents)},j=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},D=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=M);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new Gt(i,this._parents).order()};function M(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var N=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},I=function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},R=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},F=function(){var t=0;return this.each((function(){++t})),t},P=function(){return!this.node()},$=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this};function L(t){return function(){this.removeAttribute(t)}}function z(t){return function(){this.removeAttributeNS(t.space,t.local)}}function B(t,e){return function(){this.setAttribute(t,e)}}function U(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function W(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function V(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var H=function(t,e){var n=o(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?z:L:"function"===typeof e?n.local?V:W:n.local?U:B)(n,e))},q=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function G(t){return function(){this.style.removeProperty(t)}}function X(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Y(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}var K=function(t,e,n){return arguments.length>1?this.each((null==e?G:"function"===typeof e?Y:X)(t,e,null==n?"":n)):Z(this.node(),t)};function Z(t,e){return t.style.getPropertyValue(e)||q(t).getComputedStyle(t,null).getPropertyValue(e)}function J(t){return function(){delete this[t]}}function Q(t,e){return function(){this[t]=e}}function tt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}var et=function(t,e){return arguments.length>1?this.each((null==e?J:"function"===typeof e?tt:Q)(t,e)):this.node()[t]};function nt(t){return t.trim().split(/^|\s+/)}function rt(t){return t.classList||new it(t)}function it(t){this._node=t,this._names=nt(t.getAttribute("class")||"")}function ot(t,e){var n=rt(t),r=-1,i=e.length;while(++r<i)n.add(e[r])}function at(t,e){var n=rt(t),r=-1,i=e.length;while(++r<i)n.remove(e[r])}function st(t){return function(){ot(this,t)}}function ut(t){return function(){at(this,t)}}function ct(t,e){return function(){(e.apply(this,arguments)?ot:at)(this,t)}}it.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var lt=function(t,e){var n=nt(t+"");if(arguments.length<2){var r=rt(this.node()),i=-1,o=n.length;while(++i<o)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?ct:e?st:ut)(n,e))};function ht(){this.textContent=""}function ft(t){return function(){this.textContent=t}}function dt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}var pt=function(t){return arguments.length?this.each(null==t?ht:("function"===typeof t?dt:ft)(t)):this.node().textContent};function gt(){this.innerHTML=""}function mt(t){return function(){this.innerHTML=t}}function vt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}var yt=function(t){return arguments.length?this.each(null==t?gt:("function"===typeof t?vt:mt)(t)):this.node().innerHTML};function bt(){this.nextSibling&&this.parentNode.appendChild(this)}var xt=function(){return this.each(bt)};function wt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}var _t=function(){return this.each(wt)},Ot=function(t){var e="function"===typeof t?t:u(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))};function St(){return null}var Ct=function(t,e){var n="function"===typeof t?t:u(t),r=null==e?St:"function"===typeof e?e:l(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))};function kt(){var t=this.parentNode;t&&t.removeChild(this)}var At=function(){return this.each(kt)};function Tt(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Et(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var jt=function(t){return this.select(t?Et:Tt)},Dt=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Mt={},Nt=null;if("undefined"!==typeof document){var It=document.documentElement;"onmouseenter"in It||(Mt={mouseenter:"mouseover",mouseleave:"mouseout"})}function Rt(t,e,n){return t=Ft(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Ft(t,e,n){return function(r){var i=Nt;Nt=r;try{t.call(this,this.__data__,e,n)}finally{Nt=i}}}function Pt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function $t(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function Lt(t,e,n){var r=Mt.hasOwnProperty(t.type)?Rt:Ft;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var l=0,h=u.length;l<h;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}var zt=function(t,e,n){var r,i,o=Pt(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Lt:$t,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value};function Bt(t,e,n,r){var i=Nt;t.sourceEvent=Nt,Nt=t;try{return e.apply(n,r)}finally{Nt=i}}function Ut(t,e,n){var r=q(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Wt(t,e){return function(){return Ut(this,t,e)}}function Vt(t,e){return function(){return Ut(this,t,e.apply(this,arguments))}}var Ht=function(t,e){return this.each(("function"===typeof e?Vt:Wt)(t,e))},qt=[null];function Gt(t,e){this._groups=t,this._parents=e}function Xt(){return new Gt([[document.documentElement]],qt)}Gt.prototype=Xt.prototype={constructor:Gt,select:h,selectAll:p,filter:b,data:A,enter:w,exit:T,merge:E,order:j,sort:D,call:N,nodes:I,node:R,size:F,empty:P,each:$,attr:H,style:K,property:et,classed:lt,text:pt,html:yt,raise:xt,lower:_t,append:Ot,insert:Ct,remove:At,clone:jt,datum:Dt,on:zt,dispatch:Ht};var Yt=Xt,Kt=function(t){return"string"===typeof t?new Gt([[document.querySelector(t)]],[document.documentElement]):new Gt([[t]],qt)},Zt=function(t){return Kt(u(t).call(document.documentElement))},Jt=0;function Qt(){return new te}function te(){this._="@"+(++Jt).toString(36)}te.prototype=Qt.prototype={constructor:te,get:function(t){var e=this._;while(!(e in t))if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var ee=function(){var t,e=Nt;while(t=e.sourceEvent)e=t;return e},ne=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},re=function(t){var e=ee();return e.changedTouches&&(e=e.changedTouches[0]),ne(t,e)},ie=function(t){return"string"===typeof t?new Gt([document.querySelectorAll(t)],[document.documentElement]):new Gt([null==t?[]:t],qt)},oe=function(t,e,n){arguments.length<3&&(n=e,e=ee().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return ne(t,r);return null},ae=function(t,e){null==e&&(e=ee().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=ne(t,e[n]);return i}},aaf9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=n("b14b"),i=o(r);function o(t){return t&&t.__esModule?t:{default:t}}var a=["-webkit-",""];function s(t,e){if("string"===typeof e&&!(0,i.default)(e)&&e.indexOf("cross-fade(")>-1)return a.map((function(t){return e.replace(/cross-fade\(/g,t+"cross-fade(")}))}t.exports=e["default"]},ab0f:function(t){t.exports=JSON.parse('{"name":"vega-themes","version":"2.8.5","description":"Themes for stylized Vega and Vega-Lite visualizations.","keywords":["vega","vega-lite","themes","style"],"license":"BSD-3-Clause","author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"contributors":[{"name":"Emily Gu","url":"https://github.com/emilygu"},{"name":"Arvind Satyanarayan","url":"http://arvindsatya.com"},{"name":"Jeffrey Heer","url":"https://idl.cs.washington.edu"},{"name":"Dominik Moritz","url":"https://www.domoritz.de"}],"main":"build/vega-themes.js","module":"build/src/index.js","unpkg":"build/vega-themes.min.js","jsdelivr":"build/vega-themes.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-themes.git"},"scripts":{"prepare":"beemo create-config --silent","clean":"rm -rf build examples/build","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","prebuild":"mkdir -p build","build":"tsc && rollup -c","postbuild":"terser build/vega-themes.js -cm > build/vega-themes.min.js","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","serve":"browser-sync start -s -f build examples --serveStatic examples","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'yarn serve\' \'tsc -w\' \'rollup -c -w\'"},"devDependencies":{"@rollup/plugin-json":"^4.1.0","browser-sync":"^2.26.7","concurrently":"^5.2.0","gh-pages":"^3.1.0","rollup":"^2.21.0","terser":"^4.8.0","typescript":"^3.9.6","vega":"^5.10.0","vega-lite":"^4.8.1","vega-lite-dev-config":"^0.11.8"},"peerDependencies":{"vega":"*","vega-lite":"*"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]}}')},ac0f:function(t,e,n){var r=n("cbe5"),i=n("401b"),o=n("4a3f"),a=o.quadraticSubdivide,s=o.cubicSubdivide,u=o.quadraticAt,c=o.cubicAt,l=o.quadraticDerivativeAt,h=o.cubicDerivativeAt,f=[];function d(t,e,n){var r=t.cpx2,i=t.cpy2;return null===r||null===i?[(n?h:c)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?h:c)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?l:u)(t.x1,t.cpx1,t.x2,e),(n?l:u)(t.y1,t.cpy1,t.y2,e)]}var p=r.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,u=e.cpx1,c=e.cpy1,l=e.cpx2,h=e.cpy2,d=e.percent;0!==d&&(t.moveTo(n,r),null==l||null==h?(d<1&&(a(n,u,i,d,f),u=f[1],i=f[2],a(r,c,o,d,f),c=f[1],o=f[2]),t.quadraticCurveTo(u,c,i,o)):(d<1&&(s(n,u,l,i,d,f),u=f[1],l=f[2],i=f[3],s(r,c,h,o,d,f),c=f[1],h=f[2],o=f[3]),t.bezierCurveTo(u,c,l,h,i,o)))},pointAt:function(t){return d(this.shape,t,!1)},tangentAt:function(t){var e=d(this.shape,t,!0);return i.normalize(e,e)}});t.exports=p},acef:function(t,e,n){const r=n("a236"),i=(t,e)=>{const n=r(t,e);return n?n.version:null};t.exports=i},ad65:function(t,e,n){"use strict";function r(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=r},ad68:function(t,e,n){"use strict";n.r(e),n.d(e,"formatDefaultLocale",(function(){return w})),n.d(e,"format",(function(){return f})),n.d(e,"formatPrefix",(function(){return d})),n.d(e,"formatLocale",(function(){return x})),n.d(e,"formatSpecifier",(function(){return u})),n.d(e,"precisionFixed",(function(){return _})),n.d(e,"precisionPrefix",(function(){return O})),n.d(e,"precisionRound",(function(){return S}));var r=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},i=function(t){return t=r(Math.abs(t)),t?t[1]:NaN},o=function(t,e){return function(n,r){var i=n.length,o=[],a=0,s=t[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),(u+=s+1)>r)break;s=t[a=(a+1)%t.length]}return o.reverse().join(e)}},a=function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}},s=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(t){return new c(t)}function c(t){if(!(e=s.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}u.prototype=c.prototype,c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var l,h,f,d,p=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}break}return i>0?t.slice(0,i)+t.slice(e+1):t},g=function(t,e){var n=r(t,e);if(!n)return t+"";var i=n[0],o=n[1],a=o-(l=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+r(t,Math.max(0,e+a-1))[0]},m=function(t,e){var n=r(t,e);if(!n)return t+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")},v={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return m(100*t,e)},r:m,s:g,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},y=function(t){return t},b=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],x=function(t){var e=t.grouping&&t.thousands?o(t.grouping,t.thousands):y,n=t.currency,r=t.decimal,s=t.numerals?a(t.numerals):y,c=t.percent||"%";function h(t){t=u(t);var i=t.fill,o=t.align,a=t.sign,h=t.symbol,f=t.zero,d=t.width,g=t.comma,m=t.precision,y=t.trim,x=t.type;"n"===x?(g=!0,x="g"):v[x]||(null==m&&(m=12),y=!0,x="g"),(f||"0"===i&&"="===o)&&(f=!0,i="0",o="=");var w="$"===h?n[0]:"#"===h&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",_="$"===h?n[1]:/[%p]/.test(x)?c:"",O=v[x],S=/[defgprs%]/.test(x);function C(t){var n,u,c,h=w,v=_;if("c"===x)v=O(t)+v,t="";else{t=+t;var C=t<0;if(t=O(Math.abs(t),m),y&&(t=p(t)),C&&0===+t&&(C=!1),h=(C?"("===a?a:"-":"-"===a||"("===a?"":a)+h,v=("s"===x?b[8+l/3]:"")+v+(C&&"("===a?")":""),S){n=-1,u=t.length;while(++n<u)if(c=t.charCodeAt(n),48>c||c>57){v=(46===c?r+t.slice(n+1):t.slice(n))+v,t=t.slice(0,n);break}}}g&&!f&&(t=e(t,1/0));var k=h.length+t.length+v.length,A=k<d?new Array(d-k+1).join(i):"";switch(g&&f&&(t=e(A+t,A.length?d-v.length:1/0),A=""),o){case"<":t=h+t+v+A;break;case"=":t=h+A+t+v;break;case"^":t=A.slice(0,k=A.length>>1)+h+t+v+A.slice(k);break;default:t=A+h+t+v;break}return s(t)}return m=null==m?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),C.toString=function(){return t+""},C}function f(t,e){var n=h((t=u(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(i(e)/3))),o=Math.pow(10,-r),a=b[8+r/3];return function(t){return n(o*t)+a}}return{format:h,formatPrefix:f}};function w(t){return h=x(t),f=h.format,d=h.formatPrefix,h}w({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var _=function(t){return Math.max(0,-i(Math.abs(t)))},O=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(i(e)/3)))-i(Math.abs(t)))},S=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,i(e)-i(t))+1}},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae40:function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("5135"),a=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:u,h=o(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,h)}))}},ae69:function(t,e,n){var r=n("cbe5"),i=r.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var n=.5522848,r=e.cx,i=e.cy,o=e.rx,a=e.ry,s=o*n,u=a*n;t.moveTo(r-o,i),t.bezierCurveTo(r-o,i-u,r-s,i-a,r,i-a),t.bezierCurveTo(r+s,i-a,r+o,i-u,r+o,i),t.bezierCurveTo(r+o,i+u,r+s,i+a,r,i+a),t.bezierCurveTo(r-s,i+a,r-o,i+u,r-o,i),t.closePath()}});t.exports=i},ae93:function(t,e,n){"use strict";var r,i,o,a=n("e163"),s=n("9112"),u=n("5135"),c=n("b622"),l=n("c430"),h=c("iterator"),f=!1,d=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=a(a(o)),i!==Object.prototype&&(r=i)):f=!0),void 0==r&&(r={}),l||u(r,h)||s(r,h,d),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},aeab:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},aed4:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("30bf"),i=n("01de"),o=n("a2ec"),a=n("1334");class s extends r.Component{static render(t,e,n){return r.render(r.h(s,Object.assign({},n)),t,e)}constructor(t){super(t),this.surfaces=new Map;const e=null==t.startOpen||t.startOpen;this.state={isOpen:e,isFullscreen:!1,activeTab:null,tabs:new Set},this.keyHandler=this.keyHandler.bind(this)}close(){this.setState({isOpen:!1})}open(){this.setState({isOpen:!0})}toggle(){this.setState({isOpen:!this.state.isOpen})}toggleFullScreen(){this.setState({isFullscreen:!this.state.isFullscreen})}isOpen(){return this.state.isOpen}isFullscreen(){return this.state.isFullscreen}getSurface(t,e){const n=this.surfaceId(t,e);let r;if(!this.surfaces.has(n))throw Error("Surface not found with id: "+n);return r=this.surfaces.get(n),{container:r.container,label:r.label,drawArea:r.drawArea}}bindKeys(){document.addEventListener("keydown",this.keyHandler,!1)}unbindKeys(){document.removeEventListener("keydown",this.keyHandler)}surfaceId(t,e){return t+e}setTabs(t){const e=t.map(t=>t.tab),n=this.state.tabs;let r;for(const i of e)n.has(i)||(n.add(i),r=i);null!=r&&this.setState({tabs:n,activeTab:r})}getTabs(){return this.state.tabs}registerSurface(t,e,n){const r=this.surfaceId(t,e);this.surfaces.set(r,n)}keyHandler(t){const e=192;t.keyCode===e&&(t.shiftKey?this.toggleFullScreen():this.toggle())}setActiveTab(t){this.setState({activeTab:t})}componentDidMount(){this.bindKeys()}componentWillMount(){this.setTabs(this.props.surfaceList)}componentWillReceiveProps(t){this.setTabs(t.surfaceList)}render(){const{isOpen:t,isFullscreen:e,activeTab:n}=this.state,{surfaceList:s}=this.props,c=Array.from(this.getTabs().values()),l="550px",h="90vw",f=e?h:l,d=i.css({width:f,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),p=i.css({right:"0"}),g=i.css({right:`calc(-${f} - 10px)`}),m=t?p:g,v=i.css({});return r.h("div",{className:`${d} ${m} visor`,"data-isopen":t,"data-isfullscreen":e},r.h(u,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:e}),r.h(a.Tabs,{tabNames:c,activeTab:n,handleClick:this.setActiveTab.bind(this)}),r.h("div",{className:v+" visor-surfaces"},s.map(t=>r.h(o.SurfaceComponent,{key:t.name+t.tab,name:t.name,tab:t.tab,styles:t.styles,registerSurface:this.registerSurface.bind(this),visible:n===t.tab}))))}}function u(t){const{isFullScreen:e,fullScreenHandler:n,closeHandler:o}=t,a=i.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),s=i.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),u=i.css({marginLeft:"auto"});return r.h("div",{className:a+" visor-controls"},r.h("button",{className:""+s,onClick:n},e?"Minimize":"Maximize"),r.h("button",{className:`${s} ${u}`,onClick:o},"Hide"))}e.VisorComponent=s},af03:function(t,e,n){var r=n("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},af24:function(t,e,n){n("48c7"),n("f273")},afa0:function(t,e,n){var r=n("6d8b"),i=n("22d1"),o=n("e1fc"),a=n("04f6");function s(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var u=function(){this._roots=[],this._displayList=[],this._displayListLen=0};u.prototype={constructor:u,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,r=0,o=e.length;r<o;r++)this._updateAndAddDisplayable(e[r],null,t);n.length=this._displayListLen,i.canvasSupported&&a(n,s)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var r=t.clipPath;if(r){e=e?e.slice():[];var i=r,o=t;while(i)i.parent=o,i.updateTransform(),e.push(i),o=i,i=i.clipPath}if(t.isGroup){for(var a=t._children,s=0;s<a.length;s++){var u=a[s];t.__dirty&&(u.__dirty=!0),this._updateAndAddDisplayable(u,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof o&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof o&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var i=t.length;e<i;e++)this.delRoot(t[e])}else{var a=r.indexOf(this._roots,t);a>=0&&(this.delFromStorage(t),this._roots.splice(a,1),t instanceof o&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:s};var c=u;t.exports=c},b00b:function(t,e,n){const r=n("3034"),i=(t,e)=>r(t,e,!0);t.exports=i},b041:function(t,e,n){"use strict";var r=n("00ee"),i=n("f5df");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b047:function(t,e,n){var r=n("1a8c"),i=n("408c"),o=n("b4b0"),a="Expected a function",s=Math.max,u=Math.min;function c(t,e,n){var c,l,h,f,d,p,g=0,m=!1,v=!1,y=!0;if("function"!=typeof t)throw new TypeError(a);function b(e){var n=c,r=l;return c=l=void 0,g=e,f=t.apply(r,n),f}function x(t){return g=t,d=setTimeout(O,e),m?b(t):f}function w(t){var n=t-p,r=t-g,i=e-n;return v?u(i,h-r):i}function _(t){var n=t-p,r=t-g;return void 0===p||n>=e||n<0||v&&r>=h}function O(){var t=i();if(_(t))return S(t);d=setTimeout(O,w(t))}function S(t){return d=void 0,y&&c?b(t):(c=l=void 0,f)}function C(){void 0!==d&&clearTimeout(d),g=0,c=p=l=d=void 0}function k(){return void 0===d?f:S(i())}function A(){var t=i(),n=_(t);if(c=arguments,l=this,p=t,n){if(void 0===d)return x(p);if(v)return clearTimeout(d),d=setTimeout(O,e),b(p)}return void 0===d&&(d=setTimeout(O,e)),f}return e=o(e)||0,r(n)&&(m=!!n.leading,v="maxWait"in n,h=v?s(o(n.maxWait)||0,e):h,y="trailing"in n?!!n.trailing:y),A.cancel=C,A.flush=k,A}t.exports=c},b0af:function(t,e,n){var r=n("2306"),i=n("3842"),o=i.round;function a(t,e,n){var i=t.getArea(),o=t.getBaseAxis().isHorizontal(),a=i.x,s=i.y,u=i.width,c=i.height,l=n.get("lineStyle.width")||2;a-=l/2,s-=l/2,u+=l,c+=l,a=Math.floor(a),u=Math.round(u);var h=new r.Rect({shape:{x:a,y:s,width:u,height:c}});return e&&(h.shape[o?"width":"height"]=0,r.initProps(h,{shape:{width:u,height:c}},n)),h}function s(t,e,n){var i=t.getArea(),a=new r.Sector({shape:{cx:o(t.cx,1),cy:o(t.cy,1),r0:o(i.r0,1),r:o(i.r,1),startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return e&&(a.shape.endAngle=i.startAngle,r.initProps(a,{shape:{endAngle:i.endAngle}},n)),a}function u(t,e,n){return t?"polar"===t.type?s(t,e,n):"cartesian2d"===t.type?a(t,e,n):null:null}e.createGridClipPath=a,e.createPolarClipPath=s,e.createClipPath=u},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/,u="name";r&&!(u in o)&&i(o,u,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},b12f:function(t,e,n){var r=n("e1fc"),i=n("8918"),o=n("625e"),a=function(){this.group=new r,this.uid=i.getUID("viewComponent")};a.prototype={constructor:a,init:function(t,e){},render:function(t,e,n,r){},dispose:function(){},filterForExposedEvent:null};var s=a.prototype;s.updateView=s.updateLayout=s.updateVisual=function(t,e,n,r){},o.enableClassExtend(a),o.enableClassManagement(a,{registerWhenExtend:!0});var u=a;t.exports=u},b14b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=/-webkit-|-moz-|-ms-/;function i(t){return"string"===typeof t&&r.test(t)}t.exports=e["default"]},b15c:function(t,e){const n="2.0.0",r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16;t.exports={SEMVER_SPEC_VERSION:n,MAX_LENGTH:r,MAX_SAFE_INTEGER:i,MAX_SAFE_COMPONENT_LENGTH:o}},b1d4:function(t,e,n){var r=n("862d");function i(t,e){return e=e||{},r(e.coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,encodeDefaulter:e.encodeDefaulter,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})}t.exports=i},b333:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return l}));
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r="tfjsflags";class i{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){const e=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags||(this.flags[t]=await this.evaluateFlag(t)),this.flags[t]}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(e instanceof Promise)throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const t=o(this.global.location.search);if(r in t){const e=t[r].split(",");e.forEach(t=>{const[e,n]=t.split(":");this.urlFlags[e]=s(e,n)})}}}function o(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...n)=>(a(e,n[0],n[1]),n.join("="))),e}function a(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function s(t,e){if(e=e.toLowerCase(),"true"===e||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function u(){return c}let c=null;function l(t){c=t}},b4b0:function(t,e,n){var r=n("1a8c"),i=n("ffd6"),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;function h(t){if("number"==typeof t)return t;if(i(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=u.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):s.test(t)?o:+t}t.exports=h},b4db:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(n("7ad3")),a=n("1309"),s=n("8e47");function u(t,e,n={}){return r(this,void 0,void 0,(function*(){const r=s.getDrawArea(t),i=e,u=Object.assign({},c,n);if(l.has(r)){const t=l.get(r);if(s.shallowEquals(u,t.lastOptions)){yield s.nextFrame();const e=t.view,n=e.changeset().remove(()=>!0).insert(i);return void(yield e.change("values",n).runAsync())}}const{xLabel:h,yLabel:f,xType:d,yType:p}=u;let g=null;null!=h&&(g={title:h});let m=null;null!=f&&(m={title:f});const v={actions:!1,mode:"vega-lite",defaultStyle:!1};let y;y=null!=u.color?Array.isArray(u.color)?{field:"index",type:"nominal",scale:{range:u.color}}:{value:u.color}:{value:"#4C78A0"};const b={width:u.width||a.getDefaultWidth(r),height:u.height||a.getDefaultHeight(r),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:u.fontSize,titleFontSize:u.fontSize},text:{fontSize:u.fontSize},legend:{labelFontSize:u.fontSize,titleFontSize:u.fontSize}},data:{values:i,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:d,axis:g},y:{field:"value",type:p,axis:m},color:y}};yield s.nextFrame();const x=yield o.default(r,b,v);l.set(r,{view:x.view,lastOptions:u})}))}e.barchart=u;const c={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},l=new Map},b575:function(t,e,n){var r,i,o,a,s,u,c,l,h=n("da84"),f=n("06cf").f,d=n("c6b6"),p=n("2cf49").set,g=n("1cdc"),m=h.MutationObserver||h.WebKitMutationObserver,v=h.process,y=h.Promise,b="process"==d(v),x=f(h,"queueMicrotask"),w=x&&x.value;w||(r=function(){var t,e;b&&(t=v.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?a():o=void 0,n}}o=void 0,t&&t.enter()},b?a=function(){v.nextTick(r)}:m&&!g?(s=!0,u=document.createTextNode(""),new m(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=function(){p.call(h,r)}),t.exports=w||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},b5ae:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return O}));var r,i,o=0,a=0,s=0,u=1e3,c=0,l=0,h=0,f="object"===typeof performance&&performance.now?performance:Date,d="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function p(){return l||(d(g),l=f.now()+h)}function g(){l=0}function m(){this._call=this._time=this._next=null}function v(t,e,n){var r=new m;return r.restart(t,e,n),r}function y(){p(),++o;var t,e=r;while(e)(t=l-e._time)>=0&&e._call.call(null,t),e=e._next;--o}function b(){l=(c=f.now())+h,o=a=0;try{y()}finally{o=0,w(),l=0}}function x(){var t=f.now(),e=t-c;e>u&&(h-=e,c=t)}function w(){var t,e,n=r,o=1/0;while(n)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:r=e);i=t,_(o)}function _(t){if(!o){a&&(a=clearTimeout(a));var e=t-l;e>24?(t<1/0&&(a=setTimeout(b,t-f.now()-h)),s&&(s=clearInterval(s))):(s||(c=f.now(),s=setInterval(x,u)),o=1,d(b))}}m.prototype=v.prototype={constructor:m,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?p():+n)+(null==e?0:+e),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=n,_()},stop:function(){this._call&&(this._call=null,this._time=1/0,_())}};var O=function(t,e,n){var r=new m;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}},b5c7:function(t,e,n){var r=n("282b"),i=r([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),o={getBarItemStyle:function(t){var e=i(this,t);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(e.lineDash=n)}return e}};t.exports=o},b5db:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){return null===t||void 0===t||!1===t||"object"===("undefined"===typeof t?"undefined":r(t))&&0===Object.keys(t).length}function o(t){if(i(t))return null;if("object"!==("undefined"===typeof t?"undefined":r(t)))return t;for(var e={},n=Object.keys(t),o=!1,a=0;a<n.length;a++){var u=t[n[a]],c=s(u);null!==c&&c===u||(o=!0),null!==c&&(e[n[a]]=c)}return 0===Object.keys(e).length?null:o?e:t}function a(t){var e=!1,n=[];return t.forEach((function(t){var r=s(t);null!==r&&r===t||(e=!0),null!==r&&n.push(r)})),0==n.length?null:e?n:t}function s(t){return Array.isArray(t)?a(t):o(t)}e.default=s},b607:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"n",(function(){return s})),n.d(e,"g",(function(){return p})),n.d(e,"r",(function(){return p})),n.d(e,"d",(function(){return m})),n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return x})),n.d(e,"j",(function(){return _})),n.d(e,"h",(function(){return _})),n.d(e,"e",(function(){return O})),n.d(e,"i",(function(){return k})),n.d(e,"f",(function(){return j})),n.d(e,"k",(function(){return M})),n.d(e,"o",(function(){return I})),n.d(e,"m",(function(){return F})),n.d(e,"l",(function(){return $})),n.d(e,"u",(function(){return z})),n.d(e,"s",(function(){return z})),n.d(e,"p",(function(){return B})),n.d(e,"t",(function(){return V})),n.d(e,"q",(function(){return X})),n.d(e,"v",(function(){return K}));var r=new Date,i=new Date;function o(t,e,n,a){function s(e){return t(e=new Date(+e)),e}return s.floor=s,s.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},s.range=function(n,r,i){var o,a=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return a;do{a.push(o=new Date(+n)),e(n,i),t(n)}while(o<n&&n<r);return a},s.filter=function(n){return o((function(e){if(e>=e)while(t(e),!n(e))e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)while(++r<=0)while(e(t,-1),!n(t));else while(--r>=0)while(e(t,1),!n(t));}))},n&&(s.count=function(e,o){return r.setTime(+e),i.setTime(+o),t(r),t(i),Math.floor(n(r,i))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(a?function(e){return a(e)%t===0}:function(e){return s.count(0,e)%t===0}):s:null}),s}var a=o((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):a:null};var s=a,u=(a.range,1e3),c=6e4,l=36e5,h=864e5,f=6048e5,d=o((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*u)}),(function(t,e){return(e-t)/u}),(function(t){return t.getUTCSeconds()})),p=d,g=(d.range,o((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*u)}),(function(t,e){t.setTime(+t+e*c)}),(function(t,e){return(e-t)/c}),(function(t){return t.getMinutes()}))),m=g,v=(g.range,o((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*u-t.getMinutes()*c)}),(function(t,e){t.setTime(+t+e*l)}),(function(t,e){return(e-t)/l}),(function(t){return t.getHours()}))),y=v,b=(v.range,o((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*c)/h}),(function(t){return t.getDate()-1}))),x=b;b.range;function w(t){return o((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*c)/f}))}var _=w(0),O=w(1),S=w(2),C=w(3),k=w(4),A=w(5),T=w(6),E=(_.range,O.range,S.range,C.range,k.range,A.range,T.range,o((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),j=E,D=(E.range,o((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));D.every=function(t){return isFinite(t=Math.floor(t))&&t>0?o((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var M=D,N=(D.range,o((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*c)}),(function(t,e){return(e-t)/c}),(function(t){return t.getUTCMinutes()}))),I=N,R=(N.range,o((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*l)}),(function(t,e){return(e-t)/l}),(function(t){return t.getUTCHours()}))),F=R,P=(R.range,o((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/h}),(function(t){return t.getUTCDate()-1}))),$=P;P.range;function L(t){return o((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/f}))}var z=L(0),B=L(1),U=L(2),W=L(3),V=L(4),H=L(5),q=L(6),G=(z.range,B.range,U.range,W.range,V.range,H.range,q.range,o((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),X=G,Y=(G.range,o((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Y.every=function(t){return isFinite(t=Math.floor(t))&&t>0?o((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var K=Y;Y.range},b622:function(t,e,n){var r=n("da84"),i=n("5692"),o=n("5135"),a=n("90e3"),s=n("4930"),u=n("fdbf"),c=i("wks"),l=r.Symbol,h=u?l:l&&l.withoutSetter||a;t.exports=function(t){return o(c,t)||(s&&o(l,t)?c[t]=l[t]:c[t]=h("Symbol."+t)),c[t]}},b639:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),o=n("e3db");function a(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=c.prototype):(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?m(t,e,n,r):"string"===typeof e?p(t,e,n):v(t,e)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,n,r){return h(e),e<=0?u(t,e):void 0!==n?"string"===typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}function d(t,e){if(h(e),t=u(t,e<0?0:0|y(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|x(e,n);t=u(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function g(t,e){var n=e.length<0?0:0|y(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function m(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=c.prototype):t=g(t,e),t}function v(t,e){if(c.isBuffer(e)){var n=0|y(e.length);return t=u(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?u(t,0):g(t,e);if("Buffer"===e.type&&o(e.data))return g(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function b(t){return+t!=t&&(t=0),c.alloc(+t)}function x(t,e){if(c.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(t).length;default:if(r)return K(t).length;e=(""+e).toLowerCase(),r=!0}}function w(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return F(this,e,n);case"base64":return D(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function O(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:S(t,e,n,r,i);if("number"===typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):S(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function S(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function C(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function k(t,e,n,r){return tt(K(e,t.length-n),t,n,r)}function A(t,e,n,r){return tt(Z(e),t,n,r)}function T(t,e,n,r){return A(t,e,n,r)}function E(t,e,n,r){return tt(Q(e),t,n,r)}function j(t,e,n,r){return tt(J(e,t.length-n),t,n,r)}function D(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function M(t,e,n){n=Math.min(t.length,n);var r=[],i=e;while(i<n){var o,a,s,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:o=t[i+1],128===(192&o)&&(u=(31&c)<<6|63&o,u>127&&(l=u));break;case 3:o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a,u>2047&&(u<55296||u>57343)&&(l=u));break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s,u>65535&&u<1114112&&(l=u))}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return I(r)}e.Buffer=c,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:a(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return f(null,t,e,n)},c.allocUnsafe=function(t){return d(null,t)},c.allocUnsafeSlow=function(t){return d(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=x,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):w.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,a=n-e,s=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(u[h]!==l[h]){o=u[h],a=l[h];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return O(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return O(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return C(this,t,e,n);case"utf8":case"utf-8":return k(this,t,e,n);case"ascii":return A(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function I(t){var e=t.length;if(e<=N)return String.fromCharCode.apply(String,t);var n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=N));return n}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function F(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=Y(t[o]);return i}function $(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function B(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function W(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(t,e,n,r,o){return o||W(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function H(t,e,n,r,o){return o||W(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);var r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);var r=this[t+--e],i=1;while(e>0&&(i*=256))r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);var r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);var r=e,i=1,o=this[t+--r];while(r>0&&(i*=256))o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;z(this,t,e,n,i,0)}var o=1,a=0;this[e]=255&t;while(++a<n&&(o*=256))this[e+a]=t/o&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;z(this,t,e,n,i,0)}var o=n-1,a=1;this[e+o]=255&t;while(--o>=0&&(a*=256))this[e+o]=t/a&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);z(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;this[e]=255&t;while(++o<n&&(a*=256))t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);z(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;this[e+o]=255&t;while(--o>=0&&(a*=256))t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return V(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return V(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return H(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return H(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:K(new c(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function G(t){if(t=X(t).replace(q,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function X(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function K(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Z(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function J(t,e){for(var n,r,i,o=[],a=0;a<t.length;++a){if((e-=2)<0)break;n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function Q(t){return r.toByteArray(G(t))}function tt(t,e,n,r){for(var i=0;i<r;++i){if(i+n>=e.length||i>=t.length)break;e[i+n]=t[i]}return i}function et(t){return t!==t}}).call(this,n("c8ba"))},b64b:function(t,e,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),a=n("d039"),s=a((function(){o(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return o(i(t))}})},b719:function(t,e,n){var r=n("697e7");e.zrender=r;var i=n("1687");e.matrix=i;var o=n("401b");e.vector=o;var a=n("6d8b"),s=n("41ef");e.color=s;var u=n("2306"),c=n("3842");e.number=c;var l=n("eda2");e.format=l;var h=n("88b3");h.throttle;e.throttle=h.throttle;var f=n("1548");e.helper=f;var d=n("bda7");e.parseGeoJSON=d;var p=n("6179");e.List=p;var g=n("4319");e.Model=g;var m=n("84ce");e.Axis=m;var v=n("22d1");e.env=v;var y=d,b={};a.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],(function(t){b[t]=a[t]}));var x={};a.each(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],(function(t){x[t]=u[t]})),e.parseGeoJson=y,e.util=b,e.graphic=x},b727:function(t,e,n){var r=n("0366"),i=n("44ad"),o=n("7b0b"),a=n("50c4"),s=n("65f0"),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h;return function(d,p,g,m){for(var v,y,b=o(d),x=i(b),w=r(p,g,3),_=a(x.length),O=0,S=m||s,C=e?S(d,_):n?S(d,0):void 0;_>O;O++)if((f||O in x)&&(v=x[O],y=w(v,O,b),t))if(e)C[O]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return O;case 2:u.call(C,v)}else if(l)return!1;return h?-1:c||l?l:C}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},b7e4:function(t,e,n){"use strict";function r(t){return null!=t.name}function i(t){return t.drawArea instanceof HTMLElement}Object.defineProperty(e,"__esModule",{value:!0}),e.isSurfaceInfo=r,e.isSurface=i},b802:function(t,e,n){(function(e){const n="object"===typeof e&&Object({NODE_ENV:"production",BASE_URL:"/quickdraw-minigame/"})&&Object({NODE_ENV:"production",BASE_URL:"/quickdraw-minigame/"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",BASE_URL:"/quickdraw-minigame/"}).NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};t.exports=n}).call(this,n("4362"))},b805:function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(e,t,n);t.exports=i},b809:function(t,e,n){var r=n("6d8b"),i=n("29a8"),o=n("2b17"),a=o.retrieveRawValue;function s(t,e){var n=e.getModel("aria");if(n.get("show"))if(n.get("description"))t.setAttribute("aria-label",n.get("description"));else{var o=0;e.eachSeries((function(t,e){++o}),this);var s,u=n.get("data.maxCount")||10,c=n.get("series.maxCount")||10,l=Math.min(o,c);if(!(o<1)){var h=m();s=h?p(g("general.withTitle"),{title:h}):g("general.withoutTitle");var f=[],d=o>1?"series.multiple.prefix":"series.single.prefix";s+=p(g(d),{seriesCount:o}),e.eachSeries((function(t,e){if(e<l){var n,r=t.get("name"),i="series."+(o>1?"multiple":"single")+".";n=g(r?i+"withName":i+"withoutName"),n=p(n,{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:v(t.subType)});var s=t.getData();window.data=s,s.count()>u?n+=p(g("data.partialData"),{displayCnt:u}):n+=g("data.allData");for(var c=[],h=0;h<s.count();h++)if(h<u){var d=s.getName(h),m=a(s,h);c.push(p(g(d?"data.withName":"data.withoutName"),{name:d,value:m}))}n+=c.join(g("data.separator.middle"))+g("data.separator.end"),f.push(n)}})),s+=f.join(g("series.multiple.separator.middle"))+g("series.multiple.separator.end"),t.setAttribute("aria-label",s)}}function p(t,e){if("string"!==typeof t)return t;var n=t;return r.each(e,(function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)})),n}function g(t){var e=n.get(t);if(null==e){for(var r=t.split("."),o=i.aria,a=0;a<r.length;++a)o=o[r[a]];return o}return e}function m(){var t=e.getModel("title").option;return t&&t.length&&(t=t[0]),t&&t.text}function v(t){return i.series.typeNames[t]||"自定义图"}}t.exports=s},b838:function(t,e,n){(function(t){var r;(function(t,i,o){function a(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xor128=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},b86c:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=M;var r=n("7b9e"),i=E(r),o=n("7638"),a=E(o),s=n("3e9f"),u=E(s),c=n("8689"),l=E(c),h=n("aaf9"),f=E(h),d=n("ed91"),p=E(d),g=n("f5ea"),m=E(g),v=n("cada"),y=E(v),b=n("e9fa"),x=E(b),w=n("d8a1"),_=E(w),O=n("840c"),S=E(O),C=n("b953"),k=E(C),A=n("734c"),T=E(A);function E(t){return t&&t.__esModule?t:{default:t}}var j=[f.default,l.default,p.default,y.default,x.default,_.default,S.default,k.default,T.default,m.default],D=i.default.prefixMap;function M(t){for(var e in t){var n=t[e],r=(0,u.default)(j,e,n,t,D);r&&(t[e]=r),(0,a.default)(D,e,t)}return t}},b953:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=["-webkit-","-moz-",""],i={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},o={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function a(t,e){if(i.hasOwnProperty(t)&&o.hasOwnProperty(e))return r.map((function(t){return t+e}))}t.exports=e["default"]},bac4:function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)>0;t.exports=i},bbfd:function(t,e,n){const r=n("b802"),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=n("b15c"),{re:a,t:s}=n("8cb5"),{compareIdentifiers:u}=n("2cdf");class c{constructor(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof c){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!==typeof t)throw new TypeError("Invalid Version: "+t);if(t.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?a[s.LOOSE]:a[s.FULL]);if(!n)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<o)return e}return t}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(t){if(r("SemVer.compare",this.version,this.options,t),!(t instanceof c)){if("string"===typeof t&&t===this.version)return 0;t=new c(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof c||(t=new c(t,this.options)),u(this.major,t.major)||u(this.minor,t.minor)||u(this.patch,t.patch)}comparePre(t){if(t instanceof c||(t=new c(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],i=t.prerelease[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++e)}compareBuild(t){t instanceof c||(t=new c(t,this.options));let e=0;do{const n=this.build[e],i=t.build[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++e)}inc(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let t=this.prerelease.length;while(--t>=0)"number"===typeof this.prerelease[t]&&(this.prerelease[t]++,t=-2);-1===t&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this}}t.exports=c},bd67:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n("ce1a")),s=o(n("7ad3")),u=n("1309"),c=n("6180"),l=n("8e47");function h(t,e,n={}){return r(this,void 0,void 0,(function*(){const r=Object.assign({},p,n),i=l.getDrawArea(t);let o=e.values;r.rowMajor&&(o=yield f(e.values));const{xTickLabels:h,yTickLabels:g}=e;if(null!=h){const t=0;d(o,h,t)}if(null!=g){const t=1;d(o,g,t)}const m="@tfidx@",v=[];if(o instanceof a.Tensor){c.assert(2===o.rank,"Input to renderHeatmap must be a 2d array or Tensor2d");const t=yield o.data(),[e,n]=o.shape;for(let r=0;r<e;r++){const e=h?`${h[r]}${m}${r}`:r;for(let i=0;i<n;i++){const o=g?`${g[i]}${m}${i}`:i,a=r*n+i,s=t[a];v.push({x:e,y:o,value:s})}}}else{const t=o;for(let e=0;e<t.length;e++){const n=h?`${h[e]}${m}${e}`:e;for(let r=0;r<t[e].length;r++){const i=g?`${g[r]}${m}${r}`:r,o=t[e][r];v.push({x:n,y:i,value:o})}}}const y={actions:!1,mode:"vega-lite",defaultStyle:!1},b={width:r.width||u.getDefaultWidth(i),height:r.height||u.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},text:{fontSize:r.fontSize},legend:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:v},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:r.xType,title:r.xLabel,sort:"x"},y:{field:"y",type:r.yType,title:r.yLabel,sort:"y"},fill:{field:"value",type:"quantitative"}}},x=m+"\\d+$",w=new RegExp(x);let _;switch(h&&(b.encoding.x.axis={labelExpr:`replace(datum.value, regexp(/${x}/), '')`}),g&&(b.encoding.y.axis={labelExpr:`replace(datum.value, regexp(/${x}/), '')`}),(h||g)&&(y.tooltip={sanitize:t=>{const e=String(t);return e.replace(w,"")}}),r.colorMap){case"blues":_=["#f7fbff","#4292c6"];break;case"greyscale":_=["#000000","#ffffff"];break;case"viridis":default:_="viridis";break}if("viridis"!==_){const t=b.encoding.fill;t.scale={range:_}}if(r.domain){const t=b.encoding.fill;null!=t.scale?t.scale=Object.assign({},t.scale,{domain:r.domain}):t.scale={domain:r.domain}}yield s.default(i,b,y)}))}function f(t){return r(this,void 0,void 0,(function*(){let e,n;t instanceof a.Tensor?(e=t.shape,n=t.transpose()):(e=[t.length,t[0].length],n=a.tidy(()=>a.tensor2d(t).transpose())),c.assert(2===n.rank,"Input to renderHeatmap must be a 2d array or Tensor2d");const r=yield n.array();n.dispose();const i=[r.length,r[0].length];return c.assert(e[0]===i[1]&&e[1]===i[0],`Unexpected transposed shape. Original ${e} : Transposed ${i}`),r}))}function d(t,e,n){const r=t instanceof a.Tensor?t.shape:[t.length,t[0].length];0===n?c.assert(r[0]===e.length,`Length of xTickLabels (${e.length}) must match number of rows (${r[0]})`):1===n&&c.assert(r[1]===e.length,`Length of yTickLabels (${e.length}) must match number of columns (${r[1]})`)}e.heatmap=h;const p={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1}},bd6b:function(t,e,n){var r=n("06ad"),i=n("4942"),o=n("6d8b"),a=o.isString,s=o.isFunction,u=o.isObject,c=o.isArrayLike,l=o.indexOf,h=function(){this.animators=[]};function f(t,e,n,r,i,o,u,c){a(r)?(o=i,i=r,r=0):s(i)?(o=i,i="linear",r=0):s(r)?(o=r,r=0):s(n)?(o=n,n=500):n||(n=500),t.stopAnimation(),d(t,"",t,e,n,r,c);var l=t.animators.slice(),h=l.length;function f(){h--,h||o&&o()}h||o&&o();for(var p=0;p<l.length;p++)l[p].done(f).start(i,u)}function d(t,e,n,r,i,o,a){var s={},l=0;for(var h in r)r.hasOwnProperty(h)&&(null!=n[h]?u(r[h])&&!c(r[h])?d(t,e?e+"."+h:h,n[h],r[h],i,o,a):(a?(s[h]=n[h],p(t,e,h,r[h])):s[h]=r[h],l++):null==r[h]||a||p(t,e,h,r[h]));l>0&&t.animate(e,!1).when(null==i?500:i,s).delay(o||0)}function p(t,e,n,r){if(e){var i={};i[e]={},i[e][n]=r,t.attr(i)}else t.attr(n,r)}h.prototype={constructor:h,animate:function(t,e){var n,o=!1,a=this,s=this.__zr;if(t){var u=t.split("."),c=a;o="shape"===u[0];for(var h=0,f=u.length;h<f;h++)c&&(c=c[u[h]]);c&&(n=c)}else n=a;if(n){var d=a.animators,p=new r(n,e);return p.during((function(t){a.dirty(o)})).done((function(){d.splice(l(d,p),1)})),d.push(p),s&&s.animation.addAnimator(p),p}i('Property "'+t+'" is not existed in element '+a.id)},stopAnimation:function(t){for(var e=this.animators,n=e.length,r=0;r<n;r++)e[r].stop(t);return e.length=0,this},animateTo:function(t,e,n,r,i,o){f(this,t,e,n,r,i,o)},animateFrom:function(t,e,n,r,i,o){f(this,t,e,n,r,i,o,!0)}};var g=h;t.exports=g},bda7:function(t,e,n){var r=n("6d8b"),i=n("f279");function o(t){if(!t.UTF8Encoding)return t;var e=t.UTF8Scale;null==e&&(e=1024);for(var n=t.features,r=0;r<n.length;r++)for(var i=n[r],o=i.geometry,s=o.coordinates,u=o.encodeOffsets,c=0;c<s.length;c++){var l=s[c];if("Polygon"===o.type)s[c]=a(l,u[c],e);else if("MultiPolygon"===o.type)for(var h=0;h<l.length;h++){var f=l[h];l[h]=a(f,u[c][h],e)}}return t.UTF8Encoding=!1,t}function a(t,e,n){for(var r=[],i=e[0],o=e[1],a=0;a<t.length;a+=2){var s=t.charCodeAt(a)-64,u=t.charCodeAt(a+1)-64;s=s>>1^-(1&s),u=u>>1^-(1&u),s+=i,u+=o,i=s,o=u,r.push([s/n,u/n])}return r}function s(t,e){return o(t),r.map(r.filter(t.features,(function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0})),(function(t){var n=t.properties,o=t.geometry,a=o.coordinates,s=[];"Polygon"===o.type&&s.push({type:"polygon",exterior:a[0],interiors:a.slice(1)}),"MultiPolygon"===o.type&&r.each(a,(function(t){t[0]&&s.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})}));var u=new i(n[e||"name"],s,n.cp);return u.properties=n,u}))}t.exports=s},bdcf:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"f",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return h}));var r=n("fa11");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function i(t,e){return o(t,e)}function o(t,e,n=new Map,r=new Set){if(null==t)return null;if(r.has(t))throw new Error("Circular references are not supported.");if(n.has(t))return n.get(t);const i=e(t);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(l(t)){const i=Array.isArray(t)?[]:{};r.add(t);for(const a in t){const s=t[a],u=o(s,e,n,r);i[a]=u}return r.delete(t),i}throw new Error("Can't recurse into non-iterable type: "+t)}return n.set(t,i.value),i.value}function a(t,e=u){return s(t,e)}function s(t,e,n=new Set){const r=t[0];if(n.has(r))throw new Error("Circular references are not supported.");const i=e(t);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(l(r)){const i=Array.isArray(r)?[]:{};n.add(r);for(const o in r){const r=t.map(t=>t[o]),a=s(r,e,n);i[o]=a}return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: "+r)}return i.value}function u(t){return null===t?null:l(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}async function c(t,e){const n=new Map;o(t,e,n);for(const i of Array.from(n.keys())){const t=n.get(i);if(t instanceof Promise){const e=await t;n.set(i,e)}}const r=o(t,e,n);return r}function l(t){return null!=t&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||"object"===typeof t&&!(t instanceof r["Zc"]))}function h(t){return null==t||f(t)||Array.isArray(t)||"object"===typeof t&&t instanceof r["Zc"]||r["bi"].isTypedArray(t)}function f(t){return null===t||"object"!==typeof t&&"function"!==typeof t}},bee2:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},bf6d:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.PluginSet=h,e.fallbacks=f,e.contentWrap=p,e.prefixes=g;var i=n("320c"),o=c(i),a=n("9ac2"),s=n("b86c"),u=c(s);function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t){return"development"===t||!t}("production");function h(t){this.fns=t||[]}function f(t){var e=Object.keys(t.style).map((function(e){return Array.isArray(t.style[e])})).indexOf(!0)>=0;if(e){var n=t.style,r=Object.keys(n).reduce((function(t,e){return t[e]=Array.isArray(n[e])?n[e].join("; "+(0,a.processStyleName)(e)+": "):n[e],t}),{});return(0,o.default)({},t,{style:r})}return t}(0,o.default)(h.prototype,{add:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){t.fns.indexOf(e)>=0?l&&console.warn("adding the same plugin again, ignoring"):t.fns=[e].concat(t.fns)}))},remove:function(t){this.fns=this.fns.filter((function(e){return e!==t}))},clear:function(){this.fns=[]},transform:function(t){return this.fns.reduce((function(t,e){return e(t)}),t)}});var d=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"];function p(t){if(t.style.content){var e=t.style.content;return d.indexOf(e)>=0||/^(attr|calc|counters?|url)\(/.test(e)?t:e.charAt(0)!==e.charAt(e.length-1)||'"'!==e.charAt(0)&&"'"!==e.charAt(0)?r({},t,{style:r({},t.style,{content:'"'+e+'"'})}):t}return t}function g(t){return(0,o.default)({},t,{style:(0,u.default)(r({},t.style))})}},c04e:function(t,e,n){var r=n("861d");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},c05b:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return h})),n.d(e,"j",(function(){return f})),n.d(e,"k",(function(){return d})),n.d(e,"l",(function(){return p})),n.d(e,"n",(function(){return g})),n.d(e,"m",(function(){return m})),n.d(e,"o",(function(){return v})),n.d(e,"r",(function(){return y})),n.d(e,"p",(function(){return b})),n.d(e,"q",(function(){return x})),n.d(e,"s",(function(){return w})),n.d(e,"t",(function(){return _})),n.d(e,"u",(function(){return O})),n.d(e,"v",(function(){return S})),n.d(e,"w",(function(){return C})),n.d(e,"x",(function(){return k})),n.d(e,"y",(function(){return A})),n.d(e,"z",(function(){return T})),n.d(e,"A",(function(){return E})),n.d(e,"B",(function(){return j})),n.d(e,"C",(function(){return D})),n.d(e,"D",(function(){return M})),n.d(e,"E",(function(){return N})),n.d(e,"F",(function(){return I})),n.d(e,"G",(function(){return R})),n.d(e,"H",(function(){return F})),n.d(e,"J",(function(){return P})),n.d(e,"I",(function(){return $})),n.d(e,"K",(function(){return L})),n.d(e,"L",(function(){return z})),n.d(e,"M",(function(){return B})),n.d(e,"N",(function(){return U})),n.d(e,"O",(function(){return W})),n.d(e,"P",(function(){return V})),n.d(e,"R",(function(){return H})),n.d(e,"Q",(function(){return q})),n.d(e,"S",(function(){return G})),n.d(e,"T",(function(){return X})),n.d(e,"U",(function(){return Y})),n.d(e,"W",(function(){return K})),n.d(e,"V",(function(){return Z})),n.d(e,"X",(function(){return J})),n.d(e,"Y",(function(){return Q})),n.d(e,"Z",(function(){return tt})),n.d(e,"ab",(function(){return et})),n.d(e,"bb",(function(){return nt})),n.d(e,"cb",(function(){return rt})),n.d(e,"db",(function(){return it})),n.d(e,"fb",(function(){return ot})),n.d(e,"jb",(function(){return at})),n.d(e,"ib",(function(){return st})),n.d(e,"kb",(function(){return ut})),n.d(e,"lb",(function(){return ct})),n.d(e,"nb",(function(){return lt})),n.d(e,"mb",(function(){return ht})),n.d(e,"ob",(function(){return ft})),n.d(e,"pb",(function(){return dt})),n.d(e,"qb",(function(){return pt})),n.d(e,"rb",(function(){return gt})),n.d(e,"ub",(function(){return mt})),n.d(e,"vb",(function(){return vt})),n.d(e,"wb",(function(){return yt})),n.d(e,"xb",(function(){return bt})),n.d(e,"yb",(function(){return xt})),n.d(e,"Ab",(function(){return wt})),n.d(e,"Bb",(function(){return _t})),n.d(e,"Cb",(function(){return Ot})),n.d(e,"zb",(function(){return St})),n.d(e,"sb",(function(){return Ct})),n.d(e,"tb",(function(){return kt})),n.d(e,"Db",(function(){return At})),n.d(e,"Jb",(function(){return Tt})),n.d(e,"Eb",(function(){return Et})),n.d(e,"Hb",(function(){return jt})),n.d(e,"Fb",(function(){return Dt})),n.d(e,"Gb",(function(){return Mt})),n.d(e,"Ib",(function(){return Nt})),n.d(e,"Kb",(function(){return It})),n.d(e,"Lb",(function(){return Rt})),n.d(e,"Mb",(function(){return Ft})),n.d(e,"Nb",(function(){return Pt})),n.d(e,"Ob",(function(){return $t})),n.d(e,"Pb",(function(){return Lt})),n.d(e,"Tb",(function(){return zt})),n.d(e,"Qb",(function(){return Bt})),n.d(e,"Rb",(function(){return Ut})),n.d(e,"Sb",(function(){return Wt})),n.d(e,"Vb",(function(){return Vt})),n.d(e,"Ub",(function(){return Ht})),n.d(e,"Wb",(function(){return qt})),n.d(e,"Xb",(function(){return Gt})),n.d(e,"Yb",(function(){return Xt})),n.d(e,"Zb",(function(){return Yt})),n.d(e,"ac",(function(){return Kt})),n.d(e,"bc",(function(){return Zt})),n.d(e,"cc",(function(){return Jt})),n.d(e,"dc",(function(){return Qt})),n.d(e,"ec",(function(){return te})),n.d(e,"gc",(function(){return ee})),n.d(e,"jc",(function(){return ne})),n.d(e,"kc",(function(){return re})),n.d(e,"hc",(function(){return ie})),n.d(e,"ic",(function(){return oe})),n.d(e,"fc",(function(){return ae})),n.d(e,"lc",(function(){return se})),n.d(e,"nc",(function(){return ue})),n.d(e,"oc",(function(){return ce})),n.d(e,"pc",(function(){return le})),n.d(e,"qc",(function(){return he})),n.d(e,"rc",(function(){return fe})),n.d(e,"wc",(function(){return de})),n.d(e,"uc",(function(){return pe})),n.d(e,"vc",(function(){return ge})),n.d(e,"tc",(function(){return me})),n.d(e,"sc",(function(){return ve})),n.d(e,"yc",(function(){return ye})),n.d(e,"Cc",(function(){return be})),n.d(e,"Ic",(function(){return xe})),n.d(e,"zc",(function(){return we})),n.d(e,"Bc",(function(){return _e})),n.d(e,"xc",(function(){return Oe})),n.d(e,"Ec",(function(){return Se})),n.d(e,"Dc",(function(){return Ce})),n.d(e,"Hc",(function(){return ke})),n.d(e,"Ac",(function(){return Ae})),n.d(e,"Gc",(function(){return Te})),n.d(e,"Jc",(function(){return Ee})),n.d(e,"Kc",(function(){return je})),n.d(e,"Lc",(function(){return De})),n.d(e,"Mc",(function(){return Me})),n.d(e,"Nc",(function(){return Ne})),n.d(e,"Oc",(function(){return Ie})),n.d(e,"Pc",(function(){return Re})),n.d(e,"Qc",(function(){return Fe})),n.d(e,"Fc",(function(){return Pe})),n.d(e,"eb",(function(){return $e})),n.d(e,"mc",(function(){return Le})),n.d(e,"Rc",(function(){return ze})),n.d(e,"gb",(function(){return Be})),n.d(e,"hb",(function(){return Ue}));const r="Abs",i="Acos",o="Acosh",a="Add",s="AddN",u="All",c="Any",l="ArgMax",h="ArgMin",f="Asin",d="Asinh",p="Atan",g="Atanh",m="Atan2",v="AvgPool",y="AvgPoolBackprop",b="AvgPool3D",x="AvgPool3DBackprop",w="BatchMatMul",_="BatchToSpaceND",O="BroadcastTo",S="Cast",C="Ceil",k="ClipByValue",A="Complex",T="Concat",E="Conv2D",j="Conv2DBackpropFilter",D="Conv2DBackpropInput",M="Conv3D",N="Conv3DBackpropFilterV2",I="Conv3DBackpropInputV2",R="Cos",F="Cosh",P="Cumsum",$="CropAndResize",L="DepthToSpace",z="DepthwiseConv2dNative",B="DepthwiseConv2dNativeBackpropFilter",U="DepthwiseConv2dNativeBackpropInput",W="Diag",V="Dilation2D",H="Dilation2DBackpropInput",q="Dilation2DBackpropFilter",G="Div",X="Elu",Y="EluGrad",K="Erf",Z="Equal",J="Exp",Q="Expm1",tt="FFT",et="Fill",nt="FlipLeftRight",rt="Floor",it="FloorDiv",ot="FusedBatchNorm",at="GatherV2",st="GatherNd",ut="Greater",ct="GreaterEqual",lt="Identity",ht="IFFT",ft="Imag",dt="IsFinite",pt="IsInf",gt="IsNan",mt="Less",vt="LessEqual",yt="LinSpace",bt="Log",xt="Log1p",wt="LogicalAnd",_t="LogicalNot",Ot="LogicalOr",St="LogSoftmax",Ct="LRN",kt="LRNBackprop",At="Max",Tt="Maximum",Et="MaxPool",jt="MaxPoolBackprop",Dt="MaxPool3D",Mt="MaxPool3DBackprop",Nt="MaxPoolWithArgmax",It="Mean",Rt="Min",Ft="Minimum",Pt="Mod",$t="Multiply",Lt="Negate",zt="NotEqual",Bt="NonMaxSuppressionV3",Ut="NonMaxSuppressionV4",Wt="NonMaxSuppressionV5",Vt="OnesLike",Ht="OneHot",qt="PadV2",Gt="Pool",Xt="Pow",Yt="Prelu",Kt="Prod",Zt="Range",Jt="Real",Qt="Reciprocal",te="Relu",ee="Reshape",ne="ResizeNearestNeighbor",re="ResizeNearestNeighborGrad",ie="ResizeBilinear",oe="ResizeBilinearGrad",ae="Relu6",se="Reverse",ue="Round",ce="Rsqrt",le="ScatterNd",he="SelectV2",fe="Selu",de="Slice",pe="Sin",ge="Sinh",me="Sign",ve="Sigmoid",ye="Softplus",be="Sqrt",xe="Sum",we="SpaceToBatchND",_e="SplitV",Oe="Softmax",Se="SquaredDifference",Ce="Square",ke="Sub",Ae="SparseToDense",Te="StridedSlice",Ee="Tan",je="Tanh",De="Tile",Me="TopK",Ne="Transpose",Ie="Unpack",Re="UnsortedSegmentSum",Fe="ZerosLike",Pe="Step",$e="FromPixels",Le="RotateWithOffset",ze="_FusedMatMul",Be="FusedConv2D",Ue="FusedDepthwiseConv2D"},c2be:function(t,e,n){var r=n("2306"),i=r.extendShape,o=i({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=.5*(o-i),s=i+a,u=e.startAngle,c=e.endAngle,l=e.clockwise,h=Math.cos(u),f=Math.sin(u),d=Math.cos(c),p=Math.sin(c),g=l?c-u<2*Math.PI:u-c<2*Math.PI;g&&(t.moveTo(h*i+n,f*i+r),t.arc(h*s+n,f*s+r,a,-Math.PI+u,u,!l)),t.arc(n,r,o,u,c,!l),t.moveTo(d*o+n,p*o+r),t.arc(d*s+n,p*s+r,a,c-2*Math.PI,c-Math.PI,!l),0!==i&&(t.arc(n,r,i,c,u,l),t.moveTo(h*i+n,p*i+r)),t.closePath()}});t.exports=o},c2d5:function(t,e,n){const r=n("bbfd"),i=(t,e)=>new r(t,e).minor;t.exports=i},c388:function(t,e,n){"use strict";n.d(e,"f",(function(){return h})),n.d(e,"e",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return r}));var r,i=n("fa11"),o=n("6125"),a=n("bdcf");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
function s(t){return Object(a["b"])(t,u)}function u(t){return t instanceof i["Zc"]?{value:t.clone(),recurse:!1}:Object(a["e"])(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class c{constructor(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}wrap(t){while(t<0)t+=this.doubledCapacity;return t%this.doubledCapacity}get(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]}set(t,e){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e}length(){let t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)}pushAll(t){for(const e of t)this.push(e)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const t=this.get(this.end);return this.set(this.end,void 0),t}unshift(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t}shuffleExcise(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class l extends c{constructor(){super(l.INITIAL_CAPACITY)}isFull(){return!1}push(t){super.isFull()&&this.expand(),super.push(t)}unshift(t){super.isFull()&&this.expand(),super.unshift(t)}expand(){const t=2*this.capacity,e=new Array(t),n=this.length();for(let r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
function h(t){return new m(t)}function f(t){return new v(t)}function d(t,e){return new T(t,e)}function p(t,e=r.FAIL){return new E(t,e)}l.INITIAL_CAPACITY=32;class g{async toArray(){const t=[];let e=await this.next();while(!e.done)t.push(e.value),e=await this.next();return t}async toArrayForTest(){const t=this.prefetch(100),e=[];let n=await t.next();while(!n.done)e.push(n.value),n=await t.next();return e}async resolveFully(){let t=await this.next();while(!t.done)t=await this.next()}async resolveWhile(t){let e=await this.next(),n=t(e.value);while(!e.done&&n)e=await this.next(),n=t(e.value)}handleErrors(t){return new S(this,t)}filter(t){return new _(this,t)}map(t){return new O(this,t)}mapAsync(t){return new C(this,t)}serialMapAsync(t){return new C(this,t).serial()}flatmap(t){return new A(this,t)}async forEachAsync(t){return this.map(t).resolveFully()}async serialForEach(t){return this.serialMapAsync(t).resolveWhile(t=>!0===t)}rowMajorBatch(t,e=!0){return new w(this,t,e)}columnMajorBatch(t,e=!0,n=a["f"]){const r=this.rowMajorBatch(t,e);return r.map(t=>Object(a["d"])(t,n))}concatenate(t,e){return new T(h([this,t]),e)}take(t){return t<0||null==t?this:new x(this,t)}skip(t){return t<0||null==t?this:new b(this,t)}prefetch(t){return new j(this,t)}shuffle(t,e){return new D(this,t,e)}serial(){return new y(this)}}class m extends g{constructor(t){super(),this.items=t,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const t=this.items[this.trav];return this.trav++,{value:s(t),done:!1}}}class v extends g{constructor(t){super(),this.nextFn=t}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(t){throw t.message="Error thrown while iterating through a dataset: "+t.message,t}}}class y extends g{constructor(t){super(),this.upstream=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Serial"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class b extends g{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Skip"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(this.count++<this.maxCount){const t=await this.upstream.next();if(t.done)return t;i["ne"](t.value)}return this.upstream.next()}}class x extends g{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0}summary(){return this.upstream.summary()+" -> Take"}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class w extends g{constructor(t,e,n=!0){super(),this.upstream=t,this.batchSize=e,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> RowMajorBatch"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const t=[];while(t.length<this.batchSize){const e=await this.upstream.next();if(e.done)return this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0};t.push(e.value)}return{value:t,done:!1}}}class _ extends g{constructor(t,e){super(),this.upstream=t,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Filter"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(1){const t=await this.upstream.next();if(t.done||this.predicate(t.value))return t;i["ne"](t.value)}}}class O extends g{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> Map"}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=i["Nh"].getTensorsInContainer(t.value),n=this.transform(t.value),r=i["Nh"].getTensorsInContainer(n);for(const o of e)i["Nh"].isTensorInList(o,r)||o.dispose();return{value:n,done:!1}}}class S extends g{constructor(t,e){super(),this.upstream=t,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> handleErrors"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(1)try{return await this.upstream.next()}catch(t){if(!this.handler(t))return{value:null,done:!0}}}}class C extends g{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> AsyncMap"}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=i["Nh"].getTensorsInContainer(t.value),n=await this.transform(t.value),r=i["Nh"].getTensorsInContainer(n);for(const o of e)i["Nh"].isTensorInList(o,r)||o.dispose();return{value:n,done:!1}}}class k extends g{constructor(){super(),this.outputQueue=new l,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(0===this.outputQueue.length())if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class A extends k{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> Flatmap"}async pump(){const t=await this.upstream.next();if(t.done)return!1;const e=i["Nh"].getTensorsInContainer(t.value),n=this.transform(t.value),r=i["Nh"].getTensorsInContainer(n);this.outputQueue.pushAll(n);for(const o of e)i["Nh"].isTensorInList(o,r)||o.dispose();return!0}}class T extends g{constructor(t,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=t}summary(){const t="TODO: fill in upstream of chained summaries";return t+" -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(t){if(await t,null==this.iterator){const t=await this.moreIterators.next();if(t.done)return{value:null,done:!0};this.iterator=t.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const e=await this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(t)):e}}(function(t){t[t["FAIL"]=0]="FAIL",t[t["SHORTEST"]=1]="SHORTEST",t[t["LONGEST"]=2]="LONGEST"})(r||(r={}));class E extends g{constructor(t,e=r.FAIL){super(),this.iterators=t,this.mismatchMode=e,this.count=0,this.currentPromise=null}summary(){const t="TODO: fill in upstream of zip summaries";return`{${t}} -> Zip`}async nextState(t){await t;let e=0,n=0;function i(t){if(t instanceof g){const r=t.next();return{value:r.then(t=>(e++,t.done&&n++,t.value)),recurse:!1}}return{value:null,recurse:!0}}const o=await Object(a["c"])(this.iterators,i);if(e===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case r.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case r.SHORTEST:return{value:null,done:!0};case r.LONGEST:default:}return this.count++,{value:o,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class j extends g{constructor(t,e){super(),this.upstream=t,this.bufferSize=e,this.buffer=new c(e)}summary(){return this.upstream.summary()+" -> Prefetch"}refill(){while(!this.buffer.isFull()){const t=this.upstream.next();this.buffer.push(t)}}next(){return this.refill(),this.buffer.shift()}}class D extends j{constructor(t,e,n){super(t,e),this.upstream=t,this.windowSize=e,this.upstreamExhausted=!1,this.random=o["alea"](n||i["bi"].now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(t){return Math.floor(this.random()*t)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){this.upstreamExhausted||this.refill();while(!this.buffer.isEmpty()){const t=this.chooseIndex(),e=await this.buffer.shuffleExcise(t);if(!e.done)return this.refill(),e;this.upstreamExhausted=!0}return{value:null,done:!0}}}},c430:function(t,e){t.exports=!1},c4be:function(t,e,n){const r=n("4392"),i=n("f195"),o=n("bac4"),a=n("a2a3"),s=n("38fa"),u=n("68d3"),c=(t,e,n,c)=>{switch(e){case"===":return"object"===typeof t&&(t=t.version),"object"===typeof n&&(n=n.version),t===n;case"!==":return"object"===typeof t&&(t=t.version),"object"===typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return r(t,n,c);case"!=":return i(t,n,c);case">":return o(t,n,c);case">=":return a(t,n,c);case"<":return s(t,n,c);case"<=":return u(t,n,c);default:throw new TypeError("Invalid operator: "+e)}};t.exports=c},c533:function(t,e){var n=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],r={color:n,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],n]};t.exports=r},c628:function(t,e,n){const r=n("3fce"),{ANY:i}=n("6d43"),o=n("2a86"),a=n("3034"),s=(t,e,n)=>{t=new r(t,n),e=new r(e,n);let i=!1;t:for(const r of t.set){for(const t of e.set){const e=u(r,t,n);if(i=i||null!==e,e)continue t}if(i)return!1}return!0},u=(t,e,n)=>{if(1===t.length&&t[0].semver===i)return 1===e.length&&e[0].semver===i;const r=new Set;let s,u,h,f,d,p,g;for(const i of t)">"===i.operator||">="===i.operator?s=c(s,i,n):"<"===i.operator||"<="===i.operator?u=l(u,i,n):r.add(i.semver);if(r.size>1)return null;if(s&&u){if(h=a(s.semver,u.semver,n),h>0)return null;if(0===h&&(">="!==s.operator||"<="!==u.operator))return null}for(const i of r){if(s&&!o(i,String(s),n))return null;if(u&&!o(i,String(u),n))return null;for(const t of e)if(!o(i,String(t),n))return!1;return!0}for(const i of e){if(g=g||">"===i.operator||">="===i.operator,p=p||"<"===i.operator||"<="===i.operator,s)if(">"===i.operator||">="===i.operator){if(f=c(s,i,n),f===i)return!1}else if(">="===s.operator&&!o(s.semver,String(i),n))return!1;if(u)if("<"===i.operator||"<="===i.operator){if(d=l(u,i,n),d===i)return!1}else if("<="===u.operator&&!o(u.semver,String(i),n))return!1;if(!i.operator&&(u||s)&&0!==h)return!1}return!(s&&p&&!u&&0!==h)&&!(u&&g&&!s&&0!==h)},c=(t,e,n)=>{if(!t)return e;const r=a(t.semver,e.semver,n);return r>0?t:r<0||">"===e.operator&&">="===t.operator?e:t},l=(t,e,n)=>{if(!t)return e;const r=a(t.semver,e.semver,n);return r<0?t:r>0||"<"===e.operator&&"<="===t.operator?e:t};t.exports=s},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},c775:function(t,e,n){var r=n("2b17"),i=r.retrieveRawValue;function o(t,e){var n=t.mapDimension("defaultedLabel",!0),r=n.length;if(1===r)return i(t,e,n[0]);if(r){for(var o=[],a=0;a<n.length;a++){var s=i(t,e,n[a]);o.push(s)}return o.join(" ")}}e.getDefaultLabel=o},c7a2:function(t,e,n){var r=n("cbe5"),i=n("5693"),o=n("9cf9"),a=o.subPixelOptimizeRect,s={},u=r.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n,r,o,u;this.subPixelOptimize?(a(s,e,this.style),n=s.x,r=s.y,o=s.width,u=s.height,s.r=e.r,e=s):(n=e.x,r=e.y,o=e.width,u=e.height),e.r?i.buildPath(t,e):t.rect(n,r,o,u),t.closePath()}});t.exports=u},c8ad:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},c975:function(t,e,n){"use strict";var r=n("23e7"),i=n("4d64").indexOf,o=n("a640"),a=n("ae40"),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(t){return u?s.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},ca84:function(t,e,n){var r=n("5135"),i=n("fc6a"),o=n("4d64").indexOf,a=n("d012");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);while(e.length>u)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},ca98:function(t,e,n){var r=n("6d8b"),i=n("e0d3"),o=n("6cb7"),a=r.each,s=r.clone,u=r.map,c=r.merge,l=/^(min|max)?(.+)$/;function h(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function f(t,e,n){var i,o,s=[],u=[],c=t.timeline;if(t.baseOption&&(o=t.baseOption),(c||t.options)&&(o=o||{},s=(t.options||[]).slice()),t.media){o=o||{};var l=t.media;a(l,(function(t){t&&t.option&&(t.query?u.push(t):i||(i=t))}))}return o||(o=t),o.timeline||(o.timeline=c),a([o].concat(s).concat(r.map(u,(function(t){return t.option}))),(function(t){a(e,(function(e){e(t,n)}))})),{baseOption:o,timelineOptions:s,mediaDefault:i,mediaList:u}}function d(t,e,n){var i={width:e,height:n,aspectratio:e/n},o=!0;return r.each(t,(function(t,e){var n=e.match(l);if(n&&n[1]&&n[2]){var r=n[1],a=n[2].toLowerCase();p(i[a],t,r)||(o=!1)}})),o}function p(t,e,n){return"min"===n?t>=e:"max"===n?t<=e:t===e}function g(t,e){return t.join(",")===e.join(",")}function m(t,e){e=e||{},a(e,(function(e,n){if(null!=e){var r=t[n];if(o.hasClass(n)){e=i.normalizeToArray(e),r=i.normalizeToArray(r);var a=i.mappingToExists(r,e);t[n]=u(a,(function(t){return t.option&&t.exist?c(t.exist,t.option,!0):t.exist||t.option}))}else t[n]=c(r,e,!0)}}))}h.prototype={constructor:h,setOption:function(t,e){t&&r.each(i.normalizeToArray(t.series),(function(t){t&&t.data&&r.isTypedArray(t.data)&&r.setAsPrimitive(t.data)})),t=s(t);var n=this._optionBackup,o=f.call(this,t,e,!n);this._newBaseOption=o.baseOption,n?(m(n.baseOption,o.baseOption),o.timelineOptions.length&&(n.timelineOptions=o.timelineOptions),o.mediaList.length&&(n.mediaList=o.mediaList),o.mediaDefault&&(n.mediaDefault=o.mediaDefault)):this._optionBackup=o},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=u(e.timelineOptions,s),this._mediaList=u(e.mediaList,s),this._mediaDefault=s(e.mediaDefault),this._currentMediaIndices=[],s(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,n=this._timelineOptions;if(n.length){var r=t.getComponent("timeline");r&&(e=s(n[r.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e=this._api.getWidth(),n=this._api.getHeight(),r=this._mediaList,i=this._mediaDefault,o=[],a=[];if(!r.length&&!i)return a;for(var c=0,l=r.length;c<l;c++)d(r[c].query,e,n)&&o.push(c);return!o.length&&i&&(o=[-1]),o.length&&!g(o,this._currentMediaIndices)&&(a=u(o,(function(t){return s(-1===t?i.option:r[t].option)}))),this._currentMediaIndices=o,a}};var v=h;t.exports=v},cada:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},i={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};function o(t,e,n){"flexDirection"===t&&"string"===typeof e&&(e.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",e.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal"),i.hasOwnProperty(t)&&(n[i[t]]=r[e]||e)}t.exports=e["default"]},cae0:function(t,e,n){(function(t){var r;(function(t,i,o){function a(t){var e=this;function n(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;while(r.length<8)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],t^=t>>>7,n=t^t<<24,t=r[i+1&7],n^=t^t>>>10,t=r[i+3&7],n^=t^t>>>3,t=r[i+4&7],n^=t^t<<7,t=r[i+7&7],t^=t<<13,n^=t^t<<9,r[i]=n,e.i=i+1&7,n},n(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xorshift7=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},cb11:function(t,e,n){var r=n("cbe5"),i=n("9cf9"),o=i.subPixelOptimizeLine,a={},s=r.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,r,i,s;this.subPixelOptimize?(o(a,e,this.style),n=a.x1,r=a.y1,i=a.x2,s=a.y2):(n=e.x1,r=e.y1,i=e.x2,s=e.y2);var u=e.percent;0!==u&&(t.moveTo(n,r),u<1&&(i=n*(1-u)+i*u,s=r*(1-u)+s*u),t.lineTo(i,s))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}});t.exports=s},cb29:function(t,e,n){var r=n("23e7"),i=n("81d5"),o=n("44d2");r({target:"Array",proto:!0},{fill:i}),o("fill")},cb6d:function(t,e){function n(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function r(t,e){return{target:t,topTarget:e&&e.topTarget}}n.prototype={constructor:n,_dragStart:function(t){var e=t.target;while(e&&!e.draggable)e=e.parent;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(r(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,o=n-this._x,a=i-this._y;this._x=n,this._y=i,e.drift(o,a,t),this.dispatchToElement(r(e,t),"drag",t.event);var s=this.findHover(n,i,e).target,u=this._dropTarget;this._dropTarget=s,e!==s&&(u&&s!==u&&this.dispatchToElement(r(u,t),"dragleave",t.event),s&&s!==u&&this.dispatchToElement(r(s,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(r(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(r(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var i=n;t.exports=i},cbe5:function(t,e,n){var r=n("19eb"),i=n("6d8b"),o=n("20c8"),a=n("d833"),s=n("dc2f"),u=s.prototype.getCanvasPattern,c=Math.abs,l=new o(!0);function h(t){r.call(this,t),this.path=null}h.prototype={constructor:h,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(t,e){var n,r=this.style,i=this.path||l,o=r.hasStroke(),a=r.hasFill(),s=r.fill,c=r.stroke,h=a&&!!s.colorStops,f=o&&!!c.colorStops,d=a&&!!s.image,p=o&&!!c.image;(r.bind(t,this,e),this.setTransform(t),this.__dirty)&&(h&&(n=n||this.getBoundingRect(),this._fillGradient=r.getGradient(t,s,n)),f&&(n=n||this.getBoundingRect(),this._strokeGradient=r.getGradient(t,c,n)));h?t.fillStyle=this._fillGradient:d&&(t.fillStyle=u.call(s,t)),f?t.strokeStyle=this._strokeGradient:p&&(t.strokeStyle=u.call(c,t));var g=r.lineDash,m=r.lineDashOffset,v=!!t.setLineDash,y=this.getGlobalScale();if(i.setScale(y[0],y[1],this.segmentIgnoreThreshold),this.__dirtyPath||g&&!v&&o?(i.beginPath(t),g&&!v&&(i.setLineDash(g),i.setLineDashOffset(m)),this.buildPath(i,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),a)if(null!=r.fillOpacity){var b=t.globalAlpha;t.globalAlpha=r.fillOpacity*r.opacity,i.fill(t),t.globalAlpha=b}else i.fill(t);if(g&&v&&(t.setLineDash(g),t.lineDashOffset=m),o)if(null!=r.strokeOpacity){b=t.globalAlpha;t.globalAlpha=r.strokeOpacity*r.opacity,i.stroke(t),t.globalAlpha=b}else i.stroke(t);g&&v&&t.setLineDash([]),null!=r.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new o},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var r=this.path;r||(r=this.path=new o),this.__dirtyPath&&(r.beginPath(),this.buildPath(r,this.shape,!1)),t=r.getBoundingRect()}if(this._rect=t,e.hasStroke()){var i=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){i.copy(t);var a=e.lineWidth,s=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(a=Math.max(a,this.strokeContainThreshold||4)),s>1e-10&&(i.width+=a/s,i.height+=a/s,i.x-=a/s/2,i.y-=a/s/2)}return i}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect(),i=this.style;if(t=n[0],e=n[1],r.contain(t,e)){var o=this.path.data;if(i.hasStroke()){var s=i.lineWidth,u=i.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(i.hasFill()||(s=Math.max(s,this.strokeContainThreshold)),a.containStroke(o,s/u,t,e)))return!0}if(i.hasFill())return a.contain(o,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):r.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(i.isObject(t))for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&c(t[0]-1)>1e-10&&c(t[3]-1)>1e-10?Math.sqrt(c(t[0]*t[3]-t[2]*t[1])):1}},h.extend=function(t){var e=function(e){h.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var r=this.shape;for(var i in n)!r.hasOwnProperty(i)&&n.hasOwnProperty(i)&&(r[i]=n[i])}t.init&&t.init.call(this,e)};for(var n in i.inherits(e,h),t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},i.inherits(h,r);var f=h;t.exports=f},cbe9:function(t,e,n){var r=n("6d8b"),i=n("9850"),o=n("cf7e");function a(t){o.call(this,t)}a.prototype={constructor:a,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,n){var r=this.getAxis("x"),i=this.getAxis("y");return n=n||[],n[0]=r.toGlobalCoord(r.dataToCoord(t[0])),n[1]=i.toGlobalCoord(i.dataToCoord(t[1])),n},clampData:function(t,e){var n=this.getAxis("x").scale,r=this.getAxis("y").scale,i=n.getExtent(),o=r.getExtent(),a=n.parse(t[0]),s=r.parse(t[1]);return e=e||[],e[0]=Math.min(Math.max(Math.min(i[0],i[1]),a),Math.max(i[0],i[1])),e[1]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),e},pointToData:function(t,e){var n=this.getAxis("x"),r=this.getAxis("y");return e=e||[],e[0]=n.coordToData(n.toLocalCoord(t[0])),e[1]=r.coordToData(r.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")},getArea:function(){var t=this.getAxis("x").getGlobalExtent(),e=this.getAxis("y").getGlobalExtent(),n=Math.min(t[0],t[1]),r=Math.min(e[0],e[1]),o=Math.max(t[0],t[1])-n,a=Math.max(e[0],e[1])-r,s=new i(n,r,o,a);return s}},r.inherits(a,o);var s=a;t.exports=s},cc12:function(t,e,n){var r=n("da84"),i=n("861d"),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},cca6:function(t,e,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cccd:function(t,e,n){var r=n("e0d3"),i=r.makeInner;function o(){var t=i();return function(e){var n=t(e),r=e.pipelineContext,i=n.large,o=n.progressiveRender,a=n.large=r&&r.large,s=n.progressiveRender=r&&r.progressiveRender;return!!(i^a||o^s)&&"reset"}}t.exports=o},cd33:function(t,e,n){var r=n("6d8b"),i=n("4319"),o=r.each,a=r.curry;function s(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return u(n,t,e),n.seriesInvolved&&l(n,t),n}function u(t,e,n){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),s=i.get("link",!0)||[],u=[];o(n.getCoordinateSystems(),(function(n){if(n.axisPointerEnabled){var l=v(n.model),f=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=n;var d=n.model,p=d.getModel("tooltip",r);if(o(n.getAxes(),a(x,!1,null)),n.getTooltipAxes&&r&&p.get("show")){var g="axis"===p.get("trigger"),y="cross"===p.get("axisPointer.type"),b=n.getTooltipAxes(p.get("axisPointer.axis"));(g||y)&&o(b.baseAxes,a(x,!y||"cross",g)),y&&o(b.otherAxes,a(x,"cross",!1))}}function x(r,o,a){var l=a.model.getModel("axisPointer",i),d=l.get("show");if(d&&("auto"!==d||r||m(l))){null==o&&(o=l.get("triggerTooltip")),l=r?c(a,p,i,e,r,o):l;var g=l.get("snap"),y=v(a.model),b=o||g||"category"===a.type,x=t.axesInfo[y]={key:y,axis:a,coordSys:n,axisPointerModel:l,triggerTooltip:o,involveSeries:b,snap:g,useHandle:m(l),seriesModels:[]};f[y]=x,t.seriesInvolved|=b;var w=h(s,a);if(null!=w){var _=u[w]||(u[w]={axesInfo:{}});_.axesInfo[y]=x,_.mapper=s[w].mapper,x.linkGroup=_}}}}))}function c(t,e,n,a,s,u){var c=e.getModel("axisPointer"),l={};o(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],(function(t){l[t]=r.clone(c.get(t))})),l.snap="category"!==t.type&&!!u,"cross"===c.get("type")&&(l.type="line");var h=l.label||(l.label={});if(null==h.show&&(h.show=!1),"cross"===s){var f=c.get("label.show");if(h.show=null==f||f,!u){var d=l.lineStyle=c.get("crossStyle");d&&r.defaults(h,d.textStyle)}}return t.model.getModel("axisPointer",new i(l,n,a))}function l(t,e){e.eachSeries((function(e){var n=e.coordinateSystem,r=e.get("tooltip.trigger",!0),i=e.get("tooltip.show",!0);n&&"none"!==r&&!1!==r&&"item"!==r&&!1!==i&&!1!==e.get("axisPointer.show",!0)&&o(t.coordSysAxesInfo[v(n.model)],(function(t){var r=t.axis;n.getAxis(r.dim)===r&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())}))}),this)}function h(t,e){for(var n=e.model,r=e.dim,i=0;i<t.length;i++){var o=t[i]||{};if(f(o[r+"AxisId"],n.id)||f(o[r+"AxisIndex"],n.componentIndex)||f(o[r+"AxisName"],n.name))return i}}function f(t,e){return"all"===t||r.isArray(t)&&r.indexOf(t,e)>=0||t===e}function d(t){var e=p(t);if(e){var n=e.axisPointerModel,r=e.axis.scale,i=n.option,o=n.get("status"),a=n.get("value");null!=a&&(a=r.parse(a));var s=m(n);null==o&&(i.status=s?"show":"hide");var u=r.getExtent().slice();u[0]>u[1]&&u.reverse(),(null==a||a>u[1])&&(a=u[1]),a<u[0]&&(a=u[0]),i.value=a,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function p(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[v(t)]}function g(t){var e=p(t);return e&&e.axisPointerModel}function m(t){return!!t.get("handle.show")}function v(t){return t.type+"||"+t.id}e.collect=s,e.fixValue=d,e.getAxisInfo=p,e.getAxisPointerModel=g,e.makeKey=v},cdaa:function(t,e,n){var r=n("607d"),i=r.addEventListener,o=r.removeEventListener,a=r.normalizeEvent,s=r.getNativeEvent,u=n("6d8b"),c=n("1fab"),l=n("22d1"),h=300,f=l.domSupported,d=function(){var t=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=u.map(t,(function(t){var e=t.replace("mouse","pointer");return n.hasOwnProperty(e)?e:t}));return{mouse:t,touch:e,pointer:r}}(),p={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]};function g(t){return"mousewheel"===t&&l.browser.firefox?"DOMMouseScroll":t}function m(t){var e=t.pointerType;return"pen"===e||"touch"===e}function v(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout((function(){t.touching=!1,t.touchTimer=null}),700)}function y(t){t&&(t.zrByTouch=!0)}function b(t,e){return a(t.dom,new w(t,e),!0)}function x(t,e){var n=e,r=!1;while(n&&9!==n.nodeType&&!(r=n.domBelongToZr||n!==e&&n===t.painterRoot))n=n.parentNode;return r}function w(t,e){this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}var _=w.prototype;_.stopPropagation=_.stopImmediatePropagation=_.preventDefault=u.noop;var O={mousedown:function(t){t=a(this.dom,t),this._mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=a(this.dom,t);var e=this._mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||E(this,!0),this.trigger("mousemove",t)},mouseup:function(t){t=a(this.dom,t),E(this,!1),this.trigger("mouseup",t)},mouseout:function(t){t=a(this.dom,t),this._pointerCapturing&&(t.zrEventControl="no_globalout");var e=t.toElement||t.relatedTarget;t.zrIsToLocalDOM=x(this,e),this.trigger("mouseout",t)},touchstart:function(t){t=a(this.dom,t),y(t),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),O.mousemove.call(this,t),O.mousedown.call(this,t)},touchmove:function(t){t=a(this.dom,t),y(t),this.handler.processGesture(t,"change"),O.mousemove.call(this,t)},touchend:function(t){t=a(this.dom,t),y(t),this.handler.processGesture(t,"end"),O.mouseup.call(this,t),+new Date-this._lastTouchMoment<h&&O.click.call(this,t)},pointerdown:function(t){O.mousedown.call(this,t)},pointermove:function(t){m(t)||O.mousemove.call(this,t)},pointerup:function(t){O.mouseup.call(this,t)},pointerout:function(t){m(t)||O.mouseout.call(this,t)}};u.each(["click","mousewheel","dblclick","contextmenu"],(function(t){O[t]=function(e){e=a(this.dom,e),this.trigger(t,e)}}));var S={pointermove:function(t){m(t)||S.mousemove.call(this,t)},pointerup:function(t){S.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this._pointerCapturing;E(this,!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function C(t,e){var n=e.domHandlers;l.pointerEventsSupported?u.each(d.pointer,(function(r){A(e,r,(function(e){n[r].call(t,e)}))})):(l.touchEventsSupported&&u.each(d.touch,(function(r){A(e,r,(function(i){n[r].call(t,i),v(e)}))})),u.each(d.mouse,(function(r){A(e,r,(function(i){i=s(i),e.touching||n[r].call(t,i)}))})))}function k(t,e){function n(n){function r(r){r=s(r),x(t,r.target)||(r=b(t,r),e.domHandlers[n].call(t,r))}A(e,n,r,{capture:!0})}l.pointerEventsSupported?u.each(p.pointer,n):l.touchEventsSupported||u.each(p.mouse,n)}function A(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,i(t.domTarget,g(e),n,r)}function T(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&o(t.domTarget,g(n),e[n],t.listenerOpts[n]);t.mounted={}}function E(t,e){if(t._mayPointerCapture=null,f&&t._pointerCapturing^e){t._pointerCapturing=e;var n=t._globalHandlerScope;e?k(t,n):T(n)}}function j(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function D(t,e){c.call(this),this.dom=t,this.painterRoot=e,this._localHandlerScope=new j(t,O),f&&(this._globalHandlerScope=new j(document,S)),this._pointerCapturing=!1,this._mayPointerCapture=null,C(this,this._localHandlerScope)}var M=D.prototype;M.dispose=function(){T(this._localHandlerScope),f&&T(this._globalHandlerScope)},M.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},u.mixin(D,c);var N=D;t.exports=N},cdf9:function(t,e,n){var r=n("825a"),i=n("861d"),o=n("f069");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},ce1a:function(t,e,n){"use strict";n.r(e),n.d(e,"AdadeltaOptimizer",(function(){return h["d"]})),n.d(e,"AdagradOptimizer",(function(){return h["e"]})),n.d(e,"AdamOptimizer",(function(){return h["f"]})),n.d(e,"AdamaxOptimizer",(function(){return h["g"]})),n.d(e,"MomentumOptimizer",(function(){return h["Wb"]})),n.d(e,"Optimizer",(function(){return h["fc"]})),n.d(e,"RMSPropOptimizer",(function(){return h["lc"]})),n.d(e,"SGDOptimizer",(function(){return h["Cc"]})),n.d(e,"Tensor",(function(){return h["Zc"]})),n.d(e,"TensorBuffer",(function(){return h["ad"]})),n.d(e,"Variable",(function(){return h["gd"]})),n.d(e,"Rank",(function(){return h["nc"]})),n.d(e,"sumOutType",(function(){return h["Dh"]})),n.d(e,"upcastType",(function(){return h["ai"]})),n.d(e,"abs",(function(){return h["jd"]})),n.d(e,"acos",(function(){return h["kd"]})),n.d(e,"acosh",(function(){return h["ld"]})),n.d(e,"add",(function(){return h["md"]})),n.d(e,"addN",(function(){return h["nd"]})),n.d(e,"all",(function(){return h["pd"]})),n.d(e,"any",(function(){return h["qd"]})),n.d(e,"argMax",(function(){return h["rd"]})),n.d(e,"argMin",(function(){return h["sd"]})),n.d(e,"asin",(function(){return h["td"]})),n.d(e,"asinh",(function(){return h["ud"]})),n.d(e,"atan",(function(){return h["vd"]})),n.d(e,"atan2",(function(){return h["wd"]})),n.d(e,"atanh",(function(){return h["xd"]})),n.d(e,"avgPool",(function(){return h["yd"]})),n.d(e,"avgPool3d",(function(){return h["zd"]})),n.d(e,"basicLSTMCell",(function(){return h["Cd"]})),n.d(e,"batchToSpaceND",(function(){return h["Hd"]})),n.d(e,"batchNorm",(function(){return h["Dd"]})),n.d(e,"batchNorm2d",(function(){return h["Ed"]})),n.d(e,"batchNorm3d",(function(){return h["Fd"]})),n.d(e,"batchNorm4d",(function(){return h["Gd"]})),n.d(e,"broadcastTo",(function(){return h["Jd"]})),n.d(e,"buffer",(function(){return h["Ld"]})),n.d(e,"cast",(function(){return h["Md"]})),n.d(e,"ceil",(function(){return h["Nd"]})),n.d(e,"clipByValue",(function(){return h["Od"]})),n.d(e,"clone",(function(){return h["Pd"]})),n.d(e,"complex",(function(){return h["Qd"]})),n.d(e,"concat",(function(){return h["Rd"]})),n.d(e,"concat1d",(function(){return h["Sd"]})),n.d(e,"concat2d",(function(){return h["Td"]})),n.d(e,"concat3d",(function(){return h["Ud"]})),n.d(e,"concat4d",(function(){return h["Vd"]})),n.d(e,"conv1d",(function(){return h["Wd"]})),n.d(e,"conv2d",(function(){return h["Xd"]})),n.d(e,"conv2dTranspose",(function(){return h["Yd"]})),n.d(e,"conv3d",(function(){return h["Zd"]})),n.d(e,"conv3dTranspose",(function(){return h["ae"]})),n.d(e,"cos",(function(){return h["be"]})),n.d(e,"cosh",(function(){return h["ce"]})),n.d(e,"cumsum",(function(){return h["ee"]})),n.d(e,"depthToSpace",(function(){return h["he"]})),n.d(e,"depthwiseConv2d",(function(){return h["ie"]})),n.d(e,"diag",(function(){return h["ke"]})),n.d(e,"dilation2d",(function(){return h["le"]})),n.d(e,"div",(function(){return h["pe"]})),n.d(e,"divNoNan",(function(){return h["qe"]})),n.d(e,"dot",(function(){return h["se"]})),n.d(e,"elu",(function(){return h["ue"]})),n.d(e,"equal",(function(){return h["Ae"]})),n.d(e,"erf",(function(){return h["Ce"]})),n.d(e,"exp",(function(){return h["De"]})),n.d(e,"expandDims",(function(){return h["Ee"]})),n.d(e,"expm1",(function(){return h["Fe"]})),n.d(e,"eye",(function(){return h["Ge"]})),n.d(e,"fft",(function(){return h["He"]})),n.d(e,"fill",(function(){return h["Ie"]})),n.d(e,"floor",(function(){return h["Le"]})),n.d(e,"floorDiv",(function(){return h["Me"]})),n.d(e,"gather",(function(){return h["Oe"]})),n.d(e,"greater",(function(){return h["Xe"]})),n.d(e,"greaterEqual",(function(){return h["Ye"]})),n.d(e,"ifft",(function(){return h["bf"]})),n.d(e,"imag",(function(){return h["cf"]})),n.d(e,"irfft",(function(){return h["gf"]})),n.d(e,"isFinite",(function(){return h["hf"]})),n.d(e,"isInf",(function(){return h["if"]})),n.d(e,"isNaN",(function(){return h["jf"]})),n.d(e,"leakyRelu",(function(){return h["mf"]})),n.d(e,"less",(function(){return h["nf"]})),n.d(e,"lessEqual",(function(){return h["of"]})),n.d(e,"linspace",(function(){return h["sf"]})),n.d(e,"localResponseNormalization",(function(){return h["tf"]})),n.d(e,"log",(function(){return h["uf"]})),n.d(e,"log1p",(function(){return h["vf"]})),n.d(e,"logSigmoid",(function(){return h["wf"]})),n.d(e,"logSoftmax",(function(){return h["xf"]})),n.d(e,"logSumExp",(function(){return h["yf"]})),n.d(e,"logicalAnd",(function(){return h["zf"]})),n.d(e,"logicalNot",(function(){return h["Af"]})),n.d(e,"logicalOr",(function(){return h["Bf"]})),n.d(e,"logicalXor",(function(){return h["Cf"]})),n.d(e,"matMul",(function(){return h["Ef"]})),n.d(e,"max",(function(){return h["Gf"]})),n.d(e,"maxPool",(function(){return h["Hf"]})),n.d(e,"maxPool3d",(function(){return h["If"]})),n.d(e,"maxPoolWithArgmax",(function(){return h["Jf"]})),n.d(e,"maximum",(function(){return h["Kf"]})),n.d(e,"mean",(function(){return h["Mf"]})),n.d(e,"min",(function(){return h["Of"]})),n.d(e,"minimum",(function(){return h["Pf"]})),n.d(e,"mod",(function(){return h["Rf"]})),n.d(e,"moments",(function(){return h["Tf"]})),n.d(e,"mul",(function(){return h["Vf"]})),n.d(e,"multiRNNCell",(function(){return h["Xf"]})),n.d(e,"multinomial",(function(){return h["Yf"]})),n.d(e,"neg",(function(){return h["Zf"]})),n.d(e,"notEqual",(function(){return h["cg"]})),n.d(e,"oneHot",(function(){return h["eg"]})),n.d(e,"ones",(function(){return h["fg"]})),n.d(e,"onesLike",(function(){return h["gg"]})),n.d(e,"outerProduct",(function(){return h["ig"]})),n.d(e,"pad",(function(){return h["jg"]})),n.d(e,"pad1d",(function(){return h["kg"]})),n.d(e,"pad2d",(function(){return h["lg"]})),n.d(e,"pad3d",(function(){return h["mg"]})),n.d(e,"pad4d",(function(){return h["ng"]})),n.d(e,"pool",(function(){return h["og"]})),n.d(e,"pow",(function(){return h["pg"]})),n.d(e,"prelu",(function(){return h["rg"]})),n.d(e,"print",(function(){return h["sg"]})),n.d(e,"prod",(function(){return h["tg"]})),n.d(e,"rand",(function(){return h["vg"]})),n.d(e,"randomGamma",(function(){return h["wg"]})),n.d(e,"randomNormal",(function(){return h["xg"]})),n.d(e,"randomUniform",(function(){return h["yg"]})),n.d(e,"range",(function(){return h["zg"]})),n.d(e,"real",(function(){return h["Bg"]})),n.d(e,"reciprocal",(function(){return h["Cg"]})),n.d(e,"relu",(function(){return h["Gg"]})),n.d(e,"relu6",(function(){return h["Hg"]})),n.d(e,"reshape",(function(){return h["Jg"]})),n.d(e,"reverse",(function(){return h["Kg"]})),n.d(e,"reverse1d",(function(){return h["Lg"]})),n.d(e,"reverse2d",(function(){return h["Mg"]})),n.d(e,"reverse3d",(function(){return h["Ng"]})),n.d(e,"reverse4d",(function(){return h["Og"]})),n.d(e,"rfft",(function(){return h["Pg"]})),n.d(e,"round",(function(){return h["Qg"]})),n.d(e,"rsqrt",(function(){return h["Rg"]})),n.d(e,"scalar",(function(){return h["Sg"]})),n.d(e,"selu",(function(){return h["Vg"]})),n.d(e,"separableConv2d",(function(){return h["Wg"]})),n.d(e,"setdiff1dAsync",(function(){return h["ah"]})),n.d(e,"sigmoid",(function(){return h["bh"]})),n.d(e,"sign",(function(){return h["ch"]})),n.d(e,"sin",(function(){return h["eh"]})),n.d(e,"sinh",(function(){return h["fh"]})),n.d(e,"slice",(function(){return h["gh"]})),n.d(e,"slice1d",(function(){return h["hh"]})),n.d(e,"slice2d",(function(){return h["ih"]})),n.d(e,"slice3d",(function(){return h["jh"]})),n.d(e,"slice4d",(function(){return h["kh"]})),n.d(e,"softmax",(function(){return h["mh"]})),n.d(e,"softplus",(function(){return h["nh"]})),n.d(e,"spaceToBatchND",(function(){return h["oh"]})),n.d(e,"split",(function(){return h["rh"]})),n.d(e,"sqrt",(function(){return h["sh"]})),n.d(e,"square",(function(){return h["th"]})),n.d(e,"squaredDifference",(function(){return h["uh"]})),n.d(e,"squeeze",(function(){return h["wh"]})),n.d(e,"stack",(function(){return h["xh"]})),n.d(e,"step",(function(){return h["yh"]})),n.d(e,"stridedSlice",(function(){return h["zh"]})),n.d(e,"sub",(function(){return h["Ah"]})),n.d(e,"sum",(function(){return h["Ch"]})),n.d(e,"tan",(function(){return h["Eh"]})),n.d(e,"tanh",(function(){return h["Fh"]})),n.d(e,"tensor",(function(){return h["Gh"]})),n.d(e,"tensor1d",(function(){return h["Hh"]})),n.d(e,"tensor2d",(function(){return h["Ih"]})),n.d(e,"tensor3d",(function(){return h["Jh"]})),n.d(e,"tensor4d",(function(){return h["Kh"]})),n.d(e,"tensor5d",(function(){return h["Lh"]})),n.d(e,"tensor6d",(function(){return h["Mh"]})),n.d(e,"tile",(function(){return h["Qh"]})),n.d(e,"topk",(function(){return h["Sh"]})),n.d(e,"truncatedNormal",(function(){return h["Vh"]})),n.d(e,"unsortedSegmentSum",(function(){return h["Yh"]})),n.d(e,"unstack",(function(){return h["Zh"]})),n.d(e,"variable",(function(){return h["ei"]})),n.d(e,"where",(function(){return h["hi"]})),n.d(e,"whereAsync",(function(){return h["ii"]})),n.d(e,"zeros",(function(){return h["ji"]})),n.d(e,"zerosLike",(function(){return h["ki"]})),n.d(e,"booleanMaskAsync",(function(){return h["Id"]})),n.d(e,"equalStrict",(function(){return h["Be"]})),n.d(e,"greaterEqualStrict",(function(){return h["Ze"]})),n.d(e,"greaterStrict",(function(){return h["af"]})),n.d(e,"lessEqualStrict",(function(){return h["pf"]})),n.d(e,"lessStrict",(function(){return h["qf"]})),n.d(e,"notEqualStrict",(function(){return h["dg"]})),n.d(e,"addStrict",(function(){return h["od"]})),n.d(e,"divStrict",(function(){return h["re"]})),n.d(e,"maximumStrict",(function(){return h["Lf"]})),n.d(e,"minimumStrict",(function(){return h["Qf"]})),n.d(e,"modStrict",(function(){return h["Sf"]})),n.d(e,"mulStrict",(function(){return h["Wf"]})),n.d(e,"powStrict",(function(){return h["qg"]})),n.d(e,"squaredDifferenceStrict",(function(){return h["vh"]})),n.d(e,"subStrict",(function(){return h["Bh"]})),n.d(e,"transpose",(function(){return h["Uh"]})),n.d(e,"norm",(function(){return h["bg"]})),n.d(e,"movingAverage",(function(){return h["Uf"]})),n.d(e,"scatterND",(function(){return h["Tg"]})),n.d(e,"sparseToDense",(function(){return h["ph"]})),n.d(e,"gatherND",(function(){return h["Pe"]})),n.d(e,"dropout",(function(){return h["te"]})),n.d(e,"enclosingPowerOfTwo",(function(){return h["xe"]})),n.d(e,"cosineWindow",(function(){return h["de"]})),n.d(e,"inTopKAsync",(function(){return h["ef"]})),n.d(e,"op",(function(){return h["hg"]})),n.d(e,"image",(function(){return h["df"]})),n.d(e,"linalg",(function(){return h["rf"]})),n.d(e,"losses",(function(){return h["Df"]})),n.d(e,"spectral",(function(){return h["qh"]})),n.d(e,"fused",(function(){return h["Ne"]})),n.d(e,"signal",(function(){return h["dh"]})),n.d(e,"Reduction",(function(){return h["qc"]})),n.d(e,"train",(function(){return h["Th"]})),n.d(e,"enableProdMode",(function(){return h["we"]})),n.d(e,"enableDebugMode",(function(){return h["ve"]})),n.d(e,"disableDeprecationWarnings",(function(){return h["me"]})),n.d(e,"deprecationWarn",(function(){return h["ge"]})),n.d(e,"disposeVariables",(function(){return h["oe"]})),n.d(e,"engine",(function(){return h["ye"]})),n.d(e,"memory",(function(){return h["Nf"]})),n.d(e,"profile",(function(){return h["ug"]})),n.d(e,"tidy",(function(){return h["Ph"]})),n.d(e,"dispose",(function(){return h["ne"]})),n.d(e,"keep",(function(){return h["kf"]})),n.d(e,"time",(function(){return h["Rh"]})),n.d(e,"setBackend",(function(){return h["Yg"]})),n.d(e,"ready",(function(){return h["Ag"]})),n.d(e,"getBackend",(function(){return h["Re"]})),n.d(e,"removeBackend",(function(){return h["Ig"]})),n.d(e,"findBackend",(function(){return h["Je"]})),n.d(e,"findBackendFactory",(function(){return h["Ke"]})),n.d(e,"registerBackend",(function(){return h["Dg"]})),n.d(e,"backend",(function(){return h["Ad"]})),n.d(e,"setPlatform",(function(){return h["Zg"]})),n.d(e,"getKernel",(function(){return h["Te"]})),n.d(e,"getGradient",(function(){return h["Se"]})),n.d(e,"getKernelsForBackend",(function(){return h["Ue"]})),n.d(e,"registerKernel",(function(){return h["Fg"]})),n.d(e,"registerGradient",(function(){return h["Eg"]})),n.d(e,"unregisterKernel",(function(){return h["Xh"]})),n.d(e,"unregisterGradient",(function(){return h["Wh"]})),n.d(e,"customGrad",(function(){return h["fe"]})),n.d(e,"grad",(function(){return h["Ve"]})),n.d(e,"grads",(function(){return h["We"]})),n.d(e,"valueAndGrad",(function(){return h["ci"]})),n.d(e,"valueAndGrads",(function(){return h["di"]})),n.d(e,"variableGrads",(function(){return h["fi"]})),n.d(e,"Environment",(function(){return h["bb"]})),n.d(e,"env",(function(){return h["ze"]})),n.d(e,"ENV",(function(){return h["Y"]})),n.d(e,"version_core",(function(){return h["gi"]})),n.d(e,"nextFrame",(function(){return h["ag"]})),n.d(e,"browser",(function(){return h["Kd"]})),n.d(e,"io",(function(){return h["ff"]})),n.d(e,"math",(function(){return h["Ff"]})),n.d(e,"serialization",(function(){return h["Xg"]})),n.d(e,"test_util",(function(){return h["Oh"]})),n.d(e,"util",(function(){return h["bi"]})),n.d(e,"backend_util",(function(){return h["Bd"]})),n.d(e,"tensor_util",(function(){return h["Nh"]})),n.d(e,"slice_util",(function(){return h["lh"]})),n.d(e,"gather_util",(function(){return h["Qe"]})),n.d(e,"scatter_util",(function(){return h["Ug"]})),n.d(e,"device_util",(function(){return h["je"]})),n.d(e,"kernel_impls",(function(){return h["lf"]})),n.d(e,"KernelBackend",(function(){return h["zb"]})),n.d(e,"DataStorage",(function(){return h["O"]})),n.d(e,"Abs",(function(){return h["a"]})),n.d(e,"Acos",(function(){return h["b"]})),n.d(e,"Acosh",(function(){return h["c"]})),n.d(e,"Add",(function(){return h["h"]})),n.d(e,"AddN",(function(){return h["i"]})),n.d(e,"All",(function(){return h["j"]})),n.d(e,"Any",(function(){return h["k"]})),n.d(e,"ArgMax",(function(){return h["l"]})),n.d(e,"ArgMin",(function(){return h["m"]})),n.d(e,"Asin",(function(){return h["n"]})),n.d(e,"Asinh",(function(){return h["o"]})),n.d(e,"Atan",(function(){return h["p"]})),n.d(e,"Atanh",(function(){return h["r"]})),n.d(e,"Atan2",(function(){return h["q"]})),n.d(e,"AvgPool",(function(){return h["s"]})),n.d(e,"AvgPoolBackprop",(function(){return h["v"]})),n.d(e,"AvgPool3D",(function(){return h["t"]})),n.d(e,"AvgPool3DBackprop",(function(){return h["u"]})),n.d(e,"BatchMatMul",(function(){return h["w"]})),n.d(e,"BatchToSpaceND",(function(){return h["x"]})),n.d(e,"BroadcastTo",(function(){return h["y"]})),n.d(e,"Cast",(function(){return h["z"]})),n.d(e,"Ceil",(function(){return h["A"]})),n.d(e,"ClipByValue",(function(){return h["B"]})),n.d(e,"Complex",(function(){return h["C"]})),n.d(e,"Concat",(function(){return h["D"]})),n.d(e,"Conv2D",(function(){return h["E"]})),n.d(e,"Conv2DBackpropFilter",(function(){return h["F"]})),n.d(e,"Conv2DBackpropInput",(function(){return h["G"]})),n.d(e,"Conv3D",(function(){return h["H"]})),n.d(e,"Conv3DBackpropFilterV2",(function(){return h["I"]})),n.d(e,"Conv3DBackpropInputV2",(function(){return h["J"]})),n.d(e,"Cos",(function(){return h["K"]})),n.d(e,"Cosh",(function(){return h["L"]})),n.d(e,"Cumsum",(function(){return h["N"]})),n.d(e,"CropAndResize",(function(){return h["M"]})),n.d(e,"DepthToSpace",(function(){return h["P"]})),n.d(e,"DepthwiseConv2dNative",(function(){return h["Q"]})),n.d(e,"DepthwiseConv2dNativeBackpropFilter",(function(){return h["R"]})),n.d(e,"DepthwiseConv2dNativeBackpropInput",(function(){return h["S"]})),n.d(e,"Diag",(function(){return h["T"]})),n.d(e,"Dilation2D",(function(){return h["U"]})),n.d(e,"Dilation2DBackpropInput",(function(){return h["W"]})),n.d(e,"Dilation2DBackpropFilter",(function(){return h["V"]})),n.d(e,"Div",(function(){return h["X"]})),n.d(e,"Elu",(function(){return h["Z"]})),n.d(e,"EluGrad",(function(){return h["ab"]})),n.d(e,"Erf",(function(){return h["db"]})),n.d(e,"Equal",(function(){return h["cb"]})),n.d(e,"Exp",(function(){return h["eb"]})),n.d(e,"Expm1",(function(){return h["fb"]})),n.d(e,"FFT",(function(){return h["gb"]})),n.d(e,"Fill",(function(){return h["hb"]})),n.d(e,"FlipLeftRight",(function(){return h["ib"]})),n.d(e,"Floor",(function(){return h["jb"]})),n.d(e,"FloorDiv",(function(){return h["kb"]})),n.d(e,"FusedBatchNorm",(function(){return h["mb"]})),n.d(e,"GatherV2",(function(){return h["qb"]})),n.d(e,"GatherNd",(function(){return h["pb"]})),n.d(e,"Greater",(function(){return h["rb"]})),n.d(e,"GreaterEqual",(function(){return h["sb"]})),n.d(e,"Identity",(function(){return h["ub"]})),n.d(e,"IFFT",(function(){return h["tb"]})),n.d(e,"Imag",(function(){return h["vb"]})),n.d(e,"IsFinite",(function(){return h["wb"]})),n.d(e,"IsInf",(function(){return h["xb"]})),n.d(e,"IsNan",(function(){return h["yb"]})),n.d(e,"Less",(function(){return h["Cb"]})),n.d(e,"LessEqual",(function(){return h["Db"]})),n.d(e,"LinSpace",(function(){return h["Eb"]})),n.d(e,"Log",(function(){return h["Fb"]})),n.d(e,"Log1p",(function(){return h["Gb"]})),n.d(e,"LogicalAnd",(function(){return h["Ib"]})),n.d(e,"LogicalNot",(function(){return h["Jb"]})),n.d(e,"LogicalOr",(function(){return h["Kb"]})),n.d(e,"LogSoftmax",(function(){return h["Hb"]})),n.d(e,"LRN",(function(){return h["Ab"]})),n.d(e,"LRNBackprop",(function(){return h["Bb"]})),n.d(e,"Max",(function(){return h["Lb"]})),n.d(e,"Maximum",(function(){return h["Rb"]})),n.d(e,"MaxPool",(function(){return h["Mb"]})),n.d(e,"MaxPoolBackprop",(function(){return h["Pb"]})),n.d(e,"MaxPool3D",(function(){return h["Nb"]})),n.d(e,"MaxPool3DBackprop",(function(){return h["Ob"]})),n.d(e,"MaxPoolWithArgmax",(function(){return h["Qb"]})),n.d(e,"Mean",(function(){return h["Sb"]})),n.d(e,"Min",(function(){return h["Tb"]})),n.d(e,"Minimum",(function(){return h["Ub"]})),n.d(e,"Mod",(function(){return h["Vb"]})),n.d(e,"Multiply",(function(){return h["Xb"]})),n.d(e,"Negate",(function(){return h["Yb"]})),n.d(e,"NotEqual",(function(){return h["cc"]})),n.d(e,"NonMaxSuppressionV3",(function(){return h["Zb"]})),n.d(e,"NonMaxSuppressionV4",(function(){return h["ac"]})),n.d(e,"NonMaxSuppressionV5",(function(){return h["bc"]})),n.d(e,"OnesLike",(function(){return h["ec"]})),n.d(e,"OneHot",(function(){return h["dc"]})),n.d(e,"PadV2",(function(){return h["gc"]})),n.d(e,"Pool",(function(){return h["hc"]})),n.d(e,"Pow",(function(){return h["ic"]})),n.d(e,"Prelu",(function(){return h["jc"]})),n.d(e,"Prod",(function(){return h["kc"]})),n.d(e,"Range",(function(){return h["mc"]})),n.d(e,"Real",(function(){return h["oc"]})),n.d(e,"Reciprocal",(function(){return h["pc"]})),n.d(e,"Relu",(function(){return h["rc"]})),n.d(e,"Reshape",(function(){return h["tc"]})),n.d(e,"ResizeNearestNeighbor",(function(){return h["wc"]})),n.d(e,"ResizeNearestNeighborGrad",(function(){return h["xc"]})),n.d(e,"ResizeBilinear",(function(){return h["uc"]})),n.d(e,"ResizeBilinearGrad",(function(){return h["vc"]})),n.d(e,"Relu6",(function(){return h["sc"]})),n.d(e,"Reverse",(function(){return h["yc"]})),n.d(e,"Round",(function(){return h["Ac"]})),n.d(e,"Rsqrt",(function(){return h["Bc"]})),n.d(e,"ScatterNd",(function(){return h["Dc"]})),n.d(e,"SelectV2",(function(){return h["Ec"]})),n.d(e,"Selu",(function(){return h["Fc"]})),n.d(e,"Slice",(function(){return h["Kc"]})),n.d(e,"Sin",(function(){return h["Ic"]})),n.d(e,"Sinh",(function(){return h["Jc"]})),n.d(e,"Sign",(function(){return h["Hc"]})),n.d(e,"Sigmoid",(function(){return h["Gc"]})),n.d(e,"Softplus",(function(){return h["Mc"]})),n.d(e,"Sqrt",(function(){return h["Qc"]})),n.d(e,"Sum",(function(){return h["Wc"]})),n.d(e,"SpaceToBatchND",(function(){return h["Nc"]})),n.d(e,"SplitV",(function(){return h["Pc"]})),n.d(e,"Softmax",(function(){return h["Lc"]})),n.d(e,"SquaredDifference",(function(){return h["Sc"]})),n.d(e,"Square",(function(){return h["Rc"]})),n.d(e,"Sub",(function(){return h["Vc"]})),n.d(e,"SparseToDense",(function(){return h["Oc"]})),n.d(e,"StridedSlice",(function(){return h["Uc"]})),n.d(e,"Tan",(function(){return h["Xc"]})),n.d(e,"Tanh",(function(){return h["Yc"]})),n.d(e,"Tile",(function(){return h["bd"]})),n.d(e,"TopK",(function(){return h["cd"]})),n.d(e,"Transpose",(function(){return h["dd"]})),n.d(e,"Unpack",(function(){return h["ed"]})),n.d(e,"UnsortedSegmentSum",(function(){return h["fd"]})),n.d(e,"ZerosLike",(function(){return h["hd"]})),n.d(e,"Step",(function(){return h["Tc"]})),n.d(e,"FromPixels",(function(){return h["lb"]})),n.d(e,"RotateWithOffset",(function(){return h["zc"]})),n.d(e,"_FusedMatMul",(function(){return h["id"]})),n.d(e,"FusedConv2D",(function(){return h["nb"]})),n.d(e,"FusedDepthwiseConv2D",(function(){return h["ob"]})),n.d(e,"CallbackList",(function(){return un})),n.d(e,"CustomCallback",(function(){return hn})),n.d(e,"History",(function(){return ln})),n.d(e,"Callback",(function(){return Qs})),n.d(e,"callbacks",(function(){return iu})),n.d(e,"EarlyStopping",(function(){return nu})),n.d(e,"InputSpec",(function(){return He})),n.d(e,"SymbolicTensor",(function(){return qe})),n.d(e,"LayersModel",(function(){return ei})),n.d(e,"input",(function(){return li})),n.d(e,"loadLayersModel",(function(){return ci})),n.d(e,"model",(function(){return si})),n.d(e,"registerCallbackConstructor",(function(){return hi})),n.d(e,"sequential",(function(){return ui})),n.d(e,"RNN",(function(){return aa})),n.d(e,"Sequential",(function(){return ai})),n.d(e,"LayerVariable",(function(){return Be})),n.d(e,"version_layers",(function(){return pr})),n.d(e,"constraints",(function(){return r})),n.d(e,"initializers",(function(){return i})),n.d(e,"layers",(function(){return o})),n.d(e,"metrics",(function(){return a})),n.d(e,"models",(function(){return s})),n.d(e,"regularizers",(function(){return u})),n.d(e,"GraphModel",(function(){return qu})),n.d(e,"loadGraphModel",(function(){return Gu})),n.d(e,"deregisterOp",(function(){return uu["a"]})),n.d(e,"registerOp",(function(){return uu["c"]})),n.d(e,"version_converter",(function(){return Xu})),n.d(e,"data",(function(){return c})),n.d(e,"version",(function(){return av}));var r={};n.r(r),n.d(r,"maxNorm",(function(){return Z})),n.d(r,"unitNorm",(function(){return J})),n.d(r,"nonNeg",(function(){return Q})),n.d(r,"minMaxNorm",(function(){return tt}));var i={};n.r(i),n.d(i,"zeros",(function(){return me})),n.d(i,"ones",(function(){return ve})),n.d(i,"constant",(function(){return ye})),n.d(i,"randomUniform",(function(){return be})),n.d(i,"randomNormal",(function(){return xe})),n.d(i,"truncatedNormal",(function(){return we})),n.d(i,"identity",(function(){return _e})),n.d(i,"varianceScaling",(function(){return Oe})),n.d(i,"glorotUniform",(function(){return Se})),n.d(i,"glorotNormal",(function(){return Ce})),n.d(i,"heNormal",(function(){return ke})),n.d(i,"heUniform",(function(){return Ae})),n.d(i,"leCunNormal",(function(){return Te})),n.d(i,"leCunUniform",(function(){return Ee})),n.d(i,"orthogonal",(function(){return je}));var o={};n.r(o),n.d(o,"inputLayer",(function(){return wa})),n.d(o,"elu",(function(){return _a})),n.d(o,"reLU",(function(){return Oa})),n.d(o,"leakyReLU",(function(){return Sa})),n.d(o,"prelu",(function(){return Ca})),n.d(o,"softmax",(function(){return ka})),n.d(o,"thresholdedReLU",(function(){return Aa})),n.d(o,"conv1d",(function(){return Ta})),n.d(o,"conv2d",(function(){return Ea})),n.d(o,"conv2dTranspose",(function(){return ja})),n.d(o,"conv3d",(function(){return Da})),n.d(o,"separableConv2d",(function(){return Ma})),n.d(o,"cropping2D",(function(){return Na})),n.d(o,"upSampling2d",(function(){return Ia})),n.d(o,"depthwiseConv2d",(function(){return Ra})),n.d(o,"activation",(function(){return Fa})),n.d(o,"dense",(function(){return Pa})),n.d(o,"dropout",(function(){return $a})),n.d(o,"spatialDropout1d",(function(){return La})),n.d(o,"flatten",(function(){return za})),n.d(o,"repeatVector",(function(){return Ba})),n.d(o,"reshape",(function(){return Ua})),n.d(o,"permute",(function(){return Wa})),n.d(o,"embedding",(function(){return Va})),n.d(o,"add",(function(){return Ha})),n.d(o,"average",(function(){return qa})),n.d(o,"concatenate",(function(){return Ga})),n.d(o,"maximum",(function(){return Xa})),n.d(o,"minimum",(function(){return Ya})),n.d(o,"multiply",(function(){return Ka})),n.d(o,"dot",(function(){return Za})),n.d(o,"batchNormalization",(function(){return Ja})),n.d(o,"layerNormalization",(function(){return Qa})),n.d(o,"zeroPadding2d",(function(){return ts})),n.d(o,"averagePooling1d",(function(){return es})),n.d(o,"avgPool1d",(function(){return ns})),n.d(o,"avgPooling1d",(function(){return rs})),n.d(o,"averagePooling2d",(function(){return is})),n.d(o,"avgPool2d",(function(){return os})),n.d(o,"avgPooling2d",(function(){return as})),n.d(o,"averagePooling3d",(function(){return ss})),n.d(o,"avgPool3d",(function(){return us})),n.d(o,"avgPooling3d",(function(){return cs})),n.d(o,"globalAveragePooling1d",(function(){return ls})),n.d(o,"globalAveragePooling2d",(function(){return hs})),n.d(o,"globalMaxPooling1d",(function(){return fs})),n.d(o,"globalMaxPooling2d",(function(){return ds})),n.d(o,"maxPooling1d",(function(){return ps})),n.d(o,"maxPooling2d",(function(){return gs})),n.d(o,"maxPooling3d",(function(){return ms})),n.d(o,"gru",(function(){return vs})),n.d(o,"gruCell",(function(){return ys})),n.d(o,"lstm",(function(){return bs})),n.d(o,"lstmCell",(function(){return xs})),n.d(o,"simpleRNN",(function(){return ws})),n.d(o,"simpleRNNCell",(function(){return _s})),n.d(o,"rnn",(function(){return Os})),n.d(o,"stackedRNNCells",(function(){return Ss})),n.d(o,"bidirectional",(function(){return Cs})),n.d(o,"timeDistributed",(function(){return ks})),n.d(o,"globalMaxPool1d",(function(){return As})),n.d(o,"globalMaxPool2d",(function(){return Ts})),n.d(o,"maxPool1d",(function(){return Es})),n.d(o,"maxPool2d",(function(){return js})),n.d(o,"Layer",(function(){return Ke})),n.d(o,"RNN",(function(){return aa})),n.d(o,"RNNCell",(function(){return sa})),n.d(o,"input",(function(){return li})),n.d(o,"gaussianNoise",(function(){return Ds})),n.d(o,"gaussianDropout",(function(){return Ms})),n.d(o,"alphaDropout",(function(){return Ns})),n.d(o,"masking",(function(){return Is}));var a={};n.r(a),n.d(a,"binaryAccuracy",(function(){return Rs})),n.d(a,"binaryCrossentropy",(function(){return Fs})),n.d(a,"sparseCategoricalAccuracy",(function(){return Ps})),n.d(a,"categoricalAccuracy",(function(){return $s})),n.d(a,"categoricalCrossentropy",(function(){return Ls})),n.d(a,"precision",(function(){return zs})),n.d(a,"recall",(function(){return Bs})),n.d(a,"cosineProximity",(function(){return Us})),n.d(a,"meanAbsoluteError",(function(){return Ws})),n.d(a,"meanAbsolutePercentageError",(function(){return Vs})),n.d(a,"MAPE",(function(){return Hs})),n.d(a,"mape",(function(){return qs})),n.d(a,"meanSquaredError",(function(){return Gs})),n.d(a,"MSE",(function(){return Xs})),n.d(a,"mse",(function(){return Ys}));var s={};n.r(s),n.d(s,"modelFromJSON",(function(){return ni}));var u={};n.r(u),n.d(u,"l1l2",(function(){return Ks})),n.d(u,"l1",(function(){return Zs})),n.d(u,"l2",(function(){return Js}));var c={};n.r(c),n.d(c,"array",(function(){return tc})),n.d(c,"Dataset",(function(){return Ju})),n.d(c,"zip",(function(){return ec})),n.d(c,"CSVDataset",(function(){return hc})),n.d(c,"TextLineDataset",(function(){return ic})),n.d(c,"csv",(function(){return _c})),n.d(c,"func",(function(){return Oc})),n.d(c,"generator",(function(){return Sc})),n.d(c,"microphone",(function(){return kc})),n.d(c,"webcam",(function(){return Cc})),n.d(c,"FileDataSource",(function(){return xc})),n.d(c,"URLDataSource",(function(){return wc})),n.d(c,"version_data",(function(){return Ac}));var l={};n.r(l),n.d(l,"maxImpl",(function(){return Gc})),n.d(l,"transposeImpl",(function(){return Xc}));var h=n("fa11");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let f;function d(){return null==f&&(f=Object(h["Ad"])().epsilon()),f}function p(){return"channelsLast"}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class g extends Error{constructor(t){super(t),Object.setPrototypeOf(this,g.prototype)}}class m extends Error{constructor(t){super(t),Object.setPrototypeOf(this,m.prototype)}}class v extends Error{constructor(t){super(t),Object.setPrototypeOf(this,v.prototype)}}class y extends Error{constructor(t){super(t),Object.setPrototypeOf(this,y.prototype)}}class b extends Error{constructor(t){super(t),Object.setPrototypeOf(this,b.prototype)}}Error;
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function x(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}{const n=new Array(e);return n.fill(t),n}}function w(t,e){if(!t)throw new b(e)}function _(t,e){let n=0;for(const r of t)r===e&&n++;return n}function O(t){return 1===t.length?t[0]:t}function S(t){return Array.isArray(t)?t:[t]}function C(t){const e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2"),n=e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==n[0]?n:"private"+n}function k(t){return t.length<=1||-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,(t,e)=>e.toUpperCase())}let A={};function T(t){if(null===t||void 0===t)return null;const e={};return e["className"]=t.getClassName(),e["config"]=t.getConfig(),e}function E(t){if(null!=t&&"object"===typeof t)if(Array.isArray(t))t.forEach(t=>E(t));else{const e=Object.keys(t);for(const n of e){const e=t[n];null!=e&&"object"===typeof e&&(Array.isArray(e)||"ndarray"!==e["type"]||"number"!==typeof e["value"]?E(e):t[n]=e["value"])}}}function j(t,e={},n={},r="object",i=!1){if("string"===typeof t){const i=t;let o;if(i in n)o=n[i];else if(i in A)o=A[i];else if(o=e[i],null==o)throw new v(`Unknown ${r}: ${t}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}{const o=t;if(null==o["className"]||null==o["config"])throw new v(r+": Improper config format: "+JSON.stringify(o)+".\n'className' and 'config' must set.");const a=o["className"];let s,u;if(a in n?[s,u]=n[a]:a in A?[s,u]=A["className"]:a in e&&([s,u]=e[a]),null==s)throw new v(`Unknown ${r}: ${a}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=u){const t={};for(const n of Object.keys(A))t[n]=A[n];for(const i of Object.keys(n))t[i]=n[i];const e=o["config"];e["customObjects"]=t;const r=Object.assign({},A);for(const i of Object.keys(n))A[i]=n[i];E(o["config"]);const a=u(s,o["config"],n,i);return A=Object.assign({},r),a}{const t=Object.assign({},A);for(const r of Object.keys(n))A[r]=n[r];const e=new s(o["config"]);return A=Object.assign({},t),e}}}function D(t,e){return t<e?-1:t>e?1:0}function M(t,e){return-1*D(t,e)}function N(t){if(null==t)return t;const e=[];for(const n of t)-1===e.indexOf(n)&&e.push(n);return e}function I(t){if(null==t)throw new v("Invalid value in obj: "+JSON.stringify(t));for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function R(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new v(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function F(t,e,n=0,r=1/0){return w(n>=0),w(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(t=>typeof t===e)}function P(t,e){Array.isArray(t)?(h["bi"].assert(t.length>0,()=>e+" is unexpectedly an empty array."),t.forEach((t,n)=>P(t,`element ${n+1} of ${e}`))):h["bi"].assert(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got `+$(t)+".")}function $(t){return null===t?"null":Array.isArray(t)?"["+t.map(t=>$(t)).join(",")+"]":"string"===typeof t?`"${t}"`:""+t}function L(t,e){let n,r=h["bi"].now();const i=(...i)=>{const o=h["bi"].now();return o-r<e||(r=o,n=t(...i)),n};return i}function z(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function B(t,e){return Object(h["Ph"])(()=>h["sh"](h["Ch"](h["Vf"](t,t),e,!0)))}class U extends h["Xg"].Serializable{getConfig(){return{}}}class W extends U{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Object(h["Ph"])(()=>{const e=B(t,this.axis),n=h["Od"](e,0,this.maxValue);return h["Vf"](t,h["pe"](n,h["md"](d(),e)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}W.className="MaxNorm",h["Xg"].registerClass(W);class V extends U{constructor(t){super(),this.defaultAxis=0,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Object(h["Ph"])(()=>h["pe"](t,h["md"](d(),B(t,this.axis))))}getConfig(){return{axis:this.axis}}}V.className="UnitNorm",h["Xg"].registerClass(V);class H extends U{apply(t){return h["Gg"](t)}}H.className="NonNeg",h["Xg"].registerClass(H);class q extends U{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=t.minValue?t.minValue:this.defaultMinValue,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.rate=null!=t.rate?t.rate:this.defaultRate,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Object(h["Ph"])(()=>{const e=B(t,this.axis),n=h["md"](h["Vf"](this.rate,h["Od"](e,this.minValue,this.maxValue)),h["Vf"](1-this.rate,e));return h["Vf"](t,h["pe"](n,h["md"](d(),e)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}q.className="MinMaxNorm",h["Xg"].registerClass(q);const G={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function X(t){return T(t)}function Y(t,e={}){return j(t,h["Xg"].SerializationMap.getMap().classNameMap,e,"constraint")}function K(t){if(null==t)return null;if("string"===typeof t){const e=t in G?G[t]:t,n={className:e,config:{}};return Y(n)}return t instanceof U?t:Y(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Z(t){return new W(t)}function J(t){return new V(t)}function Q(){return new H}function tt(t){return new q(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const et=["channelsFirst","channelsLast"],nt=["valid","same","causal"],rt=["max","avg"],it=["sum","mul","concat","ave"],ot=new Map;function at(t){R(et,"DataFormat",t)}function st(t){R(nt,"PaddingMode",t)}function ut(t){R(rt,"PoolMode",t)}const ct=[],lt="/";function ht(t,e){ct.push(t);try{const t=e();return ct.pop(),t}catch(n){throw ct.pop(),n}}function ft(){return 0===ct.length?"":ct.join(lt)+lt}function dt(t){if(!mt(t))throw new Error("Not a valid tensor name: '"+t+"'");return ft()+t}function pt(t){if(!mt(t))throw new Error("Not a valid tensor name: '"+t+"'");ot.has(t)||ot.set(t,0);const e=ot.get(t);if(ot.set(t,ot.get(t)+1),e>0){const n=`${t}_${e}`;return ot.set(n,1),n}return t}const gt=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function mt(t){return!!t.match(gt)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vt(t){return t===parseInt(t.toString(),10)}function yt(t,e,n){null==e&&(e=0),null==n&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function bt(t){return t=Array.isArray(t)?new Float32Array(t):t,Object(h["Hh"])(t)}function xt(t){return h["Of"](bt(t)).dataSync()[0]}function wt(t){return h["Gf"](bt(t)).dataSync()[0]}function _t(t,e){if(e<t)throw new v(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ot(t,e){return t.asType(e)}function St(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function Ct(t,e){return Object(h["Ph"])(()=>{if(2!==t.shape.length)throw new v(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=St(t,1);return Nt(n,[1,e,1])})}function kt(t){const e=[yt(t.shape)];return t.reshape(e)}function At(t){if(t.rank<=1)throw new v(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],yt(t.shape,1)];return t.reshape(e)}function Tt(t,e,n){return Object(h["Ph"])(()=>{switch(t.rank){case 1:return h["hh"](t,e,n);case 2:return h["ih"](t,[e,0],[n,t.shape[1]]);case 3:return h["jh"](t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return h["kh"](t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return h["gh"](t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return h["gh"](t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new v("sliceAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}})}function Et(t,e,n){return Object(h["Ph"])(()=>{switch(t.rank){case 1:return h["hh"](t,e,n);case 2:return h["ih"](t,[0,e],[t.shape[0],n]);case 3:return h["jh"](t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return h["kh"](t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new v("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function jt(t,e,n,r){return Object(h["Ph"])(()=>{switch(t.rank){case 1:return h["hh"](t,e,n);case 2:switch(r){case 1:return Tt(t,e,n);case 2:return Et(t,e,n);default:throw new v("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return Tt(t,e,n);case 2:return h["jh"](t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return Et(t,e,n);default:throw new v("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return Tt(t,e,n);case 2:return h["kh"](t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return h["kh"](t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return Et(t,e,n);default:throw new v("The axis is not within the rank of the tensor "+r)}default:throw new v("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function Dt(t,e=-1){let n;return e<0&&(n=t[0].rank,e=0!==n?n:0),e===t[0].rank&&(e=-1),h["Rd"](t,e)}function Mt(t,e){switch(t.rank){case 1:return h["Sd"]([t,e]);case 2:return h["Td"]([t,e],0);case 3:return h["Ud"]([t,e],0);case 4:return h["Vd"]([t,e],0);default:throw new v("concatAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}function Nt(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new v(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return h["Qh"](t,e)}function It(t,e=0,n=1,r,i){return h["xg"](t,e,n,r,i)}function Rt(t,e,n,r){if(t.rank<2||e.rank<2)throw new y(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const n=t.shape.slice(-1)[0],r=e.shape.slice(-2)[0];if(n!==r)throw new y(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = `+e.shape)}if(2===t.rank&&2===e.rank){const i=!1,o=!1;return h["Ne"].matMul({a:t,b:e,transposeA:i,transposeB:o,bias:r?$t(t.rank,r,p()):null,activation:n})}{const i=t.shape.slice(),o=i.pop();t=t.reshape([-1,o]);const a=e.shape.slice(),s=a.pop(),u=a.pop(),c=[...a,s],l=Array.from({length:e.rank},(t,n)=>0===n?e.rank-2:n<=e.rank-2?n-1:n);e=e.transpose(l).reshape([u,-1]);const f=[...i,...c],d=!1,g=!1;return h["Ne"].matMul({a:t,b:e,transposeA:d,transposeB:g,bias:r?$t(t.rank,r,p()):null,activation:n}).reshape(f)}}function Ft(t,e,n){return Object(h["Ph"])(()=>(e=Array.isArray(e)?Object(h["Hh"])(e,"int32"):e.toInt(),h["Oe"](t,e,n)))}function Pt(t){return h["Vf"](t,t)}function $t(t,e,n){const r=e.shape;if(1!==e.rank&&e.rank!==t)throw new v("Unexpected bias dimensions: "+e.rank+"; expected it to be 1 or "+t);if(5===t){if("channelsFirst"===n)return 1===r.length?e.reshape([1,r[0],1,1,1]):e.reshape([1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?e.reshape([1,1,1,1,r[0]]):e.reshape([1].concat(r))}else if(4===t){if("channelsFirst"===n)return 1===r.length?e.reshape([1,r[0],1,1]):e.reshape([1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?e.reshape([1,1,1,r[0]]):e.reshape([1].concat(r))}else if(3===t){if("channelsFirst"===n)return 1===r.length?e.reshape([1,r[0],1]):e.reshape([1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?e.reshape([1,1,r[0]]):e.reshape([1].concat(r))}else if(t<3)return e;throw new v("Unsupported input rank by biasAdd: "+e.rank)}function Lt(t,e,n){return Object(h["Ph"])(()=>(null==n&&(n=p()),at(n),t.add($t(t.rank,e,n))))}function zt(t,e=1){if(1!==e)throw new y(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return h["ue"](t)}function Bt(t){return Object(h["Ph"])(()=>h["pe"](t,h["jd"](t).add(1)))}function Ut(t,e,n,r){return Object(h["Ph"])(()=>h["te"](t,e,n,r))}function Wt(t){return Object(h["Ph"])(()=>{const e=h["md"](.5,h["Vf"](.2,t));return h["Od"](e,0,1)})}function Vt(t,e,n=!1){return n?t():e()}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Ht=["fanIn","fanOut","fanAvg"],qt=["normal","uniform","truncatedNormal"];
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Gt(t){R(Ht,"FanMode",t)}function Xt(t){R(qt,"Distribution",t)}class Yt extends h["Xg"].Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Kt extends Yt{apply(t,e){return Object(h["ji"])(t,e)}}Kt.className="Zeros",h["Xg"].registerClass(Kt);class Zt extends Yt{apply(t,e){return Object(h["fg"])(t,e)}}Zt.className="Ones",h["Xg"].registerClass(Zt);class Jt extends Yt{constructor(t){if(super(),"object"!==typeof t)throw new v("Expected argument of type ConstantConfig but got "+t);if(void 0===t.value)throw new v("config must have value set but got "+t);this.value=t.value}apply(t,e){return Object(h["Ph"])(()=>Object(h["Vf"])(Object(h["Sg"])(this.value),Object(h["fg"])(t,e)))}getConfig(){return{value:this.value}}}Jt.className="Constant",h["Xg"].registerClass(Jt);class Qt extends Yt{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,e){return Object(h["yg"])(t,this.minval,this.maxval,e)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Qt.className="RandomUniform",h["Xg"].registerClass(Qt);class te extends Yt{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if(e=e||"float32","float32"!==e&&"int32"!==e)throw new y(`randomNormal does not support dType ${e}.`);return It(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}te.className="RandomNormal",h["Xg"].registerClass(te);class ee extends Yt{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if(e=e||"float32","float32"!==e&&"int32"!==e)throw new y(`truncatedNormal does not support dType ${e}.`);return Object(h["Vh"])(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}ee.className="TruncatedNormal",h["Xg"].registerClass(ee);class ne extends Yt{constructor(t){super(),this.gain=null!=t.gain?t.gain:1}apply(t,e){return Object(h["Ph"])(()=>{if(2!==t.length||t[0]!==t[1])throw new v("Identity matrix initializer can only be used for 2D square matrices.");return Object(h["Vf"])(this.gain,Object(h["Ge"])(t[0]))})}getConfig(){return{gain:this.gain}}}function re(t,e="channelsLast"){let n,r;if(at(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length)){if("channelsFirst"===e){const e=yt(t,2);n=t[1]*e,r=t[0]*e}else if("channelsLast"===e){const e=yt(t,0,t.length-2);n=t[t.length-2]*e,r=t[t.length-1]*e}}else{const e=yt(t);n=Math.sqrt(e),r=Math.sqrt(e)}return[n,r]}ne.className="Identity",h["Xg"].registerClass(ne);class ie extends Yt{constructor(t){if(super(),t.scale<0)throw new v("scale must be a positive float. Got: "+t.scale);this.scale=null==t.scale?1:t.scale,this.mode=null==t.mode?"fanIn":t.mode,Gt(this.mode),this.distribution=null==t.distribution?"normal":t.distribution,Xt(this.distribution),this.seed=t.seed}apply(t,e){const n=re(t),r=n[0],i=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(o);if(e=e||"float32","float32"!==e&&"int32"!==e)throw new y(`${this.getClassName()} does not support dType ${e}.`);return Object(h["Vh"])(t,0,n,e,this.seed)}{const n=Math.sqrt(3*o);return Object(h["yg"])(t,-n,n,e)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ie.className="VarianceScaling",h["Xg"].registerClass(ie);class oe extends ie{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return ie.className}}oe.className="GlorotUniform",h["Xg"].registerClass(oe);class ae extends ie{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return ie.className}}ae.className="GlorotNormal",h["Xg"].registerClass(ae);class se extends ie{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return ie.className}}se.className="HeNormal",h["Xg"].registerClass(se);class ue extends ie{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return ie.className}}ue.className="HeUniform",h["Xg"].registerClass(ue);class ce extends ie{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return ie.className}}ce.className="LeCunNormal",h["Xg"].registerClass(ce);class le extends ie{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return ie.className}}le.className="LeCunNormal",h["Xg"].registerClass(le);class he extends Yt{constructor(t){if(super(),this.DEFAULT_GAIN=1,this.gain=null==t.gain?this.DEFAULT_GAIN:t.gain,this.seed=t.seed,null!=this.seed)throw new y("Random seed is not implemented for Orthogonal Initializer yet.")}apply(t,e){return Object(h["Ph"])(()=>{if(2!==t.length)throw new y("The Orthogonal Initializer does not support non-2D shapes yet.");t[0]*t[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${t[0]*t[1]}) elements: Slowness may result.`);const e=t[0]>t[1]?[t[1],t[0]]:t,n=It(e,0,1,"float32");let r=h["rf"].gramSchmidt(n);return t[0]>t[1]&&(r=r.transpose()),Object(h["Vf"])(this.gain,r)})}getConfig(){return{gain:this.gain,seed:this.seed}}}he.className="Orthogonal",h["Xg"].registerClass(he);const fe={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function de(t,e={}){return j(t,h["Xg"].SerializationMap.getMap().classNameMap,e,"initializer")}function pe(t){return T(t)}function ge(t){if("string"===typeof t){const e=t in fe?fe[t]:t;if("GlorotNormal"===e)return new ae;if("GlorotUniform"===e)return new oe;if("HeNormal"===e)return new se;if("HeUniform"===e)return new ue;if("LeCunNormal"===e)return new ce;if("LeCunUniform"===e)return new le;{const t={};return t["className"]=e,t["config"]={},de(t)}}return t instanceof Yt?t:de(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function me(){return new Kt}function ve(){return new Zt}function ye(t){return new Jt(t)}function be(t){return new Qt(t)}function xe(t){return new te(t)}function we(t){return new ee(t)}function _e(t){return new ne(t)}function Oe(t){return new ie(t)}function Se(t){return new oe(t)}function Ce(t){return new ae(t)}function ke(t){return new se(t)}function Ae(t){return new ue(t)}function Te(t){return new ce(t)}function Ee(t){return new le(t)}function je(t){return new he(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let De=0;function Me(){return De++}const Ne={};function Ie(t=""){return t in Ne||(Ne[t]=0),Ne[t]+=1,t+Ne[t].toString()}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Re(t){return Array.isArray(t)&&Array.isArray(t[0])}function Fe(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function Pe(t){let e;if(Array.isArray(t)){if(1!==t.length)throw new v("Expected Tensor length to be 1; got "+t.length);e=t[0]}else e=t;return e}function $e(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return t=t,t[0];throw new v("Expected exactly 1 Shape; got "+t.length)}return t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Le(t){let e=0;for(const n of t)0===n.shape.length?e+=1:e+=n.shape.reduce((t,e)=>t*e);return e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ze="Variable";class Be{constructor(t,e="float32",n=ze,r=!0,i=null){this.dtype=null==e?"float32":e,this.shape=t.shape,this.id=Me(),n=null==n?ze:n,this.originalName=dt(n),this.name=pt(this.originalName),this.trainable_=r,this.constraint=i,this.val=h["ei"](t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),Ue(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function Ue(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function We(t){return t.map(t=>t.read())}function Ve(t){t.forEach(t=>{const e=t[0];e.write(t[1])})}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class He{constructor(t){this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class qe{constructor(t,e,n,r,i,o,a){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=a,this.id=Me(),null!=o&&(this.originalName=dt(o),this.name=pt(this.originalName)),this.rank=e.length}}let Ge=0;class Xe{constructor(t,e){this.callArgs=e,this.id=Ge++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const n of t.inboundLayers)null!=n&&n.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const e of this.inboundLayers)null!=e?t.push(e.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Ye=0;class Ke extends h["Xg"].Serializable{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Ye++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=t.name;if(!e){const t=this.getClassName();e=C(t)+"_"+Ie(t)}if(this.name=e,this.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){let e;if(null!=t.batchInputShape)e=t.batchInputShape;else if(null!=t.inputShape){let n=null;null!=t.batchSize&&(n=t.batchSize),e=[n].concat(t.inputShape)}this.batchInputShape=e;let n=t.dtype;null==n&&(n=t.inputDType),null==n&&(n="float32"),this.dtype=n}null!=t.weights?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(0===this.inboundNodes.length)throw new m(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new v(`Asked to get ${e} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return O(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return O(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new g("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new g("Layer "+this.name+" is not connected, no input to return.");return O(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new g("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new g("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return O(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=S(t),null==this.inputSpec||0===this.inputSpec.length)return;const e=S(this.inputSpec);if(t.length!==e.length)throw new v(`Layer ${this.name} expects ${e.length} inputs, but it received ${t.length} input tensors. Input received: `+t);for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(null==i)continue;const o=r.rank;if(null!=i.ndim&&o!==i.ndim)throw new v(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(null!=i.maxNDim&&o>i.maxNDim)throw new v(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(null!=i.minNDim&&o<i.minNDim)throw new v(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(null!=i.dtype&&r.dtype!==i.dtype)throw new v(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){const t=r.shape;for(const e in i.axes){const r=Number(e),o=i.axes[e],a=r>=0?t[r]:t[t.length+r];if(null!=o&&-1===[o,null].indexOf(a))throw new v(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${o} but got shape ${t}.`)}}if(null!=i.shape)for(let t=0;t<i.shape.length;++t){const e=i.shape[t],o=r.shape[t];if(null!=e&&null!=o&&e!==o)throw new v(`Input ${n} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${r.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){null!=this._callHook&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();const n=S(t);let r=!0;for(const o of n)if(!(o instanceof qe)){r=!1;break}let i=!0;for(const o of n)if(o instanceof qe){i=!1;break}if(r===i)throw new v("Arguments to apply() must be all SymbolicTensors or all Tensors");return ht(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const e=[];for(const n of S(t))e.push(n.shape);this.build(O(e)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(t),i){let r=this.call(t,e);const i=S(r),o=[];for(let t of i)-1!==n.indexOf(t)&&(t=t.clone()),o.push(t);if(r=O(o),null!=this.activityRegularizer)throw new y("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=Ze(t),r=this.computeOutputShape(n);let i;const o=Je(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new qe(o,n,this,S(t),e,this.name,r)):new qe(o,r,this,S(t),e,this.name),this.addInboundNode(t,i,null,null,n,r,e),this._refCount++,null!=this.activityRegularizer)throw new y("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}})}warnOnIncompatibleInputShape(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(t)+") does not match that of the "+`batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer `+this.name);else{let e=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: `+JSON.stringify(this.batchInputShape))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new g(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const e of this.inboundNodes){const n=JSON.stringify(e.outputShapes);-1===t.indexOf(n)&&t.push(n)}if(1===t.length){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&1===t.length?t[0]:t}throw new g(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new m(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Le(this.weights)}build(t){this.built=!0}getWeights(t=!1){return We(t?this.trainableWeights:this.weights)}setWeights(t){Object(h["Ph"])(()=>{const e=this.weights;if(e.length!==t.length)throw new v(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${e.length} weights. Provided weights: ${t}...`);if(0===e.length)return;const n=[],r=We(e);for(let i=0;i<r.length;++i){const o=r[i],a=e[i],s=t[i];if(!h["bi"].arraysEqual(o.shape,s.shape))throw new v(`Layer weight shape ${o.shape} not compatible with provided weight shape `+s.shape);n.push([a,s])}Ve(n)})}addWeight(t,e,n,r,i,o,a){if(-1!==this._addedWeightNames.indexOf(t))throw new v(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=ge("zeros"));const s=r.apply(e,n),u=new Be(s,n,t,o,a);return s.dispose(),null!=i&&this.addLoss(()=>i.apply(u.read())),null==o&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){null==t||Array.isArray(t)&&0===t.length||(t=S(t),void 0!==this._losses&&null!==this._losses&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);e.forEach(t=>{if(null!=t)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return e}addInboundNode(t,e,n,r,i,o,a=null){const s=S(t);e=S(e),n=S(n),r=S(r),i=Fe(i),o=Fe(o);const u=[],c=[],l=[];for(const h of s)u.push(h.sourceLayer),c.push(h.nodeIndex),l.push(h.tensorIndex);new Xe({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:l,inputTensors:s,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:o},a);for(let h=0;h<e.length;h++)e[h].sourceLayer=this,e[h].nodeIndex=this.inboundNodes.length-1,e[h].tensorIndex=h}getConfig(){const t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t["batchInputShape"]=this.batchInputShape),null!=this.dtype&&(t["dtype"]=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return 0===--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function Ze(t){t=S(t);const e=[];for(const n of t)e.push(n.shape);return O(e)}function Je(t){return"float32"}function Qe(t,e,n){if((null==e||null!=n&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),0===e.inboundNodes.length)return[t];{const t=e.inboundNodes[n];if(0===t.inboundLayers.length)return t.inputTensors;{const e=[];for(let n=0;n<t.inboundLayers.length;n++){const r=t.inputTensors[n],i=t.inboundLayers[n],o=t.nodeIndices[n],a=Qe(r,i,o);for(const t of a)-1===e.indexOf(t)&&e.push(t)}return e}}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tn extends Ke{constructor(t){if(super({dtype:t.dtype,name:null!=t.name?t.name:Ie("input").toString()}),null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new v("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let e=t.batchInputShape;if(null==e){if(null==t.inputShape)throw new v("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");e=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new v("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=t.dtype||"float32";this.batchInputShape=e,this.dtype=n,this.inputSpec=[{shape:e}];const r=new qe(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Xe({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[e],outputShapes:[e]})}apply(t,e){throw new v("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function en(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new v("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));let n=t.dtype;null==n&&(n="float32");const r=new tn({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}),i=r.inboundNodes[0].outputTensors;return i[0]}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function nn(t){if(null==t)return;const e=[],n=[],r=[];for(const i in t){const o=t[i];if("number"!==typeof o){const t=o;e.push(t.data()),n.push(i),r.push(t)}}if(e.length>0){const i=await Promise.all(e);for(let e=0;e<i.length;++e)t[n[e]]=i[e][0];Object(h["ne"])(r)}}function rn(t){if(null!=t)for(const e in t){const n=t[e];"number"!==typeof n&&n.dispose()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var on;tn.className="InputLayer",h["Xg"].registerClass(tn),function(t){t[t["SILENT"]=0]="SILENT",t[t["VERBOSE"]=1]="VERBOSE"}(on||(on={}));const an=125;class sn{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,e){}async onEpochEnd(t,e){}async onBatchBegin(t,e){}async onBatchEnd(t,e){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class un{constructor(t,e=10){null==t&&(t=[]),this.callbacks=t,this.queueLength=e}append(t){this.callbacks.push(t)}setParams(t){for(const e of this.callbacks)e.setParams(t)}setModel(t){for(const e of this.callbacks)e.setModel(t)}async onEpochBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochBegin(t,e)}async onEpochEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochEnd(t,e)}async onBatchBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchBegin(t,e)}async onBatchEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchEnd(t,e)}async onTrainBegin(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainBegin(t)}async onTrainEnd(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainEnd(t)}}class cn extends sn{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,e){null==e&&(e={});const n=null==e["size"]?0:e["size"];this.seen+=n;for(const r in e){const t=e[r];if("number"===typeof t)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+t*n;else{let e;r in this.totals?e=this.totals[r]:this.totals[r]=0;const i=Object(h["Ph"])(()=>Object(h["md"])(this.totals[r],Object(h["Vf"])(t,n)));this.totals[r]=i,null!=e&&e.dispose()}}}async onEpochEnd(t,e){if(null!=e)for(const n of this.params["metrics"])null!=this.totals[n]&&("number"===typeof this.totals[n]?e[n]=this.totals[n]/this.seen:Object(h["Ph"])(()=>{const t=Object(h["Vf"])(Object(h["pe"])(1,this.seen),this.totals[n]);e[n]=t,this.totals[n].dispose(),Object(h["kf"])(e[n])}))}}class ln extends sn{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,e){null==e&&(e={}),this.epoch.push(t);for(const n in e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n])}async syncData(){const t=[],e=[],n=[];for(const i in this.history){const r=this.history[i];for(let o=0;o<r.length;++o)if("number"!==typeof r[o]){const a=r[o];t.push(a.data()),e.push(i),n.push(o)}}const r=await Promise.all(t);for(let i=0;i<r.length;++i){const t=this.history[e[i]][n[i]];t.dispose(),this.history[e[i]][n[i]]=r[i][0]}}}class hn extends sn{constructor(t,e){if(super(),this.currentEpoch=0,this.yieldEvery=e||"auto","auto"===this.yieldEvery&&(this.yieldEvery=an),"never"===this.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");h["bi"].isNumber(this.yieldEvery)&&(this.maybeWait=L(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,e,n){const r=[];null!=this.yield&&(await nn(n),r.push(this.yield(t,e,n))),r.push(Object(h["ag"])()),await Promise.all(r)}async onEpochBegin(t,e){this.currentEpoch=t,null!=this.epochBegin&&(await nn(e),await this.epochBegin(t,e))}async onEpochEnd(t,e){const n=[];null!=this.epochEnd&&(await nn(e),n.push(this.epochEnd(t,e))),"epoch"===this.yieldEvery&&n.push(Object(h["ag"])()),await Promise.all(n)}async onBatchBegin(t,e){null!=this.batchBegin&&(await nn(e),await this.batchBegin(t,e))}async onBatchEnd(t,e){const n=[];null!=this.batchEnd&&(await nn(e),n.push(this.batchEnd(t,e))),"batch"===this.yieldEvery?n.push(Object(h["ag"])()):h["bi"].isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,t,e)),await Promise.all(n)}async onTrainBegin(t){null!=this.trainBegin&&(await nn(t),await this.trainBegin(t))}async onTrainEnd(t){null!=this.trainEnd&&(await nn(t),await this.trainEnd(t))}}function fn(t,e){if(null==t&&(t={}),t instanceof sn)return[t];if(Array.isArray(t)&&t[0]instanceof sn)return t;const n=S(t);return n.map(t=>new hn(t,e))}class dn{constructor(){}static registerCallbackConstructor(t,e){h["bi"].assert(t>=0&&Number.isInteger(t),()=>"Verbosity level is expected to be an integer >= 0, but got "+t),dn.checkForDuplicate(e),null==dn.constructors[t]&&(dn.constructors[t]=[]),dn.constructors[t].push(e)}static checkForDuplicate(t){for(const e in dn.constructors){const n=dn.constructors[+e];n.forEach(e=>{if(e===t)throw new v("Duplicate callback constructor.")})}}static clear(){dn.constructors={}}static createCallbacks(t){const e=[];for(const n in dn.constructors){const r=+n;t>=r&&e.push(...dn.constructors[r])}return e.map(t=>new t)}}function pn(t,e,n,r,i,o,a,s,u){const c=new ln,l=[new cn,...dn.createCallbacks(e)];null!=t&&l.push(...t),l.push(c);const h=new un(l);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:o,batchSize:a,verbose:e,doValidation:s,metrics:u}),{callbackList:h,history:c}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gn(t,e={},n=!1){return j(t,h["Xg"].SerializationMap.getMap().classNameMap,e,"layer",n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mn(t,e){return Object(h["Ph"])(()=>{"float32"!==t.dtype&&(t=t.asType("float32"));const n=h["Ch"](Pt(t),e,!0),r=h["Ie"](n.shape,d()),i=h["sh"](h["Kf"](n,r));return h["pe"](t,i)})}function vn(t,e){return Object(h["Ph"])(()=>h["Mf"](Pt(h["Ah"](e,t)),-1))}function yn(t,e){return Object(h["Ph"])(()=>h["Mf"](h["jd"](h["Ah"](e,t)),-1))}function bn(t,e){return Object(h["Ph"])(()=>{const n=h["Ah"](t,e),r=h["Od"](h["jd"](t),d(),Number.MAX_VALUE),i=h["jd"](h["pe"](n,r));return h["Vf"](100,h["Mf"](i,-1))})}function xn(t,e){return Object(h["Ph"])(()=>{const n=h["Od"](e,d(),Number.MAX_VALUE),r=h["uf"](h["md"](1,n)),i=h["Od"](t,d(),Number.MAX_VALUE),o=h["uf"](h["md"](1,i));return h["Mf"](Pt(h["Ah"](r,o)),-1)})}function wn(t,e){return Object(h["Ph"])(()=>{const n=h["Kf"](0,h["Ah"](1,h["Vf"](t,e)));return h["Mf"](Pt(n),-1)})}function _n(t,e){return Object(h["Ph"])(()=>{const n=h["Kf"](0,h["Ah"](1,h["Vf"](t,e)));return h["Mf"](n,-1)})}function On(t,e){return Object(h["Ph"])(()=>{const n=h["Ch"](h["Vf"](t,e),-1),r=h["Gf"](h["Vf"](h["Ah"](1,t),e),-1);return h["Kf"](0,h["md"](1,h["Ah"](r,n)))})}function Sn(t,e){return Object(h["Ph"])(()=>{const n=Math.log(2),r=h["Ah"](e,t),i=h["Ah"](h["md"](r,h["nh"](h["Vf"](-2,r))),n);return h["Mf"](i,-1)})}function Cn(t,e,n=!1){return Object(h["Ph"])(()=>{if(n)e=h["mh"](e);else{const t=h["Ch"](e,e.shape.length-1,!0);e=h["pe"](e,t)}return e=h["Od"](e,d(),1-d()),h["Zf"](h["Ch"](h["Vf"](t.toFloat(),h["uf"](e)),e.shape.length-1))})}function kn(t,e,n=!1){return Object(h["Ph"])(()=>{const r=h["Le"](kt(t)).toInt();e=h["Od"](e,d(),1-d());const i=e.shape,o=h["eg"](r,i[i.length-1]).reshape(i);return Cn(o,e,n)})}function An(t,e){if(!h["bi"].arraysEqual(t.shape,e.shape))throw new v(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Object(h["Ph"])(()=>{const n=e.relu(),r=e.abs().neg();return n.sub(e.mul(t)).add(r.exp().log1p())})}function Tn(t,e){return Object(h["Ph"])(()=>{let n;return n=h["Od"](e,d(),1-d()),n=h["uf"](h["pe"](n,h["Ah"](1,n))),h["Mf"](An(t,n),-1)})}function En(t,e){return Object(h["Ph"])(()=>{const n=h["Od"](t,d(),1),r=h["Od"](e,d(),1);return h["Ch"](h["Vf"](t,h["uf"](h["pe"](n,r))),-1)})}function jn(t,e){return Object(h["Ph"])(()=>{const n=h["uf"](h["md"](d(),e));return h["Mf"](h["Ah"](e,h["Vf"](t,n)),-1)})}function Dn(t,e){return Object(h["Ph"])(()=>{const n=mn(t,-1),r=mn(e,-1),i=h["Vf"](n,r);return h["Zf"](h["Ch"](i,-1))})}dn.constructors={};const Mn={meanSquaredError:vn,meanAbsoluteError:yn,meanAbsolutePercentageError:bn,meanSquaredLogarithmicError:xn,squaredHinge:wn,hinge:_n,categoricalHinge:On,logcosh:Sn,categoricalCrossentropy:Cn,sparseCategoricalCrossentropy:kn,binaryCrossentropy:Tn,kullbackLeiblerDivergence:En,poisson:jn,cosineProximity:Dn};function Nn(t){if("string"===typeof t){if(t in Mn)return Mn[t];let e="Unknown loss "+t;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new v(e)}return t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function In(t,e){return Object(h["Ph"])(()=>{const n=h["Vf"](.5,h["gg"](e)),r=Ot(h["Xe"](e,n),t.dtype);return h["Mf"](h["Ae"](t,r),-1)})}function Rn(t,e){return Object(h["Ph"])(()=>Ot(h["Ae"](h["rd"](t,-1),h["rd"](e,-1)),"float32"))}function Fn(t,e){return Object(h["Ph"])(()=>h["zf"](t.equal(1),e.equal(1)).sum().cast("float32"))}function Pn(t,e){return Object(h["Ph"])(()=>h["zf"](t.equal(1),e.equal(0)).sum().cast("float32"))}function $n(t,e){return Object(h["Ph"])(()=>h["zf"](t.equal(0),e.equal(1)).sum().cast("float32"))}function Ln(t,e){return Object(h["Ph"])(()=>{const n=Fn(t,e),r=$n(t,e),i=n.add(r);return h["hi"](h["Xe"](i,0),n.div(i),0).cast("float32")})}function zn(t,e){return Object(h["Ph"])(()=>{const n=Fn(t,e),r=Pn(t,e),i=n.add(r);return h["hi"](h["Xe"](i,0),n.div(i),0).cast("float32")})}function Bn(t,e){return Tn(t,e)}function Un(t,e){return t.rank===e.rank&&(t=t.squeeze([t.rank-1])),e=e.argMax(-1),e.dtype!==t.dtype&&(e=e.asType(t.dtype)),h["Ae"](t,e).asType("float32")}const Wn=vn,Vn=vn,Hn=yn,qn=yn,Gn=bn,Xn=bn,Yn=Cn,Kn=Dn,Zn=kn,Jn={binaryAccuracy:In,categoricalAccuracy:Rn,precision:Ln,categoricalCrossentropy:Yn,sparseCategoricalCrossentropy:Zn,mse:Wn,MSE:Vn,mae:Hn,MAE:qn,mape:Gn,MAPE:Xn,cosine:Kn};function Qn(t){if("string"===typeof t&&t in Jn)return Jn[t];if("string"!==typeof t&&null!=t)return t;throw new v("Unknown metric "+t)}function tr(t){if(w(null!==t,"Unknown LossOrMetricFn "+t),"string"===typeof t)return t;{let e;for(const n of Object.keys(Mn))if(Mn[n]===t){e=n;break}if(void 0!==e)return e;for(const n of Object.keys(Jn))if(Jn[n]===t){e=n;break}return void 0!==e?e:t.name}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function er(t){const e={Adagrad:()=>h["Th"].adagrad(.01),Adadelta:()=>h["Th"].adadelta(1,.95,d()),Adam:()=>h["Th"].adam(.001,.9,.999,d()),Adamax:()=>h["Th"].adamax(.002,.9,.999,d(),0),RMSProp:()=>h["Th"].rmsprop(.001,.9,0,d()),SGD:()=>h["Th"].sgd(.01)};if(e["adagrad"]=e["Adagrad"],e["adadelta"]=e["Adadelta"],e["adam"]=e["Adam"],e["adamax"]=e["Adamax"],e["rmsprop"]=e["RMSProp"],e["sgd"]=e["SGD"],t in e)return e[t]();throw new v("Unknown Optimizer "+t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nr=1048576;function rr(t,e,n=!1){if(null==t||"object"!==typeof t||Object.getPrototypeOf(t)!==Object.prototype||!ir(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(t);n.length>nr&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= `+nr+".")}}function ir(t){if(null===t)return!0;if("object"===typeof t){if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e){if("string"!==typeof n)return!1;if(!ir(t[n]))return!1}return!0}if(Array.isArray(t)){for(const e of t)if(!ir(e))return!1;return!0}return!1}{const e=typeof t;return"string"===e||"number"===e||"boolean"===e}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function or(t,e,n,r=console.log){const i=sr(t),o=["Layer (type)","Output shape","Param #"];let a;if(i?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(t=>Math.floor(e*t))),!i){o.push("Receives inputs"),a=[];for(const e in t.nodesByDepth)a.push(...t.nodesByDepth[e])}r("_".repeat(e)),ur(o,n,r),r("=".repeat(e));const s=t.layers;for(let l=0;l<s.length;++l)i?cr(s[l],n,r):lr(s[l],n,a,r),r((l===s.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const u=ar(t),c=Le(t.nonTrainableWeights);r("Total params: "+(u+c)),r("Trainable params: "+u),r("Non-trainable params: "+c),r("_".repeat(e))}function ar(t){let e;return e=null!=t.collectedTrainableWeights?Le(t.collectedTrainableWeights):Le(t.trainableWeights),e}function sr(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let t=!1;for(const n of i.inboundNodes)if(-1!==r.indexOf(n)){if(t){e=!1;break}t=!0}if(!e)break}return e}function ur(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function cr(t,e,n){let r;try{r=JSON.stringify(t.outputShape)}catch(s){r="multiple"}const i=t.name,o=t.getClassName(),a=[`${i} (${o})`,r,t.countParams().toString()];ur(a,e,n)}function lr(t,e,n,r){let i;try{i=JSON.stringify(t.outputShape)}catch(l){i="multiple"}const o=[];for(const h of t.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(h)))for(let t=0;t<h.inboundLayers.length;++t){const e=h.inboundLayers[t].name,n=h.nodeIndices[t],r=h.tensorIndices[t];o.push(`${e}[${n}][${r}]`)}const a=t.name,s=t.getClassName(),u=0===o.length?"":o[0],c=[`${a} (${s})`,i,t.countParams().toString(),u];ur(c,e,r);for(let h=1;h<o.length;++h)ur(["","","",o[h]],e,r)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hr(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"===typeof n}function fr(t,e){if(null===t)return null;if("string"===typeof t)return k(t);if("number"===typeof t||"boolean"===typeof t)return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const r=t[i];hr(e,i,r)?n.push(r):n.push(fr(r,e))}return n}{const e={};for(const n of Object.keys(t)){const r=t[n];if("name"===n&&"string"===typeof r)e[n]=r;else{const t=k(n);e[t]=fr(r,t)}}return e}}function dr(t,e){if(null===t||void 0===t)return null;if("string"===typeof t)return C(t);if("number"===typeof t||"boolean"===typeof t)return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const r=t[i];hr(e,i,r)?n.push(r):n.push(dr(r,e))}return n}{const e={};for(const n of Object.keys(t)){const r=t[n],i=C(n);e[i]="name"!==n&&"className"!==n||"string"!==typeof r?dr(r,n):r}return e}}
/** @license See the LICENSE file. */const pr="2.3.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gr(t,e){if(null==t.dtype||t.dtype===e.dtype)return e;try{return Object(h["Md"])(e,t.dtype)}catch(n){throw new v(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class mr{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof mr)for(const e in t.id2Value)this.id2Value[e]=t.id2Value[e],e in t.id2Mask&&(this.id2Mask[e]=t.id2Mask[e]);else{if(null==t)return;for(const e of t)this.add(e.key,e.value)}}add(t,e,n){if(null!=this.id2Value[t.id])throw new v(`Duplicate key: name=${t.name}, id=${t.id}`);return this.id2Value[t.id]=gr(t,e),this.name2Id[t.name]=t.id,null!=n&&(this.id2Mask[t.id]=n),this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return null!=this.id2Value[t.id]}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof qe){if(null==this.id2Value[t.id])throw new v("Nonexistent key: "+t.name);return this.id2Value[t.id]}{const e=this.name2Id[t];if(null==e)throw new v("Feed dict has no SymbolicTensor name: "+t);return this.id2Value[e]}}getMask(t){if(t instanceof qe){if(null==this.id2Value[t.id])throw new v("Nonexistent key: "+t.name);return this.id2Mask[t.id]}{const e=this.name2Id[t];if(null==e)throw new v("Feed dict has no SymbolicTensor name: "+t);return this.id2Mask[e]}}disposeMasks(){null!=this.id2Mask&&Object(h["ne"])(this.id2Mask)}}const vr={},yr={};function br(t,e,n,r){const i=null!=n&&n["training"],o=Array.isArray(t),a=o?t:[t],s=a.map(t=>t.name),u=[],c=e.names();for(const h of s)-1!==c.indexOf(h)?u.push(e.getValue(h)):u.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const l=s.join(",")+"|"+e.names().join(",");let f,d;if(null==vr[l]){const t=xr(a,e);f=t.sorted,d=t.recipientCounts,vr[l]=f,yr[l]=d}f=vr[l],d={},i||Object.assign(d,yr[l]);const p=new mr(e);for(let g=0;g<f.length;++g){if(null!=r){const t=Object(h["Nf"])().numTensors;t>r.maxNumTensors&&(r.maxNumTensors=t),t<r.minNumTensors&&(r.minNumTensors=t)}const t=f[g],o=t.sourceLayer;if(o instanceof tn)continue;const a=[],c=[],l=[];let m=!1;for(const n of t.inputs){const t=p.getValue(n),r=p.getMask(n);a.push(t),c.push(r),null!=r&&(m=!0),i||(d[n.name]--,0!==d[n.name]||e.hasKey(n)||-1!==s.indexOf(n.name)||t.isDisposed||!0===n.sourceLayer.stateful||l.push(t))}m&&(n=n||{},n["mask"]=c[0]);const v=S(o.apply(a,n));let y=null;o.supportsMasking&&(y=o.computeMask(a,c));const b=Or(t),x=Array.isArray(b)?b:[b];for(let e=0;e<x.length;++e){p.hasKey(x[e])||p.add(x[e],v[e],Array.isArray(y)?y[0]:y);const t=s.indexOf(x[e].name);-1!==t&&(u[t]=v[e])}i||Object(h["ne"])(l)}return p.disposeMasks(),o?u:u[0]}function xr(t,e){h["bi"].assert(null!=t&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===t.length){const i=_r(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const o of t){const{sorted:t,recipientMap:a}=_r(o,e);for(const e of t)i.has(e.name)||(n.push(e),i.add(e.name));for(const e in a)null==r[e]&&(r[e]=new Set),a[e].forEach(t=>r[e].add(t))}}return{sorted:n,recipientCounts:wr(r)}}function wr(t){const e={};for(const n in t)e[n]=t[n].size;return e}function _r(t,e){const n=new Set,r=[],i={};for(const s of e.names())n.add(s);const o=[],a=[];o.push(t);while(o.length>0){const t=o[o.length-1];if(n.has(t.name)){o.pop();continue}const e=a[a.length-1]===o.length-1;if(0===t.inputs.length||e)o.pop(),r.push(t),n.add(t.name),e&&a.pop();else{a.push(o.length-1);for(const e of t.inputs)null==i[e.name]&&(i[e.name]=new Set),i[e.name].add(t.name),n.has(e.name)||o.push(e)}}return{sorted:r,recipientMap:i}}function Or(t){let e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{let n=null;for(let e=0;e<t.sourceLayer.inboundNodes.length;++e)for(const r of t.sourceLayer.inboundNodes[e].outputTensors)if(r.id===t.id){n=e;break}e=t.sourceLayer.getOutputAt(n)}return e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Sr extends Ke{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,null==this.name){const t=this.getClassName().toLowerCase();this.name=Ie(t)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],N(this.inputs).length!==this.inputs.length)throw new v("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+this.inputs.map(t=>t.name));N(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+this.outputs.map(t=>t.name)),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const m of this.outputs){const t=m.sourceLayer,e=m.nodeIndex,n=m.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(e),this.outputLayersTensorIndices.push(n)}for(const m of this.inputs){const t=m.sourceLayer,e=m.nodeIndex,n=m.tensorIndex;w(0===e,"input layer has >1 nodes"),w(0===n,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(e),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let m=0;m<this.inputLayers.length;m++){const e=this.inputLayers[m];if(!(e instanceof tn))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${m} (0-based) originates from layer type ${e.getClassName()}.`);this.inputNames.push(e.name),this.feedInputShapes.push(e.batchInputShape),this.feedInputNames.push(e.name)}for(const m of this.outputLayers)this.outputNames.push(m.name);this.internalInputShapes=this.inputs.map(t=>t.shape),this.internalOutputShapes=this.outputs.map(t=>t.shape);const e={},n={},r={},i={},o={},a=[],s=(t,e,n,r,i,u)=>{null!=r&&null!=i&&null!=u||(r=t.sourceLayer,i=t.nodeIndex,u=t.tensorIndex);const c=r.inboundNodes[i];if(-1!==n.indexOf(c))throw new m(`The tensor ${t.name} at layer "${r.name}" is part of a cycle.`);if(-1!==e.indexOf(c))return;this.containerNodes.add(Sr.nodeKey(r,i)),r.id in o||(o[r.id]=Object.keys(o).length),-1===n.indexOf(c)&&n.push(c);const l=c.inboundLayers.length;for(let o=0;o<l;o++){const t=c.inputTensors[o],r=c.inboundLayers[o],i=c.nodeIndices[o],a=c.tensorIndices[o];s(t,e,n,r,i,a)}e.push(c);while(n.indexOf(c)>=0)n.splice(n.indexOf(c),1);a.push(c)},u=[],c=[];for(const m of this.outputs)s(m,u,c);const l=a.slice().reverse();for(const m of l){n[m.id]=m,m.id in e||(e[m.id]=0);let t=e[m.id];const o=null==r[m.outboundLayer.id]?0:r[m.outboundLayer.id];t=Math.max(t,o),r[m.outboundLayer.id]=t,i[m.outboundLayer.id]=m.outboundLayer,e[m.id]=t;for(let r=0;r<m.inboundLayers.length;r++){const i=m.inboundLayers[r],o=m.nodeIndices[r],a=i.inboundNodes[o],s=null==e[a.id]?0:e[a.id];e[a.id]=Math.max(t+1,s),n[a.id]=a}}const h={};for(const m in e){const t=e[m];t in h||(h[t]=[]),h[t].push(n[m])}const f={};for(const m in r){const t=r[m];t in f||(f[t]=[]),f[t].push(i[m])}let d=Object.keys(f).map(t=>parseInt(t,10)).sort(M);this.layers=[];for(const m of d){const t=f[m];t.sort((t,e)=>{const n=o[t.id],r=o[e.id];return n<r?-1:n>r?1:0});for(const e of t)e instanceof Sr&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=f,d=Object.keys(h).map(t=>parseInt(t,10)).sort(M);const p=this.inputs.slice(),g=[];for(const v of d)for(const t of h[v]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===p.indexOf(n))throw new m("Graph disconnected: cannot obtain value for tensor "+n+` at layer "${e.name}". The following previous layers were accessed without issue: `+g);for(const e of t.outputTensors)p.push(e);g.push(e.name)}}this.nodesByDepth=h;const y=this.layers.map(t=>t.name);for(const v of y){const t=y.filter(t=>t===v).length;if(1!==t)throw new m(`The name "${v}" is used ${t} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new Xe({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(t=>null),outputMasks:this.outputs.map(t=>null),inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs.map(t=>t.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(e=>e.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new v("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.layers)e.push(...t.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){const n={};let r=0;for(const o of this.layers)for(const t of o.weights){if(null!=n[t.originalName])throw new v("Duplicate weight name: "+t.originalName);n[t.originalName]=t,r++}const i=[];for(const o in t){let r=o;if(null==n[o]){const t=o.split("/"),e=t.slice(0,-2).concat([t[t.length-1]]);r=e.join("/")}if(null!=n[r])i.push([n[r],t[o]]);else if(e)throw new v("Provided weight data has no target variable: "+o);delete n[r]}if(e){const t=[];for(const e in n)t.push(e);if(t.length>0)throw new v(`${t.length} of ${r} weights are not set: `+t)}Ve(i)}updatedConfig(){const t=this.getConfig(),e={};return e["className"]=this.getClassName(),e["config"]=t,e["kerasVersion"]="tfjs-layers "+pr,e["backend"]="TensorFlow.js",e}toJSON(t,e=!0){const n=dr(this.updatedConfig());return e?JSON.stringify(n):n}call(t,e){return Object(h["Ph"])(()=>{t=S(t);const n=new mr;for(let e=0;e<this.inputs.length;++e)n.add(this.inputs[e],t[e]);return br(this.outputs,n,e)})}computeMask(t,e){return Object(h["Ph"])(()=>{let n;return t=S(t),n=null==e?x(null,t.length):S(e),this.runInternalGraph(t,n)[1]})}computeOutputShape(t){const e=Fe(t);if(e.length!==this.inputLayers.length)throw new v(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let a=0;a<e.length;a++){const t=this.inputLayers[a],r=e[a],i=t.name+"_0_0";n[i]=r}const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(M);if(r.length>1)for(const a of r){const t=this.nodesByDepth[a];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map(t=>t.id).indexOf(t.id))continue;const r=[];for(let s=0;s<e.inboundLayers.length;s++){const t=e.inboundLayers[s],i=e.nodeIndices[s],o=e.tensorIndices[s],a=`${t.name}_${i}_${o}`,u=n[a];r.push(u)}const i=t.computeOutputShape(O(r)),o=Fe(i),a=t.inboundNodes.indexOf(e);for(let e=0;e<o.length;e++){const r=`${t.name}_${a}_${e}`;n[r]=o[e]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const t=this.outputLayers[a],e=this.outputLayersNodeIndices[a],n=this.outputLayersTensorIndices[a],r=`${t.name}_${e}_${n}`;o.push(r)}for(let a=0;a<o.length;a++){const t=o[a];w(t in n),i.push(n[t])}return O(i)}runInternalGraph(t,e){null==e&&(e=x(null,t.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],i=t[s],o=e[s];n[r.id]=[i,o]}const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(M);for(const s of r){const t=this.nodesByDepth[s];for(const e of t){const t=e.outboundLayer,r=e.inputTensors,i=e.outputTensors,o=new Array;for(const e of r)e.id in n&&o.push(n[e.id]);if(o.length===r.length){let r,a,s,u,c={};if(null!=e.callArgs&&(c=e.callArgs),1===o.length){const[e,n]=o[0];null==c["mask"]&&(c["mask"]=n),s=S(t.call(e,c)),u=S(t.computeMask(e,n)),r=[e],a=[n]}else r=o.map(t=>t[0]),a=o.map(t=>t[1]),null==c["mask"]&&(c["mask"]=a),s=S(t.call(r,c)),u=S(t.computeMask(r,a));if(t.activityRegularizer)throw new y("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let t=0;t<i.length;++t){const e=i[t],r=s[t],o=u[t];n[e.id]=[r,o]}}}}const i=[],o=[],a=[];for(const s of this.outputs){w(s.id in n,`Could not compute output ${s.name} : ${s.id}`);const[t,e]=n[s.id];a.push(t.shape),i.push(t),o.push(e)}return[i,o,a]}buildNodeConversionMap(t){const e={};let n;for(const r of this.layers){n=r instanceof Sr?1:0;for(let t=0;t<r.inboundNodes.length;t++){const i=Sr.nodeKey(r,t);this.containerNodes.has(i)&&(e[i]=n,n+=1)}}return e}getLayer(t,e){if(null!=e){if(this.layers.length<=e)throw new v(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}if(null==t)throw new v("Provide either a layer name or layer index");for(const n of this.layers)if(n.name===t)return n;throw new v("No such layer: "+t)}calculateLosses(){return Object(h["Ph"])(()=>{const t=[];for(const e of this.layers)for(let n=0;n<e.inboundNodes.length;++n){const r=Sr.nodeKey(e,n);this.containerNodes.has(r)&&t.push(...e.calculateLosses())}return t})}getConfig(){const t={name:this.name},e=this.buildNodeConversionMap(this.layers),n=[];for(const a of this.layers){const t=a.getClassName(),r=a.getConfig(),i=[];for(let n=0;n<a.inboundNodes.length;n++){const t=a.inboundNodes[n],r=Sr.nodeKey(a,n);let s={};if(this.containerNodes.has(r)){if(t.callArgs)try{JSON.stringify(t.callArgs),s=t.callArgs}catch(o){console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: `+t.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),s={}}if(t.inboundLayers.length>0){const n=[];for(let r=0;r<t.inboundLayers.length;r++){const i=t.inboundLayers[r],o=t.nodeIndices[r],a=t.tensorIndices[r],u=Sr.nodeKey(i,o);let c=e[u];null==c&&(c=0),n.push([i.name,c,a,s])}i.push(n)}}}const s={};s["name"]=a.name,s["className"]=t,s["config"]=r,s["inboundNodes"]=i,n.push(s)}t["layers"]=n;const r=[];for(let a=0;a<this.inputLayers.length;a++){const t=this.inputLayers[a],n=this.inputLayersNodeIndices[a],i=Sr.nodeKey(t,n);if(!this.containerNodes.has(i))continue;let o=e[i];null!==o&&void 0!==o||(o=0);const s=this.inputLayersTensorIndices[a];r.push([t.name,o,s])}t["inputLayers"]=r;const i=[];for(let a=0;a<this.outputLayers.length;a++){const t=this.outputLayers[a],n=this.outputLayersNodeIndices[a],r=Sr.nodeKey(t,n);if(!this.containerNodes.has(r))continue;let o=e[r];null!==o&&void 0!==o||(o=0);const s=this.outputLayersTensorIndices[a];i.push([t.name,o,s])}return t["outputLayers"]=i,t}static fromConfig(t,e,n={},r=!1){const i={},o={};function a(t,e){t.name in o?o[t.name].push(e):o[t.name]=[e]}function s(t,e){const n=[];let r;for(const o of e){const s=o[0],u=o[1],c=o[2];if(r=null==o[3]?{}:o[3],!(s in i))return void a(t,e);const l=i[s];if(l.inboundNodes.length<=u)return void a(t,e);const h=l.inboundNodes[u];n.push(h.outputTensors[c])}n.length>0&&t.apply(O(n),r)}function u(t){const n=t["name"],o=gn(t,null!=e["customObjects"]?e["customObjects"]:{});o.setFastWeightInitDuringBuild(r),i[n]=o;const s=t["inboundNodes"];s.forEach(t=>{if(!(t instanceof Array))throw new v("Corrupted configuration, expected array for nodeData: "+t);a(o,t)})}const c=e["name"],l=e["layers"];for(const g of l)u(g);while(!I(o))for(const t of l){const e=i[t["name"]];if(e.name in o){const t=o[e.name];delete o[e.name];for(const n of t)s(e,n)}}const h=[],f=[],d=e["inputLayers"];for(const g of d){const t=g[0],e=g[1],n=g[2];w(t in i);const r=i[t],o=r.inboundNodes[e].outputTensors;h.push(o[n])}const p=e["outputLayers"];for(const g of p){const t=g[0],e=g[1],n=g[2];w(t in i);const r=i[t],o=r.inboundNodes[e].outputTensors;f.push(o[n])}return new t({inputs:h,outputs:f,name:c})}get stateful(){if(this._stateful)throw new v("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){Object(h["Ph"])(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cr(t,e,n){const r=e.length;if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>null);if(1===r)return Array.isArray(t)&&1===t.length?t:"object"===typeof t&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}if("object"===typeof t&&Object.keys(t).length>0&&"object"===typeof t[Object.keys(t)[0]]){const n=[];return e.forEach(e=>{e in t?n.push(t[e]):n.push(null)}),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function kr(t,e){return Cr(t,e,"classWeight")}async function Ar(t,e,n,r){if(null!=e||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const e=Object(h["Ph"])(()=>{if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1){const e=1;return t.argMax(e)}if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await e.data());Object(h["ne"])(e);const i=[];return r.forEach(t=>{if(null==n[t])throw new Error(`classWeight must contain all classes in the training data. The class ${t} exists in the data but not in classWeight`);i.push(n[t])}),Object(h["Hh"])(i,"float32")}return null}function Tr(t,e){return Object(h["Vf"])(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Er=32;function jr(t,e){let n,r;const i=e;n=i["xs"],r=i["ys"],h["bi"].assert(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+e);const o=Dr("input",t.inputNames,n),a=Dr("output",t.outputNames,r),s=o[0].shape[0];h["bi"].assert(o.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: `+JSON.stringify(t.inputNames)+")"),h["bi"].assert(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: `+JSON.stringify(t.outputNames)+")");for(let u=0;u<o.length;u++)h["bi"].assert(o[u].shape[0]===s,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${o[u].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);for(let u=0;u<a.length;u++)h["bi"].assert(a[u].shape[0]===s,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${a[u].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);return{xs:o,ys:a}}function Dr(t,e,n){if(n instanceof h["Zc"])return[n];if(Array.isArray(n))return h["bi"].assert(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(null==n[i])throw new v(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function Mr(t){if(3===t.length)throw new y("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Nr(t,e,n){const r=null!=n.batchesPerEpoch;if(h["bi"].assert(null!=t.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),h["bi"].assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),h["bi"].assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive integer, but got "+n.epochs),h["bi"].assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+n.batchesPerEpoch),h["bi"].assert(null==n["validationSplit"],()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=null!=n.validationData;let o,a;if(i)if(Rr(n.validationData))h["bi"].assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+n.validationBatches);else{const t=Mr(n.validationData);o=t.xs,a=t.ys}const s=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let c;c=i?u.slice().concat(u.map(t=>"val_"+t)):u.slice();const l=fn(n.callbacks,n.yieldEvery),f=null==n.verbose?1:n.verbose,{callbackList:d,history:p}=pn(l,f,n.epochs,null,null,Ir(e,n),null,i,c);d.setModel(t),t.history=p,await d.onTrainBegin(),t.stopTraining_=!1;let g=null==n.initialEpoch?0:n.initialEpoch,m=await e.iterator();while(g<n.epochs){const c={};await d.onEpochBegin(g);let l=0,f=0;r||(m=await e.iterator());while(!r||l<n.batchesPerEpoch){const e=await m.next();if(r&&e.done){console.warn("You provided `batchesPerEpoch` as "+n.batchesPerEpoch+", but your dataset iterator ran out of data after "+l+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=e.value){const{xs:r,ys:i}=jr(t,e.value),o={};o["batch"]=f,o["size"]=r[0].shape[0],await d.onBatchBegin(f,o);const a=[];if(null!=n.classWeight){const e=kr(n.classWeight,t.outputNames);for(let t=0;t<e.length;++t)a.push(await Ar(i[t],null,e[t]))}const c=r.concat(i).concat(a),p=s(c);h["ne"](c);for(let t=0;t<u.length;++t){const e=u[t],n=p[t];o[e]=n,h["kf"](n)}await d.onBatchEnd(f,o),rn(o),f++,l++}if(r?l>=n.batchesPerEpoch:e.done){if(i){let e;e=Rr(n.validationData)?S(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):S(t.evaluate(o,a,{batchSize:null==n.validationBatchSize?Er:n.validationBatchSize,verbose:0}));for(let n=0;n<t.metricsNames.length;++n)c["val_"+t.metricsNames[n]]=e[n]}break}if(t.stopTraining_)break}if(await d.onEpochEnd(g,c),g++,t.stopTraining_)break}return await d.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Ir(t,e){let n=null;return null!=e.batchesPerEpoch?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function Rr(t){return"function"===typeof t.iterator}function Fr(t){return"function"===typeof t.next}async function Pr(t,e,n){n=n||{};const r=null!=n.batches,i=t.testFunction;let o=[];if(n.verbose>0)throw new y("Verbose mode is not implemented yet.");h["bi"].assert(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(n.batches));const a=Fr(e)?e:await e.iterator();let s=0,u=0;while(!r||u<n.batches){const e=await a.next();if(o=h["Ph"](()=>{if(e.value){const{xs:n,ys:r}=jr(t,e.value),a=n.concat(r),c=h["Ph"](()=>i(a));if(h["ne"](a),0===u)for(let t=0;t<c.length;++t)o.push(Object(h["Sg"])(0));const l=a[0].shape[0];for(let t=0;t<c.length;++t){const e=c[t],n=o[t];o[t]=h["Ph"](()=>h["md"](o[t],h["Vf"](l,e))),u>0&&h["ne"](n)}h["ne"](c),s+=l,++u}return o}),e.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<o.length;++c){const t=o[c];o[c]=h["pe"](o[c],s),h["ne"](t)}return O(o)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $r(t){h["bi"].assert(t>0&&Number.isInteger(t),()=>"batchSize is required to be a positive integer, but got "+t)}function Lr(t,e,n){return null==t?[null]:Array.isArray(t)?t.map(t=>Tt(t,e,n-e)):Tt(t,e,n-e)}function zr(t,e){return h["Ph"](()=>null==t?null:Array.isArray(t)?t.map(t=>zr(t,e)):Ft(t,"int32"===e.dtype?e:e.toInt()))}function Br(t,e){const n=[];let r=0,i=null;while(r<t)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}async function Ur(t,e,n,r,i,o,a,s,u,c,l,f,d,p,g){null==i&&(i=32),null==o&&(o=1),null==l&&(l=!0),null==d&&(d=0);let m=!1;if(null!=u&&null!=c&&(m=!0),null!=g&&(m=!0,null==p))throw new v("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=t.checkNumSamples(n,i,p,"steps_per_epoch");let x;null!=b&&(x=_t(0,b)),null==a&&(a=1);const{callbackList:w,history:_}=pn(s,a,o,d,b,p,i,m,f);w.setModel(t),t.history=_,await w.onTrainBegin(),t.stopTraining_=!1;for(let v=d;v<o;++v){await w.onEpochBegin(v);const o={};if(null!=p)throw new y("stepsPerEpoch mode is not implemented yet.");{if("batch"===l)throw new y("batch shuffling is not implemneted yet");l&&h["bi"].shuffle(x);const a=Object(h["Hh"])(x),s=Br(b,i);for(let l=0;l<s.length;++l){const f={};if(await w.onBatchBegin(l,f),h["Ph"](()=>{const d=s[l][0],p=s[l][1],g=Tt(a,d,p-d);f["batch"]=l,f["size"]=p-d;const v=zr(n,g),y=e(v);for(let t=0;t<r.length;++t){const e=r[t],n=y[t];f[e]=n,h["kf"](n)}if(l===s.length-1&&m){const e=t.testLoop(u,c,i);for(let t=0;t<r.length;++t){const n=r[t],i=e[t];h["kf"](i),o["val_"+n]=i}}}),await w.onBatchEnd(l,f),rn(f),t.stopTraining_)break}a.dispose()}if(await w.onEpochEnd(v,o),t.stopTraining_)break}return await w.onTrainEnd(),await t.history.syncData(),t.history}async function Wr(t,e,n,r={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let i,o,a,s,u,c,l;t.isTraining=!0;try{const f=null==r.batchSize?32:r.batchSize;$r(f);const d=!1,p=await t.standardizeUserData(e,n,r.sampleWeight,r.classWeight,d,f);i=p[0],o=p[1],l=p[2];let g,m=!1;if(null!=r.validationData&&r.validationData.length>0){if(m=!0,2!==r.validationData.length)throw 3===r.validationData.length?new y("validationData including sample weights is not supported yet."):new v("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+r.validationData+" is invalid.");a=r.validationData[0],s=r.validationData[1];const e=!0,n=await t.standardizeUserData(a,s,null,null,e,f);u=n[0],c=n[1],g=u.concat(c)}else if(null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1){m=!0;const t=Math.floor(i[0].shape[0]*(1-r.validationSplit)),e=i[0].shape[0];u=Lr(i,t,e),i=Lr(i,0,t),c=Lr(o,t,e),o=Lr(o,0,t),g=u.concat(c)}else null!=r.validationSteps&&(m=!0);const b=i.concat(o).concat(l);t.checkTrainableWeightsConsistency();const x=t.makeTrainFunction(),w=t.getDedupedMetricsNames();let _,O;m?(t.makeTestFunction(),_=t.testFunction,O=w.slice().concat(w.map(t=>"val_"+t))):(_=null,g=[],O=w.slice());const S=fn(r.callbacks,r.yieldEvery),C=await Ur(t,x,b,w,f,r.epochs,r.verbose,S,_,g,r.shuffle,O,r.initialEpoch,null,null);return C}finally{t.isTraining=!1,Hr(i,e),Hr(o,n),Hr(u,a),Hr(c,s),null!=l&&h["ne"](l)}}function Vr(t){const e=[];t instanceof h["Zc"]&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(1===r.rank)e.push(St(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Hr(t,e){if(null==t)return;const n=[];if(e instanceof h["Zc"])n.push(e.id);else if(Array.isArray(e))e.forEach(t=>n.push(t.id));else if(null!=e)for(const i in e){const t=e[i];n.push(t.id)}const r=[];if(t instanceof h["Zc"])-1===n.indexOf(t.id)&&r.push(t);else if(Array.isArray(t))t.forEach(t=>{-1===n.indexOf(t.id)&&r.push(t)});else if(null!=t)for(const i in t){const e=t[i];-1===n.indexOf(e.id)&&r.push(e)}r.forEach(t=>{t.isDisposed||t.dispose()})}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qr(t){return t instanceof h["Zc"]}function Gr(t){return Array.isArray(t)}function Xr(t){return!qr(t)&&!Gr(t)}function Yr(t,e,n,r=!0,i=""){if(null==e||0===e.length){if(null!=t){let e=!1;if(Gr(t)&&t.length>0)e=!0;else if(Xr(t)){for(const n in t)if(t.hasOwnProperty(n)){e=!0;break}}else e=!0;if(e)throw new v(`Error when checking model ${i} expected no data, but got `+t)}return[]}if(null==t)return e.map(t=>null);let o;if(Xr(t)){t=t,o=[];for(const n of e){if(null==t[n])throw new v(`No data provided for "${n}". Need data for each key in: `+e);o.push(t[n])}}else if(Gr(t)){if(t=t,t.length!==e.length)throw new v(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): `+t);o=t}else{if(t=t,e.length>1)throw new v(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape `+t.shape);o=[t]}if(o=Vr(o),null!=n)for(let a=0;a<e.length;++a){if(null==n[a])continue;const t=o[a];if(t.shape.length!==n[a].length)throw new v(`Error when checking ${i}: expected ${e[a]} to have ${n[a].length} dimension(s). but got array with shape `+t.shape);for(let o=0;o<n[a].length;++o){if(0===o&&!r)continue;const s=t.shape[o],u=n[a][o];if(null!=u&&u>=0&&s!==u)throw new v(`Error when checking ${i}: expected ${e[a]} to have shape [${n[a]}], but got array with shape [${t.shape}].`)}}return o}function Kr(t,e,n){const r=N(t.map(t=>t.shape[0]));r.sort();const i=N(e.map(t=>t.shape[0]));if(i.sort(),r.length>1)throw new v("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(t=>t.shape)));if(i.length>1)throw new v("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(t=>t.shape)));if(r.length>0&&i.length>0&&!h["bi"].arraysEqual(r,i))throw new v(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function Zr(t,e,n){const r=[vn,Tn,Cn];for(let i=0;i<t.length;++i){const o=t[i],a=e[i],s=n[i];if(null!=a){if(a===Cn&&1===o.shape[o.shape.length-1])throw new v(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(a)){const t=o.shape.slice(1),e=s.slice(1);for(let n=0;n<t.length;++n){const r=t[n],i=e[n];if(null!=i&&r!==i)throw new v(`A target Tensor with shape ${o.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function Jr(t,e,n,r=!0,i=""){let o;if(Array.isArray(t)){if(t.length!==e.length)throw new v(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);o=t}else{if(e.length>1)throw new v(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape `+JSON.stringify(t.shape)+".");o=[t]}if(null!=n)for(let a=0;a<e.length;++a){if(null==n[a])continue;const t=o[a];if(t.shape.length!==n[a].length)throw new v(`Error when checking ${i}: expected ${e[a]} to have ${n[a].length} dimension(s), but got array with shape `+JSON.stringify(t.shape));for(let o=0;o<n[a].length;++o){if(0===o&&!r)continue;const s=t.shape[o],u=n[a][o];if(null!=u&&u!==s)throw new v(`Error when checking ${i}: expected ${e[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(t.shape)}.`)}}}function Qr(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>[]);let n;if("string"===typeof t||"function"===typeof t)n=[t];else{if(!Array.isArray(t)&&"object"!==typeof t)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+t);n=t}if(Array.isArray(n))return e.map(t=>n);{const t=[];for(const r of e){let e=n.hasOwnProperty(r)?n[r]:[];Array.isArray(e)||(e=[e]),t.push(e)}return t}}const ti="layers-model";class ei extends Sr{constructor(t){super(t),this.isTraining=!1}summary(t,e,n=console.log){if(!this.built)throw new v("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");or(this,t,e,n)}compile(t){if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"===typeof t.optimizer)this.optimizer_=er(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof h["fc"]))throw new v("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let e=[];if(Array.isArray(t.loss)||"string"===typeof t.loss||"function"===typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new v(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);const n=t.loss;e=n.map(t=>Nn(t))}else{const n=Nn(t.loss);this.outputs.forEach(t=>{e.push(n)})}else{t.loss=t.loss;for(const e in t.loss)if(-1===this.outputNames.indexOf(e))throw new v(`Unknown entry in loss dictionary: "${e}". Only expected the following keys: `+this.outputNames);for(const n of this.outputNames)null==t.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),e.push(Nn(t.loss[n]))}this.lossFunctions=e,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const t=this.internalOutputShapes[o],e=this.outputNames[o];this.feedOutputNames.push(e),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[o])}const n=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ht("loss",()=>{for(let t=0;t<this.outputs.length;++t){if(-1!==n.indexOf(t))continue;const e=this.lossFunctions[t];this.outputs.length>1&&(this.metricsTensors.push([e,t]),this.metricsNames.push(this.outputNames[t]+"_loss"))}});const r=Qr(t.metrics,this.outputNames),i=(t,e,n)=>{this.outputNames.length>1&&(e=this.outputNames[t]+"_"+e),this.metricsNames.push(e),this.metricsTensors.push([n,t])};ht("metric",()=>{for(let t=0;t<this.outputs.length;++t){if(-1!==n.indexOf(t))continue;const e=r[t],o=e=>{const n="";let r,o,a;for(const s of e){if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){const e=this.internalOutputShapes[t];let i;1===e[e.length-1]||this.lossFunctions[t]===Tn?-1!==["accuracy","acc"].indexOf(s)?o=In:-1!==["crossentropy","ce"].indexOf(s)&&(o=Bn):this.lossFunctions[t]===kn?-1!==["accuracy","acc"].indexOf(s)?o=Un:-1!==["crossentropy","ce"].indexOf(s)&&(o=Zn):-1!==["accuracy","acc"].indexOf(s)?o=Rn:-1!==["crossentropy","ce"].indexOf(s)&&(o=Yn),-1!==["accuracy","acc"].indexOf(s)?i="acc":-1!==["crossentropy","ce"].indexOf(s)&&(i="ce"),a=o,r=n+i}else{const t=Qn(s);a=t,r=n+tr(s)}let e;ht(r,()=>{e=a}),i(t,r,e)}};o(e)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,e,n={}){const r=null==n.batchSize?32:n.batchSize;$r(r);const i=!0,o=this.standardizeUserDataXY(t,e,i,r);try{const i=o[0].concat(o[1]);this.makeTestFunction();const a=this.testFunction,s=this.testLoop(a,i,r,n.verbose,n.steps);return O(s)}finally{Hr(o[0],t),Hr(o[1],e)}}async evaluateDataset(t,e){return this.makeTestFunction(),Pr(this,t,e)}checkNumSamples(t,e,n,r="steps"){let i;if(null!=n){if(i=null,null!=e)throw new v(`If ${r} is set, batchSize must be null or undefined.Got batchSize = `+e)}else{if(null==t)throw new v("Either the input data should have a defined shape, or "+r+" shoud be specified.");i=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return i}execute(t,e){if(Array.isArray(e)&&0===e.length)throw new v("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(e),r=n?e:[e],i=this.retrieveSymbolicTensors(r),o=new mr;if(t instanceof h["Zc"]&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new v(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let e=0;e<this.inputs.length;++e)o.add(this.inputs[e],t[e])}else for(const s of this.inputs){const e=t[s.name];if(null==e)throw new v("No value is provided for the model's input "+s.name);o.add(s,e)}const a=br(i,o);return n?a:a[0]}retrieveSymbolicTensors(t){const e=x(null,t.length);let n=t.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],o=i.map(t=>t.name);for(let r=0;r<t.length;++r){const a=o.indexOf(t[r]);if(-1!==a&&(e[r]=i[a],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw e.forEach((e,r)=>{null==e&&n.push(t[r])}),new v("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(n))}return e}predictLoop(t,e=32,n=!1){return h["Ph"](()=>{const r=this.checkNumSamples(t);if(n)throw new y("Verbose predictLoop() is not implemented yet.");const i=Br(r,e),o=this.outputs.map(t=>[]);for(let e=0;e<i.length;++e){const n=h["Ph"](()=>{const n=i[e][0],r=i[e][1],o=Lr(t,n,r),a=[];if(Array.isArray(o))for(let t=0;t<o.length;++t)a.push({key:this.inputs[t],value:o[t]});else a.push({key:this.inputs[0],value:o});const s=new mr(a);return br(this.outputs,s)});n.forEach((t,e)=>o[e].push(t))}return O(o.map(t=>h["Rd"](t,0)))})}predict(t,e={}){const n=Vr(t);Jr(n,this.inputNames,this.feedInputShapes,!1);try{const r=null==e.batchSize?32:e.batchSize;return $r(r),this.predictLoop(n,r)}finally{Hr(n,t)}}predictOnBatch(t){Jr(t,this.inputNames,this.feedInputShapes,!0);const e=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,e)}standardizeUserDataXY(t,e,n=!0,r){if(null==this.optimizer_)throw new m("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let o=0;o<this.feedOutputShapes.length;++o){const t=this.feedOutputShapes[o],e=this.feedLossFns[o];e===kn?i.push(t.slice(0,t.length-1).concat([1])):i.push(t)}if(t=Yr(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=Yr(e,this.feedOutputNames,i,!1,"target"),Kr(t,e,null),Zr(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&t[0].shape[0]%r!==0)throw new v(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${t[0].shape[0]} sample(s).`);return[t,e]}async standardizeUserData(t,e,n,r,i=!0,o){const[a,s]=this.standardizeUserDataXY(t,e,i,o);if(null!=n)throw new Error("sample weight is not supported yet.");let u=null;if(null!=r){const t=kr(r,this.outputNames);u=[];for(let e=0;e<t.length;++e)u.push(await Ar(s[e],null,t[e]))}return[a,s,u]}testLoop(t,e,n,r=0,i){return h["Ph"](()=>{const o=this.checkNumSamples(e,n,i,"steps"),a=[];if(r>0)throw new y("Verbose mode is not implemented yet.");if(null!=i)throw new y("steps mode in testLoop() is not implemented yet");{const r=Br(o,n),i=Object(h["Hh"])(_t(0,o));for(let n=0;n<r.length;++n){const o=r[n][0],s=r[n][1],u=Tt(i,o,s-o),c=zr(e,u),l=t(c);if(0===n)for(let t=0;t<l.length;++t)a.push(Object(h["Sg"])(0));for(let t=0;t<l.length;++t){const e=l[t];a[t]=h["md"](a[t],h["Vf"](s-o,e))}}for(let t=0;t<a.length;++t)a[t]=h["pe"](a[t],o)}return a})}getDedupedMetricsNames(){const t=this.metricsNames,e=[];for(let n=0;n<t.length;++n){const r=t[n];let i=r;if(_(t,r)>1){const e=_(t.slice(0,n),r);i+="_"+e}e.push(i)}return e}makeTrainFunction(){return t=>{const e=[],n=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],a=()=>{const t=[];for(let e=0;e<this.inputs.length;++e)t.push({key:this.inputs[e],value:n[e]});const a=new mr(t),s=br(this.outputs,a,{training:!0});let u;for(let n=0;n<this.lossFunctions.length;++n){const t=this.lossFunctions[n];let o=t(r[n],s[n]);null!=i[n]&&(o=Tr(o,i[n]));const a=h["Mf"](o);e.push(a),u=0===n?o:h["md"](u,o)}for(let n=0;n<this.metricsTensors.length;++n){let t;if(this.outputs.length>1&&n<this.outputs.length)t=e[n];else{const e=this.metricsTensors[n][0],i=this.metricsTensors[n][1];t=h["Mf"](e(r[i],s[i]))}h["kf"](t),o.push(t)}return u=h["Mf"](u),this.calculateLosses().forEach(t=>{u=h["md"](u,t)}),u},s=this.collectedTrainableWeights.map(t=>t.read()),u=!0,c=this.optimizer_.minimize(a,u,s);return[c].concat(o)}}makeTestFunction(){this.testFunction=t=>h["Ph"](()=>{const e=[];let n;const r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let t=0;t<this.inputs.length;++t)o.push({key:this.inputs[t],value:r[t]});const a=new mr(o),s=br(this.outputs,a);for(let t=0;t<this.lossFunctions.length;++t){const r=this.lossFunctions[t],o=h["Mf"](r(i[t],s[t]));n=0===t?o:h["md"](n,o),e.push(n)}for(let t=0;t<this.metricsTensors.length;++t){const n=this.metricsTensors[t][0],r=this.metricsTensors[t][1],o=h["Mf"](n(i[r],s[r]));e.push(o)}return e})}async fit(t,e,n={}){return Wr(this,t,e,n)}async fitDataset(t,e){return Nr(this,t,e)}async trainOnBatch(t,e){const n=await this.standardizeUserData(t,e),r=n[0],i=n[1],o=this.makeTrainFunction(),a=o(r.concat(i)),s=[];for(const u of a){const t=await u.data();s.push(t[0])}return h["ne"](a),O(s)}getNamedWeights(t){const e=[],n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let o=0;o<r.length;++o)n&&!r[o].trainable||e.push({name:r[o].originalName,tensor:i[o]});return e}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const e=h["Nf"]().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=e-h["Nf"]().numTensors}return t}getLossIdentifiers(){let t;if("string"===typeof this.loss)t=C(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if("string"!==typeof t)throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(t=>C(t))}else{const e=Object.keys(this.loss);t={};const n=this.loss;for(const r of e){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");t[r]=C(n[r])}}return t}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[C(tr(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>C(tr(t)));{const t={};for(const e in this.metrics)t[e]=C(tr(this.metrics[e]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(null!=t.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=t.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=t.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const e=fr(t.optimizer_config),n=gn(e);let r,i;if("string"===typeof t.loss)r=k(t.loss);else if(Array.isArray(t.loss))r=t.loss.map(t=>k(t));else if(null!=t.loss){r={};for(const e in t.loss)r[e]=k(t.loss[e])}if(Array.isArray(t.metrics))i=t.metrics.map(t=>k(t));else if(null!=t.metrics){i={};for(const e in t.metrics)i[e]=k(t.metrics[e])}this.compile({loss:r,metrics:i,optimizer:n})}async save(t,e){if("string"===typeof t){const e=h["ff"].getSaveHandlers(t);if(0===e.length)throw new v(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new v(`Found more than one (${e.length}) save handlers for URL '${t}'`);t=e[0]}if(null==t.save)throw new v("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await h["ff"].encodeWeights(this.getNamedWeights(e)),r=!1,i=null,o=this.toJSON(i,r),a={modelTopology:o,format:ti,generatedBy:"TensorFlow.js tfjs-layers v"+pr,convertedBy:null},s=null!=e&&e.includeOptimizer;if(s&&null!=this.optimizer){a.trainingConfig=this.getTrainingConfig();const t="optimizer",{data:e,specs:r}=await h["ff"].encodeWeights(await this.optimizer.getWeights(),t);n.specs.push(...r),n.data=h["ff"].concatenateArrayBuffers([n.data,e])}if(null!=this.userDefinedMetadata){const t=!0;rr(this.userDefinedMetadata,this.name,t),a.userDefinedMetadata=this.userDefinedMetadata}return a.weightData=n.data,a.weightSpecs=n.specs,t.save(a)}setUserDefinedMetadata(t){rr(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
async function ni(t,e){"modelTopology"in t||(t={modelTopology:t}),t=t;let n=t.modelTopology;null!=n["model_config"]&&(n=n["model_config"]);const r=fr(n),i=gn(r,e);if(null!=t.weightsManifest){const e=await h["ff"].loadWeights(t.weightsManifest,t.pathPrefix,i.weights.map(t=>t.originalName)),n={};for(const t of i.weights)n[t.originalName]=e[t.originalName];i.loadWeights(n),Object(h["ne"])(e)}return i}async function ri(t,e){if(null==e&&(e={}),"string"===typeof t){const n=h["ff"].getLoadHandlers(t,e);if(0===n.length)n.push(h["ff"].browserHTTPRequest(t,e));else if(n.length>1)throw new v(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return ii(t,void 0,e)}async function ii(t,e,n){if(null==n&&(n={}),null==t.load)throw new v("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;null!=i["model_config"]&&(i=i["model_config"]);const o=null==n.strict||n.strict,a=null!=r.weightData&&null!=r.weightSpecs&&o,s=gn(fr(i),e,a),u=r.trainingConfig;if(null!=u&&s.loadTrainingConfig(u),null!=r.userDefinedMetadata&&s.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new v("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:t,optimizerWeights:e}=oi(r.weightData,r.weightSpecs);s.loadWeights(t,o),null!=s.optimizer&&e.length>0&&await s.optimizer.setWeights(e),Object(h["ne"])(t),Object(h["ne"])(e.map(t=>t.tensor))}return s}function oi(t,e){const n=h["ff"].decodeWeights(t,e),r={},i=[];return e.forEach(t=>{"optimizer"===t.group?i.push({name:t.name,tensor:n[t.name]}):r[t.name]=n[t.name]}),{modelWeights:r,optimizerWeights:i}}ei.className="Model",h["Xg"].registerClass(ei);class ai extends ei{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=null!=t.name?t.name:Ie("sequential_"),null!=t.layers)for(const e of t.layers)this.add(e)}checkShape(t){const e=t.inboundNodes[0].outputTensors[0].shape;if(e.some(t=>t<0))throw new v("Negative dimension size caused by adding layer "+t.name+" with input shape ["+t.inboundNodes[0].inputTensors[0].shape+"]")}add(t){const e=t instanceof ai||t instanceof ei;let n;if(e){if(n=t,1!==n.outputs.length)throw new v("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new v("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new v("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const e=en({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(e)}if(e)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new v(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(1!==t.inboundNodes[0].outputTensors.length)throw new v("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=Qe(this.outputs[0])}this.inboundNodes=[],new Xe({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:x(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs[0].shape})}else{const e=t.apply(this.outputs[0]);if(Array.isArray(e))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[e],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,e){return null==this.model&&this.build(),this.model.call(t,e)}build(t){if($e(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ei({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,e,n=console.log){this.built||this.build(),super.summary(t,e,n)}setWeights(t){null==this.model&&this.build(),this.model.setWeights(t)}evaluate(t,e,n={}){if(!this.built)throw new m("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)}async evaluateDataset(t,e){if(!this.built)throw new m("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,e)}predict(t,e={}){return null==this.model&&this.build(),this.model.predict(t,e)}predictOnBatch(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,e,n={}){if(!this.built)throw new m("The model needs to be compiled before being used.");return this.model.fit(t,e,n)}async fitDataset(t,e){if(!this.built)throw new m("The model needs to be compiled before being used.");return this.model.fitDataset(t,e)}async trainOnBatch(t,e){return this.model.trainOnBatch(t,e)}static fromConfig(t,e,n={},r=!1){let i,o={};if(e instanceof Array){if(null==e[0].className||"Merge"===e[0]["className"])throw new v("Legacy serialization format not supported yet.");i=e}else h["bi"].assert(null!=e["layers"],()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=e["layers"],delete e["layers"],o=e;const a=new t(o);if(!(a instanceof ai))throw new y("Sequential.fromConfig called on non-Sequential input: "+a);for(const s of i){const t=void 0,e=gn(s,t,r);r&&e.setFastWeightInitDuringBuild(!0),a.add(e)}return a}set stopTraining(t){if(null==this.model)throw new v("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(null==this.model)throw new v("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const e of this.layers){const n={};n["className"]=e.getClassName(),n["config"]=e.getConfig(),t.push(n)}return{name:this.name,layers:t}}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function si(t){return new ei(t)}function ui(t){return new ai(t)}function ci(t,e){return null==e&&(e={}),ri(t,e)}function li(t){return en(t)}function hi(t,e){dn.registerCallbackConstructor(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */ai.className="Sequential",h["Xg"].registerClass(ai);class fi extends h["Xg"].Serializable{getConfig(){return{}}}class di extends fi{apply(t,e=1){return zt(t,e)}}di.className="elu",h["Xg"].registerClass(di);class pi extends fi{apply(t){return h["Vg"](t)}}pi.className="selu",h["Xg"].registerClass(pi);class gi extends fi{apply(t){return h["Gg"](t)}}gi.className="relu",h["Xg"].registerClass(gi);class mi extends fi{apply(t){return Object(h["Ph"])(()=>h["Pf"](6,h["Gg"](t)))}}mi.className="relu6",h["Xg"].registerClass(mi);class vi extends fi{apply(t){return t}}vi.className="linear",h["Xg"].registerClass(vi);class yi extends fi{apply(t){return h["bh"](t)}}yi.className="sigmoid",h["Xg"].registerClass(yi);class bi extends fi{apply(t){return Wt(t)}}bi.className="hardSigmoid",h["Xg"].registerClass(bi);class xi extends fi{apply(t){return h["nh"](t)}}xi.className="softplus",h["Xg"].registerClass(xi);class wi extends fi{apply(t){return Bt(t)}}wi.className="softsign",h["Xg"].registerClass(wi);class _i extends fi{apply(t){return h["Fh"](t)}}_i.className="tanh",h["Xg"].registerClass(_i);class Oi extends fi{apply(t,e=-1){return h["mh"](t,e)}}Oi.className="softmax",h["Xg"].registerClass(Oi);class Si extends fi{apply(t,e=-1){return h["xf"](t,e)}}function Ci(t){return t.getClassName()}function ki(t,e={}){return j(t,h["Xg"].SerializationMap.getMap().classNameMap,e,"activation")}function Ai(t){if(null==t){const t={className:"linear",config:{}};return ki(t)}if("string"===typeof t){const e={};return e["className"]=t,e["config"]={},ki(e)}return t instanceof fi?t:ki(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ti(t){if(null!=t&&"object"!==typeof t)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+t)}Si.className="logSoftmax",h["Xg"].registerClass(Si);class Ei extends h["Xg"].Serializable{}class ji extends Ei{constructor(t){super(),Ti(t),this.l1=null==t||null==t.l1?.01:t.l1,this.l2=null==t||null==t.l2?.01:t.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(t){return Object(h["Ph"])(()=>{let e=Object(h["ji"])([1]);return this.hasL1&&(e=Object(h["md"])(e,Object(h["Ch"])(h["Vf"](this.l1,Object(h["jd"])(t))))),this.hasL2&&(e=Object(h["md"])(e,Object(h["Ch"])(h["Vf"](this.l2,Pt(t))))),e.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,e){return new t({l1:e["l1"],l2:e["l2"]})}}function Di(t){return Ti(t),new ji({l1:null!=t?t.l1:null,l2:0})}function Mi(t){return Ti(t),new ji({l2:null!=t?t.l2:null,l1:0})}ji.className="L1L2",h["Xg"].registerClass(ji);const Ni={l1l2:"L1L2"};function Ii(t){return T(t)}function Ri(t,e={}){return j(t,h["Xg"].SerializationMap.getMap().classNameMap,e,"regularizer")}function Fi(t){if(null==t)return null;if("string"===typeof t){const e=t in Ni?Ni[t]:t,n={className:e,config:{}};return Ri(n)}return t instanceof Ei?t:Ri(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Pi extends Ke{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,null!=t&&(this.maxValue=t.maxValue)}call(t,e){t=Pe(t);let n=Object(h["Gg"])(t);return null!=this.maxValue&&(n=Object(h["Od"])(n,0,this.maxValue)),n}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},e=super.getConfig();return Object.assign(t,e),t}}Pi.className="ReLU",h["Xg"].registerClass(Pi);class $i extends Ke{constructor(t){super(null==t?{}:t),this.DEFAULT_ALPHA=.3,null==t&&(t={}),this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=Pe(t);return Object(h["mf"])(n,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}$i.className="LeakyReLU",h["Xg"].registerClass($i);class Li extends Ke{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==t&&(t={}),this.supportsMasking=!0,this.alphaInitializer=ge(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Fi(t.alphaRegularizer),this.alphaConstraint=K(t.alphaConstraint),null==t.sharedAxes)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else{if("number"!==typeof t.sharedAxes)throw new v("Expected sharedAxes to be a number or an array of numbers, but got "+t.sharedAxes);this.sharedAxes=[t.sharedAxes]}}build(t){t=$e(t);const e=t.slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)e[r-1]=1;this.alpha=this.addWeight("alpha",e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<t.length;++r)n[r]=t[r];this.inputSpec=[new He({ndim:t.length,axes:n})],this.built=!0}call(t,e){return t=Pe(t),Object(h["rg"])(t,this.alpha.read())}getConfig(){const t={alphaInitializer:pe(this.alphaInitializer),alphaRegularizer:Ii(this.alphaRegularizer),alphaConstraint:X(this.alphaConstraint),sharedAxes:this.sharedAxes},e=super.getConfig();return Object.assign(t,e),t}}Li.className="PReLU",h["Xg"].registerClass(Li);class zi extends Ke{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==this.DEFAULT_ALPHA)throw new y(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=Pe(t);return Object(h["ue"])(n)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}zi.className="ELU",h["Xg"].registerClass(zi);class Bi extends Ke{constructor(t){super(null==t?{}:t),this.DEFAULT_THETA=1,null==t&&(t={}),this.theta=null==t.theta?this.DEFAULT_THETA:t.theta}call(t,e){const n=Pe(t);return n.mul(Ot(n.greater(this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},e=super.getConfig();return Object.assign(t,e),t}}Bi.className="ThresholdedReLU",h["Xg"].registerClass(Bi);class Ui extends Ke{constructor(t){super(null==t?{}:t),this.DEFAULT_AXIS=1,null==t&&(t={}),this.softmax=(new Oi).apply,this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis}call(t,e){const n=Pe(t);return this.softmax(n,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Wi(t,e,n){if("number"===typeof t)return x(t,e);if(t.length!==e)throw new v(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!vt(i))throw new v(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number `+i)}return t}function Vi(t,e,n,r,i=1){if(null==t)return t;const o=e+(e-1)*(i-1);let a;return a="same"===n?t:t-o+1,Math.floor((a+r-1)/r)}function Hi(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+wt([n-e,0]);else{if("same"!==r)throw new v(`Unsupport padding mode: ${r}.`);t*=e}return t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qi(t,e){return Object(h["Ph"])(()=>(at(e),"channelsFirst"===e?h["Uh"](t,[0,2,3,1]):t))}function Gi(t,e){return Object(h["Ph"])(()=>(at(e),"channelsFirst"===e?h["Uh"](t,[0,2,3,4,1]):t))}function Xi(t,e,n,r=1,i="valid",o,a=1){return Object(h["Ph"])(()=>{if(null==o&&(o=p()),at(o),3!==t.shape.length)throw new v("The input of a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead.");if(3!==e.shape.length)throw new v("The kernel for a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new v("The bias for a conv1dWithBias operation should be 1, but is "+e.shape.length+" instead");if("channelsFirst"===o&&(t=h["Uh"](t,[0,2,1])),"causal"===i)throw new y("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=h["Wd"](t,e,r,"same"===i?"same":"valid","NWC",a);return null!=n&&(s=Lt(s,n)),s})}function Yi(t,e,n,r=[1,1],i="valid",o,a,s=null){return Object(h["Ph"])(()=>{if(null==o&&(o=p()),at(o),3!==t.rank&&4!==t.rank)throw new v(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(3!==e.rank&&4!==e.rank)throw new v(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=qi(t,o);if("causal"===i)throw new y("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=h["Ne"].conv2d({x:u,filter:e,strides:r,pad:"same"===i?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(u=h["Uh"](u,[0,3,1,2])),u})}function Ki(t,e,n,r=[1,1,1],i="valid",o,a){return Object(h["Ph"])(()=>{if(null==o&&(o=p()),at(o),4!==t.rank&&5!==t.rank)throw new v("conv3dWithBias expects input to be of rank 4 or 5, but received "+t.rank+".");if(4!==e.rank&&5!==e.rank)throw new v("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+t.rank+".");let s=Gi(t,o);if("causal"===i)throw new y("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=h["Zd"](s,e,r,"same"===i?"same":"valid","NDHWC",a),null!=n&&(s=Lt(s,n)),"channelsFirst"===o&&(s=h["Uh"](s,[0,4,1,2,3])),s})}Ui.className="Softmax",h["Xg"].registerClass(Ui);class Zi extends Ke{constructor(t,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Zi.verifyArgs(e),this.rank=t,P(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new y(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Wi(e.kernelSize,t,"kernelSize"),this.strides=Wi(null==e.strides?1:e.strides,t,"strides"),this.padding=null==e.padding?"valid":e.padding,st(this.padding),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,at(this.dataFormat),this.activation=Ai(e.activation),this.useBias=null==e.useBias||e.useBias,this.biasInitializer=ge(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=K(e.biasConstraint),this.biasRegularizer=Fi(e.biasRegularizer),this.activityRegularizer=Fi(e.activityRegularizer),this.dilationRate=Wi(null==e.dilationRate?1:e.dilationRate,t,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new v("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(this.dilationRate));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new v("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(this.dilationRate))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new v("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(this.dilationRate))}static verifyArgs(t){if(w("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!==typeof t.kernelSize&&!F(t.kernelSize,"number",1,3))throw new v(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Ci(this.activation),useBias:this.useBias,biasInitializer:pe(this.biasInitializer),biasRegularizer:Ii(this.biasRegularizer),activityRegularizer:Ii(this.activityRegularizer),biasConstraint:X(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}class Ji extends Zi{constructor(t,e){super(t,e),this.kernel=null,Ji.verifyArgs(e),this.filters=e.filters,P(this.filters,"filters"),this.kernelInitializer=ge(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=K(e.kernelConstraint),this.kernelRegularizer=Fi(e.kernelRegularizer)}build(t){t=$e(t);const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new v("The channel dimension of the input should be defined. Found "+t[e]);const n=t[e],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:n}}],this.built=!0}call(t,e){return Object(h["Ph"])(()=>{let e;t=Pe(t);const n=null==this.bias?null:this.bias.read(),r=z(this.activation.getClassName());if(null!=r&&2===this.rank)e=Yi(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)e=Xi(t,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)e=Yi(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new y("convolutions greater than 3D are not implemented yet.");e=Ki(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(e=this.activation.apply(e))}return e})}computeOutputShape(t){t=$e(t);const e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2);for(let i=0;i<n.length;++i){const t=Vi(n[i],this.kernelSize[i],this.padding,this.strides[i],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[i]);e.push(t)}let r=[t[0]];return"channelsLast"===this.dataFormat?(r=r.concat(e),r.push(this.filters)):(r.push(this.filters),r=r.concat(e)),r}getConfig(){const t={filters:this.filters,kernelInitializer:pe(this.kernelInitializer),kernelRegularizer:Ii(this.kernelRegularizer),kernelConstraint:X(this.kernelConstraint)},e=super.getConfig();return Object.assign(t,e),t}static verifyArgs(t){if(!("filters"in t)||"number"!==typeof t.filters||t.filters<1)throw new v("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(t.filters))}}class Qi extends Ji{constructor(t){super(2,t),Qi.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t["rank"],t}static verifyArgs(t){if("number"!==typeof t.kernelSize&&!F(t.kernelSize,"number",1,2))throw new v(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}Qi.className="Conv2D",h["Xg"].registerClass(Qi);class to extends Ji{constructor(t){super(3,t),to.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t["rank"],t}static verifyArgs(t){if("number"!==typeof t.kernelSize&&(!Array.isArray(t.kernelSize)||1!==t.kernelSize.length&&3!==t.kernelSize.length))throw new v(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}to.className="Conv3D",h["Xg"].registerClass(to);class eo extends Qi{constructor(t){if(super(t),this.inputSpec=[new He({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new v("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(t){if(t=$e(t),4!==t.length)throw new v("Input should have rank 4; Received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new v("The channel dimension of the inputs should be defined. Found `None`.");const n=t[e],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new He({ndim:4,axes:{[e]:n}})],this.built=!0}call(t,e){return h["Ph"](()=>{let e=Pe(t);if(4!==e.shape.length)throw new v("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+e.shape.length);const n=e.shape,r=n[0];let i,o;"channelsFirst"===this.dataFormat?(i=2,o=3):(i=1,o=2);const a=n[i],s=n[o],u=this.kernelSize[0],c=this.kernelSize[1],l=this.strides[0],f=this.strides[1],d=Hi(a,l,u,this.padding),p=Hi(s,f,c,this.padding),g=[r,d,p,this.filters];"channelsLast"!==this.dataFormat&&(e=h["Uh"](e,[0,2,3,1]));let m=h["Yd"](e,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(m=h["Uh"](m,[0,3,1,2])),null!=this.bias&&(m=Lt(m,this.bias.read(),this.dataFormat)),null!=this.activation&&(m=this.activation.apply(m)),m})}computeOutputShape(t){t=$e(t);const e=t.slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return e[n]=this.filters,e[r]=Hi(e[r],s,o,this.padding),e[i]=Hi(e[i],u,a,this.padding),e}getConfig(){const t=super.getConfig();return delete t["dilationRate"],t}}eo.className="Conv2DTranspose",h["Xg"].registerClass(eo);class no extends Ji{constructor(t,e){if(super(t,e),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==e.filters)throw new v("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=e.kernelInitializer||null!=e.kernelRegularizer||null!=e.kernelConstraint)throw new v("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=e.padding&&"same"!==e.padding&&"valid"!==e.padding)throw new v(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received `+JSON.stringify(e.padding));this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=ge(e.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Fi(e.depthwiseRegularizer),this.depthwiseConstraint=K(e.depthwiseConstraint),this.pointwiseInitializer=ge(e.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Fi(e.pointwiseRegularizer),this.pointwiseConstraint=K(e.pointwiseConstraint)}build(t){if(t=$e(t),t.length<this.rank+2)throw new v(`Inputs to SeparableConv${this.rank}D should have rank `+(this.rank+2)+", but received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e]||t[e]<0)throw new v("The channel dimension of the inputs should be defined, but found "+JSON.stringify(t[e]));const n=t[e],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(n*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new He({ndim:this.rank+2,axes:{[e]:n}})],this.built=!0}call(t,e){return Object(h["Ph"])(()=>{let e;if(t=Pe(t),1===this.rank)throw new y("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(t=h["Uh"](t,[0,2,3,1])),e=h["Wg"](t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(e=Lt(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),"channelsFirst"===this.dataFormat&&(e=h["Uh"](e,[0,3,1,2])),e})}getConfig(){const t=super.getConfig();return delete t["rank"],delete t["kernelInitializer"],delete t["kernelRegularizer"],delete t["kernelConstraint"],t["depthwiseInitializer"]=pe(this.depthwiseInitializer),t["pointwiseInitializer"]=pe(this.pointwiseInitializer),t["depthwiseRegularizer"]=Ii(this.depthwiseRegularizer),t["pointwiseRegularizer"]=Ii(this.pointwiseRegularizer),t["depthwiseConstraint"]=X(this.depthwiseConstraint),t["pointwiseConstraint"]=X(this.pointwiseConstraint),t}}no.className="SeparableConv";class ro extends no{constructor(t){super(2,t)}}ro.className="SeparableConv2D",h["Xg"].registerClass(ro);class io extends Ji{constructor(t){super(1,t),io.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t["rank"],delete t["dataFormat"],t}static verifyArgs(t){if("number"!==typeof t.kernelSize&&!F(t.kernelSize,"number",1,1))throw new v(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}io.className="Conv1D",h["Xg"].registerClass(io);class oo extends Ke{constructor(t){super(t),"number"===typeof t.cropping?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"===typeof t.cropping[0]?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,e){return Object(h["Ph"])(()=>{if(t=Pe(t),"channelsLast"===this.dataFormat){const e=jt(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return jt(e,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const e=jt(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return jt(e,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}oo.className="Cropping2D",h["Xg"].registerClass(oo);class ao extends Ke{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==t.size?this.DEFAULT_SIZE:t.size,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat}computeOutputShape(t){if("channelsFirst"===this.dataFormat){const e=null==t[2]?null:this.size[0]*t[2],n=null==t[3]?null:this.size[1]*t[3];return[t[0],t[1],e,n]}{const e=null==t[1]?null:this.size[0]*t[1],n=null==t[2]?null:this.size[1]*t[2];return[t[0],e,n,t[3]]}}call(t,e){return h["Ph"](()=>{let e=Pe(t);const n=e.shape;if("channelsFirst"===this.dataFormat){e=h["Uh"](e,[0,2,3,1]);const t=this.size[0]*n[2],r=this.size[1]*n[3],i=e.resizeNearestNeighbor([t,r]);return h["Uh"](i,[0,3,1,2])}{const t=this.size[0]*n[1],r=this.size[1]*n[2];return e.resizeNearestNeighbor([t,r])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function so(t,e,n=[1,1],r="valid",i,o){return Object(h["Ph"])(()=>{null==i&&(i=p()),at(i);let a=qi(t,i);if(4!==t.rank)throw new v("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(4!==e.rank)throw new v("depthwiseKernel is required to be 4-D, but is instead "+e.rank+"-D");return a=h["ie"](a,e,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===i&&(a=h["Uh"](a,[0,3,1,2])),a})}ao.className="UpSampling2D",h["Xg"].registerClass(ao);class uo extends Zi{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=ge(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=K(t.depthwiseConstraint),this.depthwiseRegularizer=Fi(t.depthwiseRegularizer)}build(t){if(t=$e(t),t.length<4)throw new v(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new v(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[e]}).`);const n=t[e],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return Object(h["Ph"])(()=>{t=Pe(t);let e=so(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(e=Lt(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),e})}computeOutputShape(t){t=$e(t);const e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,i=Vi(e,this.kernelSize[0],this.padding,this.strides[0]),o=Vi(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],r,i,o]:[t[0],i,o,r]}getConfig(){const t=super.getConfig();return t["depthMultiplier"]=this.depthMultiplier,t["depthwiseInitializer"]=pe(this.depthwiseInitializer),t["depthwiseRegularizer"]=Ii(this.depthwiseRegularizer),t["depthwiseConstraint"]=X(this.depthwiseRegularizer),t}}uo.className="DepthwiseConv2D",h["Xg"].registerClass(uo);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class co extends Ke{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(null==this.noiseShape)return this.noiseShape;const e=t.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n}call(t,e){return Object(h["Ph"])(()=>{this.invokeCallHook(t,e);const n=Pe(t);if(0<this.rate&&this.rate<1){const t=null!=e["training"]&&e["training"],r=this.getNoiseShape(n),i=Vt(()=>Ut(n,this.rate,r,this.seed),()=>n,t);return i}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=super.getConfig();return Object.assign(t,e),t}dispose(){return super.dispose()}}co.className="Dropout",h["Xg"].registerClass(co);class lo extends co{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const e=t.shape;return[e[0],1,e[2]]}}lo.className="SpatialDropout1D",h["Xg"].registerClass(lo);class ho extends Ke{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=[e,t.inputDim]}this.units=t.units,P(this.units,"units"),this.activation=Ai(t.activation),null!=t.useBias&&(this.useBias=t.useBias),this.kernelInitializer=ge(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=ge(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=K(t.kernelConstraint),this.biasConstraint=K(t.biasConstraint),this.kernelRegularizer=Fi(t.kernelRegularizer),this.biasRegularizer=Fi(t.biasRegularizer),this.activityRegularizer=Fi(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=$e(t);const e=t[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:e}}],this.built=!0}computeOutputShape(t){t=$e(t);const e=t.slice();return e[e.length-1]=this.units,e}call(t,e){return Object(h["Ph"])(()=>{this.invokeCallHook(t,e);const n=Pe(t),r=z(this.activation.getClassName());let i;return null!=r?i=Rt(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=Rt(n,this.kernel.read()),null!=this.bias&&(i=Lt(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i})}getConfig(){const t={units:this.units,activation:Ci(this.activation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),biasInitializer:pe(this.biasInitializer),kernelRegularizer:Ii(this.kernelRegularizer),biasRegularizer:Ii(this.biasRegularizer),activityRegularizer:Ii(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),biasConstraint:X(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}ho.className="Dense",h["Xg"].registerClass(ho);class fo extends Ke{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=$e(t);for(const e of t.slice(1))if(null==e)throw new v(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],yt(t,1)]}call(t,e){return Object(h["Ph"])(()=>{this.invokeCallHook(t,e);let n=Pe(t);if("channelsFirst"===this.dataFormat&&n.rank>1){const t=[0];for(let e=2;e<n.rank;++e)t.push(e);t.push(1),n=n.transpose(t)}return At(n)})}getConfig(){const t={};null!=this.dataFormat&&(t["dataFormat"]=this.dataFormat);const e=super.getConfig();return Object.assign(t,e),t}}fo.className="Flatten",h["Xg"].registerClass(fo);class po extends Ke{constructor(t){super(t),this.supportsMasking=!0,this.activation=Ai(t.activation)}call(t,e){return Object(h["Ph"])(()=>{this.invokeCallHook(t,e);const n=Pe(t);return this.activation.apply(n)})}getConfig(){const t={activation:Ci(this.activation)},e=super.getConfig();return Object.assign(t,e),t}}po.className="Activation",h["Xg"].registerClass(po);class go extends Ke{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,e){return Object(h["Ph"])(()=>(t=Pe(t),Ct(t,this.n)))}getConfig(){const t={n:this.n},e=super.getConfig();return Object.assign(t,e),t}}go.className="RepeatVector",h["Xg"].registerClass(go);class mo extends Ke{constructor(t){super(t),this.targetShape=t.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(t){return t<0||null==t}fixUnknownDimension(t,e){const n="Total size of new array must be unchanged.",r=e.slice();let i=1,o=null;for(let s=0;s<r.length;++s){const t=r[s];if(this.isUnknown(t)){if(null!==o)throw new v("Can only specifiy one unknown dimension.");o=s}else i*=t}const a=yt(t);if(null!==o){if(0===i||a%i!==0)throw new v(n);r[o]=a/i}else if(a!==i)throw new v(n);return r}computeOutputShape(t){let e=!1;for(let n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,e){return Object(h["Ph"])(()=>{this.invokeCallHook(t,e);const n=Pe(t),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return n.reshape(i)})}getConfig(){const t={targetShape:this.targetShape},e=super.getConfig();return Object.assign(t,e),t}}mo.className="Reshape",h["Xg"].registerClass(mo);class vo extends Ke{constructor(t){if(super(t),null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+t.dims+" instead.");const e=_t(1,t.dims.length+1);if(!h["bi"].arraysEqual(t.dims.slice().sort(),e))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new He({ndim:this.dims.length+1})]}computeOutputShape(t){t=$e(t);const e=t.slice();return this.dims.forEach((n,r)=>{e[r+1]=t[n]}),e}call(t,e){return Object(h["Uh"])(Pe(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},e=super.getConfig();return Object.assign(t,e),t}}vo.className="Permute",h["Xg"].registerClass(vo);class yo extends Ke{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,this.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={maskValue:this.maskValue};return Object.assign(e,t),e}computeMask(t,e){const n=Pe(t),r=-1;return Object(h["qd"])(Object(h["cg"])(n,this.maskValue),r)}call(t,e){return Object(h["Ph"])(()=>{this.invokeCallHook(t,e);const n=Pe(t),r=-1,i=!0,o=Object(h["qd"])(Object(h["cg"])(n,this.maskValue),r,i),a=n.mul(o.asType(n.dtype));return a})}}yo.className="Masking",h["Xg"].registerClass(yo);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class bo extends Ke{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){let e=null;null!=t.batchSize&&(e=t.batchSize),null==t.inputLength?this.batchInputShape=[e,null]:this.batchInputShape=[e].concat(S(t.inputLength))}this.inputDim=t.inputDim,P(this.inputDim,"inputDim"),this.outputDim=t.outputDim,P(this.outputDim,"outputDim"),this.embeddingsInitializer=ge(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Fi(t.embeddingsRegularizer),this.activityRegularizer=Fi(t.activityRegularizer),this.embeddingsConstraint=K(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,e){return Object(h["Ph"])(()=>this.maskZero?(t=Pe(t),Object(h["cg"])(t,Object(h["ki"])(t))):null)}computeOutputShape(t){if(t=$e(t),null==this.inputLength)return[...t,this.outputDim];const e=S(this.inputLength);if(e.length!==t.length-1)throw new v(`"inputLength" is ${this.inputLength}, but received input shape has shape `+t);{let n=0;for(let r=0;r<e.length;++r){const i=e[r],o=t[r+1];if(null!=i&&null!=o&&i!==o)throw new v(`"inputLength" is ${this.inputLength}, but received input shape has shape `+t);null==i&&(e[n]=o),n++}}return[t[0],...e,this.outputDim]}call(t,e){return Object(h["Ph"])(()=>{this.invokeCallHook(t,e);let n=Pe(t);"int32"!==n.dtype&&(n=Ot(n,"int32"));const r=Ft(this.embeddings.read(),n.as1D());return r.reshape($e(this.computeOutputShape(n.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:pe(this.embeddingsInitializer),embeddingsRegularizer:Ii(this.embeddingsRegularizer),activityRegularizer:Ii(this.activityRegularizer),embeddingsConstraint:X(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},e=super.getConfig();return Object.assign(t,e),t}}bo.className="Embedding",h["Xg"].registerClass(bo);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class xo extends Ke{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new y}computeElementwiseOpOutputShape(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;const n=t.slice(0,t.length-e.length);for(let r=0;r<e.length;++r){const i=t[t.length-e.length+r],o=e[r];if(null==i||null==o||i<0||o<0)n.push(null);else if(1===i)n.push(o);else if(1===o)n.push(i);else{if(i!==o)throw new v("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(i)}}return n}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[$e(t)]),t=t,t.length<2)throw new v(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let e=[];for(const i of t)null!=i&&null!==i[0]&&e.push(i[0]);if(e=N(e),e.length>1)throw new v(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let n=null==t[0]?null:t[0].slice(1);for(let i=1;i<t.length;++i){const e=null==t[i]?null:t[i].slice(1);n=this.computeElementwiseOpOutputShape(n,e)}const r=t.map(t=>t.length);-1===t.indexOf(null)&&1===N(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,e){return Object(h["Ph"])(()=>{if(t=t,this.reshapeRequired){const e=[],n=t.map(t=>t.rank);if(-1===n.indexOf(null)){const r=wt(n);for(let n of t){const t=n.rank;for(let e=0;e<r-t;++e)n=St(n,1);e.push(n)}return this.mergeFunction(e)}{let n=!1;for(const o of t){const t=o.rank;if(null==t){const t=o.shape,r=t[0],i=t.slice(1).concat([r]);let a=o.reshape([r].concat(yt(t.slice(1))));a=h["Uh"](a,[1,0]),a=a.reshape(i),e.push(a),n=!0}else if(t>1){const r=_t(1,t).concat([0]);e.push(h["Uh"](o,r)),n=!0}else e.push(o)}let r=this.mergeFunction(e);const i=r.rank;if(n)if(null==i){const t=r.shape,e=t.length,n=t[e-1],i=[n].concat(t.slice(0,t.length-1));r=h["Uh"](r.reshape([-1,n]),[1,0]).reshape(i)}else if(i>1){const t=[i-1].concat(_t(0,i-1));r=h["Uh"](r,t)}return r}}return this.mergeFunction(t)})}computeOutputShape(t){let e;t=t,e=null==t[0]?null:t[0].slice(1);for(let r=1;r<t.length;++r){const n=null==t[r]?null:t[r].slice(1);e=this.computeElementwiseOpOutputShape(e,n)}let n=[];for(const r of t)null!=r&&null!==r[0]&&n.push(r[0]);return n=N(n),e=1===n.length?n.concat(e):[null].concat(e),e}computeMask(t,e){return h["Ph"](()=>{if(null==e)return null;if(!Array.isArray(e))throw new v("`mask` should be an Array");if(!Array.isArray(t))throw new v("`inputs` should be an Array");if(e.length!==t.length)throw new v(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${e.length})`);if(e.every(t=>null==t))return null;e=e.map(t=>null==t?t:h["Ee"](t,0));let n=e[0];for(let t=1;t<e.length-1;++t)n=h["zf"](n,e[t]);return n})}}class wo extends xo{constructor(t){super(t)}mergeFunction(t){return Object(h["Ph"])(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=h["md"](e,t[n]);return e})}}wo.className="Add",h["Xg"].registerClass(wo);class _o extends xo{constructor(t){super(t)}mergeFunction(t){return Object(h["Ph"])(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=h["Vf"](e,t[n]);return e})}}_o.className="Multiply",h["Xg"].registerClass(_o);class Oo extends xo{constructor(t){super(t)}mergeFunction(t){return Object(h["Ph"])(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=h["md"](e,t[n]);return h["Vf"](1/t.length,e)})}}Oo.className="Average",h["Xg"].registerClass(Oo);class So extends xo{constructor(t){super(t)}mergeFunction(t){return Object(h["Ph"])(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=h["Kf"](e,t[n]);return e})}}So.className="Maximum",h["Xg"].registerClass(So);class Co extends xo{constructor(t){super(t)}mergeFunction(t){return Object(h["Ph"])(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=h["Pf"](e,t[n]);return e})}}Co.className="Minimum",h["Xg"].registerClass(Co);class ko extends xo{constructor(t){super(t),this.DEFAULT_AXIS=-1,null==t&&(t={}),this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new v("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let e=!0;for(const r of t)if(null!=r){e=!1;break}if(e)return;const n=[];for(let r=0;r<t.length;++r){const e=t[r].slice();e.splice(this.axis,1);let i=!1;for(const t of n)if(h["bi"].arraysEqual(t,e)){i=!0;break}i||n.push(e)}if(n.length>1)throw new v("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return Object(h["Ph"])(()=>Dt(t,this.axis))}computeOutputShape(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new v("A `Concatenate` layer should be called on a list of inputs.");const e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const i of e.slice(1)){if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n}computeMask(t,e){if(null==e)return null;if(!Array.isArray(e))throw new v("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new v("`inputs` should be an array for Concatenate");if(e.length!==t.length)throw new v(`Mismatch in the length of mask (${e.length}) and the legnth of inputs (${t.length})`);return h["Ph"](()=>{let n=!0;if(e.forEach(t=>{null==t||(n=!1)}),n)return null;const r=[];for(let o=0;o<t.length;++o)null==e[o]?r.push(h["gg"](t[o]).asType("bool")):e[o].rank<t[o].rank?r.push(h["Ee"](e[o],-1)):r.push(e[o]);const i=h["Rd"](r,this.axis);return h["pd"](i,-1,!1)})}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}function Ao(t,e){while(t<0)t+=e;return t}function To(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new y("batchDot is not implemented for tensors of 4D or higher rank yet");if(h["bi"].assert(t.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, but got "+t.shape.length),h["bi"].assert(t.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, but got "+e.shape.length),"number"===typeof n&&(n=[n,n]),"complex64"===t.dtype||"complex64"===e.dtype)throw new y("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;null==n&&(n=[r-1,i-2]);const o=n;return h["Ph"](()=>{let n,a;if(r>i){n=r-i;const t=[];for(let e=0;e<n;++e)t.push(1);e=e.reshape(e.shape.concat(t))}else if(i>r){n=i-r;const e=[];for(let t=0;t<n;++t)e.push(1);t=t.reshape(t.shape.concat(e))}else n=0;if(2===t.shape.length&&2===e.shape.length)a=o[0]===o[1]?t.mul(e).sum(o[0]):t.transpose([1,0]).mul(e).sum(o[1]);else{const n=o[0]!==t.shape.length-1,r=o[1]===e.shape.length-1;a=t.matMul(e,n,r)}if(n>0){let t;t=r>i?r+i-3:r-1;const e=[];for(let r=t;r<t+n;++r)e.push(r);a=a.squeeze(e)}return 1===a.shape.length&&(a=a.expandDims(1)),a})}ko.className="Concatenate",h["Xg"].registerClass(ko);class Eo extends xo{constructor(t){super(t),this.axes=t.axes,this.normalize=null!=t.normalize&&t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){h["bi"].assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0],n=t[1];if(e.length>3||n.length>3)throw new y("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(e,n);if(e[r[0]]!==n[r[1]])throw new v(`Dimension incompatibility: ${e[r[0]]} !== ${n[r[1]]}`)}mergeFunction(t){if(2!==t.length)throw new v(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let e,n=t[0],r=t[1];return e=Array.isArray(this.axes)?this.axes.map((e,n)=>Ao(e,t[n].shape.length)):[Ao(this.axes,n.shape.length),Ao(this.axes,r.shape.length)],this.normalize&&(n=mn(n,e[0]),r=mn(r,e[1])),To(n,r,e)}interpretAxes(t,e){let n;return n=Array.isArray(this.axes)?this.axes:[Ao(this.axes,t.length),Ao(this.axes,e.length)],n}computeOutputShape(t){h["bi"].assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0].slice(),n=t[1].slice();if(e.length>3||n.length>3)throw new y("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(e,n);e.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const i=e.concat(n);return 1===i.length&&i.push(1),i}computeMask(t,e){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},e=super.getConfig();return Object.assign(t,e),t}}Eo.className="Dot",h["Xg"].registerClass(Eo);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class jo extends Ke{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={stddev:this.stddev};return Object.assign(e,t),e}call(t,e){return Object(h["Ph"])(()=>{this.invokeCallHook(t,e);const n=Pe(t),r=()=>It(n.shape,0,this.stddev).add(n),i=Vt(r,()=>n,e["training"]||!1);return i})}}jo.className="GaussianNoise",h["Xg"].registerClass(jo);class Do extends Ke{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return Object(h["Ph"])(()=>{this.invokeCallHook(t,e);const n=Pe(t);if(this.rate>0&&this.rate<1){const t=()=>{const t=Math.sqrt(this.rate/(1-this.rate));return n.mul(It(n.shape,1,t))};return Vt(t,()=>n,e["training"]||!1)}return n})}}Do.className="GaussianDropout",h["Xg"].registerClass(Do);class Mo extends Ke{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||Pe(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return Object(h["Ph"])(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(t),r=()=>{const e=Pe(t),r=1.6732632423543772,i=1.0507009873554805,o=-r*i;let a=Object(h["Ye"])(Object(h["yg"])(n),this.rate);a=Ot(a,"float32");const s=((1-this.rate)*(1+this.rate*o**2))**-.5,u=-s*o*this.rate,c=e.mul(a).add(a.add(-1).mul(o));return c.mul(s).add(u)};return Vt(r,()=>Pe(t),e["training"]||!1)}return t})}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function No(t,e,n,r,i,o=.001){let a;if(2===t.rank)a=h["Ed"](t,e,n,r,i,o);else if(3===t.rank)a=h["Fd"](t,e,n,r,i,o);else{if(4!==t.rank)throw new y(`batchNormalization is not implemented for array of rank ${t.rank} yet`);a=h["Gd"](t,e,n,r,i,o)}return a}function Io(t,e,n,r,i=.001){return Object(h["Ph"])(()=>{const o=h["Tf"](t,r),a=o.mean,s=o.variance,u=No(t,a,s,n,e,i);return[u,a,s]})}function Ro(t,e,n,r,i=.001){return Object(h["Ph"])(()=>{const o=h["Tf"](t,r),a=o.mean,s=o.variance,u=[];for(const e of _t(0,t.rank))-1!==r.indexOf(e)?u.push(1):u.push(t.shape[e]);const c=a.reshape(u),l=s.reshape(u),f=null==e?null:e.reshape(u),d=null==n?null:n.reshape(u),p=No(t,c,l,d,f,i);return[p,a,s]})}function Fo(t,e,n,r,i=.001){return h["bi"].arraysEqual(r.slice().sort(),_t(0,t.rank-1))?Io(t,e,n,r,i):Ro(t,e,n,r,i)}Mo.className="AlphaDropout",h["Xg"].registerClass(Mo);class Po extends Ke{constructor(t){null==t&&(t={}),super(t),this.supportsMasking=!0,this.axis=null==t.axis?-1:t.axis,this.momentum=null==t.momentum?.99:t.momentum,this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=ge(t.betaInitializer||"zeros"),this.gammaInitializer=ge(t.gammaInitializer||"ones"),this.movingMeanInitializer=ge(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=ge(t.movingVarianceInitializer||"ones"),this.betaConstraint=K(t.betaConstraint),this.gammaConstraint=K(t.gammaConstraint),this.betaRegularizer=Fi(t.betaRegularizer),this.gammaRegularizer=Fi(t.gammaRegularizer)}build(t){t=$e(t);const e=this.axis>=0?this.axis:this.axis+t.length,n=t[e];if(null==n)throw new v(`Axis ${e} of input tensor should have a defined dimension but the layer received an input with shape `+JSON.stringify(t)+".");this.inputSpec=[new He({ndim:t.length,axes:{[e]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,e){return Object(h["Ph"])(()=>{const n=null!=e["training"]&&e["training"],r=Pe(t),i=r.shape,o=i.length,a=_t(0,o),s=this.axis>=0?this.axis:this.axis+o;a.splice(s,1);const u=x(1,o);u[s]=i[s];const c=a.slice();c.sort();const l=!h["bi"].arraysEqual(c,_t(0,o).slice(0,o-1)),f=()=>{if(l){const t=this.movingMean.read().reshape(u),e=this.movingVariance.read().reshape(u),n=this.center?this.beta.read().reshape(u):null,i=this.scale?this.gamma.read().reshape(u):null;return No(r,t,e,n,i,this.epsilon)}return No(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)};if(!n)return f();const[d,p,g]=Fo(r,this.gamma.read(),this.beta.read(),a,this.epsilon),m=(t,e,n)=>{h["Ph"](()=>{const r=1-n,i=t.read(),o=i.sub(e).mul(r);t.write(i.sub(o))})},v=()=>{m(this.movingMean,p,this.momentum),m(this.movingVariance,g,this.momentum)};return v(),d})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:pe(this.betaInitializer),gammaInitializer:pe(this.gammaInitializer),movingMeanInitializer:pe(this.movingMeanInitializer),movingVarianceInitializer:pe(this.movingVarianceInitializer),betaRegularizer:Ii(this.betaRegularizer),gammaRegularizer:Ii(this.gammaRegularizer),betaConstraint:X(this.betaConstraint),gammaConstraint:X(this.gammaConstraint)},e=super.getConfig();return Object.assign(t,e),t}}Po.className="BatchNormalization",h["Xg"].registerClass(Po);class $o extends Ke{constructor(t){if(null==t&&(t={}),super(t),this.axis=null==t.axis?-1:t.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received "+this.axis)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(this.axis));for(const t of this.axis)if(!Number.isInteger(t))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(this.axis))}this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=ge(t.betaInitializer||"zeros"),this.gammaInitializer=ge(t.gammaInitializer||"ones"),this.betaRegularizer=Fi(t.betaRegularizer),this.gammaRegularizer=Fi(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=$e(t);const e=t.length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=e);for(const i of this.axis)if(i<0||i>=e)throw new Error("Invalid axis: "+i);if(this.axis.length!==N(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);const n=this.axis.map(e=>t[e]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(t,e){const n=Pe(t),r=n.shape,i=r.length;return Object(h["Ph"])(()=>{const t=!0;let{mean:e,variance:o}=Object(h["Tf"])(n,this.axis,t);const a=x(1,i);for(const n of this.axis)a[n]=r[n];const s=t=>null!=t&&t.shape.length!==i&&this.axis!==[i-1]?t.reshape(a):t;let u=s(this.gamma.read()),c=s(this.beta.read());const l=[],f=[];for(let n=0;n<i;++n)-1!==this.axis.indexOf(n)?(l.push(r[n]),f.push(1)):(l.push(1),f.push(r[n]));return e=e.tile(l),o=o.tile(l),u=u.tile(f),c=c.tile(f),No(n,e,o,c,u,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:pe(this.betaInitializer),gammaInitializer:pe(this.gammaInitializer),betaRegularizer:Ii(this.betaRegularizer),gammaRegularizer:Ii(this.gammaRegularizer)},e=super.getConfig();return Object.assign(t,e),t}}function Lo(t,e,n){return Object(h["Ph"])(()=>{if(4!==t.rank)throw new v("temporalPadding expects input tensor to be 4-D, but received a "+t.rank+"-D tensor.");if(null==e&&(e=[[1,1],[1,1]]),2!==e.length||2!==e[0].length||2!==e[1].length)throw new v("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n=p()),"channelsLast"!==n&&"channelsFirst"!==n)throw new v(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===n?[[0,0],[0,0],e[0],e[1]]:[[0,0],e[0],e[1],[0,0]],h["jg"](t,r)})}$o.className="LayerNormalization",h["Xg"].registerClass($o);class zo extends Ke{constructor(t){if(null==t&&(t={}),super(t),this.dataFormat=null==t.dataFormat?p():t.dataFormat,null==t.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof t.padding)this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new v(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let e,n;if("number"===typeof t.padding[0])e=[t.padding[0],t.padding[0]],n=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new v(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(e=t.padding[0],2!==t.padding[1].length)throw new v(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);n=t.padding[1]}this.padding=[e,n]}this.inputSpec=[new He({ndim:4})]}computeOutputShape(t){let e,n;return t=$e(t),"channelsFirst"===this.dataFormat?(e=null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null,[t[0],t[1],e,n]):(e=null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,[t[0],e,n,t[3]])}call(t,e){return Object(h["Ph"])(()=>Lo(Pe(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Bo(t,e,n,r,i,o){return Object(h["Ph"])(()=>{let a;at(i),ut(o),st(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i=p()),null==o&&(o="max"),t=qi(t,i);const s="same"===r?"same":"valid";return a="max"===o?h["Hf"](t,e,n,s):h["yd"](t,e,n,s),"channelsFirst"===i&&(a=h["Uh"](a,[0,3,1,2])),a})}function Uo(t,e,n,r,i,o){return Object(h["Ph"])(()=>{let a;at(i),ut(o),st(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i=p()),null==o&&(o="max"),t=Gi(t,i);const s="same"===r?"same":"valid";return a="max"===o?h["If"](t,e,n,s):h["zd"](t,e,n,s),"channelsFirst"===i&&(a=h["Uh"](a,[0,4,1,2,3])),a})}zo.className="ZeroPadding2D",h["Xg"].registerClass(zo);class Wo extends Ke{constructor(t){if(null==t.poolSize&&(t.poolSize=2),super(t),"number"===typeof t.poolSize)this.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!==typeof t.poolSize[0])throw new v("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));this.poolSize=t.poolSize}if(P(this.poolSize,"poolSize"),null==t.strides)this.strides=this.poolSize;else if("number"===typeof t.strides)this.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!==typeof t.strides[0])throw new v("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));this.strides=t.strides}P(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,st(this.padding),this.inputSpec=[new He({ndim:3})]}computeOutputShape(t){t=$e(t);const e=Vi(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]}call(t,e){return Object(h["Ph"])(()=>{this.invokeCallHook(t,e),t=St(Pe(t),2);const n=this.poolingFunction(Pe(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return h["wh"](n,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(t,e),t}}class Vo extends Wo{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return at(i),st(r),Bo(t,e,n,r,i,"max")}}Vo.className="MaxPooling1D",h["Xg"].registerClass(Vo);class Ho extends Wo{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return at(i),st(r),Bo(t,e,n,r,i,"avg")}}Ho.className="AveragePooling1D",h["Xg"].registerClass(Ho);class qo extends Ke{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new v("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+t.strides.length+".");this.strides=t.strides}else this.strides=[t.strides,t.strides];P(this.poolSize,"poolSize"),P(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,at(this.dataFormat),st(this.padding),this.inputSpec=[new He({ndim:4})]}computeOutputShape(t){t=$e(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=Vi(e,this.poolSize[0],this.padding,this.strides[0]),n=Vi(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]}call(t,e){return Object(h["Ph"])(()=>(this.invokeCallHook(t,e),this.poolingFunction(Pe(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class Go extends qo{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return at(i),st(r),Bo(t,e,n,r,i,"max")}}Go.className="MaxPooling2D",h["Xg"].registerClass(Go);class Xo extends qo{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return at(i),st(r),Bo(t,e,n,r,i,"avg")}}Xo.className="AveragePooling2D",h["Xg"].registerClass(Xo);class Yo extends Ke{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new v("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+t.strides.length+".");this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];P(this.poolSize,"poolSize"),P(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,at(this.dataFormat),st(this.padding),this.inputSpec=[new He({ndim:5})]}computeOutputShape(t){t=$e(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[4]:t[3];return e=Vi(e,this.poolSize[0],this.padding,this.strides[0]),n=Vi(n,this.poolSize[1],this.padding,this.strides[1]),r=Vi(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n,r]:[t[0],e,n,r,t[4]]}call(t,e){return Object(h["Ph"])(()=>(this.invokeCallHook(t,e),this.poolingFunction(Pe(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class Ko extends Yo{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return at(i),st(r),Uo(t,e,n,r,i,"max")}}Ko.className="MaxPooling3D",h["Xg"].registerClass(Ko);class Zo extends Yo{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return at(i),st(r),Uo(t,e,n,r,i,"avg")}}Zo.className="AveragePooling3D",h["Xg"].registerClass(Zo);class Jo extends Ke{constructor(t){super(t),this.inputSpec=[new He({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,e){throw new y}}class Qo extends Jo{constructor(t){super(t||{})}call(t,e){return Object(h["Ph"])(()=>{const e=Pe(t);return h["Mf"](e,1)})}}Qo.className="GlobalAveragePooling1D",h["Xg"].registerClass(Qo);class ta extends Jo{constructor(t){super(t||{})}call(t,e){return Object(h["Ph"])(()=>{const e=Pe(t);return h["Gf"](e,1)})}}ta.className="GlobalMaxPooling1D",h["Xg"].registerClass(ta);class ea extends Ke{constructor(t){super(t),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,at(this.dataFormat),this.inputSpec=[new He({ndim:4})]}computeOutputShape(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]}call(t,e){throw new y}getConfig(){const t={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class na extends ea{call(t,e){return Object(h["Ph"])(()=>{const e=Pe(t);return"channelsLast"===this.dataFormat?h["Mf"](e,[1,2]):h["Mf"](e,[2,3])})}}na.className="GlobalAveragePooling2D",h["Xg"].registerClass(na);class ra extends ea{call(t,e){return Object(h["Ph"])(()=>{const e=Pe(t);return"channelsLast"===this.dataFormat?h["Gf"](e,[1,2]):h["Gf"](e,[2,3])})}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function ia(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new v("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(t){return null==t||Array.isArray(t)?t:[t]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function oa(t,e,n,r=!1,i,o,a=!1,s=!1){return h["Ph"](()=>{const u=e.shape.length;if(u<3)throw new v(`Input should be at least 3D, but is ${u}D.`);const c=[1,0].concat(_t(2,u));if(e=h["Uh"](e,c),null!=o)throw new y("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&(i=i.asType("bool").asType("float32"),i.rank===u-1&&(i=h["Ee"](i,-1)),i=h["Uh"](i,c)),r&&(e=h["Kg"](e,0),null!=i&&(i=h["Kg"](i,0)));const l=[];let f,d=n;const p=e.shape[0],g=h["Zh"](e);let m,b;null!=i&&(m=h["Zh"](i));for(let e=0;e<p;++e){const n=g[e],r=h["Ph"](()=>t(n,d));if(null==i)f=r[0],d=r[1];else{const t=h["Ph"](()=>{const t=m[e],n=h["gg"](t).sub(t),i=r[0].mul(t).add(d[0].mul(n)),o=d.map((e,i)=>r[1][i].mul(t).add(e.mul(n)));return{output:i,newStates:o}});f=t.output,d=t.newStates}s&&l.push(f)}if(s){const t=1;b=h["xh"](l,t)}return[f,b,d]})}ra.className="GlobalMaxPooling2D",h["Xg"].registerClass(ra);class aa extends Ke{constructor(t){let e;if(super(t),null==t.cell)throw new v("cell property is missing for the constructor of RNN.");if(e=Array.isArray(t.cell)?new pa({cells:t.cell}):t.cell,null==e.stateSize)throw new v("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=e,this.returnSequences=null!=t.returnSequences&&t.returnSequences,this.returnState=null!=t.returnState&&t.returnState,this.goBackwards=null!=t.goBackwards&&t.goBackwards,this._stateful=null!=t.stateful&&t.stateful,this.unroll=null!=t.unroll&&t.unroll,this.supportsMasking=!0,this.inputSpec=[new He({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return _t(0,t).map(t=>null)}return this.states_}setStates(t){this.states_=t}computeOutputShape(t){Re(t)&&(t=t[0]),t=t;let e=this.cell.stateSize;Array.isArray(e)||(e=[e]);const n=e[0];let r;if(r=this.returnSequences?[t[0],t[1],n]:[t[0],n],this.returnState){const n=[];for(const r of e)n.push([t[0],r]);return[r].concat(n)}return r}computeMask(t,e){return h["Ph"](()=>{Array.isArray(e)&&(e=e[0]);const t=this.returnSequences?e:null;if(this.returnState){const e=this.states.map(t=>null);return[t].concat(e)}return t})}get states(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[];for(let n=0;n<t;++n)e.push(null);return e}return this.states_}set states(t){this.states_=t}build(t){const e=null;if(null!=this.numConstants)throw new y("Constants support is not implemented in RNN yet.");Re(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,r=t[t.length-1];this.inputSpec[0]=new He({shape:[n,null,r]});const i=[t[0]].concat(t.slice(2));if(null!=e)throw new y("Constants support is not implemented in RNN yet.");let o;if(this.cell.build(i),o=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!h["bi"].arraysEqual(this.stateSpec.map(t=>t.shape[t.shape.length-1]),o))throw new v(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is `+this.cell.stateSize)}else this.stateSpec=o.map(t=>new He({shape:[null,t]}));this.stateful&&this.resetStates()}resetStates(t,e=!1){Object(h["Ph"])(()=>{if(!this.stateful)throw new g("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new v("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(t=>h["ji"]([n,t])):this.states_=[h["ji"]([n,this.cell.stateSize])];else if(null==t)h["ne"](this.states_),null!=this.keptStates&&(h["ne"](this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(t=>h["ji"]([n,t])):this.states_[0]=h["ji"]([n,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new v(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: `+t);!0===e?this.keptStates.push(this.states_.slice()):h["ne"](this.states_);for(let e=0;e<this.states_.length;++e){const r=t[e],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[e]:this.cell.stateSize,o=[n,i];if(!h["bi"].arraysEqual(r.shape,o))throw new v(`State ${e} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${r.shape}`);this.states_[e]=r}}this.states_=this.states_.map(t=>h["kf"](t.clone()))})}apply(t,e){let n=null==e?null:e["initialState"],r=null==e?null:e["constants"];null==e&&(e={});const i=ia(t,n,r,this.numConstants);t=i.inputs,n=i.initialState,r=i.constants;let o=[],a=[];if(null!=n){e["initialState"]=n,o=o.concat(n),this.stateSpec=[];for(const t of n)this.stateSpec.push(new He({shape:t.shape}));a=a.concat(this.stateSpec)}null!=r&&(e["constants"]=r,o=o.concat(r),this.numConstants=r.length);const s=o[0]instanceof qe;if(s){const n=[t].concat(o),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,e);return this.inputSpec=i,s}return super.apply(t,e)}call(t,e){return Object(h["Ph"])(()=>{const n=null==e?null:e["mask"],r=null==e?null:e["training"];let i=null==e?null:e["initialState"];t=Pe(t),null==i&&(i=this.stateful?this.states_:this.getInitialState(t));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new v(`RNN Layer has ${o} state(s) but was passed `+i.length+" initial state(s).");this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:r},s=(t,e)=>{const n=this.cell.call([t].concat(e),a);return[n[0],n.slice(1)]},u=oa(s,t,i,this.goBackwards,n,null,this.unroll,this.returnSequences),c=u[0],l=u[1],h=u[2];this.stateful&&this.resetStates(h,r);const f=this.returnSequences?l:c;return this.returnState?[f].concat(h):f})}getInitialState(t){return Object(h["Ph"])(()=>{let e=h["ji"](t.shape);return e=h["Ch"](e,[1,2]),e=St(e),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>t>1?Nt(e,[1,t]):e):this.cell.stateSize>1?[Nt(e,[1,this.cell.stateSize])]:[e]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t["numConstants"]=this.numConstants);const e=this.cell.getConfig();t["cell"]={className:this.cell.getClassName(),config:e};const n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,e,n={}){const r=e["cell"],i=gn(r,n);return new t(Object.assign(e,{cell:i}))}}aa.className="RNN",h["Xg"].registerClass(aa);class sa extends Ke{}class ua extends sa{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,P(this.units,"units"),this.activation=Ai(null==t.activation?this.DEFAULT_ACTIVATION:t.activation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=ge(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ge(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ge(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Fi(t.kernelRegularizer),this.recurrentRegularizer=Fi(t.recurrentRegularizer),this.biasRegularizer=Fi(t.biasRegularizer),this.kernelConstraint=K(t.kernelConstraint),this.recurrentConstraint=K(t.recurrentConstraint),this.biasConstraint=K(t.biasConstraint),this.dropout=xt([1,wt([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=xt([1,wt([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=$e(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return Object(h["Ph"])(()=>{if(t=t,2!==t.length)throw new v(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let n=t[1];t=t[0];const r=null!=e["training"]&&e["training"];let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ga(()=>h["gg"](t),this.dropout,r)),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ga(()=>h["gg"](n),this.recurrentDropout,r));const o=this.dropoutMask,a=this.recurrentDropoutMask;i=Rt(null!=o?h["Vf"](t,o):t,this.kernel.read()),null!=this.bias&&(i=Lt(i,this.bias.read())),null!=a&&(n=h["Vf"](n,a));let s=h["md"](i,Rt(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]})}getConfig(){const t={units:this.units,activation:Ci(this.activation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),recurrentInitializer:pe(this.recurrentInitializer),biasInitializer:pe(this.biasInitializer),kernelRegularizer:Ii(this.kernelRegularizer),recurrentRegularizer:Ii(this.recurrentRegularizer),biasRegularizer:Ii(this.biasRegularizer),activityRegularizer:Ii(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),recurrentConstraint:X(this.recurrentConstraint),biasConstraint:X(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},e=super.getConfig();return Object.assign(t,e),t}}ua.className="SimpleRNNCell",h["Xg"].registerClass(ua);class ca extends aa{constructor(t){t.cell=new ua(t),super(t)}call(t,e){return Object(h["Ph"])(()=>{null!=this.cell.dropoutMask&&(h["ne"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(h["ne"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}get units(){return this.cell.units}get activation(){return this.cell.activation}get useBias(){return this.cell.useBias}get kernelInitializer(){return this.cell.kernelInitializer}get recurrentInitializer(){return this.cell.recurrentInitializer}get biasInitializer(){return this.cell.biasInitializer}get kernelRegularizer(){return this.cell.kernelRegularizer}get recurrentRegularizer(){return this.cell.recurrentRegularizer}get biasRegularizer(){return this.cell.biasRegularizer}get kernelConstraint(){return this.cell.kernelConstraint}get recurrentConstraint(){return this.cell.recurrentConstraint}get biasConstraint(){return this.cell.biasConstraint}get dropout(){return this.cell.dropout}get recurrentDropout(){return this.cell.recurrentDropout}getConfig(){const t={units:this.units,activation:Ci(this.activation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),recurrentInitializer:pe(this.recurrentInitializer),biasInitializer:pe(this.biasInitializer),kernelRegularizer:Ii(this.kernelRegularizer),recurrentRegularizer:Ii(this.recurrentRegularizer),biasRegularizer:Ii(this.biasRegularizer),activityRegularizer:Ii(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),recurrentConstraint:X(this.recurrentConstraint),biasConstraint:X(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},e=super.getConfig();return delete e["cell"],Object.assign(t,e),t}static fromConfig(t,e){return new t(e)}}ca.className="SimpleRNN",h["Xg"].registerClass(ca);class la extends sa{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new v("GRUCell does not support reset_after parameter set to true.");this.units=t.units,P(this.units,"units"),this.activation=Ai(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Ai(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=ge(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ge(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ge(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Fi(t.kernelRegularizer),this.recurrentRegularizer=Fi(t.recurrentRegularizer),this.biasRegularizer=Fi(t.biasRegularizer),this.kernelConstraint=K(t.kernelConstraint),this.recurrentConstraint=K(t.recurrentConstraint),this.biasConstraint=K(t.biasConstraint),this.dropout=xt([1,wt([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=xt([1,wt([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=$e(t);const e=t[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return Object(h["Ph"])(()=>{if(t=t,2!==t.length)throw new v("GRUCell expects 2 input Tensors (inputs, h, c), got "+t.length+".");const n=null!=e["training"]&&e["training"];let r=t[1];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ga(()=>h["gg"](t),this.dropout,n,3)),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ga(()=>h["gg"](r),this.recurrentDropout,n,3));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,s,u;0<this.dropout&&this.dropout<1&&(t=h["Vf"](t,i[0]));let c=Rt(t,this.kernel.read());this.useBias&&(c=Lt(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=h["Vf"](r,o[0]));const l=this.recurrentKernel.read(),[f,d]=h["rh"](l,[2*this.units,this.units],l.rank-1),p=Rt(r,f),[g,m,y]=h["rh"](c,3,c.rank-1),[b,x]=h["rh"](p,2,p.rank-1);a=this.recurrentActivation.apply(h["md"](g,b)),s=this.recurrentActivation.apply(h["md"](m,x));const w=Rt(h["Vf"](s,r),d);u=this.activation.apply(h["md"](y,w));const _=h["md"](h["Vf"](a,r),h["Vf"](h["md"](1,h["Zf"](a)),u));return[_,_]})}getConfig(){const t={units:this.units,activation:Ci(this.activation),recurrentActivation:Ci(this.recurrentActivation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),recurrentInitializer:pe(this.recurrentInitializer),biasInitializer:pe(this.biasInitializer),kernelRegularizer:Ii(this.kernelRegularizer),recurrentRegularizer:Ii(this.recurrentRegularizer),biasRegularizer:Ii(this.biasRegularizer),activityRegularizer:Ii(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),recurrentConstraint:X(this.recurrentConstraint),biasConstraint:X(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1},e=super.getConfig();return Object.assign(t,e),t}}la.className="GRUCell",h["Xg"].registerClass(la);class ha extends aa{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new la(t),super(t)}call(t,e){return Object(h["Ph"])(()=>{null!=this.cell.dropoutMask&&(h["ne"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(h["ne"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}get units(){return this.cell.units}get activation(){return this.cell.activation}get recurrentActivation(){return this.cell.recurrentActivation}get useBias(){return this.cell.useBias}get kernelInitializer(){return this.cell.kernelInitializer}get recurrentInitializer(){return this.cell.recurrentInitializer}get biasInitializer(){return this.cell.biasInitializer}get kernelRegularizer(){return this.cell.kernelRegularizer}get recurrentRegularizer(){return this.cell.recurrentRegularizer}get biasRegularizer(){return this.cell.biasRegularizer}get kernelConstraint(){return this.cell.kernelConstraint}get recurrentConstraint(){return this.cell.recurrentConstraint}get biasConstraint(){return this.cell.biasConstraint}get dropout(){return this.cell.dropout}get recurrentDropout(){return this.cell.recurrentDropout}get implementation(){return this.cell.implementation}getConfig(){const t={units:this.units,activation:Ci(this.activation),recurrentActivation:Ci(this.recurrentActivation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),recurrentInitializer:pe(this.recurrentInitializer),biasInitializer:pe(this.biasInitializer),kernelRegularizer:Ii(this.kernelRegularizer),recurrentRegularizer:Ii(this.recurrentRegularizer),biasRegularizer:Ii(this.biasRegularizer),activityRegularizer:Ii(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),recurrentConstraint:X(this.recurrentConstraint),biasConstraint:X(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1},e=super.getConfig();return delete e["cell"],Object.assign(t,e),t}static fromConfig(t,e){return 0===e["implmentation"]&&(e["implementation"]=1),new t(e)}}ha.className="GRU",h["Xg"].registerClass(ha);class fa extends sa{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,P(this.units,"units"),this.activation=Ai(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Ai(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=ge(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ge(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ge(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=Fi(t.kernelRegularizer),this.recurrentRegularizer=Fi(t.recurrentRegularizer),this.biasRegularizer=Fi(t.biasRegularizer),this.kernelConstraint=K(t.kernelConstraint),this.recurrentConstraint=K(t.recurrentConstraint),this.biasConstraint=K(t.biasConstraint),this.dropout=xt([1,wt([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=xt([1,wt([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var e;t=$e(t);const n=t[t.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const t=this.biasInitializer,n=this.units;r=new(e=class extends Yt{apply(e,r){const i=t.apply([n]),o=(new Zt).apply([n]),a=t.apply([2*n]);return Mt(Mt(i,o),a)}},e.className="CustomInit",e)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,e){return Object(h["Ph"])(()=>{const n=null!=e["training"]&&e["training"];if(t=t,3!==t.length)throw new v("LSTMCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");let r=t[1];const i=t[2];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ga(()=>h["gg"](t),this.dropout,n,4)),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ga(()=>h["gg"](r),this.recurrentDropout,n,4));const o=this.dropoutMask,a=this.recurrentDropoutMask;let s,u,c,l;0<this.dropout&&this.dropout<1&&(t=h["Vf"](t,o[0]));let f=Rt(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=h["Vf"](r,a[0])),f=h["md"](f,Rt(r,this.recurrentKernel.read())),this.useBias&&(f=Lt(f,this.bias.read()));const[d,p,g,m]=h["rh"](f,4,f.rank-1);s=this.recurrentActivation.apply(d),u=this.recurrentActivation.apply(p),c=h["md"](h["Vf"](u,i),h["Vf"](s,this.activation.apply(g))),l=this.recurrentActivation.apply(m);const y=h["Vf"](l,this.activation.apply(c));return[y,y,c]})}getConfig(){const t={units:this.units,activation:Ci(this.activation),recurrentActivation:Ci(this.recurrentActivation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),recurrentInitializer:pe(this.recurrentInitializer),biasInitializer:pe(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ii(this.kernelRegularizer),recurrentRegularizer:Ii(this.recurrentRegularizer),biasRegularizer:Ii(this.biasRegularizer),activityRegularizer:Ii(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),recurrentConstraint:X(this.recurrentConstraint),biasConstraint:X(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},e=super.getConfig();return Object.assign(t,e),t}}fa.className="LSTMCell",h["Xg"].registerClass(fa);class da extends aa{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new fa(t),super(t)}call(t,e){return Object(h["Ph"])(()=>{null!=this.cell.dropoutMask&&(h["ne"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(h["ne"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}get units(){return this.cell.units}get activation(){return this.cell.activation}get recurrentActivation(){return this.cell.recurrentActivation}get useBias(){return this.cell.useBias}get kernelInitializer(){return this.cell.kernelInitializer}get recurrentInitializer(){return this.cell.recurrentInitializer}get biasInitializer(){return this.cell.biasInitializer}get unitForgetBias(){return this.cell.unitForgetBias}get kernelRegularizer(){return this.cell.kernelRegularizer}get recurrentRegularizer(){return this.cell.recurrentRegularizer}get biasRegularizer(){return this.cell.biasRegularizer}get kernelConstraint(){return this.cell.kernelConstraint}get recurrentConstraint(){return this.cell.recurrentConstraint}get biasConstraint(){return this.cell.biasConstraint}get dropout(){return this.cell.dropout}get recurrentDropout(){return this.cell.recurrentDropout}get implementation(){return this.cell.implementation}getConfig(){const t={units:this.units,activation:Ci(this.activation),recurrentActivation:Ci(this.recurrentActivation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),recurrentInitializer:pe(this.recurrentInitializer),biasInitializer:pe(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ii(this.kernelRegularizer),recurrentRegularizer:Ii(this.recurrentRegularizer),biasRegularizer:Ii(this.biasRegularizer),activityRegularizer:Ii(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),recurrentConstraint:X(this.recurrentConstraint),biasConstraint:X(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},e=super.getConfig();return delete e["cell"],Object.assign(t,e),t}static fromConfig(t,e){return 0===e["implmentation"]&&(e["implementation"]=1),new t(e)}}da.className="LSTM",h["Xg"].registerClass(da);class pa extends sa{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?t.push(...e.stateSize):t.push(e.stateSize);return t}call(t,e){return Object(h["Ph"])(()=>{t=t;let n=t.slice(1);const r=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?r.push(n.splice(0,t.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const s=this.cells[a];n=r[a],o=0===a?[t[0]].concat(n):[o[0]].concat(n),o=s.call(o,e),i.push(o.slice(1))}n=[];for(const t of i.slice().reverse())n.push(...t);return[o[0]].concat(n)})}build(t){let e;Re(t)&&(t=t[0]),t=t,this.cells.forEach((n,r)=>{ht("RNNCell_"+r,()=>{n.build(t),e=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,t=[t[0],e]})}),this.built=!0}getConfig(){const t=[];for(const r of this.cells)t.push({className:r.getClassName(),config:r.getConfig()});const e={cells:t},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(t,e,n={}){const r=[];for(const i of e["cells"])r.push(gn(i,n));return new t({cells:r})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.cells)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e.concat(t)}return t}getWeights(){const t=[];for(const e of this.cells)t.push(...e.weights);return We(t)}setWeights(t){const e=[];for(const n of this.cells){const r=n.weights.length,i=t.splice(r);for(let t=0;t<n.weights.length;++t)e.push([n.weights[t],i[t]])}Ve(e)}}function ga(t,e,n=null,r=1){function i(){return Ut(t(),e)}if(r>1){const e=[];for(let o=0;o<r;o++)e.push(Vt(i,t,n));return e.map(t=>h["kf"](t.clone()))}return h["kf"](Vt(i,t,n).clone())}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */pa.className="StackedRNNCells",h["Xg"].registerClass(pa);class ma extends Ke{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(t){null!=this.layer&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(t,e),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,e,n={}){const r=e["layer"],i=gn(r,n);delete e["layer"];const o={layer:i};return Object.assign(o,e),new t(o)}}class va extends ma{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=$e(t),t.length<3)throw new v("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];const e=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(e),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=$e(t);const e=[t[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e),r=t[1];return[n[0],r].concat(n.slice(1))}call(t,e){return Object(h["Ph"])(()=>{t=Pe(t);const n=(t,n)=>{const r=Pe(this.layer.call(t,e));return[r,[]]},r=oa(n,t,[],!1,null,null,!1,!0),i=r[1];return i})}}function ya(t){R(it,"BidirectionalMergeMode",t)}va.className="TimeDistributed",h["Xg"].registerClass(va);const ba="concat";class xa extends ma{constructor(t){super(t);const e=t.layer.getConfig(),n={};n["className"]=t.layer.getClassName(),n["config"]=e,this.forwardLayer=gn(n),e["goBackwards"]=!0!==e["goBackwards"];const r={};if(r["className"]=t.layer.getClassName(),r["config"]=e,this.backwardLayer=gn(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===t.mergeMode?ba:t.mergeMode,ya(this.mergeMode),t.weights)throw new y("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const e=t.length,n=Math.floor(e/2);this.forwardLayer.setWeights(t.slice(0,n)),this.backwardLayer.setWeights(t.slice(n))}computeOutputShape(t){let e,n,r,i=this.forwardLayer.computeOutputShape(t);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(r=i.slice(1),e=i[0]):e=i[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):O(n)}apply(t,e){let n=null==e?null:e["initialState"],r=null==e?null:e["constants"];null==e&&(e={});const i=ia(t,n,r,this.numConstants);if(t=i.inputs,n=i.initialState,r=i.constants,Array.isArray(t)&&(n=t.slice(1),t=t[0]),(null==n||0===n.length)&&null==r)return super.apply(t,e);const o=[],a=[];if(null!=n){const t=n.length;if(t%2>0)throw new v("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");e["initialState"]=n,o.push(...n);const r=n.map(t=>new He({shape:t.shape}));this.forwardLayer.stateSpec=r.slice(0,t/2),this.backwardLayer.stateSpec=r.slice(t/2),a.push(...r)}if(null!=r)throw new y("Support for constants in Bidirectional layers is not implemented yet.");const s=o[0]instanceof qe;for(const u of o)if(u instanceof qe!==s)throw new v("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[t].concat(o),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,e);return this.inputSpec=i,s}return super.apply(t,e)}call(t,e){return Object(h["Ph"])(()=>{const n=e["initialState"];let r,i,o,a;if(null==n)r=this.forwardLayer.call(t,e),i=this.backwardLayer.call(t,e);else{const o=n.slice(0,n.length/2),a=n.slice(n.length/2);r=this.forwardLayer.call(t,Object.assign(e,{initialState:o})),i=this.backwardLayer.call(t,Object.assign(e,{initialState:a}))}return this.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=h["Kg"](i,1)),"concat"===this.mergeMode?a=Dt([r,i]):"sum"===this.mergeMode?a=h["md"](r,i):"ave"===this.mergeMode?a=h["Vf"](.5,h["md"](r,i)):"mul"===this.mergeMode?a=h["Vf"](r,i):null==this.mergeMode&&(a=[r,i]),this.returnState?null==this.mergeMode?a.concat(o):[a].concat(o):a})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){ht(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),ht(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,e){let n;if(Array.isArray(e)&&(e=e[0]),n=this.returnSequences?null==this.mergeMode?[e,e]:e:null==this.mergeMode?[null,null]:null,this.returnState){const t=this.forwardLayer.states,e=t.map(t=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(t),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},e=super.getConfig();return Object.assign(t,e),t}static fromConfig(t,e){const n=gn(e["layer"]);if(delete e["layer"],null!=e["numConstants"])throw new y("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=e;return r["layer"]=n,new t(r)}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function wa(t){return new tn(t)}function _a(t){return new zi(t)}function Oa(t){return new Pi(t)}function Sa(t){return new $i(t)}function Ca(t){return new Li(t)}function ka(t){return new Ui(t)}function Aa(t){return new Bi(t)}function Ta(t){return new io(t)}function Ea(t){return new Qi(t)}function ja(t){return new eo(t)}function Da(t){return new to(t)}function Ma(t){return new ro(t)}function Na(t){return new oo(t)}function Ia(t){return new ao(t)}function Ra(t){return new uo(t)}function Fa(t){return new po(t)}function Pa(t){return new ho(t)}function $a(t){return new co(t)}function La(t){return new lo(t)}function za(t){return new fo(t)}function Ba(t){return new go(t)}function Ua(t){return new mo(t)}function Wa(t){return new vo(t)}function Va(t){return new bo(t)}function Ha(t){return new wo(t)}function qa(t){return new Oo(t)}function Ga(t){return new ko(t)}function Xa(t){return new So(t)}function Ya(t){return new Co(t)}function Ka(t){return new _o(t)}function Za(t){return new Eo(t)}function Ja(t){return new Po(t)}function Qa(t){return new $o(t)}function ts(t){return new zo(t)}function es(t){return new Ho(t)}function ns(t){return es(t)}function rs(t){return es(t)}function is(t){return new Xo(t)}function os(t){return is(t)}function as(t){return is(t)}function ss(t){return new Zo(t)}function us(t){return ss(t)}function cs(t){return ss(t)}function ls(t){return new Qo(t)}function hs(t){return new na(t)}function fs(t){return new ta(t)}function ds(t){return new ra(t)}function ps(t){return new Vo(t)}function gs(t){return new Go(t)}function ms(t){return new Ko(t)}function vs(t){return new ha(t)}function ys(t){return new la(t)}function bs(t){return new da(t)}function xs(t){return new fa(t)}function ws(t){return new ca(t)}function _s(t){return new ua(t)}function Os(t){return new aa(t)}function Ss(t){return new pa(t)}function Cs(t){return new xa(t)}function ks(t){return new va(t)}xa.className="Bidirectional",h["Xg"].registerClass(xa);const As=fs,Ts=ds,Es=ps,js=gs;function Ds(t){return new jo(t)}function Ms(t){return new Do(t)}function Ns(t){return new Mo(t)}function Is(t){return new yo(t)}function Rs(t,e){return In(t,e)}function Fs(t,e){return Bn(t,e)}function Ps(t,e){return Un(t,e)}function $s(t,e){return Rn(t,e)}function Ls(t,e){return Yn(t,e)}function zs(t,e){return Ln(t,e)}function Bs(t,e){return zn(t,e)}function Us(t,e){return Dn(t,e)}function Ws(t,e){return yn(t,e)}function Vs(t,e){return bn(t,e)}function Hs(t,e){return bn(t,e)}function qs(t,e){return bn(t,e)}function Gs(t,e){return vn(t,e)}function Xs(t,e){return vn(t,e)}function Ys(t,e){return vn(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ks(t){return new ji(t)}function Zs(t){return Di(t)}function Js(t){return Mi(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Qs extends sn{constructor(){super(...arguments),this.model=null}setModel(t){if(!(t instanceof ei))throw new Error("model must be a LayersModel, not some other Container");this.model=t}}function tu(t,e){return t<e}function eu(t,e){return t>e}class nu extends Qs{constructor(t){if(super(),null==t&&(t={}),t.restoreBestWeights)throw new y("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=t.monitor||"val_loss",this.minDelta=Math.abs(t.minDelta||0),this.patience=t.patience||0,this.verbose=t.verbose||0,this.mode=t.mode||"auto",this.baseline=t.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),"min"===this.mode?this.monitorFunc=tu:"max"===this.mode||-1!==this.monitor.indexOf("acc")?this.monitorFunc=eu:this.monitorFunc=tu,this.monitorFunc===tu&&(this.minDelta*=-1)}async onTrainBegin(t){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===tu?1/0:-1/0}async onEpochEnd(t,e){await nn(e);const n=this.getMonitorValue(e);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)))}async onTrainEnd(t){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(t){null==t&&(t={});const e=t[this.monitor];return null==e&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: `+Object.keys(t)),e}}function ru(t){return new nu(t)}const iu={earlyStopping:ru};
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var ou=n("f8bb"),au=n("526c");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class su{constructor(t,e,n){this.node=t,this.tensorMap=e,this.context=n,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(t=>this.getInput(t)),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((t,e)=>(t[e]=this.getAttr(e),t),{}))}getInput(t){return Object(au["e"])(t,this.tensorMap,this.context)}getAttr(t,e){const n=this.node.rawAttrs[t];if(null!=n.tensor)return Object(au["e"])(t,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Object(ou["f"])(this.node.rawAttrs,t,e);if(null!=n.s)return Object(ou["i"])(this.node.rawAttrs,t,e);if(null!=n.b)return Object(ou["c"])(this.node.rawAttrs,t,e);if(null!=n.shape)return Object(ou["k"])(this.node.rawAttrs,t,e);if(null!=n.type)return Object(ou["e"])(this.node.rawAttrs,t,e);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Object(ou["g"])(this.node.rawAttrs,t,e);if(null!=n.list.s)return Object(ou["h"])(this.node.rawAttrs,t,e);if(null!=n.list.shape)return Object(ou["j"])(this.node.rawAttrs,t,e);if(null!=n.list.b)return Object(ou["b"])(this.node.rawAttrs,t,e);if(null!=n.list.type)return Object(ou["d"])(this.node.rawAttrs,t,e)}return e}}var uu=n("d303");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cu=(t,e,n)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[h["md"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"AddN":return[h["nd"](Object(au["d"])("tensors",t,e,n))];case"FloorMod":case"Mod":return[h["Rf"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"Mul":return[h["Vf"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"RealDiv":case"Div":return[h["pe"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"DivNoNan":return[h["qe"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"FloorDiv":return[h["Me"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"Sub":return[h["Ah"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"Minimum":return[h["Pf"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"Maximum":return[h["Kf"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"Pow":return[h["pg"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"SquaredDifference":return[h["uh"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},lu=(t,e,n)=>{switch(t.op){case"Abs":case"ComplexAbs":return[h["jd"](Object(au["d"])("x",t,e,n))];case"Acos":return[h["kd"](Object(au["d"])("x",t,e,n))];case"Acosh":return[h["ld"](Object(au["d"])("x",t,e,n))];case"Asin":return[h["td"](Object(au["d"])("x",t,e,n))];case"Asinh":return[h["ud"](Object(au["d"])("x",t,e,n))];case"Atan":return[h["vd"](Object(au["d"])("x",t,e,n))];case"Atan2":return[h["wd"](Object(au["d"])("x",t,e,n),Object(au["d"])("y",t,e,n))];case"Atanh":return[h["xd"](Object(au["d"])("x",t,e,n))];case"Ceil":return[h["Nd"](Object(au["d"])("x",t,e,n))];case"Complex":return[h["Qd"](Object(au["d"])("real",t,e,n),Object(au["d"])("imag",t,e,n))];case"Cos":return[h["be"](Object(au["d"])("x",t,e,n))];case"Cosh":return[h["ce"](Object(au["d"])("x",t,e,n))];case"Elu":return[h["ue"](Object(au["d"])("x",t,e,n))];case"Erf":return[h["Ce"](Object(au["d"])("x",t,e,n))];case"Exp":return[h["De"](Object(au["d"])("x",t,e,n))];case"Expm1":return[h["Fe"](Object(au["d"])("x",t,e,n))];case"Floor":return[h["Le"](Object(au["d"])("x",t,e,n))];case"Log":return[h["uf"](Object(au["d"])("x",t,e,n))];case"Log1p":return[h["vf"](Object(au["d"])("x",t,e,n))];case"Imag":return[h["cf"](Object(au["d"])("x",t,e,n))];case"Neg":return[h["Zf"](Object(au["d"])("x",t,e,n))];case"Reciprocal":return[h["Cg"](Object(au["d"])("x",t,e,n))];case"Real":return[h["Bg"](Object(au["d"])("x",t,e,n))];case"Relu":return[h["Gg"](Object(au["d"])("x",t,e,n))];case"Round":return[h["Qg"](Object(au["d"])("x",t,e,n))];case"Selu":return[h["Vg"](Object(au["d"])("x",t,e,n))];case"Sigmoid":return[h["bh"](Object(au["d"])("x",t,e,n))];case"Sin":return[h["eh"](Object(au["d"])("x",t,e,n))];case"Sign":return[h["ch"](Object(au["d"])("x",t,e,n))];case"Sinh":return[h["fh"](Object(au["d"])("x",t,e,n))];case"Softplus":return[h["nh"](Object(au["d"])("x",t,e,n))];case"Sqrt":return[h["sh"](Object(au["d"])("x",t,e,n))];case"Square":return[h["th"](Object(au["d"])("x",t,e,n))];case"Tanh":return[h["Fh"](Object(au["d"])("x",t,e,n))];case"Tan":return[h["Eh"](Object(au["d"])("x",t,e,n))];case"Relu6":case"ClipByValue":return[h["Od"](Object(au["d"])("x",t,e,n),Object(au["d"])("clipValueMin",t,e,n),Object(au["d"])("clipValueMax",t,e,n))];case"Rsqrt":return[h["Rg"](Object(au["e"])(t.inputNames[0],e,n))];case"Prod":return[h["tg"](Object(au["d"])("x",t,e,n),Object(au["d"])("axes",t,e,n))];case"LeakyRelu":return[h["mf"](Object(au["d"])("x",t,e,n),Object(au["d"])("alpha",t,e,n))];case"Prelu":return[h["rg"](Object(au["d"])("x",t,e,n),Object(au["d"])("alpha",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hu(t,e,n=""){h["bi"].assert(fu(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function fu(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(-1!==t[n]&&-1!==e[n]&&t[n]!==e[n])return!1;return!0}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class du{constructor(t,e,n,r,i,o,a){this.name=t,this.dtype=e,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Object(h["Sg"])(0),Object(h["kf"])(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(){this.tensors.forEach(t=>t.tensor.dispose()),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const e=this.tensors[t];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(t){return t.map(t=>this.read(t))}write(t,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},\n          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=e.shape),hu(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);n.tensor=e,Object(h["kf"])(e),n.written=!0,this.tensors[t]=n}writeMany(t,e){if(t.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${e.length}.`);t.forEach((t,n)=>this.write(t,e[n]))}gather(t,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(t)t=t.slice(0,this.size());else{t=[];for(let e=0;e<this.size();e++)t.push(e)}if(0===t.length)return Object(h["Gh"])([],[0].concat(this.elementShape));const n=this.readMany(t);return hu(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Object(h["xh"])(n,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(0===this.size())return Object(h["Gh"])([],[0].concat(this.elementShape));const e=[];for(let r=0;r<this.size();r++)e.push(r);const n=this.readMany(e);return hu(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Object(h["Rd"])(n,0)}scatter(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const n=Math.max(...t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(t,Object(h["Zh"])(e,0))}split(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let n=0;const r=t.map(t=>(n+=t,n));if(n!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const i=0===n?0:e.size/n,o=[];Object(h["Ph"])(()=>{e=e.reshape([1,n,i]);for(let n=0;n<t.length;++n){const a=0===n?0:r[n-1],s=[0,a,0],u=[1,t[n],i];o[n]=Object(h["gh"])(e,s,u).reshape(this.elementShape)}return o});const a=[];for(let s=0;s<t.length;s++)a[s]=s;this.writeMany(a,o)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pu{constructor(t,e,n,r=-1){this.tensors=t,this.elementShape=e,this.elementDtype=n,null!=t&&t.forEach(t=>{if(n!==t.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${t.dtype}`);hu(e,t.shape,"TensorList shape mismatch: "),Object(h["kf"])(t)}),this.idTensor=Object(h["Sg"])(0),this.maxNumElements=r,Object(h["kf"])(this.idTensor)}get id(){return this.idTensor.id}copy(){return new pu([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(){this.tensors.forEach(t=>t.dispose()),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,e,n=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);return hu(t,this.elementShape,"TensorList shape mismatch: "),Object(h["Ph"])(()=>{const e=this.tensors.map(e=>e.reshape(t));return Object(h["xh"])(e,0)})}popBack(t,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=this.tensors.pop();return hu(n.shape,t,"TensorList shape mismatch: "),n.reshape(t)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(hu(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Object(h["kf"])(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: "+t);if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=t}getItem(t,e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[t])throw new Error(`element at index ${t} is null.`);return hu(this.tensors[t].shape,e,"TensorList shape mismatch: "),this.tensors[t]}setItem(t,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(t<0||-1!==this.maxNumElements&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);hu(this.elementShape,e.shape,"TensorList shape mismatch: "),Object(h["kf"])(e),this.tensors[t]=e}gather(t,e,n){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);return hu(this.elementShape,n,"TensorList shape mismatch: "),t=t.slice(0,this.size()),0===t.length?Object(h["Gh"])([],[0].concat(this.elementShape)):Object(h["Ph"])(()=>{const e=t.map(t=>this.tensors[t].reshape(n));return Object(h["xh"])(e,0)})}concat(t,e){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);return hu(this.elementShape,e,"TensorList shape mismatch: "),0===this.size()?Object(h["Gh"])([],[0].concat(this.elementShape)):Object(h["Ph"])(()=>{const t=this.tensors.map(t=>t.reshape(e));return Object(h["Rd"])(t,0)})}}function gu(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: "+t.shape);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const i=t.shape.slice(1);hu(i,e,"TensorList shape mismatch: ");const o=t.unstack();return new pu(o,e,r)}function mu(t,e,n){return new pu([],t,e,n)}function vu(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const i=Math.max(...e);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const o=new pu([],n,t.dtype,r),a=Object(h["Zh"])(t,0);return e.forEach((t,e)=>{o.setItem(t,a[e])}),o}function yu(t,e,n){let r=0;const i=e.map(t=>(r+=t,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${t.shape}`);const o=0===r?0:t.size/r,a=Object(h["Ph"])(()=>{const a=[];t=t.reshape([1,r,o]);for(let r=0;r<e.length;++r){const s=0===r?0:i[r-1],u=[0,s,0],c=[1,e[r],o];a[r]=Object(h["gh"])(t,u,c).reshape(n)}return t.dispose(),a}),s=new pu([],n,t.dtype,e.length);for(let u=0;u<a.length;u++)s.setItem(u,a[u]);return s}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bu=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=Object(au["d"])("thenBranch",t,e,n),i=Object(au["d"])("elseBranch",t,e,n),o=Object(au["d"])("cond",t,e,n),a=Object(au["d"])("args",t,e,n),s=await o.data();return s[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=Object(au["d"])("body",t,e,n),i=Object(au["d"])("cond",t,e,n),o=Object(au["d"])("args",t,e,n),a=await n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),s=o.map(t=>t.id);let u=await a[0].data();a.forEach(t=>{t.kept||-1!==s.indexOf(t.id)||t.dispose()});let c=o;while(u[0]){const t=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const e=c.map(t=>t.id);t.forEach(t=>{t.kept||-1!==s.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()});const o=await n.functionMap[i].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);u=await o[0].data(),o.forEach(t=>{t.kept||-1!==s.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()})}return c}case"LoopCond":{const r=Object(au["d"])("pred",t,e,n);return[Object(au["a"])(r)]}case"Switch":{const r=Object(au["d"])("pred",t,e,n);let i=Object(au["d"])("data",t,e,n);return i.kept||(i=Object(au["a"])(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=t.inputNames.find(t=>void 0!==Object(au["e"])(t,e,n));if(r){const t=Object(au["e"])(r,e,n);return[Object(au["a"])(t)]}return}case"Enter":{const r=Object(au["d"])("frameName",t,e,n),i=Object(au["d"])("tensor",t,e,n);return n.enterFrame(r),[Object(au["a"])(i)]}case"Exit":{const r=Object(au["d"])("tensor",t,e,n);return n.exitFrame(),[Object(au["a"])(r)]}case"NextIteration":{const r=Object(au["d"])("tensor",t,e,n);return n.nextIteration(),[Object(au["a"])(r)]}case"TensorArrayV3":{const r=Object(au["d"])("size",t,e,n),i=Object(au["d"])("dtype",t,e,n),o=Object(au["d"])("elementShape",t,e,n),a=Object(au["d"])("dynamicSize",t,e,n),s=Object(au["d"])("clearAfterRead",t,e,n),u=Object(au["d"])("identicalElementShapes",t,e,n),c=Object(au["d"])("name",t,e,n),l=new du(c,i,r,o,u,a,s);return n.addTensorArray(l),[l.idTensor,Object(h["Sg"])(1)]}case"TensorArrayWriteV3":{const r=Object(au["d"])("tensorArrayId",t,e,n),i=Object(au["d"])("index",t,e,n),o=Object(au["d"])("tensor",t,e,n),a=n.getTensorArray(r.id);return a.write(i,o),[a.idTensor]}case"TensorArrayReadV3":{const r=Object(au["d"])("tensorArrayId",t,e,n),i=Object(au["d"])("index",t,e,n),o=n.getTensorArray(r.id);return[o.read(i)]}case"TensorArrayGatherV3":{const r=Object(au["d"])("tensorArrayId",t,e,n),i=Object(au["d"])("indices",t,e,n),o=Object(au["d"])("dtype",t,e,n),a=n.getTensorArray(r.id);return[a.gather(i,o)]}case"TensorArrayScatterV3":{const r=Object(au["d"])("tensorArrayId",t,e,n),i=Object(au["d"])("indices",t,e,n),o=Object(au["d"])("tensor",t,e,n),a=n.getTensorArray(r.id);return a.scatter(i,o),[a.idTensor]}case"TensorArrayConcatV3":{const r=Object(au["d"])("tensorArrayId",t,e,n),i=n.getTensorArray(r.id),o=Object(au["d"])("dtype",t,e,n);return[i.concat(o)]}case"TensorArraySplitV3":{const r=Object(au["d"])("tensorArrayId",t,e,n),i=Object(au["d"])("tensor",t,e,n),o=Object(au["d"])("lengths",t,e,n),a=n.getTensorArray(r.id);return a.split(o,i),[a.idTensor]}case"TensorArraySizeV3":{const r=Object(au["d"])("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return[Object(h["Sg"])(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=Object(au["d"])("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=Object(au["d"])("tensorListId",t,e,n),i=Object(au["d"])("index",t,e,n),o=Object(au["d"])("tensor",t,e,n),a=n.getTensorList(r.id);return a.setItem(i,o),[a.idTensor]}case"TensorListGetItem":{const r=Object(au["d"])("tensorListId",t,e,n),i=Object(au["d"])("index",t,e,n),o=Object(au["d"])("elementShape",t,e,n),a=Object(au["d"])("elementDType",t,e,n),s=n.getTensorList(r.id);return[s.getItem(i,o,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=Object(au["d"])("indices",t,e,n),i=Object(au["d"])("tensor",t,e,n),o=Object(au["d"])("elementShape",t,e,n),a=Object(au["d"])("numElements",t,e,n),s=vu(i,r,o,a);return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":{const r=Object(au["d"])("elementShape",t,e,n),i=Object(au["d"])("elementDType",t,e,n),o=Object(au["d"])("numElements",t,e,n),a=mu(r,i,o);return n.addTensorList(a),[a.idTensor]}case"TensorListGather":{const r=Object(au["d"])("tensorListId",t,e,n),i=Object(au["d"])("indices",t,e,n),o=Object(au["d"])("elementShape",t,e,n),a=Object(au["d"])("elementDType",t,e,n),s=n.getTensorList(r.id);return[s.gather(i,a,o)]}case"TensorListStack":{const r=Object(au["d"])("tensorListId",t,e,n),i=Object(au["d"])("elementShape",t,e,n),o=Object(au["d"])("elementDType",t,e,n),a=Object(au["d"])("numElements",t,e,n),s=n.getTensorList(r.id);return[s.stack(i,o,a)]}case"TensorListFromTensor":{const r=Object(au["d"])("tensor",t,e,n),i=Object(au["d"])("elementShape",t,e,n),o=Object(au["d"])("elementDType",t,e,n),a=gu(r,i,o);return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":{const r=Object(au["d"])("tensorListId",t,e,n),i=n.getTensorList(r.id),o=Object(au["d"])("dtype",t,e,n),a=Object(au["d"])("elementShape",t,e,n);return[i.concat(o,a)]}case"TensorListPushBack":{const r=Object(au["d"])("tensorListId",t,e,n),i=Object(au["d"])("tensor",t,e,n),o=n.getTensorList(r.id);return o.pushBack(i),[o.idTensor]}case"TensorListPopBack":{const r=Object(au["d"])("tensorListId",t,e,n),i=Object(au["d"])("elementShape",t,e,n),o=Object(au["d"])("elementDType",t,e,n),a=n.getTensorList(r.id);return[a.popBack(i,o)]}case"TensorListSplit":{const r=Object(au["d"])("tensor",t,e,n),i=Object(au["d"])("elementShape",t,e,n),o=Object(au["d"])("lengths",t,e,n),a=yu(r,o,i);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xu(t,e,n){const[r,i]=Object(au["d"])("fusedOps",t,e,n),o="biasadd"===r,a="prelu"===i,s="fusedbatchnorm"===r,u=Object(au["d"])("numArgs",t,e,n);if(o){if(a&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(s)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");const c=Object(au["d"])("strides",t,e,n),l=Object(au["c"])(t,e,n),h=Object(au["d"])("dataFormat",t,e,n).toUpperCase(),f=Object(au["d"])("dilations",t,e,n),[d,p]=Object(au["d"])("args",t,e,n);return{stride:c,pad:l,dataFormat:h,dilations:f,biasArg:d,preluArg:p,activationFunc:i}}const wu=(t,e,n)=>{switch(t.op){case"Conv1D":{const r=Object(au["d"])("stride",t,e,n),i=Object(au["d"])("pad",t,e,n),o=Object(au["d"])("dataFormat",t,e,n).toUpperCase(),a=Object(au["d"])("dilation",t,e,n);return[h["Wd"](Object(au["d"])("x",t,e,n),Object(au["d"])("filter",t,e,n),r,i,o,a)]}case"Conv2D":{const r=Object(au["d"])("strides",t,e,n),i=Object(au["c"])(t,e,n),o=Object(au["d"])("dataFormat",t,e,n).toUpperCase(),a=Object(au["d"])("dilations",t,e,n);return[h["Xd"](Object(au["d"])("x",t,e,n),Object(au["d"])("filter",t,e,n),[r[1],r[2]],i,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:r,pad:i,dataFormat:o,dilations:a,biasArg:s,preluArg:u,activationFunc:c}=xu(t,e,n);return[h["Ne"].conv2d({x:Object(au["d"])("x",t,e,n),filter:Object(au["d"])("filter",t,e,n),strides:[r[1],r[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:s,activation:c,preluActivationWeights:u})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:i,dataFormat:o,dilations:a,biasArg:s,preluArg:u,activationFunc:c}=xu(t,e,n);return[h["Ne"].depthwiseConv2d({x:Object(au["d"])("x",t,e,n),filter:Object(au["d"])("filter",t,e,n),strides:[r[1],r[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:s,activation:c,preluActivationWeights:u})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=Object(au["d"])("outputShape",t,e,n),i=Object(au["d"])("strides",t,e,n),o=Object(au["c"])(t,e,n);return[h["Yd"](Object(au["d"])("x",t,e,n),Object(au["d"])("filter",t,e,n),r,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=Object(au["d"])("strides",t,e,n),i=Object(au["c"])(t,e,n),o=Object(au["d"])("dilations",t,e,n),a=Object(au["d"])("dataFormat",t,e,n).toUpperCase();return[h["ie"](Object(au["d"])("input",t,e,n),Object(au["d"])("filter",t,e,n),[r[1],r[2]],i,a,[o[1],o[2]])]}case"Conv3D":{const r=Object(au["d"])("strides",t,e,n),i=Object(au["d"])("pad",t,e,n),o=Object(au["d"])("dataFormat",t,e,n).toUpperCase(),a=Object(au["d"])("dilations",t,e,n);return[h["Zd"](Object(au["d"])("x",t,e,n),Object(au["d"])("filter",t,e,n),[r[1],r[2],r[3]],i,o,[a[1],a[2],a[3]])]}case"AvgPool":{const r=Object(au["d"])("strides",t,e,n),i=Object(au["d"])("pad",t,e,n),o=Object(au["d"])("kernelSize",t,e,n);return[h["yd"](Object(au["d"])("x",t,e,n),[o[1],o[2]],[r[1],r[2]],i)]}case"MaxPool":{const r=Object(au["d"])("strides",t,e,n),i=Object(au["d"])("pad",t,e,n),o=Object(au["d"])("kernelSize",t,e,n);return[h["Hf"](Object(au["d"])("x",t,e,n),[o[1],o[2]],[r[1],r[2]],i)]}case"MaxPoolWithArgmax":{const r=Object(au["d"])("strides",t,e,n),i=Object(au["d"])("pad",t,e,n),o=Object(au["d"])("kernelSize",t,e,n),a=Object(au["d"])("includeBatchInIndex",t,e,n),{result:s,indexes:u}=h["Jf"](Object(au["d"])("x",t,e,n),[o[1],o[2]],[r[1],r[2]],i,a);return[s,u]}case"AvgPool3D":{const r=Object(au["d"])("strides",t,e,n),i=Object(au["d"])("pad",t,e,n),o=Object(au["d"])("kernelSize",t,e,n);return[h["zd"](Object(au["d"])("x",t,e,n),[o[1],o[2],o[3]],[r[1],r[2],r[3]],i)]}case"MaxPool3D":{const r=Object(au["d"])("strides",t,e,n),i=Object(au["d"])("pad",t,e,n),o=Object(au["d"])("kernelSize",t,e,n);return[h["If"](Object(au["d"])("x",t,e,n),[o[1],o[2],o[3]],[r[1],r[2],r[3]],i)]}case"Dilation2D":{const r=Object(au["d"])("strides",t,e,n),i=Object(au["d"])("pad",t,e,n),o=Object(au["d"])("dilations",t,e,n),a=r[1],s=r[2],u=o[1],c=o[2];return[h["le"](Object(au["d"])("x",t,e,n),Object(au["d"])("filter",t,e,n),[a,s],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},_u=(t,e,n)=>{switch(t.op){case"Fill":{const r=Object(au["d"])("shape",t,e,n),i=Object(au["d"])("dtype",t,e,n),o=Object(au["d"])("value",t,e,n);return[h["Ie"](r,o,i)]}case"LinSpace":{const r=Object(au["d"])("start",t,e,n),i=Object(au["d"])("stop",t,e,n),o=Object(au["d"])("num",t,e,n);return[h["sf"](r,i,o)]}case"Multinomial":{const r=Object(au["d"])("logits",t,e,n),i=Object(au["d"])("numSamples",t,e,n),o=Object(au["d"])("seed",t,e,n);return[h["Yf"](r,i,o)]}case"OneHot":{const r=Object(au["d"])("indices",t,e,n),i=Object(au["d"])("depth",t,e,n),o=Object(au["d"])("onValue",t,e,n),a=Object(au["d"])("offValue",t,e,n);return[h["eg"](r,i,o,a)]}case"Ones":return[h["fg"](Object(au["d"])("shape",t,e,n),Object(au["d"])("dtype",t,e,n))];case"OnesLike":return[h["gg"](Object(au["d"])("x",t,e,n))];case"RandomUniform":return[h["yg"](Object(au["d"])("shape",t,e,n),Object(au["d"])("minval",t,e,n),Object(au["d"])("maxval",t,e,n),Object(au["d"])("dtype",t,e,n))];case"Range":{const r=Object(au["d"])("start",t,e,n),i=Object(au["d"])("stop",t,e,n),o=Object(au["d"])("step",t,e,n);return[h["zg"](r,i,o,Object(au["d"])("dtype",t,e,n))]}case"TruncatedNormal":{const r=Object(au["d"])("shape",t,e,n),i=Object(au["d"])("mean",t,e,n),o=Object(au["d"])("stdDev",t,e,n),a=Object(au["d"])("seed",t,e,n);return[h["Vh"](r,i,o,Object(au["d"])("dtype",t,e,n),a)]}case"Zeros":return[h["ji"](Object(au["d"])("shape",t,e,n),Object(au["d"])("dtype",t,e,n))];case"ZerosLike":return[h["ki"](Object(au["d"])("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ou(t,e,n){const r=Object(au["d"])("boxes",t,e,n),i=Object(au["d"])("scores",t,e,n),o=Object(au["d"])("maxOutputSize",t,e,n),a=Object(au["d"])("iouThreshold",t,e,n),s=Object(au["d"])("scoreThreshold",t,e,n),u=Object(au["d"])("softNmsSigma",t,e,n);return{boxes:r,scores:i,maxOutputSize:o,iouThreshold:a,scoreThreshold:s,softNmsSigma:u}}const Su=async(t,e,n)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:i,maxOutputSize:o,iouThreshold:a,scoreThreshold:s,softNmsSigma:u}=Ou(t,e,n),c=await h["df"].nonMaxSuppressionWithScoreAsync(r,i,o,a,s,u);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:i,maxOutputSize:o,iouThreshold:a,scoreThreshold:s}=Ou(t,e,n),u=Object(au["d"])("padToMaxOutputSize",t,e,n),c=await h["df"].nonMaxSuppressionPaddedAsync(r,i,o,a,s,u);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:i,maxOutputSize:o,iouThreshold:a,scoreThreshold:s}=Ou(t,e,n);return[await h["df"].nonMaxSuppressionAsync(r,i,o,a,s)]}case"Where":{const r=Object(au["d"])("condition",t,e,n).asType("bool"),i=[await h["ii"](r)];return r.dispose(),i}case"ListDiff":return h["ah"](Object(au["d"])("x",t,e,n),Object(au["d"])("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}},Cu=(t,e,n)=>{switch(t.op){case"TopKV2":{const r=Object(au["d"])("x",t,e,n),i=Object(au["d"])("k",t,e,n),o=Object(au["d"])("sorted",t,e,n),a=h["Sh"](r,i,o);return[a.values,a.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},ku=(t,e,n)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const r=Object(au["d"])("default",t,e,n);return[Object(au["e"])(t.name,e,n)||r];case"Placeholder":return[Object(au["e"])(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const r=Object(au["d"])("x",t,e,n);return[Object(au["a"])(r)]}case"IdentityN":return Object(au["d"])("x",t,e,n).map(t=>Object(au["a"])(t));case"Snapshot":const i=Object(au["d"])("x",t,e,n);return[Object(au["a"])(i)];case"Shape":return[h["Hh"](Object(au["d"])("x",t,e,n).shape,"int32")];case"ShapeN":return Object(au["d"])("x",t,e,n).map(t=>h["Hh"](t.shape));case"Size":return[h["Sg"](Object(au["d"])("x",t,e,n).size,"int32")];case"Rank":return[h["Sg"](Object(au["d"])("x",t,e,n).rank,"int32")];case"NoOp":return[h["Sg"](1)];case"Print":const o=Object(au["d"])("x",t,e,n),a=Object(au["d"])("data",t,e,n),s=Object(au["d"])("message",t,e,n),u=Object(au["d"])("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let t=0;t<a.length;t++)console.log(Array.prototype.slice.call(a[t].dataSync()).slice(0,u));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Au=(t,e,n)=>{switch(t.op){case"ResizeBilinear":{const r=Object(au["d"])("images",t,e,n),i=Object(au["d"])("size",t,e,n),o=Object(au["d"])("alignCorners",t,e,n);return[h["df"].resizeBilinear(r,[i[0],i[1]],o)]}case"ResizeNearestNeighbor":{const r=Object(au["d"])("images",t,e,n),i=Object(au["d"])("size",t,e,n),o=Object(au["d"])("alignCorners",t,e,n);return[h["df"].resizeNearestNeighbor(r,[i[0],i[1]],o)]}case"CropAndResize":{const r=Object(au["d"])("image",t,e,n),i=Object(au["d"])("boxes",t,e,n),o=Object(au["d"])("boxInd",t,e,n),a=Object(au["d"])("cropSize",t,e,n),s=Object(au["d"])("method",t,e,n),u=Object(au["d"])("extrapolationValue",t,e,n);return[h["df"].cropAndResize(r,i,o,a,s,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},Tu=(t,e,n)=>{switch(t.op){case"Equal":return[h["Ae"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"NotEqual":return[h["cg"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"Greater":return[h["Xe"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"GreaterEqual":return[h["Ye"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"Less":return[h["nf"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"LessEqual":return[h["of"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"LogicalAnd":return[h["zf"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"LogicalNot":return[h["Af"](Object(au["d"])("a",t,e,n))];case"LogicalOr":return[h["Bf"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];case"Select":case"SelectV2":return[h["hi"](Object(au["d"])("condition",t,e,n),Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Eu=(t,e,n)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[h["Ef"](Object(au["d"])("a",t,e,n),Object(au["d"])("b",t,e,n),Object(au["d"])("transposeA",t,e,n),Object(au["d"])("transposeB",t,e,n))];case"Transpose":return[h["Uh"](Object(au["d"])("x",t,e,n),Object(au["d"])("perm",t,e,n))];case"_FusedMatMul":const[r,i]=Object(au["d"])("fusedOps",t,e,n),o="biasadd"===r,a="prelu"===i,s=Object(au["d"])("numArgs",t,e,n);if(o){if(a&&2!==s)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&1!==s)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,c]=Object(au["d"])("args",t,e,n);return[h["Ne"].matMul({a:Object(au["d"])("a",t,e,n),b:Object(au["d"])("b",t,e,n),transposeA:Object(au["d"])("transposeA",t,e,n),transposeB:Object(au["d"])("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:c})];default:throw TypeError(`Node type ${t.op} is not implemented`)}},ju=(t,e,n)=>{switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":return[h["Dd"](Object(au["d"])("x",t,e,n),Object(au["d"])("mean",t,e,n),Object(au["d"])("variance",t,e,n),Object(au["d"])("offset",t,e,n),Object(au["d"])("scale",t,e,n),Object(au["d"])("epsilon",t,e,n))];case"FusedBatchNormV3":return[h["Dd"](Object(au["d"])("x",t,e,n),Object(au["d"])("mean",t,e,n),Object(au["d"])("variance",t,e,n),Object(au["d"])("offset",t,e,n),Object(au["d"])("scale",t,e,n),Object(au["d"])("epsilon",t,e,n))];case"LRN":return[h["tf"](Object(au["d"])("x",t,e,n),Object(au["d"])("radius",t,e,n),Object(au["d"])("bias",t,e,n),Object(au["d"])("alpha",t,e,n),Object(au["d"])("beta",t,e,n))];case"Softmax":return[h["mh"](Object(au["d"])("x",t,e,n))];case"LogSoftmax":return[h["xf"](Object(au["d"])("x",t,e,n))];case"SparseToDense":return[h["ph"](Object(au["d"])("sparseIndices",t,e,n),Object(au["d"])("outputShape",t,e,n),Object(au["d"])("sparseValues",t,e,n),Object(au["d"])("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Du=(t,e,n)=>{switch(t.op){case"Max":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("keepDims",t,e,n);return[h["Gf"](Object(au["d"])("x",t,e,n),r,i)]}case"Mean":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("keepDims",t,e,n);return[h["Mf"](Object(au["d"])("x",t,e,n),r,i)]}case"Min":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("keepDims",t,e,n);return[h["Of"](Object(au["d"])("x",t,e,n),r,i)]}case"Sum":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("keepDims",t,e,n);return[h["Ch"](Object(au["d"])("x",t,e,n),r,i)]}case"All":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("keepDims",t,e,n);return[h["pd"](Object(au["d"])("x",t,e,n),r,i)]}case"Any":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("keepDims",t,e,n);return[h["qd"](Object(au["d"])("x",t,e,n),r,i)]}case"ArgMax":{const r=Object(au["d"])("axis",t,e,n);return[h["rd"](Object(au["d"])("x",t,e,n),r)]}case"ArgMin":{const r=Object(au["d"])("axis",t,e,n);return[h["sd"](Object(au["d"])("x",t,e,n),r)]}case"Prod":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("keepDims",t,e,n);return[h["tg"](Object(au["d"])("x",t,e,n),r,i)]}case"Cumsum":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("exclusive",t,e,n),o=Object(au["d"])("reverse",t,e,n);return[h["ee"](Object(au["d"])("x",t,e,n),r,i,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},Mu=(t,e,n)=>{switch(t.op){case"ConcatV2":case"Concat":{const r=Object(au["d"])("n",t,e,n),i=Object(au["d"])("axis",t,e,n);let o=Object(au["d"])("tensors",t,e,n);return o=o.slice(0,r),[h["Rd"](o,i)]}case"GatherV2":case"Gather":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("x",t,e,n),o=Object(au["d"])("indices",t,e,n);return[h["Oe"](i,o.asType("int32"),r)]}case"ReverseV2":case"Reverse":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("x",t,e,n);return[h["Kg"](i,r)]}case"Slice":{const r=Object(au["d"])("begin",t,e,n),i=Object(au["d"])("size",t,e,n);return[h["gh"](Object(au["d"])("x",t,e,n),r,i)]}case"StridedSlice":{const r=Object(au["d"])("begin",t,e,n),i=Object(au["d"])("end",t,e,n),o=Object(au["d"])("strides",t,e,n),a=Object(au["d"])("beginMask",t,e,n),s=Object(au["d"])("endMask",t,e,n),u=Object(au["d"])("ellipsisMask",t,e,n),c=Object(au["d"])("newAxisMask",t,e,n),l=Object(au["d"])("shrinkAxisMask",t,e,n),f=Object(au["d"])("x",t,e,n);return[h["zh"](f,r,i,o,a,s,u,c,l)]}case"Pack":return h["Ph"](()=>{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("tensors",t,e,n),o=i[0].shape,a=i[0].squeeze().shape,s=i.map(t=>{const e=h["bi"].arraysEqual(t.shape,o);if(!e&&!h["bi"].arraysEqual(t.squeeze().shape,a))throw new Error("the input tensors shape does not match");return e?t:t.reshape(o)});return[h["xh"](s,r)]});case"Unpack":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("tensor",t,e,n);return h["Zh"](i,r)}case"Tile":{const r=Object(au["d"])("reps",t,e,n);return[h["Qh"](Object(au["d"])("x",t,e,n),r)]}case"Split":case"SplitV":{const r=Object(au["d"])("axis",t,e,n),i=Object(au["d"])("numOrSizeSplits",t,e,n),o=Object(au["d"])("x",t,e,n);return h["rh"](o,i,r)}case"ScatterNd":{const r=Object(au["d"])("indices",t,e,n),i=Object(au["d"])("values",t,e,n),o=Object(au["d"])("shape",t,e,n);return[h["Tg"](r,i,o)]}case"GatherNd":{const r=Object(au["d"])("x",t,e,n),i=Object(au["d"])("indices",t,e,n);return[h["Pe"](r,i)]}case"SparseToDense":{const r=Object(au["d"])("sparseIndices",t,e,n),i=Object(au["d"])("outputShape",t,e,n),o=Object(au["d"])("sparseValues",t,e,n),a=Object(au["d"])("defaultValue",t,e,n);return[h["ph"](r,o,i,o.dtype===a.dtype?a:a.asType(o.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},Nu=(t,e,n)=>{switch(t.op){case"FFT":return[h["He"](Object(au["d"])("x",t,e,n))];case"IFFT":return[h["bf"](Object(au["d"])("x",t,e,n))];case"RFFT":return[h["Pg"](Object(au["d"])("x",t,e,n))];case"IRFFT":return[h["gf"](Object(au["d"])("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Iu=(t,e,n)=>{switch(t.op){case"Cast":return[h["Md"](Object(au["d"])("x",t,e,n),Object(au["d"])("dtype",t,e,n))];case"ExpandDims":{const r=Object(au["d"])("axis",t,e,n);return[h["Ee"](Object(au["d"])("x",t,e,n),r)]}case"Squeeze":{const r=Object(au["d"])("axis",t,e,n);return[h["wh"](Object(au["d"])("x",t,e,n),r)]}case"Reshape":return[h["Jg"](Object(au["d"])("x",t,e,n),Object(au["d"])("shape",t,e,n))];case"PadV2":case"Pad":return[h["jg"](Object(au["d"])("x",t,e,n),Object(au["d"])("padding",t,e,n),Object(au["d"])("constantValue",t,e,n))];case"SpaceToBatchND":{const r=Object(au["d"])("blockShape",t,e,n),i=Object(au["d"])("paddings",t,e,n);return[h["oh"](Object(au["d"])("x",t,e,n),r,i)]}case"BatchToSpaceND":{const r=Object(au["d"])("blockShape",t,e,n),i=Object(au["d"])("crops",t,e,n);return[h["Hd"](Object(au["d"])("x",t,e,n),r,i)]}case"DepthToSpace":{const r=Object(au["d"])("blockSize",t,e,n),i=Object(au["d"])("dataFormat",t,e,n).toUpperCase();return[h["he"](Object(au["d"])("x",t,e,n),r,i)]}case"BroadcastTo":return[h["Jd"](Object(au["d"])("x",t,e,n),Object(au["d"])("shape",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ru(t,e,n){const r=((t,e,n)=>{switch(t.category){case"arithmetic":return h["Ph"](()=>cu(t,e,n));case"basic_math":return h["Ph"](()=>lu(t,e,n));case"control":return bu(t,e,n);case"convolution":return h["Ph"](()=>wu(t,e,n));case"creation":return h["Ph"](()=>_u(t,e,n));case"dynamic":return Su(t,e,n);case"evaluation":return h["Ph"](()=>Cu(t,e,n));case"image":return h["Ph"](()=>Au(t,e,n));case"graph":return h["Ph"](()=>ku(t,e,n));case"logical":return h["Ph"](()=>Tu(t,e,n));case"matrices":return h["Ph"](()=>Eu(t,e,n));case"normalization":return h["Ph"](()=>ju(t,e,n));case"reduction":return h["Ph"](()=>Du(t,e,n));case"slice_join":return h["Ph"](()=>Mu(t,e,n));case"spectral":return h["Ph"](()=>Nu(t,e,n));case"transformation":return h["Ph"](()=>Iu(t,e,n));case"custom":const r=Object(uu["b"])(t.op);if(r&&r.customExecutor)return r.customExecutor(new su(t,e,n));throw TypeError(`Custom op ${t.op} is not registered.`);default:throw TypeError(`Unknown op '${t.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return r instanceof Promise?r.then(t=>[].concat(t)):[].concat(r)}class Fu{constructor(t={},e={},n={},r={}){this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){const n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(t=>0===t.id&&0===t.iterationId?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose();for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose()}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pu(t,e,n){const r=new Set,i=[];let o=null,a=null;const s=new Set,u=Object.keys(t).map(t=>Object(au["g"])(t)[0]),c=[...e];while(c.length>0){const t=c.pop();(Bu(t)||Uu(t))&&null==o&&(o=t,a=o.children.map(t=>t.name).filter(t=>r.has(t))),r.add(t.name),null==n[t.name]&&(-1===u.indexOf(t.name)&&(0!==t.inputs.length?t.inputs.forEach(t=>{s.has(t.name)||(s.add(t.name),c.push(t))}):i.push(t.name)))}return{inputs:t,outputs:e,usedNodes:r,missingInputs:i,dynamicNode:o,syncInputs:a}}function $u(t,e,n){const{usedNodes:r,inputs:i}=n,o=[],a=Object.keys(i).map(t=>Object(au["g"])(t)[0]).map(e=>t.nodes[e]);a.forEach(t=>{r.has(t.name)&&o.push(t)}),t.weights.forEach(t=>{r.has(t.name)&&o.push(t)});const s=new Set,u=[];while(o.length>0){const t=o.pop();s.add(t.name),e[t.name]||u.push(t),t.children.forEach(t=>{!s.has(t.name)&&r.has(t.name)&&t.inputs.every(t=>s.has(t.name))&&o.push(t)})}return u}const Lu=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],zu=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"];function Bu(t){return Lu.indexOf(t.op)>=0}function Uu(t){return zu.indexOf(t.op)>=0}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wu{constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach(e=>{this._functionExecutorMap[e]=new Wu(t.functions[e],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const e=Object.keys(t).map(e=>t[e].map(t=>t.id));this._weightIds=[].concat(...e),this._weightMap=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams["shape"]?t.attrParams["shape"].value:void 0,dtype:t.attrParams["dtype"]?t.attrParams["dtype"].value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams["shape"]?t.attrParams["shape"].value:void 0,dtype:t.attrParams["dtype"]?t.attrParams["dtype"].value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((t,e)=>(t[e]=this._functions[e].signature,t),{})}getCompilationKey(t,e){const n=t.map(t=>t.name).sort(),r=e.map(t=>t.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(t,e){const n=Pu(t,e,this.weightMap),{missingInputs:r,dynamicNode:i,syncInputs:o}=n;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(r.length>0){const n=e.map(t=>t.name),i=Object.keys(t);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${i}]. Missing the following inputs: [${r}]`)}return $u(this.graph,this.weightMap,n)}execute(t,e){t=this.mapInputs(t);const n=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);const r=n.map(t=>this.graph.nodes[Object(au["g"])(t)[0]]),i=e.map(t=>this.graph.nodes[Object(au["g"])(t)[0]]),o=this.getCompilationKey(r,i);let a=this.compiledMap.get(o);null==a&&(a=this.compile(t,i),this.compiledMap.set(o,a));const s={},u={};return Object(h["Ph"])(()=>{const n=new Fu(this.weightMap,s,u,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(t).forEach(e=>{const[n,i]=Object(au["g"])(e),o=[];o[i]=t[e],r[n]=o});const i=this.getFrozenTensorIds(r),o={};for(let t=0;t<a.length;t++){const s=a[t];if(!r[s.name]){const t=Ru(s,r,n);if(t instanceof Promise)throw new Error(`The execution of the op '${s.op}' returned a promise. Please use model.executeAsync() instead.`);r[s.name]=t,this.checkTensorForDisposal(s.name,s,r,n,i,e,o)}}return null==this.parent&&n.dispose(),e.map(t=>Object(au["e"])(t,r,n))})}getFrozenTensorIds(t){const e=[].concat.apply([],Object.keys(t).map(e=>t[e]).map(t=>t.map(t=>t.id)));return new Set(e)}checkTensorForDisposal(t,e,n,r,i,o,a){"control"!==e.category&&-1===o.indexOf(t)&&(n[t].forEach(t=>{null!=t&&(a[t.id]=(a[t.id]||0)+e.children.length)}),e.inputs.forEach(t=>{if("control"!==t.category){const e=Object(au["f"])(t.name,n,r);null!=e&&e.forEach(t=>{if(t&&!i.has(t.id)){const e=a[t.id];1===e?(t.dispose(),delete a[t.id]):null!=e&&a[t.id]--}})}}))}async executeAsync(t,e){return this._executeAsync(t,e)}async _executeAsync(t,e,n=!1,r={},i={}){n||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e));const o=new Fu(this.weightMap,r,i,this.functionExecutorMap),a=await this.executeWithControlFlow(t,o,e,n),s=e.map(t=>Object(au["e"])(t,a,o)),u=new Set(s.map(t=>t.id)),c=new Set(Object.keys(t).map(e=>t[e].id));return Object.keys(a).forEach(t=>{const e=a[t];e.forEach(t=>{!t||t.isDisposed||u.has(t.id)||c.has(t.id)||-1!==this.weightIds.indexOf(t.id)||t.dispose()})}),null==this.parent&&o.dispose(),s}async executeFunctionAsync(t,e,n){const r=t.reduce((t,e,n)=>(t[this.inputs[n].name]=e,t),{});return this._executeAsync(r,this.outputNodes,!0,e,n)}async executeWithControlFlow(t,e,n,r){const i=Object.keys(t),o=i.map(t=>this.graph.nodes[Object(au["g"])(t)[0]]),a=n.map(t=>this.graph.nodes[Object(au["g"])(t)[0]]),{usedNodes:s,missingInputs:u,dynamicNode:c,syncInputs:l}=Pu(t,a,this.weightMap),h=[...o,...this.graph.weights].map(t=>({node:t,contexts:e.currentContext})),f=Object.assign({},this.weightMap);Object.keys(t).forEach(e=>{const[n,r]=Object(au["g"])(e),i=[];i[r]=t[e],f[n]=i});const d={},p=this.getFrozenTensorIds(f),g={};while(h.length>0){const t=this.processStack(o,h,e,f,g,p,n,d,s);await Promise.all(t)}null!=c||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const m=a.filter(t=>!Bu(t)&&!Object(au["e"])(t.name,f,e)).map(t=>t.name);if(m.length>0){let t="";throw null!=c&&(t=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${l}]`),new Error(`Cannot compute the outputs [${m}] from the provided inputs [${i}]. Consider providing the following inputs: [${u}]. ${t}`)}return f}processStack(t,e,n,r,i,o,a,s,u){const c=[];while(e.length>0){const l=e.pop();n.currentContext=l.contexts;let h="";if("Enter"===l.node.op&&Object(au["d"])("isConstant",l.node,r,n)&&([h]=Object(au["b"])(l.node.name,n)),-1===t.indexOf(l.node)){const t=Ru(l.node,r,n);h||([h]=Object(au["b"])(l.node.name,n));const f=n.currentContext;t instanceof Promise?c.push(t.then(t=>(r[h]=t,n.currentContext=f,this.checkTensorForDisposal(h,l.node,r,n,o,a,s),this.processChildNodes(l.node,e,n,r,i,u),t))):(r[h]=t,this.checkTensorForDisposal(h,l.node,r,n,o,a,s),this.processChildNodes(l.node,e,n,r,i,u))}else this.processChildNodes(l.node,e,n,r,i,u)}return c}processChildNodes(t,e,n,r,i,o){t.children.forEach(t=>{const[a]=Object(au["b"])(t.name,n);!i[a]&&o.has(t.name)&&("Merge"===t.op?t.inputNames.some(t=>!!Object(au["e"])(t,r,n))&&(i[a]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every(t=>!!Object(au["e"])(t,r,n))&&(i[a]=!0,e.push({contexts:n.currentContext,node:t})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(t=>t.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(e=>{const n=t[e],[r]=Object(au["g"])(e),i=this.graph.nodes[r];if(i.attrParams["shape"]&&i.attrParams["shape"].value){const t=i.attrParams["shape"].value,e=t.length===n.shape.length&&n.shape.every((e,n)=>-1===t[n]||t[n]===e);h["bi"].assert(e,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${t}], but was [${n.shape}]`)}i.attrParams["dtype"]&&i.attrParams["dtype"].value&&h["bi"].assert(n.dtype===i.attrParams["dtype"].value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams["dtype"].value}, but was ${n.dtype}`)})}mapInputs(t){const e={};for(const n in t)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]){const r=this._signature.inputs[n];e[r.name]=t[n]}else e[n]=t[n];return e}checkInputs(t){const e=Object.keys(t).filter(t=>{const[e]=Object(au["g"])(t);return null==this.graph.nodes[e]});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(t){return t.map(t=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[t]){const e=this._signature.outputs[t];return e.name}return t},{})}checkOutputs(t){t.forEach(t=>{const[e]=Object(au["g"])(t);if(!this.graph.nodes[e])throw new Error(`The output '${t}' is not found in the graph`)})}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vu="?tfjs-format=file",Hu="model.json";class qu{constructor(t,e={}){this.modelUrl=t,this.loadOptions=e,this.version="n/a",null==e&&(this.loadOptions={})}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}findIOHandler(){const t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=h["ff"].browserHTTPRequest(t,this.loadOptions);else{const e=h["ff"].getLoadHandlers(t,this.loadOptions);if(0===e.length)e.push(h["ff"].browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[t]}'`);this.handler=e[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=await this.handler.load();return this.loadSync(t)}loadSync(t){this.artifacts=t;const e=this.artifacts.modelTopology;let n={};null!=this.artifacts.userDefinedMetadata&&(n=this.artifacts.userDefinedMetadata.signature),this.version=`${e.versions.producer}.${e.versions.minConsumer}`;const r=h["ff"].decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);return this.executor=new Wu(ou["a"].Instance.transformGraph(e,n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),!0}async save(t,e){if("string"===typeof t){const e=h["ff"].getSaveHandlers(t);if(0===e.length)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new Error(`Found more than one (${e.length}) save handlers for URL '${t}'`);t=e[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}predict(t,e){return this.execute(t,this.outputNodes)}normalizeInputs(t){if(!(t instanceof h["Zc"])&&!Array.isArray(t))return t;if(t=Array.isArray(t)?t:[t],t.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${t.length} input tensors.`);return this.inputNodes.reduce((e,n,r)=>(e[n]=t[r],e),{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}execute(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=this.executor.execute(t,e);return n.length>1?n:n[0]}async executeAsync(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=await this.executor.executeAsync(t,e);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((e,n)=>(e[n]=[t[n]],e),{})}dispose(){this.executor.dispose()}}async function Gu(t,e={}){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==e&&(e={}),e.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t=`${t}${Hu}${Vu}`);const n=new qu(t,e);return await n.load(),n}
/** @license See the LICENSE file. */const Xu="2.3.0";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Yu=n("6125"),Ku=n("c388"),Zu=n("bdcf");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
class Ju{constructor(){this.size=null}batch(t,e=!0){const n=this;let r;return h["bi"].assert(t>0,()=>"batchSize needs to be positive, but it is\n      "+t),r=this.size===1/0||null==this.size?this.size:e?Math.ceil(this.size/t):Math.floor(this.size/t),Qu(async()=>(await n.iterator()).columnMajorBatch(t,e,nc),r)}concatenate(t){const e=this;let n;return n=this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null,Qu(async()=>(await e.iterator()).concatenate(await t.iterator()),n)}filter(t){const e=this;let n;return n=this.size===1/0?1/0:null,Qu(async()=>(await e.iterator()).filter(e=>h["Ph"](()=>t(e))),n)}async forEachAsync(t){return(await this.iterator()).forEachAsync(t)}map(t){const e=this;return Qu(async()=>(await e.iterator()).map(e=>h["Ph"](()=>t(e))),this.size)}mapAsync(t){const e=this;return Qu(async()=>(await e.iterator()).mapAsync(t),this.size)}prefetch(t){if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const e=this;return Qu(async()=>(await e.iterator()).prefetch(t),this.size)}repeat(t){const e=this;let n;return n=null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null,Qu(async()=>{const n=Object(Ku["e"])(async()=>({value:await e.iterator(),done:!1}));return Object(Ku["d"])(n.take(t))},n)}skip(t){const e=this;let n;return n=null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null,Qu(async()=>(await e.iterator()).skip(t),n)}shuffle(t,e,n=!0){if(null==t||t<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,i=Yu["alea"](e||h["bi"].now().toString());return Qu(async()=>{let e=i.int32();return n&&(e+=i.int32()),(await r.iterator()).shuffle(t,e.toString())},this.size)}take(t){const e=this;let n;return n=null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null,Qu(async()=>(await e.iterator()).take(t),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function Qu(t,e=null){return new class extends Ju{constructor(){super(...arguments),this.size=e}async iterator(){return t()}}}function tc(t){return Qu(async()=>Object(Ku["f"])(t),t.length)}function ec(t){if(!Object(Zu["e"])(t))throw new Error("The argument to zip() must be an object or array.");let e;if(Array.isArray(t))for(let n=0;n<t.length;n++)e=null==e?t[n].size:Math.min(e,t[n].size);else if(t instanceof Object)for(const n in t)e=null==e?t[n].size:Math.min(e,t[n].size);return Qu(async()=>{const e=await Object(Zu["c"])(t,t=>{if(t instanceof Ju)return{value:t.iterator(),recurse:!1};if(Object(Zu["e"])(t))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return Object(Ku["g"])(e,Ku["c"].SHORTEST)},e)}function nc(t){if(null===t)return null;const e=t[0];if(Object(Zu["a"])(e)){const e=rc(t);return{value:e,recurse:!1}}return{value:null,recurse:!0}}function rc(t){if(0===t.length)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof h["Zc"]?h["xh"](t):h["Gh"](t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */Ju.MAX_BUFFER_SIZE=1e4;class ic extends Ju{constructor(t){super(),this.input=t}async iterator(){const t=await this.input.iterator(),e=t.decodeUTF8(),n=e.split("\n").map(t=>(t.endsWith("\r")&&(t=t.slice(0,-1)),t));return n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */const oc='"',ac=Symbol("out"),sc=Symbol("field"),uc=Symbol("quote"),cc=Symbol("quoteafterquote"),lc=Symbol("quoteinquote");class hc extends Ju{constructor(t,e){super(),this.input=t,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new ic(t),e||(e={}),this.hasHeader=!1!==e.hasHeader,this.fullColumnNames=e.columnNames,this.columnConfigs=e.columnConfigs,this.configuredColumnsOnly=e.configuredColumnsOnly,e.delimWhitespace?(h["bi"].assert(null==e.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=e.delimiter?e.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const t=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!t)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&t&&h["bi"].assert(t.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=t);const e=this.fullColumnNames.reduce((t,e)=>(t[e]=t[e]+1||1,t),{}),n=Object.keys(e).filter(t=>e[t]>1);if(h["bi"].assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs)for(const r of Object.keys(this.columnConfigs)){const t=this.fullColumnNames.indexOf(r);if(-1===t)throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const t=await this.base.iterator(),e=await t.next();if(e.done)throw new Error("No data was found for CSV parsing.");const n=e.value,r=this.parseRow(n,!1);return r}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let t=await this.base.iterator();return this.hasHeader&&(t=t.skip(1)),t.map(t=>this.makeDataElement(t))}makeDataElement(t){const e=this.parseRow(t),n={},r={};for(let i=0;i<this.fullColumnNames.length;i++){const o=this.fullColumnNames[i],a=this.columnConfigs?this.columnConfigs[o]:null;if(!this.configuredColumnsOnly||a){const s=e[i];let u=null;if(""===s)if(a&&void 0!==a.default)u=a.default;else{if(a&&(a.required||a.isLabel))throw new Error(`Required column ${o} is empty in this line: ${t}`);u=void 0}else{const t=Number(s);if(isNaN(t))u=a&&"bool"===a.dtype?this.getBoolean(s):s;else if(a&&a.dtype)switch(a.dtype){case"float32":u=t;break;case"int32":u=Math.floor(t);break;case"bool":u=this.getBoolean(s);break;default:u=t}else u=t}a&&a.isLabel?r[o]=u:n[o]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(t){return"1"===t||"true"===t.toLowerCase()?1:0}parseRow(t,e=!0){const n=[];let r=0;const i=t.length;let o=ac;for(let a=0;a<i;a++)switch(o){case ac:switch(t.charAt(a)){case oc:r=a+1,o=uc;break;case this.delimiter:if(r=a+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),o=ac;break;default:o=sc,r=a;break}break;case sc:switch(t.charAt(a)){case this.delimiter:n.push(t.substring(r,a)),o=ac,r=a+1;break;default:}break;case uc:switch(t.charAt(a)){case oc:o=cc;break;default:}break;case cc:switch(t.charAt(a)){case this.delimiter:n.push(t.substring(r,a-1)),o=ac,r=a+1;break;case oc:o=uc;break;default:o=lc;break}break;case lc:switch(t.charAt(a)){case oc:o=uc;break;default:}break;default:}if(o===cc?n.push(t.substring(r,i-1)):n.push(t.substring(r)),e&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class fc extends Ku["a"]{constructor(t){super(),this.microphoneConfig=t,this.isClosed=!1,this.fftSize=t.fftSize||1024;const e=Math.log2(this.fftSize);if(this.fftSize<0||e<4||e>14||!Number.isInteger(e))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+this.fftSize);if(this.numFrames=t.numFramesPerSpectrogram||43,this.sampleRateHz=t.sampleRateHz,this.columnTruncateLength=t.columnTruncateLength||this.fftSize,this.audioTrackConstraints=t.audioTrackConstraints,this.smoothingTimeConstant=t.smoothingTimeConstant||0,this.includeSpectrogram=!1!==t.includeSpectrogram,this.includeWaveform=!0===t.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(t={}){if(Object(h["ze"])().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");const e=new fc(t);return await e.start(),e}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(n){throw new Error("Error thrown while initializing video stream: "+n.message)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: `+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;const e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let t,e;const n=await this.getAudioData();if(this.includeSpectrogram){const e=this.flattenQueue(n.freqDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const t=this.flattenQueue(n.timeDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:t,waveform:e},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const t=[],e=[];let n=0;return new Promise(r=>{const i=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:t,timeDataQueue:e}),t.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),e.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(i),r({freqDataQueue:t,timeDataQueue:e}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(t){const e=t[0].length,n=new Float32Array(t.length*e);return t.forEach((t,r)=>n.set(t,r*e)),n}getTensorFromAudioDataArray(t,e){const n=new Float32Array(h["bi"].sizeFromShape(e));return n.set(t,n.length-t.length),Object(h["Gh"])(n,e)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class dc extends Ku["a"]{constructor(t,e){if(super(),this.webcamVideoElement=t,this.webcamConfig=e,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Object(h["Hh"])([0],"int32"),this.webcamConfig.centerCrop){const t=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,e=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-t)/2,r=(1-e)/2,i=n+t,o=e+r;this.cropBox=Object(h["Ih"])([r,n,o,i],[1,4])}else this.cropBox=Object(h["Ih"])([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(t,e={}){if(Object(h["ze"])().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!t){if(t=document.createElement("video"),!e.resizeWidth||!e.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");t.width=e.resizeWidth,t.height=e.resizeHeight}const n=new dc(t,e);return await n.start(),n}async start(){this.webcamConfig.facingMode&&h["bi"].assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(t){throw t.message="Error thrown while initializing video stream: "+t.message,t}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(t=>{this.webcamVideoElement.onloadedmetadata=()=>{t()}})}async next(){if(this.isClosed)return{value:null,done:!0};let t;try{t=h["Kd"].fromPixels(this.webcamVideoElement)}catch(e){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(e))}if(!this.resize)return{value:t,done:!1};try{return{value:this.cropAndResizeFrame(t),done:!1}}catch(e){throw new Error("Error thrown cropping the video: "+e.message)}finally{t.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(t){return Object(h["Ph"])(()=>{const e=t.toFloat().expandDims(0);let n;n=h["df"].cropAndResize(e,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");const r=n.shape;return n.reshape(r.slice(1))})}async capture(){return(await this.next()).value}stop(){const t=this.stream.getTracks();t.forEach(t=>t.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class pc{}var gc=n("dc14");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class mc extends gc["a"]{constructor(t,e={}){super(),this.file=t,this.options=e,h["bi"].assert(t instanceof Uint8Array||!!Object(h["ze"])().get("IS_BROWSER")&&(t instanceof File||t instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=e.offset||0,this.chunkSize=e.chunkSize||1048576}summary(){return"FileChunks "+this.file}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const t=new Promise((t,e)=>{const n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)t(new Uint8Array(this.file.slice(this.offset,n)));else{const r=new FileReader;r.onload=n=>{let i=r.result;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),!(i instanceof Uint8Array))return e(new TypeError("FileReader returned unknown type."));t(i)},r.onabort=t=>e(new Error("Aborted")),r.onerror=t=>e(new Error(t.type));const i=this.file.slice(this.offset,n);r.readAsArrayBuffer(i)}this.offset=n});return{value:await t,done:!1}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */async function vc(t,e={}){let n,r;"string"===typeof t?n=t:(n=t.url,r=yc(t));const i=await h["bi"].fetch(n,r);if(i.ok){const t=new Uint8Array(await i.arrayBuffer());return new mc(t,e)}throw new Error(i.statusText)}const yc=t=>{const e={method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity};return e};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function bc(t){return"string"===typeof t&&"file://"===t.substr(0,7)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class xc extends pc{constructor(t,e={}){super(),this.input=t,this.options=e}async iterator(){if(bc(this.input)&&Object(h["ze"])().get("IS_NODE")){const t=n(8);this.input=t.readFileSync(this.input.substr(7))}return new mc(this.input,this.options)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class wc extends pc{constructor(t,e={}){super(),this.url=t,this.fileOptions=e}async iterator(){return bc(this.url)?new xc(this.url,this.fileOptions).iterator():vc(this.url,this.fileOptions)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function _c(t,e={}){return new hc(new wc(t),e)}function Oc(t){const e=Object(Ku["e"])(t);return Qu(async()=>e)}function Sc(t){return Qu(async()=>{const e=await t();return Object(Ku["e"])(()=>e.next())})}async function Cc(t,e){return dc.create(t,e)}async function kc(t){return fc.create(t)}
/** @license See the LICENSE file. */const Ac="2.3.0";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tc(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>{null!=t&&h["bi"].assert("complex64"!==t.dtype,()=>e+" does not support complex64 tensors in the CPU backend.")})}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ec(t,e,n,r,i,o){const a=i.strideHeight,s=i.strideWidth,u=i.dilationHeight,c=i.dilationWidth,l=i.effectiveFilterHeight,f=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,g="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Object(h["Ld"])(i.outShape,n),v=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],b=i.outShape[2]*i.outShape[3],x=i.outShape[3];for(let h=0;h<i.batchSize;++h){const e=h*y,n=h*r[0];for(let h=0;h<i.inChannels;++h)for(let m=0;m<i.outHeight;++m){const y=m*a-d,w=Math.max(0,y),_=Math.min(i.inHeight,l+y),O=e+m*b;for(let e=0;e<i.outWidth;++e){const a=e*s-p,l=Math.max(0,a),d=Math.min(i.inWidth,f+a);let m=g,y=0,b=0;for(let e=w;e<_;e+=u){const i=n+e*r[1];for(let e=l;e<d;e+=c){const n=i+e*r[2],a=t[n+h];"max"===o&&a>m?m=a:"avg"===o&&(y+=a,b++)}if(isNaN(m))break}const S=O+e*x+h;v[S]="avg"===o?y/b:m}}}return m}function jc(t,e,n,r,i=!1,o=!1){const a=Object(h["Ld"])(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,g=r.padInfo.left,m=Object(h["Ld"])(e,n,t);for(let h=0;h<r.batchSize;++h)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.outHeight;++e){const n=e*s-p;let v=n;while(v<0)v+=c;const y=Math.min(r.inHeight,f+n);for(let s=0;s<r.outWidth;++s){const f=s*u-g;let p=f;while(p<0)p+=l;const b=Math.min(r.inWidth,d+f);let x=Number.NEGATIVE_INFINITY,w=-1;for(let e=v;e<y;e+=c){const a=e-n;for(let n=p;n<b;n+=l){const s=n-f,u=m.get(h,e,n,t);u>x&&(x=u,w=i?o?((h*r.inHeight+e)*r.inWidth+n)*r.inChannels+t:(e*r.inWidth+n)*r.inChannels+t:a*d+s)}}a.set(w,h,e,s,t)}}return a}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dc=h["lf"].nonMaxSuppressionV3Impl,Mc=h["lf"].split,Nc=h["lf"].tile,Ic=h["lf"].topkImpl,Rc=h["lf"].whereImpl;function Fc(t,e,n,r){if("linear"===n)return t.linear(e);if("relu"===n)return t.relu(e);if("elu"===n)return t.elu(e);if("relu6"===n)return t.relu6(e);if("prelu"===n)return t.prelu(e,r);throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}class Pc extends h["zb"]{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new h["O"](this,Object(h["ye"])())}write(t,e,n){this.firstUse&&(this.firstUse=!1,Object(h["ze"])().get("IS_NODE")&&h["Bd"].warn("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const r={};return this.data.set(r,{values:t,dtype:n}),r}move(t,e,n,r){this.data.set(t,{values:e,dtype:r})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:e,complexTensors:n}=this.data.get(t);if("complex64"===e){const t=this.readSync(n.real.dataId),e=this.readSync(n.imag.dataId);return h["Bd"].mergeRealAndImagArrays(t,e)}return this.data.get(t).values}bufferSync(t){const e=this.readSync(t.dataId);let n=e;if("string"===t.dtype)try{n=e.map(t=>h["bi"].decodeString(t))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return h["Ld"](t.shape,t.dtype,n)}makeOutput(t,e,n){const r=this.write(t,e,n);return Object(h["ye"])().makeTensorFromDataId(r,e,n,this)}disposeData(t){if(this.data.has(t)){const{complexTensors:e}=this.data.get(t);null!=e&&(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}}async time(t){const e=h["bi"].now();t();const n=h["bi"].now()-e;return{kernelMs:n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}complex(t,e){const n=this.makeOutput(null,t.shape,"complex64"),r=this.data.get(n.dataId);return r.complexTensors={real:Object(h["ye"])().keep(t.clone()),imag:Object(h["ye"])().keep(e.clone())},n}real(t){const e=this.data.get(t.dataId);return e.complexTensors.real.clone()}imag(t){const e=this.data.get(t.dataId);return e.complexTensors.imag.clone()}slice(t,e,n){Tc(t,"slice");const r=h["lh"].isSliceContinous(t.shape,e,n);if(r){const r=h["lh"].computeFlatOffset(e,t.strides),i=h["bi"].sizeFromShape(n),o=this.readSync(t.dataId);return h["Gh"](o.subarray(r,r+i),n,t.dtype)}const i=h["Ld"](n,t.dtype),o=this.bufferSync(t);for(let a=0;a<i.size;++a){const t=i.indexToLoc(a),n=t.map((t,n)=>t+e[n]);i.values[a]=o.get(...n)}return i.toTensor()}stridedSlice(t,e,n,r){Tc(t,"stridedSlice");const i=h["lh"].computeOutShape(e,n,r);if(i.some(t=>0===t))return h["Gh"]([],i);const o=h["Ld"](i,t.dtype),a=this.bufferSync(t);for(let s=0;s<o.size;s++){const t=o.indexToLoc(s),n=new Array(t.length);for(let i=0;i<n.length;i++)n[i]=t[i]*r[i]+e[i];o.set(a.get(...n),...t)}return o.toTensor()}diag(t){const e=this.readSync(t.dataId),n=h["Ld"]([t.size,t.size],t.dtype),r=n.values;for(let i=0;i<e.length;i++)r[i*t.size+i]=e[i];return n.toTensor()}unstack(t,e){const n=t.shape[e],r=new Array(t.rank-1);let i=0;for(let u=0;u<t.rank;u++)u!==e&&(r[i++]=t.shape[u]);const o=new Array(t.rank).fill(0),a=t.shape.slice();a[e]=1;const s=new Array(n);for(let u=0;u<s.length;u++)o[e]=u,s[u]=this.slice(t,o,a).reshape(r);return s}reverse(t,e){Tc(t,"reverse");const n=h["Ld"](t.shape,t.dtype),r=this.bufferSync(t);for(let i=0;i<n.size;i++){const o=n.indexToLoc(i),a=o.slice();e.forEach(e=>a[e]=t.shape[e]-1-a[e]),n.set(r.get(...a),...o)}return n.toTensor()}concat(t,e){if("complex64"===t[0].dtype){const n=t.map(t=>h["Bg"](t)),r=t.map(t=>h["cf"](t));return h["Qd"](this.concat(n,e),this.concat(r,e))}const n=t.map(t=>{const n=h["bi"].sizeFromShape(t.shape.slice(e));return t.as2D(-1,n)}),r=h["Bd"].computeOutShape(n.map(t=>t.shape),1),i=h["Ld"](r,t[0].dtype).values;if(1===n[0].shape[0]){let t=0;n.forEach(e=>{i.set(this.readSync(e.dataId),t),t+=e.size})}else{let t=0;n.forEach(e=>{const n=this.readSync(e.dataId);let o=0;for(let a=0;a<e.shape[0];++a){const s=a*r[1]+t;for(let t=0;t<e.shape[1];++t)i[s+t]=n[o++]}t+=e.shape[1]})}const o=h["Bd"].computeOutShape(t.map(t=>t.shape),e);return h["Gh"](i,o,t[0].dtype)}neg(t){return Tc(t,"neg"),this.multiply(h["Sg"](-1),t)}add(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(t,e,n,r)=>({real:t+n,imag:e+r})):this.broadcastedBinaryOp(t,e,Object(h["ai"])(t.dtype,e.dtype),(t,e)=>t+e)}addN(t){Tc(t,"addN");const e=t.map(t=>this.readSync(t.dataId)),n=h["Ld"](t[0].shape,t[0].dtype),r=n.values;for(let i=0;i<t.length;i++){const t=e[i];for(let e=0;e<r.length;e++)r[e]+=t[e]}return n.toTensor()}softmax(t,e){const n=h["bi"].parseAxisParam([e],t.shape),r=Object(h["Gf"])(t,n),i=h["Bd"].expandShapeToKeepDim(r.shape,n),o=this.subtract(t,r.reshape(i)),a=this.exp(o),s=this.sum(a,n).reshape(i);return h["pe"](a,s)}subtract(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(t,e,n,r)=>({real:t-n,imag:e-r})):this.broadcastedBinaryOp(t,e,Object(h["ai"])(t.dtype,e.dtype),(t,e)=>t-e)}pow(t,e){return Tc([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.pow(t,e))}batchMatMul(t,e,n,r){Tc([t,e],"matMul");const i=n?t.shape[1]:t.shape[2],o=n?t.shape[2]:t.shape[1],a=r?e.shape[1]:e.shape[2],s=t.shape[0],u=this.readSync(t.dataId),c=this.readSync(e.dataId),[l,f,d]=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],[p,g,m]=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],v=o*a,y=h["Ld"]([s,o,a],t.dtype),b=y.values,x=this.blockSize;for(let h=0;h<s;h++)for(let t=0;t<o;t+=x)for(let e=0;e<a;e+=x)for(let n=0;n<i;n+=x){const r=Math.min(t+x,o),s=Math.min(e+x,a),y=Math.min(n+x,i);for(let i=t;i<r;i++)for(let t=e;t<s;t++){let e=0;for(let r=n;r<y;r++)e+=u[h*l+i*f+r*d]*c[r*p+t*g+h*m];b[h*v+(i*a+t)]+=e}}return y.toTensor()}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:i,activation:o,preluActivationWeights:a}){let s=this.batchMatMul(t,e,n,r);return i&&(s=this.add(s,i)),o&&(s=Fc(this,s,o,a)),s}multiply(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})):this.broadcastedBinaryOp(t,e,Object(h["ai"])(t.dtype,e.dtype),(t,e)=>t*e)}floorDiv(t,e){Tc([t,e],"floorDiv");const n=(t,e)=>Math.floor(t/e),r="int32";return this.broadcastedBinaryOp(t,e,r,n)}sum(t,e){Tc(t,"sum"),h["Bd"].assertAxesAreInnerMostDims("sum",e,t.rank);const[n,r]=h["Bd"].computeOutAndReduceShapes(t.shape,e),i=Object(h["ai"])(t.dtype,"int32"),o=h["ji"](n,i),a=h["bi"].sizeFromShape(r),s=this.readSync(o.dataId),u=this.readSync(t.dataId);for(let c=0;c<s.length;++c){const t=c*a;let e=0;for(let n=0;n<a;++n)e+=u[t+n];s[c]=e}return o}prod(t,e){Tc(t,"sum");const[n,r]=h["Bd"].computeOutAndReduceShapes(t.shape,e),i=Object(h["ai"])(t.dtype,"int32"),o=h["ji"](n,i),a=h["bi"].sizeFromShape(r),s=this.readSync(o.dataId),u=this.readSync(t.dataId);for(let c=0;c<s.length;++c){const t=c*a;let e=1;for(let n=0;n<a;++n)e*=u[t+n];s[c]=e}return o}unsortedSegmentSum(t,e,n){Tc(t,"unsortedSegmentSum");const r=[],i=t.rank-e.rank;for(let o=0;o<i;++o)e=e.expandDims(o+1);for(let o=0;o<n;++o){const n=h["Sg"](o,"int32"),i=h["Ae"](n,e).asType("float32"),a=i.mul(t).sum(0);r.push(a)}return h["xh"](r)}argMin(t,e){Tc(t,"argMin");const n=[e];h["Bd"].assertAxesAreInnerMostDims("argMin",n,t.rank);const[r,i]=h["Bd"].computeOutAndReduceShapes(t.shape,n),o=h["ji"](r,"int32"),a=h["bi"].sizeFromShape(i),s=this.readSync(o.dataId),u=this.readSync(t.dataId);for(let c=0;c<s.length;++c){const t=c*a;let e=u[t],n=0;for(let r=0;r<a;++r){const i=u[t+r];i<e&&(e=i,n=r)}s[c]=n}return o}argMax(t,e){Tc(t,"argMax");const n=[e];h["Bd"].assertAxesAreInnerMostDims("argMax",n,t.rank);const[r,i]=h["Bd"].computeOutAndReduceShapes(t.shape,n),o=h["ji"](r,"int32"),a=h["bi"].sizeFromShape(i),s=this.readSync(o.dataId),u=this.readSync(t.dataId);for(let c=0;c<s.length;++c){const t=c*a;let e=u[t],n=0;for(let r=0;r<a;++r){const i=u[t+r];i>e&&(e=i,n=r)}s[c]=n}return o}cumsum(t,e,n,r){if(Tc(t,"cumsum"),e!==t.rank-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${t.rank-1} but got axis=`+e);const i=Object(h["ai"])(t.dtype,"int32"),o=h["ji"](t.shape,i),a=this.readSync(o.dataId),s=this.readSync(t.dataId),u=t.shape[t.rank-1],c=r?(t,e)=>t+u-e-1:(t,e)=>t+e;for(let l=0;l<s.length;l+=u)for(let t=0;t<u;t++){const e=c(l,t);if(0===t)a[e]=n?0:s[e];else{const r=c(l,t-1);a[e]=n?s[r]+a[r]:s[e]+a[r]}}return o}equal(t,e){return Tc([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t===e?1:0)}notEqual(t,e){return Tc([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t!==e?1:0)}less(t,e){return Tc([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t<e?1:0)}lessEqual(t,e){return Tc([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t<=e?1:0)}greater(t,e){return Tc([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t>e?1:0)}greaterEqual(t,e){return Tc([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t>=e?1:0)}logicalNot(t){Tc(t,"logicalNot");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n[r]=e[r]?0:1;return this.makeOutput(n,t.shape,"bool")}logicalAnd(t,e){return Tc([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t&&e)}logicalOr(t,e){return Tc([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t||e)}select(t,e,n){Tc([t,e,n],"select");const r=this.readSync(t.dataId),i=this.readSync(e.dataId),o=this.readSync(n.dataId),a=h["ji"](e.shape,Object(h["ai"])(e.dtype,n.dtype)),s=this.readSync(a.dataId);let u=0;const c=0===t.rank||t.rank>1||1===e.rank?1:h["bi"].sizeFromShape(e.shape.slice(1));for(let l=0;l<r.length;l++)for(let t=0;t<c;t++)1===r[l]?s[u++]=i[l]:s[u++]=o[l];return a}where(t){Tc([t],"where");const e=this.readSync(t.dataId);return Rc(t.shape,e)}topk(t,e,n){Tc(t,"topk");const r=this.readSync(t.dataId);return Ic(r,t.shape,t.dtype,e,n)}min(t,e){Tc(t,"min"),h["Bd"].assertAxesAreInnerMostDims("min",e,t.rank);const[n,r]=h["Bd"].computeOutAndReduceShapes(t.shape,e),i=h["ji"](n,t.dtype),o=h["bi"].sizeFromShape(r),a=this.readSync(i.dataId),s=this.readSync(t.dataId);for(let u=0;u<a.length;++u){const t=u*o;let e=s[t];for(let n=0;n<o;++n){const r=s[t+n];r<e&&(e=r)}a[u]=e}return i}minimum(t,e){return Tc([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.min(t,e))}mod(t,e){return Tc([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})}maximum(t,e){return Tc([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.max(t,e))}all(t,e){Tc(t,"all"),h["Bd"].assertAxesAreInnerMostDims("all",e,t.rank);const[n,r]=h["Bd"].computeOutAndReduceShapes(t.shape,e),i=h["ji"](n,t.dtype),o=h["bi"].sizeFromShape(r),a=this.readSync(i.dataId),s=this.readSync(t.dataId);for(let u=0;u<a.length;++u){const t=u*o;let e=s[t];for(let n=0;n<o;++n){const r=s[t+n];e=e&&r}a[u]=e}return i}any(t,e){Tc(t,"any"),h["Bd"].assertAxesAreInnerMostDims("any",e,t.rank);const[n,r]=h["Bd"].computeOutAndReduceShapes(t.shape,e),i=h["ji"](n,t.dtype),o=h["bi"].sizeFromShape(r),a=this.readSync(i.dataId),s=this.readSync(t.dataId);for(let u=0;u<a.length;++u){const t=u*o;let e=s[t];for(let n=0;n<o;++n){const r=s[t+n];e=e||r}a[u]=e}return i}squaredDifference(t,e){return Tc([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>{const n=t-e;return n*n})}ceil(t){Tc(t,"ceil");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return this.makeOutput(n,t.shape,"float32")}floor(t){Tc(t,"floor");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return this.makeOutput(n,t.shape,"float32")}sign(t){Tc(t,"x");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)e[r]<0?n[r]=-1:e[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,t.shape,"float32")}isNaN(t){Tc(t,"x");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)Number.isNaN(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")}isInf(t){Tc(t,"x");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)Math.abs(e[r])===1/0&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")}isFinite(t){Tc(t,"x");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)Number.isFinite(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")}round(t){Tc(t,"round");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r){const t=Math.floor(e[r]);e[r]-t<.5?n[r]=Math.floor(e[r]):e[r]-t>.5?n[r]=Math.ceil(e[r]):n[r]=t%2===0?t:t+1}return this.makeOutput(n,t.shape,"float32")}exp(t){Tc(t,"exp");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return this.makeOutput(n,t.shape,"float32")}expm1(t){Tc(t,"expm1");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return this.makeOutput(n,t.shape,"float32")}log(t){Tc(t,"log");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r){const t=e[r];n[r]=Math.log(t)}return this.makeOutput(n,t.shape,"float32")}log1p(t){Tc(t,"log1p");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r){const t=e[r];n[r]=Math.log1p(t)}return this.makeOutput(n,t.shape,"float32")}sqrt(t){Tc(t,"sqrt");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r){const t=e[r];n[r]=Math.sqrt(t)}return this.makeOutput(n,t.shape,"float32")}rsqrt(t){Tc(t,"rsqrt");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r){const t=e[r];n[r]=1/Math.sqrt(t)}return this.makeOutput(n,t.shape,"float32")}reciprocal(t){Tc(t,"reciprocal");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=1/e[r];return this.makeOutput(n,t.shape,"float32")}linear(t){return t}relu(t){Tc(t,"relu");const e=h["ji"](t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return e}relu6(t){Tc(t,"relu");const e=h["ji"](t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return e}prelu(t,e){return Tc([t,e],"prelu"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>t<0?e*t:t)}elu(t){Tc(t,"elu");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r){const t=n[r];e[r]=t>=0?t:Math.exp(t)-1}return this.makeOutput(e,t.shape,"float32")}eluDer(t,e){Tc([t,e],"eluDer");const n=new Float32Array(e.size),r=this.readSync(e.dataId),i=this.readSync(t.dataId);for(let o=0;o<r.length;++o){const t=r[o];n[o]=t>=1?i[o]:i[o]*(t+1)}return this.makeOutput(n,e.shape,"float32")}selu(t){Tc(t,"selu");const e=h["Bd"].SELU_SCALEALPHA,n=h["Bd"].SELU_SCALE,r=new Float32Array(t.size),i=this.readSync(t.dataId);for(let o=0;o<i.length;++o){const t=i[o];r[o]=t>=0?n*t:e*(Math.exp(t)-1)}return this.makeOutput(r,t.shape,"float32")}clip(t,e,n){Tc(t,"clip");const r=new Float32Array(t.size),i=this.readSync(t.dataId);for(let o=0;o<i.length;++o){const t=i[o];r[o]=t>n?n:t<e?e:t}return this.makeOutput(r,t.shape,"float32")}abs(t){const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return this.makeOutput(e,t.shape,"float32")}complexAbs(t){const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<t.size;++r){const t=n[2*r],i=n[2*r+1];e[r]=Math.hypot(t,i)}return this.makeOutput(e,t.shape,"float32")}int(t){Tc(t,"int");const e=new Int32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=n[r];return this.makeOutput(e,t.shape,"int32")}sigmoid(t){Tc(t,"sigmoid");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(e,t.shape,"float32")}softplus(t){Tc(t,"softplus");const e=1.1920928955078125e-7,n=Math.log(e)+2,r=new Float32Array(t.size),i=this.readSync(t.dataId);for(let o=0;o<i.length;++o){const t=i[o]>-n,e=i[o]<n,a=Math.exp(i[o]);let s;s=e?a:t?i[o]:Math.log(1+a),r[o]=s}return this.makeOutput(r,t.shape,"float32")}sin(t){Tc(t,"sin");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return this.makeOutput(e,t.shape,"float32")}cos(t){Tc(t,"cos");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return this.makeOutput(e,t.shape,"float32")}tan(t){Tc(t,"tan");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return this.makeOutput(e,t.shape,"float32")}asin(t){Tc(t,"asin");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return this.makeOutput(e,t.shape,"float32")}acos(t){Tc(t,"acos");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return this.makeOutput(e,t.shape,"float32")}atan(t){Tc(t,"atan");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return this.makeOutput(e,t.shape,"float32")}atan2(t,e){return Tc([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.atan2(t,e))}sinh(t){Tc(t,"sinh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return this.makeOutput(e,t.shape,"float32")}cosh(t){Tc(t,"cosh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return this.makeOutput(e,t.shape,"float32")}tanh(t){Tc(t,"tanh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=h["bi"].tanh(n[r]);return this.makeOutput(e,t.shape,"float32")}asinh(t){Tc(t,"asinh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return this.makeOutput(e,t.shape,"float32")}acosh(t){Tc(t,"acosh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return this.makeOutput(e,t.shape,"float32")}atanh(t){Tc(t,"atanh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return this.makeOutput(e,t.shape,"float32")}erf(t){Tc(t,"erf");const e=new Float32Array(t.size),n=this.readSync(t.dataId),r=h["Bd"].ERF_P,i=h["Bd"].ERF_A1,o=h["Bd"].ERF_A2,a=h["Bd"].ERF_A3,s=h["Bd"].ERF_A4,u=h["Bd"].ERF_A5;for(let c=0;c<n.length;++c){const t=Math.sign(n[c]),l=Math.abs(n[c]),h=1/(1+r*l);e[c]=t*(1-((((u*h+s)*h+a)*h+o)*h+i)*h*Math.exp(-l*l))}return this.makeOutput(e,t.shape,"float32")}step(t,e=0){Tc(t,"step");const n=new Float32Array(t.size),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i){const t=r[i];isNaN(t)?n[i]=NaN:n[i]=t>0?1:e}return this.makeOutput(n,t.shape,"float32")}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:o}){let a=this.conv2d(t,e,n);return r&&(a=this.add(a,r)),i&&(a=Fc(this,a,i,o)),a}conv2d(t,e,n){Tc([t,e],"conv2d");const r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c="channelsLast"===n.dataFormat,l=h["Ld"](n.outShape,t.dtype),f=t.strides[0],d=c?t.strides[1]:t.strides[2],p=c?t.strides[2]:1,g=c?1:t.strides[1],m=l.strides[0],v=c?l.strides[1]:l.strides[2],y=c?l.strides[2]:1,b=c?1:l.strides[1],x=this.readSync(t.dataId),w=this.readSync(e.dataId),_=l.values;for(let h=0;h<n.batchSize;++h){const t=h*f,c=h*m;for(let l=0;l<n.outHeight;++l){const h=c+l*v,f=l*n.strideHeight-u;for(let u=0;u<r;u++){const r=f+u*o;if(r<0||r>=n.inHeight)continue;const c=u*e.strides[0],l=t+r*d;for(let t=0;t<n.outWidth;++t){const r=h+t*y,o=t*n.strideWidth-s;for(let t=0;t<i;t++){const i=o+t*a;if(i<0||i>=n.inWidth)continue;const s=c+t*e.strides[1],u=l+i*p;let h=s;for(let t=0;t<n.inChannels;++t){const e=x[u+t*g];for(let t=0;t<n.outChannels;++t)_[r+t*b]+=e*w[h+t];h+=n.outChannels}}}}}}return l.toTensor()}conv3d(t,e,n){const r=n.filterDepth,i=n.filterHeight,o=n.filterWidth,a=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,f=n.padInfo.top,d=h["Ld"](n.outShape,t.dtype),p=this.readSync(t.dataId),g=this.readSync(e.dataId),m=d.values;for(let h=0;h<n.batchSize;++h){const v=h*t.strides[0],y=h*d.strides[0];for(let h=0;h<n.outDepth;++h){const b=y+h*d.strides[1],x=h*n.strideDepth-c;for(let c=0;c<r;c++){const r=x+c*a;if(r<0||r>=n.inDepth)continue;const h=c*e.strides[0],y=v+r*t.strides[1];for(let a=0;a<n.outHeight;++a){const r=b+a*d.strides[2],c=a*n.strideHeight-f;for(let a=0;a<i;a++){const i=c+a*s;if(i<0||i>=n.inHeight)continue;const f=h+a*e.strides[1],d=y+i*t.strides[2];for(let t=0;t<n.outWidth;++t){const i=r+t*n.outChannels,a=t*n.strideWidth-l;for(let t=0;t<o;t++){const r=a+t*u;if(r<0||r>=n.inWidth)continue;const o=f+t*e.strides[2],s=d+r*n.inChannels;let c=o;for(let t=0;t<n.inChannels;++t){const e=p[s+t];for(let t=0;t<n.outChannels;++t)m[i+t]+=e*g[c+t];c+=n.outChannels}}}}}}}}return d.toTensor()}conv2dDerInput(t,e,n){Tc([t,e],"conv2dDerInput");const r=h["Ld"](n.inShape,"float32"),i=r.values,o=this.readSync(t.dataId),a=this.readSync(e.dataId),[s,u,c]=e.strides,{batchSize:l,filterHeight:f,filterWidth:d,inChannels:p,inHeight:g,inWidth:m,outChannels:v,outHeight:y,outWidth:b,strideHeight:x,strideWidth:w,dataFormat:_}=n,O=f-1-n.padInfo.top,S=d-1-n.padInfo.left,C="channelsLast"===_,k=r.strides[0],A=C?r.strides[1]:r.strides[2],T=C?r.strides[2]:1,E=C?1:r.strides[1],j=t.strides[0],D=C?t.strides[1]:t.strides[2],M=C?t.strides[2]:1,N=C?1:t.strides[1];for(let h=0;h<l;++h)for(let t=0;t<p;++t)for(let e=0;e<g;++e){const n=e-O,r=Math.max(0,Math.ceil(n/x)),l=Math.min(y,(f+n)/x);for(let p=0;p<m;++p){const g=p-S,m=Math.max(0,Math.ceil(g/w)),y=Math.min(b,(d+g)/w);let _=0;for(let e=r;e<l;++e){const r=e*x-n;for(let n=m;n<y;++n){const i=n*w-g,l=j*h+D*e+M*n,p=s*(f-1-r)+u*(d-1-i)+c*t;for(let t=0;t<v;++t){const e=o[l+N*t],n=a[p+t];_+=e*n}}}const O=k*h+A*e+T*p+E*t;i[O]=_}}return r.toTensor()}conv3dDerInput(t,e,n){const r=h["Ld"](n.inShape,"float32"),i=r.values,[o,a,s,u]=r.strides,c=this.readSync(t.dataId),[l,f,d,p]=t.strides,g=this.readSync(e.dataId),[m,v,y,b]=e.strides,{batchSize:x,filterDepth:w,filterHeight:_,filterWidth:O,inChannels:S,inDepth:C,inHeight:k,inWidth:A,outChannels:T,outDepth:E,outHeight:j,outWidth:D,strideDepth:M,strideHeight:N,strideWidth:I}=n,R=w-1-n.padInfo.front,F=_-1-n.padInfo.top,P=O-1-n.padInfo.left;for(let h=0;h<x;++h)for(let t=0;t<S;++t)for(let e=0;e<C;++e){const n=e-R,r=Math.max(0,Math.ceil(n/M)),x=Math.min(E,(w+n)/M);for(let S=0;S<k;++S){const C=S-F,k=Math.max(0,Math.ceil(C/N)),E=Math.min(j,(_+C)/N);for(let j=0;j<A;++j){const A=j-P,R=Math.max(0,Math.ceil(A/I)),F=Math.min(D,(O+A)/I);let $=0;for(let e=r;e<x;++e){const r=e*M-n;for(let n=k;n<E;++n){const i=n*N-C;for(let o=R;o<F;++o){const a=o*I-A,s=l*h+f*e+d*n+p*o,u=m*(w-1-r)+v*(_-1-i)+y*(O-1-a)+b*t;for(let t=0;t<T;++t){const e=c[s+t],n=g[u+t];$+=e*n}}}}i[o*h+a*e+s*S+u*j+t]=$}}}return r.toTensor()}conv2dDerFilter(t,e,n){Tc([t,e],"conv2dDerFilter");const r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s="channelsLast"===n.dataFormat,u=h["Ld"](n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,f=this.bufferSync(t),d=this.bufferSync(e);for(let h=0;h<o;++h){const t=Math.max(0,Math.ceil((l-h)/r)),e=Math.min(n.outHeight,(n.inHeight+l-h)/r);for(let o=0;o<a;++o){const a=Math.max(0,Math.ceil((c-o)/i)),p=Math.min(n.outWidth,(n.inWidth+c-o)/i);for(let g=0;g<n.inChannels;++g)for(let m=0;m<n.outChannels;++m){let v=0;for(let u=0;u<n.batchSize;++u)for(let n=t;n<e;++n){const t=h+n*r-l;for(let e=a;e<p;++e){const r=o+e*i-c;v+=s?f.get(u,t,r,g)*d.get(u,n,e,m):f.get(u,g,t,r)*d.get(u,m,n,e)}}u.set(v,h,o,g,m)}}}return u.toTensor()}conv3dDerFilter(t,e,n){const r=n.strideDepth,i=n.strideHeight,o=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=h["Ld"](n.filterShape,"float32"),l=c.values,[f,d,p,g]=c.strides,m=this.readSync(e.dataId),[v,y,b,x]=e.strides,w=this.readSync(t.dataId),[_,O,S,C]=t.strides,k=n.padInfo.front,A=n.padInfo.left,T=n.padInfo.top;for(let h=0;h<a;++h){const t=Math.max(0,Math.ceil((k-h)/r)),e=Math.min(n.outDepth,(n.inDepth+k-h)/r),a=h*f;for(let c=0;c<s;++c){const s=Math.max(0,Math.ceil((T-c)/i)),f=Math.min(n.outHeight,(n.inHeight+T-c)/i),E=c*d+a;for(let a=0;a<u;++a){const u=Math.max(0,Math.ceil((A-a)/o)),d=Math.min(n.outWidth,(n.inWidth+A-a)/o),j=a*p+E;for(let p=0;p<n.inChannels;++p){const E=p*g+j;for(let g=0;g<n.outChannels;++g){let j=0;for(let l=0;l<n.batchSize;++l){const n=l*_,E=l*v;for(let l=t;l<e;++l){const t=h+l*r-k,e=t*O+n,v=l*y+E;for(let n=s;n<f;++n){const t=c+n*i-T,r=t*S+e,s=n*b+v;for(let e=u;e<d;++e){const t=a+e*o-A,n=t*C+r,i=e*x+s;j+=w[n+p]*m[i+g]}}}}l[E+g]=j}}}}}return c.toTensor()}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:o}){let a=this.depthwiseConv2D(t,e,n);return r&&(a=this.add(a,r)),i&&(a=Fc(this,a,i,o)),a}depthwiseConv2D(t,e,n){Tc([t,e],"depthwiseConv2D");const r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=h["Ld"](n.outShape,t.dtype),f=this.readSync(t.dataId),d=this.readSync(e.dataId),p=l.values;for(let h=0;h<n.batchSize;++h){const g=h*t.strides[0],m=h*l.strides[0];for(let h=0;h<n.outHeight;++h){const v=m+h*l.strides[1],y=h*n.strideHeight-s;for(let s=0;s<r;++s){const r=y+s*o;if(r<0||r>=n.inHeight)continue;const h=s*e.strides[0],m=g+r*t.strides[1];for(let t=0;t<n.outWidth;++t){const r=v+t*l.strides[2],o=t*n.strideWidth-u;for(let t=0;t<i;++t){const i=o+t*a;if(i<0||i>=n.inWidth)continue;const s=h+t*e.strides[1],u=m+i*n.inChannels;let l=r,g=s;for(let t=0;t<n.inChannels;++t){const e=f[u+t];for(let t=0;t<c;++t)p[l+t]+=e*d[g+t];l+=c,g+=c}}}}}}return l.toTensor()}depthwiseConv2DDerInput(t,e,n){Tc([t,e],"depthwiseConv2DDerInput");const r=h["Ld"](n.inShape,"float32"),i=r.values,[o,a,s]=r.strides,u=this.readSync(t.dataId),[c,l,f]=t.strides,d=this.readSync(e.dataId),[p,g,m]=e.strides,{batchSize:v,filterHeight:y,filterWidth:b,inChannels:x,inHeight:w,inWidth:_,outChannels:O,outHeight:S,outWidth:C,strideHeight:k,strideWidth:A}=n,T=y-1-n.padInfo.top,E=b-1-n.padInfo.left,j=O/x;for(let h=0;h<v;++h)for(let t=0;t<x;++t)for(let e=0;e<w;++e){const n=e-T,r=Math.max(0,Math.ceil(n/k)),v=Math.min(S,(y+n)/k);for(let x=0;x<_;++x){const w=x-E,_=Math.max(0,Math.ceil(w/A)),O=Math.min(C,(b+w)/A);let S=0;for(let e=r;e<v;++e){const r=e*k-n;for(let n=_;n<O;++n){const i=n*A-w,o=c*h+l*e+f*n,a=p*(y-1-r)+g*(b-1-i)+m*t;for(let e=0;e<j;++e){const n=t*j+e,r=u[o+n],i=d[a+e];S+=r*i}}}i[o*h+a*e+s*x+t]=S}}return r.toTensor()}depthwiseConv2DDerFilter(t,e,n){Tc([t,e],"depthwiseConv2DDerFilter");const r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=h["Ld"](n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,f=this.bufferSync(t),d=this.bufferSync(e);for(let h=0;h<o;++h){const t=Math.max(0,Math.ceil((c-h)/r)),e=Math.min(n.outHeight,(n.inHeight+c-h)/r);for(let o=0;o<a;++o){const a=Math.max(0,Math.ceil((u-o)/i)),p=Math.min(n.outWidth,(n.inWidth+u-o)/i);for(let g=0;g<n.outChannels;++g){const m=Math.trunc(g/l),v=g%l;let y=0;for(let s=0;s<n.batchSize;++s)for(let n=t;n<e;++n){const t=h+n*r-c;for(let e=a;e<p;++e){const r=o+e*i-u;y+=f.get(s,t,r,m)*d.get(s,n,e,g)}}s.set(y,h,o,m,v)}}}return s.toTensor()}tile(t,e){return Tc(t,"tile"),Nc(this.bufferSync(t),e)}pad(t,e,n){Tc(t,"pad");const r=e.map((e,n)=>e[0]+t.shape[n]+e[1]),i=e.map(t=>t[0]),o=this.bufferSync(t),a=h["Ld"](r,t.dtype);0!==n&&a.values.fill(n);for(let s=0;s<t.size;s++){const t=o.indexToLoc(s),e=t.map((t,e)=>t+i[e]);a.set(o.get(...t),...e)}return a.toTensor()}gather(t,e,n){Tc([t,e],"gather");const r=t.shape.slice(),i=this.readSync(e.dataId);r[n]=i.length;const o=h["Ld"](r,t.dtype),a=this.bufferSync(t);for(let s=0;s<o.size;++s){const t=o.indexToLoc(s),e=t.slice();e[n]=i[t[n]];const r=a.locToIndex(e);o.values[s]=a.values[r]}return o.toTensor()}batchToSpaceND(t,e,n){Tc([t],"batchToSpaceND");const r=e.reduce((t,e)=>t*e),i=h["Bd"].getReshaped(t.shape,e,r),o=h["Bd"].getPermuted(i.length,e.length),a=h["Bd"].getReshapedPermuted(t.shape,e,r),s=h["Bd"].getSliceBeginCoords(n,e.length),u=h["Bd"].getSliceSize(a,n,e.length);return h["Uh"](t.reshape(i),o).reshape(a).slice(s,u)}spaceToBatchND(t,e,n){Tc([t],"spaceToBatchND");const r=e.reduce((t,e)=>t*e),i=[[0,0]];i.push(...n);for(let l=1+e.length;l<t.shape.length;++l)i.push([0,0]);const o=t.pad(i),a=h["Bd"].getReshaped(o.shape,e,r,!1),s=h["Bd"].getPermuted(a.length,e.length,!1),u=h["Bd"].getReshapedPermuted(o.shape,e,r,!1),c=h["Uh"](o.reshape(a),s);return Object(h["Jg"])(c,u)}maxPool(t,e){Tc(t,"maxPool");const n=this.readSync(t.dataId);return Ec(n,t.shape,t.dtype,t.strides,e,"max").toTensor()}maxPoolBackprop(t,e,n,r){Tc([e,n],"maxPoolBackprop");const i=this.readSync(e.dataId),o=Object(h["Ld"])(r.outShape,e.dtype,jc(i,e.shape,e.dtype,r).values),a=r.strideHeight,s=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,l=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=f-1-r.padInfo.left,p=l-1-r.padInfo.top,g=h["Ld"](e.shape,"float32"),m=this.bufferSync(t);for(let h=0;h<r.batchSize;++h)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.inHeight;++e)for(let n=0;n<r.inWidth;++n){const i=e-p,v=n-d;let y=0;for(let e=0;e<l;e+=u){const n=(i+e)/a;if(!(n<0||n>=r.outHeight||Math.floor(n)!==n))for(let i=0;i<f;i+=c){const a=(v+i)/s;if(a<0||a>=r.outWidth||Math.floor(a)!==a)continue;const u=l*f-1-o.get(h,n,a,t),c=e*f+i,d=u===c?1:0;if(0===d)continue;const p=m.get(h,n,a,t);y+=p*d}}g.set(y,h,e,n,t)}return g.toTensor()}avgPoolBackprop(t,e,n){Tc([t,e],"avgPoolBackprop");const r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,f=l-1-n.padInfo.left,d=c-1-n.padInfo.top,p=h["Ld"](e.shape,"float32"),g=1/(o*a),m=this.bufferSync(t);for(let h=0;h<n.batchSize;++h)for(let t=0;t<n.inChannels;++t)for(let e=0;e<n.inHeight;++e)for(let o=0;o<n.inWidth;++o){const a=e-d,v=o-f;let y=0;for(let e=0;e<c;e+=s){const o=(a+e)/r;if(!(o<0||o>=n.outHeight||Math.floor(o)!==o))for(let e=0;e<l;e+=u){const r=(v+e)/i;if(r<0||r>=n.outWidth||Math.floor(r)!==r)continue;const a=m.get(h,o,r,t);y+=a}}p.set(y*g,h,e,o,t)}return p.toTensor()}pool3d(t,e,n){Tc(t,"pool3d");const r=e.strideDepth,i=e.strideHeight,o=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,g=e.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(t.dataId),y=h["Ld"](e.outShape,t.dtype),b=y.values,x=e.outShape[1]*e.outShape[2]*e.outShape[3]*e.outShape[4],w=e.outShape[2]*e.outShape[3]*e.outShape[4],_=e.outShape[3]*e.outShape[4],O=e.outShape[4];for(let h=0;h<e.batchSize;++h){const y=h*x,S=h*t.strides[0];for(let h=0;h<e.inChannels;++h)for(let x=0;x<e.outDepth;++x){const C=x*r-d;let k=C;while(k<0)k+=a;const A=Math.min(e.inDepth,c+C),T=y+x*w;for(let r=0;r<e.outHeight;++r){const c=r*i-p;let d=c;while(d<0)d+=s;const y=Math.min(e.inHeight,l+c),x=T+r*_;for(let r=0;r<e.outWidth;++r){const i=r*o-g;let c=i;while(c<0)c+=u;const l=Math.min(e.inWidth,f+i),p=x+r*O;let w=m,_=0,C=0;for(let e=k;e<A;e+=a){const r=S+e*t.strides[1];for(let e=d;e<y;e+=s){const i=r+e*t.strides[2];for(let e=c;e<l;e+=u){const r=i+e*t.strides[3],o=v[r+h];if("max"===n&&o>w?w=o:"avg"===n&&(_+=o,C++),isNaN(w))break}if(isNaN(w))break}if(isNaN(w))break}const T=p+h;b[T]="avg"===n?_/C:w}}}}return y.toTensor()}avgPool3d(t,e){return Tc(t,"avgPool3d"),this.pool3d(t,e,"avg").toFloat()}avgPool3dBackprop(t,e,n){Tc([t,e],"avgPool3dBackprop");const r=n.strideDepth,i=n.strideHeight,o=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,g=n.effectiveFilterWidth,m=d-1-n.padInfo.front,v=g-1-n.padInfo.left,y=p-1-n.padInfo.top,b=h["Ld"](e.shape,"float32"),x=1/(a*s*u),w=this.bufferSync(t);for(let h=0;h<n.batchSize;++h)for(let t=0;t<n.inChannels;++t)for(let e=0;e<n.inDepth;++e)for(let a=0;a<n.inHeight;++a)for(let s=0;s<n.inWidth;++s){const u=e-m,_=a-y,O=s-v;let S=0;for(let e=0;e<d;e+=c){const a=(u+e)/r;if(!(a<0||a>=n.outDepth||Math.floor(a)!==a))for(let e=0;e<p;e+=l){const r=(_+e)/i;if(!(r<0||r>=n.outHeight||Math.floor(r)!==r))for(let e=0;e<g;e+=f){const i=(O+e)/o;if(i<0||i>=n.outWidth||Math.floor(i)!==i)continue;const s=w.get(h,a,r,i,t);S+=s}}}b.set(S*x,h,e,a,s,t)}return b.toTensor()}maxPool3d(t,e){return Tc(t,"maxPool3d"),this.pool3d(t,e,"max").toFloat()}maxPool3dPositions(t,e){const n=h["Ld"](e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,o=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,g=e.padInfo.left,m=this.bufferSync(t);for(let h=0;h<e.batchSize;++h)for(let t=0;t<e.inChannels;++t)for(let v=0;v<e.outDepth;++v){const y=v*r-d;let b=y;while(b<0)b+=a;const x=Math.min(e.inDepth,c+y);for(let r=0;r<e.outHeight;++r){const c=r*i-p;let d=c;while(d<0)d+=s;const w=Math.min(e.inHeight,l+c);for(let i=0;i<e.outWidth;++i){const p=i*o-g;let _=p;while(_<0)_+=u;const O=Math.min(e.inWidth,f+p);let S=Number.NEGATIVE_INFINITY,C=-1;for(let e=b;e<x;e+=a){const n=e-y;for(let r=d;r<w;r+=s){const i=r-c;for(let o=_;o<O;o+=u){const a=o-p,s=m.get(h,e,r,o,t);s>=S&&(S=s,C=n*l*f+i*l+a)}}}n.set(C,h,v,r,i,t)}}}return n.toTensor()}maxPool3dBackprop(t,e,n,r){Tc([e,n],"maxPool3dBackprop");const i=this.maxPool3dPositions(e,r),o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=f-1-r.padInfo.front,m=p-1-r.padInfo.left,v=d-1-r.padInfo.top,y=h["Ld"](e.shape,"float32"),b=this.bufferSync(i),x=this.bufferSync(t);for(let h=0;h<r.batchSize;++h)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.inDepth;++e)for(let n=0;n<r.inHeight;++n)for(let i=0;i<r.inWidth;++i){const w=e-g,_=n-v,O=i-m;let S=0;for(let e=0;e<f;e+=u){const n=(w+e)/o;if(!(n<0||n>=r.outDepth||Math.floor(n)!==n))for(let i=0;i<d;i+=c){const o=(_+i)/a;if(!(o<0||o>=r.outHeight||Math.floor(o)!==o))for(let a=0;a<p;a+=l){const u=(O+a)/s;if(u<0||u>=r.outWidth||Math.floor(u)!==u)continue;const c=f*d*p-1-b.get(h,n,o,u,t),l=e*d*p+i*p+a,g=c===l?1:0;if(0===g)continue;const m=x.get(h,n,o,u,t);S+=m*g}}}y.set(S,h,e,n,i,t)}return y.toTensor()}cast(t,e){return h["Bd"].castTensor(t,e,this)}reshape(t,e){return h["Bd"].reshapeTensor(t,e)}avgPool(t,e){Tc(t,"avgPool"),Tc(t,"maxPool");const n=this.readSync(t.dataId);return Ec(n,t.shape,t.dtype,t.strides,e,"avg").toTensor().toFloat()}resizeBilinear(t,e,n,r){Tc(t,"resizeBilinear");const[i,o,a,s]=t.shape,u=this.readSync(t.dataId),c=new Float32Array(h["bi"].sizeFromShape([i,e,n,s])),l=[r&&e>1?o-1:o,r&&n>1?a-1:a],f=[r&&e>1?e-1:e,r&&n>1?n-1:n];let d=0;const p=l[0]/f[0],g=l[1]/f[1];for(let h=0;h<i;h++)for(let r=0;r<e;r++){const e=p*r,i=Math.floor(e),l=e-i,f=Math.min(o-1,Math.ceil(e)),m=h*t.strides[0]+i*t.strides[1],v=h*t.strides[0]+f*t.strides[1];for(let r=0;r<n;r++){const e=g*r,n=Math.floor(e),i=e-n,o=Math.min(a-1,Math.ceil(e)),h=m+n*t.strides[2],f=v+n*t.strides[2],p=m+o*t.strides[2],y=v+o*t.strides[2];for(let t=0;t<s;t++){const e=u[h+t],n=u[f+t],r=u[p+t],o=u[y+t],a=e+(r-e)*i,s=n+(o-n)*i,g=a+(s-a)*l;c[d++]=g}}}return h["Gh"](c,[i,e,n,s])}resizeBilinearBackprop(t,e,n){Tc([t,e],"resizeBilinearBackprop");const[r,i,o,a]=e.shape,[,s,u]=t.shape,c=new Float32Array(r*i*o*a),l=[n&&s>1?i-1:i,n&&u>1?o-1:o],f=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/f[0],p=l[1]/f[1],g=this.readSync(t.dataId);let m=0;for(let h=0;h<r;h++){const t=h*e.strides[0];for(let n=0;n<s;n++){const r=n*d,s=Math.floor(r),l=Math.min(Math.ceil(r),i-1),h=t+s*e.strides[1],f=t+l*e.strides[1],v=r-s,y=1-v;for(let t=0;t<u;t++){const n=t*p,r=Math.floor(n),i=Math.min(Math.ceil(n),o-1),s=n-r,u=1-s,l=h+r*e.strides[2],d=h+i*e.strides[2],b=f+r*e.strides[2],x=f+i*e.strides[2],w=y*u,_=y*s,O=v*u,S=v*s;for(let t=0;t<a;t++){const e=g[m++];c[l+t]+=e*w,c[d+t]+=e*_,c[b+t]+=e*O,c[x+t]+=e*S}}}}return h["Kh"](c,[r,o,i,a],e.dtype)}resizeNearestNeighbor(t,e,n,r){Tc(t,"resizeNearestNeighbor");const[i,o,a,s]=t.shape,u=this.readSync(t.dataId),c=new Float32Array(i*e*n*s),l=[r&&e>1?o-1:o,r&&n>1?a-1:a],f=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=l[0]/f[0],p=l[1]/f[1];let g=0;for(let h=0;h<i;h++){const i=h*t.strides[0];for(let l=0;l<e;l++){const e=d*l,h=Math.min(o-1,r?Math.round(e):Math.floor(e)),f=i+h*t.strides[1];for(let i=0;i<n;i++){const e=p*i,n=Math.min(a-1,r?Math.round(e):Math.floor(e)),o=f+n*t.strides[2];for(let t=0;t<s;t++){const e=u[o+t];c[g++]=e}}}}return h["Gh"](c,[i,e,n,s],t.dtype)}resizeNearestNeighborBackprop(t,e,n){Tc([t,e],"resizeNearestNeighborBackprop");const[r,i,o,a]=e.shape,[,s,u]=t.shape,c=new Float32Array(r*i*o*a),l=this.readSync(t.dataId),f=[n&&s>1?i-1:i,n&&u>1?o-1:o],d=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=f[0]/d[0],g=f[1]/d[1],m=1/p,v=1/g,y=2*Math.ceil(m)+2,b=2*Math.ceil(v)+2;for(let h=0;h<r;h++){const r=h*e.strides[0];for(let h=0;h<i;h++){const f=r+h*e.strides[1],d=Math.floor(h*m),x=Math.floor(d-y/2);for(let m=0;m<o;m++){const d=f+m*e.strides[2],w=Math.floor(m*v),_=Math.floor(w-b/2);for(let e=0;e<a;e++){let a=0;for(let c=0;c<y;c++){const f=c+x;if(f<0||f>=s)continue;const d=r+f*t.strides[1],v=f*p,y=Math.min(i-1,n?Math.round(v):Math.floor(v));if(h===y)for(let r=0;r<b;r++){const i=r+_;if(i<0||i>=u)continue;const s=d+i*t.strides[2],c=i*g,h=Math.min(o-1,n?Math.round(c):Math.floor(c));m===h&&(a+=l[s+e])}}c[d+e]=a}}}}return h["Kh"](c,e.shape,e.dtype)}batchNorm(t,e,n,r,i,o){Tc([t,e,n,i,r],"batchNorm");const a=this.readSync(t.dataId),s=this.readSync(e.dataId),u=this.readSync(n.dataId),c=i?this.readSync(i.dataId):new Float32Array([1]),l=r?this.readSync(r.dataId):new Float32Array([0]),f=new Float32Array(a.length),d=l.length,p=c.length,g=u.length,m=s.length;let v=0,y=0,b=0,x=0;for(let h=0;h<a.length;++h)f[h]=l[v++]+(a[h]-s[y++])*c[b++]/Math.sqrt(u[x++]+o),v>=d&&(v=0),y>=m&&(y=0),b>=p&&(b=0),x>=g&&(x=0);return h["Kh"](f,t.shape)}localResponseNormalization4D(t,e,n,r,i){Tc(t,"localResponseNormalization4D");const o=t.shape[3],a=o-1,s=this.readSync(t.dataId),u=t.size,c=new Float32Array(u);function l(t){const n=t%o;let r=t-n+Math.max(0,n-e);const i=t-n+Math.min(n+e,a);let u=0;for(;r<=i;r++){const t=s[r];u+=t*t}return u}for(let h=0;h<u;h++){const t=l(h),e=s[h]*Math.pow(n+r*t,-i);c[h]=e}return h["Kh"](c,t.shape)}LRNGrad(t,e,n,r,i,o,a){Tc(t,"LRNGrad");const s=t.shape[3],u=this.readSync(t.dataId),c=this.readSync(e.dataId),l=this.readSync(n.dataId),f=new Float32Array(t.size),d=t.size;for(let h=0;h<d;h++){const t=h%s,e=h-t+Math.max(0,t-r),n=h-t+Math.min(s,t+r+1);let d=0;for(let r=e;r<n;r++)d+=Math.pow(c[r],2);d=o*d+i;for(let r=e;r<n;r++){let t=-2*o*a*c[r]*l[h]/d;h===r&&(t+=Math.pow(d,-a)),t*=u[h],f[r]+=t}}return h["Kh"](f,t.shape)}multinomial(t,e,n,r){Tc(t,"multinomial");const i=e?t:h["mh"](t),o=i.shape[0],a=i.shape[1],s=h["ji"]([o,n],"int32"),u=this.readSync(s.dataId),c=this.readSync(i.dataId);for(let l=0;l<o;++l){const t=l*a,e=new Float32Array(a-1);e[0]=c[t];for(let n=1;n<e.length;++n)e[n]=e[n-1]+c[t+n];const i=Yu["alea"](r.toString()),o=l*n;for(let r=0;r<n;++r){const t=i();u[o+r]=e.length;for(let n=0;n<e.length;n++)if(t<e[n]){u[o+r]=n;break}}}return s}oneHot(t,e,n,r){Tc(t,"oneHot");const i=new Float32Array(t.size*e);i.fill(r);const o=this.readSync(t.dataId);for(let a=0;a<t.size;++a)o[a]>=0&&o[a]<e&&(i[a*e+o[a]]=n);return h["Ih"](i,[t.size,e],"int32")}nonMaxSuppression(t,e,n,r,i){Tc(t,"nonMaxSuppression");const o=this.readSync(t.dataId),a=this.readSync(e.dataId);return Dc(o,a,n,r,i)}fft(t){return this.fftBatch(t,!1)}ifft(t){return this.fftBatch(t,!0)}fftBatch(t,e){const n=t.shape[0],r=t.shape[1],i=h["Ld"](t.shape,"float32"),o=h["Ld"](t.shape,"float32"),a=h["Bg"](t).as2D(n,r),s=h["cf"](t).as2D(n,r);for(let c=0;c<n;c++){const t=a.slice([c,0],[1,r]),n=s.slice([c,0],[1,r]),u=h["Qd"](t,n),l=this.readSync(this.fftImpl(u,e).dataId);for(let e=0;e<r;e++){const t=h["Bd"].getComplexWithIndex(l,e);i.values[c*r+e]=t.real,o.values[c*r+e]=t.imag}}const u=h["Qd"](i.toTensor(),o.toTensor());return u.as2D(n,r)}fftImpl(t,e){const n=t.as1D(),r=n.size;if(this.isExponentOf2(r)){let i=this.fftRadix2(n,r,e).as2D(t.shape[0],t.shape[1]);return e&&(i=h["Qd"](h["Bg"](i).div(h["Sg"](r)),h["cf"](i).div(h["Sg"](r)))),i}{const n=this.readSync(t.dataId),i=this.fourierTransformByMatmul(n,r,e),o=h["Bd"].splitRealAndImagArrays(i);return h["Qd"](o.real,o.imag).as2D(t.shape[0],t.shape[1])}}isExponentOf2(t){return 0===(t&t-1)}fftRadix2(t,e,n){if(1===e)return t;const r=this.readSync(t.dataId),i=e/2,o=h["Bd"].complexWithEvenIndex(r);let a=h["Qd"](o.real,o.imag).as1D();const s=h["Bd"].complexWithOddIndex(r);let u=h["Qd"](s.real,s.imag).as1D();a=this.fftRadix2(a,i,n),u=this.fftRadix2(u,i,n);const c=h["Bd"].exponents(e,n),l=h["Qd"](c.real,c.imag).mul(u),f=a.add(l),d=a.sub(l),p=h["Bg"](f).concat(h["Bg"](d)),g=h["cf"](f).concat(h["cf"](d));return h["Qd"](p,g).as1D()}fourierTransformByMatmul(t,e,n){const r=new Float32Array(2*e);for(let i=0;i<e;i++){let o=0,a=0;for(let r=0;r<e;r++){const s=h["Bd"].exponent(i*r,e,n),u=h["Bd"].getComplexWithIndex(t,r);o+=u.real*s.real-u.imag*s.imag,a+=u.real*s.imag+u.imag*s.real}n&&(o/=e,a/=e),h["Bd"].assignToTypedArray(r,o,a,i)}return r}depthToSpace(t,e,n){h["bi"].assert("NHWC"===n,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n),h["bi"].assert(e>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+e);const r=t.shape[0],i=t.shape[1],o=t.shape[2],a=t.shape[3],s=i*e,u=o*e,c=a/(e*e),l=this.readSync(t.dataId),f=new Float32Array(r*s*u*c);let d=0;for(let h=0;h<r;++h)for(let t=0;t<s;++t){const n=Math.floor(t/e),r=t%e;for(let t=0;t<u;++t){const s=Math.floor(t/e),u=t%e,p=(r*e+u)*c;for(let t=0;t<c;++t){const e=t+p,r=e+a*(s+o*(n+i*h));f[d++]=l[r]}}}return h["Kh"](f,[r,s,u,c])}broadcastedBinaryOp(t,e,n,r){const i=h["Bd"].assertAndGetBroadcastShape(t.shape,e.shape),o=h["Ld"](i,n),a=this.readSync(t.dataId),s=this.readSync(e.dataId),u=h["Bd"].getBroadcastDims(t.shape,i),c=h["Bd"].getBroadcastDims(e.shape,i),l=o.values;if(u.length+c.length===0)for(let h=0;h<l.length;++h)l[h]=r(a[h%a.length],s[h%s.length]);else{const n=this.bufferSync(t),i=this.bufferSync(e);for(let h=0;h<l.length;++h){const f=o.indexToLoc(h),d=f.slice(-t.rank);u.forEach(t=>d[t]=0);const p=n.locToIndex(d),g=f.slice(-e.rank);c.forEach(t=>g[t]=0);const m=i.locToIndex(g);l[h]=r(a[p],s[m])}}return o.toTensor()}broadcastedBinaryComplexOp(t,e,n){const r=h["Bd"].assertAndGetBroadcastShape(t.shape,e.shape),i=h["Ld"](r,"float32"),o=h["Ld"](r,"float32"),a=this.readSync(t.dataId),s=this.readSync(e.dataId),u=h["Bd"].getBroadcastDims(t.shape,r),c=h["Bd"].getBroadcastDims(e.shape,r),l=i.values,f=o.values;if(u.length+c.length===0)for(let h=0;h<l.length;h++){const t=h%a.length,e=h%s.length,r=n(a[2*t],a[2*t+1],s[2*e],s[2*e+1]);l[h]=r.real,f[h]=r.imag}else{const r=this.bufferSync(this.data.get(t.dataId).complexTensors.real),o=this.bufferSync(this.data.get(e.dataId).complexTensors.real);for(let h=0;h<l.length;h++){const d=i.indexToLoc(h),p=d.slice(-t.rank);u.forEach(t=>p[t]=0);const g=r.locToIndex(p),m=d.slice(-e.rank);c.forEach(t=>m[t]=0);const v=o.locToIndex(m),y=n(a[2*g],a[2*g+1],s[2*v],s[2*v+1]);l[h]=y.real,f[h]=y.imag}}return this.complex(i.toTensor(),o.toTensor())}split(t,e,n){return Mc(t,e,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}cropAndResize(t,e,n,r,i,o){const[a,s,u,c]=t.shape,l=e.shape[0],[f,d]=r,p=h["Ld"]([l,f,d,c],"float32"),g=this.readSync(e.dataId),m=this.readSync(n.dataId),v=this.readSync(t.dataId),y=t.strides,b=p.strides;for(let h=0;h<l;h++){const t=4*h,e=g[t],n=g[t+1],r=g[t+2],l=g[t+3],x=m[h];if(x>=a)continue;const w=f>1?(r-e)*(s-1)/(f-1):0,_=d>1?(l-n)*(u-1)/(d-1):0;for(let a=0;a<f;a++){const t=f>1?e*(s-1)+a*w:.5*(e+r)*(s-1);if(t<0||t>s-1)for(let e=0;e<d;e++)for(let t=0;t<c;t++){const n=t+e*b[2]+a*b[1]+h*b[0];p.values[n]=o}else if("bilinear"===i){const e=Math.floor(t),r=Math.ceil(t),i=t-e;for(let t=0;t<d;t++){const s=d>1?n*(u-1)+t*_:.5*(n+l)*(u-1);if(s<0||s>u-1){for(let e=0;e<c;e++){const n=e+t*b[2]+a*b[1]+h*b[0];p.values[n]=o}continue}const f=Math.floor(s),g=Math.ceil(s),m=s-f;for(let n=0;n<c;n++){let o=n+f*y[2]+e*y[1]+x*y[0];const s=v[o];o=n+g*y[2]+e*y[1]+x*y[0];const u=v[o];o=n+f*y[2]+r*y[1]+x*y[0];const c=v[o];o=n+g*y[2]+r*y[1]+x*y[0];const l=v[o],d=s+(u-s)*m,w=c+(l-c)*m;o=n+t*b[2]+a*b[1]+h*b[0],p.values[o]=d+(w-d)*i}}}else for(let e=0;e<d;++e){const r=d>1?n*(u-1)+e*_:.5*(n+l)*(u-1);if(r<0||r>u-1){for(let t=0;t<c;t++){const n=t+e*b[2]+a*b[1]+h*b[0];p.values[n]=o}continue}const i=Math.round(r),s=Math.round(t);for(let t=0;t<c;t++){const n=t+i*y[2]+s*y[1]+x*y[0],r=t+e*b[2]+a*b[1]+h*b[0];p.values[r]=v[n]}}}}return p.toTensor()}sparseToDense(t,e,n,r){const{sliceRank:i,numUpdates:o,sliceSize:a,strides:s,outputSize:u}=h["Bd"].calculateShapes(e,t,n),c=!1;return this.scatter(t,e,n,u,a,o,i,s,r,c)}gatherND(t,e){const n=e.shape,r=n[n.length-1],[i,o,a,s]=h["Bd"].prepareAndValidate(t,e);if(0===o)return h["Gh"]([],i,t.dtype);const u=new h["ad"]([o,a],t.dtype),c=this.readSync(e.dataId),l=this.readSync(t.dataId);for(let h=0;h<o;h++){const e=[];let n=0;for(let t=0;t<r;t++){const i=c[h*r+t];n+=i*s[t],e.push(i)}if(n<0||n>=t.size/a)throw new Error(`Invalid indices: ${e} does not index into ${t.shape}`);for(let t=0;t<a;t++)u.values[h*a+t]=l[n*a+t]}return u.toTensor().reshape(i)}scatterND(t,e,n){const{sliceRank:r,numUpdates:i,sliceSize:o,strides:a,outputSize:s}=h["Bd"].calculateShapes(e,t,n),u=h["Sg"](0),c=!0;return this.scatter(t,e,n,s,o,i,r,a,u,c)}fill(t,e,n){n=n||h["bi"].inferDtype(e);const r=h["bi"].getArrayFromDType(n,h["bi"].sizeFromShape(t));return r.fill(e),Object(h["ye"])().makeTensor(r,t,n,this)}onesLike(t){if("string"===t.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)}zerosLike(t){const e=h["bi"].getArrayFromDType(t.dtype,h["bi"].sizeFromShape(t.shape));return this.makeOutput(e,t.shape,t.dtype)}linspace(t,e,n){return h["Bd"].linspaceImpl(t,e,n)}scatter(t,e,n,r,i,o,a,s,u,c){const l=[r/i,i],f=this.readSync(t.dataId),d=this.readSync(e.dataId);if(0===r)return h["Gh"]([],n,e.dtype);const p=new h["ad"](l,e.dtype);p.values.fill(this.readSync(u.dataId)[0]);for(let h=0;h<o;h++){const t=[];let o=0;for(let e=0;e<a;e++){const n=f[h*a+e];t.push(n),o+=n*s[e]}if(o<0||o>=r/i)throw new Error(`Invalid indices: ${t} does not index into ${n}`);for(let n=0;n<i;n++)c?p.values[o*i+n]+=d[h*i+n]:p.values[o*i+n]=0===e.rank?d[0]:d[h*i+n]}return p.toTensor().reshape(n)}}
/** @license See the LICENSE file. */const $c="2.3.0";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object(h["Dg"])("cpu",()=>new Pc,1);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Lc={kernelName:h["U"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:o,pad:a,dilations:s}=n,u=e,c=h["bi"].toNestedArray(r.shape,u.data.get(r.dataId).values),l=h["bi"].toNestedArray(i.shape,u.data.get(i.dataId).values),{batchSize:f,inHeight:d,inWidth:p,inChannels:g,outHeight:m,outWidth:v,padInfo:y,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:_,dilationHeight:O,dilationWidth:S,outShape:C}=h["Bd"].computeDilation2DInfo(r.shape,i.shape,o,a,"NHWC",s),k=h["bi"].makeZerosNestedTypedArray(C,r.dtype);for(let h=0;h<f;++h)for(let t=0;t<m;++t){const e=t*b-y.top;for(let n=0;n<v;++n){const r=n*x-y.left;for(let i=0;i<g;++i){let o=Number.MIN_SAFE_INTEGER;for(let t=0;t<w;++t){const n=e+t*O;if(n>=0&&n<d)for(let e=0;e<_;++e){const a=r+e*S;if(a>=0&&a<p){const r=c[h][n][a][i]+l[t][e][i];r>o&&(o=r)}}}k[h][t][n][i]=o}}}const A=u.write(h["bi"].toTypedArray(k,r.dtype),C,r.dtype);return{dataId:A,shape:C,dtype:r.dtype}}},zc={kernelName:h["V"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:o}=t,{strides:a,pad:s,dilations:u}=n,c=e,l=h["bi"].toNestedArray(r.shape,c.data.get(r.dataId).values),f=h["bi"].toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:d,inHeight:p,inWidth:g,inChannels:m,outHeight:v,outWidth:y,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:_,filterWidth:O,dilationHeight:S,dilationWidth:C,outShape:k}=h["Bd"].computeDilation2DInfo(r.shape,i.shape,a,s,"NHWC",u);h["bi"].assert(o.rank===k.length,()=>`Error in ${h["V"]}, dy must have the same rank as output ${k.length}, but got `+o.rank);const A=h["bi"].toNestedArray(k,c.data.get(o.dataId).values),T=h["bi"].makeZerosNestedTypedArray(i.shape,i.dtype);for(let h=0;h<d;++h)for(let t=0;t<v;++t){const e=t*x-b.top;for(let n=0;n<y;++n){const r=n*w-b.left;for(let i=0;i<m;++i){let o=Number.MIN_SAFE_INTEGER,a=0,s=0;for(let t=0;t<_;++t){const n=e+t*S;if(n>=0&&n<p)for(let e=0;e<O;++e){const u=r+e*C;if(u>=0&&u<g){const r=l[h][n][u][i]+f[t][e][i];r>o&&(o=r,a=t,s=e)}}}T[a][s][i]+=A[h][t][n][i]}}}const E=c.write(h["bi"].toTypedArray(T,r.dtype),i.shape,i.dtype);return{dataId:E,shape:i.shape,dtype:i.dtype}}},Bc={kernelName:h["W"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:o}=t,{strides:a,pad:s,dilations:u}=n,c=e,l=h["bi"].toNestedArray(r.shape,c.data.get(r.dataId).values),f=h["bi"].toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:d,inHeight:p,inWidth:g,inChannels:m,outHeight:v,outWidth:y,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:_,filterWidth:O,dilationHeight:S,dilationWidth:C,outShape:k}=h["Bd"].computeDilation2DInfo(r.shape,i.shape,a,s,"NHWC",u);h["bi"].assert(o.rank===k.length,()=>`Error in ${h["W"]}, dy must have the same rank as output ${k.length}, but got `+o.rank);const A=h["bi"].toNestedArray(k,c.data.get(o.dataId).values),T=h["bi"].makeZerosNestedTypedArray(r.shape,r.dtype);for(let h=0;h<d;++h)for(let t=0;t<v;++t){const e=t*x-b.top;for(let n=0;n<y;++n){const r=n*w-b.left;for(let i=0;i<m;++i){let o=Number.MIN_SAFE_INTEGER,a=e<0?0:e,s=r<0?0:r;for(let t=0;t<_;++t){const n=e+t*S;if(n>=0&&n<p)for(let e=0;e<O;++e){const u=r+e*C;if(u>=0&&u<g){const r=l[h][n][u][i]+f[t][e][i];r>o&&(o=r,a=n,s=u)}}}T[h][a][s][i]+=A[h][t][n][i]}}}const E=c.write(h["bi"].toTypedArray(T,r.dtype),r.shape,r.dtype);return{dataId:E,shape:r.shape,dtype:r.dtype}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Uc(t,e){return{kernelName:t,backendName:"cpu",kernelFunc:({inputs:n,backend:r})=>{const{a:i,b:o}=n,a=r;Tc([i,o],t);const s=a.data.get(i.dataId).values,u=a.data.get(o.dataId).values,[c,l]=e(i.shape,o.shape,s,u,i.dtype),h=a.write(c,l,i.dtype);return{dataId:h,shape:l,dtype:i.dtype}}}}function Wc(t){return(e,n,r,i,o)=>{const a=h["Bd"].assertAndGetBroadcastShape(e,n),s=a.length,u=h["bi"].computeStrides(a),c=h["bi"].sizeFromShape(a),l=h["bi"].getTypedArrayFromDType(o,c),f=e.length,d=n.length,p=h["bi"].computeStrides(e),g=h["bi"].computeStrides(n),m=h["Bd"].getBroadcastDims(e,a),v=h["Bd"].getBroadcastDims(n,a);if(m.length+v.length===0)for(let h=0;h<l.length;++h)l[h]=t(r[h%r.length],i[h%i.length]);else for(let y=0;y<l.length;++y){const e=h["bi"].indexToLoc(y,s,u),n=e.slice(-f);m.forEach(t=>n[t]=0);const o=h["bi"].locToIndex(n,f,p),a=e.slice(-d);v.forEach(t=>a[t]=0);const c=h["bi"].locToIndex(a,d,g);l[y]=t(r[o],i[c])}return[l,a]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vc=Wc((t,e)=>t/e),Hc=Uc(h["X"],Vc),qc={kernelName:h["ib"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,o=h["bi"].getTypedArrayFromDType(r.dtype,h["bi"].sizeFromShape(r.shape)),[a,s,u,c]=r.shape,l=i.data.get(r.dataId).values;for(let h=0;h<a;h++){const t=h*u*s*c;for(let e=0;e<s;e++){const n=e*(u*c);for(let r=0;r<u;r++){const i=r*c;for(let s=0;s<c;s++){const h=[a,e,r,s],f=h[2],d=Math.round(u-f),p=t+n+i+s;let g=l[p];if(d>=0&&d<u){const e=d*c,r=t+n+e+s;g=l[r]}o[p]=g}}}}const f=i.write(o,r.shape,r.dtype);return{dataId:f,shape:r.shape,dtype:r.dtype}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Gc(t,e,n,r){const i=h["bi"].getTypedArrayFromDType(r,h["bi"].sizeFromShape(n));for(let o=0;o<i.length;++o){const n=o*e;let r=t[n];for(let i=0;i<e;++i){const e=t[n+i];e>r&&(r=e)}i[o]=r}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xc(t,e,n,r,i){const o=e.length,a=h["bi"].sizeFromShape(e),s=h["bi"].computeStrides(e),u=h["bi"].computeStrides(i),c=h["bi"].getTypedArrayFromDType(n,h["bi"].sizeFromShape(i));for(let l=0;l<a;++l){const e=h["bi"].indexToLoc(l,o,s),n=new Array(e.length);for(let t=0;t<n.length;t++)n[t]=e[r[t]];const i=h["bi"].locToIndex(n,o,u);c[i]=t[l]}return c}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yc={kernelName:h["Lb"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{reductionIndices:i,keepDims:o}=e,a=n;let s=r.shape;const u=s.length,c=h["bi"].parseAxisParam(i,s);let l=c;const f=h["Bd"].getAxesPermutation(l,u);let d=a.data.get(r.dataId).values;if(null!=f){const t=new Array(u);for(let e=0;e<t.length;e++)t[e]=s[f[e]];d=Xc(d,s,r.dtype,f,t),l=h["Bd"].getInnerMostAxes(l.length,u),s=t}Tc(r,"max"),h["Bd"].assertAxesAreInnerMostDims("max",l,u);const[p,g]=h["Bd"].computeOutAndReduceShapes(s,l),m=h["bi"].sizeFromShape(g),v=Gc(d,m,p,r.dtype),y=a.write(v,p,r.dtype);let b=p;if(o){const t=h["Bd"].expandShapeToKeepDim(p,c);b=t}return{dataId:y,shape:b,dtype:r.dtype}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kc(t,e,n,r,i){const o=h["bi"].computeStrides(e),a=Ec(t,e,n,o,i,"max"),s=jc(t,e,n,i,!0,r);return[a.values,s.values]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zc={kernelName:h["Qb"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:o,pad:a,includeBatchInIndex:s}=e,u=n;Tc(r,"MaxPoolWithArgmax");const c=u.data.get(r.dataId).values,l=h["Bd"].computePool2DInfo(r.shape,i,o,[1,1],a),[f,d]=Kc(c,r.shape,r.dtype,s,l),p=u.write(f,l.outShape,r.dtype),g=u.write(d,l.outShape,r.dtype);return[{dataId:p,shape:l.outShape,dtype:r.dtype},{dataId:g,shape:l.outShape,dtype:"int32"}]}},Jc=h["lf"].nonMaxSuppressionV4Impl,Qc={kernelName:h["ac"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{boxes:r,scores:i}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:s,padToMaxOutputSize:u}=n,c=e;Tc(r,"NonMaxSuppressionPadded");const l=c.data.get(r.dataId).values,h=c.data.get(i.dataId).values,{selectedIndices:f,validOutputs:d}=Jc(l,h,o,a,s,u);return[f,d]}},tl=h["lf"].nonMaxSuppressionV5Impl,el={kernelName:h["bc"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{boxes:r,scores:i}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:s,softNmsSigma:u}=n,c=e;Tc(r,"NonMaxSuppressionWithScore");const l=c.data.get(r.dataId).values,h=c.data.get(i.dataId).values,f=o,d=a,p=s,g=u,{selectedIndices:m,selectedScores:v}=tl(l,h,f,d,p,g);return[m,v]}},nl={kernelName:h["zc"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:o,center:a}=e,s=n,u=h["bi"].getTypedArrayFromDType(r.dtype,h["bi"].sizeFromShape(r.shape)),[c,l,f,d]=r.shape,[p,g]=h["Bd"].getImageCenter(a,l,f),m=255,v=Math.sin(i),y=Math.cos(i),b=s.data.get(r.dataId).values;for(let h=0;h<c;h++){const t=h*f*l*d;for(let e=0;e<l;e++){const n=e*(f*d);for(let r=0;r<f;r++){const i=r*d;for(let a=0;a<d;a++){const s=[c,e,r,a],h=s[2],x=s[1];let w=(h-p)*y-(x-g)*v,_=(h-p)*v+(x-g)*y;w=Math.round(w+p),_=Math.round(_+g);let O=o;if("number"!==typeof o&&(O=3===a?m:o[a]),w>=0&&w<f&&_>=0&&_<l){const e=_*(f*d),n=w*d,r=t+e+n+a;O=b[r]}const S=t+n+i+a;u[S]=O}}}}const x=s.write(u,r.shape,r.dtype);return{dataId:x,shape:r.shape,dtype:r.dtype}}},rl={kernelName:h["Rc"],backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Tc(n,"square");const i=r.data.get(n.dataId).values,o=new Float32Array(i.length);for(let s=0;s<i.length;++s){const t=i[s];o[s]=t*t}const a=r.write(o,n.shape,n.dtype);return{dataId:a,shape:n.shape,dtype:n.dtype}}},il=Wc((t,e)=>{const n=t-e;return n*n}),ol=Uc(h["Sc"],il),al={kernelName:h["dd"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{perm:i}=e,o=n;Tc(r,"transpose");const a=r.shape.length,s=new Array(a);for(let h=0;h<s.length;h++)s[h]=r.shape[i[h]];const u=o.data.get(r.dataId).values,c=Xc(u,r.shape,r.dtype,i,s),l=o.write(c,s,r.dtype);return{dataId:l,shape:s,dtype:r.dtype}}},sl=[Lc,Bc,zc,Hc,qc,Zc,Yc,Qc,el,nl,rl,ol,al];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */for(const sv of sl)Object(h["Fg"])(sv);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ul={},cl={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function ll(t,e){ul[t]=e}function hl(t){t in ul||(ul[t]=dl(t));const e=ul[t];return e.isContextLost()?(delete ul[t],hl(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),ul[t])}function fl(t){if("undefined"!==typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function dl(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=fl(t);return e.addEventListener("webglcontextlost",e=>{e.preventDefault(),delete ul[t]},!1),1===t?e.getContext("webgl",cl)||e.getContext("experimental-webgl",cl):e.getContext("webgl2",cl)}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var pl,gl,ml;function vl(t,e){return[e,t]}function yl(t,e){return t*e}function bl(t){const e=h["bi"].sizeFromShape(t),n=Math.ceil(e/4);return h["bi"].sizeToSquarishShape(n)}function xl(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function wl(t,e){const[n,r]=xl(t,e);return n*r*4}function _l(t,e){const n=t;let r,i,o,a,s,u,c,l,f,d;return 2===Object(h["ze"])().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,o=n.RGBA16F,a=n.RGBA32F,s=n.RED,c=4,l=1,f=n.HALF_FLOAT,d=n.FLOAT):(r=t.RGBA,i=t.RGBA,o=t.RGBA,a=n.RGBA,s=t.RGBA,c=4,l=4,f=null!=e?e.HALF_FLOAT_OES:null,d=t.FLOAT),u=t.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:s,downloadTextureFormat:u,downloadUnpackNumChannels:c,defaultNumChannels:l,textureTypeHalfFloat:f,textureTypeFloat:d}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ol(t,e){const n=e();return Object(h["ze"])().getBool("DEBUG")&&Sl(t),n}function Sl(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Tl(t,e))}(function(t){t[t["DENSE"]=0]="DENSE",t[t["SHARED_BATCH"]=1]="SHARED_BATCH"})(pl||(pl={})),function(t){t[t["RENDER"]=0]="RENDER",t[t["UPLOAD"]=1]="UPLOAD",t[t["PIXELS"]=2]="PIXELS",t[t["DOWNLOAD"]=3]="DOWNLOAD"}(gl||(gl={})),function(t){t[t["UNPACKED_FLOAT16"]=0]="UNPACKED_FLOAT16",t[t["UNPACKED_FLOAT32"]=1]="UNPACKED_FLOAT32",t[t["PACKED_4X1_UNSIGNED_BYTE"]=2]="PACKED_4X1_UNSIGNED_BYTE",t[t["PACKED_2X2_FLOAT32"]=3]="PACKED_2X2_FLOAT32",t[t["PACKED_2X2_FLOAT16"]=4]="PACKED_2X2_FLOAT16"}(ml||(ml={}));const Cl=5.96e-8,kl=65504;function Al(t){return!!(Object(h["ze"])().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||Cl<Math.abs(t)&&Math.abs(t)<kl)}function Tl(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function El(t,e){return Zl(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function jl(t,e){const n=Zl(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ol(t,()=>t.shaderSource(n,e)),Ol(t,()=>t.compileShader(n)),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Dl(t,e){const n=Zl(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ol(t,()=>t.shaderSource(n,e)),Ol(t,()=>t.compileShader(n)),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw Nl(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Ml=/ERROR: [0-9]+:([0-9]+):/g;function Nl(t,e){const n=Ml.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);const r=+n[1],i=t.split("\n"),o=i.length.toString().length+2,a=i.map((t,e)=>h["bi"].rightPad((e+1).toString(),o)+t);let s=0;for(let h=0;h<a.length;h++)s=Math.max(a[h].length,s);const u=a.slice(0,r-1),c=a.slice(r-1,r),l=a.slice(r);console.log(u.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+h["bi"].rightPad(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}function Il(t){return Zl(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Rl(t,e){if(Ol(t,()=>t.linkProgram(e)),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Fl(t,e){if(Ol(t,()=>t.validateProgram(e)),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Pl(t,e){const n=Zl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ol(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Ol(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function $l(t,e){const n=Zl(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ol(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Ol(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Ll(t){return Zl(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function zl(t,e){const n=Object(h["ze"])().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const n=`[${t}x${e}]`;throw new Error("Requested texture size "+n+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function Bl(t){return Zl(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Ul(t,e,n,r,i,o,a){const s=t.getAttribLocation(e,n);return-1!==s&&(Ol(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Ol(t,()=>t.vertexAttribPointer(s,i,t.FLOAT,!1,o,a)),Ol(t,()=>t.enableVertexAttribArray(s)),!0)}function Wl(t,e,n){Jl(t,n),Ol(t,()=>t.activeTexture(t.TEXTURE0+n)),Ol(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function Vl(t,e,n){return Zl(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function Hl(t,e,n){return t.getUniformLocation(e,n)}function ql(t,e,n,r){Ol(t,()=>Wl(t,e,r)),Ol(t,()=>t.uniform1i(n,r))}function Gl(t,e,n){Ol(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Ol(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function Xl(t,e){Ol(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Ol(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Yl(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Kl(t,e))}function Kl(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Zl(t,e,n){const r=Ol(t,()=>e());if(null==r)throw new Error(n);return r}function Jl(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const t=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${t}.`)}}function Ql(t,e=2){return h["bi"].sizeFromShape(t.slice(0,t.length-e))}function th(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function eh(t){let e=[1,1,1];const n=0===t.length||1===t.length&&1===t[0];return n||(e=[Ql(t),...th(t)]),e}function nh(t,e=!1){let n=Object(h["ze"])().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(n*=2,t=t.map((e,n)=>n>=t.length-2?h["bi"].nearestLargerEven(t[n]):t[n]),1===t.length&&(t=[2,t[0]])),2!==t.length){const e=h["bi"].squeezeShape(t);t=e.newShape}let r=h["bi"].sizeFromShape(t);if(t.length<=1&&r<=n)return[1,r];if(2===t.length&&t[0]<=n&&t[1]<=n)return t;if(3===t.length&&t[0]*t[1]<=n&&t[2]<=n)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=n&&t[1]*t[2]<=n)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n)return[t[0],t[1]*t[2]*t[3]];if(e){const e=Ql(t);let n=2,i=2;return t.length&&([n,i]=th(t)),r=e*(n/2)*(i/2),h["bi"].sizeToSquarishShape(r).map(t=>2*t)}return h["bi"].sizeToSquarishShape(r)}function rh(t){return t%2===0}function ih(t,e){if(t=t.slice(-2),e=e.slice(-2),h["bi"].arraysEqual(t,e))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(rh(n)&&rh(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&rh(t[0])&&rh(e[0])}let oh,ah;function sh(t){if(null==oh){const e=hl(t);oh=e.getParameter(e.MAX_TEXTURE_SIZE)}return oh}function uh(t){if(null==ah){const e=hl(t);ah=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ah)}function ch(t){if(0===t)return 0;let e;const n=hl(t);return e=lh(n,"EXT_disjoint_timer_query_webgl2")&&2===t?2:lh(n,"EXT_disjoint_timer_query")?1:0,e}function lh(t,e){const n=t.getExtension(e);return null!=n}function hh(t){try{const e=hl(t);if(null!=e)return!0}catch(e){return!1}return!1}function fh(t){if(0===t)return!1;const e=hl(t);if(1===t){if(!lh(e,"OES_texture_float"))return!1}else if(!lh(e,"EXT_color_buffer_float"))return!1;const n=ph(e);return n}function dh(t){if(0===t)return!1;const e=hl(t);if(1!==t){if(lh(e,"EXT_color_buffer_float"))return ph(e);const t="EXT_color_buffer_half_float";if(lh(e,t)){const n=e.getExtension(t);return gh(e,n)}return!1}if(!lh(e,"OES_texture_float"))return!1;if(!lh(e,"WEBGL_color_buffer_float"))return!1;const n=ph(e);return n}function ph(t){const e=_l(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,i=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,i,0,e.textureFormatFloat,e.textureTypeFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(o),a}function gh(t,e){const n=_l(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=1,o=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,i,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),s}function mh(t){if(2!==t)return!1;const e=hl(t),n=null!=e.fenceSync;return n}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vh=Object(h["ze"])();vh.registerFlag("HAS_WEBGL",()=>vh.getNumber("WEBGL_VERSION")>0),vh.registerFlag("WEBGL_VERSION",()=>hh(2)?2:hh(1)?1:0),vh.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),vh.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===vh.get("WEBGL_VERSION")),vh.registerFlag("WEBGL_CPU_FORWARD",()=>!0),vh.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),vh.registerFlag("WEBGL_PACK",()=>vh.getBool("HAS_WEBGL")),vh.registerFlag("WEBGL_PACK_NORMALIZATION",()=>vh.getBool("WEBGL_PACK")),vh.registerFlag("WEBGL_PACK_CLIP",()=>vh.getBool("WEBGL_PACK")),vh.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1),vh.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>vh.getBool("WEBGL_PACK")),vh.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>vh.getBool("WEBGL_PACK")),vh.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>vh.getBool("WEBGL_PACK")),vh.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>vh.getBool("WEBGL_PACK")),vh.registerFlag("WEBGL_PACK_REDUCE",()=>vh.getBool("WEBGL_PACK")),vh.registerFlag("WEBGL_LAZILY_UNPACK",()=>vh.getBool("WEBGL_PACK")),vh.registerFlag("WEBGL_CONV_IM2COL",()=>vh.getBool("WEBGL_PACK")),vh.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>sh(vh.getNumber("WEBGL_VERSION"))),vh.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>uh(vh.getNumber("WEBGL_VERSION"))),vh.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=vh.getNumber("WEBGL_VERSION");return 0===t?0:ch(t)}),vh.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>vh.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!h["je"].isMobile()),vh.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>fh(vh.getNumber("WEBGL_VERSION"))),vh.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!vh.getBool("WEBGL_FORCE_F16_TEXTURES")&&vh.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),vh.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>dh(vh.getNumber("WEBGL_VERSION"))),vh.registerFlag("WEBGL_FENCE_API_ENABLED",()=>mh(vh.getNumber("WEBGL_VERSION"))),vh.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>{const t=vh.getBool("WEBGL_RENDER_FLOAT32_ENABLED");return t?4:0}),vh.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&-1!==t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class yh{constructor(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((t,e)=>"T"+e);const n=[];this.variableNames.forEach(t=>{n.push(`float v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>"v"+t).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bh{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((t,e)=>"T"+e);const n=[];this.variableNames.forEach(t=>{n.push(`vec4 v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>"v"+t).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xh{constructor(t,e,n){this.variableNames=["A"];const r=t.windowSize,i=t.batchSize,o=t.inSize,a=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];const s="max"===e?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${u};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${s} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wh(t,e){return["x","y","z","w","u","v"].slice(0,e).map(e=>`${t}.${e}`)}function _h(t,e){return 1===e?[t]:wh(t,e)}function Oh(t,e){if(1===t)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sh(){let t,e,n,r,i,o,a,s,u,c;return 2===Object(h["ze"])().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ch(t,e,n="index"){const r=h["bi"].computeStrides(e);return r.map((e,i)=>{const o=`int ${t[i]} = ${n} / ${e}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${e}`:`index -= ${t[i]} * ${e}`;return`${o}; ${a};`}).join("")}function kh(t){const e=h["bi"].computeStrides(t).map(t=>t.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;\n  }\n`}const Ah="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:Th}=h["Bd"];
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eh(t,e,n,r){const i=[];t.forEach(t=>{const e=h["bi"].sizeFromShape(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?i.push(`uniform float ${t.name}${e>1?`[${e}]`:""};`):(i.push(`uniform sampler2D ${t.name};`),i.push(`uniform int offset${t.name};`))});const o=i.join("\n"),a=t.map(t=>Mh(t,e,r)).join("\n"),s=e.texShape,u=Sh(),c=Rh(u);let l,f,d=$h(u);e.isPacked?(l=Nh(e.logicalShape,s),f=Ph(u)):(l=Ih(e.logicalShape,s),f=Fh(u)),r&&(d+=Uh);const p=[d,c,f,o,l,a,n].join("\n");return p}function jh(t){const e=t.shapeInfo.logicalShape;switch(e.length){case 0:return nf(t);case 1:return of(t);case 2:return sf(t);case 3:return cf(t);case 4:return hf(t);case 5:return ff(t);case 6:return df(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function Dh(t){const e=t.shapeInfo.logicalShape;switch(e.length){case 0:return ef(t);case 1:return rf(t);case 2:return af(t);case 3:return uf(t);default:return lf(t)}}function Mh(t,e,n=!1){let r="";r+=n?Dh(t):jh(t);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(r+=n?gf(t,e):mf(t,e)),r}function Nh(t,e){switch(t.length){case 0:return Wh();case 1:return Vh(t,e);case 2:return Jh(t,e);case 3:return qh(t,e);default:return Xh(t,e)}}function Ih(t,e){switch(t.length){case 0:return Wh();case 1:return Hh(t,e);case 2:return Qh(t,e);case 3:return Gh(t,e);case 4:return Yh(t,e);case 5:return Kh(t,e);case 6:return Zh(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}}function Rh(t){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${t.texture2D}(textureSampler, uv).r;\n    }\n  `}function Fh(t){return`\n    void setOutput(float val) {\n      ${t.output} = vec4(val, 0, 0, 0);\n    }\n  `}function Ph(t){return`\n    void setOutput(vec4 val) {\n      ${t.output} = val;\n    }\n  `}function $h(t){const e=`${t.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${t.varyingFs} vec2 resultUV;\n    ${t.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${t.defineSpecialNaN}\n    ${t.defineSpecialInf}\n    ${t.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${Lh}\n    ${zh}\n    ${Bh}\n  `;return e}const Lh="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",zh="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Bh="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Uh="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Wh(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function Vh(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);\n    }\n  `}function Hh(t,e){return 1===e[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${e[1]}.0);\n      }\n    `:1===e[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${e[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      return resTexRC.x * ${e[1]} + resTexRC.y;\n    }\n  `}function qh(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),i=r*Math.ceil(t[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}function Gh(t,e){const n=Ch(["r","c","d"],t);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}function Xh(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),i=r*Math.ceil(t[t.length-2]/2);let o=i,a="",s="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],a=`\n      int b${u} = index / ${o};\n      index -= b${u} * ${o};\n    `+a,s=`b${u}, `+s;return`\n    ivec${t.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${a}\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${t.length}(${s});\n    }\n  `}function Yh(t,e){const n=Ch(["r","c","d","d2"],t);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${n}\n      return ivec4(r, c, d, d2);\n    }\n  `}function Kh(t,e){const n=Ch(["r","c","d","d2","d3"],t);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},\n                             ${e[1]}));\n\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}function Zh(t,e){const n=Ch(["r","c","d","d2","d3","d4"],t);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}function Jh(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(h["bi"].arraysEqual(t,e))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `;const r=Math.ceil(t[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}function Qh(t,e){return h["bi"].arraysEqual(t,e)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));\n      }\n    `:1===t[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===t[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      int r = index / ${t[1]};\n      int c = index - r * ${t[1]};\n      return ivec2(r, c);\n    }\n  `}function tf(t){return"offset"+t}function ef(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Sh();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${e}, halfCR);\n    }\n  `}function nf(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${n}() {return ${e};}`;const[r,i]=t.shapeInfo.texShape;if(1===r&&1===i)return`\n      float ${n}() {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const[o,a]=t.shapeInfo.texShape,s=tf(e);return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${o}, ${a}, ${s});\n      return sampleTexture(${e}, uv);\n    }\n  `}function rf(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=Sh();return`\n    vec4 ${n}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${o.texture2D}(${e}, uv);\n    }\n  `}function of(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`\n      float ${n}(int index) {\n        ${pf(t)}\n      }\n    `;const r=t.shapeInfo.texShape,i=r[0],o=r[1];if(1===o&&1===i)return`\n      float ${n}(int index) {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const a=tf(e);return 1===o?`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `:1===i?`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});\n      return sampleTexture(${e}, uv);\n    }\n  `}function af(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],s=Sh();if(null!=i&&h["bi"].arraysEqual(e,i))return`\n      vec4 ${r}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);\n\n        return ${s.texture2D}(${n}, uv);\n      }\n    `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(e[1]/2);return`\n    vec4 ${r}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);\n      return ${s.texture2D}(${n}, uv);\n    }\n  `}function sf(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape;if(null!=i&&h["bi"].arraysEqual(e,i)){const t=i[0],e=i[1];return`\n    float ${r}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${e}.0, ${t}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `}const{newShape:o,keptDims:a}=h["bi"].squeezeShape(e),s=o;if(s.length<e.length){const e=yf(t,s),n=["row","col"];return`\n      ${jh(e)}\n      float ${r}(int row, int col) {\n        return ${r}(${bf(n,a)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));\n        ${pf(t)}\n      }\n    `;const u=i[0],c=i[1],l=tf(n);return 1===c?`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${l}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `:1===u?`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${l}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n  float ${r}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${e[1]} + col + ${l};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${n}, uv);\n  }\n`}function uf(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===e[0]){const n=e.slice(1),i=[1,2],o=yf(t,n),a=["b","row","col"];return`\n        ${Dh(o)}\n        vec4 ${r}(int b, int row, int col) {\n          return ${r}(${bf(a,i)});\n        }\n      `}const a=o[0],s=o[1],u=Math.ceil(e[2]/2),c=u*Math.ceil(e[1]/2),l=Sh();return`\n    vec4 ${r}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${a}, ${s}, ${c}, ${u}, b, row, col);\n      return ${l.texture2D}(${n}, uv);\n    }\n  `}function cf(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[1]*e[2],o=e[2],{newShape:a,keptDims:s}=h["bi"].squeezeShape(e),u=a;if(u.length<e.length){const e=yf(t,u),n=["row","col","depth"];return`\n        ${jh(e)}\n        float ${r}(int row, int col, int depth) {\n          return ${r}(${bf(n,s)});\n        }\n      `}if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${i}, ${o}, 1)));\n        ${pf(t)}\n      }\n    `;const c=t.shapeInfo.texShape,l=c[0],f=c[1],d=t.shapeInfo.flatOffset;if(f===i&&null==d)return`\n        float ${r}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${o}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${f}.0, ${l}.0);\n          return sampleTexture(${n}, uv);\n        }\n      `;if(f===o&&null==d)return`\n    float ${r}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${l}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `;const p=tf(n);return`\n      float ${r}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${i} + col * ${o} + depth + ${p};\n        vec2 uv = uvFromFlat(${l}, ${f}, index);\n        return sampleTexture(${n}, uv);\n      }\n  `}function lf(t){const e=t.shapeInfo.logicalShape,n=e.length,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],s=a[0],u=a[1],c=Math.ceil(e[n-1]/2);let l=c*Math.ceil(e[n-2]/2),h="int b, int row, int col",f=`b * ${l} + (row / 2) * ${c} + (col / 2)`;for(let p=2;p<n-1;p++)h=`int b${p}, `+h,l*=e[n-p-1],f=`b${p} * ${l} + `+f;const d=Sh();return`\n    vec4 ${i}(${h}) {\n      int index = ${f};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${s});\n      return ${d.texture2D}(${r}, uv);\n    }\n  `}function hf(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[3],o=e[2]*i,a=e[1]*o,{newShape:s,keptDims:u}=h["bi"].squeezeShape(e);if(s.length<e.length){const e=yf(t,s),n=["row","col","depth","depth2"];return`\n      ${jh(e)}\n      float ${r}(int row, int col, int depth, int depth2) {\n        return ${r}(${bf(n,u)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${a}, ${o}, ${i}, 1)));\n        ${pf(t)}\n      }\n    `;const c=t.shapeInfo.flatOffset,l=t.shapeInfo.texShape,f=l[0],d=l[1];if(d===a&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${o}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${d}.0, ${f}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(d===i&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${e[1]*e[2]}, ${e[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${d}.0, ${f}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const p=tf(n);return`\n    float ${r}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${o} +\n          depth * ${i} + depth2;\n      vec2 uv = uvFromFlat(${f}, ${d}, index + ${p});\n      return sampleTexture(${n}, uv);\n    }\n  `}function ff(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],o=e[3]*i,a=e[2]*o,s=e[1]*a,{newShape:u,keptDims:c}=h["bi"].squeezeShape(e);if(u.length<e.length){const e=yf(t,u),n=["row","col","depth","depth2","depth3"];return`\n      ${jh(e)}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${bf(n,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${a}, ${o}, ${i})) +\n          depth3;\n        ${pf(t)}\n      }\n    `;const l=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],p=f[1];if(p===s&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${a}, ${o}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(p===i&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${e[1]*e[2]*e[3]},\n               ${e[2]*e[3]}, ${e[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const g=tf(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} + depth * ${o} +\n          depth2 * ${i} + depth3 + ${g};\n      vec2 uv = uvFromFlat(${d}, ${p}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}function df(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:o}=h["bi"].squeezeShape(e);if(i.length<e.length){const e=yf(t,i),n=["row","col","depth","depth2","depth3","depth4"];return`\n      ${jh(e)}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${bf(n,o)});\n      }\n    `}const a=e[5],s=e[4]*a,u=e[3]*s,c=e[2]*u,l=e[1]*c;if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${l}, ${c}, ${u}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${a}, 1)));\n        ${pf(t)}\n      }\n    `;const f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],g=d[1];if(g===l&&null==f)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${c}, ${u}, ${s}, ${a})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${g}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(g===a&&null==f)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${e[1]*e[2]*e[3]*e[4]},\n               ${e[2]*e[3]*e[4]},\n               ${e[3]*e[4]},\n               ${e[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${g}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=tf(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${c} + depth * ${u} +\n          depth2 * ${s} + depth3 * ${a} + depth4 + ${m};\n      vec2 uv = uvFromFlat(${p}, ${g}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}function pf(t){const e=t.name,n=h["bi"].sizeFromShape(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${e}[i];\n      }\n    }\n  `}function gf(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,s=Th(t.shapeInfo.logicalShape,e.logicalShape),u=vf(a),c=a-o;let l;const f=["x","y","z","w","u","v"];l=0===o?"":a<2&&s.length>=1?"coords = 0;":s.map(t=>`coords.${f[t+c]} = 0;`).join("\n");let d="";d=a<2&&o>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>"coords."+f[e+c]).join(", ");let p="return outputValue;";const g=h["bi"].sizeFromShape(t.shapeInfo.logicalShape),m=1===g,v=h["bi"].sizeFromShape(e.logicalShape),y=1===v;if(1!==o||m||y){if(m&&!y)p=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const t=o-2,e=o-1;s.indexOf(t)>-1&&s.indexOf(e)>-1?p="return vec4(outputValue.x);":s.indexOf(t)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(e)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${u} coords = getOutputCoords();\n      ${l}\n      vec4 outputValue = get${r}(${d});\n      ${p}\n    }\n  `}function mf(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=e.texShape,a=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===u&&null==t.shapeInfo.flatOffset&&h["bi"].arraysEqual(a,o))return`\n      float ${i}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const c=vf(u),l=Th(t.shapeInfo.logicalShape,e.logicalShape),f=u-s;let d;const p=["x","y","z","w","u","v"];d=0===s?"":u<2&&l.length>=1?"coords = 0;":l.map(t=>`coords.${p[t+f]} = 0;`).join("\n");let g="";return g=u<2&&s>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>"coords."+p[e+f]).join(", "),`\n    float ${i}() {\n      ${c} coords = getOutputCoords();\n      ${d}\n      return get${r}(${g});\n    }\n  `}function vf(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function yf(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function bf(t,e){return e.map(e=>t[e]).join(", ")}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xf{constructor(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,h["bi"].assert(t.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);const i=t[t.length-1],o=Math.ceil(i/e);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");const a=this.outputShape,s=a.length,u=vf(s),c=_h("coords",s);let l,f;if(1===o){f=s+1;const t=vf(f);l=`\n        ${t} sourceLocR = ${t}(${c.join()}, 0);\n        ++${c[s-1]};\n        ${t} sourceLocG = ${t}(${c.join()}, 0);\n        ++${c[s-2]};\n        ${t} sourceLocA = ${t}(${c.join()}, 0);\n        --${c[s-1]};\n        ${t} sourceLocB = ${t}(${c.join()}, 0);\n        --${c[s-2]};`}else f=s,l=`\n        ${u} sourceLocR = coords;\n        ++${c[s-1]};\n        ${u} sourceLocG = coords;\n        ++${c[s-2]};\n        ${u} sourceLocA = coords;\n        --${c[s-1]};\n        ${u} sourceLocB = coords;\n        --${c[s-2]};`;const d=["x","y","z","w","u","v"].slice(0,f),p="."+d[f-1],g=d.map(t=>"int "+t),m=_h("sourceLocR",f-1).concat("inIdx.r"),v=_h("sourceLocG",f-1).concat("inIdx.g"),y=_h("sourceLocB",f-1).concat("inIdx.b"),b=_h("sourceLocA",f-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${v.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${b.join()})));`,_=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${v.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,O=r?"":`\n      float getBestIndicesAChannel(${g.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${g.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${O}\n      void main() {\n        ${u} coords = getOutputCoords();\n        bool hasNextCol = ${c[s-1]} < ${a[s-1]-1};\n        bool hasNextRow = ${c[s-2]} < ${a[s-2]-1};\n        ${l}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${e};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${_};\n\n        for (int i = 0; i < ${e}; i++) {\n          inIdx = srcIdx;\n          ${w}\n          vec4 candidate = ${_};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wf{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=s-1-t.padInfo.top,l=u-1-t.padInfo.left,h=1/(e*n);this.userCode=`\n      const ivec2 pads = ivec2(${c}, ${l});\n      const float avgMultiplier = float(${h});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n            wR += ${o}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${u};\n            wC+= ${a}) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class _f{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=l-1-t.padInfo.front,p=h-1-t.padInfo.top,g=f-1-t.padInfo.left,m=1/(e*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${d}, ${p}, ${g});\n      const float avgMultiplier = float(${m});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${l};\n            wD += ${s}) {\n          float dyD = float(dyDCorner + wD) / ${i}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${h};\n              wR += ${u}) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${f};\n                wC += ${c}) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Of{constructor(t,e,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],h["Bd"].assertAndGetBroadcastShape(t,e),h["Bd"].assertAndGetBroadcastShape(t,n);let a="0.0";null!=r&&(h["Bd"].assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="1.0";null!=i&&(h["Bd"].assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${a};\n        float scale = ${s};\n        float inv = scale * inversesqrt(variance + float(${o}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sf{constructor(t,e,n,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],h["Bd"].assertAndGetBroadcastShape(t,e),h["Bd"].assertAndGetBroadcastShape(t,n);let a="vec4(0.0)";null!=r&&(h["Bd"].assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=i&&(h["Bd"].assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        vec4 offset = ${a};\n        vec4 scale = ${s};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${o}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cf={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class kf{constructor(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=h["Bd"].assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${t}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Af="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",Tf="return a + b;",Ef="return a - b;",jf="return a * b;",Df="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",Mf="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",Nf="\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",If="return float(a == b);",Rf="return float(a != b);",Ff="return float(a < b);",Pf="return float(a <= b);",$f="return float(a > b);",Lf="return float(a >= b);",zf="return float(a >= 1.0 && b >= 1.0);",Bf="return float(a >= 1.0 || b >= 1.0);",Uf=Af+"\n  return max(a, b);\n",Wf=Af+"\n  return min(a, b);\n",Vf="if (b == 0.0) return NAN;\n  return mod(a, b);",Hf=Af+"\n  return atan(a, b);\n",qf="return (b >= 1.0) ? a : a * (b + 1.0);",Gf="return (a < 0.) ? b * a : a;";class Xf{constructor(t,e,n){this.variableNames=["A","B"],this.outputShape=h["Bd"].assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${t}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yf="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n",Kf="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",Zf="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",Jf="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+Yf+"\n  return result;\n",Qf="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",td="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",ed="\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Yf+"\n  return result;\n",nd="\n  return vec4(equal(a, b));\n",rd="\n  return vec4(notEqual(a, b));\n",id="\n  return vec4(lessThan(a, b));\n",od="\n  return vec4(lessThanEqual(a, b));\n",ad="\n  return vec4(greaterThan(a, b));\n",sd="\n  return vec4(greaterThanEqual(a, b));\n",ud="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",cd="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",ld="\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Yf+"\n  return result;\n",hd="\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Yf+"\n  return result;\n",fd="\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+Yf+"\n  return result;\n";class dd{constructor(t,e,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=h["Bd"].assertAndGetBroadcastShape(e,n);const i=this.outputShape.length;let o="";if(r)if(0===i||1===h["bi"].sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const t=vf(i);if(o=`\n          ${t} coords = getOutputCoords();\n        `,1===i)o+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const t=_h("coords",i);o+=`\n            bool nextRowOutOfBounds =\n              (${t[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${t[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${t}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pd{constructor(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(t,e){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,e)}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gd{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(t,e){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,e)}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class md{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vd{constructor(t){this.outputShape=[],this.outputShape=h["Bd"].computeOutShape(t,1),this.variableNames=t.map((t,e)=>"T"+e);const e=new Array(t.length-1);e[0]=t[0][1];for(let o=1;o<e.length;o++)e[o]=e[o-1]+t[o][1];const n=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<e.length;o++){const t=e[o-1];n.push(`else if (yC < ${e[o]}) setOutput(getT${o}(yR, yC-${t}));`)}const r=e.length,i=e[e.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yd{constructor(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=h["Bd"].computeOutShape(t,e);const n=this.outputShape,r=n.length,i=vf(r),o=_h("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((t,e)=>"T"+e);const s=new Array(t.length-1);s[0]=t[0][e];for(let h=1;h<s.length;h++)s[h]=s[h-1]+t[h][e];const u=a[e],c=a.slice(-2),l=a.join();let f=`if (${u} < ${s[0]}) {\n        return getChannel(\n            getT0(${l}), vec2(${c.join()}));\n        }`;for(let h=1;h<s.length;h++){const t=s[h-1];f+=`\n        if (${u} < ${s[h]}  && ${u} >= ${s[h-1]}) {\n          return getChannel(\n            getT${h}(${bd(a,u,t)}),\n            vec2(${bd(c,u,t)}));\n        }`}const d=s.length,p=s[s.length-1];f+=`\n        return getChannel(\n          getT${d}(${bd(a,u,p)}),\n          vec2(${bd(c,u,p)}));`,this.userCode=`\n      float getValue(${a.map(t=>"int "+t)}) {\n        ${f}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\n\n        ${o[r-1]} = ${o[r-1]} + 1;\n        if (${o[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${o});\n        }\n\n        ${o[r-2]} = ${o[r-2]} + 1;\n        if (${o[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${o});\n        }\n\n        ${o[r-1]} = ${o[r-1]} - 1;\n        if (${o[r-2]} < ${n[r-2]} &&\n            ${o[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${o});\n        }\n        setOutput(result);\n      }\n    `}}function bd(t,e,n){const r=t.indexOf(e),i=t.map((t,e)=>e===r?`${t} - ${n}`:t);return i.join()}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xd{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${e} - ${r};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              if (${o}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class wd{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,a=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=o?1:2,c=o?2:3,l=o?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${l}];\n\n        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n\n              if (${o}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class _d{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yF = 0; yF < ${t.outDepth}; yF++) {\n            int xF = wF + yF * ${e} - ${i};\n\n            if (xF < 0 || xF >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${t.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${o};\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${t.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${a};\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Od{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,c=r-1-t.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${s}, ${u}, ${c});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${e}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${i}.0;\n\n          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${e} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sd{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${o} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${e} - ${r};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Cd{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=e-1-t.padInfo.top,a=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kd{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterHeight,h=t.filterWidth,f=4*Math.floor(t.inChannels/4),d=t.inChannels%4,p="channelsLast"===t.dataFormat,g=p?1:2,m=p?2:3,v=p?3:1;let y="",b="";n&&(y=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,b="result = activation(result);");const x=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${y}\n\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${i}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${v}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${m}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${l}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${h}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${t.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${f}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${p}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===d}) {\n\n              if (${p}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${f}) *\n                    getW(wR, wC, ${f}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${f}, xR, xC) *\n                    getW(wR, wC, ${f}, d2);\n              }\n\n            } else if (${2===d}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${f}, d2),\n                getW(wR, wC, ${f} + 1, d2)\n              );\n\n              if (${p}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${f}),\n                  getX(batch, xR, xC, ${f} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${f}, xR, xC),\n                  getX(batch, ${f} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===d}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${f}, d2),\n                getW(wR, wC, ${f} + 1, d2),\n                getW(wR, wC, ${f} + 2, d2)\n              );\n\n              if (${p}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${f}),\n                  getX(batch, xR, xC, ${f} + 1),\n                  getX(batch, xR, xC, ${f} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${f}, xR, xC),\n                  getX(batch, ${f} + 1, xR, xC),\n                  getX(batch, ${f} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${b}\n        setOutput(result);\n      }\n    `}}class Ad{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterDepth,h=t.filterHeight,f=t.filterWidth,d=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${o}, ${a});\n      const ivec3 pads = ivec3(${e}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${l}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${u};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${f}; wC++) {\n              int xC = xCCorner + wC * ${c};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${d}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===p}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${d}) *\n                  getW(wF, wR, wC, ${d}, d2);\n              } else if (${2===p}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${d}),\n                  getX(batch, xF, xR, xC, ${d} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${d}, d2),\n                  getW(wF, wR, wC, ${d} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===p}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${d}),\n                  getX(batch, xF, xR, xC, ${d} + 1),\n                  getX(batch, xF, xR, xC, ${d} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${d}, d2),\n                  getW(wF, wR, wC, ${d} + 1, d2),\n                  getW(wF, wR, wC, ${d} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Td{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,h=t.dilationWidth,f=t.filterHeight,d=t.filterWidth,p=t.outChannels/t.inChannels;let g="",m="";n&&(g=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,m="result = activation(result);");const v=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${g}\n\n      const ivec2 strides = ivec2(${u}, ${c});\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${p};\n        int q = d2 - d1 * ${p};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${f}; wR++) {\n          int xR = xRCorner + wR * ${l};\n\n          if (xR < 0 || xR >= ${i}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${h};\n\n            if (xC < 0 || xC >= ${o}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${v}\n        ${m}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ed{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;const i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,p=t.filterWidth,g=p;let m="int xR; int xC; int xCOffset;";for(let h=0;h<d;h++)for(let t=0;t<p;t++)m+=`\n          vec4 xTexelR${h}C${2*t} = vec4(0.);\n          vec4 wR${h}C${t} = vec4(0.);\n          vec4 xR${h}C${t} = vec4(0.);`;for(let x=0;x<d;x++)for(let t=0;t<g;t++){const e=2*t;if(m+=`\n          xR = xRCorner + ${x*l};\n          xC = xCCorner + ${e*f};\n        `,1===c){if(e<p&&(m+=s%2===1?`\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ${i} && xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${x}C${e} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${o}) {\n                    xTexelR${x}C${e}.zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR${x}C${e} = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ${i} && xCOffset >= 0 && xCOffset < ${o}) {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${o}) {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR${x}C${e} = vec4(previous.zw, xTexelR${x}C${e}.xy);\n                } else {\n                  xR${x}C${e} = vec4(0, 0, xTexelR${x}C${e}.xy);\n                }\n              `:`\n                if(xR >= 0 && xR < ${i} && xC >= 0 && xC < ${o}) {\n                  xTexelR${x}C${e} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${x}C${e} = vec4(0.);\n                }\n\n                xR${x}C${e} = xTexelR${x}C${e};\n              `,e+1<p)){const t=s%2===0?h["bi"].nearestLargerEven(f):f;f%2===0&&s%2===1||f%2!==0&&s%2!==1?(m+=`\n                  xCOffset = xC + ${s%2} + ${t};\n\n                  if(xR >= 0 && xR < ${i} &&\n                    xCOffset >= 0 && xCOffset < ${o}) {\n                    xTexelR${x}C${e+2} = getX(batch, xR, xCOffset, d1);\n                  }\n                `,f>1&&(m+=`\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ${i} &&\n                      xCOffset >= 0 && xCOffset < ${o}) {\n                      xTexelR${x}C${e} = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR${x}C${e} = vec4(0.);\n                    }\n                  `),m+=`\n                  xR${x}C${e+1} = vec4(\n                    xTexelR${x}C${e}.zw, xTexelR${x}C${e+2}.xy);\n                `):m+=`\n                  xCOffset = xC + ${t};\n\n                  if(xR >= 0 && xR < ${i} &&\n                    xCOffset >= 0 && xCOffset < ${o}) {\n                    xTexelR${x}C${e+2} = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR${x}C${e+1} = xTexelR${x}C${e+2};\n                `}}else e<p&&(m+=`\n              if(xR >= 0 && xR < ${i}) {\n            `,s%2===1?(m+=`\n                xCOffset = xC + 1 - ${c};\n                if(xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${x}C${e} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${x}C${e} = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${o}) {\n                  xTexelR${x}C${e+2} = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR${x}C${e+2} = vec4(0.);\n                }\n\n                xR${x}C${e} = vec4(\n                  xTexelR${x}C${e}.zw, xTexelR${x}C${e+2}.zw);\n              `,e+1<p&&(m+=`\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ${c};\n                  if(xCOffset >= 0 && xCOffset < ${o}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR${x}C${e+1} = vec4(xTexelR${x}C${e+2}.xy, final.xy);\n                `)):(m+=`\n                if(xC >= 0 && xC < ${o}) {\n                  xTexelR${x}C${e} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${x}C${e} = vec4(0.);\n                }\n\n                xCOffset = xC + ${c};\n                if(xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${x}C${e+2} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${x}C${e+2} = vec4(0.);\n                }\n\n                xR${x}C${e} = vec4(\n                  xTexelR${x}C${e}.xy, xTexelR${x}C${e+2}.xy);\n              `,e+1<p&&(m+=`\n                  xR${x}C${e+1} = vec4(\n                    xTexelR${x}C${e}.zw, xTexelR${x}C${e+2}.zw);\n                `)),m+="}");e<p&&(m+=`\n            vec4 wTexelR${x}C${e} = getW(${x}, ${e}, d1, q);\n            wR${x}C${e} = vec4(wTexelR${x}C${e}.xz, wTexelR${x}C${e}.xz);\n          `,e+1<p&&(m+=`\n              vec4 wTexelR${x}C${e+1} = getW(${x}, ${e+1}, d1, q);\n              wR${x}C${e+1} =\n                vec4(wTexelR${x}C${e+1}.xz, wTexelR${x}C${e+1}.xz);`))}for(let h=0;h<d;h++)for(let t=0;t<p;t++)m+=`dotProd += xR${h}C${t} * wR${h}C${t};`;let v="",y="";n&&(v=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,y="result = activation(result);");const b=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${v}\n\n      const ivec2 strides = ivec2(${u}, ${c});\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ${m}\n\n        vec4 result = dotProd;\n        ${b}\n        ${y}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jd{constructor(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,s,u]=t,[c]=e,[l,h]=n;this.outputShape=[c,l,h,u];const f="bilinear"===r?1:0,[d,p]=[a-1+".0",s-1+".0"],[g,m,v]=l>1?[""+(a-1)/(l-1),"(y2-y1) * height_ratio",`y1*${d} + float(y)*(height_scale)`]:["0.0","0.0","0.5 * (y1+y2) * "+d],[y,b,x]=h>1?[""+(s-1)/(h-1),"(x2-x1) * width_ratio",`x1*${p} + float(x)*(width_scale)`]:["0.0","0.0","0.5 * (x1+x2) * "+p];this.userCode=`\n      const float height_ratio = float(${g});\n      const float width_ratio = float(${y});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${o}) {\n          return;\n        }\n\n        float height_scale = ${m};\n        float width_scale = ${b};\n\n        float in_y = ${v};\n        if( in_y < 0.0 || in_y > ${d} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${x};\n        if( in_x < 0.0 || in_x > ${p} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${f} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}class Dd{constructor(t,e,n){this.variableNames=["x"],this.outputShape=t;const r=t.length,i=e?"0.0":`getX(${Md(r,"coords")})`,o=t[t.length-1];let a="",s="";e?(a=n?"end != "+(o-1):"end != 0",s=n?"end + 1":"end - 1"):(a=n?"end + pow2 < "+o:"end >= pow2",s=n?"end + pow2":"end - pow2"),this.userCode=`\n      uniform float index;\n      void main() {\n        ${vf(r)} coords = getOutputCoords();\n        int end = ${Nd(r,"coords")};\n        float val = ${i};\n        int pow2 = int(pow(2.0, index));\n        if (${a}) {\n          int idx = ${s};\n          ${Nd(r,"coords")} = idx;\n          val += getX(${Md(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.index&&(this.index=e.getUniformLocation(n,"index")),e.gl.uniform1f(this.index,t)}}}function Md(t,e){if(1===t)return""+e;if(2===t)return`${e}.x, ${e}.y`;if(3===t)return`${e}.x, ${e}.y, ${e}.z`;if(4===t)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}function Nd(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error(`Cumulative sum for rank ${t} is not yet supported`)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Id{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=pl.DENSE;const e=bl(t),n=Sh();this.outputShape=t,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${Ch(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${e[0]}, ${e[1]}));\n        int index = 4 * (resTexRC.x * ${e[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rd{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=pl.DENSE;const e=bl(t),n=Sh();this.outputShape=t,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${Ch(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${e[0]}, ${e[1]}));\n        int index = 4 * (resTexRC.x * ${e[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fd{constructor(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${e};\n      int offset_h = imod(h, ${e});\n      int in_w = w / ${e};\n      int offset_w = imod(w, ${e});\n      int offset_d = (offset_h * ${e} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pd{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $d{constructor(t){this.variableNames=["A"],this.outTexUsage=gl.DOWNLOAD;const e=Sh();this.outputShape=t,this.userCode=`\n      ${Ah}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${e.output} = encode_float(x);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ld{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=gl.DOWNLOAD;const e=Sh();this.outputShape=t,this.userCode=`\n      ${Ah}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${e.output} = encode_float(x);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zd{constructor(t,e,n=!1){this.variableNames=["A"];const r=Sh(),[i,o]=e;this.outputShape=t;let a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`\n      ${kh(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${o};\n        int c = imod(flatIndex, ${o});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${o}.0, ${i}.0);\n        vec4 values = ${r.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${r.output} = vec4(${a}, 0., 0., 0.);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bd{constructor(t,e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const r=Sh(),[i,o]=e;this.outputShape=t;let a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let u=0;u<=1;u++)for(let e=0;e<=1;e++){const n=2*u+e;a+=`\n          localCoords = coords;\n          if(localCoords[2] + ${e} < ${t[2]}) {\n            localCoords[2] += ${e};\n            if(localCoords[1] + ${u} < ${t[1]}) {\n              localCoords[1] += ${u};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${o};\n              c = imod(flatIndex, ${o});\n              uv = (vec2(c, r) + halfCR) / vec2(${o}.0, ${i}.0);\n              values = ${r.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${n}] = values[0];\n              } else if(offset == 1) {\n                result[${n}] = values[1];\n              } else if(offset == 2) {\n                result[${n}] = values[2];\n              } else {\n                result[${n}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${kh(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${a}\n\n        ${r.output} = ${s};\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ud={REAL:"return real * expR - imag * expI;",IMAG:"return real * expI + imag * expR;"};class Wd{constructor(t,e,n){this.variableNames=["real","imag"];const r=e[1];this.outputShape=e;const i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${t}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${o};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vd{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(t){return(e,n)=>{null==this.valueLoc&&(this.valueLoc=e.getUniformLocationNoThrow(n,"value")),e.gl.uniform1f(this.valueLoc,t)}}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hd{constructor(t,e,n){this.variableNames=["A","indices"];const r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;const i=vf(this.rank),o=qd(t,n);this.userCode=`\n      void main() {\n        ${i} resRC = getOutputCoords();\n        setOutput(getA(${o}));\n      }\n    `}}function qd(t,e){const n=t.length;if(n>4)throw Error(`Gather for rank ${n} is not yet supported`);if(1===n)return"int(getIndices(resRC))";const r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let o=0;o<t.length;o++)o===e?i.push(`int(getIndices(${r[o]}))`):i.push(""+r[o]);return i.join()}class Gd{constructor(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;const r=vf(e.length),i=vf(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${o};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xd(t){const e=Sh(),n=`${e.version}\n    precision highp float;\n    ${e.attribute} vec3 clipSpacePos;\n    ${e.attribute} vec2 uv;\n    ${e.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`;return jl(t,n)}function Yd(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Pl(t,e)}function Kd(t){const e=new Uint16Array([0,1,2,2,1,3]);return $l(t,e)}function Zd(t,e,n,r,i,o){zl(e,n);const a=Ll(t),s=t.TEXTURE_2D;return Ol(t,()=>t.bindTexture(s,a)),Ol(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Ol(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Ol(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),Ol(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),Ol(t,()=>t.texImage2D(s,0,r,e,n,0,i,o,null)),Ol(t,()=>t.bindTexture(t.TEXTURE_2D,null)),a}function Jd(t){return t.internalFormatFloat}function Qd(t,e,n,r){const[i,o]=vl(e,n);return Zd(t,i,o,Jd(r),r.textureFormatFloat,t.FLOAT)}function tp(t){return t.internalFormatHalfFloat}function ep(t,e,n,r){const[i,o]=vl(e,n);return Zd(t,i,o,tp(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function np(t){return t.downloadTextureFormat}function rp(t,e,n,r){const[i,o]=vl(e,n);return Zd(t,i,o,np(r),t.RGBA,t.UNSIGNED_BYTE)}function ip(t){return t.internalFormatPackedFloat}function op(t,e,n,r){const[i,o]=xl(e,n);return Zd(t,i,o,ip(r),t.RGBA,t.FLOAT)}function ap(t){return t.internalFormatPackedHalfFloat}function sp(t,e,n,r){const[i,o]=xl(e,n);return Zd(t,i,o,ap(r),t.RGBA,r.textureTypeHalfFloat)}function up(t,e,n){const r=0,i=12,o=20;Ol(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n));const a=Ul(t,e,"clipSpacePos",n,3,o,r);return a&&Ul(t,e,"uv",n,2,o,i)}function cp(t,e,n,r,i,o){let a,s,u;Ol(t,()=>t.bindTexture(t.TEXTURE_2D,e)),i instanceof Uint8Array?(a=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,u=t.RGBA):(a=new Float32Array(n*r*4),s=t.FLOAT,u=o.internalFormatPackedFloat),a.set(i),Ol(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,s,a)),Ol(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function lp(t,e,n){Ol(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Ol(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ol(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Ol(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function hp(t,e,n,r){const i=t.createBuffer();Ol(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const o=4,a=4,s=o*a*e*n;return Ol(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)),Ol(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Ol(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function fp(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function dp(t,e,n,r){const[i,o]=vl(e,n),a=4,s=new Uint8Array(yl(e*n,a));return Ol(t,()=>t.readPixels(0,0,i,o,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function pp(t,e,n,r,i,o,a,s){const u=t,c=new Float32Array(wl(o,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function gp(t,e,n){const r=new Float32Array(e*n*4);return Ol(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mp{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const e=Object(h["ze"])().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,ll(e,t)):this.gl=hl(e);let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(1===Object(h["ze"])().getNumber("WEBGL_VERSION")){const t="OES_texture_float",e="OES_texture_half_float";if(this.textureFloatExtension=El(this.gl,t),lh(this.gl,e))this.textureHalfFloatExtension=El(this.gl,e);else if(Object(h["ze"])().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),lh(this.gl,r))this.colorBufferHalfFloatExtension=El(this.gl,r);else if(Object(h["ze"])().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",lh(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!lh(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=Yd(this.gl),this.indexBuffer=Kd(this.gl),this.framebuffer=Bl(this.gl),this.textureConfig=_l(this.gl,this.textureHalfFloatExtension)}get debug(){return Object(h["ze"])().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;Ol(t,()=>t.finish()),Ol(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Ol(t,()=>t.deleteFramebuffer(this.framebuffer)),Ol(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Ol(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Ol(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,e){return this.throwIfDisposed(),Qd(this.gl,t,e,this.textureConfig)}createFloat16MatrixTexture(t,e){return this.throwIfDisposed(),ep(this.gl,t,e,this.textureConfig)}createUnsignedBytesMatrixTexture(t,e){return this.throwIfDisposed(),rp(this.gl,t,e,this.textureConfig)}uploadPixelDataToTexture(t,e){this.throwIfDisposed(),lp(this.gl,t,e)}uploadDenseMatrixToTexture(t,e,n,r){this.throwIfDisposed(),cp(this.gl,t,e,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(t,e){return this.throwIfDisposed(),sp(this.gl,t,e,this.textureConfig)}createPackedMatrixTexture(t,e){return this.throwIfDisposed(),op(this.gl,t,e,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(Xl(this.gl,this.framebuffer),this.outputTexture=null),Ol(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,e,n){return this.downloadMatrixDriver(t,()=>dp(this.gl,e,n,this.textureConfig))}downloadPackedMatrixFromBuffer(t,e,n,r,i,o){return pp(this.gl,t,e,n,r,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,e){return fp(this.gl,t,e)}createBufferFromTexture(t,e,n){this.bindTextureToFrameBuffer(t);const r=hp(this.gl,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,n;if(Object(h["ze"])().getBool("WEBGL_FENCE_API_ENABLED")){const r=t,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=()=>{const t=r.clientWaitSync(i,0,0);return t===r.ALREADY_SIGNALED||t===r.CONDITION_SATISFIED},e=i}else Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(e,Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:e,isFencePassed:n}}downloadMatrixFromPackedTexture(t,e,n){return this.downloadMatrixDriver(t,()=>gp(this.gl,e,n))}createProgram(t){this.throwIfDisposed();const e=this.gl,n=Dl(e,t),r=Xd(e),i=Il(e);return Ol(e,()=>e.attachShader(i,r)),Ol(e,()=>e.attachShader(i,n)),Rl(e,i),this.debug&&Fl(e,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=up(e,this.program,this.vertexBuffer)),i}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&Ol(this.gl,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&Fl(this.gl,this.program),Ol(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,e,n=!0){return this.throwIfDisposed(),n?Vl(this.gl,t,e):Hl(this.gl,t,e)}getAttributeLocation(t,e){return this.throwIfDisposed(),Ol(this.gl,()=>this.gl.getAttribLocation(t,e))}getUniformLocationNoThrow(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}setInputMatrixTexture(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),ql(this.gl,t,e,n)}setOutputMatrixTexture(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)}setOutputPackedMatrixTexture(t,e,n){this.throwIfDisposed();const[r,i]=xl(e,n);this.setOutputMatrixTextureDriver(t,r,i)}setOutputMatrixWriteRegion(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)}setOutputPackedMatrixWriteRegion(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&Fl(this.gl,this.program),Yl(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;this.debug&&this.debugValidate(),Ol(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ol(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=El(this.gl,2===Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}const t=this.getQueryTimerExtensionWebGL1(),e=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,e),e}endQuery(){if(2===Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2();return void t.endQuery(e.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await h["bi"].repeatedTry(()=>this.disposed||this.isQueryAvailable(t,Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,e){if(0===e)return null;if(2===e){const e=this.gl,n=e.getQueryParameter(t,e.QUERY_RESULT);return n/1e6}{const e=this.getQueryTimerExtensionWebGL1(),n=e.getQueryObjectEXT(t,e.QUERY_RESULT_EXT);return n/1e6}}isQueryAvailable(t,e){if(0===e)return!0;if(2===e){const e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const e=this.getQueryTimerExtensionWebGL1(),n=e.getQueryObjectEXT(t,e.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(e.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){const t=vp(this.itemsToPoll.map(t=>t.isDoneFn));for(let e=0;e<=t;++e){const{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||h["bi"].repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(t){this.throwIfDisposed(),Gl(this.gl,t,this.framebuffer),this.debug&&Yl(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(Gl(this.gl,this.outputTexture,this.framebuffer),this.debug&&Yl(this.gl)):Xl(this.gl,this.framebuffer)}downloadMatrixDriver(t,e){this.bindTextureToFrameBuffer(t);const n=e();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(t,e,n){this.throwIfDisposed();const r=this.gl;Gl(r,t,this.framebuffer),this.debug&&Yl(r),this.outputTexture=t,Ol(r,()=>r.viewport(0,0,e,n)),Ol(r,()=>r.scissor(0,0,e,n))}setOutputMatrixWriteRegionDriver(t,e,n,r){this.throwIfDisposed(),Ol(this.gl,()=>this.gl.scissor(t,e,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function vp(t){let e=0;for(;e<t.length;++e){const n=t[e]();if(!n)break}return e-1}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yp(t,e,n,r){const i=e.userCode,o=n.map((t,n)=>{const r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}}),a=o.map(t=>t.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=Eh(o,s,i,e.packedInputs),c=t.createProgram(u);let l=null;const f=t.getUniformLocation(c,"NAN",!1);1===Object(h["ze"])().getNumber("WEBGL_VERSION")&&(l=t.getUniformLocation(c,"INFINITY",!1));const d={};for(let h=0;h<e.variableNames.length;h++){const n=e.variableNames[h],r=!1;d[n]=t.getUniformLocation(c,n,r),d["offset"+n]=t.getUniformLocation(c,"offset"+n,r)}return{program:e,source:u,webGLProgram:c,uniformLocations:d,inShapeInfos:a,outShapeInfo:s,infLoc:l,nanLoc:f}}function bp(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((t,n)=>{const r=t.logicalShape,i=e[n],o=i.shape;if(!h["bi"].arraysEqual(r,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${o} must match`);if(t.isUniform&&i.isUniform)return;const a=t.texShape,s=i.isUniform?null:i.texData.texShape;if(!h["bi"].arraysEqual(a,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${s} must match`)})}function xp(t,e,n,r,i){bp(e.inShapeInfos,n),bp([e.outShapeInfo],[r]);const o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(o,a[0],a[1]):t.setOutputMatrixTexture(o,a[0],a[1]),t.setProgram(e.webGLProgram),1===Object(h["ze"])().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((n,r)=>{const i=e.program.variableNames[r],o=e.uniformLocations[i],a=e.uniformLocations["offset"+i];if(null!=o)if(n.isUniform)if(h["bi"].sizeFromShape(n.shape)<2)t.gl.uniform1f(o,n.uniformValues[0]);else{let e=n.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),t.gl.uniform1fv(o,e)}else null!=n.texData.slice&&null!=a&&t.gl.uniform1i(a,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,o,r)}),null!=i&&i(t,e.webGLProgram),t.executeProgram()}function wp(t,e,n){let r="";e.concat(n).forEach(t=>{const e=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0,n=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${n}_${e}`});const i=t.userCode;let o=t.constructor.name;return o+="_"+r+"_"+i,o}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _p{constructor(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;const{filterWidth:r,inChannels:i,strideWidth:o,strideHeight:a,padInfo:s,outWidth:u,dilationWidth:c,dilationHeight:l,dataFormat:h}=n,{left:f,top:d}=s,p=i*r,g=Sh(),m="channelsLast"===h,v=m?0:1,y=m?1:2;let b="";for(let x=0;x<=1;x++)for(let n=0;n<=1;n++)b+=`\n          blockIndex = rc.y + ${n};\n          pos = rc.x + ${x};\n\n          if(blockIndex < ${t[1]} && pos < ${t[0]}) {\n            offsetY = int(blockIndex / (${u})) * ${a} - ${d};\n            d0 = offsetY + ${l} * (pos / ${p});\n\n            if(d0 < ${e[v]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${u}.) * ${o}. - ${f}.);\n              d1 = offsetX + ${c} * (int(mod(float(pos), ${p}.) / ${i}.));\n\n              if(d1 < ${e[y]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${i}.));\n\n                if (${m}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*x+n}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*x+n}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${b}\n\n        ${g.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Op{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];const o=e,a=t[3]-1;let s;this.outputShape=t;const u=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${u})`:1===i?`1.0/(${u})`:`exp(log(${u}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${o}; j <= ${o}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${a}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${s};\n        setOutput(val);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sp{constructor(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${e})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${e} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cp{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=e,a=t[3]-1;let s;this.outputShape=t;const u=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${u})`:1===i?`1.0/(${u})`:`exp(log(${u}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${o};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${o}; j <= ${o}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kp{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,a=i-1-t.padInfo.top,s=o-1-t.padInfo.left,u=i*o-1;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${e}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Ap{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=s-1-t.padInfo.front,h=u-1-t.padInfo.top,f=c-1-t.padInfo.left,d=s*u*c-1;this.userCode=`\n      const ivec3 pads = ivec3(${l}, ${h}, ${f});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${e}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${u};\n              wR += ${o}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${c};\n                wC += ${a}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${d} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${u} * ${c} +\n                  wR * ${c} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tp{constructor(t,e,n=!1,r=!1,i=!1,o=null,a=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const s=n?t[1]:t[2],u=Math.ceil(s/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",h=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let d="",p="";o&&(d=a?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${o}\n        }`:`vec4 activation(vec4 x) {\n          ${o}\n        }`,p="result = activation(result);");const g=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${d}\n\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${u}; i++) {\n          vec4 a = getMatrixA(rc.x, ${c});\n          vec4 b = getMatrixB(rc.x, ${l});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${h[0]} * ${f[0]});\n          result += (${h[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${g}\n\n        ${p}\n\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ep{constructor(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.seedLoc&&(this.seedLoc=e.getUniformLocation(n,"seed")),e.gl.uniform1f(this.seedLoc,t)}}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jp{constructor(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dp{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;const e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const n=_h("rc",e),r=vf(e),i=Np(e,t,n),o=Ip(e,t[t.length-1],t[t.length-2],n),a=Rp(t,n);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${i}) {\n            setOutput(vec4(0));\n          } else {\n            ${o}\n\n            setOutput(vec4(${a}));\n          }\n        }\n      `}}}function Mp(t,e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let o=`${0===r?"r":"rp1"}, ${0===i?"c":"cp1"}`;for(let n=2;n<t;n++)o=e[e.length-1-n]+","+o;n.push(o)}return n}function Np(t,e,n){if(1===t)return"rc > "+e[0];let r="";for(let i=t-2;i<t;i++)r+=`${n[i]} >= ${e[i]}`,i<t-1&&(r+="||");return r}function Ip(t,e,n,r){if(1===t)return"";const i=r.slice(-2);return`\n    int r = ${i[0]};\n    int c = ${i[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${e};\n    bool rEdge = rp1 >= ${n};\n  `}function Rp(t,e){const n=t.length,r=Mp(n,e);return 1===n?`getA(rc),\n            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${r[0]}),\n          cEdge ? 0. : getA(${r[1]}),\n          rEdge ? 0. : getA(${r[2]}),\n          rEdge || cEdge ? 0. : getA(${r[3]})`}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fp{constructor(t,e,n){this.variableNames=["x"],this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=vf(r),o=e.map(t=>t[0]).join(","),a=e.map((e,n)=>e[0]+t[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${o});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(${n}));\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${s}));\n        }\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(${n}));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pp{constructor(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=vf(r),o=e.map(t=>t[0]).join(","),a=e.map((e,n)=>e[0]+t[n]).join(","),s=_h("rc",r),u=_h("source",r),c=`${s[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${u.slice(-2).join()})`,h=[i+" rc = outputLoc;",`${s[r-1]} += 1;\n       if(${c}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${s[r-2]} += 1;\n       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;\n         if(${c}) {`],f=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let d="";for(let p=0,g=1===r?2:4;p<g;p++)d+=`\n        ${h[p]}\n        if (${f}) {\n          result[${p}] = float(${n});\n        } else {\n          ${i} source = rc - start;\n          result[${p}] = getChannel(getX(${u.join()}), ${l});\n        }\n      `;d+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${o});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $p{constructor(t,e,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const o=t.filterWidth,a=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.top,d=t.padInfo.left;this.outputShape=t.outShape;const p="avg"===e,g=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,m=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let v="0.0";if(p||(v="-1.0 / 1e-20"),n){const e=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${a}, ${s});\n        const ivec2 pads = ivec2(${f}, ${d});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${l};\n              wR += ${u}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${c}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${e} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?g:m:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const y="max";let b=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(b="avgValue / count");const x=4*Math.floor(o/4),w=o%4,_=`\n      if (${p}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${y}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${f}, ${d});\n      const float initializationValue = ${v};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${v});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${l};\n            wR += ${u}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${x}; wC += 4) {\n            int xC = xCCorner + wC * ${c};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              getValue(batch, xR, xC + 2 * ${c}, d),\n              getValue(batch, xR, xC + 3 * ${c}, d)\n            );\n\n            ${_}\n          }\n\n          int xC = xCCorner + ${x};\n          if (${1===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${_}\n          } else if (${2===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${_}\n          } else if (${3===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              getValue(batch, xR, xC + 2 * ${c}, d),\n              initializationValue\n            );\n\n            ${_}\n          }\n        }\n        setOutput(${b});\n      }\n    `}}class Lp{constructor(t,e,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const o=t.filterWidth,a=t.strideDepth,s=t.strideHeight,u=t.strideWidth,c=t.dilationDepth,l=t.dilationHeight,h=t.dilationWidth,f=t.effectiveFilterDepth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,g=t.padInfo.front,m=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;const y="avg"===e;let b="0.0";if(y||(b="-1.0 / 1e-20"),n){const e=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${a}, ${s}, ${u});\n        const ivec3 pads = ivec3(${g}, ${m}, ${v});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${f};\n              wD += ${c}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${d};\n                wR += ${l}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${p};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${e} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${d} * ${p} +\n                      wR * ${p} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const x="max";let w=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(w="avgValue / count");const _=4*Math.floor(o/4),O=o%4,S=`\n      if (${y}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${x}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${a}, ${s}, ${u});\n      const ivec3 pads = ivec3(${g}, ${m}, ${v});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${f};\n            wD += ${c}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d};\n            wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${_}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${S}\n            }\n\n            int xC = xCCorner + ${_};\n            if (${1===O}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${2===O}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${3===O}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${S}\n            }\n          }\n          setOutput(${w});\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zp{constructor(t,e){this.variableNames=["x"];const n=t.windowSize,r=t.batchSize,i=t.inSize,o=Math.ceil(i/n);this.outputShape=[r,o];let a="0.0",s="";"prod"===e?a="1.0":"min"===e?(a="1.0 / 1e-20",s="min"):"max"===e&&(a="-1.0 / 1e-20",s="max");let u=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===e?u="sumValue":"prod"===e?u="prodValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");const c=4*Math.floor(n/4),l=n%4;let h=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n      }\n    `,f="vec4";"all"===e?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===e&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");let d="";i%n>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${a};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${d}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${a});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${c}; i += 4) {\n          int inIdx = inOffset + i;\n          ${f} values = ${f}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${c};\n        if (${1===l}) {\n          ${f} values = ${f}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===l}) {\n          ${f} values = ${f}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===l}) {\n          ${f} values = ${f}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${u});\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bp{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;let n="";for(let r=0;r<4;r++){let t="thisRC = rc;";r%2===1&&(t+="thisRC.z += 1;"),r>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${r}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${r>0?"}":""}\n      `}this.userCode=`\n      ${Up(e)}\n      ${kh(t)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${t[1]};\n        int cols = ${t[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}function Up(t){const e=Ch(["r","c","d"],t);return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${e}\n      return ivec3(r, c, d);\n    }\n  `}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wp{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;const[,r,i]=e.shape,[,o,a]=t.shape,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],u=[n&&o>1?o-1:o,n&&a>1?a-1:a],c=s[0]/u[0],l=s[1]/u[1],h=1/c,f=1/l,d=2*Math.ceil(h)+2,p=2*Math.ceil(f)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${c});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${f});\n\n        const int winHeight = int(${d});\n        const int winWidth = int(${p});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vp{constructor(t,e,n,r){this.variableNames=["A"],this.outputShape=[];const[i,o,a,s]=t;this.outputShape=[i,e,n,s];const u=[r&&e>1?o-1:o,r&&n>1?a-1:a],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${o}.0, ${a}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hp{constructor(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,a,s]=t;this.outputShape=[i,e,n,s];const u=[r&&e>1?o-1:o,r&&n>1?a-1:a],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${o}.0, ${a}.0,\n                                     ${a}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${s-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qp{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;const[,r,i]=e.shape,[,o,a]=t.shape,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],u=[n&&o>1?o-1:o,n&&a>1?a-1:a],c=s[0]/u[0],l=s[1]/u[1],h=1/c,f=1/l,d=2*Math.ceil(h)+2,p=2*Math.ceil(f)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${c});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${f});\n\n        const int winHeight = int(${d});\n        const int winWidth = int(${p});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${u[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${u[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gp{constructor(t,e,n,r){this.variableNames=["A"],this.outputShape=[];const[i,o,a,s]=t;this.outputShape=[i,e,n,s];const u=[r&&e>1?o-1:o,r&&n>1?a-1:a],c=[r&&e>1?e-1:e,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${o}.0, ${a}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${l})));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xp{constructor(t,e){this.variableNames=["x"];const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=t,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${t[0]} - coord - 1));\n        }\n      `);const r=n=>-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - coords[${n}] - 1`:`coords[${n}]`,i=t.map((t,e)=>r(e)).join(","),o=vf(n);this.userCode=`\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yp{constructor(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=t;const r=_h("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,o=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,a=vf(n);function s(t){return h(t)}function u(t){return t[n-1]="("+t[n-1]+" + 1)",h(t)}function c(t){return t[n-2]="("+t[n-2]+" + 1)",h(t)}function l(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",h(t)}function h(e){const n=t.map((t,n)=>f(n,e)),r=n.join(","),i=n.slice(-2).join(",");return`getChannel(getX(${r}), vec2(${i}))`}function f(n,r){return-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - ${r[n]} - 1`:""+r[n]}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${t[0]} - rc - 1),\n            ${t[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),\n                ${t[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${a} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${s(r.slice())};\n          if(${i}){\n            result.g = ${u(r.slice())};\n          }\n          if(${o}) {\n            result.b = ${c(r.slice())};\n            if(${i}) {\n              result.a = ${l(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kp{constructor(t,e,n,r,i,o,a=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const s=vf(i.length),u=vf(o.length);let c="";1===n?c="i":2===n&&(c="i, j");const l=`getIndices(${c})`;let h="";1===r?h="i":2===r&&(h="i, coords[1]");const f=`getUpdates(${h})`,d=e>1?"strides[j]":"strides";this.userCode=`\n        ${s} strides = ${s}(${i});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${t}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${e}; j++) {\n              int index = round(${l});\n              flattenedIndex += index * ${d};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${f};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zp{constructor(t,e){this.variableNames=["x","segmentIds"];const n=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,a=o*Math.ceil(i/n);this.outputShape=[r,a];const s="0.0",u="sumValue",c=4*Math.floor(n/4),l=n%4,h="\n        sumValue += dot(values, segFilter);\n    ";let f="";i%n>0&&(f=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let d="";i%n>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${s};\n\n      float getValue(int batch, int inIdx) {\n        ${f}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${d}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${o})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${o})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${c}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${c};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${h}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${h}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${h}\n        }\n        setOutput(${u});\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jp{constructor(t,e,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=[];for(let r=0;r<e.length;r++)a.push(""+n[r]),r<t&&o.push(""+n[r]);r=o.join(),i=a.join()}const o=vf(n);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qp{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const e=vf(this.rank),n=`uniform int start[${this.rank}];`,r=eg(this.rank);let i;const o=t.map((t,e)=>`sourceLoc.${tg[e]} = start[${e}] + coords.${tg[e]};`);i=`\n        ${e} sourceLoc;\n        ${e} coords = getOutputCoords();\n        ${o.join("\n")}\n      `,this.userCode=`\n      ${n}\n      void main() {\n        ${i}\n        setOutput(getSource(${r}));\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${t.length})`);return(e,n)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,t)}}}const tg=["x","y","z","w","u","v"];function eg(t){if(1===t)return"sourceLoc";if(t<=6)return tg.slice(0,t).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ng{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;const e=vf(this.rank),n=_h("coords",this.rank),r=_h("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,o=`getChannel(getSource(${r.join()}), ${i})`,a=`\n      result.x = ${o};\n      if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${o};\n        --${r[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${t[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${o};\n        if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,u=this.rank<=4?`sourceLoc = coords +\n            ${e}(${t.map((t,e)=>`start[${e}]`).join()});`:t.map((t,e)=>`${r[e]} = ${n[e]} + start[${e}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${e} coords = getOutputCoords();\n        ${e} sourceLoc;\n        ${u}\n        vec4 result = vec4(0.);\n        ${a}\n        ${s}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${t.length})`);return(e,n)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,t)}}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rg{constructor(t,e,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=vf(n.length),o=vf(n.length);let a="";if(1===r)a="coords * strides + begin";else{let t=0;a=n.map((e,r)=>(t++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${t-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${t});\n      ${i} strides = ${i}(${e});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ig{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,e,n){const r=cg(e,n),i=lg(t,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=ag(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const t=this.freeTextures[i].shift();return this.usedTextures[i].push(t),t}let a;return r===ml.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):r===ml.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):r===ml.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===ml.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===ml.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(t,e,n,r){if(null==this.freeTextures)return;const i=cg(n,r),o=lg(e,i,r);o in this.freeTextures||(this.freeTextures[o]=[]);const a=ag(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Object(h["ze"])().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(t),this._numBytesAllocated-=a):(this.freeTextures[o].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[o],c=u.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const e=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: "+this._numBytesAllocated),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const t in this.freeTextures)this.freeTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});for(const t in this.usedTextures)this.usedTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function og(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;throw new Error("Unknown internal format "+e)}function ag(t,e,n,r,i){const o=sg(e,r);let a;if(i){const[e,n]=xl(t[0],t[1]);a=e*n}else{const[e,n]=vl(t[0],t[1]);a=e*n}const s=og(n,o);return a*s}function sg(t,e){switch(t){case ml.PACKED_2X2_FLOAT32:return ip(e);case ml.PACKED_2X2_FLOAT16:return ap(e);case ml.UNPACKED_FLOAT32:return Jd(e);case ml.UNPACKED_FLOAT16:return tp(e);case ml.PACKED_4X1_UNSIGNED_BYTE:return np(e);default:throw new Error("Unknown physical texture type "+t)}}function ug(t){return Object(h["ze"])().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?ml.PACKED_2X2_FLOAT32:ml.UNPACKED_FLOAT32:t?ml.PACKED_2X2_FLOAT16:ml.UNPACKED_FLOAT16}function cg(t,e){if(t===gl.UPLOAD)return ml.PACKED_2X2_FLOAT32;if(t===gl.RENDER||null==t)return ug(e);if(t===gl.DOWNLOAD||t===gl.PIXELS)return ml.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function lg(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hg{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let o=0;o<n.length;o++)n[o]=t[o]*e[o];this.outputShape=n,this.rank=n.length;const r=vf(this.rank),i=fg(t);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function fg(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(1===e)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dg{constructor(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const pg="if (isnan(x)) return x;",gg="return x;",mg="return abs(x);",vg=pg+"\n  return (x < 0.0) ? 0.0 : x;\n",yg=pg+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",bg="return (x >= 0.0) ? x : (exp(x) - 1.0);",xg=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${h["Bd"].SELU_SCALEALPHA};\n  float scale = ${h["Bd"].SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`;function wg(t=0){return pg+`\n    return x > 0.0 ? 1.0 : float(${t});\n  `}const _g="return -x;",Og="return ceil(x);",Sg="return floor(x);",Cg="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",kg="return float(isnan(x));",Ag="return float(isinf(x));",Tg="return float(!isnan(x) && !isinf(x));",Eg="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",jg="return exp(x);",Dg="return exp(x) - 1.0;",Mg="if (x < 0.0) return NAN;\n  return log(x);",Ng="return log(1.0 + x);",Ig="return sqrt(x);",Rg="return inversesqrt(x);",Fg="return 1.0 / (1.0 + exp(-1.0 * x));",Pg="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",$g=pg+"\n  return sin(x);\n",Lg=pg+"\n  return cos(x);\n",zg="return tan(x);",Bg=pg+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",Ug=pg+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",Wg=pg+"\n  return atan(x);\n",Vg="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",Hg="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",qg="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",Gg=pg+"return log(x + sqrt(x * x + 1.0));",Xg=pg+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",Yg=pg+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",Kg=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${h["Bd"].ERF_P};\n  float a1 = ${h["Bd"].ERF_A1};\n  float a2 = ${h["Bd"].ERF_A2};\n  float a3 = ${h["Bd"].ERF_A3};\n  float a4 = ${h["Bd"].ERF_A4};\n  float a5 = ${h["Bd"].ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`,Zg="return x * x;",Jg="return 1.0 / x;",Qg="return float(!(x >= 1.0));",tm="return float(int(x));",em="return x;",nm="return x;",rm="\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",im="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",om="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",am="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n";class sm{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${e}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class um{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;const e=t.length,n=_h("rc",e),r=vf(e),i=Oh(e,n),o=n.slice(-2),a=e<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${a}));\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{segment_util:cm}=h["Bd"],lm=h["lf"].split,hm=h["lf"].tile,fm=h["lf"].topkImpl,dm=h["lf"].whereImpl,pm=1e-7,gm=1e-4,mm={};function vm(t){return t in mm||(mm[t]={}),mm[t]}function ym(t,e=!1){if("linear"===t)return e?nm:gg;if("relu"===t)return e?im:vg;if("elu"===t)return e?am:bg;if("relu6"===t)return e?om:yg;if("prelu"===t)return e?Qf:Gf;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}const bm=128,xm=600;function wm(){return null==Object(h["ze"])().global.screen?1024:Object(h["ze"])().global.screen.height*Object(h["ze"])().global.screen.width*window.devicePixelRatio*xm/1024/1024}const _m=1e3;class Om extends h["zb"]{constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!Object(h["ze"])().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){const t=hl(Object(h["ze"])().getNumber("WEBGL_VERSION"));this.binaryCache=vm(Object(h["ze"])().getNumber("WEBGL_VERSION")),this.gpgpu=new mp(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=t,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=t.gl.canvas;this.textureManager=new ig(this.gpgpu),this.numMBBeforeWarning=wm(),this.texData=new h["O"](this,Object(h["ye"])())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(t,e,n){if((Object(h["ze"])().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Object(h["ze"])().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:gl.UPLOAD}),r}move(t,e,n,r){if(Object(h["ze"])().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:gl.UPLOAD})}readSync(t){const e=this.texData.get(t),{values:n,dtype:r,complexTensors:i,slice:o,shape:a,isPacked:s}=e;if(null!=o){let e;e=s?new sm(a,em):new dg(a,em);const n=this.runWebGLProgram(e,[{dataId:t,shape:a,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeData(n.dataId),i}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;const u=null!=this.activeTimers;let c,l;if(u&&(c=h["bi"].now()),"complex64"===r){const t=i.real.dataSync(),e=i.imag.dataSync();l=h["Bd"].mergeRealAndImagArrays(t,e)}else l=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=h["bi"].now()-c),this.convertAndCacheOnCPU(t,l)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const e=this.texData.get(t),{values:n,shape:r,slice:i,dtype:o,complexTensors:a,isPacked:s}=e;if(null!=i){let e;e=s?new sm(r,em):new dg(r,em);const n=this.runWebGLProgram(e,[{dataId:t,shape:r,dtype:o}],o),i=this.read(n.dataId);return this.disposeData(n.dataId),i}if(null!=n)return this.convertAndCacheOnCPU(t);if(!Object(h["ze"])().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Object(h["ze"])().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u,c,l=null;if("complex64"!==o&&Object(h["ze"])().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(t);const e=this.texData.get(u.dataId);l=this.gpgpu.createBufferFromTexture(e.texture,...bl(r))}if(this.pendingRead.set(t,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const t=await Promise.all([a.real.data(),a.imag.data()]),e=t[0],n=t[1];c=h["Bd"].mergeRealAndImagArrays(e,n)}else if(null==l)c=this.getValuesFromTexture(t);else{const t=h["bi"].sizeFromShape(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(l,t)}null!=u&&this.disposeData(u.dataId);const f=this.convertAndCacheOnCPU(t,c),d=this.pendingRead.get(t);return this.pendingRead.delete(t),d.forEach(t=>t(f)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),f}checkNumericalProblems(t){if(null!=t)for(let e=0;e<t.length;e++){const n=t[e];if(!Al(n)){if(Object(h["ze"])().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:e,dtype:n,isPacked:r}=this.texData.get(t),i=h["bi"].sizeFromShape(e);if(Object(h["ze"])().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(t),r=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...bl(e)).subarray(0,i);return this.disposeData(n.dataId),o}const o=Object(h["ze"])().getBool("WEBGL_PACK")&&!0===r,a=o?eh(e):e,s=o?new Ld(a):new $d(a),u=this.runWebGLProgram(s,[{shape:a,dtype:n,dataId:t}],"float32"),c=this.texData.get(u.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeData(u.dataId),l}async time(t){const e=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t();const i=h["bi"].flatten(this.activeTimers.map(t=>t.query)).filter(t=>null!=t),o=h["bi"].flatten(this.activeTimers.map(t=>t.name)).filter(t=>null!=t);this.activeTimers=e,r&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(i);a["kernelMs"]=h["bi"].sum(t),a["getExtraProfileInfo"]=()=>t.map((t,e)=>({name:o[e],ms:t})).map(t=>`${t.name}: ${t.ms}`).join(", ")}else a["kernelMs"]={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:h["bi"].now(),endMs:null}}endTimer(t){return Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=h["bi"].now(),t)}async getQueryTime(t){if(Object(h["ze"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const e=t;return e.endMs-e.startMs}disposeData(t){if(this.pendingDisposal.has(t))return;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(!this.texData.has(t))return;this.releaseGPUData(t);const{complexTensors:e}=this.texData.get(t);null!=e&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(t)}releaseGPUData(t){const{texture:e,dtype:n,texShape:r,usage:i,isPacked:o,slice:a}=this.texData.get(t),s=a&&a.origDataId||t,u=this.dataRefCount.get(s);u>1?this.dataRefCount.set(s,u-1):(this.dataRefCount.delete(s),null!=e&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(e,r,i,o)));const c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture}getDataInfo(t){return this.texData.get(t)}getCPUBackend(){return Object(h["ze"])().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Object(h["ye"])().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(t,e=bm){const n=this.getCPUBackend();return this.warnedAboutCPUBackend||null!=n||Object(h["ze"])().getBool("IS_TEST")||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=n&&t.every(t=>null==this.texData.get(t.dataId).texture&&h["bi"].sizeFromShape(t.shape)<e)}getGPGPUContext(){return this.gpgpu}complex(t,e){const n=this.makeOutput(t.shape,"complex64"),r=this.texData.get(n.dataId);return r.complexTensors={real:Object(h["ye"])().keep(t.clone()),imag:Object(h["ye"])().keep(e.clone())},n}real(t){const e=this.texData.get(t.dataId);return e.complexTensors.real.clone()}imag(t){const e=this.texData.get(t.dataId);return e.complexTensors.imag.clone()}slice(t,e,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,e,n);if(0===h["bi"].sizeFromShape(n))return Object(h["Gh"])([],n,t.dtype);const{isPacked:r}=this.texData.get(t.dataId),i=h["lh"].isSliceContinous(t.shape,e,n);if(r||!i){const r=Object(h["ze"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ng(n):new Qp(n),i=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,i)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n)}shallowSlice(t,e,n){const r=this.texData.get(t.dataId),i=this.makeOutput(n,t.dtype),o=this.texData.get(i.dataId);Object.assign(o,r),o.shape=n,o.dtype=t.dtype;let a=h["lh"].computeFlatOffset(e,t.strides);r.slice&&(a+=r.slice.flatOffset),o.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||t.dataId};const s=this.dataRefCount.get(o.slice.origDataId)||1;return this.dataRefCount.set(o.slice.origDataId,s+1),i}stridedSlice(t,e,n,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,e,n,r);const i=h["lh"].computeOutShape(e,n,r);if(i.some(t=>0===t))return Object(h["Gh"])([],i);const o=new rg(e,r,i);return this.compileAndRun(o,[t])}reverse(t,e){const n=Object(h["ze"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Yp(t.shape,e):new Xp(t.shape,e);return this.compileAndRun(n,[t])}concat(t,e){if("complex64"===t[0].dtype){const n=t.map(t=>Object(h["Bg"])(t)),r=t.map(t=>Object(h["cf"])(t));return Object(h["Qd"])(this.concat(n,e),this.concat(r,e))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,e);if(1===t.length)return t[0];if(t.length>Object(h["ze"])().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const n=Math.floor(t.length/2),r=this.concat(t.slice(0,n),e),i=this.concat(t.slice(n),e);return this.concat([r,i],e)}if(Object(h["ze"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){const n=new yd(t.map(t=>t.shape),e);return this.compileAndRun(n,t)}const n=h["Bd"].computeOutShape(t.map(t=>t.shape),e),r=t.map(t=>t.as2D(-1,h["bi"].sizeFromShape(t.shape.slice(e)))),i=new vd(r.map(t=>t.shape)),o=this.compileAndRun(i,r);return o.reshape(n)}neg(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(Object(h["ze"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,_g,t.dtype);const e=new dg(t.shape,_g);return this.compileAndRun(e,[t])}batchMatMul(t,e,n,r){const i=n?t.shape[2]:t.shape[1],o=r?e.shape[1]:e.shape[2],a=n?t.shape[1]:t.shape[2],[s,,]=t.shape;if((1===i||1===o)&&a>_m){n&&(t=Object(h["Uh"])(t,[0,2,1])),r&&(e=Object(h["Uh"])(e,[0,2,1]));const i=1===o?t:t.as3D(s,a,1),u=1===o?2:1,c=1===o?e.as3D(s,1,a):e;return this.multiply(i,c).sum(u,!0)}const u=Object(h["ai"])(t.dtype,e.dtype),c=new Tp(t.shape,[s,i,o],n,r);return this.compileAndRun(c,[t,e],u)}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:i,activation:o,preluActivationWeights:a}){const s=n?t.shape[2]:t.shape[1],u=r?e.shape[1]:e.shape[2],[c,,]=t.shape,l=Object(h["ai"])(t.dtype,e.dtype),f=null!=i,d=null!=a,p=o?ym(o,!0):null,g=new Tp(t.shape,[c,s,u],n,r,f,p,d),m=[t,e];return i&&m.push(i),a&&m.push(a),this.compileAndRun(g,m,l)}multiply(t,e){if("complex64"===t.dtype){const n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),i=new kf(Cf.REAL,t.shape,e.shape),o=new kf(Cf.IMAG,t.shape,e.shape),a=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag),this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)],s=this.compileAndRun(i,a),u=this.compileAndRun(o,a),c=this.complex(s,u);return s.dispose(),u.dispose(),c}if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.multiply(t,e);if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,jf,t.dtype);const n=new Xf(jf,t.shape,e.shape);return this.compileAndRun(n,[t,e],t.dtype)}batchNorm(t,e,n,r,i,o){const a=[t,e,n];let s=null;null!=r&&(s=r.shape,a.push(r));let u=null;if(null!=i&&(u=i.shape,a.push(i)),Object(h["ze"])().getBool("WEBGL_PACK_NORMALIZATION")){const r=new Sf(t.shape,e.shape,n.shape,s,u,o);return this.compileAndRun(r,a)}const c=new Of(t.shape,e.shape,n.shape,s,u,o);return this.compileAndRun(c,a)}localResponseNormalization4D(t,e,n,r,i){const o=Object(h["ze"])().getBool("WEBGL_PACK_NORMALIZATION")?new Cp(t.shape,e,n,r,i):new Op(t.shape,e,n,r,i);return this.compileAndRun(o,[t])}LRNGrad(t,e,n,r,i,o,a){const s=new Sp(e.shape,r,i,o,a);return this.compileAndRun(s,[e,n,t])}tile(t,e){if("string"===t.dtype){const n=this.readSync(t.dataId),r=n.map(t=>h["bi"].decodeString(t)),i=Object(h["Ld"])(t.shape,t.dtype,r);return hm(i,e)}const n=new hg(t.shape,e);return this.compileAndRun(n,[t])}pad(t,e,n){const r=Object(h["ze"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Pp(t.shape,e,n):new Fp(t.shape,e,n);return this.compileAndRun(r,[t])}gather(t,e,n){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.gather(t,e,n);const r=new Hd(t.shape,e.size,n);return this.compileAndRun(r,[t,e])}batchToSpaceND(t,e,n){h["bi"].assert(t.rank<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const r=e.reduce((t,e)=>t*e),i=h["Bd"].getReshaped(t.shape,e,r),o=h["Bd"].getPermuted(i.length,e.length),a=h["Bd"].getReshapedPermuted(t.shape,e,r),s=h["Bd"].getSliceBeginCoords(n,e.length),u=h["Bd"].getSliceSize(a,n,e.length);return Object(h["Uh"])(t.reshape(i),o).reshape(a).slice(s,u)}spaceToBatchND(t,e,n){h["bi"].assert(t.rank<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const r=e.reduce((t,e)=>t*e),i=[[0,0]];i.push(...n);for(let l=1+e.length;l<t.shape.length;++l)i.push([0,0]);const o=t.pad(i),a=h["Bd"].getReshaped(o.shape,e,r,!1),s=h["Bd"].getPermuted(a.length,e.length,!1),u=h["Bd"].getReshapedPermuted(o.shape,e,r,!1),c=Object(h["Uh"])(o.reshape(a),s);return Object(h["Jg"])(c,u)}reduce(t,e,n){const r=t.shape[0],i=t.shape[1],o=h["Bd"].computeOptimalWindowSize(i),a={windowSize:o,inSize:i,batchSize:r},s=new zp(a,e),u=this.compileAndRun(s,[t],n);return 1===u.shape[1]?u:this.reduce(u,e,n)}argReduce(t,e,n=null){let r=t.shape[0],i=t.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);const o=h["Bd"].computeOptimalWindowSize(i),a={windowSize:o,inSize:i,batchSize:r},s=new xh(a,e,null==n),u=[t];null!=n&&u.push(n);const c=this.compileAndRun(s,u,"int32");return 1===c.shape[1]?c:this.argReduce(t,e,c)}argReducePacked(t,e,n=null){const r=null!=n?n.shape:t.shape,i=r[r.length-1],o=h["Bd"].computeOptimalWindowSize(i),a=new xf(r,o,e,null==n),s=null==n?[t]:[t,n],u=this.compileAndRun(a,s,"int32");return u.rank===t.rank?this.argReducePacked(t,e,u):u}sum(t,e){h["Bd"].assertAxesAreInnerMostDims("sum",e,t.rank);const[n,r]=h["Bd"].computeOutAndReduceShapes(t.shape,e),i=h["bi"].sizeFromShape(r),o=t.as2D(-1,i),a=h["Dh"](t.dtype);return this.reduce(o,"sum",a).reshape(n)}prod(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,e);const[n,r]=h["Bd"].computeOutAndReduceShapes(t.shape,e),i=h["bi"].sizeFromShape(r),o=t.as2D(-1,i),a=h["Dh"](t.dtype);return this.reduce(o,"prod",a).reshape(n)}unsortedSegmentSum(t,e,n){let r=0;const i=h["Bd"].getAxesPermutation([r],t.rank);let o=t;null!=i&&(o=Object(h["Uh"])(t,i),r=h["Bd"].getInnerMostAxes(1,t.rank)[0]);const a=cm.computeOutShape(o.shape,r,n),s=h["bi"].sizeFromShape([o.shape[r]]),u=o.as2D(-1,s),c=h["Dh"](t.dtype);let l=this.segOpCompute(u,"unsortedSegmentSum",e,c,n).reshape(a);return null!=i&&(l=Object(h["Uh"])(l,h["Bd"].getUndoAxesPermutation(i))),l}segOpCompute(t,e,n,r,i){const o=t.shape[0],a=t.shape[1],s=cm.segOpComputeOptimalWindowSize(a,i),u={windowSize:s,inSize:a,batchSize:o,numSegments:i},c=new Zp(u,e),l=this.compileAndRun(c,[t,n],r);return l.shape[1]===i?l:(n=Object(h["zg"])(0,i).tile([a/s]),this.segOpCompute(l,e,n,r,i))}argMinMaxReduce(t,e,n){const r=[e];if(h["Bd"].assertAxesAreInnerMostDims("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,t.rank),!Object(h["ze"])().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){const[e,i]=h["Bd"].computeOutAndReduceShapes(t.shape,r),o=h["bi"].sizeFromShape(i),a=t.as2D(-1,o);return this.argReduce(a,n).reshape(e)}return this.argReducePacked(t,n)}argMin(t,e){return this.argMinMaxReduce(t,e,"min")}argMax(t,e){return this.argMinMaxReduce(t,e,"max")}cumsum(t,e,n,r){if(e!==t.rank-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${t.rank-1} but got axis=`+e);const i=t.shape[e];let o=t;for(let a=0;a<=Math.ceil(Math.log2(i))-1;a++){const e=new Dd(t.shape,!1,r),n=e.getCustomSetupFunc(a),i=o;o=this.compileAndRun(e,[o],o.dtype,n),i.dispose()}if(n){const e=new Dd(t.shape,n,r),i=o;o=this.compileAndRun(e,[o]),i.dispose()}return o}equal(t,e){if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,nd,"bool");const n=new Xf(If,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}notEqual(t,e){if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,rd,"bool");const n=new Xf(Rf,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}less(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.less(t,e);if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,id,"bool");const n=new Xf(Ff,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}lessEqual(t,e){if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,od,"bool");const n=new Xf(Pf,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}greater(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.greater(t,e);if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,ad,"bool");const n=new Xf($f,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}greaterEqual(t,e){if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,sd,"bool");const n=new Xf(Lf,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}logicalNot(t){const e=new dg(t.shape,Qg);return this.compileAndRun(e,[t])}logicalAnd(t,e){if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,ud,"bool");const n=new Xf(zf,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}logicalOr(t,e){if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,cd,"bool");const n=new Xf(Bf,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}select(t,e,n){const r=new Jp(t.rank,e.shape,e.rank);return this.compileAndRun(r,[t,e,n],Object(h["ai"])(e.dtype,n.dtype))}where(t){h["Bd"].warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const e=t.dataSync();return dm(t.shape,e)}topk(t,e,n){const r=t.dataSync();return fm(r,t.shape,t.dtype,e,n)}min(t,e){h["Bd"].assertAxesAreInnerMostDims("min",e,t.rank);const[n,r]=h["Bd"].computeOutAndReduceShapes(t.shape,e),i=h["bi"].sizeFromShape(r),o=t.as2D(-1,i);return this.reduce(o,"min",o.dtype).reshape(n)}minimum(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.minimum(t,e);const n=Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dd(hd,t.shape,e.shape):new Xf(Wf,t.shape,e.shape);return this.compileAndRun(n,[t,e])}mod(t,e){const n=Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dd(fd,t.shape,e.shape):new Xf(Vf,t.shape,e.shape);return this.compileAndRun(n,[t,e])}maximum(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.maximum(t,e);const n=Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dd(ld,t.shape,e.shape):new Xf(Uf,t.shape,e.shape);return this.compileAndRun(n,[t,e])}all(t,e){h["Bd"].assertAxesAreInnerMostDims("all",e,t.rank);const[n,r]=h["Bd"].computeOutAndReduceShapes(t.shape,e),i=h["bi"].sizeFromShape(r),o=t.as2D(-1,i);return this.reduce(o,"all",o.dtype).reshape(n)}any(t,e){h["Bd"].assertAxesAreInnerMostDims("any",e,t.rank);const[n,r]=h["Bd"].computeOutAndReduceShapes(t.shape,e),i=h["bi"].sizeFromShape(r),o=t.as2D(-1,i);return this.reduce(o,"any",o.dtype).reshape(n)}floorDiv(t,e){const n=Mf,r="int32";if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Zf,r);const i=new Xf(n,t.shape,e.shape);return this.compileAndRun(i,[t,e],r)}add(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,Tf);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.add(t,e);const n=Object(h["ai"])(t.dtype,e.dtype);if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Tf,n);const r=new Xf(Tf,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)}packedUnaryOp(t,e,n){const r=new sm(t.shape,e);return this.compileAndRun(r,[t],n)}packedBinaryOp(t,e,n,r,i=!1){const o=new dd(n,t.shape,e.shape,i);return this.compileAndRun(o,[t,e],r)}complexSeparableBinaryOp(t,e,n){const r=this.texData.get(t.dataId),i=this.texData.get(e.dataId),[o,a]=[[r.complexTensors.real,i.complexTensors.real],[r.complexTensors.imag,i.complexTensors.imag]].map(r=>{const[i,o]=r,a=this.makeComplexComponentTensorInfo(t,i),s=this.makeComplexComponentTensorInfo(e,o),u=new Xf(n,t.shape,e.shape);return this.compileAndRun(u,[a,s],Object(h["ai"])(i.dtype,o.dtype))}),s=this.complex(o,a);return o.dispose(),a.dispose(),s}makeComplexComponentTensorInfo(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}addN(t){if(1===t.length)return t[0];if(t.length>Object(h["ze"])().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}const e=t.map(t=>t.dtype).reduce((t,e)=>Object(h["ai"])(t,e)),n=t.map(t=>t.shape),r=Object(h["ze"])().getBool("WEBGL_PACK"),i=r?new bh(t[0].shape,n):new yh(t[0].shape,n);return this.compileAndRun(i,t,e)}subtract(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,Ef);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.subtract(t,e);const n=Object(h["ai"])(t.dtype,e.dtype);if(Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ef,t.dtype);const r=new Xf(Ef,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)}pow(t,e){const n=Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"),r=n?new dd(Jf,t.shape,e.shape):new Xf(Nf,t.shape,e.shape),i=Object(h["ai"])(t.dtype,e.dtype);return this.compileAndRun(r,[t,e],i)}ceil(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(Object(h["ze"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Og,t.dtype);const e=new dg(t.shape,Og);return this.compileAndRun(e,[t])}floor(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(Object(h["ze"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Sg,t.dtype);const e=new dg(t.shape,Sg);return this.compileAndRun(e,[t])}sign(t){const e=new dg(t.shape,Cg);return this.compileAndRun(e,[t])}isNaN(t){const e=new dg(t.shape,kg);return this.compileAndRun(e,[t],"bool")}isInf(t){const e=new dg(t.shape,Ag);return this.compileAndRun(e,[t],"bool")}isFinite(t){const e=new dg(t.shape,Tg);return this.compileAndRun(e,[t],"bool")}round(t){const e=new dg(t.shape,Eg);return this.compileAndRun(e,[t])}exp(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(Object(h["ze"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,jg,t.dtype);const e=new dg(t.shape,jg);return this.compileAndRun(e,[t])}expm1(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(Object(h["ze"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Dg,t.dtype);const e=new dg(t.shape,Dg);return this.compileAndRun(e,[t])}softmax(t,e){const n=h["bi"].parseAxisParam([e],t.shape),r=Object(h["Gf"])(t,n),i=h["Bd"].expandShapeToKeepDim(r.shape,n),o=this.subtract(t,r.reshape(i)),a=this.exp(o),s=this.sum(a,n).reshape(i);return Object(h["pe"])(a,s)}log(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(Object(h["ze"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,rm,t.dtype);const e=new dg(t.shape,Mg);return this.compileAndRun(e,[t])}log1p(t){const e=new dg(t.shape,Ng);return this.compileAndRun(e,[t])}sqrt(t){const e=new dg(t.shape,Ig);return this.compileAndRun(e,[t])}rsqrt(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);const e=new dg(t.shape,Rg);return this.compileAndRun(e,[t])}reciprocal(t){const e=new dg(t.shape,Jg);return this.compileAndRun(e,[t])}relu(t){let e;return e=Object(h["ze"])().getBool("WEBGL_PACK")?new sm(t.shape,im):new dg(t.shape,vg),this.compileAndRun(e,[t])}relu6(t){let e;return e=Object(h["ze"])().getBool("WEBGL_PACK")?new sm(t.shape,om):new dg(t.shape,yg),this.compileAndRun(e,[t])}prelu(t,e){const n=Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dd(Qf,t.shape,e.shape):new Xf(Gf,t.shape,e.shape);return this.compileAndRun(n,[t,e])}elu(t){if(Object(h["ze"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,am,t.dtype);const e=new dg(t.shape,bg);return this.compileAndRun(e,[t])}eluDer(t,e){const n=Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dd(td,t.shape,e.shape):new Xf(qf,t.shape,e.shape);return this.compileAndRun(n,[t,e])}selu(t){const e=new dg(t.shape,xg);return this.compileAndRun(e,[t])}int(t){const e=new dg(t.shape,tm);return this.compileAndRun(e,[t],"int32")}clip(t,e,n){let r;r=Object(h["ze"])().getBool("WEBGL_PACK_CLIP")?new gd(t.shape):new pd(t.shape);const i=r.getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,i)}abs(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(Object(h["ze"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,mg,t.dtype);const e=new dg(t.shape,mg);return this.compileAndRun(e,[t])}complexAbs(t){const e=this.texData.get(t.dataId),n=new md(t.shape),r=[this.makeComplexComponentTensorInfo(t,e.complexTensors.real),this.makeComplexComponentTensorInfo(t,e.complexTensors.imag)];return this.compileAndRun(n,r)}sigmoid(t){const e=new dg(t.shape,Fg);return this.compileAndRun(e,[t])}softplus(t){const e=new dg(t.shape,Pg);return this.compileAndRun(e,[t])}sin(t){const e=new dg(t.shape,$g);return this.compileAndRun(e,[t])}cos(t){const e=new dg(t.shape,Lg);return this.compileAndRun(e,[t])}tan(t){const e=new dg(t.shape,zg);return this.compileAndRun(e,[t])}asin(t){const e=new dg(t.shape,Bg);return this.compileAndRun(e,[t])}acos(t){const e=new dg(t.shape,Ug);return this.compileAndRun(e,[t])}atan(t){const e=new dg(t.shape,Wg);return this.compileAndRun(e,[t])}atan2(t,e){const n=Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dd(ed,t.shape,e.shape):new Xf(Hf,t.shape,e.shape);return this.compileAndRun(n,[t,e])}sinh(t){const e=new dg(t.shape,Vg);return this.compileAndRun(e,[t])}cosh(t){const e=new dg(t.shape,Hg);return this.compileAndRun(e,[t])}tanh(t){const e=new dg(t.shape,qg);return this.compileAndRun(e,[t])}asinh(t){const e=new dg(t.shape,Gg);return this.compileAndRun(e,[t])}acosh(t){const e=new dg(t.shape,Xg);return this.compileAndRun(e,[t])}atanh(t){const e=new dg(t.shape,Yg);return this.compileAndRun(e,[t])}erf(t){const e=new dg(t.shape,Kg);return this.compileAndRun(e,[t])}step(t,e){const n=new dg(t.shape,wg(e));return this.compileAndRun(n,[t])}conv2dByMatMul(t,e,n,r,i,o){const a=t.shape,s=this.texData.get(t.dataId),u=n.inChannels,c=a[0]*a[1]*a[2],l=n.outChannels,f="channelsLast"===n.dataFormat,d=!1,p=!1,g=(1===c||1===l)&&u>_m,m=a[2]%2!==0&&!!s.isPacked;if(g||!Object(h["ze"])().getBool("WEBGL_LAZILY_UNPACK")||!Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){const s=f?a[0]*a[1]*a[2]:a[0]*a[2]*a[3],u=this.reshape(t,[1,s,n.inChannels]),c=this.reshape(e,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:u,b:c,transposeA:d,transposeB:p,bias:r,activation:i,preluActivationWeights:o}),n.outShape)}const v=f?a[0]*a[1]*(a[2]+1):a[0]*a[2]*(a[3]+1),y={dataId:t.dataId,shape:[1,v,n.inChannels],dtype:t.dtype},b=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,h["bi"].assert(ih(s.shape,y.shape),()=>`packed reshape ${s.shape} to ${y.shape} isn't free`);const x=this.reshape(e,[1,n.inChannels,n.outChannels]),w=this.fusedBatchMatMul({a:y,b:x,transposeA:d,transposeB:p,bias:r,activation:i,preluActivationWeights:o}),_=this.texData.get(w.dataId);return h["bi"].assert(_.isPacked,()=>"batchMatMul result is expected to be packed"),s.shape=b,_.shape=n.outShape,Object(h["ye"])().makeTensorFromDataId(w.dataId,n.outShape,w.dtype)}conv2dWithIm2Row(t,e,n,r,i,o){const{filterWidth:a,filterHeight:s,inChannels:u,outWidth:c,outHeight:l,dataFormat:h}=n,f="channelsLast"===h,d=a*s*u,p=l*c,g=[d,p],m=!0,v=!1,y=t.squeeze([0]),b=e.reshape([1,d,-1]),x=new _p(g,y.shape,n),w=this.compileAndRun(x,[y]).reshape([1,g[0],g[1]]),_=null!=r,O=null!=o,S=i?ym(i,!0):null,C=new Tp(w.shape,[1,p,n.outChannels],m,v,_,S,O),k=[w,b];r&&k.push(r),O&&k.push(o);const A=this.compileAndRun(C,k);return f?A.reshape([1,l,c,n.outChannels]):A.reshape([1,n.outChannels,l,c])}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:o}){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n,r,i,o);if(Object(h["ze"])().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n,r,i,o);const a=null!=r,s=null!=o,u=i?ym(i,!1):null,c=new kd(n,a,u,s),l=[t,e];return r&&l.push(r),o&&l.push(o),this.compileAndRun(c,l)}conv2d(t,e,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(Object(h["ze"])().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);const r=new kd(n);return this.compileAndRun(r,[t,e])}conv2dDerInput(t,e,n){const r=new wd(n);return this.compileAndRun(r,[t,e])}conv2dDerFilter(t,e,n){const r=new xd(n);return this.compileAndRun(r,[t,e])}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:o}){const a=Object(h["ze"])().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels===1,s=i?ym(i,a):null,u=[t,e],c=null!=r,l=null!=o;let f;return c&&u.push(r),l&&u.push(o),a?(f=new Ed(n,c,s,l),this.compileAndRun(f,u)):(f=new Td(n,c,s,l),this.compileAndRun(f,u))}depthwiseConv2D(t,e,n){let r;return Object(h["ze"])().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels===1?(r=new Ed(n),this.compileAndRun(r,[t,e])):(r=new Td(n),this.compileAndRun(r,[t,e]))}depthwiseConv2DDerInput(t,e,n){const r=new Cd(n);return this.compileAndRun(r,[t,e])}depthwiseConv2DDerFilter(t,e,n){const r=new Sd(n);return this.compileAndRun(r,[t,e])}conv3d(t,e,n){const r=new Ad(n);return this.compileAndRun(r,[t,e])}conv3dDerInput(t,e,n){const r=new Od(n);return this.compileAndRun(r,[t,e])}conv3dDerFilter(t,e,n){const r=new _d(n);return this.compileAndRun(r,[t,e])}maxPool(t,e){const n=new $p(e,"max",!1);return this.compileAndRun(n,[t])}avgPool(t,e){const n=new $p(e,"avg",!1);return this.compileAndRun(n,[t],"float32")}maxPoolBackprop(t,e,n,r){const i=!0,o=new $p(r,"max",i),a=this.compileAndRun(o,[e]),s=new kp(r),u=this.compileAndRun(s,[t,a],e.dtype);return a.dispose(),u}avgPoolBackprop(t,e,n){const r=new wf(n);return this.compileAndRun(r,[t],e.dtype)}cast(t,e){return h["Bd"].castTensor(t,e,this)}unstack(t,e){const n=t.shape[e],r=new Array(t.rank-1);let i=0;for(let u=0;u<t.rank;u++)u!==e&&(r[i++]=t.shape[u]);const o=new Array(t.rank).fill(0),a=t.shape.slice();a[e]=1;const s=new Array(n);for(let u=0;u<s.length;u++)o[e]=u,s[u]=this.slice(t,o,a).reshape(r);return s}avgPool3d(t,e){const n=new Lp(e,"avg",!1);return this.compileAndRun(n,[t],"float32")}avgPool3dBackprop(t,e,n){const r=new _f(n);return this.compileAndRun(r,[t],e.dtype)}maxPool3d(t,e){const n=new Lp(e,"max",!1);return this.compileAndRun(n,[t],"float32")}maxPool3dBackprop(t,e,n,r){const i=!0,o=new Lp(r,"max",i),a=this.compileAndRun(o,[e]),s=new Ap(r),u=this.compileAndRun(s,[t,a],e.dtype);return a.dispose(),u}reshape(t,e){const n=this.texData.get(t.dataId);if(n.isPacked&&!ih(t.shape,e)&&(null===n.texture||!ih(n.shape,e))){const n=this.packedReshape(t,e);return Object(h["ye"])().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}return h["Bd"].reshapeTensor(t,e)}resizeBilinear(t,e,n,r){const i=Object(h["ze"])().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Hp(t.shape,e,n,r):new Vp(t.shape,e,n,r);return this.compileAndRun(i,[t],"float32")}resizeBilinearBackprop(t,e,n){const r=new Wp(t,e,n);return this.compileAndRun(r,[t])}resizeNearestNeighbor(t,e,n,r){const i=new Gp(t.shape,e,n,r);return this.compileAndRun(i,[t])}resizeNearestNeighborBackprop(t,e,n){const r=new qp(t,e,n);return this.compileAndRun(r,[t])}multinomial(t,e,n,r){const i=e?t:Object(h["mh"])(t),o=i.shape[0],a=i.shape[1],s=new Ep(o,a,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[i],"int32",u)}oneHot(t,e,n,r){const i=new jp(t.size,e,n,r);return this.compileAndRun(i,[t])}diag(t){const e=new Pd(t.size);return this.compileAndRun(e,[t])}cropAndResize(t,e,n,r,i,o){const a=new jd(t.shape,e.shape,r,i,o);return this.compileAndRun(a,[t,e,n],"float32")}depthToSpace(t,e,n){h["bi"].assert(e>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+e);const r=t.shape[0],i="NHWC"===n?t.shape[1]:t.shape[2],o="NHWC"===n?t.shape[2]:t.shape[3],a="NHWC"===n?t.shape[3]:t.shape[1],s=i*e,u=o*e,c=a/(e*e),l="NHWC"===n?[r,s,u,c]:[r,c,s,u],f=new Fd(l,e,n);return this.compileAndRun(f,[t])}split(t,e,n){return lm(t,e,n)}scatterND(t,e,n){const{sliceRank:r,numUpdates:i,sliceSize:o,strides:a,outputSize:s}=h["Bd"].calculateShapes(e,t,n),u=[s/o,o],c=t.reshape([i,r]),l=e.reshape([i,o]);if(0===s)return h["Bd"].reshapeTensor(Object(h["Gh"])([]),n);const f=Object(h["Sg"])(0),d=new Kp(i,r,c.rank,l.rank,a,u),p=this.compileAndRun(d,[l,c,f]);return p.reshape(n)}sparseToDense(t,e,n,r){const{sliceRank:i,numUpdates:o,strides:a,outputSize:s}=h["Bd"].calculateShapes(e,t,n),u=!1,c=new Kp(o,i,t.rank,e.rank,a,[s,1],u),l=this.compileAndRun(c,[e,t,r]);return l.reshape(n)}fft(t){const e=!1;return this.fftImpl(t,e)}ifft(t){const e=!0;return this.fftImpl(t,e)}fftImpl(t,e){const n=this.texData.get(t.dataId),r=new Wd(Ud.REAL,t.shape,e),i=new Wd(Ud.IMAG,t.shape,e),o=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag)],a=this.compileAndRun(r,o),s=this.compileAndRun(i,o),u=this.complex(a,s).as2D(t.shape[0],t.shape[1]);return a.dispose(),s.dispose(),u}gatherND(t,e){const n=e.shape,r=n[n.length-1],[i,o,a,s]=h["Bd"].prepareAndValidate(t,e),u=e.reshape([o,r]),c=t.reshape([t.size/a,a]),l=new Gd(r,s,[o,a]),f=this.compileAndRun(l,[c,u]);return f.reshape(i)}fill(t,e,n){if(n=n||h["bi"].inferDtype(e),"string"===n){const r=h["bi"].getArrayFromDType(n,h["bi"].sizeFromShape(t));return r.fill(e),Object(h["ye"])().makeTensor(r,t,n,this)}{const r=new Vd(t,e),i=r.getCustomSetupFunc(e);return this.compileAndRun(r,[],n,i)}}onesLike(t){if("string"===t.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)}zerosLike(t){return this.fill(t.shape,"string"===t.dtype?"":0,t.dtype)}linspace(t,e,n){return h["Bd"].linspaceImpl(t,e,n)}makeTensorInfo(t,e){const n=this.write(null,t,e);return this.texData.get(n).usage=null,{dataId:n,shape:t,dtype:e}}makeOutput(t,e){const{dataId:n}=this.makeTensorInfo(t,e);return Object(h["ye"])().makeTensorFromDataId(n,t,e,this)}unpackTensor(t){const e=new um(t.shape);return this.runWebGLProgram(e,[t],t.dtype)}packTensor(t){const e=new Dp(t.shape),n=!0;return this.runWebGLProgram(e,[t],t.dtype,null,n)}packedReshape(t,e){const n=[Ql(t.shape),...th(t.shape)],r={dtype:t.dtype,shape:n,dataId:t.dataId},i=[Ql(e),...th(e)],o=new Bp(i,n),a=!0,s=this.runWebGLProgram(o,[r],t.dtype,null,a);return{dataId:s.dataId,shape:e,dtype:s.dtype}}decode(t){const e=this.texData.get(t),{isPacked:n,shape:r,dtype:i}=e,o=eh(r);let a;a=n?new Rd(o):new Id(o);const s=!0,u=this.runWebGLProgram(a,[{shape:o,dtype:i,dataId:t}],i,null,s);return{dtype:i,shape:r,dataId:u.dataId}}runWebGLProgram(t,e,n,r,i=!1){const o=this.makeTensorInfo(t.outputShape,n),a=this.texData.get(o.dataId);if(t.packedOutput&&(a.isPacked=!0),t.outPackingScheme===pl.DENSE){const e=bl(t.outputShape);a.texShape=e.map(t=>2*t)}if(null!=t.outTexUsage&&(a.usage=t.outTexUsage),0===h["bi"].sizeFromShape(o.shape))return a.values=h["bi"].getTypedArrayFromDType(o.dtype,0),o;const s=[],u=e.map(e=>{if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&h["bi"].sizeFromShape(e.shape)<=Object(h["ze"])().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!==!!t.packedInputs)e=n.isPacked?this.unpackTensor(e):this.packTensor(e),s.push(e),n=this.texData.get(e.dataId);else if(n.isPacked&&!ih(n.shape,e.shape)){const t=e,r=e.shape;e.shape=n.shape,e=this.packedReshape(e,r),s.push(e),n=this.texData.get(e.dataId),t.shape=r}return this.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}});this.uploadToGPU(o.dataId);const c={shape:o.shape,texData:a,isUniform:!1},l=wp(t,u,c),f=this.getAndSaveBinary(l,()=>yp(this.gpgpu,t,u,c)),d=null!=this.activeTimers;let p;if(d&&(p=this.startTimer()),xp(this.gpgpu,f,u,c,r),s.forEach(t=>this.disposeData(t.dataId)),d&&(p=this.endTimer(p),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(p)})),!Object(h["ze"])().getBool("WEBGL_LAZILY_UNPACK")&&a.isPacked&&!1===i){const t=this.unpackTensor(o);return this.disposeData(o.dataId),t}return o}compileAndRun(t,e,n,r,i=!1){n=n||e[0].dtype;const o=this.runWebGLProgram(t,e,n,r,i);return Object(h["ye"])().makeTensorFromDataId(o.dataId,o.shape,o.dtype)}getAndSaveBinary(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Object(h["ze"])().getBool("IS_TEST")){const t=Object.keys(this.binaryCache);t.forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Object(h["Ph"])(()=>{if(!Object(h["ze"])().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=Object(h["ze"])().getBool("DEBUG");Object(h["ze"])().set("DEBUG",!1);const e=this.abs(Object(h["Sg"])(1e-8)).dataSync()[0];if(Object(h["ze"])().set("DEBUG",t),e>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?pm:gm}uploadToGPU(t){const e=this.texData.get(t),{shape:n,dtype:r,values:i,texture:o,usage:a,isPacked:s}=e;if(null!=o)return;const u=null!=this.activeTimers;let c;u&&(c=h["bi"].now());let l=e.texShape;if(null==l&&(l=nh(n,s),e.texShape=l),null!=i){const t=eh(n);let o,a=l[1],f=l[0];const d=i instanceof Uint8Array;s?([a,f]=xl(l[0],l[1]),o=new Bd(t,[f,a],d)):o=new zd(t,[f,a],d);const p=this.makeTensorInfo([f,a],r);this.texData.get(p.dataId).usage=d?gl.PIXELS:gl.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(p.dataId),a,f,i);const g=!0,m=this.runWebGLProgram(o,[p],r,null,g),v=this.texData.get(m.dataId);e.texture=v.texture,e.texShape=v.texShape,e.isPacked=v.isPacked,e.usage=v.usage,this.disposeData(p.dataId),this.texData.delete(m.dataId),e.values=null,u&&(this.uploadWaitMs+=h["bi"].now()-c)}else{const t=this.acquireTexture(l,a,r,s);e.texture=t}}convertAndCacheOnCPU(t,e){const n=this.texData.get(t),{dtype:r}=n;return this.releaseGPUData(t),null!=e&&(n.values=Sm(e,r)),n.values}acquireTexture(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const t=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${t} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,e,r)}computeBytes(t,e){return t[0]*t[1]*h["bi"].bytesPerElement(e)}}function Sm(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){const n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length);for(let e=0;e<n.length;++e)n[e]=Math.round(t[e]);return n}throw new Error("Unknown dtype "+e)}
/** @license See the LICENSE file. */const Cm="2.3.0";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
h["je"].isBrowser()&&Object(h["Dg"])("webgl",()=>new Om,2);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function km(t,e,n){let r=new Xf(Df,t.shape,e.shape);Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(r=new dd(Kf,t.shape,e.shape,!0));const i=n.runWebGLProgram(r,[t,e],"float32");return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Am={kernelName:h["X"],backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{a:n,b:r}=t,i=e;return km(n,r,i)}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tm{constructor(t){this.variableNames=["Image"],this.outputShape=[];const e=t[2];this.outputShape=t,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${e} - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${e}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Em={kernelName:h["ib"],backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new Tm(n.shape),o=r.runWebGLProgram(i,[n],n.dtype);return o}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jm{constructor(t){this.variableNames=["A"];const e=Sh(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${e.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dm{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=Sh(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${e.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${e.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mm={kernelName:h["lb"],backendName:"webgl",kernelFunc:Im};let Nm;function Im(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:o}=r,a="undefined"!==typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement,[u,c]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=[c,u],f=[c,u,o];(s||a)&&(null==Nm&&(Nm=document.createElement("canvas").getContext("2d")),Nm.canvas.width=u,Nm.canvas.height=c,Nm.drawImage(i,0,0,u,c),i=Nm.canvas);const d=n.makeTensorInfo(l,"int32");n.texData.get(d.dataId).usage=gl.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);const p=Object(h["ze"])().getBool("WEBGL_PACK")?new Dm(f):new jm(f),g=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),g}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{maxImpl:Rm,transposeImpl:Fm}=l;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pm(t,e,n,r){const[i,o]=t.shape,a=h["Bd"].computeOptimalWindowSize(o),s={windowSize:a,inSize:o,batchSize:i},u=new zp(s,n),c=r.runWebGLProgram(u,[t],e);return 1===c.shape[1]?c:Pm(c,e,n,r)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $m(t,e,n){const r=[Ql(t.shape),...th(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},o=[Ql(e),...th(e)],a=new Bp(o,r),s=!0,u=n.runWebGLProgram(a,[i],t.dtype,null,s);return{dataId:u.dataId,shape:e,dtype:u.dtype}}function Lm(t,e,n){const r=n.texData.get(t.dataId);return!r.isPacked||ih(t.shape,e)||null!==r.texture&&ih(r.shape,e)?{dataId:t.dataId,shape:e,dtype:t.dtype}:$m(t,e,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zm(t,e,n,r){const i=h["bi"].sizeFromShape(e),o=h["bi"].sizeFromShape(t.shape),a=o/i,s=Lm(t,[a,i],r),u=Pm(s,t.dtype,"max",r);return s.dataId!==t.dataId&&r.disposeData(s.dataId),Lm(u,n,r)}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bm{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let o=0;o<n.length;o++)n[o]=t[e[o]];this.outputShape=n,this.rank=n.length;const r=vf(this.rank),i=Um(e);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}function Um(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wm{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(t.length);for(let c=0;c<n.length;c++)n[c]=t[e[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=vf(this.rank),i=wh("rc",this.rank),o=new Array(this.rank);for(let c=0;c<e.length;c++)o[e[c]]=i[c];const a=`vec2(${o.slice(-2).join()})`,s=`++${i[this.rank-1]} < ${n[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${u};\n      if(${s}) {\n        result[1] = ${u};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${u};\n        if(${s}) {\n          result[3] = ${u};\n        }\n      }\n      setOutput(result);\n    }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vm(t,e,n){const r=Object(h["ze"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wm(t.shape,e):new Bm(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hm={kernelName:h["Lb"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{reductionIndices:i,keepDims:o}=e,a=n,s=r.shape.length,u=h["bi"].parseAxisParam(i,r.shape);let c=u;const l=h["Bd"].getAxesPermutation(c,s),f=null!=l,d=a.shouldExecuteOnCPU([r]);let p=r;if(f){if(d){const t=a.texData.get(p.dataId),e=t.values,n=new Array(s);for(let a=0;a<n.length;a++)n[a]=r.shape[l[a]];const i=Fm(e,r.shape,r.dtype,l,n);p=a.makeTensorInfo(n,r.dtype);const o=a.texData.get(p.dataId);o.values=i}else p=Vm(r,l,a);c=h["Bd"].getInnerMostAxes(c.length,s)}h["Bd"].assertAxesAreInnerMostDims("max",c,s);const[g,m]=h["Bd"].computeOutAndReduceShapes(p.shape,c);let v,y=g;if(o&&(y=h["Bd"].expandShapeToKeepDim(g,u)),d){const t=a.texData.get(p.dataId),e=t.values,n=Rm(e,h["bi"].sizeFromShape(m),y,r.dtype);v=a.makeTensorInfo(y,r.dtype);const i=a.texData.get(v.dataId);i.values=n}else v=zm(p,m,y,a);return f&&a.disposeData(p.dataId),v}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qm(t,e,n,r){let i=new $p(n,"max",!1);const o=r.runWebGLProgram(i,[t],"float32");i=new $p(n,"max",!0,!0,e);const a=r.runWebGLProgram(i,[t],"float32");return[o,a]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gm={kernelName:h["Qb"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:o,pad:a,includeBatchInIndex:s}=e,u=n;h["bi"].assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];h["bi"].assert(h["Bd"].eitherStridesOrDilationsAreOne(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const l=h["Bd"].computePool2DInfo(r.shape,i,o,c,a),[f,d]=qm(r,s,l,u);return[f,d]}},Xm={kernelName:h["Zb"],backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{h["Bd"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:s}=n,u=e,c=u.readSync(r.dataId),l=u.readSync(i.dataId),f=o,d=a,p=s;return h["lf"].nonMaxSuppressionV3Impl(c,l,f,d,p)}},Ym=h["lf"].nonMaxSuppressionV4Impl,Km={kernelName:h["ac"],backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{h["Bd"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:s,padToMaxOutputSize:u}=n,c=e,l=c.readSync(r.dataId),f=c.readSync(i.dataId),{selectedIndices:d,validOutputs:p}=Ym(l,f,o,a,s,u);return[d,p]}},Zm=h["lf"].nonMaxSuppressionV5Impl,Jm={kernelName:h["bc"],backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{h["Bd"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:s,softNmsSigma:u}=n,c=e,l=c.readSync(r.dataId),f=c.readSync(i.dataId),d=o,p=a,g=s,m=u,{selectedIndices:v,selectedScores:y}=Zm(l,f,d,p,g,m);return[v,y]}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Qm{constructor(t,e,n,r){this.variableNames=["Image"],this.outputShape=[];const i=t[1],o=t[2],a=Math.sin(e).toFixed(3),s=Math.cos(e).toFixed(3);this.outputShape=t;const[u,c]=h["Bd"].getImageCenter(r,i,o),l=u.toFixed(3),f=c.toFixed(3);let d="";d="number"===typeof n?`float outputValue = ${n.toFixed(2)};`:`\n        vec3 fill = vec3(${n.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ${l}) * ${s} - (float(y) - ${f}) * ${a};\n          float coordYFloat = (float(x) - ${l}) * ${a} + (float(y) - ${f}) * ${s};\n          int coordX = int(round(coordXFloat + ${l}));\n          int coordY = int(round(coordYFloat + ${f}));\n          ${d}\n          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${i}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tv={kernelName:h["zc"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:o,center:a}=e,s=n,u=new Qm(r.shape,i,o,a),c=s.runWebGLProgram(u,[r],r.dtype);return c}},ev={kernelName:h["Rc"],backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e,i=new dg(n.shape,Zg);return r.runWebGLProgram(i,[n],n.dtype)}},nv={kernelName:h["Sc"],backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{a:n,b:r}=t,i="return (a - b) * (a - b);",o=e,a=Object(h["ze"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new dd(i,n.shape,r.shape):new Xf(i,n.shape,r.shape);return o.compileAndRun(a,[n,r])}},rv={kernelName:h["dd"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{perm:i}=e,o=n,a=r.shape.length,s=new Array(a);for(let c=0;c<s.length;c++)s[c]=r.shape[i[c]];let u;if(o.shouldExecuteOnCPU([r])){const t=o.texData.get(r.dataId),e=t.values,n=Fm(e,r.shape,r.dtype,i,s);u=o.makeTensorInfo(s,r.dtype);const a=o.texData.get(u.dataId);a.values=n}else u=Vm(r,i,o);return u}},iv=[Hm,Em,Mm,Am,Gm,Xm,Km,Jm,tv,ev,nv,rv];
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */for(const sv of iv)Object(h["Fg"])(sv);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/** @license See the LICENSE file. */const ov="2.3.0",av={"tfjs-core":h["gi"],"tfjs-backend-cpu":$c,"tfjs-backend-webgl":Cm,"tfjs-data":Ac,"tfjs-layers":pr,"tfjs-converter":Xu,tfjs:ov};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */},ce1a4:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(n("7ad3")),a=n("1309"),s=n("6180"),u=n("8e47");function c(t,e,n={}){return r(this,void 0,void 0,(function*(){const r=Array.isArray(e.values[0])?e.values:[e.values],i=r[0].length,c=e.series?e.series:r.map((t,e)=>"Series "+(e+1));s.assert(c.length===r.length,"Must have an equal number of series labels as there are data series"),null!=n.seriesColors&&s.assert(n.seriesColors.length===r.length,"Must have an equal number of series colors as there are data series");const h=[];for(let t=0;t<i;t++){const e={x:t};c.forEach((n,i)=>{const o=r[i][t].y;e[n]=o,e[n+"-name"]=n}),h.push(e)}const f=Object.assign({},l,n),d=()=>f.zoomToFit?{zero:!1}:null!=f.yAxisDomain?{domain:f.yAxisDomain}:void 0,p={x:{field:"x",type:f.xType,title:f.xLabel},tooltip:[{field:"x",type:"quantitative"},...c.map(t=>({field:t,type:"quantitative"}))]},g=c.map(t=>({data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:t,type:f.yType,title:f.yLabel,scale:d()},color:{field:t+"-name",type:"nominal",legend:{values:c,title:null},scale:{range:f.seriesColors}}}})),m={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},v=u.getDrawArea(t),y={width:f.width||a.getDefaultWidth(v),height:f.height||a.getDefaultHeight(v),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:f.fontSize,titleFontSize:f.fontSize},text:{fontSize:f.fontSize},legend:{labelFontSize:f.fontSize,titleFontSize:f.fontSize}},data:{values:h},encoding:p,layer:[...g,m]},b={actions:!1,mode:"vega-lite",defaultStyle:!1};return yield o.default(v,y,b),Promise.resolve()}))}e.linechart=c;const l={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},ce4e:function(t,e,n){var r=n("da84"),i=n("9112");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},cf7e:function(t,e,n){var r=n("6d8b");function i(t){return this._axes[t]}var o=function(t){this._axes={},this._dimList=[],this.name=t||""};o.prototype={constructor:o,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return r.map(this._dimList,i,this)},getAxesByScale:function(t){return t=t.toLowerCase(),r.filter(this.getAxes(),(function(e){return e.scale.type===t}))},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,r=t instanceof Array?[]:{},i=0;i<n.length;i++){var o=n[i],a=this._axes[o];r[o]=a[e](t[o])}return r}};var a=o;t.exports=a},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("428f"),i=n("da84"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},d15d:function(t,e,n){var r=n("6d8b"),i=r.createHashMap,o=r.each;function a(t){var e=i();t.eachSeries((function(t){var n=t.get("stack");if(n){var r=e.get(n)||e.set(n,[]),i=t.getData(),o={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:t};if(!o.stackedDimension||!o.isStackedByIndex&&!o.stackedByDimension)return;r.length&&i.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(o)}})),e.each(s)}function s(t){o(t,(function(e,n){var r=[],i=[NaN,NaN],o=[e.stackResultDimension,e.stackedOverDimension],a=e.data,s=e.isStackedByIndex,u=a.map(o,(function(o,u,c){var l,h,f=a.get(e.stackedDimension,c);if(isNaN(f))return i;s?h=a.getRawIndex(c):l=a.get(e.stackedByDimension,c);for(var d=NaN,p=n-1;p>=0;p--){var g=t[p];if(s||(h=g.data.rawIndexOf(g.stackedByDimension,l)),h>=0){var m=g.data.getByRawIndex(g.stackResultDimension,h);if(f>=0&&m>0||f<=0&&m<0){f+=m,d=m;break}}}return r[0]=f,r[1]=d,r}));a.hostModel.setData(u),e.data=u}))}t.exports=a},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},d260:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("6e78"),i=a(r),o=n("da67");a(o);function a(t){return t&&t.__esModule?t:{default:t}}var s=i.default.isUnitlessNumber;function u(t,e,n){var r=null==e||"boolean"===typeof e||""===e;if(r)return"";var i=isNaN(e);if(i||0===e||s.hasOwnProperty(t)&&s[t])return""+e;"string"===typeof e&&(e=e.trim());return e+"px"}e.default=u},d28b:function(t,e,n){var r=n("746f");r("iterator")},d2bb:function(t,e,n){var r=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},d2cf:function(t,e,n){var r=n("6d8b"),i=n("401b"),o=n("cb6d"),a=n("1fab"),s=n("607d"),u=n("0b44"),c="silent";function l(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:h}}function h(){s.stop(this.event)}function f(){}f.prototype.dispose=function(){};var d=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],p=function(t,e,n,r){a.call(this),this.storage=t,this.painter=e,this.painterRoot=r,n=n||new f,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,o.call(this),this.setHandlerProxy(n)};function g(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){var r,i=t;while(i){if(i.clipPath&&!i.clipPath.contain(e,n))return!1;i.silent&&(r=!0),i=i.parent}return!r||c}return!1}function m(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}p.prototype={constructor:p,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(r.each(d,(function(e){t.on&&t.on(e,this[e],this)}),this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,n=t.zrY,r=m(this,e,n),i=this._hovered,o=i.target;o&&!o.__zr&&(i=this.findHover(i.x,i.y),o=i.target);var a=this._hovered=r?{x:e,y:n}:this.findHover(e,n),s=a.target,u=this.proxy;u.setCursor&&u.setCursor(s?s.cursor:"default"),o&&s!==o&&this.dispatchToElement(i,"mouseout",t),this.dispatchToElement(a,"mousemove",t),s&&s!==o&&this.dispatchToElement(a,"mouseover",t)},mouseout:function(t){var e=t.zrEventControl,n=t.zrIsToLocalDOM;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&!n&&this.trigger("globalout",{type:"globalout",event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){t=t||{};var r=t.target;if(!r||!r.silent){var i="on"+e,o=l(e,t,n);while(r)if(r[i]&&(o.cancelBubble=r[i].call(r,o)),r.trigger(e,o),r=r.parent,o.cancelBubble)break;o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer((function(t){"function"===typeof t[i]&&t[i].call(t,o),t.trigger&&t.trigger(e,o)})))}},findHover:function(t,e,n){for(var r=this.storage.getDisplayList(),i={x:t,y:e},o=r.length-1;o>=0;o--){var a;if(r[o]!==n&&!r[o].ignore&&(a=g(r[o],t,e))&&(!i.topTarget&&(i.topTarget=r[o]),a!==c)){i.target=r[o];break}}return i},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new u);var n=this._gestureMgr;"start"===e&&n.clear();var r=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),r){var i=r.type;t.gestureEvent=i,this.dispatchToElement({target:r.target},i,r.event)}}},r.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(t){p.prototype[t]=function(e){var n,r,o=e.zrX,a=e.zrY,s=m(this,o,a);if("mouseup"===t&&s||(n=this.findHover(o,a),r=n.target),"mousedown"===t)this._downEl=r,this._downPoint=[e.zrX,e.zrY],this._upEl=r;else if("mouseup"===t)this._upEl=r;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||i.dist(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}})),r.mixin(p,a),r.mixin(p,o);var v=p;t.exports=v},d2ef:function(t,e,n){const r=n("a236"),i=(t,e)=>{const n=r(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};t.exports=i},d303:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r={};function i(t,e){const n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};r[t]=n}function o(t){return r[t]}function a(t){delete r[t]}},d3b7:function(t,e,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(t,e,n){var r=n("9bf2").f,i=n("5135"),o=n("b622"),a=o("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},d498:function(t,e,n){var r=n("cbe5"),i=n("4fac"),o=r.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){i.buildPath(t,e,!1)}});t.exports=o},d4c6:function(t,e,n){var r=n("cbe5"),i=r.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},buildPath:function(t,e){for(var n=e.paths||[],r=0;r<n.length;r++)n[r].buildPath(t,n[r].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),r.prototype.getBoundingRect.call(this)}});t.exports=i},d4ec:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},d51b:function(t,e){var n=function(){this.head=null,this.tail=null,this._len=0},r=n.prototype;r.insert=function(t){var e=new i(t);return this.insertEntry(e),e},r.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},r.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},r.len=function(){return this._len},r.clear=function(){this.head=this.tail=null,this._len=0};var i=function(t){this.value=t,this.next,this.prev},o=function(t){this._list=new n,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},a=o.prototype;a.put=function(t,e){var n=this._list,r=this._map,o=null;if(null==r[t]){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var u=n.head;n.remove(u),delete r[u.key],o=u.value,this._lastRemovedEntry=u}s?s.value=e:s=new i(e),s.key=t,n.insertEntry(s),r[t]=s}return o},a.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},a.clear=function(){this._list.clear(),this._map={}};var s=o;t.exports=s},d556:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}]},d5b7:function(t,e,n){var r=n("de00"),i=n("1fab"),o=n("0cde"),a=n("bd6b"),s=n("6d8b"),u=function(t){o.call(this,t),i.call(this,t),a.call(this,t),this.id=t.id||r()};u.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];n||(n=this[t]=[]),n[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"===typeof t)this.attrKV(t,e);else if(s.isObject(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},s.mixin(u,a),s.mixin(u,o),s.mixin(u,i);var c=u;t.exports=c},d81d:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("1dde"),a=n("ae40"),s=o("map"),u=a("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},d833:function(t,e,n){var r=n("20c8"),i=n("9680"),o=n("e7d2"),a=n("68ab"),s=n("9f51"),u=n("857d"),c=u.normalizeRadian,l=n("4a3f"),h=n("8728"),f=r.CMD,d=2*Math.PI,p=1e-4;function g(t,e){return Math.abs(t-e)<p}var m=[-1,-1,-1],v=[-1,-1];function y(){var t=v[0];v[0]=v[1],v[1]=t}function b(t,e,n,r,i,o,a,s,u,c){if(c>e&&c>r&&c>o&&c>s||c<e&&c<r&&c<o&&c<s)return 0;var h=l.cubicRootAt(e,r,o,s,c,m);if(0===h)return 0;for(var f,d,p=0,g=-1,b=0;b<h;b++){var x=m[b],w=0===x||1===x?.5:1,_=l.cubicAt(t,n,i,a,x);_<u||(g<0&&(g=l.cubicExtrema(e,r,o,s,v),v[1]<v[0]&&g>1&&y(),f=l.cubicAt(e,r,o,s,v[0]),g>1&&(d=l.cubicAt(e,r,o,s,v[1]))),2===g?x<v[0]?p+=f<e?w:-w:x<v[1]?p+=d<f?w:-w:p+=s<d?w:-w:x<v[0]?p+=f<e?w:-w:p+=s<f?w:-w)}return p}function x(t,e,n,r,i,o,a,s){if(s>e&&s>r&&s>o||s<e&&s<r&&s<o)return 0;var u=l.quadraticRootAt(e,r,o,s,m);if(0===u)return 0;var c=l.quadraticExtremum(e,r,o);if(c>=0&&c<=1){for(var h=0,f=l.quadraticAt(e,r,o,c),d=0;d<u;d++){var p=0===m[d]||1===m[d]?.5:1,g=l.quadraticAt(t,n,i,m[d]);g<a||(m[d]<c?h+=f<e?p:-p:h+=o<f?p:-p)}return h}p=0===m[0]||1===m[0]?.5:1,g=l.quadraticAt(t,n,i,m[0]);return g<a?0:o<e?p:-p}function w(t,e,n,r,i,o,a,s){if(s-=e,s>n||s<-n)return 0;var u=Math.sqrt(n*n-s*s);m[0]=-u,m[1]=u;var l=Math.abs(r-i);if(l<1e-4)return 0;if(l%d<1e-4){r=0,i=d;var h=o?1:-1;return a>=m[0]+t&&a<=m[1]+t?h:0}if(o){u=r;r=c(i),i=c(u)}else r=c(r),i=c(i);r>i&&(i+=d);for(var f=0,p=0;p<2;p++){var g=m[p];if(g+t>a){var v=Math.atan2(s,g);h=o?1:-1;v<0&&(v=d+v),(v>=r&&v<=i||v+d>=r&&v+d<=i)&&(v>Math.PI/2&&v<1.5*Math.PI&&(h=-h),f+=h)}}return f}function _(t,e,n,r,u){for(var c=0,l=0,d=0,p=0,m=0,v=0;v<t.length;){var y=t[v++];switch(y===f.M&&v>1&&(n||(c+=h(l,d,p,m,r,u))),1===v&&(l=t[v],d=t[v+1],p=l,m=d),y){case f.M:p=t[v++],m=t[v++],l=p,d=m;break;case f.L:if(n){if(i.containStroke(l,d,t[v],t[v+1],e,r,u))return!0}else c+=h(l,d,t[v],t[v+1],r,u)||0;l=t[v++],d=t[v++];break;case f.C:if(n){if(o.containStroke(l,d,t[v++],t[v++],t[v++],t[v++],t[v],t[v+1],e,r,u))return!0}else c+=b(l,d,t[v++],t[v++],t[v++],t[v++],t[v],t[v+1],r,u)||0;l=t[v++],d=t[v++];break;case f.Q:if(n){if(a.containStroke(l,d,t[v++],t[v++],t[v],t[v+1],e,r,u))return!0}else c+=x(l,d,t[v++],t[v++],t[v],t[v+1],r,u)||0;l=t[v++],d=t[v++];break;case f.A:var _=t[v++],O=t[v++],S=t[v++],C=t[v++],k=t[v++],A=t[v++];v+=1;var T=1-t[v++],E=Math.cos(k)*S+_,j=Math.sin(k)*C+O;v>1?c+=h(l,d,E,j,r,u):(p=E,m=j);var D=(r-_)*C/S+_;if(n){if(s.containStroke(_,O,C,k,k+A,T,e,D,u))return!0}else c+=w(_,O,C,k,k+A,T,D,u);l=Math.cos(k+A)*S+_,d=Math.sin(k+A)*C+O;break;case f.R:p=l=t[v++],m=d=t[v++];var M=t[v++],N=t[v++];E=p+M,j=m+N;if(n){if(i.containStroke(p,m,E,m,e,r,u)||i.containStroke(E,m,E,j,e,r,u)||i.containStroke(E,j,p,j,e,r,u)||i.containStroke(p,j,p,m,e,r,u))return!0}else c+=h(E,m,E,j,r,u),c+=h(p,j,p,m,r,u);break;case f.Z:if(n){if(i.containStroke(l,d,p,m,e,r,u))return!0}else c+=h(l,d,p,m,r,u);l=p,d=m;break}}return n||g(d,m)||(c+=h(l,d,p,m,r,u)||0),0!==c}function O(t,e,n){return _(t,0,!1,e,n)}function S(t,e,n,r){return _(t,e,!0,n,r)}e.contain=O,e.containStroke=S},d8a1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=n("b14b"),i=o(r);function o(t){return t&&t.__esModule?t:{default:t}}var a=["-webkit-",""];function s(t,e){if("string"===typeof e&&!(0,i.default)(e)&&e.indexOf("image-set(")>-1)return a.map((function(t){return e.replace(/image-set\(/g,t+"image-set(")}))}t.exports=e["default"]},d9fc:function(t,e,n){var r=n("cbe5"),i=r.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}});t.exports=i},da67:function(t,e,n){"use strict";var r=n("a211"),i=r;t.exports=i},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n("c8ba"))},dac4:function(t,e,n){},dad4:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("8756"),o=n("8e47"),a=n("4149");function s(t,e){return r(this,void 0,void 0,(function*(){const n=o.getDrawArea(t),r=yield a.tensorStats(e),s=yield e.data();i.histogram(n,s,{height:150,stats:r})}))}e.valuesDistribution=s},dbf3:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},dc14:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a}));var r=n("fa11"),i=n("c388"),o=n("4cfc");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
class a extends i["a"]{decodeUTF8(){return new s(this)}}class s extends o["a"]{constructor(t){super(),this.upstream=t,this.impl=new u(t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class u extends i["b"]{constructor(t){if(super(),this.upstream=t,Object(r["ze"])().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:t}=n(7);this.decoder=new t("utf8")}}summary(){return this.upstream.summary()+" -> Utf8"}async pump(){const e=await this.upstream.next();let n,i;return!e.done&&(n=e.value,i=Object(r["ze"])().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(t.from(n.buffer)),this.outputQueue.push(i),!0)}}}).call(this,n("b639").Buffer)},dc2f:function(t,e){var n=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};n.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var r=n;t.exports=r},ddb0:function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("e260"),a=n("9112"),s=n("b622"),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var h in i){var f=r[h],d=f&&f.prototype;if(d){if(d[u]!==l)try{a(d,u,l)}catch(g){d[u]=l}if(d[c]||a(d,c,h),i[h])for(var p in o)if(d[p]!==o[p])try{a(d,p,o[p])}catch(g){d[p]=o[p]}}}},dded:function(t,e,n){var r=n("6d8b"),i=n("42e5"),o=function(t,e,n,r,o){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=o||!1,i.call(this,r)};o.prototype={constructor:o},r.inherits(o,i);var a=o;t.exports=a},de00:function(t,e){var n=2311;function r(){return n++}t.exports=r},de1c:function(t,e){var n={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}};t.exports=n},de20:function(t){t.exports=JSON.parse('{"name":"vega-tooltip","version":"0.23.2","description":"A tooltip plugin for Vega-Lite and Vega visualizations.","main":"build/vega-tooltip.js","module":"build/src/index.js","unpkg":"build/vega-tooltip.min.js","jsdelivr":"build/vega-tooltip.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-tooltip.git"},"keywords":["vega-lite","vega","tooltip"],"author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"collaborators":["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-tooltip/issues"},"homepage":"https://github.com/vega/vega-tooltip#readme","scripts":{"prepare":"beemo create-config --silent","tsc:src":"tsc -b tsconfig.src.json","build":"yarn tsc:src && rollup -c","clean":"rm -rf build examples/data && rm -f src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","postbuild":"terser build/vega-tooltip.js -c -m -o build/vega-tooltip.min.js","prebuild":"mkdir -p build && yarn copy:data && ./build-style.sh","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'browser-sync start -s -f build examples --serveStatic examples\' \'yarn tsc:src -w\' \'rollup -c -w\'","pretest":"./build-style.sh","test":"jest"},"devDependencies":{"@rollup/plugin-commonjs":"13.0.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^8.1.0","@types/jest":"^26.0.4","browser-sync":"^2.26.7","codecov":"^3.7.0","concurrently":"^5.2.0","gh-pages":"^3.1.0","jest":"^26.1.0","node-sass":"^4.14.1","path":"^0.12.7","rollup":"^2.21.0","terser":"^4.8.0","ts-jest":"^26.1.1","typescript":"^3.9.6","vega-datasets":"^2.1.0","vega-lite-dev-config":"^0.11.8","vega-typings":"^0.18.0"},"dependencies":{"vega-util":"^1.14.1"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]},"jest":{"testURL":"http://localhost/","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["node_modules","<rootDir>/build","src"]}}')},df37:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(n("7ad3")),a=n("1309"),s=n("8e47");function u(t,e,n={}){return r(this,void 0,void 0,(function*(){const r=Object.assign({},c,n),i=s.getDrawArea(t),u=[],l=e.values,h=e.tickLabels||[],f=0===h.length;let d=!0;for(let t=0;t<l.length;t++){const e=f?"Class "+t:h[t];f&&h.push(e);for(let n=0;n<l[t].length;n++){const i=f?"Class "+n:h[n],o=l[t][n];t!==n||r.shadeDiagonal?(u.push({label:e,prediction:i,count:o,scaleCount:o}),0!==o&&(d=!1)):u.push({label:e,prediction:i,count:o,noFill:!0})}}if(!r.shadeDiagonal&&d)for(const t of u)!0===t.noFill&&(t.noFill=!1,t.scaleCount=t.count);const p={actions:!1,mode:"vega-lite",defaultStyle:!1},g={width:r.width||a.getDefaultWidth(i),height:r.height||a.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},text:{fontSize:r.fontSize},legend:{labelFontSize:r.fontSize,titleFontSize:r.fontSize}},data:{values:u},encoding:{x:{field:"prediction",type:"ordinal",title:r.xLabel||"prediction",scale:{domain:h}},y:{field:"label",type:"ordinal",title:r.yLabel||"label",scale:{domain:h}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:r.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]};!1===r.shadeDiagonal&&g.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),r.showTextOverlay&&g.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}});const m="string"===typeof r.colorMap?{scheme:r.colorMap}:r.colorMap;g.layer[0].encoding.color.scale.range=m,yield o.default(i,g,p)}))}e.confusionMatrix=u;const c={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]}},df45:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r={value:function(){}};function i(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function a(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function s(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function u(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}o.prototype=i.prototype={constructor:o,on:function(t,e){var n,r=this._,i=a(t+"",r),o=-1,c=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++o<c)if(n=(t=i[o]).type)r[n]=u(r[n],t.name,e);else if(null==e)for(n in r)r[n]=u(r[n],t.name,null);return this}while(++o<c)if((n=(t=i[o]).type)&&(n=s(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new o(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var c=i},df75:function(t,e,n){var r=n("ca84"),i=n("7839");t.exports=Object.keys||function(t){return r(t,i)}},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),a="/"===o(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&a&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),47===e){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},e01a:function(t,e,n){"use strict";var r=n("23e7"),i=n("83ab"),o=n("da84"),a=n("5135"),s=n("861d"),u=n("9bf2").f,c=n("e893"),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new l(t):void 0===t?l():l(t);return""===t&&(h[e]=!0),e};c(f,l);var d=f.prototype=l.prototype;d.constructor=f;var p=d.toString,g="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;u(d,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(a(h,t))return"";var n=g?e.slice(7,-1):e.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},e073:function(t,e,n){var r=n("6d8b"),i=n("e86a"),o=n("e0d3"),a=o.makeInner,s=n("697e"),u=s.makeLabelFormatter,c=s.getOptionCategoryInterval,l=s.shouldShowAllLabels,h=a();function f(t){return"category"===t.type?p(t):v(t)}function d(t,e){return"category"===t.type?m(t,e):{ticks:t.scale.getTicks()}}function p(t){var e=t.getLabelModel(),n=g(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function g(t,e){var n,i,o=y(t,"labels"),a=c(e),s=b(o,a);return s||(r.isFunction(a)?n=C(t,a):(i="auto"===a?w(t):a,n=S(t,i)),x(o,a,{labels:n,labelCategoryInterval:i}))}function m(t,e){var n,i,o=y(t,"ticks"),a=c(e),s=b(o,a);if(s)return s;if(e.get("show")&&!t.scale.isBlank()||(n=[]),r.isFunction(a))n=C(t,a,!0);else if("auto"===a){var u=g(t,t.getLabelModel());i=u.labelCategoryInterval,n=r.map(u.labels,(function(t){return t.tickValue}))}else i=a,n=S(t,i,!0);return x(o,a,{ticks:n,tickCategoryInterval:i})}function v(t){var e=t.scale.getTicks(),n=u(t);return{labels:r.map(e,(function(e,r){return{formattedLabel:n(e,r),rawLabel:t.scale.getLabel(e),tickValue:e}}))}}function y(t,e){return h(t)[e]||(h(t)[e]=[])}function b(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function x(t,e,n){return t.push({key:e,value:n}),n}function w(t){var e=h(t).autoInterval;return null!=e?e:h(t).autoInterval=t.calculateCategoryInterval()}function _(t){var e=O(t),n=u(t),r=(e.axisRotate-e.labelRotate)/180*Math.PI,o=t.scale,a=o.getExtent(),s=o.count();if(a[1]-a[0]<1)return 0;var c=1;s>40&&(c=Math.max(1,Math.floor(s/40)));for(var l=a[0],f=t.dataToCoord(l+1)-t.dataToCoord(l),d=Math.abs(f*Math.cos(r)),p=Math.abs(f*Math.sin(r)),g=0,m=0;l<=a[1];l+=c){var v=0,y=0,b=i.getBoundingRect(n(l),e.font,"center","top");v=1.3*b.width,y=1.3*b.height,g=Math.max(g,v,7),m=Math.max(m,y,7)}var x=g/d,w=m/p;isNaN(x)&&(x=1/0),isNaN(w)&&(w=1/0);var _=Math.max(0,Math.floor(Math.min(x,w))),S=h(t.model),C=t.getExtent(),k=S.lastAutoInterval,A=S.lastTickCount;return null!=k&&null!=A&&Math.abs(k-_)<=1&&Math.abs(A-s)<=1&&k>_&&S.axisExtend0===C[0]&&S.axisExtend1===C[1]?_=k:(S.lastTickCount=s,S.lastAutoInterval=_,S.axisExtend0=C[0],S.axisExtend1=C[1]),_}function O(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function S(t,e,n){var r=u(t),i=t.scale,o=i.getExtent(),a=t.getLabelModel(),s=[],c=Math.max((e||0)+1,1),h=o[0],f=i.count();0!==h&&c>1&&f/c>2&&(h=Math.round(Math.ceil(h/c)*c));var d=l(t),p=a.get("showMinLabel")||d,g=a.get("showMaxLabel")||d;p&&h!==o[0]&&v(o[0]);for(var m=h;m<=o[1];m+=c)v(m);function v(t){s.push(n?t:{formattedLabel:r(t),rawLabel:i.getLabel(t),tickValue:t})}return g&&m-c!==o[1]&&v(o[1]),s}function C(t,e,n){var i=t.scale,o=u(t),a=[];return r.each(i.getTicks(),(function(t){var r=i.getLabel(t);e(t,r)&&a.push(n?t:{formattedLabel:o(t),rawLabel:r,tickValue:t})})),a}e.createAxisLabels=f,e.createAxisTicks=d,e.calculateCategoryInterval=_},e0d3:function(t,e,n){var r=n("6d8b"),i=n("22d1"),o=r.each,a=r.isObject,s=r.isArray,u="series\0";function c(t){return t instanceof Array?t:null==t?[]:[t]}function l(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var r=0,i=n.length;r<i;r++){var o=n[r];!t.emphasis[e].hasOwnProperty(o)&&t[e].hasOwnProperty(o)&&(t.emphasis[e][o]=t[e][o])}}}var h=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function f(t){return!a(t)||s(t)||t instanceof Date?t:t.value}function d(t){return a(t)&&!(t instanceof Array)}function p(t,e){e=(e||[]).slice();var n=r.map(t||[],(function(t,e){return{exist:t}}));return o(e,(function(t,r){if(a(t)){for(var i=0;i<n.length;i++)if(!n[i].option&&null!=t.id&&n[i].exist.id===t.id+"")return n[i].option=t,void(e[r]=null);for(i=0;i<n.length;i++){var o=n[i].exist;if(!n[i].option&&(null==o.id||null==t.id)&&null!=t.name&&!v(t)&&!v(o)&&o.name===t.name+"")return n[i].option=t,void(e[r]=null)}}})),o(e,(function(t,e){if(a(t)){for(var r=0;r<n.length;r++){var i=n[r].exist;if(!n[r].option&&!v(i)&&null==t.id){n[r].option=t;break}}r>=n.length&&n.push({option:t})}})),n}function g(t){var e=r.createHashMap();o(t,(function(t,n){var r=t.exist;r&&e.set(r.id,t)})),o(t,(function(t,n){var i=t.option;r.assert(!i||null==i.id||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&e.set(i.id,t),!t.keyInfo&&(t.keyInfo={})})),o(t,(function(t,n){var r=t.exist,i=t.option,o=t.keyInfo;if(a(i)){if(o.name=null!=i.name?i.name+"":r?r.name:u+n,r)o.id=r.id;else if(null!=i.id)o.id=i.id+"";else{var s=0;do{o.id="\0"+o.name+"\0"+s++}while(e.get(o.id))}e.set(o.id,t)}}))}function m(t){var e=t.name;return!(!e||!e.indexOf(u))}function v(t){return a(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}function y(t,e){var n={},r={};return i(t||[],n),i(e||[],r,n),[o(n),o(r)];function i(t,e,n){for(var r=0,i=t.length;r<i;r++)for(var o=t[r].seriesId,a=c(t[r].dataIndex),s=n&&n[o],u=0,l=a.length;u<l;u++){var h=a[u];s&&s[h]?s[h]=null:(e[o]||(e[o]={}))[h]=1}}function o(t,e){var n=[];for(var r in t)if(t.hasOwnProperty(r)&&null!=t[r])if(e)n.push(+r);else{var i=o(t[r],!0);i.length&&n.push({seriesId:r,dataIndex:i})}return n}}function b(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?r.isArray(e.dataIndex)?r.map(e.dataIndex,(function(e){return t.indexOfRawIndex(e)})):t.indexOfRawIndex(e.dataIndex):null!=e.name?r.isArray(e.name)?r.map(e.name,(function(e){return t.indexOfName(e)})):t.indexOfName(e.name):void 0}function x(){var t="__\0ec_inner_"+w+++"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}}var w=0;function _(t,e,n){if(r.isString(e)){var i={};i[e+"Index"]=0,e=i}var a=n&&n.defaultMainType;!a||O(e,a+"Index")||O(e,a+"Id")||O(e,a+"Name")||(e[a+"Index"]=0);var s={};return o(e,(function(i,o){i=e[o];if("dataIndex"!==o&&"dataIndexInside"!==o){var a=o.match(/^(\w+)(Index|Id|Name)$/)||[],u=a[1],c=(a[2]||"").toLowerCase();if(!(!u||!c||null==i||"index"===c&&"none"===i||n&&n.includeMainTypes&&r.indexOf(n.includeMainTypes,u)<0)){var l={mainType:u};"index"===c&&"all"===i||(l[c]=i);var h=t.queryComponents(l);s[u+"Models"]=h,s[u+"Model"]=h[0]}}else s[o]=i})),s}function O(t,e){return t&&t.hasOwnProperty(e)}function S(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function C(t,e){return t.getAttribute?t.getAttribute(e):t[e]}function k(t){return"auto"===t?i.domSupported?"html":"richText":t||"html"}function A(t,e){var n=r.createHashMap(),i=[];return r.each(t,(function(t){var r=e(t);(n.get(r)||(i.push(r),n.set(r,[]))).push(t)})),{keys:i,buckets:n}}e.normalizeToArray=c,e.defaultEmphasis=l,e.TEXT_STYLE_OPTIONS=h,e.getDataItemValue=f,e.isDataItemOption=d,e.mappingToExists=p,e.makeIdAndName=g,e.isNameSpecified=m,e.isIdInner=v,e.compressBatches=y,e.queryDataIndex=b,e.makeInner=x,e.parseFinder=_,e.setAttribute=S,e.getAttribute=C,e.getTooltipRenderMode=k,e.groupData=A},e0d8:function(t,e,n){var r=n("625e");function i(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}i.prototype.parse=function(t){return t},i.prototype.getSetting=function(t){return this._setting[t]},i.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},i.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},i.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},i.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},i.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},i.prototype.getExtent=function(){return this._extent.slice()},i.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},i.prototype.isBlank=function(){return this._isBlank},i.prototype.setBlank=function(t){this._isBlank=t},i.prototype.getLabel=null,r.enableClassExtend(i),r.enableClassManagement(i,{registerWhenExtend:!0});var o=i;t.exports=o},e0fa:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("ce1a4"),o=n("8e47"),a=n("1309");function s(t,e,n,s={}){return r(this,void 0,void 0,(function*(){const r=o.getDrawArea(t),l={};for(const t of n)if(/val_/.test(t)){const r=t.replace("val_","");u(l,r);const i=c(e,t,n.indexOf(t));l[r].series.push(t),l[r].values.push(i)}else{const r=c(e,t,n.indexOf(t));u(l,t),l[t].series.push(t),l[t].values.push(r)}const h=Object.keys(l),f=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},s),d=[];for(const t of h){const e=a.subSurface(r,t),n=l[t].series,o=l[t].values;n.every(t=>Boolean(t.match("acc")))&&(f.zoomToFitAccuracy?f.zoomToFit=!0:(f.yAxisDomain=[0,1],delete f.zoomToFit));const s=i.linechart(e,{values:o,series:n},f);d.push(s)}yield Promise.all(d)}))}function u(t,e){null==t[e]&&(t[e]={series:[],values:[]})}function c(t,e,n){if(Array.isArray(t)){const r=Array.isArray(t[0])?t[n]:t,i=[];for(let t=0;t<r.length;t++){const n=r[t];i.push({x:t,y:n[e]})}return i}return t.history[e].map((t,e)=>({x:e,y:t}))}function l(t,e,n={}){const i={},u=n.callbacks||["onEpochEnd","onBatchEnd"],c=o.getDrawArea(t),l=Object.assign({},n);function f(t){return(n,u)=>r(this,void 0,void 0,(function*(){/batch/i.test(t)?l.xLabel="Batch":/epoch/i.test(t)&&(l.xLabel="Epoch");const n=[],r=[];for(const o of e)if(null!=u[o]){r.push(o);const e=h(i,t,o);e.push({[o]:u[o]}),n.push(e)}const f=a.subSurface(c,t,{title:t});s(f,n,r,l),yield o.nextFrame()}))}delete l.callbacks;const d={};return u.forEach(t=>{d[t]=f(t)}),d}function h(t,e,n){return null==t[e]&&(t[e]={}),null==t[e][n]&&(t[e][n]=[]),t[e][n]}e.history=s,e.fitCallbacks=l},e163:function(t,e,n){var r=n("5135"),i=n("7b0b"),o=n("f772"),a=n("e177"),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e1fc:function(t,e,n){var r=n("6d8b"),i=n("d5b7"),o=n("9850"),a=function(t){for(var e in t=t||{},i.call(this,t),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};a.prototype={constructor:a,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,r=n.indexOf(e);r>=0&&(n.splice(r,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof a&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,i=this._children,o=r.indexOf(i,t);return o<0||(i.splice(o,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof a&&t.delChildrenFromStorage(n)),e&&e.refresh()),this},removeAll:function(){var t,e,n=this._children,r=this.__storage;for(e=0;e<n.length;e++)t=n[e],r&&(r.delFromStorage(t),t instanceof a&&t.delChildrenFromStorage(r)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,r=0;r<n.length;r++){var i=n[r];t.call(e,i,r)}return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var r=this._children[n];t.call(e,r),"group"===r.type&&r.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof a&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof a&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new o(0,0,0,0),r=t||this._children,i=[],a=0;a<r.length;a++){var s=r[a];if(!s.ignore&&!s.invisible){var u=s.getBoundingRect(),c=s.getLocalTransform(i);c?(n.copy(u),n.applyTransform(c),e=e||n.clone(),e.union(n)):(e=e||u.clone(),e.union(u))}}return e||n}},r.inherits(a,i);var s=a;t.exports=s},e260:function(t,e,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),a=n("69f3"),s=n("7dd0"),u="Array Iterator",c=a.set,l=a.getterFor(u);t.exports=s(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},e263:function(t,e,n){var r=n("401b"),i=n("4a3f"),o=Math.min,a=Math.max,s=Math.sin,u=Math.cos,c=2*Math.PI,l=r.create(),h=r.create(),f=r.create();function d(t,e,n){if(0!==t.length){var r,i=t[0],s=i[0],u=i[0],c=i[1],l=i[1];for(r=1;r<t.length;r++)i=t[r],s=o(s,i[0]),u=a(u,i[0]),c=o(c,i[1]),l=a(l,i[1]);e[0]=s,e[1]=c,n[0]=u,n[1]=l}}function p(t,e,n,r,i,s){i[0]=o(t,n),i[1]=o(e,r),s[0]=a(t,n),s[1]=a(e,r)}var g=[],m=[];function v(t,e,n,r,s,u,c,l,h,f){var d,p=i.cubicExtrema,v=i.cubicAt,y=p(t,n,s,c,g);for(h[0]=1/0,h[1]=1/0,f[0]=-1/0,f[1]=-1/0,d=0;d<y;d++){var b=v(t,n,s,c,g[d]);h[0]=o(b,h[0]),f[0]=a(b,f[0])}for(y=p(e,r,u,l,m),d=0;d<y;d++){var x=v(e,r,u,l,m[d]);h[1]=o(x,h[1]),f[1]=a(x,f[1])}h[0]=o(t,h[0]),f[0]=a(t,f[0]),h[0]=o(c,h[0]),f[0]=a(c,f[0]),h[1]=o(e,h[1]),f[1]=a(e,f[1]),h[1]=o(l,h[1]),f[1]=a(l,f[1])}function y(t,e,n,r,s,u,c,l){var h=i.quadraticExtremum,f=i.quadraticAt,d=a(o(h(t,n,s),1),0),p=a(o(h(e,r,u),1),0),g=f(t,n,s,d),m=f(e,r,u,p);c[0]=o(t,s,g),c[1]=o(e,u,m),l[0]=a(t,s,g),l[1]=a(e,u,m)}function b(t,e,n,i,o,a,d,p,g){var m=r.min,v=r.max,y=Math.abs(o-a);if(y%c<1e-4&&y>1e-4)return p[0]=t-n,p[1]=e-i,g[0]=t+n,void(g[1]=e+i);if(l[0]=u(o)*n+t,l[1]=s(o)*i+e,h[0]=u(a)*n+t,h[1]=s(a)*i+e,m(p,l,h),v(g,l,h),o%=c,o<0&&(o+=c),a%=c,a<0&&(a+=c),o>a&&!d?a+=c:o<a&&d&&(o+=c),d){var b=a;a=o,o=b}for(var x=0;x<a;x+=Math.PI/2)x>o&&(f[0]=u(x)*n+t,f[1]=s(x)*i+e,m(p,f,p),v(g,f,g))}e.fromPoints=d,e.fromLine=p,e.fromCubic=v,e.fromQuadratic=y,e.fromArc=b},e2cc:function(t,e,n){var r=n("6eeb");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},e3db:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},e40d:function(t,e,n){},e47b:function(t,e,n){var r=n("e0d3"),i=r.makeInner,o=r.normalizeToArray,a=i();function s(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].length>e)return t[r];return t[n-1]}var u={clearColorPalette:function(){a(this).colorIdx=0,a(this).colorNameMap={}},getColorFromPalette:function(t,e,n){e=e||this;var r=a(e),i=r.colorIdx||0,u=r.colorNameMap=r.colorNameMap||{};if(u.hasOwnProperty(t))return u[t];var c=o(this.get("color",!0)),l=this.get("colorLayer",!0),h=null!=n&&l?s(l,n):c;if(h=h||c,h&&h.length){var f=h[i];return t&&(u[t]=f),r.colorIdx=(i+1)%h.length,f}}};t.exports=u},e538:function(t,e,n){var r=n("b622");e.f=r},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e6cf:function(t,e,n){"use strict";var r,i,o,a,s=n("23e7"),u=n("c430"),c=n("da84"),l=n("d066"),h=n("fea9"),f=n("6eeb"),d=n("e2cc"),p=n("d44e"),g=n("2626"),m=n("861d"),v=n("1c0b"),y=n("19aa"),b=n("c6b6"),x=n("8925"),w=n("2266"),_=n("1c7e"),O=n("4840"),S=n("2cf49").set,C=n("b575"),k=n("cdf9"),A=n("44de"),T=n("f069"),E=n("e667"),j=n("69f3"),D=n("94ca"),M=n("b622"),N=n("2d00"),I=M("species"),R="Promise",F=j.get,P=j.set,$=j.getterFor(R),L=h,z=c.TypeError,B=c.document,U=c.process,W=l("fetch"),V=T.f,H=V,q="process"==b(U),G=!!(B&&B.createEvent&&c.dispatchEvent),X="unhandledrejection",Y="rejectionhandled",K=0,Z=1,J=2,Q=1,tt=2,et=D(R,(function(){var t=x(L)!==String(L);if(!t){if(66===N)return!0;if(!q&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!L.prototype["finally"])return!0;if(N>=51&&/native code/.test(L))return!1;var e=L.resolve(1),n=function(t){t((function(){}),(function(){}))},r=e.constructor={};return r[I]=n,!(e.then((function(){}))instanceof n)})),nt=et||!_((function(t){L.all(t)["catch"]((function(){}))})),rt=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},it=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;C((function(){var i=e.value,o=e.state==Z,a=0;while(r.length>a){var s,u,c,l=r[a++],h=o?l.ok:l.fail,f=l.resolve,d=l.reject,p=l.domain;try{h?(o||(e.rejection===tt&&ut(t,e),e.rejection=Q),!0===h?s=i:(p&&p.enter(),s=h(i),p&&(p.exit(),c=!0)),s===l.promise?d(z("Promise-chain cycle")):(u=rt(s))?u.call(s,f,d):f(s)):d(i)}catch(g){p&&!c&&p.exit(),d(g)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&at(t,e)}))}},ot=function(t,e,n){var r,i;G?(r=B.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},(i=c["on"+t])?i(r):t===X&&A("Unhandled promise rejection",n)},at=function(t,e){S.call(c,(function(){var n,r=e.value,i=st(e);if(i&&(n=E((function(){q?U.emit("unhandledRejection",r,t):ot(X,t,r)})),e.rejection=q||st(e)?tt:Q,n.error))throw n.value}))},st=function(t){return t.rejection!==Q&&!t.parent},ut=function(t,e){S.call(c,(function(){q?U.emit("rejectionHandled",t):ot(Y,t,e.value)}))},ct=function(t,e,n,r){return function(i){t(e,n,i,r)}},lt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=J,it(t,e,!0))},ht=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw z("Promise can't be resolved itself");var i=rt(n);i?C((function(){var r={done:!1};try{i.call(n,ct(ht,t,r,e),ct(lt,t,r,e))}catch(o){lt(t,r,o,e)}})):(e.value=n,e.state=Z,it(t,e,!1))}catch(o){lt(t,{done:!1},o,e)}}};et&&(L=function(t){y(this,L,R),v(t),r.call(this);var e=F(this);try{t(ct(ht,this,e),ct(lt,this,e))}catch(n){lt(this,e,n)}},r=function(t){P(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:K,value:void 0})},r.prototype=d(L.prototype,{then:function(t,e){var n=$(this),r=V(O(this,L));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=q?U.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=K&&it(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=F(t);this.promise=t,this.resolve=ct(ht,t,e),this.reject=ct(lt,t,e)},T.f=V=function(t){return t===L||t===o?new i(t):H(t)},u||"function"!=typeof h||(a=h.prototype.then,f(h.prototype,"then",(function(t,e){var n=this;return new L((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof W&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return k(L,W.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:et},{Promise:L}),p(L,R,!1,!0),g(R),o=l(R),s({target:R,stat:!0,forced:et},{reject:function(t){var e=V(this);return e.reject.call(void 0,t),e.promise}}),s({target:R,stat:!0,forced:u||et},{resolve:function(t){return k(u&&this===o?L:this,t)}}),s({target:R,stat:!0,forced:nt},{all:function(t){var e=this,n=V(e),r=n.resolve,i=n.reject,o=E((function(){var n=v(e.resolve),o=[],a=0,s=1;w(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=V(e),r=n.reject,i=E((function(){var i=v(e.resolve);w(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e7aa:function(t,e,n){var r=n("2306"),i=n("c775"),o=i.getDefaultLabel;function a(t,e,n,i,a,u,c){var l=n.getModel("label"),h=n.getModel("emphasis.label");r.setLabelStyle(t,e,l,h,{labelFetcher:a,labelDataIndex:u,defaultText:o(a.getData(),u),isRectText:!0,autoColor:i}),s(t),s(e)}function s(t,e){"outside"===t.textPosition&&(t.textPosition=e)}e.setLabel=a},e7d2:function(t,e,n){var r=n("4a3f");function i(t,e,n,i,o,a,s,u,c,l,h){if(0===c)return!1;var f=c;if(h>e+f&&h>i+f&&h>a+f&&h>u+f||h<e-f&&h<i-f&&h<a-f&&h<u-f||l>t+f&&l>n+f&&l>o+f&&l>s+f||l<t-f&&l<n-f&&l<o-f&&l<s-f)return!1;var d=r.cubicProjectPoint(t,e,n,i,o,a,s,u,l,h,null);return d<=f/2}e.containStroke=i},e86a:function(t,e,n){var r=n("9850"),i=n("5e76"),o=n("6d8b"),a=o.getContext,s=o.extend,u=o.retrieve2,c=o.retrieve3,l=o.trim,h={},f=0,d=5e3,p=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,g="12px sans-serif",m={};function v(t,e){m[t]=e}function y(t,e){e=e||g;var n=t+":"+e;if(h[n])return h[n];for(var r=(t+"").split("\n"),i=0,o=0,a=r.length;o<a;o++)i=Math.max(D(r[o],e).width,i);return f>d&&(f=0,h={}),f++,h[n]=i,i}function b(t,e,n,r,i,o,a,s){return a?w(t,e,n,r,i,o,a,s):x(t,e,n,r,i,o,s)}function x(t,e,n,i,o,a,s){var u=M(t,e,o,a,s),c=y(t,e);o&&(c+=o[1]+o[3]);var l=u.outerHeight,h=_(0,c,n),f=O(0,l,i),d=new r(h,f,c,l);return d.lineHeight=u.lineHeight,d}function w(t,e,n,i,o,a,s,u){var c=N(t,{rich:s,truncate:u,font:e,textAlign:n,textPadding:o,textLineHeight:a}),l=c.outerWidth,h=c.outerHeight,f=_(0,l,n),d=O(0,h,i);return new r(f,d,l,h)}function _(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function O(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function S(t,e,n){var r=e.textPosition,i=e.textDistance,o=n.x,a=n.y;i=i||0;var s=n.height,u=n.width,c=s/2,l="left",h="top";switch(r){case"left":o-=i,a+=c,l="right",h="middle";break;case"right":o+=i+u,a+=c,h="middle";break;case"top":o+=u/2,a-=i,l="center",h="bottom";break;case"bottom":o+=u/2,a+=s+i,l="center";break;case"inside":o+=u/2,a+=c,l="center",h="middle";break;case"insideLeft":o+=i,a+=c,h="middle";break;case"insideRight":o+=u-i,a+=c,l="right",h="middle";break;case"insideTop":o+=u/2,a+=i,l="center";break;case"insideBottom":o+=u/2,a+=s-i,l="center",h="bottom";break;case"insideTopLeft":o+=i,a+=i;break;case"insideTopRight":o+=u-i,a+=i,l="right";break;case"insideBottomLeft":o+=i,a+=s-i,h="bottom";break;case"insideBottomRight":o+=u-i,a+=s-i,l="right",h="bottom";break}return t=t||{},t.x=o,t.y=a,t.textAlign=l,t.textVerticalAlign=h,t}function C(t,e,n){var r={textPosition:t,textDistance:n};return S({},r,e)}function k(t,e,n,r,i){if(!e)return"";var o=(t+"").split("\n");i=A(e,n,r,i);for(var a=0,s=o.length;a<s;a++)o[a]=T(o[a],i);return o.join("\n")}function A(t,e,n,r){r=s({},r),r.font=e;n=u(n,"...");r.maxIterations=u(r.maxIterations,2);var i=r.minChar=u(r.minChar,0);r.cnCharWidth=y("国",e);var o=r.ascCharWidth=y("a",e);r.placeholder=u(r.placeholder,"");for(var a=t=Math.max(0,t-1),c=0;c<i&&a>=o;c++)a-=o;var l=y(n,e);return l>a&&(n="",l=0),a=t-l,r.ellipsis=n,r.ellipsisWidth=l,r.contentWidth=a,r.containerWidth=t,r}function T(t,e){var n=e.containerWidth,r=e.font,i=e.contentWidth;if(!n)return"";var o=y(t,r);if(o<=n)return t;for(var a=0;;a++){if(o<=i||a>=e.maxIterations){t+=e.ellipsis;break}var s=0===a?E(t,i,e.ascCharWidth,e.cnCharWidth):o>0?Math.floor(t.length*i/o):0;t=t.substr(0,s),o=y(t,r)}return""===t&&(t=e.placeholder),t}function E(t,e,n,r){for(var i=0,o=0,a=t.length;o<a&&i<e;o++){var s=t.charCodeAt(o);i+=0<=s&&s<=127?n:r}return o}function j(t){return y("国",t)}function D(t,e){return m.measureText(t,e)}function M(t,e,n,r,i){null!=t&&(t+="");var o=u(r,j(e)),a=t?t.split("\n"):[],s=a.length*o,c=s,l=!0;if(n&&(c+=n[0]+n[2]),t&&i){l=!1;var h=i.outerHeight,f=i.outerWidth;if(null!=h&&c>h)t="",a=[];else if(null!=f)for(var d=A(f-(n?n[1]+n[3]:0),e,i.ellipsis,{minChar:i.minChar,placeholder:i.placeholder}),p=0,g=a.length;p<g;p++)a[p]=T(a[p],d)}return{lines:a,height:s,outerHeight:c,lineHeight:o,canCacheByTextString:l}}function N(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;var r,o=p.lastIndex=0;while(null!=(r=p.exec(t))){var a=r.index;a>o&&I(n,t.substring(o,a)),I(n,r[2],r[1]),o=p.lastIndex}o<t.length&&I(n,t.substring(o,t.length));var s=n.lines,l=0,h=0,f=[],d=e.textPadding,g=e.truncate,m=g&&g.outerWidth,v=g&&g.outerHeight;d&&(null!=m&&(m-=d[1]+d[3]),null!=v&&(v-=d[0]+d[2]));for(var b=0;b<s.length;b++){for(var x=s[b],w=0,_=0,O=0;O<x.tokens.length;O++){var S=x.tokens[O],C=S.styleName&&e.rich[S.styleName]||{},A=S.textPadding=C.textPadding,T=S.font=C.font||e.font,E=S.textHeight=u(C.textHeight,j(T));if(A&&(E+=A[0]+A[2]),S.height=E,S.lineHeight=c(C.textLineHeight,e.textLineHeight,E),S.textAlign=C&&C.textAlign||e.textAlign,S.textVerticalAlign=C&&C.textVerticalAlign||"middle",null!=v&&l+S.lineHeight>v)return{lines:[],width:0,height:0};S.textWidth=y(S.text,T);var D=C.textWidth,M=null==D||"auto"===D;if("string"===typeof D&&"%"===D.charAt(D.length-1))S.percentWidth=D,f.push(S),D=0;else{if(M){D=S.textWidth;var N=C.textBackgroundColor,R=N&&N.image;R&&(R=i.findExistImage(R),i.isImageReady(R)&&(D=Math.max(D,R.width*E/R.height)))}var F=A?A[1]+A[3]:0;D+=F;var P=null!=m?m-_:null;null!=P&&P<D&&(!M||P<F?(S.text="",S.textWidth=D=0):(S.text=k(S.text,P-F,T,g.ellipsis,{minChar:g.minChar}),S.textWidth=y(S.text,T),D=S.textWidth+F))}_+=S.width=D,C&&(w=Math.max(w,S.lineHeight))}x.width=_,x.lineHeight=w,l+=w,h=Math.max(h,_)}n.outerWidth=n.width=u(e.textWidth,h),n.outerHeight=n.height=u(e.textHeight,l),d&&(n.outerWidth+=d[1]+d[3],n.outerHeight+=d[0]+d[2]);for(b=0;b<f.length;b++){S=f[b];var $=S.percentWidth;S.width=parseInt($,10)/100*h}return n}function I(t,e,n){for(var r=""===e,i=e.split("\n"),o=t.lines,a=0;a<i.length;a++){var s=i[a],u={styleName:n,text:s,isLineHolder:!s&&!r};if(a)o.push({tokens:[u]});else{var c=(o[o.length-1]||(o[0]={tokens:[]})).tokens,l=c.length;1===l&&c[0].isLineHolder?c[0]=u:(s||!l||r)&&c.push(u)}}}function R(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&l(e)||t.textFont||t.font}m.measureText=function(t,e){var n=a();return n.font=e||g,n.measureText(t)},e.DEFAULT_FONT=g,e.$override=v,e.getWidth=y,e.getBoundingRect=b,e.adjustTextX=_,e.adjustTextY=O,e.calculateTextPosition=S,e.adjustTextPositionOnRect=C,e.truncateText=k,e.getLineHeight=j,e.measureText=D,e.parsePlainText=M,e.parseRichText=N,e.makeFont=R},e887:function(t,e,n){var r=n("6d8b"),i=r.each,o=n("e1fc"),a=n("8918"),s=n("625e"),u=n("e0d3"),c=n("2306"),l=n("f47d"),h=l.createTask,f=n("cccd"),d=u.makeInner(),p=f();function g(){this.group=new o,this.uid=a.getUID("viewChart"),this.renderTask=h({plan:b,reset:x}),this.renderTask.context={view:this}}g.prototype={type:"chart",init:function(t,e){},render:function(t,e,n,r){},highlight:function(t,e,n,r){y(t.getData(),r,"emphasis")},downplay:function(t,e,n,r){y(t.getData(),r,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var m=g.prototype;function v(t,e,n){if(t&&(t.trigger(e,n),t.isGroup&&!c.isHighDownDispatcher(t)))for(var r=0,i=t.childCount();r<i;r++)v(t.childAt(r),e,n)}function y(t,e,n){var r=u.queryDataIndex(t,e),o=e&&null!=e.highlightKey?c.getHighlightDigit(e.highlightKey):null;null!=r?i(u.normalizeToArray(r),(function(e){v(t.getItemGraphicEl(e),n,o)})):t.eachItemGraphicEl((function(t){v(t,n,o)}))}function b(t){return p(t.model)}function x(t){var e=t.model,n=t.ecModel,r=t.api,i=t.payload,o=e.pipelineContext.progressiveRender,a=t.view,s=i&&d(i).updateMethod,u=o?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==u&&a[u](e,n,r,i),w[u]}m.updateView=m.updateLayout=m.updateVisual=function(t,e,n,r){this.render(t,e,n,r)},s.enableClassExtend(g,["dispose"]),s.enableClassManagement(g,{registerWhenExtend:!0}),g.markUpdateMethod=function(t,e){d(t).updateMethod=e};var w={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},_=g;t.exports=_},e893:function(t,e,n){var r=n("5135"),i=n("56ef"),o=n("06cf"),a=n("9bf2");t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e95a:function(t,e,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},e9fa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var r=n("b14b"),i=o(r);function o(t){return t&&t.__esModule?t:{default:t}}var a=["-webkit-","-moz-",""],s=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;function u(t,e){if("string"===typeof e&&!(0,i.default)(e)&&s.test(e))return a.map((function(t){return t+e}))}t.exports=e["default"]},eb7e:function(t,e,n){"use strict";n.r(e),n.d(e,"shuffle",(function(){return i})),n.d(e,"clamp",(function(){return o})),n.d(e,"nearestLargerEven",(function(){return a})),n.d(e,"sum",(function(){return s})),n.d(e,"randUniform",(function(){return u})),n.d(e,"distSquared",(function(){return c})),n.d(e,"assert",(function(){return l})),n.d(e,"assertShapesMatch",(function(){return h})),n.d(e,"assertNonNull",(function(){return f})),n.d(e,"flatten",(function(){return d})),n.d(e,"sizeFromShape",(function(){return p})),n.d(e,"isScalarShape",(function(){return g})),n.d(e,"arraysEqual",(function(){return m})),n.d(e,"isInt",(function(){return v})),n.d(e,"tanh",(function(){return y})),n.d(e,"sizeToSquarishShape",(function(){return b})),n.d(e,"createShuffledIndices",(function(){return x})),n.d(e,"rightPad",(function(){return w})),n.d(e,"repeatedTry",(function(){return _})),n.d(e,"inferFromImplicitShape",(function(){return O})),n.d(e,"parseAxisParam",(function(){return S})),n.d(e,"squeezeShape",(function(){return C})),n.d(e,"getTypedArrayFromDType",(function(){return k})),n.d(e,"getArrayFromDType",(function(){return A})),n.d(e,"checkConversionForErrors",(function(){return T})),n.d(e,"isValidDtype",(function(){return E})),n.d(e,"hasEncodingLoss",(function(){return j})),n.d(e,"isTypedArray",(function(){return D})),n.d(e,"bytesPerElement",(function(){return M})),n.d(e,"bytesFromStringArray",(function(){return N})),n.d(e,"isString",(function(){return I})),n.d(e,"isBoolean",(function(){return R})),n.d(e,"isNumber",(function(){return F})),n.d(e,"inferDtype",(function(){return P})),n.d(e,"isFunction",(function(){return $})),n.d(e,"nearestDivisor",(function(){return L})),n.d(e,"computeStrides",(function(){return z})),n.d(e,"toTypedArray",(function(){return B})),n.d(e,"toNestedArray",(function(){return W})),n.d(e,"makeOnesTypedArray",(function(){return H})),n.d(e,"makeZerosTypedArray",(function(){return q})),n.d(e,"makeZerosNestedTypedArray",(function(){return G})),n.d(e,"now",(function(){return X})),n.d(e,"assertNonNegativeIntegerDimensions",(function(){return Y})),n.d(e,"fetch",(function(){return K})),n.d(e,"encodeString",(function(){return Z})),n.d(e,"decodeString",(function(){return J})),n.d(e,"locToIndex",(function(){return Q})),n.d(e,"indexToLoc",(function(){return tt}));var r=n("b333");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t){let e=t.length,n=0,r=0;while(e>0)r=Math.random()*e|0,e--,n=t[e],t[e]=t[r],t[r]=n}function o(t,e,n){return Math.max(t,Math.min(e,n))}function a(t){return t%2===0?t:t+1}function s(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function u(t,e){const n=Math.random();return e*n+(1-n)*t}function c(t,e){let n=0;for(let r=0;r<t.length;r++){const i=Number(t[r])-Number(e[r]);n+=i*i}return n}function l(t,e){if(!t)throw new Error("string"===typeof e?e:e())}function h(t,e,n=""){l(m(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function f(t){l(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function d(t,e=[],n=!1){if(null==e&&(e=[]),Array.isArray(t)||D(t)&&!n)for(let r=0;r<t.length;++r)d(t[r],e,n);else e.push(t);return e}function p(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function g(t){return 0===t.length}function m(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function v(t){return t%1===0}function y(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function b(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function x(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return i(e),e}function w(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function _(t,e=(t=>0),n){return new Promise((r,i)=>{let o=0;const a=()=>{if(t())return void r();o++;const s=e(o);null!=n&&o>=n?i():setTimeout(a,s)};a()})}function O(t,e){let n=1,r=-1;for(let o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(-1===t[o]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(t[o]<0)throw Error(`Shapes can not be < 0. Found ${t[o]} at dim ${o}`);if(-1===r){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(0===n)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function S(t,e){const n=e.length;return t=null==t?e.map((t,e)=>e):[].concat(t),l(t.every(t=>t>=-n&&t<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis `+t),l(t.every(t=>v(t)),()=>"All values in axis param must be integers but got axis "+t),t.map(t=>t<0?n+t:t)}function C(t,e){const n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,o=null==e||i?null:S(e,t).sort();let a=0;for(let s=0;s<t.length;++s){if(null!=o){if(o[a]===s&&1!==t[s])throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(null==o[a]||o[a]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),o[a]<=s&&a++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function k(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function A(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type "+t);n=new Array(e)}return n}function T(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function E(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function j(t,e){return"complex64"!==e&&(("float32"!==e||"complex64"===t)&&(("int32"!==e||"float32"===t||"complex64"===t)&&("bool"!==e||"bool"!==t)))}function D(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function M(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function N(t){if(null==t)return 0;let e=0;return t.forEach(t=>e+=t.length),e}function I(t){return"string"===typeof t||t instanceof String}function R(t){return"boolean"===typeof t}function F(t){return"number"===typeof t}function P(t){return Array.isArray(t)?P(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":F(t)?"float32":I(t)?"string":R(t)?"bool":"float32"}function $(t){return!!(t&&t.constructor&&t.call&&t.apply)}function L(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function z(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function B(t,e){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=d(t)),Object(r["c"])().getBool("DEBUG")&&T(t,e),V(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){const e=new Uint8Array(t.length);for(let n=0;n<e.length;++n)0!==Math.round(t[n])&&(e[n]=1);return e}throw new Error("Unknown data type "+e)}function U(t,e,n){const r=new Array;if(1===e.length){const i=e[0];for(let e=0;e<i;e++)r[e]=n[t+e]}else{const i=e[0],o=e.slice(1),a=o.reduce((t,e)=>t*e);for(let e=0;e<i;e++)r[e]=U(t+e*a,o,n)}return r}function W(t,e){if(0===t.length)return e[0];const n=t.reduce((t,e)=>t*e);if(0===n)return[];if(n!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}.`);return U(0,t,e)}function V(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}function H(t,e){const n=q(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function q(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function G(t,e){const n=t.reduce((t,e)=>t*e,1);if(null==e||"float32"===e)return W(t,new Float32Array(n));if("int32"===e)return W(t,new Int32Array(n));if("bool"===e)return W(t,new Uint8Array(n));throw new Error("Unknown data type "+e)}function X(){return Object(r["c"])().platform.now()}function Y(t){t.forEach(e=>{l(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function K(t,e){return Object(r["c"])().platform.fetch(t,e)}function Z(t,e="utf-8"){return e=e||"utf-8",Object(r["c"])().platform.encode(t,e)}function J(t,e="utf-8"){return e=e||"utf-8",Object(r["c"])().platform.decode(t,e)}function Q(t,e,n){if(0===e)return 0;if(1===e)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function tt(t,e,n){if(0===e)return[];if(1===e)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}},ec02:function(t,e,n){var r=n("6d8b"),i=n("84ce"),o=function(t,e,n,r,o){i.call(this,t,e,n),this.type=r||"value",this.position=o||"bottom"};o.prototype={constructor:o,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},r.inherits(o,i);var a=o;t.exports=a},ec34:function(t,e,n){var r=n("4e08"),i=(r.__DEV__,n("6d8b")),o=i.createHashMap,a=i.isString,s=i.isArray,u=i.each,c=(i.assert,n("3041")),l=c.parseXML,h=o(),f={registerMap:function(t,e,n){var r;return s(e)?r=e:e.svg?r=[{type:"svg",source:e.svg,specialAreas:e.specialAreas}]:(e.geoJson&&!e.features&&(n=e.specialAreas,e=e.geoJson),r=[{type:"geoJSON",source:e,specialAreas:n}]),u(r,(function(t){var e=t.type;"geoJson"===e&&(e=t.type="geoJSON");var n=d[e];n(t)})),h.set(t,r)},retrieveMap:function(t){return h.get(t)}},d={geoJSON:function(t){var e=t.source;t.geoJSON=a(e)?"undefined"!==typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e},svg:function(t){t.svgXML=l(t.source)}};t.exports=f},ec6f:function(t,e,n){var r=n("6d8b"),i=r.createHashMap,o=r.isTypedArray,a=n("625e"),s=a.enableClassCheck,u=n("93d0"),c=u.SOURCE_FORMAT_ORIGINAL,l=u.SERIES_LAYOUT_BY_COLUMN,h=u.SOURCE_FORMAT_UNKNOWN,f=u.SOURCE_FORMAT_TYPED_ARRAY,d=u.SOURCE_FORMAT_KEYED_COLUMNS;function p(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===d?{}:[]),this.sourceFormat=t.sourceFormat||h,this.seriesLayoutBy=t.seriesLayoutBy||l,this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&i(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}p.seriesDataToSource=function(t){return new p({data:t,sourceFormat:o(t)?f:c,fromDataset:!1})},s(p);var g=p;t.exports=g},ed21:function(t,e,n){var r=n("2cf4"),i=r.devicePixelRatio,o=n("6d8b"),a=n("4942"),s=n("9850"),u=n("04f6"),c=n("5e68"),l=n("98b7"),h=n("0da8"),f=n("22d1"),d=1e5,p=314159,g=.01,m=.001;function v(t){return parseInt(t,10)}function y(t){return!!t&&(!!t.__builtin__||"function"===typeof t.resize&&"function"===typeof t.refresh)}var b=new s(0,0,0,0),x=new s(0,0,0,0);function w(t,e,n){return b.copy(t.getBoundingRect()),t.transform&&b.applyTransform(t.transform),x.width=e,x.height=n,!b.intersect(x)}function _(t,e){if(t===e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function O(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.setTransform(e),e.beginPath(),r.buildPath(e,r.shape),e.clip(),r.restoreTransform(e)}}function S(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var C=function(t,e,n){this.type="canvas";var r=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=o.extend({},n||{}),this.dpr=n.devicePixelRatio||i,this._singleCanvas=r,this.root=t;var a=t.style;a&&(a["-webkit-tap-highlight-color"]="transparent",a["-webkit-user-select"]=a["user-select"]=a["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var s=this._zlevelList=[],u=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,r){var l=t.width,h=t.height;null!=n.width&&(l=n.width),null!=n.height&&(h=n.height),this.dpr=n.devicePixelRatio||1,t.width=l*this.dpr,t.height=h*this.dpr,this._width=l,this._height=h;var f=new c(t,this,this.dpr);f.__builtin__=!0,f.initContext(),u[p]=f,f.zlevel=p,s.push(p),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var d=this._domRoot=S(this._width,this._height);t.appendChild(d)}this._hoverlayer=null,this._hoverElements=[]};C.prototype={constructor:C,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var r=0;r<n.length;r++){var i=n[r],o=this._layers[i];if(!o.__builtin__&&o.refresh){var a=0===r?this._backgroundColor:null;o.refresh(a)}}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return n.__from=t,t.__hoverMir=n,e&&n.setStyle(e),this._hoverElements.push(n),n}},removeHover:function(t){var e=t.__hoverMir,n=this._hoverElements,r=o.indexOf(n,e);r>=0&&n.splice(r,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var r=e[n].__from;r&&(r.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){u(t,this.storage.displayableSortFunc),n||(n=this._hoverlayer=this.getLayer(d));var r={};n.ctx.save();for(var i=0;i<e;){var o=t[i],a=o.__from;a&&a.__zr?(i++,a.invisible||(o.transform=a.transform,o.invTransform=a.invTransform,o.__clipPaths=a.__clipPaths,this._doPaintEl(o,n,!0,r))):(t.splice(i,1),a.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(d)},_paintList:function(t,e,n){if(this._redrawId===n){e=e||!1,this._updateLayerStatus(t);var r=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!r){var i=this;l((function(){i._paintList(t,e,n)}))}}},_compositeManually:function(){var t=this.getLayer(p).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer((function(r){r.virtual&&t.drawImage(r.dom,0,0,e,n)}))},_doPaintList:function(t,e){for(var n=[],r=0;r<this._zlevelList.length;r++){var i=this._zlevelList[r],a=this._layers[i];a.__builtin__&&a!==this._hoverlayer&&(a.__dirty||e)&&n.push(a)}for(var s=!0,u=0;u<n.length;u++){a=n[u];var c=a.ctx,l={};c.save();var h=e?a.__startIndex:a.__drawIndex,d=!e&&a.incremental&&Date.now,p=d&&Date.now(),g=a.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(a.__startIndex===a.__endIndex)a.clear(!1,g);else if(h===a.__startIndex){var m=t[h];m.incremental&&m.notClear&&!e||a.clear(!1,g)}-1===h&&(console.error("For some unknown reason. drawIndex is -1"),h=a.__startIndex);for(var v=h;v<a.__endIndex;v++){var y=t[v];if(this._doPaintEl(y,a,e,l),y.__dirty=y.__dirtyText=!1,d){var b=Date.now()-p;if(b>15)break}}a.__drawIndex=v,a.__drawIndex<a.__endIndex&&(s=!1),l.prevElClipPaths&&c.restore(),c.restore()}return f.wxa&&o.each(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),s},_doPaintEl:function(t,e,n,r){var i=e.ctx,o=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!o||o[0]||o[3])&&(!t.culling||!w(t,this._width,this._height))){var a=t.__clipPaths,s=r.prevElClipPaths;s&&!_(a,s)||(s&&(i.restore(),r.prevElClipPaths=null,r.prevEl=null),a&&(i.save(),O(a,i),r.prevElClipPaths=a)),t.beforeBrush&&t.beforeBrush(i),t.brush(i,r.prevEl||null),r.prevEl=t,t.afterBrush&&t.afterBrush(i)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=p);var n=this._layers[t];return n||(n=new c("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?o.merge(n,this._layerConfig[t],!0):this._layerConfig[t-g]&&o.merge(n,this._layerConfig[t-g],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var n=this._layers,r=this._zlevelList,i=r.length,o=null,s=-1,u=this._domRoot;if(n[t])a("ZLevel "+t+" has been used already");else if(y(e)){if(i>0&&t>r[0]){for(s=0;s<i-1;s++)if(r[s]<t&&r[s+1]>t)break;o=n[r[s]]}if(r.splice(s+1,0,t),n[t]=e,!e.virtual)if(o){var c=o.dom;c.nextSibling?u.insertBefore(e.dom,c.nextSibling):u.appendChild(e.dom)}else u.firstChild?u.insertBefore(e.dom,u.firstChild):u.appendChild(e.dom)}else a("Layer of zlevel "+t+" is not valid")},eachLayer:function(t,e){var n,r,i=this._zlevelList;for(r=0;r<i.length;r++)n=i[r],t.call(e,this._layers[n],n)},eachBuiltinLayer:function(t,e){var n,r,i,o=this._zlevelList;for(i=0;i<o.length;i++)r=o[i],n=this._layers[r],n.__builtin__&&t.call(e,n,r)},eachOtherLayer:function(t,e){var n,r,i,o=this._zlevelList;for(i=0;i<o.length;i++)r=o[i],n=this._layers[r],n.__builtin__||t.call(e,n,r)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){o&&(o.__endIndex!==t&&(o.__dirty=!0),o.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var n=1;n<t.length;n++){var r=t[n];if(r.zlevel!==t[n-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}}var i,o=null,s=0;for(n=0;n<t.length;n++){r=t[n];var u,c=r.zlevel;i!==c&&(i=c,s=0),r.incremental?(u=this.getLayer(c+m,this._needsManuallyCompositing),u.incremental=!0,s=1):u=this.getLayer(c+(s>0?g:0),this._needsManuallyCompositing),u.__builtin__||a("ZLevel "+c+" has been used by unkown layer "+u.id),u!==o&&(u.__used=!0,u.__startIndex!==n&&(u.__dirty=!0),u.__startIndex=n,u.incremental?u.__drawIndex=-1:u.__drawIndex=n,e(n),o=u),r.__dirty&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=n))}e(n),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?o.merge(n[t],e,!0):n[t]=e;for(var r=0;r<this._zlevelList.length;r++){var i=this._zlevelList[r];if(i===t||i===t+g){var a=this._layers[i];o.merge(a,n[t],!0)}}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,r=e[t];r&&(r.dom.parentNode.removeChild(r.dom),delete e[t],n.splice(o.indexOf(n,t),1))},resize:function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var i in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(i)&&this._layers[i].resize(t,e);o.each(this._progressiveLayers,(function(n){n.resize(t,e)})),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(p).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[p].dom;var e=new c("image",this,t.pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,r=e.dom.height,i=e.ctx;this.eachLayer((function(t){t.__builtin__?i.drawImage(t.dom,0,0,n,r):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())}))}else for(var o={},a=this.storage.getDisplayList(!0),s=0;s<a.length;s++){var u=a[s];this._doPaintEl(u,e,!0,o)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],i=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[r]||v(s[n])||v(a.style[n]))-(v(s[i])||0)-(v(s[o])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),r=n.getContext("2d"),i=t.getBoundingRect(),o=t.style,a=o.shadowBlur*e,s=o.shadowOffsetX*e,u=o.shadowOffsetY*e,c=o.hasStroke()?o.lineWidth:0,l=Math.max(c/2,-s+a),f=Math.max(c/2,s+a),d=Math.max(c/2,-u+a),p=Math.max(c/2,u+a),g=i.width+l+f,m=i.height+d+p;n.width=g*e,n.height=m*e,r.scale(e,e),r.clearRect(0,0,g,m),r.dpr=e;var v={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[l-i.x,d-i.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(r);var y=h,b=new y({style:{x:0,y:0,image:n}});return null!=v.position&&(b.position=t.position=v.position),null!=v.rotation&&(b.rotation=t.rotation=v.rotation),null!=v.scale&&(b.scale=t.scale=v.scale),b}};var k=C;t.exports=k},ed91:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=n("b14b"),i=o(r);function o(t){return t&&t.__esModule?t:{default:t}}var a=["-webkit-",""];function s(t,e){if("string"===typeof e&&!(0,i.default)(e)&&e.indexOf("filter(")>-1)return a.map((function(t){return e.replace(/filter\(/g,t+"filter(")}))}t.exports=e["default"]},eda2:function(t,e,n){var r=n("6d8b"),i=n("e86a"),o=n("3842");function a(t){return isNaN(t)?"-":(t=(t+"").split("."),t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:""))}function s(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()})),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var u=r.normalizeCssArray,c=/([&<>"'])/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function h(t){return null==t?"":(t+"").replace(c,(function(t,e){return l[e]}))}var f=["a","b","c","d","e","f","g"],d=function(t,e){return"{"+t+(null==e?"":e)+"}"};function p(t,e,n){r.isArray(e)||(e=[e]);var i=e.length;if(!i)return"";for(var o=e[0].$vars||[],a=0;a<o.length;a++){var s=f[a];t=t.replace(d(s),d(s,0))}for(var u=0;u<i;u++)for(var c=0;c<o.length;c++){var l=e[u][o[c]];t=t.replace(d(f[c],u),n?h(l):l)}return t}function g(t,e,n){return r.each(e,(function(e,r){t=t.replace("{"+r+"}",n?h(e):e)})),t}function m(t,e){t=r.isString(t)?{color:t,extraCssText:e}:t||{};var n=t.color,i=t.type,o=(e=t.extraCssText,t.renderMode||"html"),a=t.markerId||"X";return n?"html"===o?"subItem"===i?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+h(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+h(n)+";"+(e||"")+'"></span>':{renderMode:o,content:"{marker"+a+"|}  ",style:{color:n}}:""}function v(t,e){return t+="","0000".substr(0,e-t.length)+t}function y(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var r=o.parseDate(e),i=n?"UTC":"",a=r["get"+i+"FullYear"](),s=r["get"+i+"Month"]()+1,u=r["get"+i+"Date"](),c=r["get"+i+"Hours"](),l=r["get"+i+"Minutes"](),h=r["get"+i+"Seconds"](),f=r["get"+i+"Milliseconds"]();return t=t.replace("MM",v(s,2)).replace("M",s).replace("yyyy",a).replace("yy",a%100).replace("dd",v(u,2)).replace("d",u).replace("hh",v(c,2)).replace("h",c).replace("mm",v(l,2)).replace("m",l).replace("ss",v(h,2)).replace("s",h).replace("SSS",v(f,3)),t}function b(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t}var x=i.truncateText;function w(t){return i.getBoundingRect(t.text,t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich,t.truncate)}function _(t,e,n,r,o,a,s,u){return i.getBoundingRect(t,e,n,r,o,u,a,s)}function O(t,e){if("_blank"===e||"blank"===e){var n=window.open();n.opener=null,n.location=t}else window.open(t,e)}e.addCommas=a,e.toCamelCase=s,e.normalizeCssArray=u,e.encodeHTML=h,e.formatTpl=p,e.formatTplSimple=g,e.getTooltipMarker=m,e.formatTime=y,e.capitalFirst=b,e.truncateText=x,e.getTextBoundingRect=w,e.getTextRect=_,e.windowOpen=O},ee1a:function(t,e,n){var r=n("6d8b"),i=r.each,o=r.isString;function a(t,e,n){n=n||{};var r,a,s,u,c=n.byIndex,l=n.stackedCoordDimension,h=!(!t||!t.get("stack"));if(i(e,(function(t,n){o(t)&&(e[n]=t={name:t}),h&&!t.isExtraCoord&&(c||r||!t.ordinalMeta||(r=t),a||"ordinal"===t.type||"time"===t.type||l&&l!==t.coordDim||(a=t))})),!a||c||r||(c=!0),a){s="__\0ecstackresult",u="__\0ecstackedover",r&&(r.createInvertedIndices=!0);var f=a.coordDim,d=a.type,p=0;i(e,(function(t){t.coordDim===f&&p++})),e.push({name:s,coordDim:f,coordDimIndex:p,type:d,isExtraCoord:!0,isCalculationCoord:!0}),p++,e.push({name:u,coordDim:u,coordDimIndex:p,type:d,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:a&&a.name,stackedByDimension:r&&r.name,isStackedByIndex:c,stackedOverDimension:u,stackResultDimension:s}}function s(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function u(t,e){return s(t,e)?t.getCalculationInfo("stackResultDimension"):e}e.enableDataStack=a,e.isDimensionStacked=s,e.getStackedDimension=u},ee84:function(t,e,n){var r=n("20c8"),i=n("401b"),o=i.applyTransform,a=r.CMD,s=[[],[],[]],u=Math.sqrt,c=Math.atan2;function l(t,e){var n,r,i,l,h,f=t.data,d=a.M,p=a.C,g=a.L,m=a.R,v=a.A,y=a.Q;for(i=0,l=0;i<f.length;){switch(n=f[i++],l=i,r=0,n){case d:r=1;break;case g:r=1;break;case p:r=3;break;case y:r=2;break;case v:var b=e[4],x=e[5],w=u(e[0]*e[0]+e[1]*e[1]),_=u(e[2]*e[2]+e[3]*e[3]),O=c(-e[1]/_,e[0]/w);f[i]*=w,f[i++]+=b,f[i]*=_,f[i++]+=x,f[i++]*=w,f[i++]*=_,f[i++]+=O,f[i++]+=O,i+=2,l=i;break;case m:S[0]=f[i++],S[1]=f[i++],o(S,S,e),f[l++]=S[0],f[l++]=S[1],S[0]+=f[i++],S[1]+=f[i++],o(S,S,e),f[l++]=S[0],f[l++]=S[1]}for(h=0;h<r;h++){var S=s[h];S[0]=f[i++],S[1]=f[i++],o(S,S,e),f[l++]=S[0],f[l++]=S[1]}}}t.exports=l},f011:function(t,e,n){"use strict";t.exports=function(t,e){e||(e={}),"function"===typeof e&&(e={cmp:e});var n="boolean"===typeof e.cycles&&e.cycles,r=e.cmp&&function(t){return function(e){return function(n,r){var i={key:n,value:e[n]},o={key:r,value:e[r]};return t(i,o)}}}(e.cmp),i=[];return function t(e){if(e&&e.toJSON&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var o,a;if(Array.isArray(e)){for(a="[",o=0;o<e.length;o++)o&&(a+=","),a+=t(e[o])||"null";return a+"]"}if(null===e)return"null";if(-1!==i.indexOf(e)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=i.push(e)-1,u=Object.keys(e).sort(r&&r(e));for(a="",o=0;o<u.length;o++){var c=u[o],l=t(e[c]);l&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l)}return i.splice(s,1),"{"+a+"}"}}(t)}},f011b:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},f069:function(t,e,n){"use strict";var r=n("1c0b"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},f161:function(t){t.exports=JSON.parse('{"a":"5.13.0"}')},f195:function(t,e,n){const r=n("3034"),i=(t,e,n)=>0!==r(t,e,n);t.exports=i},f206:function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=2)}([function(t,e,n){n(8);var r=n(6)(n(1),n(7),"data-v-25adc6c0",null);t.exports=r.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="#75c791",a="#bfcbd9",s="on",u="off",c="#fff";e["default"]={name:"ToggleButton",props:{value:{type:Boolean,default:!1},name:{type:String},disabled:{type:Boolean,default:!1},tag:{type:String},sync:{type:Boolean,default:!1},speed:{type:Number,default:300},color:{type:[String,Object],validator:function(t){return n.i(r["a"])(t)||n.i(r["b"])(t,"checked")||n.i(r["b"])(t,"unchecked")||n.i(r["b"])(t,"disabled")}},switchColor:{type:[String,Object],validator:function(t){return n.i(r["a"])(t)||n.i(r["b"])(t,"checked")||n.i(r["b"])(t,"unchecked")}},cssColors:{type:Boolean,default:!1},labels:{type:[Boolean,Object],default:!1,validator:function(t){return"object"===("undefined"===typeof t?"undefined":i(t))?t.checked||t.unchecked:"boolean"===typeof t}},height:{type:Number,default:22},width:{type:Number,default:50},margin:{type:Number,default:3},fontSize:{type:Number}},computed:{className:function(){var t=this.toggled,e=this.disabled;return["vue-js-switch",{toggled:t,disabled:e}]},coreStyle:function(){return{width:n.i(r["c"])(this.width),height:n.i(r["c"])(this.height),backgroundColor:this.cssColors?null:this.disabled?this.colorDisabled:this.colorCurrent,borderRadius:n.i(r["c"])(Math.round(this.height/2))}},buttonRadius:function(){return this.height-2*this.margin},distance:function(){return n.i(r["c"])(this.width-this.height+this.margin)},buttonStyle:function(){var t="transform "+this.speed+"ms",e=n.i(r["c"])(this.margin),i=this.toggled?n.i(r["d"])(this.distance,e):n.i(r["d"])(e,e),o=this.switchColor?this.switchColorCurrent:null;return{width:n.i(r["c"])(this.buttonRadius),height:n.i(r["c"])(this.buttonRadius),transition:t,transform:i,background:o}},labelStyle:function(){return{lineHeight:n.i(r["c"])(this.height),fontSize:this.fontSize?n.i(r["c"])(this.fontSize):null}},colorChecked:function(){var t=this.color;return n.i(r["e"])(t)?n.i(r["f"])(t,"checked",o):t||o},colorUnchecked:function(){return n.i(r["f"])(this.color,"unchecked",a)},colorDisabled:function(){return n.i(r["f"])(this.color,"disabled",this.colorCurrent)},colorCurrent:function(){return this.toggled?this.colorChecked:this.colorUnchecked},labelChecked:function(){return n.i(r["f"])(this.labels,"checked",s)},labelUnchecked:function(){return n.i(r["f"])(this.labels,"unchecked",u)},switchColorChecked:function(){return n.i(r["f"])(this.switchColor,"checked",c)},switchColorUnchecked:function(){return n.i(r["f"])(this.switchColor,"unchecked",c)},switchColorCurrent:function(){this.switchColor;return n.i(r["e"])(this.switchColor)?this.toggled?this.switchColorChecked:this.switchColorUnchecked:this.switchColor||c}},watch:{value:function(t){this.sync&&(this.toggled=!!t)}},data:function(){return{toggled:!!this.value}},methods:{toggle:function(t){var e=!this.toggled;this.sync||(this.toggled=e),this.$emit("input",e),this.$emit("change",{value:e,tag:this.tag,srcEvent:t})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n.n(r);n.d(e,"ToggleButton",(function(){return i.a}));var o=!1;e["default"]={install:function(t){o||(t.component("ToggleButton",i.a),o=!0)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return c}));var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t){return"string"===typeof t},o=function(t){return"object"===("undefined"===typeof t?"undefined":r(t))},a=function(t,e){return o(t)&&t.hasOwnProperty(e)},s=function(t,e,n){return a(t,e)?t[e]:n},u=function(t){return t+"px"},c=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0px";return"translate3d("+t+", "+e+", "+n+")"}},function(t,e,n){e=t.exports=n(5)(),e.push([t.i,".vue-js-switch[data-v-25adc6c0]{display:inline-block;position:relative;vertical-align:middle;user-select:none;font-size:10px;cursor:pointer}.vue-js-switch .v-switch-input[data-v-25adc6c0]{opacity:0;position:absolute;width:1px;height:1px}.vue-js-switch .v-switch-label[data-v-25adc6c0]{position:absolute;top:0;font-weight:600;color:#fff;z-index:1}.vue-js-switch .v-switch-label.v-left[data-v-25adc6c0]{left:10px}.vue-js-switch .v-switch-label.v-right[data-v-25adc6c0]{right:10px}.vue-js-switch .v-switch-core[data-v-25adc6c0]{display:block;position:relative;box-sizing:border-box;outline:0;margin:0;transition:border-color .3s,background-color .3s;user-select:none}.vue-js-switch .v-switch-core .v-switch-button[data-v-25adc6c0]{display:block;position:absolute;overflow:hidden;top:0;left:0;border-radius:100%;background-color:#fff;z-index:2}.vue-js-switch.disabled[data-v-25adc6c0]{pointer-events:none;opacity:.6}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"===typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"===typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"===typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e){t.exports=function(t,e,n,r){var i,o=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(i=t,o=t.default);var s="function"===typeof o?o.options:o;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),n&&(s._scopeId=n),r){var u=Object.create(s.computed||null);Object.keys(r).forEach((function(t){var e=r[t];u[t]=function(){return e}})),s.computed=u}return{esModule:i,exports:o,options:s}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{class:t.className},[n("input",{staticClass:"v-switch-input",attrs:{type:"checkbox",name:t.name,disabled:t.disabled},domProps:{checked:t.value},on:{change:function(e){return e.stopPropagation(),t.toggle(e)}}}),t._v(" "),n("div",{staticClass:"v-switch-core",style:t.coreStyle},[n("div",{staticClass:"v-switch-button",style:t.buttonStyle})]),t._v(" "),t.labels?[t.toggled?n("span",{staticClass:"v-switch-label v-left",style:t.labelStyle},[t._t("checked",[[t._v(t._s(t.labelChecked))]])],2):n("span",{staticClass:"v-switch-label v-right",style:t.labelStyle},[t._t("unchecked",[[t._v(t._s(t.labelUnchecked))]])],2)]:t._e()],2)},staticRenderFns:[]}},function(t,e,n){var r=n(4);"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(9)("2283861f",r,!0)},function(t,e,n){var r="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i=n(10),o={},a=r&&(document.head||document.getElementsByTagName("head")[0]),s=null,u=0,c=!1,l=function(){},h="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t){for(var e=0;e<t.length;e++){var n=t[e],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(p(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(p(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function d(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function p(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(c)return l;r.parentNode.removeChild(r)}if(h){var i=u++;r=s||(s=d()),e=m.bind(null,r,i,!1),n=m.bind(null,r,i,!0)}else r=d(),e=v.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}t.exports=function(t,e,n){c=n;var r=i(t,e);return f(r),function(e){for(var n=[],a=0;a<r.length;a++){var s=r[a],u=o[s.id];u.refs--,n.push(u)}e?(r=i(t,e),f(r)):r=[];for(a=0;a<n.length;a++){u=n[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete o[u.id]}}}};var g=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function m(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function v(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},function(t,e){t.exports=function(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],s=o[1],u=o[2],c=o[3],l={id:t+":"+i,css:s,media:u,sourceMap:c};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}}])}))},f219:function(t,e){var n="#eee",r=function(){return{axisLine:{lineStyle:{color:n}},axisTick:{lineStyle:{color:n}},axisLabel:{textStyle:{color:n}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:n}}}},i=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],o={color:i,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:n},crossStyle:{color:n},label:{color:"#000"}}},legend:{textStyle:{color:n}},textStyle:{color:n},title:{textStyle:{color:n}},toolbox:{iconStyle:{normal:{borderColor:n}}},dataZoom:{textStyle:{color:n}},visualMap:{textStyle:{color:n}},timeline:{lineStyle:{color:n},itemStyle:{normal:{color:i[1]}},label:{normal:{textStyle:{color:n}}},controlStyle:{normal:{color:n,borderColor:n}}},timeAxis:r(),logAxis:r(),valueAxis:r(),categoryAxis:r(),line:{symbol:"circle"},graph:{color:i},gauge:{title:{textStyle:{color:n}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};o.categoryAxis.splitLine.show=!1;var a=o;t.exports=a},f273:function(t,e,n){var r=n("6d8b"),i=n("2306"),o=n("fab2"),a=n("6679"),s=n("0156"),u=n("58df"),c=u.rectCoordAxisBuildSplitArea,l=u.rectCoordAxisHandleRemove,h=["axisLine","axisTickLabel","axisName"],f=["splitArea","splitLine","minorSplitLine"],d=a.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,n,a){this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new i.Group,this.group.add(this._axisGroup),t.get("show")){var c=t.getCoordSysModel(),l=s.layout(c,t),p=new o(t,l);r.each(h,p.add,p),this._axisGroup.add(p.getGroup()),r.each(f,(function(e){t.get(e+".show")&&this["_"+e](t,c)}),this),i.groupTransition(u,this._axisGroup,t),d.superCall(this,"render",t,e,n,a)}},remove:function(){l(this)},_splitLine:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var o=t.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=r.isArray(s)?s:[s];for(var u=e.coordinateSystem.getRect(),c=n.isHorizontal(),l=0,h=n.getTicksCoords({tickModel:o}),f=[],d=[],p=a.getLineStyle(),g=0;g<h.length;g++){var m=n.toGlobalCoord(h[g].coord);c?(f[0]=m,f[1]=u.y,d[0]=m,d[1]=u.y+u.height):(f[0]=u.x,f[1]=m,d[0]=u.x+u.width,d[1]=m);var v=l++%s.length,y=h[g].tickValue;this._axisGroup.add(new i.Line({anid:null!=y?"line_"+h[g].tickValue:null,subPixelOptimize:!0,shape:{x1:f[0],y1:f[1],x2:d[0],y2:d[1]},style:r.defaults({stroke:s[v]},p),silent:!0}))}}},_minorSplitLine:function(t,e){var n=t.axis,r=t.getModel("minorSplitLine"),o=r.getModel("lineStyle"),a=e.coordinateSystem.getRect(),s=n.isHorizontal(),u=n.getMinorTicksCoords();if(u.length)for(var c=[],l=[],h=o.getLineStyle(),f=0;f<u.length;f++)for(var d=0;d<u[f].length;d++){var p=n.toGlobalCoord(u[f][d].coord);s?(c[0]=p,c[1]=a.y,l[0]=p,l[1]=a.y+a.height):(c[0]=a.x,c[1]=p,l[0]=a.x+a.width,l[1]=p),this._axisGroup.add(new i.Line({anid:"minor_line_"+u[f][d].tickValue,subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:l[0],y2:l[1]},style:h,silent:!0}))}},_splitArea:function(t,e){c(this,this._axisGroup,t,e)}});d.extend({type:"xAxis"}),d.extend({type:"yAxis"})},f279:function(t,e,n){var r=n("9850"),i=n("e263"),o=n("401b"),a=n("0655");function s(t,e,n){if(this.name=t,this.geometries=e,n)n=[n[0],n[1]];else{var r=this.getBoundingRect();n=[r.x+r.width/2,r.y+r.height/2]}this.center=n}s.prototype={constructor:s,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],a=[-e,-e],s=[],u=[],c=this.geometries,l=0;l<c.length;l++)if("polygon"===c[l].type){var h=c[l].exterior;i.fromPoints(h,s,u),o.min(n,n,s),o.max(a,a,u)}return 0===l&&(n[0]=n[1]=a[0]=a[1]=0),this._rect=new r(n[0],n[1],a[0]-n[0],a[1]-n[1])},contain:function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var r=0,i=n.length;r<i;r++)if("polygon"===n[r].type){var o=n[r].exterior,s=n[r].interiors;if(a.contain(o,t[0],t[1])){for(var u=0;u<(s?s.length:0);u++)if(a.contain(s[u]))continue t;return!0}}return!1},transformTo:function(t,e,n,i){var a=this.getBoundingRect(),s=a.width/a.height;n?i||(i=n/s):n=s*i;for(var u=new r(t,e,n,i),c=a.calculateTransform(u),l=this.geometries,h=0;h<l.length;h++)if("polygon"===l[h].type){for(var f=l[h].exterior,d=l[h].interiors,p=0;p<f.length;p++)o.applyTransform(f[p],f[p],c);for(var g=0;g<(d?d.length:0);g++)for(p=0;p<d[g].length;p++)o.applyTransform(d[g][p],d[g][p],c)}a=this._rect,a.copy(u),this.center=[a.x+a.width/2,a.y+a.height/2]},cloneShallow:function(t){null==t&&(t=this.name);var e=new s(t,this.geometries,this.center);return e._rect=this._rect,e.transformTo=null,e}};var u=s;t.exports=u},f47d:function(t,e,n){var r=n("6d8b"),i=(r.assert,r.isArray),o=n("4e08");o.__DEV__;function a(t){return new s(t)}function s(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0,this.context}var u=s.prototype;u.perform=function(t){var e,n=this._upstream,r=t&&t.skip;if(this._dirty&&n){var o=this.context;o.data=o.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!r&&(e=this._plan(this.context));var a,s=d(this._modBy),u=this._modDataCount||0,c=d(t&&t.modBy),f=t&&t.modDataCount||0;function d(t){return!(t>=1)&&(t=1),t}s===c&&u===f||(e="reset"),(this._dirty||"reset"===e)&&(this._dirty=!1,a=h(this,r)),this._modBy=c,this._modDataCount=f;var p=t&&t.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var g=this._dueIndex,m=Math.min(null!=p?this._dueIndex+p:1/0,this._dueEnd);if(!r&&(a||g<m)){var v=this._progress;if(i(v))for(var y=0;y<v.length;y++)l(this,v[y],g,m,c,f);else l(this,v,g,m,c,f)}this._dueIndex=m;var b=null!=this._settedOutputEnd?this._settedOutputEnd:m;this._outputDueEnd=b}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var c=function(){var t,e,n,r,i,o={reset:function(u,c,l,h){e=u,t=c,n=l,r=h,i=Math.ceil(r/n),o.next=n>1&&r>0?s:a}};return o;function a(){return e<t?e++:null}function s(){var o=e%i*n+Math.ceil(e/i),a=e>=t?null:o<r?o:e;return e++,a}}();function l(t,e,n,r,i,o){c.reset(n,r,i,o),t._callingProgress=e,t._callingProgress({start:n,end:r,count:r-n,next:c.next},t.context)}function h(t,e){var n,r;t._dueIndex=t._outputDueEnd=t._dueEnd=0,t._settedOutputEnd=null,!e&&t._reset&&(n=t._reset(t.context),n&&n.progress&&(r=n.forceFirstProgress,n=n.progress),i(n)&&!n.length&&(n=null)),t._progress=n,t._modBy=t._modDataCount=null;var o=t._downstream;return o&&o.dirty(),r}u.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},u.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},u.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},u.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},u.getUpstream=function(){return this._upstream},u.getDownstream=function(){return this._downstream},u.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e.createTask=a},f490:function(t,e,n){"use strict";(function(t,r){
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
let i;function o(){if(null==i){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof t)e=t;else if("undefined"!==typeof r)e=r;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}i=e}return i}function a(){const t=o();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}function s(t,e){const n=a();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s}))}).call(this,n("c8ba"),n("4362"))},f5df:function(t,e,n){var r=n("00ee"),i=n("c6b6"),o=n("b622"),a=o("toStringTag"),s="Arguments"==i(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),a))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},f5ea:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function i(t,e){if("display"===t&&r.hasOwnProperty(e))return r[e]}t.exports=e["default"]},f617:function(t,e,n){"use strict";(function(t){function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){return s(t)||c(t,e)||h()}function o(t){return a(t)||u(t)||l()}function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function s(t){if(Array.isArray(t))return t}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(e,"a",(function(){return gi}));var f=9007199254740991,d="[object Arguments]",p="[object Function]",g="[object GeneratorFunction]",m=/^(?:0|[1-9]\d*)$/;function v(t,e){var n=-1,r=t?t.length:0;while(++n<r)if(!1===e(t[n],n,t))break;return t}function y(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function b(t,e){return function(n){return t(e(n))}}var x=Object.prototype,w=x.hasOwnProperty,_=x.toString,O=x.propertyIsEnumerable,S=b(Object.keys,Object);function C(t,e){var n=F(t)||R(t)?y(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!w.call(t,o)||i&&("length"==o||M(o,r))||n.push(o);return n}var k=j(T),A=D();function T(t,e){return t&&A(t,e,W)}function E(t){if(!N(t))return S(t);var e=[];for(var n in Object(t))w.call(t,n)&&"constructor"!=n&&e.push(n);return e}function j(t,e){return function(n,r){if(null==n)return n;if(!P(n))return t(n,r);var i=n.length,o=e?i:-1,a=Object(n);while(e?o--:++o<i)if(!1===r(a[o],o,a))break;return n}}function D(t){return function(e,n,r){var i=-1,o=Object(e),a=r(e),s=a.length;while(s--){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function M(t,e){return e=null==e?f:e,!!e&&("number"==typeof t||m.test(t))&&t>-1&&t%1==0&&t<e}function N(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||x;return t===n}function I(t,e){var n=F(t)?v:k;return n(t,"function"==typeof e?e:V)}function R(t){return $(t)&&w.call(t,"callee")&&(!O.call(t,"callee")||_.call(t)==d)}var F=Array.isArray;function P(t){return null!=t&&z(t.length)&&!L(t)}function $(t){return U(t)&&P(t)}function L(t){var e=B(t)?_.call(t):"";return e==p||e==g}function z(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}function B(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function U(t){return!!t&&"object"==typeof t}function W(t){return P(t)?C(t):E(t)}function V(t){return t}var H=I,q=9007199254740991,G="[object Arguments]",X="[object Function]",Y="[object GeneratorFunction]",K=/^(?:0|[1-9]\d*)$/;function Z(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function J(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function Q(t,e){return function(n){return t(e(n))}}var tt=Object.prototype,et=tt.hasOwnProperty,nt=tt.toString,rt=tt.propertyIsEnumerable,it=Q(Object.keys,Object),ot=Math.max,at=!rt.call({valueOf:1},"valueOf");function st(t,e){var n=yt(t)||vt(t)?J(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!et.call(t,o)||i&&("length"==o||dt(o,r))||n.push(o);return n}function ut(t,e,n){var r=t[e];et.call(t,e)&&mt(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function ct(t){if(!gt(t))return it(t);var e=[];for(var n in Object(t))et.call(t,n)&&"constructor"!=n&&e.push(n);return e}function lt(t,e){return e=ot(void 0===e?t.length-1:e,0),function(){var n=arguments,r=-1,i=ot(n.length-e,0),o=Array(i);while(++r<i)o[r]=n[e+r];r=-1;var a=Array(e+1);while(++r<e)a[r]=n[r];return a[e]=o,Z(t,this,a)}}function ht(t,e,n,r){n||(n={});var i=-1,o=e.length;while(++i<o){var a=e[i],s=r?r(n[a],t[a],a,n,t):void 0;ut(n,a,void 0===s?t[a]:s)}return n}function ft(t){return lt((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&pt(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);while(++r<i){var s=n[r];s&&t(e,s,r,o)}return e}))}function dt(t,e){return e=null==e?q:e,!!e&&("number"==typeof t||K.test(t))&&t>-1&&t%1==0&&t<e}function pt(t,e,n){if(!Ot(n))return!1;var r=typeof e;return!!("number"==r?bt(n)&&dt(e,n.length):"string"==r&&e in n)&&mt(n[e],t)}function gt(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||tt;return t===n}function mt(t,e){return t===e||t!==t&&e!==e}function vt(t){return xt(t)&&et.call(t,"callee")&&(!rt.call(t,"callee")||nt.call(t)==G)}var yt=Array.isArray;function bt(t){return null!=t&&_t(t.length)&&!wt(t)}function xt(t){return St(t)&&bt(t)}function wt(t){var e=Ot(t)?nt.call(t):"";return e==X||e==Y}function _t(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=q}function Ot(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function St(t){return!!t&&"object"==typeof t}var Ct=ft((function(t,e){if(at||gt(e)||bt(e))ht(e,kt(e),t);else for(var n in e)et.call(e,n)&&ut(t,n,e[n])}));function kt(t){return bt(t)?st(t):ct(t)}var At=Ct,Tt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function Et(t,e){return e={exports:{}},t(e,e.exports),e.exports}var jt=Et((function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",c="[object Error]",l="[object Function]",h="[object GeneratorFunction]",f="[object Map]",d="[object Number]",p="[object Object]",g="[object Promise]",m="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",x="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",O="[object Float32Array]",S="[object Float64Array]",C="[object Int8Array]",k="[object Int16Array]",A="[object Int32Array]",T="[object Uint8Array]",E="[object Uint8ClampedArray]",j="[object Uint16Array]",D="[object Uint32Array]",M=/[\\^$.*+?()[\]{}|]/g,N=/\w*$/,I=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,F={};F[o]=F[a]=F[w]=F[_]=F[s]=F[u]=F[O]=F[S]=F[C]=F[k]=F[A]=F[f]=F[d]=F[p]=F[m]=F[v]=F[y]=F[b]=F[T]=F[E]=F[j]=F[D]=!0,F[c]=F[l]=F[x]=!1;var P="object"==typeof Tt&&Tt&&Tt.Object===Object&&Tt,$="object"==typeof self&&self&&self.Object===Object&&self,L=P||$||Function("return this")(),z=e&&!e.nodeType&&e,B=z&&t&&!t.nodeType&&t,U=B&&B.exports===z;function W(t,e){return t.set(e[0],e[1]),t}function V(t,e){return t.add(e),t}function H(t,e){var n=-1,r=t?t.length:0;while(++n<r)if(!1===e(t[n],n,t))break;return t}function q(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function G(t,e,n,r){var i=-1,o=t?t.length:0;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}function X(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function Y(t,e){return null==t?void 0:t[e]}function K(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function Z(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function J(t,e){return function(n){return t(e(n))}}function Q(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var tt=Array.prototype,et=Function.prototype,nt=Object.prototype,rt=L["__core-js_shared__"],it=function(){var t=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ot=et.toString,at=nt.hasOwnProperty,st=nt.toString,ut=RegExp("^"+ot.call(at).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=U?L.Buffer:void 0,lt=L.Symbol,ht=L.Uint8Array,ft=J(Object.getPrototypeOf,Object),dt=Object.create,pt=nt.propertyIsEnumerable,gt=tt.splice,mt=Object.getOwnPropertySymbols,vt=ct?ct.isBuffer:void 0,yt=J(Object.keys,Object),bt=ke(L,"DataView"),xt=ke(L,"Map"),wt=ke(L,"Promise"),_t=ke(L,"Set"),Ot=ke(L,"WeakMap"),St=ke(Object,"create"),Ct=Fe(bt),kt=Fe(xt),At=Fe(wt),Et=Fe(_t),jt=Fe(Ot),Dt=lt?lt.prototype:void 0,Mt=Dt?Dt.valueOf:void 0;function Nt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function It(){this.__data__=St?St(null):{}}function Rt(t){return this.has(t)&&delete this.__data__[t]}function Ft(t){var e=this.__data__;if(St){var n=e[t];return n===r?void 0:n}return at.call(e,t)?e[t]:void 0}function Pt(t){var e=this.__data__;return St?void 0!==e[t]:at.call(e,t)}function $t(t,e){var n=this.__data__;return n[t]=St&&void 0===e?r:e,this}function Lt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function zt(){this.__data__=[]}function Bt(t){var e=this.__data__,n=oe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():gt.call(e,n,1),!0}function Ut(t){var e=this.__data__,n=oe(e,t);return n<0?void 0:e[n][1]}function Wt(t){return oe(this.__data__,t)>-1}function Vt(t,e){var n=this.__data__,r=oe(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function Ht(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function qt(){this.__data__={hash:new Nt,map:new(xt||Lt),string:new Nt}}function Gt(t){return Ce(this,t)["delete"](t)}function Xt(t){return Ce(this,t).get(t)}function Yt(t){return Ce(this,t).has(t)}function Kt(t,e){return Ce(this,t).set(t,e),this}function Zt(t){this.__data__=new Lt(t)}function Jt(){this.__data__=new Lt}function Qt(t){return this.__data__["delete"](t)}function te(t){return this.__data__.get(t)}function ee(t){return this.__data__.has(t)}function ne(t,e){var r=this.__data__;if(r instanceof Lt){var i=r.__data__;if(!xt||i.length<n-1)return i.push([t,e]),this;r=this.__data__=new Ht(i)}return r.set(t,e),this}function re(t,e){var n=ze(t)||Le(t)?X(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!at.call(t,o)||i&&("length"==o||Me(o,r))||n.push(o);return n}function ie(t,e,n){var r=t[e];at.call(t,e)&&$e(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function oe(t,e){var n=t.length;while(n--)if($e(t[n][0],e))return n;return-1}function ae(t,e){return t&&_e(e,Xe(e),t)}function se(t,e,n,r,i,a,s){var u;if(r&&(u=a?r(t,i,a,s):r(t)),void 0!==u)return u;if(!qe(t))return t;var c=ze(t);if(c){if(u=Ee(t),!e)return we(t,u)}else{var f=Te(t),d=f==l||f==h;if(We(t))return de(t,e);if(f==p||f==o||d&&!a){if(K(t))return a?t:{};if(u=je(d?{}:t),!e)return Oe(t,ae(u,t))}else{if(!F[f])return a?t:{};u=De(t,f,se,e)}}s||(s=new Zt);var g=s.get(t);if(g)return g;if(s.set(t,u),!c)var m=n?Se(t):Xe(t);return H(m||t,(function(i,o){m&&(o=i,i=t[o]),ie(u,o,se(i,e,n,r,o,t,s))})),u}function ue(t){return qe(t)?dt(t):{}}function ce(t,e,n){var r=e(t);return ze(t)?r:q(r,n(t))}function le(t){return st.call(t)}function he(t){if(!qe(t)||Ie(t))return!1;var e=Ve(t)||K(t)?ut:I;return e.test(Fe(t))}function fe(t){if(!Re(t))return yt(t);var e=[];for(var n in Object(t))at.call(t,n)&&"constructor"!=n&&e.push(n);return e}function de(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function pe(t){var e=new t.constructor(t.byteLength);return new ht(e).set(new ht(t)),e}function ge(t,e){var n=e?pe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function me(t,e,n){var r=e?n(Z(t),!0):Z(t);return G(r,W,new t.constructor)}function ve(t){var e=new t.constructor(t.source,N.exec(t));return e.lastIndex=t.lastIndex,e}function ye(t,e,n){var r=e?n(Q(t),!0):Q(t);return G(r,V,new t.constructor)}function be(t){return Mt?Object(Mt.call(t)):{}}function xe(t,e){var n=e?pe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function we(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}function _e(t,e,n,r){n||(n={});var i=-1,o=e.length;while(++i<o){var a=e[i],s=r?r(n[a],t[a],a,n,t):void 0;ie(n,a,void 0===s?t[a]:s)}return n}function Oe(t,e){return _e(t,Ae(t),e)}function Se(t){return ce(t,Xe,Ae)}function Ce(t,e){var n=t.__data__;return Ne(e)?n["string"==typeof e?"string":"hash"]:n.map}function ke(t,e){var n=Y(t,e);return he(n)?n:void 0}Nt.prototype.clear=It,Nt.prototype["delete"]=Rt,Nt.prototype.get=Ft,Nt.prototype.has=Pt,Nt.prototype.set=$t,Lt.prototype.clear=zt,Lt.prototype["delete"]=Bt,Lt.prototype.get=Ut,Lt.prototype.has=Wt,Lt.prototype.set=Vt,Ht.prototype.clear=qt,Ht.prototype["delete"]=Gt,Ht.prototype.get=Xt,Ht.prototype.has=Yt,Ht.prototype.set=Kt,Zt.prototype.clear=Jt,Zt.prototype["delete"]=Qt,Zt.prototype.get=te,Zt.prototype.has=ee,Zt.prototype.set=ne;var Ae=mt?J(mt,Object):Ye,Te=le;function Ee(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&at.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function je(t){return"function"!=typeof t.constructor||Re(t)?{}:ue(ft(t))}function De(t,e,n,r){var i=t.constructor;switch(e){case w:return pe(t);case s:case u:return new i(+t);case _:return ge(t,r);case O:case S:case C:case k:case A:case T:case E:case j:case D:return xe(t,r);case f:return me(t,r,n);case d:case y:return new i(t);case m:return ve(t);case v:return ye(t,r,n);case b:return be(t)}}function Me(t,e){return e=null==e?i:e,!!e&&("number"==typeof t||R.test(t))&&t>-1&&t%1==0&&t<e}function Ne(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Ie(t){return!!it&&it in t}function Re(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||nt;return t===n}function Fe(t){if(null!=t){try{return ot.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Pe(t){return se(t,!0,!0)}function $e(t,e){return t===e||t!==t&&e!==e}function Le(t){return Ue(t)&&at.call(t,"callee")&&(!pt.call(t,"callee")||st.call(t)==o)}(bt&&Te(new bt(new ArrayBuffer(1)))!=_||xt&&Te(new xt)!=f||wt&&Te(wt.resolve())!=g||_t&&Te(new _t)!=v||Ot&&Te(new Ot)!=x)&&(Te=function(t){var e=st.call(t),n=e==p?t.constructor:void 0,r=n?Fe(n):void 0;if(r)switch(r){case Ct:return _;case kt:return f;case At:return g;case Et:return v;case jt:return x}return e});var ze=Array.isArray;function Be(t){return null!=t&&He(t.length)&&!Ve(t)}function Ue(t){return Ge(t)&&Be(t)}var We=vt||Ke;function Ve(t){var e=qe(t)?st.call(t):"";return e==l||e==h}function He(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function qe(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ge(t){return!!t&&"object"==typeof t}function Xe(t){return Be(t)?re(t):fe(t)}function Ye(){return[]}function Ke(){return!1}t.exports=Pe})),Dt=Et((function(t,e){var n=200,r="Expected a function",i="__lodash_hash_undefined__",o=1,a=2,s=1/0,u=9007199254740991,c="[object Arguments]",l="[object Array]",h="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Function]",g="[object GeneratorFunction]",m="[object Map]",v="[object Number]",y="[object Object]",b="[object Promise]",x="[object RegExp]",w="[object Set]",_="[object String]",O="[object Symbol]",S="[object WeakMap]",C="[object ArrayBuffer]",k="[object DataView]",A="[object Float32Array]",T="[object Float64Array]",E="[object Int8Array]",j="[object Int16Array]",D="[object Int32Array]",M="[object Uint8Array]",N="[object Uint8ClampedArray]",I="[object Uint16Array]",R="[object Uint32Array]",F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P=/^\w*$/,$=/^\./,L=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,z=/[\\^$.*+?()[\]{}|]/g,B=/\\(\\)?/g,U=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,V={};V[A]=V[T]=V[E]=V[j]=V[D]=V[M]=V[N]=V[I]=V[R]=!0,V[c]=V[l]=V[C]=V[h]=V[k]=V[f]=V[d]=V[p]=V[m]=V[v]=V[y]=V[x]=V[w]=V[_]=V[S]=!1;var H="object"==typeof Tt&&Tt&&Tt.Object===Object&&Tt,q="object"==typeof self&&self&&self.Object===Object&&self,G=H||q||Function("return this")(),X=e&&!e.nodeType&&e,Y=X&&t&&!t.nodeType&&t,K=Y&&Y.exports===X,Z=K&&H.process,J=function(){try{return Z&&Z.binding("util")}catch(t){}}(),Q=J&&J.isTypedArray;function tt(t,e){var n=-1,r=t?t.length:0,i=0,o=[];while(++n<r){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function et(t,e){var n=-1,r=t?t.length:0;while(++n<r)if(e(t[n],n,t))return!0;return!1}function nt(t){return function(e){return null==e?void 0:e[t]}}function rt(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function it(t){return function(e){return t(e)}}function ot(t,e){return null==t?void 0:t[e]}function at(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function st(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ut(t,e){return function(n){return t(e(n))}}function ct(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var lt=Array.prototype,ht=Function.prototype,ft=Object.prototype,dt=G["__core-js_shared__"],pt=function(){var t=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gt=ht.toString,mt=ft.hasOwnProperty,vt=ft.toString,yt=RegExp("^"+gt.call(mt).replace(z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bt=G.Symbol,xt=G.Uint8Array,wt=ft.propertyIsEnumerable,_t=lt.splice,Ot=ut(Object.keys,Object),St=ze(G,"DataView"),Ct=ze(G,"Map"),kt=ze(G,"Promise"),At=ze(G,"Set"),Et=ze(G,"WeakMap"),jt=ze(Object,"create"),Dt=Je(St),Mt=Je(Ct),Nt=Je(kt),It=Je(At),Rt=Je(Et),Ft=bt?bt.prototype:void 0,Pt=Ft?Ft.valueOf:void 0,$t=Ft?Ft.toString:void 0;function Lt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function zt(){this.__data__=jt?jt(null):{}}function Bt(t){return this.has(t)&&delete this.__data__[t]}function Ut(t){var e=this.__data__;if(jt){var n=e[t];return n===i?void 0:n}return mt.call(e,t)?e[t]:void 0}function Wt(t){var e=this.__data__;return jt?void 0!==e[t]:mt.call(e,t)}function Vt(t,e){var n=this.__data__;return n[t]=jt&&void 0===e?i:e,this}function Ht(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function qt(){this.__data__=[]}function Gt(t){var e=this.__data__,n=de(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():_t.call(e,n,1),!0}function Xt(t){var e=this.__data__,n=de(e,t);return n<0?void 0:e[n][1]}function Yt(t){return de(this.__data__,t)>-1}function Kt(t,e){var n=this.__data__,r=de(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function Zt(t){var e=-1,n=t?t.length:0;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Jt(){this.__data__={hash:new Lt,map:new(Ct||Ht),string:new Lt}}function Qt(t){return $e(this,t)["delete"](t)}function te(t){return $e(this,t).get(t)}function ee(t){return $e(this,t).has(t)}function ne(t,e){return $e(this,t).set(t,e),this}function re(t){var e=-1,n=t?t.length:0;this.__data__=new Zt;while(++e<n)this.add(t[e])}function ie(t){return this.__data__.set(t,i),this}function oe(t){return this.__data__.has(t)}function ae(t){this.__data__=new Ht(t)}function se(){this.__data__=new Ht}function ue(t){return this.__data__["delete"](t)}function ce(t){return this.__data__.get(t)}function le(t){return this.__data__.has(t)}function he(t,e){var r=this.__data__;if(r instanceof Ht){var i=r.__data__;if(!Ct||i.length<n-1)return i.push([t,e]),this;r=this.__data__=new Zt(i)}return r.set(t,e),this}function fe(t,e){var n=rn(t)||nn(t)?rt(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!mt.call(t,o)||i&&("length"==o||We(o,r))||n.push(o);return n}function de(t,e){var n=t.length;while(n--)if(en(t[n][0],e))return n;return-1}Lt.prototype.clear=zt,Lt.prototype["delete"]=Bt,Lt.prototype.get=Ut,Lt.prototype.has=Wt,Lt.prototype.set=Vt,Ht.prototype.clear=qt,Ht.prototype["delete"]=Gt,Ht.prototype.get=Xt,Ht.prototype.has=Yt,Ht.prototype.set=Kt,Zt.prototype.clear=Jt,Zt.prototype["delete"]=Qt,Zt.prototype.get=te,Zt.prototype.has=ee,Zt.prototype.set=ne,re.prototype.add=re.prototype.push=ie,re.prototype.has=oe,ae.prototype.clear=se,ae.prototype["delete"]=ue,ae.prototype.get=ce,ae.prototype.has=le,ae.prototype.set=he;var pe=Ne(ve);function ge(t,e){var n=[];return pe(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}var me=Ie();function ve(t,e){return t&&me(t,e,mn)}function ye(t,e){e=Ve(e,t)?[e]:Me(e);var n=0,r=e.length;while(null!=t&&n<r)t=t[Ze(e[n++])];return n&&n==r?t:void 0}function be(t){return vt.call(t)}function xe(t,e){return null!=t&&e in Object(t)}function we(t,e,n,r,i){return t===e||(null==t||null==e||!cn(t)&&!ln(e)?t!==t&&e!==e:_e(t,e,we,n,r,i))}function _e(t,e,n,r,i,o){var s=rn(t),u=rn(e),h=l,f=l;s||(h=Be(t),h=h==c?y:h),u||(f=Be(e),f=f==c?y:f);var d=h==y&&!at(t),p=f==y&&!at(e),g=h==f;if(g&&!d)return o||(o=new ae),s||fn(t)?Re(t,e,n,r,i,o):Fe(t,e,h,n,r,i,o);if(!(i&a)){var m=d&&mt.call(t,"__wrapped__"),v=p&&mt.call(e,"__wrapped__");if(m||v){var b=m?t.value():t,x=v?e.value():e;return o||(o=new ae),n(b,x,r,i,o)}}return!!g&&(o||(o=new ae),Pe(t,e,n,r,i,o))}function Oe(t,e,n,r){var i=n.length,s=i,u=!r;if(null==t)return!s;t=Object(t);while(i--){var c=n[i];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}while(++i<s){c=n[i];var l=c[0],h=t[l],f=c[1];if(u&&c[2]){if(void 0===h&&!(l in t))return!1}else{var d=new ae;if(r)var p=r(h,f,l,t,e,d);if(!(void 0===p?we(f,h,r,o|a,d):p))return!1}}return!0}function Se(t){if(!cn(t)||qe(t))return!1;var e=sn(t)||at(t)?yt:U;return e.test(Je(t))}function Ce(t){return ln(t)&&un(t.length)&&!!V[vt.call(t)]}function ke(t){return"function"==typeof t?t:null==t?vn:"object"==typeof t?rn(t)?Ee(t[0],t[1]):Te(t):yn(t)}function Ae(t){if(!Ge(t))return Ot(t);var e=[];for(var n in Object(t))mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Te(t){var e=Le(t);return 1==e.length&&e[0][2]?Ye(e[0][0],e[0][1]):function(n){return n===t||Oe(n,t,e)}}function Ee(t,e){return Ve(t)&&Xe(e)?Ye(Ze(t),e):function(n){var r=pn(n,t);return void 0===r&&r===e?gn(n,t):we(e,r,void 0,o|a)}}function je(t){return function(e){return ye(e,t)}}function De(t){if("string"==typeof t)return t;if(hn(t))return $t?$t.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}function Me(t){return rn(t)?t:Ke(t)}function Ne(t,e){return function(n,r){if(null==n)return n;if(!on(n))return t(n,r);var i=n.length,o=e?i:-1,a=Object(n);while(e?o--:++o<i)if(!1===r(a[o],o,a))break;return n}}function Ie(t){return function(e,n,r){var i=-1,o=Object(e),a=r(e),s=a.length;while(s--){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Re(t,e,n,r,i,s){var u=i&a,c=t.length,l=e.length;if(c!=l&&!(u&&l>c))return!1;var h=s.get(t);if(h&&s.get(e))return h==e;var f=-1,d=!0,p=i&o?new re:void 0;s.set(t,e),s.set(e,t);while(++f<c){var g=t[f],m=e[f];if(r)var v=u?r(m,g,f,e,t,s):r(g,m,f,t,e,s);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!et(e,(function(t,e){if(!p.has(e)&&(g===t||n(g,t,r,i,s)))return p.add(e)}))){d=!1;break}}else if(g!==m&&!n(g,m,r,i,s)){d=!1;break}}return s["delete"](t),s["delete"](e),d}function Fe(t,e,n,r,i,s,u){switch(n){case k:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case C:return!(t.byteLength!=e.byteLength||!r(new xt(t),new xt(e)));case h:case f:case v:return en(+t,+e);case d:return t.name==e.name&&t.message==e.message;case x:case _:return t==e+"";case m:var c=st;case w:var l=s&a;if(c||(c=ct),t.size!=e.size&&!l)return!1;var p=u.get(t);if(p)return p==e;s|=o,u.set(t,e);var g=Re(c(t),c(e),r,i,s,u);return u["delete"](t),g;case O:if(Pt)return Pt.call(t)==Pt.call(e)}return!1}function Pe(t,e,n,r,i,o){var s=i&a,u=mn(t),c=u.length,l=mn(e),h=l.length;if(c!=h&&!s)return!1;var f=c;while(f--){var d=u[f];if(!(s?d in e:mt.call(e,d)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var g=!0;o.set(t,e),o.set(e,t);var m=s;while(++f<c){d=u[f];var v=t[d],y=e[d];if(r)var b=s?r(y,v,d,e,t,o):r(v,y,d,t,e,o);if(!(void 0===b?v===y||n(v,y,r,i,o):b)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return o["delete"](t),o["delete"](e),g}function $e(t,e){var n=t.__data__;return He(e)?n["string"==typeof e?"string":"hash"]:n.map}function Le(t){var e=mn(t),n=e.length;while(n--){var r=e[n],i=t[r];e[n]=[r,i,Xe(i)]}return e}function ze(t,e){var n=ot(t,e);return Se(n)?n:void 0}var Be=be;function Ue(t,e,n){e=Ve(e,t)?[e]:Me(e);var r,i=-1,o=e.length;while(++i<o){var a=Ze(e[i]);if(!(r=null!=t&&n(t,a)))break;t=t[a]}if(r)return r;o=t?t.length:0;return!!o&&un(o)&&We(a,o)&&(rn(t)||nn(t))}function We(t,e){return e=null==e?u:e,!!e&&("number"==typeof t||W.test(t))&&t>-1&&t%1==0&&t<e}function Ve(t,e){if(rn(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!hn(t))||(P.test(t)||!F.test(t)||null!=e&&t in Object(e))}function He(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function qe(t){return!!pt&&pt in t}function Ge(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||ft;return t===n}function Xe(t){return t===t&&!cn(t)}function Ye(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}(St&&Be(new St(new ArrayBuffer(1)))!=k||Ct&&Be(new Ct)!=m||kt&&Be(kt.resolve())!=b||At&&Be(new At)!=w||Et&&Be(new Et)!=S)&&(Be=function(t){var e=vt.call(t),n=e==y?t.constructor:void 0,r=n?Je(n):void 0;if(r)switch(r){case Dt:return k;case Mt:return m;case Nt:return b;case It:return w;case Rt:return S}return e});var Ke=tn((function(t){t=dn(t);var e=[];return $.test(t)&&e.push(""),t.replace(L,(function(t,n,r,i){e.push(r?i.replace(B,"$1"):n||t)})),e}));function Ze(t){if("string"==typeof t||hn(t))return t;var e=t+"";return"0"==e&&1/t==-s?"-0":e}function Je(t){if(null!=t){try{return gt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Qe(t,e){var n=rn(t)?tt:ge;return n(t,ke(e))}function tn(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(r);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(tn.Cache||Zt),n}function en(t,e){return t===e||t!==t&&e!==e}function nn(t){return an(t)&&mt.call(t,"callee")&&(!wt.call(t,"callee")||vt.call(t)==c)}tn.Cache=Zt;var rn=Array.isArray;function on(t){return null!=t&&un(t.length)&&!sn(t)}function an(t){return ln(t)&&on(t)}function sn(t){var e=cn(t)?vt.call(t):"";return e==p||e==g}function un(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=u}function cn(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function ln(t){return!!t&&"object"==typeof t}function hn(t){return"symbol"==typeof t||ln(t)&&vt.call(t)==O}var fn=Q?it(Q):Ce;function dn(t){return null==t?"":De(t)}function pn(t,e,n){var r=null==t?void 0:ye(t,e);return void 0===r?n:r}function gn(t,e){return null!=t&&Ue(t,e,xe)}function mn(t){return on(t)?fe(t):Ae(t)}function vn(t){return t}function yn(t){return Ve(t)?nt(Ze(t)):je(t)}t.exports=Qe})),Mt=Et((function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",u="[object Array]",c="[object AsyncFunction]",l="[object Boolean]",h="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",g="[object Map]",m="[object Number]",v="[object Null]",y="[object Object]",b="[object Promise]",x="[object Proxy]",w="[object RegExp]",_="[object Set]",O="[object String]",S="[object Symbol]",C="[object Undefined]",k="[object WeakMap]",A="[object ArrayBuffer]",T="[object DataView]",E="[object Float32Array]",j="[object Float64Array]",D="[object Int8Array]",M="[object Int16Array]",N="[object Int32Array]",I="[object Uint8Array]",R="[object Uint8ClampedArray]",F="[object Uint16Array]",P="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,L=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,B={};B[E]=B[j]=B[D]=B[M]=B[N]=B[I]=B[R]=B[F]=B[P]=!0,B[s]=B[u]=B[A]=B[l]=B[T]=B[h]=B[f]=B[d]=B[g]=B[m]=B[y]=B[w]=B[_]=B[O]=B[k]=!1;var U="object"==typeof Tt&&Tt&&Tt.Object===Object&&Tt,W="object"==typeof self&&self&&self.Object===Object&&self,V=U||W||Function("return this")(),H=e&&!e.nodeType&&e,q=H&&t&&!t.nodeType&&t,G=q&&q.exports===H,X=G&&U.process,Y=function(){try{return X&&X.binding&&X.binding("util")}catch(t){}}(),K=Y&&Y.isTypedArray;function Z(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function J(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function Q(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}function tt(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function et(t){return function(e){return t(e)}}function nt(t,e){return t.has(e)}function rt(t,e){return null==t?void 0:t[e]}function it(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ot(t,e){return function(n){return t(e(n))}}function at(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var st=Array.prototype,ut=Function.prototype,ct=Object.prototype,lt=V["__core-js_shared__"],ht=ut.toString,ft=ct.hasOwnProperty,dt=function(){var t=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pt=ct.toString,gt=RegExp("^"+ht.call(ft).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mt=G?V.Buffer:void 0,vt=V.Symbol,yt=V.Uint8Array,bt=ct.propertyIsEnumerable,xt=st.splice,wt=vt?vt.toStringTag:void 0,_t=Object.getOwnPropertySymbols,Ot=mt?mt.isBuffer:void 0,St=ot(Object.keys,Object),Ct=Ae(V,"DataView"),kt=Ae(V,"Map"),At=Ae(V,"Promise"),Et=Ae(V,"Set"),jt=Ae(V,"WeakMap"),Dt=Ae(Object,"create"),Mt=Fe(Ct),Nt=Fe(kt),It=Fe(At),Rt=Fe(Et),Ft=Fe(jt),Pt=vt?vt.prototype:void 0,$t=Pt?Pt.valueOf:void 0;function Lt(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function zt(){this.__data__=Dt?Dt(null):{},this.size=0}function Bt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ut(t){var e=this.__data__;if(Dt){var n=e[t];return n===r?void 0:n}return ft.call(e,t)?e[t]:void 0}function Wt(t){var e=this.__data__;return Dt?void 0!==e[t]:ft.call(e,t)}function Vt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Dt&&void 0===e?r:e,this}function Ht(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function qt(){this.__data__=[],this.size=0}function Gt(t){var e=this.__data__,n=de(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():xt.call(e,n,1),--this.size,!0}function Xt(t){var e=this.__data__,n=de(e,t);return n<0?void 0:e[n][1]}function Yt(t){return de(this.__data__,t)>-1}function Kt(t,e){var n=this.__data__,r=de(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Zt(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Jt(){this.size=0,this.__data__={hash:new Lt,map:new(kt||Ht),string:new Lt}}function Qt(t){var e=ke(this,t)["delete"](t);return this.size-=e?1:0,e}function te(t){return ke(this,t).get(t)}function ee(t){return ke(this,t).has(t)}function ne(t,e){var n=ke(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function re(t){var e=-1,n=null==t?0:t.length;this.__data__=new Zt;while(++e<n)this.add(t[e])}function ie(t){return this.__data__.set(t,r),this}function oe(t){return this.__data__.has(t)}function ae(t){var e=this.__data__=new Ht(t);this.size=e.size}function se(){this.__data__=new Ht,this.size=0}function ue(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function ce(t){return this.__data__.get(t)}function le(t){return this.__data__.has(t)}function he(t,e){var r=this.__data__;if(r instanceof Ht){var i=r.__data__;if(!kt||i.length<n-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Zt(i)}return r.set(t,e),this.size=r.size,this}function fe(t,e){var n=Le(t),r=!n&&$e(t),i=!n&&!r&&Be(t),o=!n&&!r&&!i&&Ge(t),a=n||r||i||o,s=a?tt(t.length,String):[],u=s.length;for(var c in t)!e&&!ft.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||De(c,u))||s.push(c);return s}function de(t,e){var n=t.length;while(n--)if(Pe(t[n][0],e))return n;return-1}function pe(t,e,n){var r=e(t);return Le(t)?r:J(r,n(t))}function ge(t){return null==t?void 0===t?C:v:wt&&wt in Object(t)?Te(t):Re(t)}function me(t){return qe(t)&&ge(t)==s}function ve(t,e,n,r,i){return t===e||(null==t||null==e||!qe(t)&&!qe(e)?t!==t&&e!==e:ye(t,e,n,r,ve,i))}function ye(t,e,n,r,o,a){var c=Le(t),l=Le(e),h=c?u:je(t),f=l?u:je(e);h=h==s?y:h,f=f==s?y:f;var d=h==y,p=f==y,g=h==f;if(g&&Be(t)){if(!Be(e))return!1;c=!0,d=!1}if(g&&!d)return a||(a=new ae),c||Ge(t)?_e(t,e,n,r,o,a):Oe(t,e,h,n,r,o,a);if(!(n&i)){var m=d&&ft.call(t,"__wrapped__"),v=p&&ft.call(e,"__wrapped__");if(m||v){var b=m?t.value():t,x=v?e.value():e;return a||(a=new ae),o(b,x,n,r,a)}}return!!g&&(a||(a=new ae),Se(t,e,n,r,o,a))}function be(t){if(!He(t)||Ne(t))return!1;var e=We(t)?gt:L;return e.test(Fe(t))}function xe(t){return qe(t)&&Ve(t.length)&&!!B[ge(t)]}function we(t){if(!Ie(t))return St(t);var e=[];for(var n in Object(t))ft.call(t,n)&&"constructor"!=n&&e.push(n);return e}function _e(t,e,n,r,a,s){var u=n&i,c=t.length,l=e.length;if(c!=l&&!(u&&l>c))return!1;var h=s.get(t);if(h&&s.get(e))return h==e;var f=-1,d=!0,p=n&o?new re:void 0;s.set(t,e),s.set(e,t);while(++f<c){var g=t[f],m=e[f];if(r)var v=u?r(m,g,f,e,t,s):r(g,m,f,t,e,s);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!Q(e,(function(t,e){if(!nt(p,e)&&(g===t||a(g,t,n,r,s)))return p.push(e)}))){d=!1;break}}else if(g!==m&&!a(g,m,n,r,s)){d=!1;break}}return s["delete"](t),s["delete"](e),d}function Oe(t,e,n,r,a,s,u){switch(n){case T:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case A:return!(t.byteLength!=e.byteLength||!s(new yt(t),new yt(e)));case l:case h:case m:return Pe(+t,+e);case f:return t.name==e.name&&t.message==e.message;case w:case O:return t==e+"";case g:var c=it;case _:var d=r&i;if(c||(c=at),t.size!=e.size&&!d)return!1;var p=u.get(t);if(p)return p==e;r|=o,u.set(t,e);var v=_e(c(t),c(e),r,a,s,u);return u["delete"](t),v;case S:if($t)return $t.call(t)==$t.call(e)}return!1}function Se(t,e,n,r,o,a){var s=n&i,u=Ce(t),c=u.length,l=Ce(e),h=l.length;if(c!=h&&!s)return!1;var f=c;while(f--){var d=u[f];if(!(s?d in e:ft.call(e,d)))return!1}var p=a.get(t);if(p&&a.get(e))return p==e;var g=!0;a.set(t,e),a.set(e,t);var m=s;while(++f<c){d=u[f];var v=t[d],y=e[d];if(r)var b=s?r(y,v,d,e,t,a):r(v,y,d,t,e,a);if(!(void 0===b?v===y||o(v,y,n,r,a):b)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return a["delete"](t),a["delete"](e),g}function Ce(t){return pe(t,Xe,Ee)}function ke(t,e){var n=t.__data__;return Me(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ae(t,e){var n=rt(t,e);return be(n)?n:void 0}function Te(t){var e=ft.call(t,wt),n=t[wt];try{t[wt]=void 0;var r=!0}catch(o){}var i=pt.call(t);return r&&(e?t[wt]=n:delete t[wt]),i}Lt.prototype.clear=zt,Lt.prototype["delete"]=Bt,Lt.prototype.get=Ut,Lt.prototype.has=Wt,Lt.prototype.set=Vt,Ht.prototype.clear=qt,Ht.prototype["delete"]=Gt,Ht.prototype.get=Xt,Ht.prototype.has=Yt,Ht.prototype.set=Kt,Zt.prototype.clear=Jt,Zt.prototype["delete"]=Qt,Zt.prototype.get=te,Zt.prototype.has=ee,Zt.prototype.set=ne,re.prototype.add=re.prototype.push=ie,re.prototype.has=oe,ae.prototype.clear=se,ae.prototype["delete"]=ue,ae.prototype.get=ce,ae.prototype.has=le,ae.prototype.set=he;var Ee=_t?function(t){return null==t?[]:(t=Object(t),Z(_t(t),(function(e){return bt.call(t,e)})))}:Ye,je=ge;function De(t,e){return e=null==e?a:e,!!e&&("number"==typeof t||z.test(t))&&t>-1&&t%1==0&&t<e}function Me(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Ne(t){return!!dt&&dt in t}function Ie(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||ct;return t===n}function Re(t){return pt.call(t)}function Fe(t){if(null!=t){try{return ht.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Pe(t,e){return t===e||t!==t&&e!==e}(Ct&&je(new Ct(new ArrayBuffer(1)))!=T||kt&&je(new kt)!=g||At&&je(At.resolve())!=b||Et&&je(new Et)!=_||jt&&je(new jt)!=k)&&(je=function(t){var e=ge(t),n=e==y?t.constructor:void 0,r=n?Fe(n):"";if(r)switch(r){case Mt:return T;case Nt:return g;case It:return b;case Rt:return _;case Ft:return k}return e});var $e=me(function(){return arguments}())?me:function(t){return qe(t)&&ft.call(t,"callee")&&!bt.call(t,"callee")},Le=Array.isArray;function ze(t){return null!=t&&Ve(t.length)&&!We(t)}var Be=Ot||Ke;function Ue(t,e){return ve(t,e)}function We(t){if(!He(t))return!1;var e=ge(t);return e==d||e==p||e==c||e==x}function Ve(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function He(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function qe(t){return null!=t&&"object"==typeof t}var Ge=K?et(K):xe;function Xe(t){return ze(t)?fe(t):we(t)}function Ye(){return[]}function Ke(){return!1}t.exports=Ue})),Nt={a:["a","à","á","â","ã","ä","å","æ","ā","ă","ą","ǎ","ǟ","ǡ","ǻ","ȁ","ȃ","ȧ","ɐ","ɑ","ɒ","ͣ","а","ӑ","ӓ","ᵃ","ᵄ","ᶏ","ḁ","ẚ","ạ","ả","ấ","ầ","ẩ","ẫ","ậ","ắ","ằ","ẳ","ẵ","ặ","ₐ","ⱥ","ａ"],A:["A","À","Á","Â","Ã","Ä","Å","Ā","Ă","Ą","Ǎ","Ǟ","Ǡ","Ǻ","Ȁ","Ȃ","Ȧ","Ⱥ","А","Ӑ","Ӓ","ᴀ","ᴬ","Ḁ","Ạ","Ả","Ấ","Ầ","Ẩ","Ẫ","Ậ","Ắ","Ằ","Ẳ","Ẵ","Ặ","Ａ"],b:["b","ƀ","ƃ","ɓ","ᖯ","ᵇ","ᵬ","ᶀ","ḃ","ḅ","ḇ","ｂ"],B:["B","Ɓ","Ƃ","Ƀ","ʙ","ᛒ","ᴃ","ᴮ","ᴯ","Ḃ","Ḅ","Ḇ","Ｂ"],c:["c","ç","ć","ĉ","ċ","č","ƈ","ȼ","ɕ","ͨ","ᴄ","ᶜ","ḉ","ↄ","ｃ"],C:["C","Ç","Ć","Ĉ","Ċ","Č","Ƈ","Ȼ","ʗ","Ḉ","Ｃ"],d:["d","ď","đ","Ƌ","ƌ","ȡ","ɖ","ɗ","ͩ","ᵈ","ᵭ","ᶁ","ᶑ","ḋ","ḍ","ḏ","ḑ","ḓ","ｄ"],D:["D","Ď","Đ","Ɖ","Ɗ","ᴰ","Ḋ","Ḍ","Ḏ","Ḑ","Ḓ","Ｄ"],e:["e","è","é","ê","ë","ē","ĕ","ė","ę","ě","ǝ","ȅ","ȇ","ȩ","ɇ","ɘ","ͤ","ᵉ","ᶒ","ḕ","ḗ","ḙ","ḛ","ḝ","ẹ","ẻ","ẽ","ế","ề","ể","ễ","ệ","ₑ","ｅ"],E:["E","È","É","Ê","Ë","Ē","Ĕ","Ė","Ę","Ě","Œ","Ǝ","Ɛ","Ȅ","Ȇ","Ȩ","Ɇ","ɛ","ɜ","ɶ","Є","Э","э","є","Ӭ","ӭ","ᴇ","ᴈ","ᴱ","ᴲ","ᵋ","ᵌ","ᶓ","ᶔ","ᶟ","Ḕ","Ḗ","Ḙ","Ḛ","Ḝ","Ẹ","Ẻ","Ẽ","Ế","Ề","Ể","Ễ","Ệ","Ｅ","𐐁","𐐩"],f:["f","ƒ","ᵮ","ᶂ","ᶠ","ḟ","ｆ"],F:["F","Ƒ","Ḟ","ⅎ","Ｆ"],g:["g","ĝ","ğ","ġ","ģ","ǥ","ǧ","ǵ","ɠ","ɡ","ᵍ","ᵷ","ᵹ","ᶃ","ᶢ","ḡ","ｇ"],G:["G","Ĝ","Ğ","Ġ","Ģ","Ɠ","Ǥ","Ǧ","Ǵ","ɢ","ʛ","ᴳ","Ḡ","Ｇ"],h:["h","ĥ","ħ","ƕ","ȟ","ɥ","ɦ","ʮ","ʯ","ʰ","ʱ","ͪ","Һ","һ","ᑋ","ᶣ","ḣ","ḥ","ḧ","ḩ","ḫ","ⱨ","ｈ"],H:["H","Ĥ","Ħ","Ȟ","ʜ","ᕼ","ᚺ","ᚻ","ᴴ","Ḣ","Ḥ","Ḧ","Ḩ","Ḫ","Ⱨ","Ｈ"],i:["i","ì","í","î","ï","ĩ","ī","ĭ","į","ǐ","ȉ","ȋ","ɨ","ͥ","ᴉ","ᵎ","ᵢ","ᶖ","ᶤ","ḭ","ḯ","ỉ","ị","ｉ"],I:["I","Ì","Í","Î","Ï","Ĩ","Ī","Ĭ","Į","İ","Ǐ","Ȉ","Ȋ","ɪ","І","ᴵ","ᵻ","ᶦ","ᶧ","Ḭ","Ḯ","Ỉ","Ị","Ｉ"],j:["j","ĵ","ǰ","ɉ","ʝ","ʲ","ᶡ","ᶨ","ｊ"],J:["J","Ĵ","ᴊ","ᴶ","Ｊ"],k:["k","ķ","ƙ","ǩ","ʞ","ᵏ","ᶄ","ḱ","ḳ","ḵ","ⱪ","ｋ"],K:["K","Ķ","Ƙ","Ǩ","ᴷ","Ḱ","Ḳ","Ḵ","Ⱪ","Ｋ"],l:["l","ĺ","ļ","ľ","ŀ","ł","ƚ","ȴ","ɫ","ɬ","ɭ","ˡ","ᶅ","ᶩ","ᶪ","ḷ","ḹ","ḻ","ḽ","ℓ","ⱡ"],L:["L","Ĺ","Ļ","Ľ","Ŀ","Ł","Ƚ","ʟ","ᴌ","ᴸ","ᶫ","Ḷ","Ḹ","Ḻ","Ḽ","Ⱡ","Ɫ"],m:["m","ɯ","ɰ","ɱ","ͫ","ᴟ","ᵐ","ᵚ","ᵯ","ᶆ","ᶬ","ᶭ","ḿ","ṁ","ṃ","㎡","㎥","ｍ"],M:["M","Ɯ","ᴍ","ᴹ","Ḿ","Ṁ","Ṃ","Ｍ"],n:["n","ñ","ń","ņ","ň","ŉ","ƞ","ǹ","ȵ","ɲ","ɳ","ᵰ","ᶇ","ᶮ","ᶯ","ṅ","ṇ","ṉ","ṋ","ⁿ","ｎ"],N:["N","Ñ","Ń","Ņ","Ň","Ɲ","Ǹ","Ƞ","ɴ","ᴎ","ᴺ","ᴻ","ᶰ","Ṅ","Ṇ","Ṉ","Ṋ","Ｎ"],o:["o","ò","ó","ô","õ","ö","ø","ō","ŏ","ő","ơ","ǒ","ǫ","ǭ","ǿ","ȍ","ȏ","ȫ","ȭ","ȯ","ȱ","ɵ","ͦ","о","ӧ","ө","ᴏ","ᴑ","ᴓ","ᴼ","ᵒ","ᶱ","ṍ","ṏ","ṑ","ṓ","ọ","ỏ","ố","ồ","ổ","ỗ","ộ","ớ","ờ","ở","ỡ","ợ","ₒ","ｏ","𐐬"],O:["O","Ò","Ó","Ô","Õ","Ö","Ø","Ō","Ŏ","Ő","Ɵ","Ơ","Ǒ","Ǫ","Ǭ","Ǿ","Ȍ","Ȏ","Ȫ","Ȭ","Ȯ","Ȱ","О","Ӧ","Ө","Ṍ","Ṏ","Ṑ","Ṓ","Ọ","Ỏ","Ố","Ồ","Ổ","Ỗ","Ộ","Ớ","Ờ","Ở","Ỡ","Ợ","Ｏ","𐐄"],p:["p","ᵖ","ᵱ","ᵽ","ᶈ","ṕ","ṗ","ｐ"],P:["P","Ƥ","ᴘ","ᴾ","Ṕ","Ṗ","Ᵽ","Ｐ"],q:["q","ɋ","ʠ","ᛩ","ｑ"],Q:["Q","Ɋ","Ｑ"],r:["r","ŕ","ŗ","ř","ȑ","ȓ","ɍ","ɹ","ɻ","ʳ","ʴ","ʵ","ͬ","ᵣ","ᵲ","ᶉ","ṙ","ṛ","ṝ","ṟ"],R:["R","Ŕ","Ŗ","Ř","Ʀ","Ȑ","Ȓ","Ɍ","ʀ","ʁ","ʶ","ᚱ","ᴙ","ᴚ","ᴿ","Ṙ","Ṛ","Ṝ","Ṟ","Ɽ"],s:["s","ś","ŝ","ş","š","ș","ʂ","ᔆ","ᶊ","ṡ","ṣ","ṥ","ṧ","ṩ","ｓ"],S:["S","Ś","Ŝ","Ş","Š","Ș","ȿ","ˢ","ᵴ","Ṡ","Ṣ","Ṥ","Ṧ","Ṩ","Ｓ"],t:["t","ţ","ť","ŧ","ƫ","ƭ","ț","ʇ","ͭ","ᵀ","ᵗ","ᵵ","ᶵ","ṫ","ṭ","ṯ","ṱ","ẗ","ｔ"],T:["T","Ţ","Ť","Ƭ","Ʈ","Ț","Ⱦ","ᴛ","ᵀ","Ṫ","Ṭ","Ṯ","Ṱ","Ｔ"],u:["u","ù","ú","û","ü","ũ","ū","ŭ","ů","ű","ų","ư","ǔ","ǖ","ǘ","ǚ","ǜ","ȕ","ȗ","ͧ","ߎ","ᵘ","ᵤ","ṳ","ṵ","ṷ","ṹ","ṻ","ụ","ủ","ứ","ừ","ử","ữ","ự","ｕ"],U:["U","Ù","Ú","Û","Ü","Ũ","Ū","Ŭ","Ů","Ű","Ų","Ư","Ǔ","Ǖ","Ǘ","Ǚ","Ǜ","Ȕ","Ȗ","Ʉ","ᴜ","ᵁ","ᵾ","Ṳ","Ṵ","Ṷ","Ṹ","Ṻ","Ụ","Ủ","Ứ","Ừ","Ử","Ữ","Ự","Ｕ"],v:["v","ʋ","ͮ","ᵛ","ᵥ","ᶹ","ṽ","ṿ","ⱱ","ｖ","ⱴ"],V:["V","Ʋ","Ʌ","ʌ","ᴠ","ᶌ","Ṽ","Ṿ","Ｖ"],w:["w","ŵ","ʷ","ᵂ","ẁ","ẃ","ẅ","ẇ","ẉ","ẘ","ⱳ","ｗ"],W:["W","Ŵ","ʍ","ᴡ","Ẁ","Ẃ","Ẅ","Ẇ","Ẉ","Ⱳ","Ｗ"],x:["x","̽","͓","ᶍ","ͯ","ẋ","ẍ","ₓ","ｘ"],X:["X","ˣ","ͯ","Ẋ","Ẍ","☒","✕","✖","✗","✘","Ｘ"],y:["y","ý","ÿ","ŷ","ȳ","ɏ","ʸ","ẏ","ỳ","ỵ","ỷ","ỹ","ｙ"],Y:["Y","Ý","Ŷ","Ÿ","Ƴ","ƴ","Ȳ","Ɏ","ʎ","ʏ","Ẏ","Ỳ","Ỵ","Ỷ","Ỹ","Ｙ"],z:["z","ź","ż","ž","ƶ","ȥ","ɀ","ʐ","ʑ","ᙆ","ᙇ","ᶻ","ᶼ","ᶽ","ẑ","ẓ","ẕ","ⱬ","ｚ"],Z:["Z","Ź","Ż","Ž","Ƶ","Ȥ","ᴢ","ᵶ","Ẑ","Ẓ","Ẕ","Ⱬ","Ｚ"]},It=function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charAt(n),i=!1;for(var o in Nt){var a=Nt[o].indexOf(r);if(-1!==a){e.push(o),i=!0;break}}i||e.push(r)}return e.join("")},Rt=function(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")},Ft={format:function(t){return t},filterPredicate:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("undefined"===typeof t||null===t)return!1;var i=n?String(t).toLowerCase():It(Rt(String(t)).toLowerCase()),o=n?e.toLowerCase():It(Rt(e).toLowerCase());return r?i===o:i.indexOf(o)>-1},compare:function(t,e){function n(t){return"undefined"===typeof t||null===t?"":It(t.toLowerCase())}return t=n(t),e=n(e),t<e?-1:t>e?1:0}},Pt={name:"VgtPaginationPageInfo",props:{currentPage:{default:1},lastPage:{default:1},totalRecords:{default:0},ofText:{default:"of",type:String},pageText:{default:"page",type:String}},data:function(){return{}},computed:{pageInfo:function(){return"".concat(this.ofText," ").concat(this.lastPage)}},methods:{changePage:function(t){var e=parseInt(t.target.value,10);//! invalid number
if(Number.isNaN(e)||e>this.lastPage||e<1)return t.target.value=this.currentPage,!1;t.target.value=e,this.$emit("page-changed",e)}},mounted:function(){},components:{}};function $t(t,e,n,r,i,o,a,s,u,c){"boolean"!==typeof a&&(u=s,s=a,a=!1);const l="function"===typeof n?n.options:n;let h;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),r&&(l._scopeId=r),o?(h=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,u(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=h):e&&(h=a?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),h)if(l.functional){const t=l.render;l.render=function(e,n){return h.call(n),t(e,n)}}else{const t=l.beforeCreate;l.beforeCreate=t?[].concat(t,h):[h]}return n}var Lt=Pt,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer__navigation__page-info"},[t._v("\n  "+t._s(t.pageText)+" "),n("input",{staticClass:"footer__navigation__page-info__current-entry",attrs:{type:"text"},domProps:{value:t.currentPage},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.changePage(e))}}}),t._v(" "+t._s(t.pageInfo)+"\n")])},Bt=[],Ut=void 0,Wt="data-v-9a8cd1f4",Vt=void 0,Ht=!1,qt=$t({render:zt,staticRenderFns:Bt},Ut,Lt,Wt,Ht,Vt,!1,void 0,void 0,void 0),Gt=[10,20,30,40,50],Xt={name:"VgtPagination",props:{styleClass:{default:"table table-bordered"},total:{default:null},perPage:{},rtl:{default:!1},customRowsPerPageDropdown:{default:function(){return[]}},paginateDropdownAllowAll:{default:!0},mode:{default:"records"},nextText:{default:"Next"},prevText:{default:"Prev"},rowsPerPageText:{default:"Rows per page:"},ofText:{default:"of"},pageText:{default:"page"},allText:{default:"All"}},data:function(){return{currentPage:1,prevPage:0,currentPerPage:10,rowsPerPageOptions:[]}},watch:{perPage:{handler:function(t,e){this.handlePerPage(),this.perPageChanged(e)},immediate:!0},customRowsPerPageDropdown:function(){this.handlePerPage()},total:{handler:function(t,e){-1===this.rowsPerPageOptions.indexOf(this.currentPerPage)&&(this.currentPerPage=t)}}},computed:{pagesCount:function(){var t=Math.floor(this.total/this.currentPerPage),e=this.total%this.currentPerPage;return 0===e?t:t+1},paginatedInfo:function(){var t=(this.currentPage-1)*this.currentPerPage+1,e=Math.min(this.total,this.currentPage*this.currentPerPage);return 0===e&&(t=0),"".concat(t," - ").concat(e," ").concat(this.ofText," ").concat(this.total)},nextIsPossible:function(){return this.currentPage<this.pagesCount},prevIsPossible:function(){return this.currentPage>1}},methods:{changePage:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t>0&&this.total>this.currentPerPage*(t-1)&&(this.prevPage=this.currentPage,this.currentPage=t,e&&this.pageChanged())},nextPage:function(){this.nextIsPossible&&(this.prevPage=this.currentPage,++this.currentPage,this.pageChanged())},previousPage:function(){this.prevIsPossible&&(this.prevPage=this.currentPage,--this.currentPage,this.pageChanged())},pageChanged:function(){this.$emit("page-changed",{currentPage:this.currentPage,prevPage:this.prevPage})},perPageChanged:function(t){t&&this.$emit("per-page-changed",{currentPerPage:this.currentPerPage}),this.changePage(1,!1)},handlePerPage:function(){if(null!==this.customRowsPerPageDropdown&&Array.isArray(this.customRowsPerPageDropdown)&&0!==this.customRowsPerPageDropdown.length?this.rowsPerPageOptions=jt(this.customRowsPerPageDropdown):this.rowsPerPageOptions=jt(Gt),this.perPage){this.currentPerPage=this.perPage;for(var t=!1,e=0;e<this.rowsPerPageOptions.length;e++)this.rowsPerPageOptions[e]===this.perPage&&(t=!0);t||-1===this.perPage||this.rowsPerPageOptions.unshift(this.perPage)}else this.currentPerPage=10}},mounted:function(){},components:{"pagination-page-info":qt}},Yt=Xt,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vgt-wrap__footer vgt-clearfix"},[n("div",{staticClass:"footer__row-count vgt-pull-left"},[n("span",{staticClass:"footer__row-count__label"},[t._v(t._s(t.rowsPerPageText))]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.currentPerPage,expression:"currentPerPage"}],staticClass:"footer__row-count__select",attrs:{autocomplete:"off",name:"perPageSelect"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentPerPage=e.target.multiple?n:n[0]},t.perPageChanged]}},[t._l(t.rowsPerPageOptions,(function(e,r){return n("option",{key:"rows-dropdown-option-"+r,domProps:{value:e}},[t._v("\n        "+t._s(e)+"\n      ")])})),t._v(" "),t.paginateDropdownAllowAll?n("option",{domProps:{value:t.total}},[t._v(t._s(t.allText))]):t._e()],2)]),t._v(" "),n("div",{staticClass:"footer__navigation vgt-pull-right"},[n("a",{staticClass:"footer__navigation__page-btn",class:{disabled:!t.prevIsPossible},attrs:{href:"javascript:undefined",tabindex:"0"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.previousPage(e)}}},[n("span",{staticClass:"chevron",class:{left:!t.rtl,right:t.rtl}}),t._v(" "),n("span",[t._v(t._s(t.prevText))])]),t._v(" "),"pages"===t.mode?n("pagination-page-info",{attrs:{totalRecords:t.total,lastPage:t.pagesCount,currentPage:t.currentPage,ofText:t.ofText,pageText:t.pageText},on:{"page-changed":t.changePage}}):n("div",{staticClass:"footer__navigation__info"},[t._v(t._s(t.paginatedInfo))]),t._v(" "),n("a",{staticClass:"footer__navigation__page-btn",class:{disabled:!t.nextIsPossible},attrs:{href:"javascript:undefined",tabindex:"0"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.nextPage(e)}}},[n("span",[t._v(t._s(t.nextText))]),t._v(" "),n("span",{staticClass:"chevron",class:{right:!t.rtl,left:t.rtl}})])],1)])},Zt=[],Jt=void 0,Qt=void 0,te=void 0,ee=!1,ne=$t({render:Kt,staticRenderFns:Zt},Jt,Yt,Qt,ee,te,!1,void 0,void 0,void 0),re={name:"VgtGlobalSearch",props:["value","searchEnabled","globalSearchPlaceholder"],data:function(){return{globalSearchTerm:null}},computed:{showControlBar:function(){return!!this.searchEnabled||!(!this.$slots||!this.$slots["internal-table-actions"])}},methods:{updateValue:function(t){this.$emit("input",t),this.$emit("on-keyup",t)},entered:function(t){this.$emit("on-enter",t)}}},ie=re,oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showControlBar?n("div",{staticClass:"vgt-global-search vgt-clearfix"},[n("div",{staticClass:"vgt-global-search__input vgt-pull-left"},[t.searchEnabled?n("span",{staticClass:"input__icon"},[n("div",{staticClass:"magnifying-glass"})]):t._e(),t._v(" "),t.searchEnabled?n("input",{staticClass:"vgt-input vgt-pull-left",attrs:{type:"text",placeholder:t.globalSearchPlaceholder},domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.entered(e.target.value)}}}):t._e()]),t._v(" "),n("div",{staticClass:"vgt-global-search__actions vgt-pull-right"},[t._t("internal-table-actions")],2)]):t._e()},ae=[],se=void 0,ue=void 0,ce=void 0,le=!1,he=$t({render:oe,staticRenderFns:ae},se,ie,ue,le,ce,!1,void 0,void 0,void 0),fe={name:"VgtFilterRow",props:["lineNumbers","columns","typedColumns","globalSearchEnabled","selectable","mode"],watch:{columns:{handler:function(t,e){this.populateInitialFilters()},deep:!0,immediate:!0}},data:function(){return{columnFilters:{},timer:null}},computed:{hasFilterRow:function(){for(var t=0;t<this.columns.length;t++){var e=this.columns[t];if(e.filterOptions&&e.filterOptions.enabled)return!0}return!1}},methods:{reset:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.columnFilters={},t&&this.$emit("filter-changed",this.columnFilters)},isFilterable:function(t){return t.filterOptions&&t.filterOptions.enabled},isDropdown:function(t){return this.isFilterable(t)&&t.filterOptions.filterDropdownItems&&t.filterOptions.filterDropdownItems.length},isDropdownObjects:function(t){return this.isDropdown(t)&&"object"===r(t.filterOptions.filterDropdownItems[0])},isDropdownArray:function(t){return this.isDropdown(t)&&"object"!==r(t.filterOptions.filterDropdownItems[0])},getPlaceholder:function(t){var e=this.isFilterable(t)&&t.filterOptions.placeholder||"Filter ".concat(t.label);return e},updateFiltersOnEnter:function(t,e){this.timer&&clearTimeout(this.timer),this.updateFiltersImmediately(t.field,e)},updateFiltersOnKeyup:function(t,e){"enter"!==t.filterOptions.trigger&&this.updateFilters(t,e)},updateSlotFilter:function(t,e){var n=t.filterOptions.slotFilterField||t.field;"function"===typeof t.filterOptions.formatValue&&(e=t.filterOptions.formatValue(e)),this.updateFiltersImmediately(n,e)},updateFilters:function(t,e){var n=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){n.updateFiltersImmediately(t.field,e)}),400)},updateFiltersImmediately:function(t,e){this.$set(this.columnFilters,t,e),this.$emit("filter-changed",this.columnFilters)},populateInitialFilters:function(){for(var t=0;t<this.columns.length;t++){var e=this.columns[t];this.isFilterable(e)&&"undefined"!==typeof e.filterOptions.filterValue&&null!==e.filterOptions.filterValue&&this.$set(this.columnFilters,e.field,e.filterOptions.filterValue)}this.$emit("filter-changed",this.columnFilters)}}},de=fe,pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasFilterRow?n("tr",[t.lineNumbers?n("th"):t._e(),t._v(" "),t.selectable?n("th"):t._e(),t._v(" "),t._l(t.columns,(function(e,r){return e.hidden?t._e():n("th",{key:r,staticClass:"filter-th"},[t._t("column-filter",[t.isFilterable(e)?n("div",[t.isDropdown(e)?t._e():n("input",{staticClass:"vgt-input",attrs:{type:"text",placeholder:t.getPlaceholder(e)},domProps:{value:t.columnFilters[e.field]},on:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.updateFiltersOnEnter(e,n.target.value)},input:function(n){return t.updateFiltersOnKeyup(e,n.target.value)}}}),t._v(" "),t.isDropdownArray(e)?n("select",{staticClass:"vgt-select",domProps:{value:t.columnFilters[e.field]},on:{change:function(n){return t.updateFilters(e,n.target.value)}}},[n("option",{key:"-1",attrs:{value:""}},[t._v(t._s(t.getPlaceholder(e)))]),t._v(" "),t._l(e.filterOptions.filterDropdownItems,(function(e,r){return n("option",{key:r,domProps:{value:e}},[t._v("\n              "+t._s(e)+"\n            ")])}))],2):t._e(),t._v(" "),t.isDropdownObjects(e)?n("select",{staticClass:"vgt-select",domProps:{value:t.columnFilters[e.field]},on:{change:function(n){return t.updateFilters(e,n.target.value,!0)}}},[n("option",{key:"-1",attrs:{value:""}},[t._v(t._s(t.getPlaceholder(e)))]),t._v(" "),t._l(e.filterOptions.filterDropdownItems,(function(e,r){return n("option",{key:r,domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2):t._e()]):t._e()],{column:e,updateFilters:t.updateSlotFilter})],2)}))],2):t._e()},ge=[],me=void 0,ve="data-v-1c6bfd21",ye=void 0,be=!1,xe=$t({render:pe,staticRenderFns:ge},me,de,ve,be,ye,!1,void 0,void 0,void 0),we="asc";function _e(t){return t.firstSortType||we}function Oe(t,e){return 1===t.length&&t[0].field===e.field?t[0].type:void 0}function Se(t){return"asc"===t?"desc":we}function Ce(t,e){for(var n=0;n<t.length;n++)if(e.field===t[n].field)return n;return-1}var ke=function(t,e){var n=Oe(t,e);return[{field:e.field,type:n?Se(n):_e(e)}]},Ae=function(t,e){var n=Ce(t,e);return-1===n?t.push({field:e.field,type:_e(e)}):t[n].type=Se(t[n].type),t},Te={name:"VgtTableHeader",props:{lineNumbers:{default:!1,type:Boolean},selectable:{default:!1,type:Boolean},allSelected:{default:!1,type:Boolean},allSelectedIndeterminate:{default:!1,type:Boolean},columns:{type:Array},mode:{type:String},typedColumns:{},sortable:{type:Boolean},getClasses:{type:Function},searchEnabled:{type:Boolean},tableRef:{},paginated:{}},watch:{columns:{handler:function(){this.setColumnStyles()},immediate:!0},tableRef:{handler:function(){this.setColumnStyles()},immediate:!0},paginated:{handler:function(){this.tableRef&&this.setColumnStyles()},deep:!0}},data:function(){return{checkBoxThStyle:{},lineNumberThStyle:{},columnStyles:[],sorts:[]}},computed:{},methods:{reset:function(){this.$refs["filter-row"].reset(!0)},toggleSelectAll:function(){this.$emit("on-toggle-select-all")},isSortableColumn:function(t){var e=t.sortable,n="boolean"===typeof e?e:this.sortable;return n},sort:function(t,e){this.isSortableColumn(e)&&(t.shiftKey?this.sorts=Ae(this.sorts,e):this.sorts=ke(this.sorts,e),this.$emit("on-sort-change",this.sorts))},setInitialSort:function(t){this.sorts=t,this.$emit("on-sort-change",this.sorts)},getColumnSort:function(t){for(var e=0;e<this.sorts.length;e+=1)if(this.sorts[e].field===t.field)return this.sorts[e].type||"asc";return null},getHeaderClasses:function(t,e){var n=At({},this.getClasses(e,"th"),{sortable:this.isSortableColumn(t),"sorting sorting-desc":"desc"===this.getColumnSort(t),"sorting sorting-asc":"asc"===this.getColumnSort(t)});return n},filterRows:function(t){this.$emit("filter-changed",t)},getWidthStyle:function(t){if(window&&window.getComputedStyle&&t){var e=window.getComputedStyle(t,null);return{width:e.width}}return{width:"auto"}},setColumnStyles:function(){for(var t=[],e=0;e<this.columns.length;e++)if(this.tableRef){var n=0;this.selectable&&n++,this.lineNumbers&&n++;var r=this.tableRef.rows[0].cells[e+n];t.push(this.getWidthStyle(r))}else t.push({minWidth:this.columns[e].width?this.columns[e].width:"auto",maxWidth:this.columns[e].width?this.columns[e].width:"auto",width:this.columns[e].width?this.columns[e].width:"auto"});this.columnStyles=t},getColumnStyle:function(t,e){var n={minWidth:t.width?t.width:"auto",maxWidth:t.width?t.width:"auto",width:t.width?t.width:"auto"};if(this.tableRef){this.selectable&&e++,this.lineNumbers&&e++;var r=this.tableRef.rows[0].cells[e],i=window.getComputedStyle(r,null);n.width=i.width}return n}},mounted:function(){window.addEventListener("resize",this.setColumnStyles)},beforeDestroy:function(){window.removeEventListener("resize",this.setColumnStyles)},components:{"vgt-filter-row":xe}},Ee=Te,je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[t.lineNumbers?n("th",{staticClass:"line-numbers"}):t._e(),t._v(" "),t.selectable?n("th",{staticClass:"vgt-checkbox-col"},[n("input",{attrs:{type:"checkbox"},domProps:{checked:t.allSelected,indeterminate:t.allSelectedIndeterminate},on:{change:t.toggleSelectAll}})]):t._e(),t._v(" "),t._l(t.columns,(function(e,r){return e.hidden?t._e():n("th",{key:r,class:t.getHeaderClasses(e,r),style:t.columnStyles[r],on:{click:function(n){return t.sort(n,e)}}},[t._t("table-column",[n("span",[t._v(t._s(e.label))])],{column:e})],2)}))],2),t._v(" "),n("vgt-filter-row",{ref:"filter-row",tag:"tr",attrs:{"global-search-enabled":t.searchEnabled,"line-numbers":t.lineNumbers,selectable:t.selectable,columns:t.columns,mode:t.mode,"typed-columns":t.typedColumns},on:{"filter-changed":t.filterRows},scopedSlots:t._u([{key:"column-filter",fn:function(e){return[t._t("column-filter",null,{column:e.column,updateFilters:e.updateFilters})]}}],null,!0)})],1)},De=[],Me=void 0,Ne="data-v-2d1e3c02",Ie=void 0,Re=!1,Fe=$t({render:je,staticRenderFns:De},Me,Ee,Ne,Re,Ie,!1,void 0,void 0,void 0),Pe={name:"VgtHeaderRow",props:{headerRow:{type:Object},columns:{type:Array},lineNumbers:{type:Boolean},selectable:{type:Boolean},selectAllByGroup:{type:Boolean},collapsable:{type:[Boolean,Number],default:!1},collectFormatted:{type:Function},formattedRow:{type:Function},getClasses:{type:Function},fullColspan:{type:Number},groupIndex:{type:Number}},data:function(){return{}},computed:{allSelected:function(){var t=this.headerRow;this.groupChildObject;return t.children.filter((function(t){return t.vgtSelected})).length===t.children.length}},methods:{columnCollapsable:function(t){return!0===this.collapsable?0===t:t===this.collapsable},toggleSelectGroup:function(t){this.$emit("on-select-group-change",{groupIndex:this.groupIndex,checked:t.target.checked})}},mounted:function(){},components:{}},$e=Pe,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",["span"===t.headerRow.mode?n("th",{staticClass:"vgt-left-align vgt-row-header",attrs:{colspan:t.fullColspan}},[t.selectAllByGroup?[t._t("table-header-group-select",[n("input",{attrs:{type:"checkbox"},domProps:{checked:t.allSelected},on:{change:function(e){return t.toggleSelectGroup(e)}}})],{columns:t.columns,row:t.headerRow})]:t._e(),t._v(" "),n("span",{on:{click:function(e){t.collapsable&&t.$emit("vgtExpand",!t.headerRow.vgtIsExpanded)}}},[t.collapsable?n("span",{staticClass:"triangle",class:{expand:t.headerRow.vgtIsExpanded}}):t._e(),t._v(" "),t._t("table-header-row",[t.headerRow.html?n("span",{domProps:{innerHTML:t._s(t.headerRow.label)}}):n("span",[t._v("\n          "+t._s(t.headerRow.label)+"\n        ")])],{row:t.headerRow})],2)],2):t._e(),t._v(" "),"span"!==t.headerRow.mode&&t.lineNumbers?n("th",{staticClass:"vgt-row-header"}):t._e(),t._v(" "),"span"!==t.headerRow.mode&&t.selectable?n("th",{staticClass:"vgt-row-header"},[t.selectAllByGroup?[t._t("table-header-group-select",[n("input",{attrs:{type:"checkbox"},domProps:{checked:t.allSelected},on:{change:function(e){return t.toggleSelectGroup(e)}}})],{columns:t.columns,row:t.headerRow})]:t._e()],2):t._e(),t._v(" "),t._l(t.columns,(function(e,r){return"span"===t.headerRow.mode||e.hidden?t._e():n("th",{key:r,staticClass:"vgt-row-header",class:t.getClasses(r,"td"),on:{click:function(e){t.columnCollapsable(r)&&t.$emit("vgtExpand",!t.headerRow.vgtIsExpanded)}}},[t.columnCollapsable(r)?n("span",{staticClass:"triangle",class:{expand:t.headerRow.vgtIsExpanded}}):t._e(),t._v(" "),t._t("table-header-row",[e.html?t._e():n("span",[t._v("\n        "+t._s(t.collectFormatted(t.headerRow,e,!0))+"\n      ")]),t._v(" "),e.html?n("span",{domProps:{innerHTML:t._s(t.collectFormatted(t.headerRow,e,!0))}}):t._e()],{row:t.headerRow,column:e,formattedRow:t.formattedRow(t.headerRow,!0)})],2)}))],2)},ze=[],Be=void 0,Ue=void 0,We=void 0,Ve=!1,He=$t({render:Le,staticRenderFns:ze},Be,$e,Ue,Ve,We,!1,void 0,void 0,void 0);function qe(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"===typeof t||"[object Number]"===e?new Date(t):("string"!==typeof t&&"[object String]"!==e||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Ge(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Xe(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=qe(t).getTime(),r=Ge(e);return new Date(n+r)}var Ye=6e4;function Ke(t){var e=new Date(t.getTime()),n=e.getTimezoneOffset();e.setSeconds(0,0);var r=e.getTime()%Ye;return n*Ye+r}function Ze(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=qe(t),r=qe(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function Je(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=qe(t);return!isNaN(e)}var Qe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function tn(t,e,n){var r;return n=n||{},r="string"===typeof Qe[t]?Qe[t]:1===e?Qe[t].one:Qe[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r}function en(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth,i=t.formats[r]||t.formats[t.defaultWidth];return i}}var nn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},on={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},an={date:en({formats:nn,defaultWidth:"full"}),time:en({formats:rn,defaultWidth:"full"}),dateTime:en({formats:on,defaultWidth:"full"})},sn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function un(t,e,n,r){return sn[t]}function cn(t){return function(e,n){var r,i=n||{},o=i.context?String(i.context):"standalone";if("formatting"===o&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,s=i.width?String(i.width):a;r=t.formattingValues[s]||t.formattingValues[a]}else{var u=t.defaultWidth,c=i.width?String(i.width):t.defaultWidth;r=t.values[c]||t.values[u]}var l=t.argumentCallback?t.argumentCallback(e):e;return r[l]}}var ln={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function mn(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"}var vn={ordinalNumber:mn,era:cn({values:ln,defaultWidth:"wide"}),quarter:cn({values:hn,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:cn({values:fn,defaultWidth:"wide"}),day:cn({values:dn,defaultWidth:"wide"}),dayPeriod:cn({values:pn,defaultWidth:"wide",formattingValues:gn,defaultFormattingWidth:"wide"})};function yn(t){return function(e,n){var r=String(e),i=n||{},o=r.match(t.matchPattern);if(!o)return null;var a=o[0],s=r.match(t.parsePattern);if(!s)return null;var u=t.valueCallback?t.valueCallback(s[0]):s[0];return u=i.valueCallback?i.valueCallback(u):u,{value:u,rest:r.slice(a.length)}}}function bn(t){return function(e,n){var r=String(e),i=n||{},o=i.width,a=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],s=r.match(a);if(!s)return null;var u,c=s[0],l=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(l)?l.findIndex((function(t){return t.test(r)})):xn(l,(function(t){return t.test(r)})),u=t.valueCallback?t.valueCallback(u):u,u=i.valueCallback?i.valueCallback(u):u,{value:u,rest:r.slice(c.length)}}}function xn(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}var wn=/^(\d+)(th|st|nd|rd)?/i,_n=/\d+/i,On={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sn={any:[/^b/i,/^(a|c)/i]},Cn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kn={any:[/1/i,/2/i,/3/i,/4/i]},An={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Tn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},En={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},jn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Dn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Mn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nn={ordinalNumber:yn({matchPattern:wn,parsePattern:_n,valueCallback:function(t){return parseInt(t,10)}}),era:bn({matchPatterns:On,defaultMatchWidth:"wide",parsePatterns:Sn,defaultParseWidth:"any"}),quarter:bn({matchPatterns:Cn,defaultMatchWidth:"wide",parsePatterns:kn,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:bn({matchPatterns:An,defaultMatchWidth:"wide",parsePatterns:Tn,defaultParseWidth:"any"}),day:bn({matchPatterns:En,defaultMatchWidth:"wide",parsePatterns:jn,defaultParseWidth:"any"}),dayPeriod:bn({matchPatterns:Dn,defaultMatchWidth:"any",parsePatterns:Mn,defaultParseWidth:"any"})},In={formatDistance:tn,formatLong:an,formatRelative:un,localize:vn,match:Nn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Rn(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Ge(e);return Xe(t,-n)}function Fn(t,e){var n=t<0?"-":"",r=Math.abs(t).toString();while(r.length<e)r="0"+r;return n+r}var Pn={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return Fn("yy"===e?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):Fn(n+1,2)},d:function(t,e){return Fn(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.toUpperCase();case"aaaaa":return n[0];case"aaaa":default:return"am"===n?"a.m.":"p.m."}},h:function(t,e){return Fn(t.getUTCHours()%12||12,e.length)},H:function(t,e){return Fn(t.getUTCHours(),e.length)},m:function(t,e){return Fn(t.getUTCMinutes(),e.length)},s:function(t,e){return Fn(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,n-3));return Fn(i,e.length)}},$n=864e5;function Ln(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=qe(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/$n)+1}function zn(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=1,n=qe(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Bn(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=qe(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=zn(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=zn(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function Un(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=Bn(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=zn(n);return r}var Wn=6048e5;function Vn(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=qe(t),n=zn(e).getTime()-Un(e).getTime();return Math.round(n/Wn)+1}function Hn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:Ge(i),a=null==n.weekStartsOn?o:Ge(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=qe(t),u=s.getUTCDay(),c=(u<a?7:0)+u-a;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function qn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=qe(t,e),r=n.getUTCFullYear(),i=e||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:Ge(a),u=null==i.firstWeekContainsDate?s:Ge(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,u),c.setUTCHours(0,0,0,0);var l=Hn(c,e),h=new Date(0);h.setUTCFullYear(r,0,u),h.setUTCHours(0,0,0,0);var f=Hn(h,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function Gn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=e||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:Ge(i),a=null==n.firstWeekContainsDate?o:Ge(n.firstWeekContainsDate),s=qn(t,e),u=new Date(0);u.setUTCFullYear(s,0,a),u.setUTCHours(0,0,0,0);var c=Hn(u,e);return c}var Xn=6048e5;function Yn(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=qe(t),r=Hn(n,e).getTime()-Gn(n,e).getTime();return Math.round(r/Xn)+1}var Kn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Zn={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Pn.y(t,e)},Y:function(t,e,n,r){var i=qn(t,r),o=i>0?i:1-i;if("YY"===e){var a=o%100;return Fn(a,2)}return"Yo"===e?n.ordinalNumber(o,{unit:"year"}):Fn(o,e.length)},R:function(t,e){var n=Bn(t);return Fn(n,e.length)},u:function(t,e){var n=t.getUTCFullYear();return Fn(n,e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Fn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Fn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return Pn.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return Fn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=Yn(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):Fn(i,e.length)},I:function(t,e,n){var r=Vn(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):Fn(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Pn.d(t,e)},D:function(t,e,n){var r=Ln(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):Fn(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Fn(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Fn(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return Fn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?Kn.noon:0===i?Kn.midnight:i/12>=1?"pm":"am",e){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?Kn.evening:i>=12?Kn.afternoon:i>=4?Kn.morning:Kn.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Pn.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Pn.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):Fn(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):Fn(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Pn.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Pn.s(t,e)},S:function(t,e){return Pn.S(t,e)},X:function(t,e,n,r){var i=r._originalDate||t,o=i.getTimezoneOffset();if(0===o)return"Z";switch(e){case"X":return Qn(o);case"XXXX":case"XX":return tr(o);case"XXXXX":case"XXX":default:return tr(o,":")}},x:function(t,e,n,r){var i=r._originalDate||t,o=i.getTimezoneOffset();switch(e){case"x":return Qn(o);case"xxxx":case"xx":return tr(o);case"xxxxx":case"xxx":default:return tr(o,":")}},O:function(t,e,n,r){var i=r._originalDate||t,o=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Jn(o,":");case"OOOO":default:return"GMT"+tr(o,":")}},z:function(t,e,n,r){var i=r._originalDate||t,o=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Jn(o,":");case"zzzz":default:return"GMT"+tr(o,":")}},t:function(t,e,n,r){var i=r._originalDate||t,o=Math.floor(i.getTime()/1e3);return Fn(o,e.length)},T:function(t,e,n,r){var i=r._originalDate||t,o=i.getTime();return Fn(o,e.length)}};function Jn(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=e||"";return n+String(i)+a+Fn(o,2)}function Qn(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Fn(Math.abs(t)/60,2)}return tr(t,e)}function tr(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),o=Fn(Math.floor(i/60),2),a=Fn(i%60,2);return r+o+n+a}function er(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function nr(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}function rr(t,e){var n,r=t.match(/(P+)(p+)?/),i=r[1],o=r[2];if(!o)return er(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"});break}return n.replace("{{date}}",er(i,e)).replace("{{time}}",nr(o,e))}var ir={p:nr,P:rr},or=["D","DD"],ar=["YY","YYYY"];function sr(t){return-1!==or.indexOf(t)}function ur(t){return-1!==ar.indexOf(t)}function cr(t){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if("YY"===t)throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if("D"===t)throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if("DD"===t)throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}var lr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fr=/^'(.*?)'?$/,dr=/''/g,pr=/[a-zA-Z]/;function gr(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(e),i=n||{},o=i.locale||In,a=o.options&&o.options.firstWeekContainsDate,s=null==a?1:Ge(a),u=null==i.firstWeekContainsDate?s:Ge(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,l=null==c?0:Ge(c),h=null==i.weekStartsOn?l:Ge(i.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=qe(t);if(!Je(f))throw new RangeError("Invalid time value");var d=Ke(f),p=Rn(f,d),g={firstWeekContainsDate:u,weekStartsOn:h,locale:o,_originalDate:f},m=r.match(hr).map((function(t){var e=t[0];if("p"===e||"P"===e){var n=ir[e];return n(t,o.formatLong,g)}return t})).join("").match(lr).map((function(t){if("''"===t)return"'";var e=t[0];if("'"===e)return mr(t);var n=Zn[e];if(n)return!i.useAdditionalWeekYearTokens&&ur(t)&&cr(t),!i.useAdditionalDayOfYearTokens&&sr(t)&&cr(t),n(p,t,o.localize,g);if(e.match(pr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+e+"`");return t})).join("");return m}function mr(t){return t.match(fr)[1].replace(dr,"'")}function vr(t,e){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e=e||{},e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function yr(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=n||{},i=r.locale,o=i&&i.options&&i.options.weekStartsOn,a=null==o?0:Ge(o),s=null==r.weekStartsOn?a:Ge(r.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=qe(t),c=Ge(e),l=u.getUTCDay(),h=c%7,f=(h+7)%7,d=(f<s?7:0)+c-l;return u.setUTCDate(u.getUTCDate()+d),u}function br(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=Ge(e);n%7===0&&(n-=7);var r=1,i=qe(t),o=i.getUTCDay(),a=n%7,s=(a+7)%7,u=(s<r?7:0)+n-o;return i.setUTCDate(i.getUTCDate()+u),i}function xr(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var n=qe(t),r=Ge(e),i=Vn(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}function wr(t,e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=qe(t),i=Ge(e),o=Yn(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}var _r=36e5,Or=6e4,Sr=1e3,Cr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},kr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ar(t,e,n){var r=e.match(t);if(!r)return null;var i=parseInt(r[0],10);return{value:n?n(i):i,rest:e.slice(r[0].length)}}function Tr(t,e){var n=e.match(t);if(!n)return null;if("Z"===n[0])return{value:0,rest:e.slice(1)};var r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(i*_r+o*Or+a*Sr),rest:e.slice(n[0].length)}}function Er(t,e){return Ar(Cr.anyDigitsSigned,t,e)}function jr(t,e,n){switch(t){case 1:return Ar(Cr.singleDigit,e,n);case 2:return Ar(Cr.twoDigits,e,n);case 3:return Ar(Cr.threeDigits,e,n);case 4:return Ar(Cr.fourDigits,e,n);default:return Ar(new RegExp("^\\d{1,"+t+"}"),e,n)}}function Dr(t,e,n){switch(t){case 1:return Ar(Cr.singleDigitSigned,e,n);case 2:return Ar(Cr.twoDigitsSigned,e,n);case 3:return Ar(Cr.threeDigitsSigned,e,n);case 4:return Ar(Cr.fourDigitsSigned,e,n);default:return Ar(new RegExp("^-?\\d{1,"+t+"}"),e,n)}}function Mr(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Nr(t,e){var n,r=e>0,i=r?e:1-e;if(i<=50)n=t||100;else{var o=i+50,a=100*Math.floor(o/100),s=t>=o%100;n=t+a-(s?100:0)}return r?n:1-n}var Ir=[31,28,31,30,31,30,31,31,30,31,30,31],Rr=[31,29,31,30,31,30,31,31,30,31,30,31];function Fr(t){return t%400===0||t%4===0&&t%100!==0}var Pr={G:{priority:140,parse:function(t,e,n,r){switch(e){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}},set:function(t,e,n,r){return e.era=n,t.setUTCFullYear(n,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(t,e,n,r){var i=function(t){return{year:t,isTwoDigitYear:"yy"===e}};switch(e){case"y":return jr(4,t,i);case"yo":return n.ordinalNumber(t,{unit:"year",valueCallback:i});default:return jr(e.length,t,i)}},validate:function(t,e,n){return e.isTwoDigitYear||e.year>0},set:function(t,e,n,r){var i=t.getUTCFullYear();if(n.isTwoDigitYear){var o=Nr(n.year,i);return t.setUTCFullYear(o,0,1),t.setUTCHours(0,0,0,0),t}var a="era"in e&&1!==e.era?1-n.year:n.year;return t.setUTCFullYear(a,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(t,e,n,r){var i=function(t){return{year:t,isTwoDigitYear:"YY"===e}};switch(e){case"Y":return jr(4,t,i);case"Yo":return n.ordinalNumber(t,{unit:"year",valueCallback:i});default:return jr(e.length,t,i)}},validate:function(t,e,n){return e.isTwoDigitYear||e.year>0},set:function(t,e,n,r){var i=qn(t,r);if(n.isTwoDigitYear){var o=Nr(n.year,i);return t.setUTCFullYear(o,0,r.firstWeekContainsDate),t.setUTCHours(0,0,0,0),Hn(t,r)}var a="era"in e&&1!==e.era?1-n.year:n.year;return t.setUTCFullYear(a,0,r.firstWeekContainsDate),t.setUTCHours(0,0,0,0),Hn(t,r)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(t,e,n,r){return Dr("R"===e?4:e.length,t)},set:function(t,e,n,r){var i=new Date(0);return i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0),zn(i)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(t,e,n,r){return Dr("u"===e?4:e.length,t)},set:function(t,e,n,r){return t.setUTCFullYear(n,0,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(t,e,n,r){switch(e){case"Q":case"QQ":return jr(e.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=1&&e<=4},set:function(t,e,n,r){return t.setUTCMonth(3*(n-1),1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(t,e,n,r){switch(e){case"q":case"qq":return jr(e.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=1&&e<=4},set:function(t,e,n,r){return t.setUTCMonth(3*(n-1),1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(t,e,n,r){var i=function(t){return t-1};switch(e){case"M":return Ar(Cr.month,t,i);case"MM":return jr(2,t,i);case"Mo":return n.ordinalNumber(t,{unit:"month",valueCallback:i});case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,r){return t.setUTCMonth(n,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(t,e,n,r){var i=function(t){return t-1};switch(e){case"L":return Ar(Cr.month,t,i);case"LL":return jr(2,t,i);case"Lo":return n.ordinalNumber(t,{unit:"month",valueCallback:i});case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,r){return t.setUTCMonth(n,1),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(t,e,n,r){switch(e){case"w":return Ar(Cr.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return jr(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=53},set:function(t,e,n,r){return Hn(wr(t,n,r),r)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(t,e,n,r){switch(e){case"I":return Ar(Cr.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return jr(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=53},set:function(t,e,n,r){return zn(xr(t,n,r),r)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,parse:function(t,e,n,r){switch(e){case"d":return Ar(Cr.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return jr(e.length,t)}},validate:function(t,e,n){var r=t.getUTCFullYear(),i=Fr(r),o=t.getUTCMonth();return i?e>=1&&e<=Rr[o]:e>=1&&e<=Ir[o]},set:function(t,e,n,r){return t.setUTCDate(n),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,parse:function(t,e,n,r){switch(e){case"D":case"DD":return Ar(Cr.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return jr(e.length,t)}},validate:function(t,e,n){var r=t.getUTCFullYear(),i=Fr(r);return i?e>=1&&e<=366:e>=1&&e<=365},set:function(t,e,n,r){return t.setUTCMonth(0,n),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(t,e,n,r){switch(e){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,r){return t=yr(t,n,r),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(t,e,n,r){var i=function(t){var e=7*Math.floor((t-1)/7);return(t+r.weekStartsOn+6)%7+e};switch(e){case"e":case"ee":return jr(e.length,t,i);case"eo":return n.ordinalNumber(t,{unit:"day",valueCallback:i});case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,r){return t=yr(t,n,r),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(t,e,n,r){var i=function(t){var e=7*Math.floor((t-1)/7);return(t+r.weekStartsOn+6)%7+e};switch(e){case"c":case"cc":return jr(e.length,t,i);case"co":return n.ordinalNumber(t,{unit:"day",valueCallback:i});case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}},validate:function(t,e,n){return e>=0&&e<=6},set:function(t,e,n,r){return t=yr(t,n,r),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(t,e,n,r){var i=function(t){return 0===t?7:t};switch(e){case"i":case"ii":return jr(e.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return n.day(t,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(t,{width:"short",context:"formatting",valueCallback:i})||n.day(t,{width:"narrow",context:"formatting",valueCallback:i});case"iiiii":return n.day(t,{width:"narrow",context:"formatting",valueCallback:i});case"iiiiii":return n.day(t,{width:"short",context:"formatting",valueCallback:i})||n.day(t,{width:"narrow",context:"formatting",valueCallback:i});case"iiii":default:return n.day(t,{width:"wide",context:"formatting",valueCallback:i})||n.day(t,{width:"abbreviated",context:"formatting",valueCallback:i})||n.day(t,{width:"short",context:"formatting",valueCallback:i})||n.day(t,{width:"narrow",context:"formatting",valueCallback:i})}},validate:function(t,e,n){return e>=1&&e<=7},set:function(t,e,n,r){return t=br(t,n,r),t.setUTCHours(0,0,0,0),t},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(t,e,n,r){switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,r){return t.setUTCHours(Mr(n),0,0,0),t},incompatibleTokens:["b","B","H","K","k","t","T"]},b:{priority:80,parse:function(t,e,n,r){switch(e){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,r){return t.setUTCHours(Mr(n),0,0,0),t},incompatibleTokens:["a","B","H","K","k","t","T"]},B:{priority:80,parse:function(t,e,n,r){switch(e){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}},set:function(t,e,n,r){return t.setUTCHours(Mr(n),0,0,0),t},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(t,e,n,r){switch(e){case"h":return Ar(Cr.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return jr(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=12},set:function(t,e,n,r){var i=t.getUTCHours()>=12;return i&&n<12?t.setUTCHours(n+12,0,0,0):i||12!==n?t.setUTCHours(n,0,0,0):t.setUTCHours(0,0,0,0),t},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(t,e,n,r){switch(e){case"H":return Ar(Cr.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return jr(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=23},set:function(t,e,n,r){return t.setUTCHours(n,0,0,0),t},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(t,e,n,r){switch(e){case"K":return Ar(Cr.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return jr(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=11},set:function(t,e,n,r){var i=t.getUTCHours()>=12;return i&&n<12?t.setUTCHours(n+12,0,0,0):t.setUTCHours(n,0,0,0),t},incompatibleTokens:["a","b","h","H","k","t","T"]},k:{priority:70,parse:function(t,e,n,r){switch(e){case"k":return Ar(Cr.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return jr(e.length,t)}},validate:function(t,e,n){return e>=1&&e<=24},set:function(t,e,n,r){var i=n<=24?n%24:n;return t.setUTCHours(i,0,0,0),t},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(t,e,n,r){switch(e){case"m":return Ar(Cr.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return jr(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=59},set:function(t,e,n,r){return t.setUTCMinutes(n,0,0),t},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(t,e,n,r){switch(e){case"s":return Ar(Cr.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return jr(e.length,t)}},validate:function(t,e,n){return e>=0&&e<=59},set:function(t,e,n,r){return t.setUTCSeconds(n,0),t},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(t,e,n,r){var i=function(t){return Math.floor(t*Math.pow(10,3-e.length))};return jr(e.length,t,i)},set:function(t,e,n,r){return t.setUTCMilliseconds(n),t},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(t,e,n,r){switch(e){case"X":return Tr(kr.basicOptionalMinutes,t);case"XX":return Tr(kr.basic,t);case"XXXX":return Tr(kr.basicOptionalSeconds,t);case"XXXXX":return Tr(kr.extendedOptionalSeconds,t);case"XXX":default:return Tr(kr.extended,t)}},set:function(t,e,n,r){return e.timestampIsSet?t:new Date(t.getTime()-n)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(t,e,n,r){switch(e){case"x":return Tr(kr.basicOptionalMinutes,t);case"xx":return Tr(kr.basic,t);case"xxxx":return Tr(kr.basicOptionalSeconds,t);case"xxxxx":return Tr(kr.extendedOptionalSeconds,t);case"xxx":default:return Tr(kr.extended,t)}},set:function(t,e,n,r){return e.timestampIsSet?t:new Date(t.getTime()-n)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(t,e,n,r){return Er(t)},set:function(t,e,n,r){return[new Date(1e3*n),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(t,e,n,r){return Er(t)},set:function(t,e,n,r){return[new Date(n),{timestampIsSet:!0}]},incompatibleTokens:"*"}},$r=10,Lr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Br=/^'(.*?)'?$/,Ur=/''/g,Wr=/\S/,Vr=/[a-zA-Z]/;function Hr(t,e,n,r){if(arguments.length<3)throw new TypeError("3 arguments required, but only "+arguments.length+" present");var i=String(t),o=String(e),a=r||{},s=a.locale||In;if(!s.match)throw new RangeError("locale must contain match property");var u=s.options&&s.options.firstWeekContainsDate,c=null==u?1:Ge(u),l=null==a.firstWeekContainsDate?c:Ge(a.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=s.options&&s.options.weekStartsOn,f=null==h?0:Ge(h),d=null==a.weekStartsOn?f:Ge(a.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===o)return""===i?qe(n):new Date(NaN);var p,g={firstWeekContainsDate:l,weekStartsOn:d,locale:s},m=[{priority:$r,set:qr,index:0}],v=o.match(zr).map((function(t){var e=t[0];if("p"===e||"P"===e){var n=ir[e];return n(t,s.formatLong,g)}return t})).join("").match(Lr),y=[];for(p=0;p<v.length;p++){var b=v[p];!a.useAdditionalWeekYearTokens&&ur(b)&&cr(b),!a.useAdditionalDayOfYearTokens&&sr(b)&&cr(b);var x=b[0],w=Pr[x];if(w){var _=w.incompatibleTokens;if(Array.isArray(_)){for(var O=void 0,S=0;S<y.length;S++){var C=y[S].token;if(-1!==_.indexOf(C)||C===x){O=y[S];break}}if(O)throw new RangeError("The format string mustn't contain `".concat(O.fullToken,"` and `").concat(b,"` at the same time"))}else if("*"===w.incompatibleTokens&&y.length)throw new RangeError("The format string mustn't contain `".concat(b,"` and any other token at the same time"));y.push({token:x,fullToken:b});var k=w.parse(i,b,s.match,g);if(!k)return new Date(NaN);m.push({priority:w.priority,set:w.set,validate:w.validate,value:k.value,index:m.length}),i=k.rest}else{if(x.match(Vr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if("''"===b?b="'":"'"===x&&(b=Gr(b)),0!==i.indexOf(b))return new Date(NaN);i=i.slice(b.length)}}if(i.length>0&&Wr.test(i))return new Date(NaN);var A=m.map((function(t){return t.priority})).sort((function(t,e){return e-t})).filter((function(t,e,n){return n.indexOf(t)===e})).map((function(t){return m.filter((function(e){return e.priority===t})).reverse()})).map((function(t){return t[0]})),T=qe(n);if(isNaN(T))return new Date(NaN);var E=Rn(T,Ke(T)),j={};for(p=0;p<A.length;p++){var D=A[p];if(D.validate&&!D.validate(E,D.value,g))return new Date(NaN);var M=D.set(E,j,D.value,g);M[0]?(E=M[0],vr(j,M[1])):E=M}return E}function qr(t,e){if(e.timestampIsSet)return t;var n=new Date(0);return n.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),n.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),n}function Gr(t){return t.match(Br)[1].replace(Ur,"'")}var Xr=jt(Ft);Xr.isRight=!0,Xr.compare=function(t,e,n){function r(t){return n&&n.dateInputFormat?Hr("".concat(t),"".concat(n.dateInputFormat),new Date):t}return t=r(t),e=r(e),Je(t)?Je(e)?Ze(t,e):1:-1},Xr.format=function(t,e){if(void 0===t||null===t)return"";var n=Hr(t,e.dateInputFormat,new Date);return Je(n)?gr(n,e.dateOutputFormat):(console.error('Not a valid date: "'.concat(t,'"')),null)};var Yr=Object.freeze({default:Xr}),Kr=jt(Ft);Kr.isRight=!0,Kr.filterPredicate=function(t,e){return 0===Kr.compare(t,e)},Kr.compare=function(t,e){function n(t){return void 0===t||null===t?-1/0:t.indexOf(".")>=0?parseFloat(t):parseInt(t,10)}return t="number"===typeof t?t:n(t),e="number"===typeof e?e:n(e),t<e?-1:t>e?1:0};var Zr=Object.freeze({default:Kr}),Jr=jt(Kr);Jr.format=function(t){return void 0===t||null===t?"":parseFloat(Math.round(100*t)/100).toFixed(2)};var Qr=Object.freeze({default:Jr}),ti=jt(Kr);ti.format=function(t){return void 0===t||null===t?"":"".concat(parseFloat(100*t).toFixed(2),"%")};var ei=Object.freeze({default:ti}),ni=jt(Ft);ni.isRight=!0,ni.filterPredicate=function(t,e){return 0===ni.compare(t,e)},ni.compare=function(t,e){function n(t){return"boolean"===typeof t?t?1:0:"string"===typeof t?"true"===t?1:0:-1/0}return t=n(t),e=n(e),t<e?-1:t>e?1:0};var ri=Object.freeze({default:ni}),ii={date:Yr,decimal:Qr,number:Zr,percentage:ei,boolean:ri},oi={},ai=ii;H(Object.keys(ai),(function(t){var e=t.replace(/^\.\//,"").replace(/\.js/,"");oi[e]=ai[t]["default"]}));var si={name:"vue-good-table",props:{isLoading:{default:null,type:Boolean},maxHeight:{default:null,type:String},fixedHeader:Boolean,theme:{default:""},mode:{default:"local"},totalRows:{},styleClass:{default:"vgt-table bordered"},columns:{},rows:{},lineNumbers:Boolean,responsive:{default:!0,type:Boolean},rtl:Boolean,rowStyleClass:{default:null,type:[Function,String]},compactMode:Boolean,groupOptions:{default:function(){return{enabled:!1,collapsable:!1,rowKey:null}}},selectOptions:{default:function(){return{enabled:!1,selectionInfoClass:"",selectionText:"rows selected",clearSelectionText:"clear",disableSelectInfo:!1,selectAllByGroup:!1}}},sortOptions:{default:function(){return{enabled:!0,initialSortBy:{}}}},paginationOptions:{default:function(){return{enabled:!1,perPage:10,perPageDropdown:null,position:"bottom",dropdownAllowAll:!0,mode:"records"}}},searchOptions:{default:function(){return{enabled:!1,trigger:null,externalQuery:null,searchFn:null,placeholder:"Search Table"}}}},data:function(){return{tableLoading:!1,nextText:"Next",prevText:"Prev",rowsPerPageText:"Rows per page",ofText:"of",allText:"All",pageText:"page",selectable:!1,selectOnCheckboxOnly:!1,selectAllByPage:!0,disableSelectInfo:!1,selectionInfoClass:"",selectionText:"rows selected",clearSelectionText:"clear",maintainExpanded:!0,expandedRowKeys:new Set,sortable:!0,defaultSortBy:null,searchEnabled:!1,searchTrigger:null,externalSearchQuery:null,searchFn:null,searchPlaceholder:"Search Table",searchSkipDiacritics:!1,perPage:null,paginate:!1,paginateOnTop:!1,paginateOnBottom:!0,customRowsPerPageDropdown:[],paginateDropdownAllowAll:!0,paginationMode:"records",currentPage:1,currentPerPage:10,sorts:[],globalSearchTerm:"",filteredRows:[],columnFilters:{},forceSearch:!1,sortChanged:!1,dataTypes:oi||{}}},watch:{rows:{handler:function(){this.$emit("update:isLoading",!1),this.filterRows(this.columnFilters,!1)},deep:!0,immediate:!0},selectOptions:{handler:function(){this.initializeSelect()},deep:!0,immediate:!0},paginationOptions:{handler:function(t,e){Mt(t,e)||this.initializePagination()},deep:!0,immediate:!0},searchOptions:{handler:function(){void 0!==this.searchOptions.externalQuery&&this.searchOptions.externalQuery!==this.searchTerm&&(this.externalSearchQuery=this.searchOptions.externalQuery,this.handleSearch()),this.initializeSearch()},deep:!0,immediate:!0},sortOptions:{handler:function(t,e){Mt(t,e)||this.initializeSort()},deep:!0},selectedRows:function(t,e){Mt(t,e)||this.$emit("on-selected-rows-change",{selectedRows:this.selectedRows})}},computed:{tableStyles:function(){return this.compactMode?this.tableStyleClasses+"vgt-compact":this.tableStyleClasses},hasFooterSlot:function(){return!!this.$slots["table-actions-bottom"]},wrapperStyles:function(){return{overflow:"scroll-y",maxHeight:this.maxHeight?this.maxHeight:"auto"}},rowKeyField:function(){return this.groupOptions.rowKey||"vgt_header_id"},hasHeaderRowTemplate:function(){return!!this.$slots["table-header-row"]||!!this.$scopedSlots["table-header-row"]},showEmptySlot:function(){return!this.paginated.length||"no groups"===this.paginated[0].label&&!this.paginated[0].children.length},allSelected:function(){return this.selectedRowCount>0&&(this.selectAllByPage&&this.selectedPageRowsCount===this.totalPageRowCount||!this.selectAllByPage&&this.selectedRowCount===this.totalRowCount)},allSelectedIndeterminate:function(){return!this.allSelected&&(this.selectAllByPage&&this.selectedPageRowsCount>0||!this.selectAllByPage&&this.selectedRowCount>0)},selectionInfo:function(){return"".concat(this.selectedRowCount," ").concat(this.selectionText)},selectedRowCount:function(){return this.selectedRows.length},selectedPageRowsCount:function(){return this.selectedPageRows.length},selectedPageRows:function(){var t=[];return H(this.paginated,(function(e){H(e.children,(function(e){e.vgtSelected&&t.push(e)}))})),t},selectedRows:function(){var t=[];return H(this.processedRows,(function(e){H(e.children,(function(e){e.vgtSelected&&t.push(e)}))})),t.sort((function(t,e){return t.originalIndex-e.originalIndex}))},fullColspan:function(){for(var t=0,e=0;e<this.columns.length;e+=1)this.columns[e].hidden||(t+=1);return this.lineNumbers&&t++,this.selectable&&t++,t},groupHeaderOnTop:function(){return!(this.groupOptions&&this.groupOptions.enabled&&this.groupOptions.headerPosition&&"bottom"===this.groupOptions.headerPosition)&&!(!this.groupOptions||!this.groupOptions.enabled)},groupHeaderOnBottom:function(){return!!(this.groupOptions&&this.groupOptions.enabled&&this.groupOptions.headerPosition&&"bottom"===this.groupOptions.headerPosition)},totalRowCount:function(){var t=0;return H(this.processedRows,(function(e){t+=e.children?e.children.length:0})),t},totalPageRowCount:function(){var t=0;return H(this.paginated,(function(e){t+=e.children?e.children.length:0})),t},wrapStyleClasses:function(){var t="vgt-wrap";return this.rtl&&(t+=" rtl"),t+=" ".concat(this.theme),t},tableStyleClasses:function(){var t=this.styleClass;return t+=" ".concat(this.theme),t},searchTerm:function(){return null!=this.externalSearchQuery?this.externalSearchQuery:this.globalSearchTerm},globalSearchAllowed:function(){return!(!this.searchEnabled||!this.globalSearchTerm||"enter"===this.searchTrigger)||(null!=this.externalSearchQuery&&"enter"!==this.searchTrigger||!!this.forceSearch&&(this.forceSearch=!1,!0))},processedRows:function(){var t=this,e=this.filteredRows;if("remote"===this.mode)return e;if(this.globalSearchAllowed){var n=[];H(this.filteredRows,(function(t){n.push.apply(n,o(t.children))}));var r=[];H(n,(function(e){H(t.columns,(function(n){if(!n.globalSearchDisabled)if(t.searchFn){var i=t.searchFn(e,n,t.collectFormatted(e,n),t.searchTerm);if(i)return r.push(e),!1}else{var o=Ft.filterPredicate(t.collectFormatted(e,n),t.searchTerm,t.searchSkipDiacritics);if(o)return r.push(e),!1}}))})),this.$emit("on-search",{searchTerm:this.searchTerm,rowCount:r.length}),e=[],H(this.filteredRows,(function(t){var n=t.vgt_header_id,i=Dt(r,["vgt_id",n]);if(i.length){var o=jt(t);o.children=i,e.push(o)}}))}return this.sorts.length&&e.forEach((function(e){e.children.sort((function(e,n){for(var r,i=0;i<t.sorts.length;i+=1){var o=t.getColumnForField(t.sorts[i].field),a=t.collect(e,t.sorts[i].field),s=t.collect(n,t.sorts[i].field),u=o.sortFn;r=u&&"function"===typeof u?r||u(a,s,o,e,n)*("desc"===t.sorts[i].type?-1:1):r||o.typeDef.compare(a,s,o)*("desc"===t.sorts[i].type?-1:1)}return r}))})),"enter"===this.searchTrigger&&(this.filteredRows=e),e},paginated:function(){var t=this;if(!this.processedRows.length)return[];if("remote"===this.mode)return this.processedRows;var e=[];if(H(this.processedRows,(function(n){var r;t.groupOptions.enabled&&e.push(n),(r=e).push.apply(r,o(n.children))})),this.paginate){var n=(this.currentPage-1)*this.currentPerPage;(n>=e.length||-1===this.currentPerPage)&&(this.currentPage=1,n=0);var r=e.length+1;-1!==this.currentPerPage&&(r=this.currentPage*this.currentPerPage),e=e.slice(n,r)}var i=[];return e.forEach((function(e){if(void 0!==e.vgt_header_id){t.handleExpanded(e);var n=jt(e);n.children=[],i.push(n)}else{var r=i.find((function(t){return t.vgt_header_id===e.vgt_id}));r||(r=t.processedRows.find((function(t){return t.vgt_header_id===e.vgt_id})),r&&(r=jt(r),r.children=[],i.push(r))),r.children.push(e)}})),i},originalRows:function(){var t=jt(this.rows),e=[];e=this.groupOptions.enabled?this.handleGrouped(t):this.handleGrouped([{label:"no groups",children:t}]);var n=0;return H(e,(function(t,e){H(t.children,(function(t,e){t.originalIndex=n++}))})),e},typedColumns:function(){for(var t=At(this.columns,[]),e=0;e<this.columns.length;e++){var n=t[e];n.typeDef=this.dataTypes[n.type]||Ft}return t},hasRowClickListener:function(){return this.$listeners&&this.$listeners["on-row-click"]}},methods:{handleExpanded:function(t){this.maintainExpanded&&this.expandedRowKeys.has(t[this.rowKeyField])?this.$set(t,"vgtIsExpanded",!0):this.$set(t,"vgtIsExpanded",!1)},toggleExpand:function(t){var e=this,n=this.filteredRows.find((function(n){return n[e.rowKeyField]===t}));n&&this.$set(n,"vgtIsExpanded",!n.vgtIsExpanded),this.maintainExpanded&&n.vgtIsExpanded?this.expandedRowKeys.add(n[this.rowKeyField]):this.expandedRowKeys["delete"](n[this.rowKeyField])},expandAll:function(){var t=this;this.filteredRows.forEach((function(e){t.$set(e,"vgtIsExpanded",!0),t.maintainExpanded&&t.expandedRowKeys.add(e[t.rowKeyField])}))},collapseAll:function(){var t=this;this.filteredRows.forEach((function(e){t.$set(e,"vgtIsExpanded",!1),t.expandedRowKeys.clear()}))},getColumnForField:function(t){for(var e=0;e<this.typedColumns.length;e+=1)if(this.typedColumns[e].field===t)return this.typedColumns[e]},handleSearch:function(){this.resetTable(),"remote"===this.mode&&this.$emit("on-search",{searchTerm:this.searchTerm})},reset:function(){this.initializeSort(),this.changePage(1),this.$refs["table-header-primary"].reset(!0),this.$refs["table-header-secondary"]&&this.$refs["table-header-secondary"].reset(!0)},emitSelectedRows:function(){this.$emit("on-select-all",{selected:this.selectedRowCount===this.totalRowCount,selectedRows:this.selectedRows})},unselectAllInternal:function(t){var e=this,n=this.selectAllByPage&&!t?this.paginated:this.filteredRows;H(n,(function(t,n){H(t.children,(function(t,n){e.$set(t,"vgtSelected",!1)}))})),this.emitSelectedRows()},toggleSelectAll:function(){var t=this;if(this.allSelected)this.unselectAllInternal();else{var e=this.selectAllByPage?this.paginated:this.filteredRows;H(e,(function(e){H(e.children,(function(e){t.$set(e,"vgtSelected",!0)}))})),this.emitSelectedRows()}},toggleSelectGroup:function(t,e){var n=this;H(e.children,(function(e){n.$set(e,"vgtSelected",t.checked)}))},changePage:function(t){if(this.paginationOptions.enabled){var e=this.$refs.paginationBottom;"top"===this.paginationOptions.position&&(e=this.$refs.paginationTop),e&&(e.currentPage=t,this.currentPage=t)}},pageChangedEvent:function(){return{currentPage:this.currentPage,currentPerPage:this.currentPerPage,total:Math.floor(this.totalRowCount/this.currentPerPage)}},pageChanged:function(t){this.currentPage=t.currentPage;var e=this.pageChangedEvent();e.prevPage=t.prevPage,this.$emit("on-page-change",e),"remote"===this.mode&&this.$emit("update:isLoading",!0)},perPageChanged:function(t){this.currentPerPage=t.currentPerPage;var e=this.pageChangedEvent();this.$emit("on-per-page-change",e),"remote"===this.mode&&this.$emit("update:isLoading",!0)},changeSort:function(t){this.sorts=t,this.$emit("on-sort-change",t),this.changePage(1),"remote"!==this.mode?this.sortChanged=!0:this.$emit("update:isLoading",!0)},onCheckboxClicked:function(t,e,n){this.$set(t,"vgtSelected",!t.vgtSelected),this.$emit("on-row-click",{row:t,pageIndex:e,selected:!!t.vgtSelected,event:n})},onRowDoubleClicked:function(t,e,n){this.$emit("on-row-dblclick",{row:t,pageIndex:e,selected:!!t.vgtSelected,event:n})},onRowClicked:function(t,e,n){this.selectable&&!this.selectOnCheckboxOnly&&this.$set(t,"vgtSelected",!t.vgtSelected),this.$emit("on-row-click",{row:t,pageIndex:e,selected:!!t.vgtSelected,event:n})},onRowAuxClicked:function(t,e,n){this.$emit("on-row-aux-click",{row:t,pageIndex:e,selected:!!t.vgtSelected,event:n})},onCellClicked:function(t,e,n,r){this.$emit("on-cell-click",{row:t,column:e,rowIndex:n,event:r})},onMouseenter:function(t,e){this.$emit("on-row-mouseenter",{row:t,pageIndex:e})},onMouseleave:function(t,e){this.$emit("on-row-mouseleave",{row:t,pageIndex:e})},searchTableOnEnter:function(){"enter"===this.searchTrigger&&(this.handleSearch(),this.filteredRows=jt(this.originalRows),this.forceSearch=!0,this.sortChanged=!0)},searchTableOnKeyUp:function(){"enter"!==this.searchTrigger&&this.handleSearch()},resetTable:function(){this.unselectAllInternal(!0),this.changePage(1)},collect:function(t,e){function n(t,e){for(var n=t,r=e.split("."),i=0;i<r.length;i++){if("undefined"===typeof n||null===n)return;n=n[r[i]]}return n}return"function"===typeof e?e(t):"string"===typeof e?n(t,e):void 0},collectFormatted:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n=r&&e.headerField?this.collect(t,e.headerField):this.collect(t,e.field),void 0===n)return"";if(e.formatFn&&"function"===typeof e.formatFn)return e.formatFn(n,t);var i=e.typeDef;i||(i=this.dataTypes[e.type]||Ft);var o=i.format(n,e);return!this.compactMode||""!=o&&null!=o?o:"-"},formattedRow:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},r=0;r<this.typedColumns.length;r++){var i=this.typedColumns[r];i.field&&(n[i.field]=this.collectFormatted(t,i,e))}return n},getClasses:function(t,e,n){var r=this.typedColumns[t],i=r.typeDef,o=r["".concat(e,"Class")],a=i.isRight;this.rtl&&(a=!0);var s={"vgt-right-align":a,"vgt-left-align":!a};return"function"===typeof o?s[o(n)]=!0:"string"===typeof o&&(s[o]=!0),s},filterRows:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.columnFilters=t;var i=jt(this.originalRows);if(this.columnFilters&&Object.keys(this.columnFilters).length){if(("remote"!==this.mode||n)&&this.changePage(1),n&&this.$emit("on-column-filter",{columnFilters:this.columnFilters}),"remote"===this.mode)return void(n?this.$emit("update:isLoading",!0):this.filteredRows=i);for(var o=function(t){var n=e.typedColumns[t];e.columnFilters[n.field]&&(i=H(i,(function(t){var i=t.children.filter((function(t){if(n.filterOptions&&"function"===typeof n.filterOptions.filterFn)return n.filterOptions.filterFn(e.collect(t,n.field),e.columnFilters[n.field]);var i=n.typeDef;return i.filterPredicate(e.collect(t,n.field),e.columnFilters[n.field],!1,n.filterOptions&&"object"===r(n.filterOptions.filterDropdownItems))}));t.children=i})))},a=0;a<this.typedColumns.length;a++)o(a)}this.filteredRows=i},getCurrentIndex:function(t){return(this.currentPage-1)*this.currentPerPage+t+1},getRowStyleClass:function(t){var e,n="";return this.hasRowClickListener&&(n+="clickable"),e="function"===typeof this.rowStyleClass?this.rowStyleClass(t):this.rowStyleClass,e&&(n+=" ".concat(e)),n},handleGrouped:function(t){var e=this;return H(t,(function(t,n){t.vgt_header_id=n,e.groupOptions.maintainExpanded&&e.expandedRowKeys.has(t[e.groupOptions.rowKey])&&e.$set(t,"vgtIsExpanded",!0),H(t.children,(function(t){t.vgt_id=n}))})),t},initializePagination:function(){var t=this,e=this.paginationOptions,n=e.enabled,r=e.perPage,o=e.position,a=e.perPageDropdown,s=e.dropdownAllowAll,u=e.nextLabel,c=e.prevLabel,l=e.rowsPerPageLabel,h=e.ofLabel,f=e.pageLabel,d=e.allLabel,p=e.setCurrentPage,g=e.mode;if("boolean"===typeof n&&(this.paginate=n),"number"===typeof r&&(this.perPage=r),"top"===o?(this.paginateOnTop=!0,this.paginateOnBottom=!1):"both"===o&&(this.paginateOnTop=!0,this.paginateOnBottom=!0),Array.isArray(a)&&a.length&&(this.customRowsPerPageDropdown=a,!this.perPage)){var m=i(a,1);this.perPage=m[0]}"boolean"===typeof s&&(this.paginateDropdownAllowAll=s),"string"===typeof g&&(this.paginationMode=g),"string"===typeof u&&(this.nextText=u),"string"===typeof c&&(this.prevText=c),"string"===typeof l&&(this.rowsPerPageText=l),"string"===typeof h&&(this.ofText=h),"string"===typeof f&&(this.pageText=f),"string"===typeof d&&(this.allText=d),"number"===typeof p&&setTimeout((function(){t.changePage(p)}),500)},initializeSearch:function(){var t=this.searchOptions,e=t.enabled,n=t.trigger,r=t.externalQuery,i=t.searchFn,o=t.placeholder,a=t.skipDiacritics;"boolean"===typeof e&&(this.searchEnabled=e),"enter"===n&&(this.searchTrigger=n),"string"===typeof r&&(this.externalSearchQuery=r),"function"===typeof i&&(this.searchFn=i),"string"===typeof o&&(this.searchPlaceholder=o),"boolean"===typeof a&&(this.searchSkipDiacritics=a)},initializeSort:function(){var t=this.sortOptions,e=t.enabled,n=t.initialSortBy;if("boolean"===typeof e&&(this.sortable=e),"object"===r(n)){var i=this.fixedHeader?this.$refs["table-header-secondary"]:this.$refs["table-header-primary"];if(Array.isArray(n))i.setInitialSort(n);else{var o=Object.prototype.hasOwnProperty.call(n,"field");o&&i.setInitialSort([n])}}},initializeSelect:function(){var t=this.selectOptions,e=t.enabled,n=t.selectionInfoClass,r=t.selectionText,i=t.clearSelectionText,o=t.selectOnCheckboxOnly,a=t.selectAllByPage,s=t.disableSelectInfo,u=t.selectAllByGroup;"boolean"===typeof e&&(this.selectable=e),"boolean"===typeof o&&(this.selectOnCheckboxOnly=o),"boolean"===typeof a&&(this.selectAllByPage=a),"boolean"===typeof u&&(this.selectAllByGroup=u),"boolean"===typeof s&&(this.disableSelectInfo=s),"string"===typeof n&&(this.selectionInfoClass=n),"string"===typeof r&&(this.selectionText=r),"string"===typeof i&&(this.clearSelectionText=i)}},mounted:function(){this.perPage&&(this.currentPerPage=this.perPage),this.initializeSort()},components:{"vgt-pagination":ne,"vgt-global-search":he,"vgt-header-row":He,"vgt-table-header":Fe}},ui=si,ci=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.wrapStyleClasses},[t.isLoading?n("div",{staticClass:"vgt-loading vgt-center-align"},[t._t("loadingContent",[n("span",{staticClass:"vgt-loading__content"},[t._v("\n        Loading...\n      ")])])],2):t._e(),t._v(" "),n("div",{staticClass:"vgt-inner-wrap",class:{"is-loading":t.isLoading}},[t.paginate&&t.paginateOnTop?t._t("pagination-top",[n("vgt-pagination",{ref:"paginationTop",attrs:{perPage:t.perPage,rtl:t.rtl,total:t.totalRows||t.totalRowCount,mode:t.paginationMode,nextText:t.nextText,prevText:t.prevText,rowsPerPageText:t.rowsPerPageText,customRowsPerPageDropdown:t.customRowsPerPageDropdown,paginateDropdownAllowAll:t.paginateDropdownAllowAll,ofText:t.ofText,pageText:t.pageText,allText:t.allText},on:{"page-changed":t.pageChanged,"per-page-changed":t.perPageChanged}})],{pageChanged:t.pageChanged,perPageChanged:t.perPageChanged,total:t.totalRows||t.totalRowCount}):t._e(),t._v(" "),n("vgt-global-search",{attrs:{"search-enabled":t.searchEnabled&&null==t.externalSearchQuery,"global-search-placeholder":t.searchPlaceholder},on:{"on-keyup":t.searchTableOnKeyUp,"on-enter":t.searchTableOnEnter},model:{value:t.globalSearchTerm,callback:function(e){t.globalSearchTerm=e},expression:"globalSearchTerm"}},[n("template",{slot:"internal-table-actions"},[t._t("table-actions")],2)],2),t._v(" "),t.selectedRowCount&&!t.disableSelectInfo?n("div",{staticClass:"vgt-selection-info-row clearfix",class:t.selectionInfoClass},[t._v("\n      "+t._s(t.selectionInfo)+"\n      "),n("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.unselectAllInternal(!0)}}},[t._v("\n        "+t._s(t.clearSelectionText)+"\n      ")]),t._v(" "),n("div",{staticClass:"vgt-selection-info-row__actions vgt-pull-right"},[t._t("selected-row-actions")],2)]):t._e(),t._v(" "),n("div",{staticClass:"vgt-fixed-header"},[t.fixedHeader?n("table",{class:t.tableStyleClasses},[n("vgt-table-header",{ref:"table-header-secondary",tag:"thead",attrs:{columns:t.columns,"line-numbers":t.lineNumbers,selectable:t.selectable,"all-selected":t.allSelected,"all-selected-indeterminate":t.allSelectedIndeterminate,mode:t.mode,sortable:t.sortable,"typed-columns":t.typedColumns,getClasses:t.getClasses,searchEnabled:t.searchEnabled,paginated:t.paginated,"table-ref":t.$refs.table},on:{"on-toggle-select-all":t.toggleSelectAll,"on-sort-change":t.changeSort,"filter-changed":t.filterRows},scopedSlots:t._u([{key:"table-column",fn:function(e){return[t._t("table-column",[n("span",[t._v(t._s(e.column.label))])],{column:e.column})]}}],null,!0)})],1):t._e()]),t._v(" "),n("div",{class:{"vgt-responsive":t.responsive},style:t.wrapperStyles},[n("table",{ref:"table",class:t.tableStyles},[n("vgt-table-header",{ref:"table-header-primary",tag:"thead",attrs:{columns:t.columns,"line-numbers":t.lineNumbers,selectable:t.selectable,"all-selected":t.allSelected,"all-selected-indeterminate":t.allSelectedIndeterminate,mode:t.mode,sortable:t.sortable,"typed-columns":t.typedColumns,getClasses:t.getClasses,searchEnabled:t.searchEnabled},on:{"on-toggle-select-all":t.toggleSelectAll,"on-sort-change":t.changeSort,"filter-changed":t.filterRows},scopedSlots:t._u([{key:"table-column",fn:function(e){return[t._t("table-column",[n("span",[t._v(t._s(e.column.label))])],{column:e.column})]}},{key:"column-filter",fn:function(e){return[t._t("column-filter",null,{column:e.column,updateFilters:e.updateFilters})]}}],null,!0)}),t._v(" "),t._l(t.paginated,(function(e,r){return n("tbody",{key:r},[t.groupHeaderOnTop?n("vgt-header-row",{class:t.getRowStyleClass(e),attrs:{"header-row":e,columns:t.columns,"line-numbers":t.lineNumbers,selectable:t.selectable,"select-all-by-group":t.selectAllByGroup,collapsable:t.groupOptions.collapsable,"collect-formatted":t.collectFormatted,"formatted-row":t.formattedRow,"get-classes":t.getClasses,"full-colspan":t.fullColspan,groupIndex:r},on:{vgtExpand:function(n){return t.toggleExpand(e[t.rowKeyField])},"on-select-group-change":function(n){return t.toggleSelectGroup(n,e)}},scopedSlots:t._u([{key:"table-header-row",fn:function(e){return t.hasHeaderRowTemplate?[t._t("table-header-row",null,{column:e.column,formattedRow:e.formattedRow,row:e.row})]:void 0}}],null,!0)}):t._e(),t._v(" "),t._l(e.children,(function(r,i){return!t.groupOptions.collapsable||e.vgtIsExpanded?n("tr",{key:r.originalIndex,class:t.getRowStyleClass(r),on:{mouseenter:function(e){return t.onMouseenter(r,i)},mouseleave:function(e){return t.onMouseleave(r,i)},dblclick:function(e){return t.onRowDoubleClicked(r,i,e)},click:function(e){return t.onRowClicked(r,i,e)},auxclick:function(e){return t.onRowAuxClicked(r,i,e)}}},[t.lineNumbers?n("th",{staticClass:"line-numbers"},[t._v("\n              "+t._s(t.getCurrentIndex(i))+"\n            ")]):t._e(),t._v(" "),t.selectable?n("th",{staticClass:"vgt-checkbox-col",on:{click:function(e){return e.stopPropagation(),t.onCheckboxClicked(r,i,e)}}},[n("input",{attrs:{type:"checkbox"},domProps:{checked:r.vgtSelected}})]):t._e(),t._v(" "),t._l(t.columns,(function(e,o){return!e.hidden&&e.field?n("td",{key:o,class:t.getClasses(o,"td",r),attrs:{"data-label":t.compactMode?e.label:void 0},on:{click:function(n){return t.onCellClicked(r,e,i,n)}}},[t._t("table-row",[e.html?t._e():n("span",[t._v("\n                  "+t._s(t.collectFormatted(r,e))+"\n                ")]),t._v(" "),e.html?n("span",{domProps:{innerHTML:t._s(t.collect(r,e.field))}}):t._e()],{row:r,column:e,formattedRow:t.formattedRow(r),index:i})],2):t._e()}))],2):t._e()})),t._v(" "),t.groupHeaderOnBottom?n("vgt-header-row",{attrs:{"header-row":e,columns:t.columns,"line-numbers":t.lineNumbers,selectable:t.selectable,"select-all-by-group":t.selectAllByGroup,"collect-formatted":t.collectFormatted,"formatted-row":t.formattedRow,"get-classes":t.getClasses,"full-colspan":t.fullColspan,groupIndex:r},on:{"on-select-group-change":function(n){return t.toggleSelectGroup(n,e)}},scopedSlots:t._u([{key:"table-header-row",fn:function(e){return t.hasHeaderRowTemplate?[t._t("table-header-row",null,{column:e.column,formattedRow:e.formattedRow,row:e.row})]:void 0}}],null,!0)}):t._e()],2)})),t._v(" "),t.showEmptySlot?n("tbody",[n("tr",[n("td",{attrs:{colspan:t.fullColspan}},[t._t("emptystate",[n("div",{staticClass:"vgt-center-align vgt-text-disabled"},[t._v("\n                  No data for table\n                ")])])],2)])]):t._e()],2)]),t._v(" "),t.hasFooterSlot?n("div",{staticClass:"vgt-wrap__actions-footer"},[t._t("table-actions-bottom")],2):t._e(),t._v(" "),t.paginate&&t.paginateOnBottom?t._t("pagination-bottom",[n("vgt-pagination",{ref:"paginationBottom",attrs:{perPage:t.perPage,rtl:t.rtl,total:t.totalRows||t.totalRowCount,mode:t.paginationMode,nextText:t.nextText,prevText:t.prevText,rowsPerPageText:t.rowsPerPageText,customRowsPerPageDropdown:t.customRowsPerPageDropdown,paginateDropdownAllowAll:t.paginateDropdownAllowAll,ofText:t.ofText,pageText:t.pageText,allText:t.allText},on:{"page-changed":t.pageChanged,"per-page-changed":t.perPageChanged}})],{pageChanged:t.pageChanged,perPageChanged:t.perPageChanged,total:t.totalRows||t.totalRowCount}):t._e()],2)])},li=[],hi=void 0,fi=void 0,di=void 0,pi=!1,gi=$t({render:ci,staticRenderFns:li},hi,ui,fi,pi,di,!1,void 0,void 0,void 0),mi={install:function(t,e){t.component(gi.name,gi)}};"undefined"!==typeof window&&window.Vue&&window.Vue.use(mi)}).call(this,n("c8ba"))},f67c:function(t,e,n){const r=n("2a86"),i=n("3034");t.exports=(t,e,n)=>{const o=[];let a=null,s=null;const u=t.sort((t,e)=>i(t,e,n));for(const i of u){const t=r(i,e,n);t?(s=i,a||(a=i)):(s&&o.push([a,s]),s=null,a=null)}a&&o.push([a,null]);const c=[];for(const[r,i]of o)r===i?c.push(r):i||r!==u[0]?i?r===u[0]?c.push("<="+i):c.push(`${r} - ${i}`):c.push(">="+r):c.push("*");const l=c.join(" || "),h="string"===typeof e.raw?e.raw:String(e);return l.length<h.length?l:e}},f772:function(t,e,n){var r=n("5692"),i=n("90e3"),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},f8bb:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return O})),n.d(e,"i",(function(){return k})),n.d(e,"c",(function(){return A})),n.d(e,"f",(function(){return T})),n.d(e,"e",(function(){return D})),n.d(e,"d",(function(){return M})),n.d(e,"k",(function(){return I})),n.d(e,"g",(function(){return R})),n.d(e,"h",(function(){return F})),n.d(e,"j",(function(){return P})),n.d(e,"b",(function(){return $}));var r=n("fa11"),i=n("46cc"),o=n("d303"),a=n("526c"),s=n("aeab"),u=n("c8ad"),c=n("5874"),l=n("9489"),h=n("04b8"),f=n("f011b"),d=n("d556"),p=n("3d50"),g=n("29d8"),m=n("a80f"),v=n("673d"),y=n("3bfc"),b=n("31bb"),x=n("dbf3"),w=n("113e"),_=n("9e7b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class O{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[s,u,c,l,h,f,d,m,g,p,v,y,b,x,w,_],e=[].concat(...t.map(t=>t.json));this.opMappers=e.reduce((t,e)=>(t[e.tfOpName]=e,t),{})}transformGraph(t,e={}){const n=t.node,r=[],i=[],o=n.reduce((t,e)=>(t[e.name]=this.mapNode(e),e.op.startsWith("Placeholder")&&r.push(t[e.name]),"Const"===e.op&&i.push(t[e.name]),t),{});let s=[];const u=[];let c={},l={};null!=e&&(c=this.mapSignatureEntries(e.inputs),l=this.mapSignatureEntries(e.outputs));const h=Object.keys(o);h.forEach(t=>{const e=o[t];e.inputNames.forEach(t=>{const[n]=Object(a["b"])(t);e.inputs.push(o[n]),o[n].children.push(e)})}),0===Object.keys(l).length?h.forEach(t=>{const e=o[t];0===e.children.length&&u.push(e)}):Object.keys(l).forEach(t=>{const[e]=Object(a["b"])(t),n=o[e];null!=n&&(n.signatureKey=l[t],u.push(n))}),Object.keys(c).length>0?Object.keys(c).forEach(t=>{const[e]=Object(a["b"])(t),n=o[e];n&&(n.signatureKey=c[t],s.push(n))}):s=r;let f={};return null!=t.library&&null!=t.library.function&&(f=t.library.function.reduce((t,e)=>(t[e.signature.name]=this.mapFunction(e),t),{})),{nodes:o,inputs:s,outputs:u,weights:i,placeholders:r,signature:e,functions:f}}mapSignatureEntries(t){return Object.keys(t||{}).reduce((e,n)=>(e[t[n].name]=n,e),{})}mapNode(t){const e=Object(o["b"])(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});const n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map(t=>t.startsWith("^")?t.substr(1):t),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr};return null!=e.inputs&&(n.inputParams=e.inputs.reduce((t,e)=>(t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t),{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce((e,n)=>{const r=n.type;let i=void 0;switch(n.type){case"string":i=k(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=k(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":i=F(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=F(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":i=T(t.attr,n.tfName,n.defaultValue||0),void 0===i&&n.tfDeprecatedName&&(i=T(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":i=R(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=R(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":i=A(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=A(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":i=$(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=$(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":i=I(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=I(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":i=P(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=P(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":i=D(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=D(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":i=M(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=M(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":i=j(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=j(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${t.op}`)}return e[n.name]={value:i,type:r},e},{})),n}mapFunction(t){const e=t.nodeDef,n=[],r=[];let i={};null!=e&&(i=e.reduce((t,e)=>(t[e.name]=this.mapNode(e),"Const"===e.op&&r.push(t[e.name]),t),{}));const o=[],s=[];t.signature.inputArg.forEach(t=>{const[e]=Object(a["b"])(t.name),n={name:e,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:E(t.type),type:"dtype"}},children:[]};n.signatureKey=t.name,o.push(n),i[e]=n});const u=Object.keys(i);u.forEach(t=>{const e=i[t];e.inputNames.forEach(t=>{const[n]=Object(a["b"])(t);e.inputs.push(i[n]),i[n].children.push(e)})});const c=t.ret;t.signature.outputArg.forEach(t=>{const[e,n]=Object(a["b"])(c[t.name]),r=i[e];null!=r&&(r.defaultOutput=n,s.push(r))});const l=this.mapArgsToSignature(t);return{nodes:i,inputs:o,outputs:s,weights:r,placeholders:n,signature:l}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((t,e)=>(t[e.name]=this.mapArgToTensorInfo(e),t),{}),outputs:t.signature.outputArg.reduce((e,n)=>(e[n.name]=this.mapArgToTensorInfo(n,t.ret),e),{})}}mapArgToTensorInfo(t,e){let n=t.name;return null!=e&&(n=e[n]),{name:n,dtype:t.type}}}function S(e){const n=Object(r["ze"])().global;if("undefined"!==typeof n.atob)return n.atob(e);if("undefined"!==typeof t)return new t(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function C(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):S(t);return e?n:n.toLowerCase()}function k(t,e,n,r=!1){const i=t[e];return null!=i?C(i.s,r):n}function A(t,e,n){const r=t[e];return r?r.b:n}function T(t,e,n){const r=t[e]||{},i=null!=r["i"]?r["i"]:null!=r["f"]?r["f"]:n;return"number"===typeof i?i:parseInt(i,10)}function E(t){switch("string"===typeof t&&(t=i["a"][t]),t){case i["a"].DT_FLOAT:return"float32";case i["a"].DT_INT32:case i["a"].DT_INT64:case i["a"].DT_INT8:case i["a"].DT_UINT8:return"int32";case i["a"].DT_BOOL:return"bool";case i["a"].DT_DOUBLE:return"float32";case i["a"].DT_STRING:return"string";default:return null}}function j(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function D(t,e,n){const r=t[e];return r&&r.type?E(r.type):n}function M(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(t=>E(t)):n}function N(t){if(!t.unknownRank)return null!=t.dim?t.dim.map(t=>"number"===typeof t.size?t.size:parseInt(t.size,10)):[]}function I(t,e,n){const r=t[e];return r&&r.shape?N(r.shape):n}function R(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(t=>"number"===typeof t?t:parseInt(t,10)):n}function F(t,e,n,r=!1){const i=t[e];return i&&i.list&&i.list.s?i.list.s.map(t=>C(t,r)):n}function P(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(t=>N(t)):n}function $(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}}).call(this,n("b639").Buffer)},f934:function(t,e,n){var r=n("6d8b"),i=n("9850"),o=n("3842"),a=o.parsePercent,s=n("eda2"),u=r.each,c=["left","right","top","bottom","width","height"],l=[["width","left","right"],["height","top","bottom"]];function h(t,e,n,r,i){var o=0,a=0;null==r&&(r=1/0),null==i&&(i=1/0);var s=0;e.eachChild((function(u,c){var l,h,f=u.position,d=u.getBoundingRect(),p=e.childAt(c+1),g=p&&p.getBoundingRect();if("horizontal"===t){var m=d.width+(g?-g.x+d.x:0);l=o+m,l>r||u.newline?(o=0,l=m,a+=s+n,s=d.height):s=Math.max(s,d.height)}else{var v=d.height+(g?-g.y+d.y:0);h=a+v,h>i||u.newline?(o+=s+n,a=0,h=v,s=d.width):s=Math.max(s,d.width)}u.newline||(f[0]=o,f[1]=a,"horizontal"===t?o=l+n:a=h+n)}))}var f=h,d=r.curry(h,"vertical"),p=r.curry(h,"horizontal");function g(t,e,n){var r=e.width,i=e.height,o=a(t.x,r),u=a(t.y,i),c=a(t.x2,r),l=a(t.y2,i);return(isNaN(o)||isNaN(parseFloat(t.x)))&&(o=0),(isNaN(c)||isNaN(parseFloat(t.x2)))&&(c=r),(isNaN(u)||isNaN(parseFloat(t.y)))&&(u=0),(isNaN(l)||isNaN(parseFloat(t.y2)))&&(l=i),n=s.normalizeCssArray(n||0),{width:Math.max(c-o-n[1]-n[3],0),height:Math.max(l-u-n[0]-n[2],0)}}function m(t,e,n){n=s.normalizeCssArray(n||0);var r=e.width,o=e.height,u=a(t.left,r),c=a(t.top,o),l=a(t.right,r),h=a(t.bottom,o),f=a(t.width,r),d=a(t.height,o),p=n[2]+n[0],g=n[1]+n[3],m=t.aspect;switch(isNaN(f)&&(f=r-l-g-u),isNaN(d)&&(d=o-h-p-c),null!=m&&(isNaN(f)&&isNaN(d)&&(m>r/o?f=.8*r:d=.8*o),isNaN(f)&&(f=m*d),isNaN(d)&&(d=f/m)),isNaN(u)&&(u=r-l-f-g),isNaN(c)&&(c=o-h-d-p),t.left||t.right){case"center":u=r/2-f/2-n[3];break;case"right":u=r-f-g;break}switch(t.top||t.bottom){case"middle":case"center":c=o/2-d/2-n[0];break;case"bottom":c=o-d-p;break}u=u||0,c=c||0,isNaN(f)&&(f=r-g-u-(l||0)),isNaN(d)&&(d=o-p-c-(h||0));var v=new i(u+n[3],c+n[0],f,d);return v.margin=n,v}function v(t,e,n,o,a){var s=!a||!a.hv||a.hv[0],u=!a||!a.hv||a.hv[1],c=a&&a.boundingMode||"all";if(s||u){var l;if("raw"===c)l="group"===t.type?new i(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(l=t.getBoundingRect(),t.needLocalTransform()){var h=t.getLocalTransform();l=l.clone(),l.applyTransform(h)}e=m(r.defaults({width:l.width,height:l.height},e),n,o);var f=t.position,d=s?e.x-l.x:0,p=u?e.y-l.y:0;t.attr("position","raw"===c?[d,p]:[f[0]+d,f[1]+p])}}function y(t,e){return null!=t[l[e][0]]||null!=t[l[e][1]]&&null!=t[l[e][2]]}function b(t,e,n){!r.isObject(n)&&(n={});var i=n.ignoreSize;!r.isArray(i)&&(i=[i,i]);var o=s(l[0],0),a=s(l[1],1);function s(n,r){var o={},a=0,s={},l=0,f=2;if(u(n,(function(e){s[e]=t[e]})),u(n,(function(t){c(e,t)&&(o[t]=s[t]=e[t]),h(o,t)&&a++,h(s,t)&&l++})),i[r])return h(e,n[1])?s[n[2]]=null:h(e,n[2])&&(s[n[1]]=null),s;if(l!==f&&a){if(a>=f)return o;for(var d=0;d<n.length;d++){var p=n[d];if(!c(o,p)&&c(t,p)){o[p]=t[p];break}}return o}return s}function c(t,e){return t.hasOwnProperty(e)}function h(t,e){return null!=t[e]&&"auto"!==t[e]}function f(t,e,n){u(t,(function(t){e[t]=n[t]}))}f(l[0],t,o),f(l[1],t,a)}function x(t){return w({},t)}function w(t,e){return e&&t&&u(c,(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}e.LOCATION_PARAMS=c,e.HV_NAMES=l,e.box=f,e.vbox=d,e.hbox=p,e.getAvailableSize=g,e.getLayoutRect=m,e.positionElement=v,e.sizeCalculable=y,e.mergeLayoutParam=b,e.getLayoutParams=x,e.copyLayoutParams=w},f9a1:function(t,e,n){"use strict";var r=/([A-Z])/g;function i(t){return t.replace(r,"-$1").toLowerCase()}t.exports=i},fa11:function(t,e,n){"use strict";n.d(e,"d",(function(){return Uh})),n.d(e,"e",(function(){return Wh})),n.d(e,"f",(function(){return Vh})),n.d(e,"g",(function(){return Hh})),n.d(e,"Wb",(function(){return Gh})),n.d(e,"fc",(function(){return Bh})),n.d(e,"lc",(function(){return Xh})),n.d(e,"Cc",(function(){return qh})),n.d(e,"Zc",(function(){return Dt["a"]})),n.d(e,"ad",(function(){return Dt["b"]})),n.d(e,"gd",(function(){return Dt["c"]})),n.d(e,"nc",(function(){return Yh["a"]})),n.d(e,"Dh",(function(){return Yh["b"]})),n.d(e,"ai",(function(){return Yh["c"]})),n.d(e,"jd",(function(){return O})),n.d(e,"kd",(function(){return C})),n.d(e,"ld",(function(){return A})),n.d(e,"md",(function(){return j})),n.d(e,"nd",(function(){return N})),n.d(e,"pd",(function(){return G})),n.d(e,"qd",(function(){return Y})),n.d(e,"rd",(function(){return Z})),n.d(e,"sd",(function(){return Q})),n.d(e,"td",(function(){return et})),n.d(e,"ud",(function(){return rt})),n.d(e,"vd",(function(){return ot})),n.d(e,"wd",(function(){return st})),n.d(e,"xd",(function(){return ct})),n.d(e,"yd",(function(){return jt})),n.d(e,"zd",(function(){return te})),n.d(e,"Cd",(function(){return De})),n.d(e,"Hd",(function(){return Ne})),n.d(e,"Dd",(function(){return Pe})),n.d(e,"Ed",(function(){return Le})),n.d(e,"Fd",(function(){return Be})),n.d(e,"Gd",(function(){return We})),n.d(e,"Jd",(function(){return Ge})),n.d(e,"Ld",(function(){return Xe})),n.d(e,"Md",(function(){return ht})),n.d(e,"Nd",(function(){return Ke})),n.d(e,"Od",(function(){return Je})),n.d(e,"Pd",(function(){return He})),n.d(e,"Qd",(function(){return Qe["a"]})),n.d(e,"Rd",(function(){return oe})),n.d(e,"Sd",(function(){return en})),n.d(e,"Td",(function(){return rn})),n.d(e,"Ud",(function(){return an})),n.d(e,"Vd",(function(){return un})),n.d(e,"Wd",(function(){return fn})),n.d(e,"Xd",(function(){return ln})),n.d(e,"Yd",(function(){return mn})),n.d(e,"Zd",(function(){return yn})),n.d(e,"ae",(function(){return _n})),n.d(e,"be",(function(){return Sn})),n.d(e,"ce",(function(){return kn})),n.d(e,"ee",(function(){return Tn})),n.d(e,"he",(function(){return jn})),n.d(e,"ie",(function(){return Mn})),n.d(e,"ke",(function(){return In})),n.d(e,"le",(function(){return Fn})),n.d(e,"pe",(function(){return zn})),n.d(e,"qe",(function(){return Zn})),n.d(e,"se",(function(){return Qn})),n.d(e,"ue",(function(){return er})),n.d(e,"Ae",(function(){return Hn})),n.d(e,"Ce",(function(){return rr})),n.d(e,"De",(function(){return or})),n.d(e,"Ee",(function(){return sr})),n.d(e,"Fe",(function(){return cr})),n.d(e,"Ge",(function(){return dr})),n.d(e,"He",(function(){return gr})),n.d(e,"Ie",(function(){return mr})),n.d(e,"Le",(function(){return yr})),n.d(e,"Me",(function(){return $n})),n.d(e,"Oe",(function(){return Cr})),n.d(e,"Xe",(function(){return Ar})),n.d(e,"Ye",(function(){return Er})),n.d(e,"bf",(function(){return Dr})),n.d(e,"cf",(function(){return Nr})),n.d(e,"gf",(function(){return Br})),n.d(e,"hf",(function(){return Wr})),n.d(e,"if",(function(){return Hr})),n.d(e,"jf",(function(){return Gr})),n.d(e,"mf",(function(){return Zr})),n.d(e,"nf",(function(){return Qr})),n.d(e,"of",(function(){return ei})),n.d(e,"sf",(function(){return ni})),n.d(e,"tf",(function(){return ii})),n.d(e,"uf",(function(){return ai})),n.d(e,"vf",(function(){return ui})),n.d(e,"wf",(function(){return wi})),n.d(e,"xf",(function(){return Ei})),n.d(e,"yf",(function(){return Di})),n.d(e,"zf",(function(){return Ni})),n.d(e,"Af",(function(){return Ri})),n.d(e,"Bf",(function(){return Pi})),n.d(e,"Cf",(function(){return Li})),n.d(e,"Ef",(function(){return se})),n.d(e,"Gf",(function(){return Oi})),n.d(e,"Hf",(function(){return Bi})),n.d(e,"If",(function(){return Wi})),n.d(e,"Jf",(function(){return Hi})),n.d(e,"Kf",(function(){return Yr})),n.d(e,"Mf",(function(){return Yi})),n.d(e,"Of",(function(){return Zi})),n.d(e,"Pf",(function(){return Qi})),n.d(e,"Rf",(function(){return eo})),n.d(e,"Tf",(function(){return oo})),n.d(e,"Vf",(function(){return ce})),n.d(e,"Xf",(function(){return so})),n.d(e,"Yf",(function(){return co})),n.d(e,"Zf",(function(){return vi})),n.d(e,"cg",(function(){return ho})),n.d(e,"eg",(function(){return po})),n.d(e,"fg",(function(){return Gi})),n.d(e,"gg",(function(){return mo})),n.d(e,"ig",(function(){return yo})),n.d(e,"jg",(function(){return xo})),n.d(e,"kg",(function(){return _o})),n.d(e,"lg",(function(){return So})),n.d(e,"mg",(function(){return ko})),n.d(e,"ng",(function(){return To})),n.d(e,"og",(function(){return Io})),n.d(e,"pg",(function(){return Fo})),n.d(e,"rg",(function(){return $o})),n.d(e,"sg",(function(){return Lo})),n.d(e,"tg",(function(){return Bo})),n.d(e,"vg",(function(){return Wo})),n.d(e,"wg",(function(){return aa})),n.d(e,"xg",(function(){return ua})),n.d(e,"yg",(function(){return la})),n.d(e,"zg",(function(){return fa})),n.d(e,"Bg",(function(){return Rr})),n.d(e,"Cg",(function(){return pa})),n.d(e,"Gg",(function(){return ma})),n.d(e,"Hg",(function(){return ya})),n.d(e,"Jg",(function(){return W})),n.d(e,"Kg",(function(){return Pr})),n.d(e,"Lg",(function(){return xa})),n.d(e,"Mg",(function(){return _a})),n.d(e,"Ng",(function(){return Sa})),n.d(e,"Og",(function(){return ka})),n.d(e,"Pg",(function(){return Da})),n.d(e,"Qg",(function(){return Na})),n.d(e,"Rg",(function(){return Ra})),n.d(e,"Sg",(function(){return Lr})),n.d(e,"Vg",(function(){return Pa})),n.d(e,"Wg",(function(){return La})),n.d(e,"ah",(function(){return Ba})),n.d(e,"bh",(function(){return he})),n.d(e,"ch",(function(){return Wa})),n.d(e,"eh",(function(){return Ha})),n.d(e,"fh",(function(){return Ga})),n.d(e,"gh",(function(){return Ae})),n.d(e,"hh",(function(){return Ya})),n.d(e,"ih",(function(){return Za})),n.d(e,"jh",(function(){return Qa})),n.d(e,"kh",(function(){return es})),n.d(e,"mh",(function(){return rs})),n.d(e,"nh",(function(){return bi})),n.d(e,"oh",(function(){return jo})),n.d(e,"rh",(function(){return Ea})),n.d(e,"sh",(function(){return os})),n.d(e,"th",(function(){return ro})),n.d(e,"uh",(function(){return ss})),n.d(e,"wh",(function(){return cs})),n.d(e,"xh",(function(){return hs})),n.d(e,"yh",(function(){return ds})),n.d(e,"zh",(function(){return gs})),n.d(e,"Ah",(function(){return Ci})),n.d(e,"Ch",(function(){return Ai})),n.d(e,"Eh",(function(){return vs})),n.d(e,"Fh",(function(){return Ee})),n.d(e,"Gh",(function(){return re["a"]})),n.d(e,"Hh",(function(){return ha})),n.d(e,"Ih",(function(){return ys})),n.d(e,"Jh",(function(){return bs})),n.d(e,"Kh",(function(){return xs})),n.d(e,"Lh",(function(){return ws})),n.d(e,"Mh",(function(){return _s})),n.d(e,"Qh",(function(){return hr})),n.d(e,"Sh",(function(){return Ss})),n.d(e,"Vh",(function(){return ks})),n.d(e,"Yh",(function(){return Ts})),n.d(e,"Zh",(function(){return js})),n.d(e,"ei",(function(){return Ds})),n.d(e,"hi",(function(){return Gn})),n.d(e,"ii",(function(){return Is})),n.d(e,"ji",(function(){return qi})),n.d(e,"ki",(function(){return Yn})),n.d(e,"Id",(function(){return Fs})),n.d(e,"Be",(function(){return Ws})),n.d(e,"Ze",(function(){return Vs})),n.d(e,"af",(function(){return Hs})),n.d(e,"pf",(function(){return qs})),n.d(e,"qf",(function(){return Gs})),n.d(e,"dg",(function(){return Xs})),n.d(e,"od",(function(){return iu})),n.d(e,"re",(function(){return ou})),n.d(e,"Lf",(function(){return au})),n.d(e,"Qf",(function(){return su})),n.d(e,"Sf",(function(){return uu})),n.d(e,"Wf",(function(){return cu})),n.d(e,"qg",(function(){return lu})),n.d(e,"vh",(function(){return hu})),n.d(e,"Bh",(function(){return fu})),n.d(e,"Uh",(function(){return H})),n.d(e,"bg",(function(){return gu})),n.d(e,"Uf",(function(){return vu})),n.d(e,"Tg",(function(){return _u})),n.d(e,"ph",(function(){return Cu})),n.d(e,"Pe",(function(){return Au})),n.d(e,"te",(function(){return ju})),n.d(e,"xe",(function(){return Du})),n.d(e,"de",(function(){return Mu})),n.d(e,"ef",(function(){return Iu})),n.d(e,"hg",(function(){return w["a"]})),n.d(e,"df",(function(){return gl})),n.d(e,"rf",(function(){return ml})),n.d(e,"Df",(function(){return vl})),n.d(e,"qh",(function(){return dl})),n.d(e,"Ne",(function(){return s})),n.d(e,"dh",(function(){return pl})),n.d(e,"qc",(function(){return qc})),n.d(e,"Th",(function(){return Zh})),n.d(e,"we",(function(){return Mt})),n.d(e,"ve",(function(){return Nt})),n.d(e,"me",(function(){return It})),n.d(e,"ge",(function(){return Rt})),n.d(e,"oe",(function(){return Ft})),n.d(e,"ye",(function(){return Pt})),n.d(e,"Nf",(function(){return $t})),n.d(e,"ug",(function(){return Lt})),n.d(e,"Ph",(function(){return zt})),n.d(e,"ne",(function(){return Bt})),n.d(e,"kf",(function(){return Ut})),n.d(e,"Rh",(function(){return Wt})),n.d(e,"Yg",(function(){return Vt})),n.d(e,"Ag",(function(){return Ht})),n.d(e,"Re",(function(){return qt})),n.d(e,"Ig",(function(){return Gt})),n.d(e,"Je",(function(){return Xt})),n.d(e,"Ke",(function(){return Yt})),n.d(e,"Dg",(function(){return Kt})),n.d(e,"Ad",(function(){return Zt})),n.d(e,"Zg",(function(){return Jt})),n.d(e,"Te",(function(){return Dh["b"]})),n.d(e,"Se",(function(){return Dh["a"]})),n.d(e,"Ue",(function(){return Dh["c"]})),n.d(e,"Fg",(function(){return Dh["e"]})),n.d(e,"Eg",(function(){return Dh["d"]})),n.d(e,"Xh",(function(){return Dh["g"]})),n.d(e,"Wh",(function(){return Dh["f"]})),n.d(e,"fe",(function(){return pi})),n.d(e,"Ve",(function(){return ci})),n.d(e,"We",(function(){return li})),n.d(e,"ci",(function(){return hi})),n.d(e,"di",(function(){return fi})),n.d(e,"fi",(function(){return di})),n.d(e,"bb",(function(){return v["b"]})),n.d(e,"ze",(function(){return v["c"]})),n.d(e,"Y",(function(){return v["a"]})),n.d(e,"gi",(function(){return zh})),n.d(e,"ag",(function(){return Qh})),n.d(e,"Kd",(function(){return h})),n.d(e,"ff",(function(){return c})),n.d(e,"Ff",(function(){return l})),n.d(e,"Xg",(function(){return d})),n.d(e,"Oh",(function(){return o})),n.d(e,"bi",(function(){return D})),n.d(e,"Bd",(function(){return p})),n.d(e,"Nh",(function(){return T})),n.d(e,"lh",(function(){return r})),n.d(e,"Qe",(function(){return f})),n.d(e,"Ug",(function(){return a})),n.d(e,"je",(function(){return Tf})),n.d(e,"lf",(function(){return g})),n.d(e,"zb",(function(){return Rf})),n.d(e,"O",(function(){return If})),n.d(e,"a",(function(){return b["a"]})),n.d(e,"b",(function(){return b["b"]})),n.d(e,"c",(function(){return b["c"]})),n.d(e,"h",(function(){return b["d"]})),n.d(e,"i",(function(){return b["e"]})),n.d(e,"j",(function(){return b["f"]})),n.d(e,"k",(function(){return b["g"]})),n.d(e,"l",(function(){return b["h"]})),n.d(e,"m",(function(){return b["i"]})),n.d(e,"n",(function(){return b["j"]})),n.d(e,"o",(function(){return b["k"]})),n.d(e,"p",(function(){return b["l"]})),n.d(e,"r",(function(){return b["n"]})),n.d(e,"q",(function(){return b["m"]})),n.d(e,"s",(function(){return b["o"]})),n.d(e,"v",(function(){return b["r"]})),n.d(e,"t",(function(){return b["p"]})),n.d(e,"u",(function(){return b["q"]})),n.d(e,"w",(function(){return b["s"]})),n.d(e,"x",(function(){return b["t"]})),n.d(e,"y",(function(){return b["u"]})),n.d(e,"z",(function(){return b["v"]})),n.d(e,"A",(function(){return b["w"]})),n.d(e,"B",(function(){return b["x"]})),n.d(e,"C",(function(){return b["y"]})),n.d(e,"D",(function(){return b["z"]})),n.d(e,"E",(function(){return b["A"]})),n.d(e,"F",(function(){return b["B"]})),n.d(e,"G",(function(){return b["C"]})),n.d(e,"H",(function(){return b["D"]})),n.d(e,"I",(function(){return b["E"]})),n.d(e,"J",(function(){return b["F"]})),n.d(e,"K",(function(){return b["G"]})),n.d(e,"L",(function(){return b["H"]})),n.d(e,"N",(function(){return b["J"]})),n.d(e,"M",(function(){return b["I"]})),n.d(e,"P",(function(){return b["K"]})),n.d(e,"Q",(function(){return b["L"]})),n.d(e,"R",(function(){return b["M"]})),n.d(e,"S",(function(){return b["N"]})),n.d(e,"T",(function(){return b["O"]})),n.d(e,"U",(function(){return b["P"]})),n.d(e,"W",(function(){return b["R"]})),n.d(e,"V",(function(){return b["Q"]})),n.d(e,"X",(function(){return b["S"]})),n.d(e,"Z",(function(){return b["T"]})),n.d(e,"ab",(function(){return b["U"]})),n.d(e,"db",(function(){return b["W"]})),n.d(e,"cb",(function(){return b["V"]})),n.d(e,"eb",(function(){return b["X"]})),n.d(e,"fb",(function(){return b["Y"]})),n.d(e,"gb",(function(){return b["Z"]})),n.d(e,"hb",(function(){return b["ab"]})),n.d(e,"ib",(function(){return b["bb"]})),n.d(e,"jb",(function(){return b["cb"]})),n.d(e,"kb",(function(){return b["db"]})),n.d(e,"mb",(function(){return b["fb"]})),n.d(e,"qb",(function(){return b["jb"]})),n.d(e,"pb",(function(){return b["ib"]})),n.d(e,"rb",(function(){return b["kb"]})),n.d(e,"sb",(function(){return b["lb"]})),n.d(e,"ub",(function(){return b["nb"]})),n.d(e,"tb",(function(){return b["mb"]})),n.d(e,"vb",(function(){return b["ob"]})),n.d(e,"wb",(function(){return b["pb"]})),n.d(e,"xb",(function(){return b["qb"]})),n.d(e,"yb",(function(){return b["rb"]})),n.d(e,"Cb",(function(){return b["ub"]})),n.d(e,"Db",(function(){return b["vb"]})),n.d(e,"Eb",(function(){return b["wb"]})),n.d(e,"Fb",(function(){return b["xb"]})),n.d(e,"Gb",(function(){return b["yb"]})),n.d(e,"Ib",(function(){return b["Ab"]})),n.d(e,"Jb",(function(){return b["Bb"]})),n.d(e,"Kb",(function(){return b["Cb"]})),n.d(e,"Hb",(function(){return b["zb"]})),n.d(e,"Ab",(function(){return b["sb"]})),n.d(e,"Bb",(function(){return b["tb"]})),n.d(e,"Lb",(function(){return b["Db"]})),n.d(e,"Rb",(function(){return b["Jb"]})),n.d(e,"Mb",(function(){return b["Eb"]})),n.d(e,"Pb",(function(){return b["Hb"]})),n.d(e,"Nb",(function(){return b["Fb"]})),n.d(e,"Ob",(function(){return b["Gb"]})),n.d(e,"Qb",(function(){return b["Ib"]})),n.d(e,"Sb",(function(){return b["Kb"]})),n.d(e,"Tb",(function(){return b["Lb"]})),n.d(e,"Ub",(function(){return b["Mb"]})),n.d(e,"Vb",(function(){return b["Nb"]})),n.d(e,"Xb",(function(){return b["Ob"]})),n.d(e,"Yb",(function(){return b["Pb"]})),n.d(e,"cc",(function(){return b["Tb"]})),n.d(e,"Zb",(function(){return b["Qb"]})),n.d(e,"ac",(function(){return b["Rb"]})),n.d(e,"bc",(function(){return b["Sb"]})),n.d(e,"ec",(function(){return b["Vb"]})),n.d(e,"dc",(function(){return b["Ub"]})),n.d(e,"gc",(function(){return b["Wb"]})),n.d(e,"hc",(function(){return b["Xb"]})),n.d(e,"ic",(function(){return b["Yb"]})),n.d(e,"jc",(function(){return b["Zb"]})),n.d(e,"kc",(function(){return b["ac"]})),n.d(e,"mc",(function(){return b["bc"]})),n.d(e,"oc",(function(){return b["cc"]})),n.d(e,"pc",(function(){return b["dc"]})),n.d(e,"rc",(function(){return b["ec"]})),n.d(e,"tc",(function(){return b["gc"]})),n.d(e,"wc",(function(){return b["jc"]})),n.d(e,"xc",(function(){return b["kc"]})),n.d(e,"uc",(function(){return b["hc"]})),n.d(e,"vc",(function(){return b["ic"]})),n.d(e,"sc",(function(){return b["fc"]})),n.d(e,"yc",(function(){return b["lc"]})),n.d(e,"Ac",(function(){return b["nc"]})),n.d(e,"Bc",(function(){return b["oc"]})),n.d(e,"Dc",(function(){return b["pc"]})),n.d(e,"Ec",(function(){return b["qc"]})),n.d(e,"Fc",(function(){return b["rc"]})),n.d(e,"Kc",(function(){return b["wc"]})),n.d(e,"Ic",(function(){return b["uc"]})),n.d(e,"Jc",(function(){return b["vc"]})),n.d(e,"Hc",(function(){return b["tc"]})),n.d(e,"Gc",(function(){return b["sc"]})),n.d(e,"Mc",(function(){return b["yc"]})),n.d(e,"Qc",(function(){return b["Cc"]})),n.d(e,"Wc",(function(){return b["Ic"]})),n.d(e,"Nc",(function(){return b["zc"]})),n.d(e,"Pc",(function(){return b["Bc"]})),n.d(e,"Lc",(function(){return b["xc"]})),n.d(e,"Sc",(function(){return b["Ec"]})),n.d(e,"Rc",(function(){return b["Dc"]})),n.d(e,"Vc",(function(){return b["Hc"]})),n.d(e,"Oc",(function(){return b["Ac"]})),n.d(e,"Uc",(function(){return b["Gc"]})),n.d(e,"Xc",(function(){return b["Jc"]})),n.d(e,"Yc",(function(){return b["Kc"]})),n.d(e,"bd",(function(){return b["Lc"]})),n.d(e,"cd",(function(){return b["Mc"]})),n.d(e,"dd",(function(){return b["Nc"]})),n.d(e,"ed",(function(){return b["Oc"]})),n.d(e,"fd",(function(){return b["Pc"]})),n.d(e,"hd",(function(){return b["Qc"]})),n.d(e,"Tc",(function(){return b["Fc"]})),n.d(e,"lb",(function(){return b["eb"]})),n.d(e,"zc",(function(){return b["mc"]})),n.d(e,"id",(function(){return b["Rc"]})),n.d(e,"nb",(function(){return b["gb"]})),n.d(e,"ob",(function(){return b["hb"]}));var r={};n.r(r),n.d(r,"assertParamsValid",(function(){return fe})),n.d(r,"maskToAxes",(function(){return de})),n.d(r,"computeOutShape",(function(){return pe})),n.d(r,"stridesWithElidedDims",(function(){return ge})),n.d(r,"startIndicesWithElidedDims",(function(){return ye})),n.d(r,"stopIndicesWithElidedDims",(function(){return be})),n.d(r,"stridesForAxis",(function(){return xe})),n.d(r,"startForAxis",(function(){return we})),n.d(r,"stopForAxis",(function(){return _e})),n.d(r,"isSliceContinous",(function(){return Oe})),n.d(r,"computeFlatOffset",(function(){return Se})),n.d(r,"parseSliceParams",(function(){return Ce}));var i={};n.r(i),n.d(i,"segOpComputeOptimalWindowSize",(function(){return wr})),n.d(i,"computeOutShape",(function(){return _r})),n.d(i,"collectGatherOpShapeInfo",(function(){return Or}));var o={};n.r(o),n.d(o,"TEST_EPSILON_FLOAT16",(function(){return qo})),n.d(o,"expectArraysClose",(function(){return Go})),n.d(o,"testEpsilon",(function(){return Xo})),n.d(o,"expectPromiseToFail",(function(){return Ko})),n.d(o,"expectArraysEqual",(function(){return Zo})),n.d(o,"expectNumbersClose",(function(){return Jo})),n.d(o,"expectValuesInRange",(function(){return ta})),n.d(o,"expectArrayBuffersEqual",(function(){return ea}));var a={};n.r(a),n.d(a,"validateUpdateShape",(function(){return yu})),n.d(a,"validateInput",(function(){return bu})),n.d(a,"calculateShapes",(function(){return xu}));var s={};n.r(s),n.d(s,"conv2d",(function(){return Uu})),n.d(s,"depthwiseConv2d",(function(){return Xu})),n.d(s,"matMul",(function(){return Ku}));var u={};n.r(u),n.d(u,"abs",(function(){return O})),n.d(u,"acos",(function(){return C})),n.d(u,"acosh",(function(){return A})),n.d(u,"add",(function(){return j})),n.d(u,"addN",(function(){return N})),n.d(u,"all",(function(){return G})),n.d(u,"any",(function(){return Y})),n.d(u,"argMax",(function(){return Z})),n.d(u,"argMin",(function(){return Q})),n.d(u,"asin",(function(){return et})),n.d(u,"asinh",(function(){return rt})),n.d(u,"atan",(function(){return ot})),n.d(u,"atan2",(function(){return st})),n.d(u,"atanh",(function(){return ct})),n.d(u,"avgPool",(function(){return jt})),n.d(u,"avgPool3d",(function(){return te})),n.d(u,"basicLSTMCell",(function(){return De})),n.d(u,"batchToSpaceND",(function(){return Ne})),n.d(u,"batchNorm",(function(){return Pe})),n.d(u,"batchNorm2d",(function(){return Le})),n.d(u,"batchNorm3d",(function(){return Be})),n.d(u,"batchNorm4d",(function(){return We})),n.d(u,"broadcastTo",(function(){return Ge})),n.d(u,"buffer",(function(){return Xe})),n.d(u,"cast",(function(){return ht})),n.d(u,"ceil",(function(){return Ke})),n.d(u,"clipByValue",(function(){return Je})),n.d(u,"clone",(function(){return He})),n.d(u,"complex",(function(){return Qe["a"]})),n.d(u,"concat",(function(){return oe})),n.d(u,"concat1d",(function(){return en})),n.d(u,"concat2d",(function(){return rn})),n.d(u,"concat3d",(function(){return an})),n.d(u,"concat4d",(function(){return un})),n.d(u,"conv1d",(function(){return fn})),n.d(u,"conv2d",(function(){return ln})),n.d(u,"conv2dTranspose",(function(){return mn})),n.d(u,"conv3d",(function(){return yn})),n.d(u,"conv3dTranspose",(function(){return _n})),n.d(u,"cos",(function(){return Sn})),n.d(u,"cosh",(function(){return kn})),n.d(u,"cumsum",(function(){return Tn})),n.d(u,"depthToSpace",(function(){return jn})),n.d(u,"depthwiseConv2d",(function(){return Mn})),n.d(u,"diag",(function(){return In})),n.d(u,"dilation2d",(function(){return Fn})),n.d(u,"div",(function(){return zn})),n.d(u,"divNoNan",(function(){return Zn})),n.d(u,"dot",(function(){return Qn})),n.d(u,"elu",(function(){return er})),n.d(u,"equal",(function(){return Hn})),n.d(u,"erf",(function(){return rr})),n.d(u,"exp",(function(){return or})),n.d(u,"expandDims",(function(){return sr})),n.d(u,"expm1",(function(){return cr})),n.d(u,"eye",(function(){return dr})),n.d(u,"fft",(function(){return gr})),n.d(u,"fill",(function(){return mr})),n.d(u,"floor",(function(){return yr})),n.d(u,"floorDiv",(function(){return $n})),n.d(u,"gather",(function(){return Cr})),n.d(u,"greater",(function(){return Ar})),n.d(u,"greaterEqual",(function(){return Er})),n.d(u,"ifft",(function(){return Dr})),n.d(u,"imag",(function(){return Nr})),n.d(u,"irfft",(function(){return Br})),n.d(u,"isFinite",(function(){return Wr})),n.d(u,"isInf",(function(){return Hr})),n.d(u,"isNaN",(function(){return Gr})),n.d(u,"leakyRelu",(function(){return Zr})),n.d(u,"less",(function(){return Qr})),n.d(u,"lessEqual",(function(){return ei})),n.d(u,"linspace",(function(){return ni})),n.d(u,"localResponseNormalization",(function(){return ii})),n.d(u,"log",(function(){return ai})),n.d(u,"log1p",(function(){return ui})),n.d(u,"logSigmoid",(function(){return wi})),n.d(u,"logSoftmax",(function(){return Ei})),n.d(u,"logSumExp",(function(){return Di})),n.d(u,"logicalAnd",(function(){return Ni})),n.d(u,"logicalNot",(function(){return Ri})),n.d(u,"logicalOr",(function(){return Pi})),n.d(u,"logicalXor",(function(){return Li})),n.d(u,"matMul",(function(){return se})),n.d(u,"max",(function(){return Oi})),n.d(u,"maxPool",(function(){return Bi})),n.d(u,"maxPool3d",(function(){return Wi})),n.d(u,"maxPoolWithArgmax",(function(){return Hi})),n.d(u,"maximum",(function(){return Yr})),n.d(u,"mean",(function(){return Yi})),n.d(u,"min",(function(){return Zi})),n.d(u,"minimum",(function(){return Qi})),n.d(u,"mod",(function(){return eo})),n.d(u,"moments",(function(){return oo})),n.d(u,"mul",(function(){return ce})),n.d(u,"multiRNNCell",(function(){return so})),n.d(u,"multinomial",(function(){return co})),n.d(u,"neg",(function(){return vi})),n.d(u,"notEqual",(function(){return ho})),n.d(u,"oneHot",(function(){return po})),n.d(u,"ones",(function(){return Gi})),n.d(u,"onesLike",(function(){return mo})),n.d(u,"outerProduct",(function(){return yo})),n.d(u,"pad",(function(){return xo})),n.d(u,"pad1d",(function(){return _o})),n.d(u,"pad2d",(function(){return So})),n.d(u,"pad3d",(function(){return ko})),n.d(u,"pad4d",(function(){return To})),n.d(u,"pool",(function(){return Io})),n.d(u,"pow",(function(){return Fo})),n.d(u,"prelu",(function(){return $o})),n.d(u,"print",(function(){return Lo})),n.d(u,"prod",(function(){return Bo})),n.d(u,"rand",(function(){return Wo})),n.d(u,"randomGamma",(function(){return aa})),n.d(u,"randomNormal",(function(){return ua})),n.d(u,"randomUniform",(function(){return la})),n.d(u,"range",(function(){return fa})),n.d(u,"real",(function(){return Rr})),n.d(u,"reciprocal",(function(){return pa})),n.d(u,"relu",(function(){return ma})),n.d(u,"relu6",(function(){return ya})),n.d(u,"reshape",(function(){return W})),n.d(u,"reverse",(function(){return Pr})),n.d(u,"reverse1d",(function(){return xa})),n.d(u,"reverse2d",(function(){return _a})),n.d(u,"reverse3d",(function(){return Sa})),n.d(u,"reverse4d",(function(){return ka})),n.d(u,"rfft",(function(){return Da})),n.d(u,"round",(function(){return Na})),n.d(u,"rsqrt",(function(){return Ra})),n.d(u,"scalar",(function(){return Lr})),n.d(u,"selu",(function(){return Pa})),n.d(u,"separableConv2d",(function(){return La})),n.d(u,"setdiff1dAsync",(function(){return Ba})),n.d(u,"sigmoid",(function(){return he})),n.d(u,"sign",(function(){return Wa})),n.d(u,"sin",(function(){return Ha})),n.d(u,"sinh",(function(){return Ga})),n.d(u,"slice",(function(){return Ae})),n.d(u,"slice1d",(function(){return Ya})),n.d(u,"slice2d",(function(){return Za})),n.d(u,"slice3d",(function(){return Qa})),n.d(u,"slice4d",(function(){return es})),n.d(u,"softmax",(function(){return rs})),n.d(u,"softplus",(function(){return bi})),n.d(u,"spaceToBatchND",(function(){return jo})),n.d(u,"split",(function(){return Ea})),n.d(u,"sqrt",(function(){return os})),n.d(u,"square",(function(){return ro})),n.d(u,"squaredDifference",(function(){return ss})),n.d(u,"squeeze",(function(){return cs})),n.d(u,"stack",(function(){return hs})),n.d(u,"step",(function(){return ds})),n.d(u,"stridedSlice",(function(){return gs})),n.d(u,"sub",(function(){return Ci})),n.d(u,"sum",(function(){return Ai})),n.d(u,"tan",(function(){return vs})),n.d(u,"tanh",(function(){return Ee})),n.d(u,"tensor",(function(){return re["a"]})),n.d(u,"tensor1d",(function(){return ha})),n.d(u,"tensor2d",(function(){return ys})),n.d(u,"tensor3d",(function(){return bs})),n.d(u,"tensor4d",(function(){return xs})),n.d(u,"tensor5d",(function(){return ws})),n.d(u,"tensor6d",(function(){return _s})),n.d(u,"tile",(function(){return hr})),n.d(u,"topk",(function(){return Ss})),n.d(u,"truncatedNormal",(function(){return ks})),n.d(u,"unsortedSegmentSum",(function(){return Ts})),n.d(u,"unstack",(function(){return js})),n.d(u,"variable",(function(){return Ds})),n.d(u,"where",(function(){return Gn})),n.d(u,"whereAsync",(function(){return Is})),n.d(u,"zeros",(function(){return qi})),n.d(u,"zerosLike",(function(){return Yn})),n.d(u,"booleanMaskAsync",(function(){return Fs})),n.d(u,"equalStrict",(function(){return Ws})),n.d(u,"greaterEqualStrict",(function(){return Vs})),n.d(u,"greaterStrict",(function(){return Hs})),n.d(u,"lessEqualStrict",(function(){return qs})),n.d(u,"lessStrict",(function(){return Gs})),n.d(u,"notEqualStrict",(function(){return Xs})),n.d(u,"addStrict",(function(){return iu})),n.d(u,"divStrict",(function(){return ou})),n.d(u,"maximumStrict",(function(){return au})),n.d(u,"minimumStrict",(function(){return su})),n.d(u,"modStrict",(function(){return uu})),n.d(u,"mulStrict",(function(){return cu})),n.d(u,"powStrict",(function(){return lu})),n.d(u,"squaredDifferenceStrict",(function(){return hu})),n.d(u,"subStrict",(function(){return fu})),n.d(u,"transpose",(function(){return H})),n.d(u,"norm",(function(){return gu})),n.d(u,"movingAverage",(function(){return vu})),n.d(u,"scatterND",(function(){return _u})),n.d(u,"sparseToDense",(function(){return Cu})),n.d(u,"gatherND",(function(){return Au})),n.d(u,"dropout",(function(){return ju})),n.d(u,"enclosingPowerOfTwo",(function(){return Du})),n.d(u,"cosineWindow",(function(){return Mu})),n.d(u,"inTopKAsync",(function(){return Iu})),n.d(u,"op",(function(){return w["a"]})),n.d(u,"image",(function(){return gl})),n.d(u,"linalg",(function(){return ml})),n.d(u,"losses",(function(){return vl})),n.d(u,"spectral",(function(){return dl})),n.d(u,"fused",(function(){return s})),n.d(u,"signal",(function(){return pl}));var c={};n.r(c),n.d(c,"copyModel",(function(){return jl})),n.d(c,"listModels",(function(){return Tl})),n.d(c,"moveModel",(function(){return Dl})),n.d(c,"removeModel",(function(){return El})),n.d(c,"browserFiles",(function(){return hh})),n.d(c,"browserHTTPRequest",(function(){return Sh})),n.d(c,"concatenateArrayBuffers",(function(){return yl["d"]})),n.d(c,"decodeWeights",(function(){return yl["e"]})),n.d(c,"encodeWeights",(function(){return yl["f"]})),n.d(c,"fromMemory",(function(){return Ah})),n.d(c,"getLoadHandlers",(function(){return Ol})),n.d(c,"getModelArtifactsInfoForJSON",(function(){return yl["g"]})),n.d(c,"getSaveHandlers",(function(){return _l})),n.d(c,"http",(function(){return Oh})),n.d(c,"isHTTPScheme",(function(){return wh})),n.d(c,"loadWeights",(function(){return gh})),n.d(c,"registerLoadRouter",(function(){return wl})),n.d(c,"registerSaveRouter",(function(){return xl})),n.d(c,"weightsLoaderFactory",(function(){return mh})),n.d(c,"withSaveHandler",(function(){return Th}));var l={};n.r(l),n.d(l,"confusionMatrix",(function(){return jh}));var h={};n.r(h),n.d(h,"toPixels",(function(){return Ih})),n.d(h,"fromPixels",(function(){return Rh}));var f={};n.r(f),n.d(f,"prepareAndValidate",(function(){return Fh}));var d={};n.r(d),n.d(d,"Serializable",(function(){return Ph})),n.d(d,"SerializationMap",(function(){return $h})),n.d(d,"registerClass",(function(){return Lh}));var p={};n.r(p),n.d(p,"axesAreInnerMostDims",(function(){return I})),n.d(p,"combineLocations",(function(){return R})),n.d(p,"computeOutAndReduceShapes",(function(){return F})),n.d(p,"expandShapeToKeepDim",(function(){return P})),n.d(p,"assertAxesAreInnerMostDims",(function(){return $})),n.d(p,"getAxesPermutation",(function(){return L})),n.d(p,"getUndoAxesPermutation",(function(){return z})),n.d(p,"getInnerMostAxes",(function(){return B})),n.d(p,"getBroadcastDims",(function(){return Bn})),n.d(p,"getReductionAxes",(function(){return Un})),n.d(p,"assertAndGetBroadcastShape",(function(){return Wn})),n.d(p,"assertParamsConsistent",(function(){return ee})),n.d(p,"computeOutShape",(function(){return ne})),n.d(p,"computeDilation2DInfo",(function(){return ft})),n.d(p,"computePool2DInfo",(function(){return dt})),n.d(p,"computePool3DInfo",(function(){return pt})),n.d(p,"computeConv2DInfo",(function(){return gt})),n.d(p,"computeConv3DInfo",(function(){return mt})),n.d(p,"computeDefaultPad",(function(){return bt})),n.d(p,"tupleValuesAreOne",(function(){return kt})),n.d(p,"eitherStridesOrDilationsAreOne",(function(){return At})),n.d(p,"convertConv2DDataFormat",(function(){return Tt})),n.d(p,"getFusedDyActivation",(function(){return Pu})),n.d(p,"getFusedBiasGradient",(function(){return $u})),n.d(p,"applyActivation",(function(){return Lu})),n.d(p,"shouldFuse",(function(){return zu})),n.d(p,"PARALLELIZE_THRESHOLD",(function(){return br})),n.d(p,"computeOptimalWindowSize",(function(){return xr})),n.d(p,"upcastType",(function(){return Yh["c"]})),n.d(p,"getImageCenter",(function(){return tf})),n.d(p,"getReshaped",(function(){return ef})),n.d(p,"getPermuted",(function(){return nf})),n.d(p,"getReshapedPermuted",(function(){return rf})),n.d(p,"getSliceBeginCoords",(function(){return of})),n.d(p,"getSliceSize",(function(){return af})),n.d(p,"prepareAndValidate",(function(){return Fh})),n.d(p,"validateUpdateShape",(function(){return yu})),n.d(p,"validateInput",(function(){return bu})),n.d(p,"calculateShapes",(function(){return xu})),n.d(p,"SELU_SCALEALPHA",(function(){return sf})),n.d(p,"SELU_SCALE",(function(){return uf})),n.d(p,"ERF_P",(function(){return cf})),n.d(p,"ERF_A1",(function(){return lf})),n.d(p,"ERF_A2",(function(){return hf})),n.d(p,"ERF_A3",(function(){return ff})),n.d(p,"ERF_A4",(function(){return df})),n.d(p,"ERF_A5",(function(){return pf})),n.d(p,"warn",(function(){return gf})),n.d(p,"log",(function(){return mf})),n.d(p,"mergeRealAndImagArrays",(function(){return vf})),n.d(p,"splitRealAndImagArrays",(function(){return yf})),n.d(p,"complexWithEvenIndex",(function(){return bf})),n.d(p,"complexWithOddIndex",(function(){return xf})),n.d(p,"getComplexWithIndex",(function(){return wf})),n.d(p,"assignToTypedArray",(function(){return _f})),n.d(p,"exponents",(function(){return Of})),n.d(p,"exponent",(function(){return Sf})),n.d(p,"prepareSplitSize",(function(){return Aa})),n.d(p,"segment_util",(function(){return i})),n.d(p,"castTensor",(function(){return Cf})),n.d(p,"reshapeTensor",(function(){return kf})),n.d(p,"linspaceImpl",(function(){return Af}));var g={};n.r(g),n.d(g,"nonMaxSuppressionV3Impl",(function(){return yc})),n.d(g,"nonMaxSuppressionV4Impl",(function(){return bc})),n.d(g,"nonMaxSuppressionV5Impl",(function(){return xc})),n.d(g,"split",(function(){return Ef})),n.d(g,"tile",(function(){return jf})),n.d(g,"topkImpl",(function(){return Df})),n.d(g,"whereImpl",(function(){return Ms}));var m=n("6ae2"),v=(n("29a8e"),n("b333"));
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class y{fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}}Object(v["c"])().get("IS_BROWSER")&&Object(v["c"])().setPlatform("browser",new y);n("4b05");var b=n("c05b"),x=n("a3f7"),w=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _(t){const e=Object(x["a"])(t,"x","abs"),n={x:e};return m["a"].runKernelFunc((t,n)=>(n([e]),"complex64"===e.dtype?t.complexAbs(e):t.abs(e)),n,null,b["a"])}const O=Object(w["a"])({abs_:_});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S(t){const e=Object(x["a"])(t,"x","acos"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.acos(e);return n([e]),r},n,null,b["b"])}const C=Object(w["a"])({acos_:S});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k(t){const e=Object(x["a"])(t,"x","acosh"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.acosh(e);return n([e]),r},n,null,b["c"])}const A=Object(w["a"])({acosh_:k});var T=n("76c2");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E(t,e){let n=Object(x["a"])(t,"a","add"),r=Object(x["a"])(e,"b","add");[n,r]=Object(T["makeTypesMatch"])(n,r);const i=(t,e)=>{const i=t.add(n,r);return e([n,r]),i},o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["d"])}const j=Object(w["a"])({add_:E});var D=n("eb7e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M(t){D["assert"](Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),D["assert"](t.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+t.length);const e=t.map((t,e)=>Object(x["a"])(t,"tensors"+e,"addN")),n=e[0];e.forEach(t=>{if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(t=>{if(!D["arraysEqual"](t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=(t,n)=>{const r=t.addN(e);return n(e),r},i=e;return m["a"].runKernelFunc(r,i,null,b["e"])}const N=Object(w["a"])({addN_:M});
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function R(t,e,n){const r=t.length+e.length,i=[];let o=0,a=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?i.push(t[o++]):i.push(e[a++]);return i}function F(t,e){const n=[],r=t.length;for(let o=0;o<r;o++)-1===e.indexOf(o)&&n.push(t[o]);const i=e.map(e=>t[e]);return[n,i]}function P(t,e){const n=e.map(t=>1);return R(t,n,e)}function $(t,e,n){D["assert"](I(e,n),()=>t+" supports only inner-most axes for now. "+`Got axes ${e} and rank-${n} input.`)}function L(t,e){if(I(t,e))return null;const n=[];for(let r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(t=>n.push(t)),n}function z(t){return t.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function B(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U(t,e){const n=Object(x["a"])(t,"x","reshape",null);e=D["inferFromImplicitShape"](e,n.size),D["assert"](n.size===D["sizeFromShape"](e),()=>"new shape and old shape must have the same number of elements.");const r={x:n},i={shape:e},o=(t,r)=>(r([n]),t.reshape(n,e));return m["a"].runKernelFunc(o,r,null,b["gc"],i)}const W=Object(w["a"])({reshape_:U});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V(t,e){const n=Object(x["a"])(t,"x","transpose");if(null==e&&(e=n.shape.map((t,e)=>e).reverse()),D["assert"](n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${e}.`),e.forEach(t=>{D["assert"](t>=0&&t<n.rank,()=>"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e)}),n.rank<=1)return n.clone();const r={x:n},i={perm:e};return m["a"].runKernelFunc(t=>t.transpose(n,e),r,null,b["Nc"],i)}const H=Object(w["a"])({transpose_:V});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q(t,e=null,n=!1){let r=Object(x["a"])(t,"x","all","bool");const i=t=>{const i=Object(D["parseAxisParam"])(e,r.shape);let o=i;const a=L(o,r.rank);null!=a&&(r=H(r,a),o=B(o.length,r.rank));const s=t.all(r,o);if(n){const t=P(s.shape,i);return W(s,t)}return s},o={x:r},a={axis:e,keepDims:n};return m["a"].runKernelFunc(i,o,null,b["f"],a)}const G=Object(w["a"])({all_:q});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X(t,e=null,n=!1){let r=Object(x["a"])(t,"x","any","bool");const i=t=>{const i=Object(D["parseAxisParam"])(e,r.shape);let o=i;const a=L(o,r.rank);null!=a&&(r=H(r,a),o=B(o.length,r.rank));const s=t.any(r,o);if(n){const t=P(s.shape,i);return W(s,t)}return s},o={x:r},a={axis:e,keepDims:n};return m["a"].runKernelFunc(i,o,null,b["g"],a)}const Y=Object(w["a"])({any_:X});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K(t,e=0){let n=Object(x["a"])(t,"x","argMax");const r=(t,r)=>{r([n]);let i=D["parseAxisParam"](e,n.shape);const o=L(i,n.rank);return null!=o&&(n=H(n,o),i=B(i.length,n.rank)),t.argMax(n,i[0])},i={x:n},o={axis:e};return m["a"].runKernelFunc(r,i,null,b["h"],o)}const Z=Object(w["a"])({argMax_:K});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J(t,e=0){let n=Object(x["a"])(t,"x","argMin");const r=(t,r)=>{r([n]),null==e&&(e=0);let i=D["parseAxisParam"](e,n.shape);const o=L(i,n.rank);return null!=o&&(n=H(n,o),i=B(i.length,n.rank)),t.argMin(n,i[0])},i={x:n},o={axis:e};return m["a"].runKernelFunc(r,i,null,b["i"],o)}const Q=Object(w["a"])({argMin_:J});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tt(t){const e=Object(x["a"])(t,"x","asin"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.asin(e);return n([e]),r},n,null,b["j"])}const et=Object(w["a"])({asin_:tt});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nt(t){const e=Object(x["a"])(t,"x","asinh"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.asinh(e);return n([e]),r},n,null,b["k"])}const rt=Object(w["a"])({asinh_:nt});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function it(t){const e=Object(x["a"])(t,"x","atan"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.atan(e);return n([e]),r},n,null,b["l"])}const ot=Object(w["a"])({atan_:it});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function at(t,e){let n=Object(x["a"])(t,"a","atan2"),r=Object(x["a"])(e,"b","atan2");[n,r]=Object(T["makeTypesMatch"])(n,r);const i=(t,e)=>{const i=t.atan2(n,r);return e([n,r]),i},o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["m"])}const st=Object(w["a"])({atan2_:at});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ut(t){const e=Object(x["a"])(t,"x","atanh"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.atanh(e);return n([e]),r},n,null,b["n"])}const ct=Object(w["a"])({atanh_:ut});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lt(t,e){const n=Object(x["a"])(t,"x","cast");if(!D["isValidDtype"](e))throw new Error("Failed to cast to unknown dtype "+e);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return m["a"].runKernelFunc(t=>t.cast(n,e),r,null,b["v"],i)}const ht=Object(w["a"])({cast_:lt});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ft(t,e,n,r,i="NHWC",o){const a=t[3],s=[...e,a],u=Tt(i);return gt(t,s,n,o,r,null,null,u)}function dt(t,e,n,r,i,o,a="channelsLast"){const[s,u]=xt(e);let c;if("channelsLast"===a)c=[s,u,t[3],t[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);c=[s,u,t[1],t[1]]}return gt(t,c,n,r,i,o,!1,a)}function pt(t,e,n,r,i,o,a="NDHWC"){const[s,u,c]=wt(e);let l,h;if("NDHWC"===a)h="channelsLast",l=[s,u,c,t[4],t[4]];else{if("NCDHW"!==a)throw new Error("Unknown dataFormat "+a);h="channelsFirst",l=[s,u,c,t[1],t[1]]}return mt(t,l,n,r,i,!1,h,o)}function gt(t,e,n,r,i,o,a=!1,s="channelsLast"){let[u,c,l,h]=[-1,-1,-1,-1];if("channelsLast"===s)[u,c,l,h]=t;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);[u,h,c,l]=t}const[f,d,,p]=e,[g,m]=xt(n),[v,y]=xt(r),b=_t(f,v),x=_t(d,y),{padInfo:w,outHeight:_,outWidth:O}=Ot(i,c,l,g,m,b,x,o,s),S=a?p*h:p;let C;return"channelsFirst"===s?C=[u,S,_,O]:"channelsLast"===s&&(C=[u,_,O,S]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:h,outHeight:_,outWidth:O,outChannels:S,padInfo:w,strideHeight:g,strideWidth:m,filterHeight:f,filterWidth:d,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:v,dilationWidth:y,inShape:t,outShape:C,filterShape:e}}function mt(t,e,n,r,i,o=!1,a="channelsLast",s){let[u,c,l,h,f]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[u,c,l,h,f]=t;else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);[u,f,c,l,h]=t}const[d,p,g,,m]=e,[v,y,b]=wt(n),[x,w,_]=wt(r),O=_t(d,x),S=_t(p,w),C=_t(g,_),{padInfo:k,outDepth:A,outHeight:T,outWidth:E}=St(i,c,l,h,v,y,b,O,S,C,s),j=o?m*f:m;let D;return"channelsFirst"===a?D=[u,j,A,T,E]:"channelsLast"===a&&(D=[u,A,T,E,j]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:l,inWidth:h,inChannels:f,outDepth:A,outHeight:T,outWidth:E,outChannels:j,padInfo:k,strideDepth:v,strideHeight:y,strideWidth:b,filterDepth:d,filterHeight:p,filterWidth:g,effectiveFilterDepth:O,effectiveFilterHeight:S,effectiveFilterWidth:C,dilationDepth:x,dilationHeight:w,dilationWidth:_,inShape:t,outShape:D,filterShape:e}}function vt(t,e,n,r,i){null==r&&(r=bt(t,e,n));const o=t[0],a=t[1],s=Ct((o-e+2*r)/n+1,i);D["assert"](D["isInt"](s),()=>`The output # of rows (${s}) must be an integer. Change the stride and/or zero pad parameters`);const u=Ct((a-e+2*r)/n+1,i);return D["assert"](D["isInt"](u),()=>`The output # of columns (${u}) must be an integer. Change the stride and/or zero pad parameters`),[s,u]}function yt(t,e,n,r,i,o){null==i&&(i=bt(t,e,r));const a=t[0],s=t[1],u=t[2],c=Ct((a-e+2*i)/r+1,o);D["assert"](D["isInt"](c),()=>`The output # of depths (${c}) must be an integer. Change the stride and/or zero pad parameters`);const l=Ct((s-e+2*i)/r+1,o);D["assert"](D["isInt"](l),()=>`The output # of rows (${l}) must be an integer. Change the stride and/or zero pad parameters`);const h=Ct((u-e+2*i)/r+1,o);return D["assert"](D["isInt"](h),()=>`The output # of columns (${h}) must be an integer. Change the stride and/or zero pad parameters`),[c,l,h,n]}function bt(t,e,n,r=1){const i=_t(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function xt(t){return"number"===typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function wt(t){return"number"===typeof t?[t,t,t]:t}function _t(t,e){return e<=1?t:t+(t-1)*(e-1)}function Ot(t,e,n,r,i,o,a,s,u){let c,l,h;if("number"===typeof t){const i=0===t?"VALID":"NUMBER";c={top:t,bottom:t,left:t,right:t,type:i};const a=vt([e,n],o,r,t,s);l=a[0],h=a[1]}else if("same"===t){l=Math.ceil(e/r),h=Math.ceil(n/i);const t=Math.max(0,(l-1)*r+o-e),s=Math.max(0,(h-1)*i+a-n),u=Math.floor(t/2),f=t-u,d=Math.floor(s/2),p=s-d;c={top:u,bottom:f,left:d,right:p,type:"SAME"}}else if("valid"===t)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-o+1)/r),h=Math.ceil((n-a+1)/i);else{if("object"!==typeof t)throw Error("Unknown padding parameter: "+t);{const f="channelsLast"===u?t[1][0]:t[2][0],d="channelsLast"===u?t[1][1]:t[2][1],p="channelsLast"===u?t[2][0]:t[3][0],g="channelsLast"===u?t[2][1]:t[3][1],m=0===f&&0===d&&0===p&&0===g?"VALID":"EXPLICIT";c={top:f,bottom:d,left:p,right:g,type:m},l=Ct((e-o+f+d)/r+1,s),h=Ct((n-a+p+g)/i+1,s)}}return{padInfo:c,outHeight:l,outWidth:h}}function St(t,e,n,r,i,o,a,s,u,c,l){let h,f,d,p;if("number"===typeof t){const o=0===t?"VALID":"NUMBER";h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:o};const a=yt([e,n,r,1],s,1,i,t,l);f=a[0],d=a[1],p=a[2]}else if("same"===t){f=Math.ceil(e/i),d=Math.ceil(n/o),p=Math.ceil(r/a);const t=(f-1)*i+s-e,l=(d-1)*o+u-n,g=(p-1)*a+c-r,m=Math.floor(t/2),v=t-m,y=Math.floor(l/2),b=l-y,x=Math.floor(g/2),w=g-x;h={top:y,bottom:b,left:x,right:w,front:m,back:v,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((e-s+1)/i),d=Math.ceil((n-u+1)/o),p=Math.ceil((r-c+1)/a)}return{padInfo:h,outDepth:f,outHeight:d,outWidth:p}}function Ct(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function kt(t){const[e,n,r]=xt(t);return 1===e&&1===n&&1===r}function At(t,e){return kt(t)||kt(e)}function Tt(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat "+t)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Et(t,e,n,r,i){const o=Object(x["a"])(t,"x","avgPool","float32"),a=1;D["assert"](At(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let s=o,u=!1;3===o.rank&&(u=!0,s=W(o,[1,o.shape[0],o.shape[1],o.shape[2]])),D["assert"](4===s.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),null!=i&&D["assert"](D["isInt"](r),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const c=(t,o)=>{const a=dt(s.shape,e,n,1,r,i);return o([s]),1===a.filterWidth&&1===a.filterHeight&&D["arraysEqual"](a.inShape,a.outShape)?s.clone():t.avgPool(s,a)},l={x:s},h={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let f=m["a"].runKernelFunc(c,l,null,b["o"],h);return f=ht(f,o.dtype),u?W(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const jt=Object(w["a"])({avgPool_:Et});var Dt=n("34d7");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mt(){Object(v["c"])().set("PROD",!0)}function Nt(){Object(v["c"])().set("DEBUG",!0)}function It(){Object(v["c"])().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Rt(t){Object(v["c"])().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ft(){m["a"].disposeVariables()}function Pt(){return m["a"]}function $t(){return m["a"].memory()}function Lt(t){return m["a"].profile(t)}function zt(t,e){return m["a"].tidy(t,e)}function Bt(t){const e=Object(T["getTensorsInContainer"])(t);e.forEach(t=>t.dispose())}function Ut(t){return m["a"].keep(t)}function Wt(t){return m["a"].time(t)}function Vt(t){return m["a"].setBackend(t)}function Ht(){return m["a"].ready()}function qt(){return m["a"].backendName}function Gt(t){m["a"].removeBackend(t)}function Xt(t){return m["a"].findBackend(t)}function Yt(t){return m["a"].findBackendFactory(t)}function Kt(t,e,n=1){return m["a"].registerBackend(t,e,n)}function Zt(){return m["a"].backend}function Jt(t,e){Object(v["c"])().setPlatform(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qt(t,e,n,r,i,o="NDHWC",a){null==a?a=[1,1,1]:Rt("dilations is deprecated, this field will be gone in v3.0.0.");const s=Object(x["a"])(t,"x","avgPool3d","float32");let u=s,c=!1;4===s.rank&&(c=!0,u=W(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),D["assert"](5===u.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${u.rank}.`),D["assert"]("NDHWC"===o,()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o),D["assert"](At(n,a),()=>`Error in avgPool3d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),null!=i&&D["assert"](D["isInt"](r),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const l=(t,s)=>{null==a&&(a=[1,1,1]);const c=pt(u.shape,e,n,a,r,i,o);return s([u]),t.avgPool3d(u,c)},h={x:u},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:o,dilations:a};let d=m["a"].runKernelFunc(l,h,null,b["p"],f);return d=ht(d,u.dtype),c?W(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}Object(Dt["d"])(Rt);const te=Object(w["a"])({avgPool3d_:Qt});
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ee(t,e){const n=t[0].length;t.forEach((t,e)=>{D["assert"](t.length===n,()=>`Error in concat${n}D: rank of tensors[${e}] must be the same as the rank of the rest (${n})`)}),D["assert"](e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((t,i)=>{for(let o=0;o<n;o++)D["assert"](o===e||t[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${t}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function ne(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}var re=n("357d");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ie(t,e=0){Object(D["assert"])(t.length>=1,()=>"Pass at least one tensor to concat");let n=Object(x["b"])(t,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(t=>{if("complex64"!==t.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${t.dtype}. `)});const r=Object(D["parseAxisParam"])(e,n[0].shape)[0],i=ne(n.map(t=>t.shape),r);if(0===Object(D["sizeFromShape"])(i))return Object(re["a"])([],i);if(n=n.filter(t=>t.size>0),1===n.length)return n[0];const o=n.map(t=>t.shape);ee(o,r);const a=(t,e)=>{const i=t.concat(n,r);return e(n),i},s=n,u={axis:e};return m["a"].runKernelFunc(a,s,null,b["z"],u)}const oe=Object(w["a"])({concat_:ie});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ae(t,e,n=!1,r=!1){let i=Object(x["a"])(t,"a","matMul"),o=Object(x["a"])(e,"b","matMul");[i,o]=Object(T["makeTypesMatch"])(i,o),D["assert"](i.rank>=2&&o.rank>=2&&i.rank===o.rank,()=>`Error in matMul: inputs must have the same rank of at least 2, got ranks ${i.rank} and ${o.rank}.`);const a=n?i.shape[i.rank-2]:i.shape[i.rank-1],s=r?o.shape[o.rank-1]:o.shape[o.rank-2],u=n?i.shape[i.rank-1]:i.shape[i.rank-2],c=r?o.shape[o.rank-2]:o.shape[o.rank-1],l=i.shape.slice(0,-2),h=o.shape.slice(0,-2),f=D["sizeFromShape"](l),d=D["sizeFromShape"](h);D["assert"](D["arraysEqual"](l,h),()=>`Error in matMul: outer dimensions (${l}) and (${h}) of Tensors with shapes ${i.shape} and `+o.shape+" must match."),D["assert"](a===s,()=>`Error in matMul: inner shapes (${a}) and (${s}) of Tensors with shapes ${i.shape} and ${o.shape} and transposeA=${n} and transposeB=${r} must match.`);const p=i.shape.slice(0,-2).concat([u,c]),g=W(i,n?[f,a,u]:[f,u,a]),v=W(o,r?[d,c,s]:[d,s,c]),y=(t,e)=>(e([g,v]),t.batchMatMul(g,v,n,r)),w={a:g,b:v},_={transposeA:n,transposeB:r},O=m["a"].runKernelFunc(y,w,null,b["s"],_);return W(O,p)}const se=Object(w["a"])({matMul_:ae});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ue(t,e){let n=Object(x["a"])(t,"a","mul"),r=Object(x["a"])(e,"b","mul");[n,r]=Object(T["makeTypesMatch"])(n,r);const i=(t,e)=>{const i=t.multiply(n,r);return e([n,r]),i},o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["Ob"])}const ce=Object(w["a"])({mul_:ue});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function le(t){const e=Object(x["a"])(t,"x","sigmoid"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.sigmoid(e);return n([r]),r},n,null,b["sc"])}const he=Object(w["a"])({sigmoid_:le});
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fe(t,e,n){D["assert"](t.rank===e.length,()=>`Error in slice${t.rank}D: Length of begin ${e} must match the rank of the array (${t.rank}).`),D["assert"](t.rank===n.length,()=>`Error in slice${t.rank}D: Length of size ${n} must match the rank of the array (${t.rank}).`);for(let r=0;r<t.rank;++r)D["assert"](e[r]+n[r]<=t.shape[r],()=>`Error in slice${t.rank}D: begin[${r}] + size[${r}] (${e[r]+n[r]}) would overflow input.shape[${r}] (${t.shape[r]})`)}function de(t){const e=[];let n=0;while(t>0)1&t&&e.push(n),t/=2,n++;return e}function pe(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function ge(t,e,n,r){const i=[...t];for(let o=i.length;o<r.length;o++)i.push(1);for(let o=0;o<n;o++)0===o?i[e]=1:(i.splice(e,0,1),i.pop());return i}function me(t,e,n){return n<=t?n:n-(e-1)}function ve(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function ye(t,e,n,r,i){const o=[...i],a=ve(n,e);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=0;else{const i=me(e,n,s);let a=r[i];t&1<<i&&(a=0),o[s]=a}return o}function be(t,e,n,r,i){const o=[...i],a=ve(n,e);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{const i=me(e,n,s);let a=r[i];t&1<<i&&(a=Number.MAX_SAFE_INTEGER),o[s]=a}for(let s=0;s<o.length;s++){const t=i[s];o[s]<0&&(o[s]+=t),o[s]=D["clamp"](0,o[s],i[s])}return o}function xe(t,e,n){let r=t[e];return(n&1<<e||null==r)&&(r=1),r}function we(t,e,n,r,i,o){let a=e[i];const s=n[i]||1;(t&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const u=r[i];return a<0&&(a+=u),a=D["clamp"](0,a,u-1),a}function _e(t,e,n,r,i,o){let a=e[i];const s=n[i]||1;(t&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const u=r[i];return a<0&&(a+=u),a=s>0?D["clamp"](0,a,u):D["clamp"](-1,a,u-1),a}function Oe(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function Se(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Ce(t,e,n){let r,i;return r="number"===typeof e?[e,...new Array(t.rank-1).fill(0)]:e.length<t.rank?e.concat(new Array(t.rank-e.length).fill(0)):e.slice(),r.forEach(t=>{D["assert"](-1!==t,()=>"slice() does not support negative begin indexing.")}),i=null==n?new Array(t.rank).fill(-1):"number"===typeof n?[n,...new Array(t.rank-1).fill(-1)]:n.length<t.rank?n.concat(new Array(t.rank-n.length).fill(-1)):n,i=i.map((e,n)=>e>=0?e:(D["assert"](-1===e,()=>`Negative size values should be exactly -1 but got ${e} for the slice() size at index ${n}.`),t.shape[n]-r[n])),[r,i]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ke(t,e,n){const r=Object(x["a"])(t,"x","slice");if(0===r.rank)throw new Error("Slicing scalar is not possible");const[i,o]=Ce(r,e,n);fe(r,i,o);const a=(t,e)=>(e([r]),t.slice(r,i,o)),s={x:r},u={begin:e,size:n};return m["a"].runKernelFunc(a,s,null,b["wc"],u)}const Ae=Object(w["a"])({slice_:ke});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Te(t){const e=Object(x["a"])(t,"x","tanh"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.tanh(e);return n([r]),r},n,null,b["Kc"])}const Ee=Object(w["a"])({tanh_:Te});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function je(t,e,n,r,i,o){const a=Object(x["a"])(t,"forgetBias","basicLSTMCell"),s=Object(x["a"])(e,"lstmKernel","basicLSTMCell"),u=Object(x["a"])(n,"lstmBias","basicLSTMCell"),c=Object(x["a"])(r,"data","basicLSTMCell"),l=Object(x["a"])(i,"c","basicLSTMCell"),h=Object(x["a"])(o,"h","basicLSTMCell"),f=oe([c,h],1),d=se(f,s),p=j(d,u),g=p.shape[0],m=p.shape[1]/4,v=[g,m],y=Ae(p,[0,0],v),b=Ae(p,[0,m],v),w=Ae(p,[0,2*m],v),_=Ae(p,[0,3*m],v),O=j(ce(he(y),Ee(b)),ce(l,he(j(a,w)))),S=ce(Ee(O),he(_));return[O,S]}const De=Object(w["a"])({basicLSTMCell_:je});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Me(t,e,n){const r=Object(x["a"])(t,"x","batchToSpaceND"),i=e.reduce((t,e)=>t*e);D["assert"](r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),D["assert"](n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),D["assert"](r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const o=t=>t.batchToSpaceND(r,e,n),a={x:r},s={blockShape:e,crops:n};return m["a"].runKernelFunc(o,a,null,b["t"],s)}const Ne=Object(w["a"])({batchToSpaceND_:Me});function Ie(t){let e;return e=0===t.rank||1===t.rank?W(t,[1,1,1,t.size]):2===t.rank?W(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?W(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t,e}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Re(t,e,n,r,i,o){null==o&&(o=.001);const a=Object(x["a"])(t,"x","batchNorm"),s=Object(x["a"])(e,"mean","batchNorm"),u=Object(x["a"])(n,"variance","batchNorm");let c,l;null!=i&&(c=Object(x["a"])(i,"scale","batchNorm")),null!=r&&(l=Object(x["a"])(r,"offset","batchNorm")),D["assert"](s.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),D["assert"](null==l||s.rank===l.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),D["assert"](null==c||s.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h=Ie(a),f=(t,e)=>(e([h,s,u,c]),t.batchNorm(h,Fe(s),Fe(u),Fe(l),Fe(c),o)),d={x:h,scale:c,offset:l,mean:s,variance:u},p={varianceEpsilon:o},g=m["a"].runKernelFunc(f,d,null,b["fb"],p);return W(g,a.shape)}function Fe(t){return null==t?null:0===t.rank?W(t,[t.size]):1===t.rank?t:2===t.rank?W(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?W(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t}const Pe=Object(w["a"])({batchNorm_:Re});function $e(t,e,n,r,i,o){const a=Object(x["a"])(t,"x","batchNorm"),s=Object(x["a"])(e,"mean","batchNorm"),u=Object(x["a"])(n,"variance","batchNorm");let c,l;return null!=i&&(c=Object(x["a"])(i,"scale","batchNorm")),null!=r&&(l=Object(x["a"])(r,"offset","batchNorm")),D["assert"](2===a.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+a.rank+"."),D["assert"](2===s.rank||1===s.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),D["assert"](2===u.rank||1===u.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),null!=c&&D["assert"](2===c.rank||1===c.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),null!=l&&D["assert"](2===l.rank||1===l.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${l.rank}.`),Pe(a,s,u,l,c,o)}const Le=Object(w["a"])({batchNorm2d_:$e});function ze(t,e,n,r,i,o){const a=Object(x["a"])(t,"x","batchNorm"),s=Object(x["a"])(e,"mean","batchNorm"),u=Object(x["a"])(n,"variance","batchNorm");let c,l;return null!=i&&(c=Object(x["a"])(i,"scale","batchNorm")),null!=r&&(l=Object(x["a"])(r,"offset","batchNorm")),D["assert"](3===a.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+a.rank+"."),D["assert"](3===s.rank||1===s.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),D["assert"](3===u.rank||1===u.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),null!=c&&D["assert"](3===c.rank||1===c.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),null!=l&&D["assert"](3===l.rank||1===l.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${l.rank}.`),Pe(a,s,u,l,c,o)}const Be=Object(w["a"])({batchNorm3d_:ze});function Ue(t,e,n,r,i,o){const a=Object(x["a"])(t,"x","batchNorm"),s=Object(x["a"])(e,"mean","batchNorm"),u=Object(x["a"])(n,"variance","batchNorm");let c,l;return null!=i&&(c=Object(x["a"])(i,"scale","batchNorm")),null!=r&&(l=Object(x["a"])(r,"offset","batchNorm")),D["assert"](4===a.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+a.rank+"."),D["assert"](4===s.rank||1===s.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),D["assert"](4===u.rank||1===u.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),null!=c&&D["assert"](4===c.rank||1===c.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),null!=l&&D["assert"](4===l.rank||1===l.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${l.rank}.`),Pe(a,s,u,l,c,o)}const We=Object(w["a"])({batchNorm4d_:Ue});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ve(t){const e=Object(x["a"])(t,"x","clone",null),n=()=>m["a"].makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return m["a"].runKernelFunc(n,r,null,b["nb"])}const He=Object(w["a"])({clone_:Ve});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qe(t,e){let n=Object(x["a"])(t,"broadcastTo","x");const r=n.shape;if(e.some(t=>!(t>0)||t%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const t=n.shape.slice();while(t.length<e.length)t.unshift(1);n=W(n,t)}const i=n.shape,o=Array.from(e);for(let l=e.length-1;l>=0;l--)if(i[l]===e[l])o[l]=1;else if(1!==n.shape[l])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);const a=o.map((t,e)=>t>1?e:-1).filter(t=>t>=0);if(0===a.length)return He(n);const s=t=>t.tile(n,o),u={x:n},c={shape:e,inputShape:i};return m["a"].runKernelFunc(s,u,null,b["u"],c)}const Ge=Object(w["a"])({broadcastTo_:qe});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xe(t,e="float32",n){return e=e||"float32",D["assertNonNegativeIntegerDimensions"](t),new Dt["b"](t,e,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ye(t){const e=Object(x["a"])(t,"x","ceil"),n={x:e};return m["a"].runKernelFunc(t=>t.ceil(e),n,null,b["w"])}const Ke=Object(w["a"])({ceil_:Ye});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ze(t,e,n){const r=Object(x["a"])(t,"x","clipByValue");D["assert"](e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`);const i={x:r},o={clipValueMin:e,clipValueMax:n};return m["a"].runKernelFunc((t,i)=>{const o=t.clip(r,e,n);return i([r]),o},i,null,b["x"],o)}const Je=Object(w["a"])({clipByValue_:Ze});var Qe=n("0777");function tn(t){return oe(t,0)}const en=Object(w["a"])({concat1d_:tn});function nn(t,e){return oe(t,e)}const rn=Object(w["a"])({concat2d_:nn});function on(t,e){return oe(t,e)}const an=Object(w["a"])({concat3d_:on});function sn(t,e){return oe(t,e)}const un=Object(w["a"])({concat4d_:sn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cn(t,e,n,r,i="NHWC",o=[1,1],a){const s=Object(x["a"])(t,"x","conv2d"),u=Object(x["a"])(e,"filter","conv2d");let c=s,l=!1;3===s.rank&&(l=!0,c=W(s,[1,s.shape[0],s.shape[1],s.shape[2]])),D["assert"](4===c.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),D["assert"](4===u.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."),null!=a&&D["assert"](D["isInt"](r),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);const h="NHWC"===i?c.shape[3]:c.shape[1];D["assert"](h===u.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${u.shape[2]}.`),D["assert"](At(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);const f=(t,e)=>{const s=Tt(i),l=gt(c.shape,u.shape,n,o,r,a,!1,s),h=t.conv2d(c,u,l);return e([c,u]),h},d={x:c,filter:u},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},g=m["a"].runKernelFunc(f,d,null,b["A"],p);return l?W(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const ln=Object(w["a"])({conv2d_:cn});function hn(t,e,n,r,i="NWC",o=1,a){const s=Object(x["a"])(t,"x","conv1d"),u=Object(x["a"])(e,"filter","conv1d");let c=s,l=!1;2===s.rank&&(l=!0,c=W(s,[1,s.shape[0],s.shape[1]])),D["assert"](3===c.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),D["assert"](3===u.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."),null!=a&&D["assert"](D["isInt"](r),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`),D["assert"](c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),D["assert"](At(n,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`),D["assert"]("NWC"===i,()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const h=W(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=W(c,[c.shape[0],1,c.shape[1],c.shape[2]]),d=[1,n],p=[1,o],g="NHWC",m=ln(f,h,d,r,g,p,a);return W(m,l?[m.shape[2],m.shape[3]]:[m.shape[0],m.shape[2],m.shape[3]])}const fn=Object(w["a"])({conv1d_:hn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dn(t,e,n,r,i,o="NHWC",a){D["assert"](t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,u=e,c=!1;3===e.rank&&(c=!0,u=W(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),D["assert"](4===s.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."),D["assert"](4===u.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank),D["assert"](4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank);const l="NHWC"===o?s[3]:s[1],h="NHWC"===o?u.shape[3]:u.shape[1];D["assert"](l===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[2]}.`),D["assert"](h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),null!=a&&D["assert"](D["isInt"](i),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${a} but got pad ${i}.`);const f=(t,e)=>{const c=1,l=Tt(o),h=gt(s,n.shape,r,c,i,a,!1,l),f=t.conv2dDerInput(u,n,h);return e([u,n]),f},d={dy:u,filter:n},p={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,inputShape:s},g=m["a"].runKernelFunc(f,d,null,b["C"],p);return c?W(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const pn=Object(w["a"])({conv2DBackpropInput_:dn});function gn(t,e,n,r,i,o){const a=Object(x["a"])(t,"x","conv2dTranspose"),s=Object(x["a"])(e,"filter","conv2dTranspose");return pn(n,a,s,r,i,"NHWC",o)}const mn=Object(w["a"])({conv2dTranspose_:gn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vn(t,e,n,r,i="NDHWC",o=[1,1,1]){const a=Object(x["a"])(t,"x","conv3d"),s=Object(x["a"])(e,"filter","conv3d");let u=a,c=!1;4===a.rank&&(c=!0,u=W(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),D["assert"](5===u.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),D["assert"](5===s.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."),D["assert"](u.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${s.shape[3]}.`),D["assert"](At(n,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),D["assert"]("NDHWC"===i,()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`);const l=(t,e)=>{const i=mt(u.shape,s.shape,n,o,r),a=t.conv3d(u,s,i);return e([u,s]),a},h={x:u,filter:s},f={strides:n,pad:r,dataFormat:i,dilations:o},d=m["a"].runKernelFunc(l,h,null,b["D"],f);return c?W(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const yn=Object(w["a"])({conv3d_:vn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bn(t,e,n,r,i){D["assert"](t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,a=e,s=!1;4===e.rank&&(s=!0,a=W(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),o=[1,t[0],t[1],t[2],t[3]]);const u=o[4],c=a.shape[4];D["assert"](5===o.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."),D["assert"](5===a.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank),D["assert"](5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank),D["assert"](u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),D["assert"](c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const l=t=>{const e=1,s=mt(o,n.shape,r,e,i);return t.conv3dDerInput(a,n,s)},h={dy:a},f={pad:i},d=m["a"].runKernelFunc(l,h,null,b["F"],f);return s?W(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const xn=Object(w["a"])({conv3DBackpropInput_:bn});function wn(t,e,n,r,i){const o=Object(x["a"])(t,"x","conv3dTranspose"),a=Object(x["a"])(e,"filter","conv3dTranspose");return xn(n,o,a,r,i)}const _n=Object(w["a"])({conv3dTranspose_:wn});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function On(t){const e=Object(x["a"])(t,"x","cos"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.cos(e);return n([e]),r},n,null,b["G"])}const Sn=Object(w["a"])({cos_:On});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cn(t){const e=Object(x["a"])(t,"x","cosh"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.cosh(e);return n([e]),r},n,null,b["H"])}const kn=Object(w["a"])({cosh_:Cn});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function An(t,e=0,n=!1,r=!1){const i=Object(x["a"])(t,"x","cumsum"),o=(t,o)=>{const a=L([e],i.rank);let s=i;null!=a&&(s=H(i,a));const u=B(1,i.rank)[0];let c=t.cumsum(s,u,n,r);if(o([i]),null!=a){const t=z(a);c=H(c,t)}return c},a={x:i},s={axis:e,exclusive:n,reverse:r};return m["a"].runKernelFunc(o,a,null,b["J"],s)}const Tn=Object(w["a"])({cumsum_:An});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function En(t,e,n="NHWC"){const r=Object(x["a"])(t,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];D["assert"](i*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${e}  for depthToSpace with input shape\n    ${r.shape}`),D["assert"](o*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${o} and ${e} for depthToSpace with input shape\n        ${r.shape}`),D["assert"](a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const s=t=>t.depthToSpace(r,e,n),u={x:r},c={blockSize:e,dataFormat:n};return m["a"].runKernelFunc(s,u,null,b["K"],c)}const jn=Object(w["a"])({depthToSpace_:En});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dn(t,e,n,r,i="NHWC",o=[1,1],a){const s=Object(x["a"])(t,"x","depthwiseConv2d"),u=Object(x["a"])(e,"filter","depthwiseConv2d");let c=s,l=!1;3===s.rank&&(l=!0,c=W(s,[1,s.shape[0],s.shape[1],s.shape[2]])),D["assert"](4===c.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),D["assert"](4===u.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."),D["assert"](c.shape[3]===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${c.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),null!=a&&D["assert"](D["isInt"](r),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`);const h=(t,e)=>{null==o&&(o=[1,1]),D["assert"](At(n,o),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);const i=gt(c.shape,u.shape,n,o,r,a,!0),s=t.depthwiseConv2D(c,u,i);return e([c,u]),s},f={x:c,filter:u},d={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},p=m["a"].runKernelFunc(h,f,null,b["L"],d);return l?W(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Mn=Object(w["a"])({depthwiseConv2d_:Dn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nn(t){const e=Object(x["a"])(t,"x","diag"),n=n=>{const r=W(e,[e.size]),i=n.diag(r),o=[...t.shape,...t.shape];return W(i,o)},r={x:e};return m["a"].runKernelFunc(n,r,null,b["O"])}const In=Object(w["a"])({diag_:Nn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rn(t,e,n,r,i=[1,1],o="NHWC"){const a=Object(x["a"])(t,"x","dilation2d"),s=Object(x["a"])(e,"filter","dilation2d");D["assert"](3===a.rank||4===a.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+a.rank+"."),D["assert"](3===s.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+s.rank+"."),D["assert"]("NHWC"===o,()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of "+o);let u=a,c=!1;3===a.rank&&(u=W(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0);const l={x:u,filter:s},h={strides:n,pad:r,dilations:i},f=m["a"].runKernel(b["P"],l,h);return c?W(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Fn=Object(w["a"])({dilation2d_:Rn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pn(t,e){let n=Object(x["a"])(t,"a","floorDiv"),r=Object(x["a"])(e,"b","floorDiv");[n,r]=Object(T["makeTypesMatch"])(n,r);const i=(t,e)=>{const i=t.floorDiv(n,r);return e([n,r]),i},o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["db"])}const $n=Object(w["a"])({floorDiv_:Pn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ln(t,e){let n=Object(x["a"])(t,"a","div"),r=Object(x["a"])(e,"b","div");if([n,r]=Object(T["makeTypesMatch"])(n,r),"int32"===n.dtype&&"int32"===r.dtype)return $n(n,r);const i=(t,e)=>{const i=t.realDivide(n,r);return e([n,r]),i},o={a:n,b:r},a={};return m["a"].runKernelFunc(i,o,null,b["S"],a)}const zn=Object(w["a"])({div_:Ln});
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bn(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const o=n-1-i,a=t[o]||1,s=e[e.length-1-i]||1;s>1&&1===a&&r.unshift(o)}return r}function Un(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],o=e.length-r-1,a=e[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function Wn(t,e){const n=[],r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let r=t[t.length-i-1];null==r&&(r=1);let o=e[e.length-i-1];if(null==o&&(o=1),1===r)n.unshift(o);else if(1===o)n.unshift(r);else{if(r!==o){const n=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(n)}n.unshift(r)}}return n}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vn(t,e){let n=Object(x["a"])(t,"a","equal"),r=Object(x["a"])(e,"b","equal");[n,r]=Object(T["makeTypesMatch"])(n,r),Wn(n.shape,r.shape);const i=t=>t.equal(n,r),o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["V"])}const Hn=Object(w["a"])({equal_:Vn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qn(t,e,n){const r=Object(x["a"])(e,"a","where"),i=Object(x["a"])(n,"b","where"),o=Object(x["a"])(t,"condition","where","bool"),a=Wn(r.shape,i.shape),s=Ge(r,a),u=Ge(i,a);1===o.rank&&Object(D["assert"])(o.shape[0]===r.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),1!==o.rank&&Object(D["assertShapesMatch"])(o.shape,u.shape,"Error in where: ");const c=(t,e)=>{const n=t.select(o,s,u);return e([o]),n},l={condition:o,t:s,e:u};return m["a"].runKernelFunc(c,l,null,b["qc"])}const Gn=Object(w["a"])({where_:qn});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xn(t){const e=Object(x["a"])(t,"x","zerosLike"),n={x:e};return m["a"].runKernelFunc(t=>t.zerosLike(e),n,null,b["Qc"])}const Yn=Object(w["a"])({zerosLike_:Xn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kn(t,e){let n=Object(x["a"])(t,"a","div"),r=Object(x["a"])(e,"b","div");[n,r]=Object(T["makeTypesMatch"])(n,r);const i=zn(n,r),o=Yn(i),a=Hn(r,o);return Gn(a,o,i)}const Zn=Object(w["a"])({divNoNan_:Kn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jn(t,e){const n=Object(x["a"])(t,"t1","dot"),r=Object(x["a"])(e,"t2","dot");D["assert"]((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(D["assert"](i===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${o}.`),1===n.rank&&1===r.rank){const t=W(n,[1,-1]),e=W(r,[-1,1]),i=se(t,e);return W(i,[])}if(1===n.rank&&2===r.rank){const t=W(n,[1,-1]),e=W(r,[r.shape[0],r.shape[1]]),i=se(t,e);return W(i,[i.size])}if(2===n.rank&&1===r.rank){const t=W(r,[-1,1]),e=se(n,t);return W(e,[e.size])}{const t=W(r,[r.shape[0],r.shape[1]]),e=se(n,t);return e}}const Qn=Object(w["a"])({dot_:Jn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tr(t){const e=Object(x["a"])(t,"x","elu"),n=(t,n)=>{const r=t.elu(e);return n([r]),r},r={x:e};return m["a"].runKernelFunc(n,r,null,b["T"])}const er=Object(w["a"])({elu_:tr});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nr(t){let e=Object(x["a"])(t,"x","erf");D["assert"]("int32"===e.dtype||"float32"===e.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=ht(e,"float32"));const n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.erf(e);return n([e]),r},n,null,b["W"])}const rr=Object(w["a"])({erf_:nr});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ir(t){const e=Object(x["a"])(t,"x","exp"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.exp(e);return n([r]),r},n,null,b["X"])}const or=Object(w["a"])({exp_:ir});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ar(t,e=0){const n=null,r=Object(x["a"])(t,"x","expandDims",n);D["assert"](e<=r.rank,()=>"Axis must be <= rank of the tensor");const i=r.shape.slice();return e<0&&(D["assert"](-(r.rank+1)<=e,()=>`Axis must be in the interval [${-(r.rank+1)}, ${r.rank}]`),e=r.rank+e+1),i.splice(e,0,1),W(r,i)}const sr=Object(w["a"])({expandDims_:ar});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ur(t){const e=Object(x["a"])(t,"x","expm1"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.expm1(e);return n([e]),r},n,null,b["Y"])}const cr=Object(w["a"])({expm1_:ur});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lr(t,e){const n=null,r=Object(x["a"])(t,"x","tile",n);D["assert"](r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of reps ${e}.`);const i=(t,n)=>{const i=t.tile(r,e);return n([r]),i},o=[r],a={x:r},s={reps:e};return m["a"].runKernelFunc(i,a,null,b["Lc"],s,o)}const hr=Object(w["a"])({tile_:lr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fr(t,e,n,r="float32"){null==e&&(e=t);const i=Xe([t,e],r),o=t<=e?t:e;for(let s=0;s<o;++s)i.set(1,s,s);const a=W(i.toTensor(),[t,e]);if(null==n)return a;if(1===n.length)return hr(sr(a,0),[n[0],1,1]);if(2===n.length)return hr(sr(sr(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return hr(sr(sr(sr(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const dr=Object(w["a"])({eye_:fr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pr(t){Object(D["assert"])("complex64"===t.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return m["a"].runKernelFunc(e=>{const n=t.shape[t.shape.length-1],r=t.size/n,i=t.as2D(r,n),o=e.fft(i);return o.reshape(t.shape)},e,null,b["Z"])}const gr=Object(w["a"])({fft_:pr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mr(t,e,n){const r={shape:t,value:e,dtype:n};return m["a"].runKernelFunc(r=>r.fill(t,e,n),{},null,b["ab"],r)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vr(t){const e=Object(x["a"])(t,"x","floor"),n={x:e};return m["a"].runKernelFunc(t=>t.floor(e),n,null,b["cb"])}const yr=Object(w["a"])({floor_:vr}),br=30;
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xr(t){return t<=br?t:Object(D["nearestDivisor"])(t,Math.floor(Math.sqrt(t)))}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wr(t,e){let n,r=!1;t<=br?(n=t,r=!0):n=Object(D["nearestDivisor"])(t,Math.floor(Math.sqrt(t)));while(!r)n>e||n===t?r=!0:n=Object(D["nearestDivisor"])(t,n+1);return n}function _r(t,e,n){const r=[],i=t.length;for(let o=0;o<i;o++)o!==e?r.push(t[o]):r.push(n);return r}function Or(t,e,n){const r=t.shape[n],i=[];let o=1,a=1;for(let s=0;s<n;s++)i.push(t.shape[s]),o*=t.shape[s];for(let s=0;s<e.rank;s++)i.push(e.shape[s]);for(let s=n+1;s<t.rank;s++)i.push(t.shape[s]),a*=t.shape[s];return{batchSize:o,sliceSize:a,dimSize:r,outputShape:i}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sr(t,e,n=0){const r=Object(x["a"])(t,"x","gather"),i=Object(x["a"])(e,"indices","gather","int32"),o={x:r,indices:i},a={axis:n},s=(t,e)=>{const o=Object(D["parseAxisParam"])(n,r.shape)[0],a=Or(r,i,o),s=t.gather(r,W(i,[i.size]),o);return e([r,i]),W(s,a.outputShape)};return m["a"].runKernelFunc(s,o,null,b["jb"],a)}const Cr=Object(w["a"])({gather_:Sr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kr(t,e){let n=Object(x["a"])(t,"a","greater"),r=Object(x["a"])(e,"b","greater");[n,r]=Object(T["makeTypesMatch"])(n,r),Wn(n.shape,r.shape);const i=t=>t.greater(n,r),o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["kb"])}const Ar=Object(w["a"])({greater_:kr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tr(t,e){let n=Object(x["a"])(t,"a","greaterEqual"),r=Object(x["a"])(e,"b","greaterEqual");[n,r]=Object(T["makeTypesMatch"])(n,r),Wn(n.shape,r.shape);const i=(t,e)=>{const i=t.greaterEqual(n,r);return e([n,r]),i},o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["lb"])}const Er=Object(w["a"])({greaterEqual_:Tr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jr(t){Object(D["assert"])("complex64"===t.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return m["a"].runKernelFunc(e=>{const n=t.shape[t.shape.length-1],r=t.size/n,i=W(t,[r,n]),o=e.ifft(i);return W(o,t.shape)},e,null,b["mb"])}const Dr=Object(w["a"])({ifft_:jr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mr(t){const e=Object(x["a"])(t,"input","imag"),n=t=>t.imag(e),r={input:e};return m["a"].runKernelFunc(n,r,null,b["ob"])}const Nr=Object(w["a"])({imag_:Mr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ir(t){const e=Object(x["a"])(t,"input","real"),n=t=>t.real(e),r={input:e};return m["a"].runKernelFunc(n,r,null,b["cc"])}const Rr=Object(w["a"])({real_:Ir});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fr(t,e){const n=Object(x["a"])(t,"x","reverse"),r=t=>{const r=Object(D["parseAxisParam"])(e,n.shape);if(0===n.rank)return He(n);const i=t.reverse(n,r);return W(i,n.shape)},i={x:n},o={dims:e};return m["a"].runKernelFunc(r,i,null,b["lc"],o)}const Pr=Object(w["a"])({reverse_:Fr});var $r=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lr(t,e){if((Object(D["isTypedArray"])(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&Object(D["isTypedArray"])(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");const n=[],r=[];return Object($r["a"])(t,n,r,e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zr(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=W(t,[n,e]);r=Dr(i)}else{const i=[n,2*(e-1)],o=W(Rr(t),[n,e]),a=W(Nr(t),[n,e]),s=Pr(Ae(o,[0,1],[n,e-2]),1),u=ce(Pr(Ae(a,[0,1],[n,e-2]),1),Lr(-1)),c=oe([o,s],1),l=oe([a,u],1),h=W(Object(Qe["a"])(c,l),[i[0],i[1]]);r=Dr(h)}if(r=Rr(r),3===t.rank&&0!==t.shape[0]){const e=r,n=t.shape[0];r=W(r,[n,r.shape[0]/n,r.shape[1]]),e.dispose()}return r}const Br=Object(w["a"])({irfft_:zr});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ur(t){const e=Object(x["a"])(t,"x","isFinite"),n={x:e};return m["a"].runKernelFunc(t=>t.isFinite(e),n,null,b["pb"])}const Wr=Object(w["a"])({isFinite_:Ur});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vr(t){const e=Object(x["a"])(t,"x","isInf"),n={x:e};return m["a"].runKernelFunc(t=>t.isInf(e),n,null,b["qb"])}const Hr=Object(w["a"])({isInf_:Vr});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr(t){const e=Object(x["a"])(t,"x","isNaN"),n={x:e};return m["a"].runKernelFunc(t=>t.isNaN(e),n,null,b["rb"])}const Gr=Object(w["a"])({isNaN_:qr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xr(t,e){let n=Object(x["a"])(t,"a","maximum"),r=Object(x["a"])(e,"b","maximum");[n,r]=Object(T["makeTypesMatch"])(n,r),"bool"===n.dtype&&(n=ht(n,"int32"),r=ht(r,"int32")),Wn(n.shape,r.shape);const i=(t,e)=>{const i=t.maximum(n,r);return e([n,r]),i},o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["Jb"])}const Yr=Object(w["a"])({maximum_:Xr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kr(t,e=.2){const n=Object(x["a"])(t,"x","leakyRelu");return Yr(ce(Lr(e),n),n)}const Zr=Object(w["a"])({leakyRelu_:Kr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jr(t,e){let n=Object(x["a"])(t,"a","less"),r=Object(x["a"])(e,"b","less");[n,r]=Object(T["makeTypesMatch"])(n,r),Wn(n.shape,r.shape);const i=t=>t.less(n,r),o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["ub"])}const Qr=Object(w["a"])({less_:Jr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ti(t,e){let n=Object(x["a"])(t,"a","lessEqual"),r=Object(x["a"])(e,"b","lessEqual");[n,r]=Object(T["makeTypesMatch"])(n,r),Wn(n.shape,r.shape);const i=(t,e)=>{const i=t.lessEqual(n,r);return e([n,r]),i},o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["vb"])}const ei=Object(w["a"])({lessEqual_:ti});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ni(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return m["a"].runKernelFunc(r=>r.linspace(t,e,n),{},null,b["wb"],r)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ri(t,e=5,n=1,r=1,i=.5){const o=Object(x["a"])(t,"x","localResponseNormalization");D["assert"](4===o.rank||3===o.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${o.rank}.`),D["assert"](D["isInt"](e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=o,s=!1;3===o.rank&&(s=!0,a=W(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const u=(t,o)=>{const s=t.localResponseNormalization4D(a,e,n,r,i);return o([a,s]),s},c={x:a},l={depthRadius:e,bias:n,alpha:r,beta:i},h=m["a"].runKernelFunc(u,c,null,b["sb"],l);return s?W(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const ii=Object(w["a"])({localResponseNormalization_:ri});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oi(t){const e=Object(x["a"])(t,"x","log"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.log(e);return n([e]),r},n,null,b["xb"])}const ai=Object(w["a"])({log_:oi});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function si(t){const e=Object(x["a"])(t,"x","log1p"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.log1p(e);return n([e]),r},n,null,b["yb"])}const ui=Object(w["a"])({log1p_:si});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ci(t){return D["assert"](D["isFunction"](t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=Object(x["a"])(e,"x","tf.grad",null),i=null!=n?Object(x["a"])(n,"dy","tf.grad"):null;return m["a"].tidy(()=>{const{value:e,grads:n}=m["a"].gradients(()=>t(r),[r],i);return null!=i&&D["assertShapesMatch"](e.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),gi(n),n[0]})}}function li(t){return D["assert"](D["isFunction"](t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{D["assert"](Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=Object(x["b"])(e,"args","tf.grads",null),i=null!=n?Object(x["a"])(n,"dy","tf.grads"):null;return m["a"].tidy(()=>{const{value:e,grads:n}=m["a"].gradients(()=>t(...r),r,i);return null!=i&&D["assertShapesMatch"](e.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),gi(n),n})}}function hi(t){return D["assert"](D["isFunction"](t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{D["assert"](e instanceof Dt["a"],()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),D["assert"](null==n||n instanceof Dt["a"],()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=m["a"].gradients(()=>t(e),[e],n);return gi(r),{grad:r[0],value:i}}}function fi(t){return D["assert"](D["isFunction"](t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{D["assert"](Array.isArray(e)&&e.every(t=>t instanceof Dt["a"]),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),D["assert"](null==n||n instanceof Dt["a"],()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=m["a"].gradients(()=>t(...e),e,n);return null!=n&&D["assertShapesMatch"](r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),gi(r.grads),r}}function di(t,e){D["assert"](D["isFunction"](t),()=>"The f passed in variableGrads(f) must be a function"),D["assert"](null==e||Array.isArray(e)&&e.every(t=>t instanceof Dt["c"]),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=e;if(!n){e=[];for(const t in m["a"].registeredVariables)e.push(m["a"].registeredVariables[t])}const r=n?e.filter(t=>!t.trainable):null,i=e.length;e=e.filter(t=>t.trainable),D["assert"](e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const o=!0,{value:a,grads:s}=m["a"].gradients(t,e,null,o);D["assert"](s.some(t=>null!=t),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),D["assert"](0===a.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const u={};return e.forEach((t,e)=>{null!=s[e]&&(u[t.name]=s[e])}),null!=r&&r.forEach(t=>u[t.name]=null),{value:a,grads:u}}function pi(t){return m["a"].customGrad(t)}function gi(t){const e=t.filter(t=>null==t).length;if(e>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mi(t){const e=Object(x["a"])(t,"x","neg"),n={x:e};return m["a"].runKernelFunc(t=>t.neg(e),n,null,b["Pb"])}const vi=Object(w["a"])({neg_:mi});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yi(t){const e=Object(x["a"])(t,"x","softplus"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.softplus(e);return n([e]),r},n,null,b["yc"])}const bi=Object(w["a"])({softplus_:yi});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xi(t){const e=Object(x["a"])(t,"x","logSigmoid"),n=pi(t=>{const e=vi(bi(vi(t))),n=e=>{const n=ce(e,he(vi(t)));return n};return{value:e,gradFunc:n}});return n(e)}const wi=Object(w["a"])({logSigmoid_:xi});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _i(t,e=null,n=!1){const r=Object(x["a"])(t,"x","max"),i=(t,i)=>{const o=D["parseAxisParam"](e,r.shape);let a=o;const s=L(a,r.rank);let u=r;null!=s&&(u=H(r,s),a=B(a.length,u.rank));const c=t.max(u,a);null!=s&&u.dispose();let l=c;if(n){const t=P(l.shape,D["parseAxisParam"](e,r.shape));l=W(l,t),c.dispose()}return i([r,l]),l},o={x:r},a={reductionIndices:e,keepDims:n};return m["a"].runKernelFunc(i,o,null,b["Db"],a)}const Oi=Object(w["a"])({max_:_i});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Si(t,e){let n=Object(x["a"])(t,"a","sub"),r=Object(x["a"])(e,"b","sub");[n,r]=Object(T["makeTypesMatch"])(n,r);const i=(t,e)=>{const i=t.subtract(n,r);return e([n,r]),i},o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["Hc"])}const Ci=Object(w["a"])({sub_:Si});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ki(t,e=null,n=!1){let r=Object(x["a"])(t,"x","sum");"bool"===r.dtype&&(r=ht(r,"int32"));const i=(t,i)=>{i([r]);const o=Object(D["parseAxisParam"])(e,r.shape),a=L(o,r.rank);let s=o,u=r;null!=a&&(u=H(r,a),s=B(s.length,r.rank));let c=t.sum(u,s);if(n){const t=P(c.shape,o);c=W(c,t)}return c},o={x:r},a={axis:e,keepDims:n};return m["a"].runKernelFunc(i,o,null,b["Ic"],a)}const Ai=Object(w["a"])({sum_:ki});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ti(t,e=-1){const n=Object(x["a"])(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);const r=(n,r)=>{const i=!0,o=Oi(t,e,!0),a=Ci(t,o),s=Ci(ht(a,"float32"),ai(Ai(or(a),e,i)));return r([s]),s},i={logits:n},o={axis:e};return m["a"].runKernelFunc(r,i,null,b["zb"],o)}const Ei=Object(w["a"])({logSoftmax_:Ti});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ji(t,e=null,n=!1){const r=Object(x["a"])(t,"x","logSumExp"),i=Object(D["parseAxisParam"])(e,r.shape),o=Oi(r,i,!0),a=Ci(r,o),s=or(a),u=Ai(s,i),c=ai(u),l=j(W(o,c.shape),c);if(n){const t=P(l.shape,i);return W(l,t)}return l}const Di=Object(w["a"])({logSumExp_:ji});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mi(t,e){const n=Object(x["a"])(t,"a","logicalAnd","bool"),r=Object(x["a"])(e,"b","logicalAnd","bool");Wn(n.shape,r.shape);const i={a:n,b:r};return m["a"].runKernelFunc(t=>t.logicalAnd(n,r),i,null,b["Ab"])}const Ni=Object(w["a"])({logicalAnd_:Mi});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ii(t){const e=Object(x["a"])(t,"x","logicalNot","bool"),n={x:e};return m["a"].runKernelFunc(t=>t.logicalNot(e),n,null,b["Bb"])}const Ri=Object(w["a"])({logicalNot_:Ii});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fi(t,e){const n=Object(x["a"])(t,"a","logicalOr","bool"),r=Object(x["a"])(e,"b","logicalOr","bool");Wn(n.shape,r.shape);const i={a:n,b:r};return m["a"].runKernelFunc(t=>t.logicalOr(n,r),i,null,b["Cb"])}const Pi=Object(w["a"])({logicalOr_:Fi});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $i(t,e){const n=Object(x["a"])(t,"a","logicalXor","bool"),r=Object(x["a"])(e,"b","logicalXor","bool");return Wn(n.shape,r.shape),Ni(Pi(t,e),Ri(Ni(t,e)))}const Li=Object(w["a"])({logicalXor_:$i});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zi(t,e,n,r,i){const o=Object(x["a"])(t,"x","maxPool"),a=1;let s=o,u=!1;3===o.rank&&(u=!0,s=W(o,[1,o.shape[0],o.shape[1],o.shape[2]])),D["assert"](4===s.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),D["assert"](At(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),null!=i&&D["assert"](D["isInt"](r),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const c=(t,o)=>{const a=dt(s.shape,e,n,1,r,i);let u;return u=1===a.filterWidth&&1===a.filterHeight&&D["arraysEqual"](a.inShape,a.outShape)?s.clone():t.maxPool(s,a),o([s,u]),u},l={x:s},h={filterSize:e,strides:n,pad:r,dimRoundingMode:i},f=m["a"].runKernelFunc(c,l,null,b["Eb"],h);return u?W(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Bi=Object(w["a"])({maxPool_:zi});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ui(t,e=[1,1,1],n,r,i,o="NDHWC",a){null==a?a=[1,1,1]:Rt("dilations is deprecated, this field will be gone in v3.0.0.");const s=Object(x["a"])(t,"x","maxPool3d");let u=s,c=!1;4===s.rank&&(c=!0,u=W(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),D["assert"](5===u.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${u.rank}.`),D["assert"]("NDHWC"===o,()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o),D["assert"](At(n,a),()=>`Error in maxPool3d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),null!=i&&D["assert"](D["isInt"](r),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${i} but got pad ${r}.`);const l=(t,s)=>{null==a&&(a=[1,1,1]);const c=pt(u.shape,e,n,a,r,i,o),l=t.maxPool3d(u,c);return s([u,l]),l},h={x:u},f={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:o,dilations:a},d=m["a"].runKernelFunc(l,h,null,b["Fb"],f);return c?W(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const Wi=Object(w["a"])({maxPool3d_:Ui});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vi(t,e,n,r,i=!1){const o=Object(x["a"])(t,"x","maxPoolWithArgmax"),a={x:o},s={filterSize:e,strides:n,pad:r,includeBatchInIndex:i},u=m["a"].runKernel(b["Ib"],a,s);return{result:u[0],indexes:u[1]}}const Hi=Object(w["a"])({maxPoolWithArgmax_:Vi});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qi(t,e="float32"){if("complex64"===e){const e=qi(t,"float32"),n=qi(t,"float32");return Object(Qe["a"])(e,n)}const n=Object(D["makeZerosTypedArray"])(Object(D["sizeFromShape"])(t),e);return m["a"].makeTensor(n,t,e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gi(t,e="float32"){if("complex64"===e){const e=Gi(t,"float32"),n=qi(t,"float32");return Object(Qe["a"])(e,n)}const n=Object(D["makeOnesTypedArray"])(Object(D["sizeFromShape"])(t),e);return m["a"].makeTensor(n,t,e)}
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xi(t,e=null,n=!1){const r=Object(x["a"])(t,"x","mean"),i=Object(D["parseAxisParam"])(e,r.shape),o=F(r.shape,i),a=o[1],s=Object(D["sizeFromShape"])(a),u=pi(t=>{const r=Lr(s),o=r.dtype===t.dtype?t:ht(t,r.dtype),a=zn(o,r),u=Ai(a,e,n),c=e=>{const n=t.shape.slice();i.forEach(t=>{n[t]=1});const r=W(e,n),o=zn(ce(r,Gi(t.shape,"float32")),s);return o};return{value:u,gradFunc:c}});return u(r)}const Yi=Object(w["a"])({mean_:Xi});function Ki(t,e=null,n=!1){const r=Object(x["a"])(t,"x","min"),i=(t,i)=>{const o=Object(D["parseAxisParam"])(e,r.shape);let a=o;const s=L(a,r.rank);let u=r;null!=s&&(u=H(r,s),a=B(a.length,r.rank));const c=t.min(u,a);null!=s&&u.dispose();let l=c;if(n){const t=P(l.shape,o);l=W(c,t),c.dispose()}return i([r,l]),l},o={x:r},a={axis:e,keepDims:n};return m["a"].runKernelFunc(i,o,null,b["Lb"],a)}const Zi=Object(w["a"])({min_:Ki});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ji(t,e){let n=Object(x["a"])(t,"a","minimum"),r=Object(x["a"])(e,"b","minimum");[n,r]=Object(T["makeTypesMatch"])(n,r),"bool"===n.dtype&&(n=ht(n,"int32"),r=ht(r,"int32")),Wn(n.shape,r.shape);const i=(t,e)=>{const i=t.minimum(n,r);return e([n,r]),i},o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["Mb"])}const Qi=Object(w["a"])({minimum_:Ji});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function to(t,e){let n=Object(x["a"])(t,"a","mod"),r=Object(x["a"])(e,"b","mod");[n,r]=Object(T["makeTypesMatch"])(n,r);const i=(t,e)=>{const i=t.mod(n,r);return e([n,r]),i},o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["Nb"])}const eo=Object(w["a"])({mod_:to});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function no(t){const e=Object(x["a"])(t,"x","square"),n={},r=[e],i=[];return m["a"].runKernelFunc((t,n)=>(n([e]),t.square(e)),{x:e},null,"Square",n,r,i)}const ro=Object(w["a"])({square_:no});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function io(t,e=null,n=!1){t=Object(x["a"])(t,"x","moments");const r=Object(D["parseAxisParam"])(e,t.shape),i=Yi(t,r,n);let o=i.shape;n||(o=P(i.shape,r));const a=ro(Ci(ht(t,"float32"),W(i,o))),s=Yi(a,r,n);return{mean:i,variance:s}}const oo=Object(w["a"])({moments_:io});function ao(t,e,n,r){const i=Object(x["a"])(e,"data","multiRNNCell"),o=Object(x["b"])(n,"c","multiRNNCell"),a=Object(x["b"])(r,"h","multiRNNCell");let s=i;const u=[];for(let h=0;h<t.length;h++){const e=t[h](s,o[h],a[h]);u.push(e[0]),u.push(e[1]),s=e[1]}const c=[],l=[];for(let h=0;h<u.length;h+=2)c.push(u[h]),l.push(u[h+1]);return[c,l]}const so=Object(w["a"])({multiRNNCell_:ao});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(t,e,n,r=!1){const i=Object(x["a"])(t,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();const s=1===a?W(i,[1,-1]):i,u=m["a"].runKernelFunc(t=>t.multinomial(s,r,e,n),{logits2D:s});return 1===a?W(u,[u.size]):u}const co=Object(w["a"])({multinomial_:uo});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lo(t,e){let n=Object(x["a"])(t,"a","notEqual"),r=Object(x["a"])(e,"b","notEqual");[n,r]=Object(T["makeTypesMatch"])(n,r),Wn(n.shape,r.shape);const i=t=>t.notEqual(n,r),o={a:n,b:r};return m["a"].runKernelFunc(i,o,null,b["Tb"])}const ho=Object(w["a"])({notEqual_:lo});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fo(t,e,n=1,r=0){if(e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);const i=Object(x["a"])(t,"indices","oneHot","int32"),o=[...i.shape,e],a=(t,a)=>(a([i]),W(t.oneHot(W(i,[i.size]),e,n,r),o)),s={indices:i},u={depth:e,onValue:n,offValue:r};return m["a"].runKernelFunc(a,s,null,b["Ub"],u)}const po=Object(w["a"])({oneHot_:fo});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function go(t){const e=Object(x["a"])(t,"x","onesLike"),n=(t,n)=>{if("complex64"===e.dtype){const t=mo(Rr(e)),n=Yn(Nr(e));return Object(Qe["a"])(t,n)}return t.onesLike(e)},r={x:e};return m["a"].runKernelFunc(n,r,null,b["Vb"])}const mo=Object(w["a"])({onesLike_:go});function vo(t,e){const n=Object(x["a"])(t,"v1","outerProduct"),r=Object(x["a"])(e,"v2","outerProduct");D["assert"](1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const i=W(n,[-1,1]),o=W(r,[1,-1]);return se(i,o)}const yo=Object(w["a"])({outerProduct_:vo});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bo(t,e,n=0){const r=Object(x["a"])(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i=(t,i)=>(i([r]),t.pad(r,e,n)),o={paddings:e,constantValue:n},a={x:r};return m["a"].runKernelFunc(i,a,null,b["Wb"],o)}const xo=Object(w["a"])({pad_:bo});function wo(t,e,n=0){return Object(D["assert"])(2===e.length,()=>"Invalid number of paddings. Must be length of 2."),xo(t,[e],n)}const _o=Object(w["a"])({pad1d_:wo});function Oo(t,e,n=0){return Object(D["assert"])(2===e.length&&2===e[0].length&&2===e[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),xo(t,e,n)}const So=Object(w["a"])({pad2d_:Oo});function Co(t,e,n=0){return Object(D["assert"])(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),xo(t,e,n)}const ko=Object(w["a"])({pad3d_:Co});function Ao(t,e,n=0){return Object(D["assert"])(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),xo(t,e,n)}const To=Object(w["a"])({pad4d_:Ao});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eo(t,e,n){const r=Object(x["a"])(t,"x","spaceToBatchND");D["assert"](r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),D["assert"](n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),D["assert"](r.shape.reduce((t,r,i)=>i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]===0:t,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i=t=>t.spaceToBatchND(r,e,n),o={x:r},a={blockShape:e,paddings:n};return m["a"].runKernelFunc(i,o,null,b["zc"],a)}const jo=Object(w["a"])({spaceToBatchND_:Eo});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Do(t,e,n,r,i,o){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");const a=Object(x["a"])(t,"x","maxPool");let s=a,u=!1;3===a.rank&&(u=!0,s=W(a,[1,a.shape[0],a.shape[1],a.shape[2]])),D["assert"](At(o,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${i}'`);const c=dt(s.shape,e,o,i,r),l=[c.dilationHeight,c.dilationWidth];let h;h="same"===r?No([c.filterHeight,c.filterWidth],l):[[0,0],[0,0]];const f=1===l[0]&&1===l[1],[d,p]=Mo([c.inHeight,c.inWidth],l,h),g=f?r:"valid",m=f?s:jo(s,l,d),v="avg"===n?()=>jt(m,e,o,g):()=>Bi(m,e,o,g),y=v(),b=f?y:Ne(y,l,p);return u?W(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function Mo(t,e,n){const r=n.map(t=>t[0]),i=n.map(t=>t[1]),o=t.concat(r,i),a=e.map((t,e)=>(t-o[e]%t)%t),s=i.map((t,e)=>t+a[e]),u=e.map((t,e)=>[r[e],s[e]]),c=e.map((t,e)=>[0,a[e]]);return[u,c]}function No(t,e){const n=t.map((t,n)=>t+(t-1)*(e[n]-1)),r=n.map(t=>t-1),i=r.map(t=>Math.floor(t/2)),o=r.map((t,e)=>t-i[e]);return r.map((t,e)=>[i[e],o[e]])}const Io=Object(w["a"])({pool_:Do});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ro(t,e){let n=Object(x["a"])(t,"base","pow"),r=Object(x["a"])(e,"exp","pow");[n,r]=Object(T["makeTypesMatch"])(n,r);const i={a:n,b:r},o=(t,e)=>{const i=t.pow(n,r);return e([n,r,i]),i};return m["a"].runKernelFunc(o,i,null,b["Yb"])}const Fo=Object(w["a"])({pow_:Ro});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Po(t,e){const n=Object(x["a"])(t,"x","prelu"),r=Object(x["a"])(e,"alpha","prelu"),i=(t,e)=>{const i=t.prelu(n,r);return e([n,r]),i},o={x:n,alpha:r};return m["a"].runKernelFunc(i,o,null,b["Zb"])}const $o=Object(w["a"])({prelu_:Po});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lo(t,e=!1){console.log(t.toString(e))}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zo(t,e=null,n=!1){let r=Object(x["a"])(t,"x","prod");const i=t=>{"bool"===r.dtype&&(r=ht(r,"int32"));const i=Object(D["parseAxisParam"])(e,r.shape),o=L(i,r.rank);let a=i,s=r;null!=o&&(s=H(r,o),a=B(a.length,r.rank));let u=t.prod(s,a);if(n){const t=P(u.shape,i);u=W(u,t)}return u},o={x:r},a={axis:e,keepDims:n};return m["a"].runKernelFunc(i,o,null,b["ac"],a)}const Bo=Object(w["a"])({prod_:zo});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uo(t,e,n){const r=Object(D["sizeFromShape"])(t);let i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(let o=0;o<r;o++)i[o]=e();return m["a"].makeTensor(i,t,n)}const Wo=Object(w["a"])({rand_:Uo});var Vo=n("6125");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ho=.001,qo=.1;function Go(t,e,n){return null==n&&(n=Xo()),Yo(t,e,(t,e)=>Qo(t,e,n))}function Xo(){return 32===m["a"].backend.floatPrecision()?Ho:qo}function Yo(t,e,n){let r=!0;if((Object(D["isTypedArray"])(t)||Object(D["isTypedArray"])(e))&&(r=!1),Object(D["isTypedArray"])(t)&&Object(D["isTypedArray"])(e)&&(r=!0),r){const n=t.constructor.name,r=e.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: `+r)}if(Array.isArray(t)&&Array.isArray(e)){const n=Object(x["c"])(t),r=Object(x["c"])(e);if(!Object(D["arraysEqual"])(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}const i=Object(D["isTypedArray"])(t)?t:Object(D["flatten"])(t),o=Object(D["isTypedArray"])(e)?e:Object(D["flatten"])(e);if(i.length!==o.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${o.length}.\nActual:   ${i}.\nExpected: ${o}.`);for(let a=0;a<o.length;++a){const t=i[a],e=o[a];if(!n(t,e))throw new Error(`Arrays differ: actual[${a}] = ${t}, expected[${a}] = ${e}.\nActual:   ${i}.\nExpected: ${o}.`)}}function Ko(t,e){t().then(()=>e.fail(),()=>e())}function Zo(t,e){const n="string"===typeof e||"number"===typeof e||"boolean"===typeof e?[e]:e;return Object(D["isString"])(t)||Object(D["isString"])(t[0])||Object(D["isString"])(e)||Object(D["isString"])(e[0])?Yo(t,n,(t,e)=>t==e):Yo(t,e,(t,e)=>Qo(t,e,0))}function Jo(t,e,n){if(null==n&&(n=Xo()),!Qo(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`)}function Qo(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function ta(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function ea(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class na{constructor(t,e,n,r,i){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=i||Math.random();this.random=Vo["alea"](o.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;while(!n){let r,i,o;do{r=2*this.random()-1,i=2*this.random()-1,o=r*r+i*i}while(o>=1||0===o);const a=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*r*a,e=this.mean+this.stdDev*i*a,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class ra{constructor(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;const i=r||Math.random();this.randu=Vo["alea"](i.toString()),this.randn=new na(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,i,o;while(1){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,t=r*r,e=1-.331*t*t,n=.5*t+this.d*(1-o+Math.log(o)),i=this.randu(),i<e||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}class ia{constructor(t=0,e=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${e} <= 1 and dtype is not float`);this.random=Vo["alea"](r)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function oa(t,e,n=1,r="float32",i){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);const o=new ra(e,n,r,i),a=Xe(t,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const aa=Object(w["a"])({randomGamma_:oa});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sa(t,e=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);const o=new na(e,n,r,!1,i),a=Xe(t,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const ua=Object(w["a"])({randomNormal_:sa});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ca(t,e=0,n=1,r="float32",i){const o=Xe(t,r),a=new ia(e,n,null,i);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const la=Object(w["a"])({randomUniform_:ca});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ha(t,e){Object(D["assertNonNull"])(t);const n=Object(x["c"])(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");const r=null;return Object($r["a"])(t,r,n,e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fa(t,e,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");const i=()=>{const i=t===e,o=t<e&&n<0,a=e<t&&n>1;if(i||o||a)return qi([0],r);const s=Math.abs(Math.ceil((e-t)/n)),u=Object(D["makeZerosTypedArray"])(s,r);e<t&&1===n&&(n=-1),u[0]=t;for(let t=1;t<u.length;t++)u[t]=u[t-1]+n;return ha(u,r)},o={start:t,stop:e,step:n,dtype:r};return m["a"].runKernelFunc(i,{},null,b["bc"],o)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function da(t){const e=Object(x["a"])(t,"x","reciprocal"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.reciprocal(e);return n([e]),r},n,null,b["dc"])}const pa=Object(w["a"])({reciprocal_:da});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ga(t){const e=Object(x["a"])(t,"x","relu"),n=(t,n)=>(n([e]),"bool"===e.dtype?ht(e,"int32"):t.relu(e)),r={x:e};return m["a"].runKernelFunc(n,r,null,b["ec"])}const ma=Object(w["a"])({relu_:ga});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function va(t){const e=Object(x["a"])(t,"x","relu6"),n=(t,n)=>(n([e]),"bool"===e.dtype?ht(e,"int32"):t.relu6(e)),r={x:e};return m["a"].runKernelFunc(n,r,null,b["fc"])}const ya=Object(w["a"])({relu6_:va});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ba(t){const e=Object(x["a"])(t,"x","reverse");return D["assert"](1===e.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Pr(e,0)}const xa=Object(w["a"])({reverse1d_:ba});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wa(t,e){const n=Object(x["a"])(t,"x","reverse");return D["assert"](2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Pr(n,e)}const _a=Object(w["a"])({reverse2d_:wa});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oa(t,e){const n=Object(x["a"])(t,"x","reverse");return D["assert"](3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Pr(n,e)}const Sa=Object(w["a"])({reverse3d_:Oa});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ca(t,e){const n=Object(x["a"])(t,"x","reverse");return D["assert"](4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Pr(n,e)}const ka=Object(w["a"])({reverse4d_:Ca});function Aa(t,e,n=0){let r=[];if("number"===typeof e)Object(D["assert"])(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((t,e)=>(-1===e&&(t+=1),t),0);Object(D["assert"])(i<=1,()=>"There should be only one negative value in split array.");const o=e.indexOf(-1);if(-1!==o){const r=e.reduce((t,e)=>e>0?t+e:t);e[o]=t.shape[n]-r}Object(D["assert"])(t.shape[n]===e.reduce((t,e)=>t+e),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ta(t,e,n=0){const r=Object(x["a"])(t,"x","split"),i=(t,i)=>{const o=Object(D["parseAxisParam"])(n,r.shape)[0],a=Aa(r,e,o);return t.split(r,a,o)},o={x:r},a={numOrSizeSplits:e,axis:n};return m["a"].runKernelFunc(i,o,null,b["Bc"],a)}const Ea=Object(w["a"])({split_:Ta});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ja(t,e){Object(D["assert"])("float32"===t.dtype,()=>"The dtype for rfft() must be real value but got "+t.dtype);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(null!=e&&e<n){const r=t.shape.map(t=>0),o=t.shape.map(t=>t);o[t.shape.length-1]=e,i=Ae(t,r,o),n=e}else if(null!=e&&e>n){const r=t.shape.map(t=>t);r[t.shape.length-1]=e-n,i=oe([t,qi(r)],t.shape.length-1),n=e}else i=t;const o=Yn(i),a=W(Object(Qe["a"])(i,o),[r,n]),s=gr(a),u=Math.floor(n/2)+1,c=Rr(s),l=Nr(s),h=Ea(c,[u,n-u],c.shape.length-1),f=Ea(l,[u,n-u],l.shape.length-1),d=i.shape.slice();return d[i.shape.length-1]=u,W(Object(Qe["a"])(h[0],f[0]),d)}const Da=Object(w["a"])({rfft_:ja});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ma(t){const e=Object(x["a"])(t,"x","round"),n={x:e};return m["a"].runKernelFunc(t=>t.round(e),n,null,b["nc"])}const Na=Object(w["a"])({round_:Ma});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ia(t){const e=Object(x["a"])(t,"x","rsqrt"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.rsqrt(e);return n([e]),r},n,null,b["oc"])}const Ra=Object(w["a"])({rsqrt_:Ia});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fa(t){const e=Object(x["a"])(t,"x","selu"),n=(t,n)=>{const r=t.selu(e);return n([e]),r},r={x:e};return m["a"].runKernelFunc(n,r,null,b["rc"])}const Pa=Object(w["a"])({selu_:Fa});function $a(t,e,n,r,i,o=[1,1],a="NHWC"){const s=Object(x["a"])(t,"x","separableConv2d"),u=Object(x["a"])(e,"depthwiseFilter","separableConv2d"),c=Object(x["a"])(n,"pointwiseFilter","separableConv2d");let l=s,h=!1;if(3===s.rank&&(h=!0,l=W(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");D["assert"](4===l.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${l.rank}.`),D["assert"](4===u.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),D["assert"](4===c.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),D["assert"](1===c.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),D["assert"](1===c.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=u.shape[2],d=u.shape[3];D["assert"](c.shape[2]===f*d,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*d}, but got ${c.shape[2]}.`);const p=Mn(l,u,r,i,a,o),g=1,m=ln(p,c,g,"valid",a);return h?W(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const La=Object(w["a"])({separableConv2d_:$a});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function za(t,e){const n=Object(x["a"])(t,"x","setdiff1d"),r=Object(x["a"])(e,"y","setdiff1d");D["assert"](n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),D["assert"](1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),D["assert"](1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await n.data(),o=await r.data(),a=new Set(o);let s=0;for(let l=0;l<i.length;l++)a.has(i[l])||s++;const u=new Dt["b"]([s],n.dtype),c=new Dt["b"]([s],"int32");for(let l=0,h=0;l<i.length;l++)a.has(i[l])||(u.values[h]=i[l],c.values[h]=l,h++);return[u.toTensor(),c.toTensor()]}const Ba=za;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ua(t){const e=Object(x["a"])(t,"x","sign"),n={x:e};return m["a"].runKernelFunc(t=>t.sign(e),n,null,b["tc"])}const Wa=Object(w["a"])({sign_:Ua});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Va(t){const e=Object(x["a"])(t,"x","sin"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.sin(e);return n([e]),r},n,null,b["uc"])}const Ha=Object(w["a"])({sin_:Va});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qa(t){const e=Object(x["a"])(t,"x","sinh"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.sinh(e);return n([e]),r},n,null,b["vc"])}const Ga=Object(w["a"])({sinh_:qa});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xa(t,e,n){const r=Object(x["a"])(t,"x","slice1d");return D["assert"](1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Ae(r,[e],[n])}const Ya=Object(w["a"])({slice1d_:Xa});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ka(t,e,n){const r=Object(x["a"])(t,"x","slice2d");return D["assert"](2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Ae(r,e,n)}const Za=Object(w["a"])({slice2d_:Ka});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ja(t,e,n){const r=Object(x["a"])(t,"x","slice3d");return D["assert"](3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Ae(r,e,n)}const Qa=Object(w["a"])({slice3d_:Ja});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ts(t,e,n){const r=Object(x["a"])(t,"x","slice4d");return D["assert"](4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Ae(r,e,n)}const es=Object(w["a"])({slice4d_:ts});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ns(t,e=-1){const n=Object(x["a"])(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return m["a"].runKernelFunc((t,r)=>{const i=t.softmax(n,e);return r([i]),i},r,null,b["xc"],i)}const rs=Object(w["a"])({softmax_:ns});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function is(t){const e=Object(x["a"])(t,"x","sqrt"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.sqrt(e);return n([e]),r},n,null,b["Cc"])}const os=Object(w["a"])({sqrt_:is});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function as(t,e){let n=Object(x["a"])(t,"a","squaredDifference"),r=Object(x["a"])(e,"b","squaredDifference");[n,r]=Object(T["makeTypesMatch"])(n,r),Wn(n.shape,r.shape);const i=(t,e)=>{const i=t.squaredDifference(n,r);return e([n,r]),i},o={a:n,b:r},a={};return m["a"].runKernelFunc(i,o,null,b["Ec"],a)}const ss=Object(w["a"])({squaredDifference_:as});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function us(t,e){const n=Object(x["a"])(t,"x","squeeze");return W(n,Object(D["squeezeShape"])(n.shape,e).newShape)}const cs=Object(w["a"])({squeeze_:us});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ls(t,e=0){const n=Object(x["b"])(t,"tensors","stack");if(D["assert"](n.length>=1,()=>"Pass at least one tensor to tf.stack"),1===n.length)return sr(n[0],e);const r=n[0].rank,i=n[0].shape,o=n[0].dtype;D["assert"](e<=r,()=>"Axis must be <= rank of the tensor"),n.forEach(t=>{D["assertShapesMatch"](i,t.shape,"All tensors passed to stack must have matching shapes"),D["assert"](o===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=n.map(t=>sr(t,e));return oe(a,e)}const hs=Object(w["a"])({stack_:ls});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fs(t,e=0){const n=Object(x["a"])(t,"x","step"),r={x:n},i={alpha:e};return m["a"].runKernelFunc(t=>t.step(n,e),r,null,b["Fc"],i)}const ds=Object(w["a"])({step_:fs});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ps(t,e,n,r,i=0,o=0,a=0,s=0,u=0){null==r&&(r=new Array(e.length));let c=Object(x["a"])(t,"x","stridedSlice");const l=t=>{const l=de(a);if(l.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==a&&0!==s)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==a&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const h=c.rank-e.length,f=de(s),d=c.shape.slice();if(f.forEach(t=>{e[t]=0,n[t]=1,d.splice(t,0,1)}),c=W(c,d),l.length&&h>0){const t=l[0],a=h+1;e=ye(i,t,a,e,c.shape),n=be(o,t,a,n,c.shape),r=ge(r,t,a,c.shape)}else for(let s=0;s<c.rank;s++)e[s]=we(i,e,r,c.shape,s,a),n[s]=_e(o,n,r,c.shape,s,a),r[s]=xe(r,s,a);const p=de(u);p.forEach(t=>{n[t]=e[t]+1,r[t]=1});const g=pe(e,n,r),m=g.filter((t,e)=>-1===p.indexOf(e)),v=r.every(t=>1===t);if(v)return W(Ae(c,e,g),m);const y=t.stridedSlice(c,e,n,r);return W(y,m)},h={x:c},f={begin:e,end:n,strides:r,beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:u};return m["a"].runKernelFunc(l,h,null,b["Gc"],f)}const gs=Object(w["a"])({stridedSlice_:ps});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ms(t){const e=Object(x["a"])(t,"x","tan"),n={x:e};return m["a"].runKernelFunc((t,n)=>{const r=t.tan(e);return n([e]),r},n,null,b["Jc"])}const vs=Object(w["a"])({tan_:ms});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ys(t,e,n){if(Object(D["assertNonNull"])(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Object(x["c"])(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Object($r["a"])(t,e,r,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bs(t,e,n){if(Object(D["assertNonNull"])(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");const r=Object(x["c"])(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Object($r["a"])(t,e,r,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xs(t,e,n){if(Object(D["assertNonNull"])(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");const r=Object(x["c"])(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Object($r["a"])(t,e,r,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ws(t,e,n){if(Object(D["assertNonNull"])(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");const r=Object(x["c"])(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Object($r["a"])(t,e,r,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _s(t,e,n){if(Object(D["assertNonNull"])(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");const r=Object(x["c"])(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Object($r["a"])(t,e,r,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Os(t,e=1,n=!0){const r=Object(x["a"])(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got `+e);const o={x:r},a={k:e,sorted:n},[s,u]=m["a"].runKernelFunc(t=>t.topk(r,e,n),o,null,b["Mc"],a);return{values:s,indices:u}}const Ss=Object(w["a"])({topk_:Os});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cs(t,e=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const o=new na(e,n,r,!0,i),a=Xe(t,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const ks=Object(w["a"])({truncatedNormal_:Cs});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function As(t,e,n){const r=Object(x["a"])(t,"x","unsortedSegmentSum"),i=Object(x["a"])(e,"segmentIds","unsortedSegmentSum","int32");Object(D["assert"])(Object(D["isInt"])(n),()=>"numSegments must be of dtype int");const o={x:r,segmentIds:i},a={numSegments:n},s=(t,e)=>{const o=t.unsortedSegmentSum(r,i,n);return e([i]),o};return m["a"].runKernelFunc(s,o,null,b["Pc"],a)}const Ts=Object(w["a"])({unsortedSegmentSum_:As});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Es(t,e=0){const n=Object(x["a"])(t,"x","unstack");D["assert"](e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`),e<0&&(e+=n.shape.length);const r={value:n},i={axis:e},o=t=>t.unstack(n,e);return m["a"].runKernelFunc(o,r,null,b["Oc"],i)}const js=Object(w["a"])({unstack_:Es});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ds(t,e=!0,n,r){return m["a"].makeVariable(t,e,n,r)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ms(t,e){const n=[];for(let o=0;o<e.length;o++)e[o]&&n.push(o);const r=Xe(t,"int32"),i=Xe([n.length,t.length],"int32");for(let o=0;o<n.length;o++){const e=r.indexToLoc(n[o]),a=o*t.length;i.values.set(e,a)}return i.toTensor()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ns(t){const e=Object(x["a"])(t,"condition","whereAsync","bool"),n=await e.data(),r=Ms(e.shape,n);return t!==e&&e.dispose(),r}const Is=Ns;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Rs(t,e,n){const r=Object(x["a"])(t,"tensor","boolMask"),i=Object(x["a"])(e,"mask","boolMask","bool"),o=null==n?0:n,a=i.rank,s=r.shape;D["assert"](a>0,()=>"mask cannot be scalar"),D["assertShapesMatch"](s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let g=o;g<o+a;g++)u*=s[g];const c=s.slice(0,o).concat([u],s.slice(o+a)),l=W(r,c),h=W(i,[-1]),f=await Is(h),d=cs(f,[1]),p=Cr(l,d,o);return t!==r&&r.dispose(),e!==i&&i.dispose(),d.dispose(),l.dispose(),h.dispose(),f.dispose(),p}const Fs=Rs;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ps(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","notEqualStrict"),r=Object(x["a"])(e,"b","notEqualStrict");return Object(D["assertShapesMatch"])(n.shape,r.shape,"Error in notEqualStrict: "),ho(n,r)}function $s(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","lessStrict"),r=Object(x["a"])(e,"b","lessStrict");return Object(D["assertShapesMatch"])(n.shape,r.shape,"Error in lessStrict: "),Qr(n,r)}function Ls(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","equalStrict"),r=Object(x["a"])(e,"b","equalStrict");return Object(D["assertShapesMatch"])(n.shape,r.shape,"Error in equalStrict: "),Hn(n,r)}function zs(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","lessEqualStrict"),r=Object(x["a"])(e,"b","lessEqualStrict");return Object(D["assertShapesMatch"])(n.shape,r.shape,"Error in lessEqualStrict: "),ei(n,r)}function Bs(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","greaterStrict"),r=Object(x["a"])(e,"b","greaterStrict");return Object(D["assertShapesMatch"])(n.shape,r.shape,"Error in greaterStrict: "),Ar(n,r)}function Us(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","greaterEqualStrict"),r=Object(x["a"])(e,"b","greaterEqualStrict");return Object(D["assertShapesMatch"])(n.shape,r.shape,"Error in greaterEqualStrict: "),Er(n,r)}const Ws=Object(w["a"])({equalStrict_:Ls}),Vs=Object(w["a"])({greaterEqualStrict_:Us}),Hs=Object(w["a"])({greaterStrict_:Bs}),qs=Object(w["a"])({lessEqualStrict_:zs}),Gs=Object(w["a"])({lessStrict_:$s}),Xs=Object(w["a"])({notEqualStrict_:Ps});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ys(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","addStrict"),r=Object(x["a"])(e,"b","addStrict");return D["assertShapesMatch"](n.shape,r.shape,"Error in addStrict: "),j(n,r)}function Ks(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","subStrict"),r=Object(x["a"])(e,"b","subStrict");return D["assertShapesMatch"](n.shape,r.shape,"Error in subStrict: "),Ci(n,r)}function Zs(t,e){return Rt("strict variants of ops have been deprecated and will be removed in future"),D["assertShapesMatch"](t.shape,e.shape,"Error in powStrict: "),Fo(t,e)}function Js(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","mul"),r=Object(x["a"])(e,"b","mul");return D["assertShapesMatch"](n.shape,r.shape,"Error in multiplyStrict: "),ce(n,r)}function Qs(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","div"),r=Object(x["a"])(e,"b","div");return D["assertShapesMatch"](n.shape,r.shape,"Error in divideStrict: "),zn(n,r)}function tu(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","modStrict"),r=Object(x["a"])(e,"b","modStrict");return D["assertShapesMatch"](n.shape,r.shape,"Error in modStrict: "),eo(n,r)}function eu(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","minimumStrict"),r=Object(x["a"])(e,"b","minimumStrict");return D["assertShapesMatch"](n.shape,r.shape,"Error in minimumStrict: "),Qi(n,r)}function nu(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","maximumStrict"),r=Object(x["a"])(e,"b","maximumStrict");return D["assertShapesMatch"](n.shape,r.shape,"Error in maximumStrict: "),Yr(n,r)}function ru(t,e){Rt("strict variants of ops have been deprecated and will be removed in future");const n=Object(x["a"])(t,"a","squaredDifferenceStrict"),r=Object(x["a"])(e,"b","squaredDifferenceStrict");return D["assertShapesMatch"](n.shape,r.shape,"Error in squaredDifferenceStrict: "),ss(n,r)}const iu=Object(w["a"])({addStrict_:Ys}),ou=Object(w["a"])({divStrict_:Qs}),au=Object(w["a"])({maximumStrict_:nu}),su=Object(w["a"])({minimumStrict_:eu}),uu=Object(w["a"])({modStrict_:tu}),cu=Object(w["a"])({mulStrict_:Js}),lu=Object(w["a"])({powStrict_:Zs}),hu=Object(w["a"])({squaredDifferenceStrict_:ru}),fu=Object(w["a"])({subStrict_:Ks});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function du(t,e="euclidean",n=null,r=!1){t=Object(x["a"])(t,"x","norm");const i=pu(t,e,n);let o=i.shape;if(r){const e=Object(D["parseAxisParam"])(n,t.shape);o=P(i.shape,e)}return W(i,o)}function pu(t,e,n=null){if(0===t.rank)return O(t);if(1!==t.rank&&null===n)return pu(W(t,[-1]),e,n);if(1===t.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===e)return Ai(O(t),n);if(e===1/0)return Oi(O(t),n);if(e===-1/0)return Zi(O(t),n);if("euclidean"===e||2===e)return os(Ai(Fo(O(t),Lr(2,"int32")),n));throw new Error("Error in norm: invalid ord value: "+e)}if(Array.isArray(n)&&2===n.length){if(1===e)return Oi(Ai(O(t),n[0]),n[1]-1);if(e===1/0)return Oi(Ai(O(t),n[1]),n[0]);if(e===-1/0)return Zi(Ai(O(t),n[1]),n[0]);if("fro"===e||"euclidean"===e)return os(Ai(ro(t),n));throw new Error("Error in norm: invalid ord value: "+e)}throw new Error("Error in norm: invalid axis: "+n)}const gu=Object(w["a"])({norm_:du});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mu(t,e,n,r,i=!0){const o=Object(x["a"])(t,"v","movingAverage"),a=Object(x["a"])(e,"x","movingAverage"),s=Object(x["a"])(n,"decay","movingAverage");Object(T["assertTypesMatch"])(o,a),D["assert"](D["arraysEqual"](o.shape,a.shape),()=>"Shape mismatch in v and x");const u=Lr(1),c=Ci(u,s);let l=ce(Ci(a,o),c);if(i){D["assert"](null!=r,()=>"When using zeroDebias: true, step is required.");const t=Object(x["a"])(r,"step","movingAverage");l=zn(l,Ci(u,Fo(s,t)))}return j(o,l)}const vu=Object(w["a"])({movingAverage_:mu});function yu(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+`, indices.shape: ${e.shape}, shape: ${t}`+`, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(o+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(o+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(o+" update.rank != "+(i+t.length-r));for(let a=0;a<i;++a)if(n.shape[a]!==e.shape[a])throw new Error(o+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+r])throw new Error(o+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${t[a+i]})`)}function bu(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}yu(n,e,t)}function xu(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,o=n.length;let a=1;for(let h=i;h<o;++h)a*=n[h];const s=i<1?1:i,u=Object(D["sizeFromShape"])(e.shape)/s,c=[...Object(D["computeStrides"])(n.slice(0,i)),1],l=Object(D["sizeFromShape"])(n);return{sliceRank:i,numUpdates:u,sliceSize:a,strides:c,outputSize:l}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wu(t,e,n){const r=Object(x["a"])(t,"indices","scatterND","int32"),i=Object(x["a"])(e,"updates","scatterND");bu(i,r,n);const o=t=>t.scatterND(r,i,n),a={indices:r,updates:i},s={shape:n};return m["a"].runKernelFunc(o,a,null,b["pc"],s)}const _u=Object(w["a"])({scatterND_:wu});function Ou(t,e,n,r){if("int32"!==t.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const i=t.rank>0?t.shape[0]:1,o=t.rank>1?t.shape[1]:1;if(n.length!==o)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${o}.`);const a=e.size;if(0!==e.rank&&(1!==e.rank||a!==i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Su(t,e,n,r=0){const i=Object(x["a"])(t,"sparseIndices","sparseToDense","int32"),o=Object(x["a"])(e,"sparseValues","sparseToDense"),a=Object(x["a"])(r,"defaultValue","sparseToDense",o.dtype);Ou(i,o,n,a);const s={sparseIndices:i,sparseValues:o,defaultValue:a},u={outputShape:n};return m["a"].runKernelFunc(t=>t.sparseToDense(i,o,n,a),s,null,b["Ac"],u)}const Cu=Object(w["a"])({sparseToDense_:Su});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ku(t,e){const n=Object(x["a"])(e,"indices","gatherND","int32"),r=Object(x["a"])(t,"x","gatherND"),i=t=>t.gatherND(r,n),o={params:r,indices:n};return m["a"].runKernelFunc(i,o,null,b["ib"])}const Au=Object(w["a"])({gatherND_:ku});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tu(t,e){if(null==e)return t.shape.slice();if(D["arraysEqual"](t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)null==e[r]&&null!=t.shape[r]?n.push(t.shape[r]):n.push(e[r]);return n}return e}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eu(t,e,n,r){const i=Object(x["a"])(t,"x","dropout");if(D["assert"]("float32"===i.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),D["assert"](e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),0===e)return t instanceof Dt["a"]?i.clone():i;const o=Tu(i,n),a=1-e,s=zn(yr(j(la(o,0,1,"float32",r),a)),a);return ce(i,s)}const ju=Object(w["a"])({dropout_:Eu});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Du(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function Mu(t,e,n){const r=1-t%2,i=new Float32Array(t);for(let o=0;o<t;++o){const a=2*Math.PI*o/(t+r-1);i[o]=e-n*Math.cos(a)}return ha(i,"float32")}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Nu(t,e,n=1){const r=Object(x["a"])(t,"predictions","inTopK"),i=Object(x["a"])(e,"targets","inTopK");Object(D["assert"])(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank),Object(D["assert"])(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Object(D["assertShapesMatch"])(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const o=r.shape[r.shape.length-1];Object(D["assert"])(n>0&&n<=o,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${o}), but got ${n}`);const a=await r.data(),s=await i.data(),[u,c]=[a.length/o,o],l=Object(D["getTypedArrayFromDType"])("bool",u);for(let h=0;h<u;h++){const t=h*c,e=a.subarray(t,t+c),r=[];for(let n=0;n<e.length;n++)r.push({value:e[n],index:n});r.sort((t,e)=>e.value-t.value),l[h]=0;for(let i=0;i<n;i++)if(r[i].index===s[h]){l[h]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),Object(re["a"])(l,i.shape,"bool")}const Iu=Nu;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ru(t,e,n,r,i,o="NHWC",a){let s=t;3===t.rank&&(s=W(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;3===u.rank&&(u=W(e,[1,e.shape[0],e.shape[1],e.shape[2]])),D["assert"](4===s.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."),D["assert"](4===u.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."),D["assert"](4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+".");const c="NHWC"===o?s.shape[3]:s.shape[1],l="NHWC"===o?u.shape[3]:u.shape[1];D["assert"](c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),D["assert"](l===n[3],()=>`Error in conv2dDerFilter: depth of dy (${l}) must match output depth for filter (${n[3]}).`),null!=a&&D["assert"](D["isInt"](i),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${a} but got pad ${i}.`);const h=t=>{const e=1,c=Tt(o),l=gt(s.shape,n,r,e,i,a,!1,c);return t.conv2dDerFilter(s,u,l)},f={x:s,dy:u},d={strides:r,pad:i,dataFormat:o,dimRoundingMode:a};return m["a"].runKernelFunc(h,f,null,b["B"],d)}const Fu=Object(w["a"])({conv2DBackpropFilter_:Ru});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pu(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return ce(t,ds(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function $u(t,e){let n=e;const r=Un(t.shape,e.shape);return r.length>0&&(n=Ai(n,r)),W(n,t.shape)}function Lu(t,e,n){if("linear"===e)return t;if("relu"===e)return ma(t);if("elu"===e)return er(t);if("relu6"===e)return ya(t);if("prelu"===e)return $o(t,n);throw new Error(`Unknown fused activation ${e}.`)}const zu=(t,e)=>{const n=t>0;return!n||"linear"===e};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bu({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:s,activation:u="linear",preluActivationWeights:c}){if(u=u||"linear",!1===zu(m["a"].state.gradientDepth,u)){let l=ln(t,e,n,r,i,o,a);return null!=s&&(l=j(l,s)),Lu(l,u,c)}const l=Object(x["a"])(t,"x","conv2d"),h=Object(x["a"])(e,"filter","conv2d");let f=l,d=!1;3===l.rank&&(d=!0,f=W(l,[1,l.shape[0],l.shape[1],l.shape[2]])),D["assert"](4===f.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+f.rank+"."),D["assert"](4===h.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+h.rank+"."),null!=a&&D["assert"](D["isInt"](r),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${r}.`),D["assert"](f.shape[3]===h.shape[2],()=>`Error in conv2d: depth of input (${f.shape[3]}) must match input depth for filter ${h.shape[2]}.`),D["assert"](At(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),D["assert"]("NHWC"===i,()=>`Error in conv2d: got dataFormat of ${i} but only NHWC is currently supported.`);const p=gt(f.shape,h.shape,n,o,r,a);let g,v;null!=s&&(g=Object(x["a"])(s,"bias","fused conv2d"),[g]=Object(T["makeTypesMatch"])(g,l),Wn(p.outShape,g.shape)),null!=c&&(v=Object(x["a"])(c,"prelu weights","fused conv2d"));const y=(t,e)=>{const[i,a,s,c]=e,l=Pu(t,s,u);D["assert"](kt(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);const h=pn(a.shape,l,i,n,r),f=Fu(a,l,i.shape,n,r),d=[h,f];if(null!=c){const t=$u(c,l);d.push(t)}return d},w=t=>{const e=t.fusedConv2d({input:f,filter:h,convInfo:p,bias:g,activation:u,preluActivationWeights:v});return e},_={x:f,filter:h,bias:g,preluActivationWeights:v},O={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a,activation:u};if(null==s){const t=pi((t,e,n)=>{let r=m["a"].runKernelFunc(w,_,null,b["gb"],O);return n([e,t,r]),d&&(r=W(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:y}});return t(f,h)}{const t=pi((t,e,n,r)=>{let i=m["a"].runKernelFunc(w,_,null,b["gb"],O);return r([e,t,i,n]),d&&(i=W(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:y}});return t(f,h,g)}}const Uu=Object(w["a"])({fusedConv2d_:Bu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wu(t,e,n,r){let i=t;3===t.rank&&(i=W(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let o=e;3===o.rank&&(o=W(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const a=t=>t.depthwiseConv2DDerFilter(i,o,r),s={x:i,dy:o};return m["a"].runKernelFunc(a,s,null,b["M"])}const Vu=Object(w["a"])({depthwiseConv2dNativeBackpropFilter_:Wu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hu(t,e,n,r){let i=e,o=!1;3===e.rank&&(o=!0,i=W(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const a=t=>t.depthwiseConv2DDerInput(i,n,r),s={dy:i},u=m["a"].runKernelFunc(a,s,null,b["N"]);return o?W(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const qu=Object(w["a"])({depthwiseConv2dNativeBackpropInput_:Hu});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gu({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:s,activation:u="linear",preluActivationWeights:c}){if(!1===zu(m["a"].state.gradientDepth,u)){let l=Mn(t,e,n,r,i,o,a);return null!=s&&(l=j(l,s)),Lu(l,u,c)}const l=Object(x["a"])(t,"x","depthwiseConv2d"),h=Object(x["a"])(e,"filter","depthwiseConv2d");let f=l,d=!1;3===l.rank&&(d=!0,f=W(l,[1,l.shape[0],l.shape[1],l.shape[2]])),D["assert"](4===f.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),D["assert"](4===h.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),D["assert"](f.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),null==o&&(o=[1,1]),D["assert"](At(n,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),null!=a&&D["assert"](D["isInt"](r),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${a} but got pad ${r}.`);const p=gt(f.shape,h.shape,n,o,r,a,!0);let g,v;null!=s&&(g=Object(x["a"])(s,"bias","fused conv2d"),[g]=Object(T["makeTypesMatch"])(g,l),Wn(p.outShape,g.shape)),null!=c&&(v=Object(x["a"])(c,"prelu weights","fused depthwiseConv2d"));const y=(t,e)=>{D["assert"](kt(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[n,r,i,a]=e,s=Pu(t,i,u),c=qu(r.shape,s,n,p),l=Vu(r,s,n.shape,p);if(null!=a){const t=$u(g,s);return[c,l,t]}return[c,l]},w=t=>{const e=t.fusedDepthwiseConv2D({input:f,filter:h,convInfo:p,bias:g,activation:u,preluActivationWeights:v});return e},_={x:f,filter:h,bias:g,preluActivationWeights:v},O={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a,activation:u};if(null==s){const t=pi((t,e,n)=>{let r=m["a"].runKernelFunc(w,_,null,b["hb"],O);return n([e,t,r]),d&&(r=W(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:y}});return t(f,h)}{const t=pi((t,e,n,r)=>{let i=m["a"].runKernelFunc(w,_,null,b["hb"],O);return r([e,t,i,n]),d&&(i=W(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:y}});return t(f,h,g)}}const Xu=Object(w["a"])({fusedDepthwiseConv2d_:Gu});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yu({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:o="linear",preluActivationWeights:a}){if(!1===zu(m["a"].state.gradientDepth,o)){let s=se(t,e,n,r);return null!=i&&(s=j(s,i)),Lu(s,o,a)}let s=Object(x["a"])(t,"a","fused matMul"),u=Object(x["a"])(e,"b","fused matMul");[s,u]=Object(T["makeTypesMatch"])(s,u);const c=n?s.shape[s.rank-2]:s.shape[s.rank-1],l=r?u.shape[u.rank-1]:u.shape[u.rank-2],h=n?s.shape[s.rank-1]:s.shape[s.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],d=s.shape.slice(0,-2),p=u.shape.slice(0,-2),g=D["sizeFromShape"](d),v=D["sizeFromShape"](p);D["assert"](s.rank>=2&&u.rank>=2&&s.rank===u.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${s.rank} and ${u.rank}.`),D["assert"](D["arraysEqual"](d,p),()=>`Error in fused matMul: outer dimensions (${d}) and (${p}) of Tensors with shapes ${s.shape} and `+u.shape+" must match."),D["assert"](c===l,()=>`Error in fused matMul: inner shapes (${c}) and (${l}) of Tensors with shapes ${s.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const y=s.shape.slice(0,-2).concat([h,f]),w=W(s,n?[g,c,h]:[g,h,c]),_=W(u,r?[v,f,l]:[v,l,f]);let O,S;null!=i&&(O=Object(x["a"])(i,"bias","fused matMul"),[O]=Object(T["makeTypesMatch"])(O,s),Wn(y,O.shape)),null!=a&&(S=Object(x["a"])(a,"prelu weights","fused matMul"));const C=(t,e)=>{const[a,s,u,c]=e,l=Pu(W(t,u.shape),u,o);let h,f;if(n||r?!n&&r?(h=se(l,s,!1,!1),f=se(l,a,!0,!1)):n&&!r?(h=se(s,l,!1,!0),f=se(a,l,!1,!1)):(h=se(s,l,!0,!0),f=se(l,a,!0,!0)):(h=se(l,s,!1,!0),f=se(a,l,!0,!1)),null!=i){const t=$u(c,l);return[h,f,t]}return[h,f]},k=t=>{const e=t.fusedBatchMatMul({a:w,b:_,transposeA:n,transposeB:r,bias:O,activation:o,preluActivationWeights:S});return e},A={a:w,b:_,bias:O,preluActivationWeights:S},E={transposeA:n,transposeB:r,activation:o};if(null==i){const t=pi((t,e,n)=>{const r=m["a"].runKernelFunc(k,A,null,b["Rc"],E);return n([t,e,r]),{value:W(r,y),gradFunc:C}});return t(w,_)}{const t=pi((t,e,n,r)=>{const i=m["a"].runKernelFunc(k,A,null,b["Rc"],E);return r([t,e,i,n]),{value:W(i,y),gradFunc:C}});return t(w,_,O)}}const Ku=Object(w["a"])({fusedMatMul_:Yu});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zu(t){return Mu(t,.54,.46)}const Ju=Object(w["a"])({hammingWindow_:Zu});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qu(t){return Mu(t,.5,.5)}const tc=Object(w["a"])({hannWindow_:Qu});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ec(t,e,n,r=!1,i=0){let o=0;const a=[];while(o+e<=t.size)a.push(Ae(t,o,e)),o+=n;if(r)while(o<t.size){const r=o+e-t.size,s=oe([Ae(t,o,e-r),mr([r],i)]);a.push(s),o+=n}return 0===a.length?ys([],[0,e]):W(oe(a),[a.length,e])}const nc=Object(w["a"])({frame_:ec});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rc(t,e,n,r,i=tc){null==r&&(r=Du(e));const o=nc(t,e,n),a=ce(o,i(e)),s=[];for(let u=0;u<o.shape[0];u++)s.push(Da(Ae(a,[u,0],[1,e]),r));return oe(s)}const ic=Object(w["a"])({stft_:rc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oc(t,e,n,r,i,o){const a=Object(x["a"])(t,"image","cropAndResize"),s=Object(x["a"])(e,"boxes","cropAndResize","float32"),u=Object(x["a"])(n,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;const c=s.shape[0];D["assert"](4===a.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),D["assert"](2===s.rank&&4===s.shape[1],()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${s.shape}.`),D["assert"](1===u.rank&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${s.shape}.`),D["assert"](2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),D["assert"](r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was "+r),D["assert"]("bilinear"===i||"nearest"===i,()=>"method must be bilinear or nearest, but was "+i);const l=t=>t.cropAndResize(a,s,u,r,i,o),h={image:a,boxes:s,boxInd:u},f={method:i,extrapolationValue:o,cropSize:r},d=m["a"].runKernelFunc(l,h,null,b["I"],f);return d}const ac=Object(w["a"])({cropAndResize_:oc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sc(t){const e=Object(x["a"])(t,"image","flipLeftRight","float32");D["assert"](4===e.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e},r=m["a"].runKernel(b["bb"],n,{});return r}const uc=Object(w["a"])({flipLeftRight_:sc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cc(t,e,n=0,r=.5){const i=Object(x["a"])(t,"image","rotateWithOffset","float32");D["assert"](4===i.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const o={image:i},a={radians:e,fillValue:n,center:r},s=m["a"].runKernel(b["mc"],o,a);return s}const lc=Object(w["a"])({rotateWithOffset_:cc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hc(t,e,n,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);const a=t.shape[0];return n=Math.min(n,a),D["assert"](0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),D["assert"](2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),D["assert"](4===t.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]),D["assert"](1===e.rank,()=>"scores must be a 1D tensor"),D["assert"](e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was `+e.shape[0]),D["assert"](0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fc(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const o=Object(x["a"])(t,"boxes","nonMaxSuppression"),a=Object(x["a"])(e,"scores","nonMaxSuppression"),s=hc(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return m["a"].runKernelFunc(t=>t.nonMaxSuppression(o,a,n,r,i),{boxes:o,scores:a},null,b["Qb"],u)}const dc=Object(w["a"])({nonMaxSuppression_:fc});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pc(t,e,n){const r=gc(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function gc(t,e,n){return vc(t,e,n||mc)}function mc(t,e){return t>e?1:t<e?-1:0}function vc(t,e,n){let r=0,i=t.length,o=0,a=!1;while(r<i){o=r+(i-r>>>1);const s=n(e,t[o]);s>0?r=o+1:(i=o,a=!s)}return a?r:-r-1}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yc(t,e,n,r,i){return wc(t,e,n,r,i,0).selectedIndices}function bc(t,e,n,r,i,o){return wc(t,e,n,r,i,0,!1,o,!0)}function xc(t,e,n,r,i,o){return wc(t,e,n,r,i,o,!0)}function wc(t,e,n,r,i,o,a=!1,s=!1,u=!1){const c=[];for(let m=0;m<e.length;m++)e[m]>i&&c.push({score:e[m],boxIndex:m,suppressBeginIndex:0});c.sort(Sc);const l=o>0?-.5/o:0,h=[],f=[];while(h.length<n&&c.length>0){const e=c.pop(),{score:n,boxIndex:o,suppressBeginIndex:a}=e;if(n<i)break;let s=!1;for(let u=h.length-1;u>=a;--u){const n=_c(t,o,h[u]);if(n>=r){s=!0;break}if(e.score=e.score*Oc(r,l,n),e.score<=i)break}e.suppressBeginIndex=h.length,s||(e.score===n?(h.push(o),f.push(e.score)):e.score>i&&pc(c,e,Sc))}const d=h.length,p=n-d;s&&p>0&&(h.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const g={selectedIndices:ha(h,"int32")};return a&&(g["selectedScores"]=ha(f,"float32")),u&&(g["validOutputs"]=Lr(d,"int32")),g}function _c(t,e,n){const r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),l=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),d=(s-o)*(u-a),p=(h-c)*(f-l);if(d<=0||p<=0)return 0;const g=Math.max(o,c),m=Math.max(a,l),v=Math.min(s,h),y=Math.min(u,f),b=Math.max(v-g,0)*Math.max(y-m,0);return b/(d+p-b)}function Oc(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function Sc(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Cc(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const o=Object(x["a"])(t,"boxes","nonMaxSuppressionAsync"),a=Object(x["a"])(e,"scores","nonMaxSuppressionAsync"),s=hc(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const u=await Promise.all([o.data(),a.data()]),c=u[0],l=u[1],h=yc(c,l,n,r,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),h}const kc=Cc;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ac(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,o=0){const a=Object(x["a"])(t,"boxes","nonMaxSuppression"),s=Object(x["a"])(e,"scores","nonMaxSuppression"),u=hc(a,s,n,r,i,o);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma;const c={boxes:a,scores:s},l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o},h=m["a"].runKernel(b["Sb"],c,l);return{selectedIndices:h[0],selectedScores:h[1]}}const Tc=Object(w["a"])({nonMaxSuppressionWithScore_:Ac});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ec(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,o=0){const a=Object(x["a"])(t,"boxes","nonMaxSuppressionAsync"),s=Object(x["a"])(e,"scores","nonMaxSuppressionAsync"),u=hc(a,s,n,r,i,o);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma;const c=await Promise.all([a.data(),s.data()]),l=c[0],h=c[1],f=xc(l,h,n,r,i,o);return a!==t&&a.dispose(),s!==e&&s.dispose(),f}const jc=Ec;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dc(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,o=!1){const a=Object(x["a"])(t,"boxes","nonMaxSuppression"),s=Object(x["a"])(e,"scores","nonMaxSuppression"),u=hc(a,s,n,r,i,null),c=u.maxOutputSize,l=u.iouThreshold,h=u.scoreThreshold,f={boxes:a,scores:s},d={maxOutputSize:c,iouThreshold:l,scoreThreshold:h,padToMaxOutputSize:o},p=m["a"].runKernel(b["Rb"],f,d);return{selectedIndices:p[0],validOutputs:p[1]}}const Mc=Object(w["a"])({nonMaxSuppressionPadded_:Dc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Nc(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,o=!1){const a=Object(x["a"])(t,"boxes","nonMaxSuppressionAsync"),s=Object(x["a"])(e,"scores","nonMaxSuppressionAsync"),u=hc(a,s,n,r,i,null),c=u.maxOutputSize,l=u.iouThreshold,h=u.scoreThreshold,[f,d]=await Promise.all([a.data(),s.data()]),p=bc(f,d,c,l,h,o);return a!==t&&a.dispose(),s!==e&&s.dispose(),p}const Ic=Nc;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rc(t,e,n=!1){const r=Object(x["a"])(t,"images","resizeBilinear");D["assert"](3===r.rank||4===r.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${r.rank}.`),D["assert"](2===e.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+e+".");let i=r,o=!1;3===r.rank&&(o=!0,i=W(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const[a,s]=e,u=(t,e)=>(e([i]),t.resizeBilinear(i,a,s,n)),c={images:i},l={alignCorners:n,size:e},h=m["a"].runKernelFunc(u,c,null,b["hc"],l);return o?W(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Fc=Object(w["a"])({resizeBilinear_:Rc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pc(t,e,n=!1){const r=Object(x["a"])(t,"images","resizeNearestNeighbor");D["assert"](3===r.rank||4===r.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${r.rank}.`),D["assert"](2===e.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."),D["assert"]("float32"===r.dtype||"int32"===r.dtype,()=>"`images` must have `int32` or `float32` as dtype");let i=r,o=!1;3===r.rank&&(o=!0,i=W(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const[a,s]=e,u={images:i},c={alignCorners:n,size:e},l=(t,e)=>(e([i]),t.resizeNearestNeighbor(i,a,s,n)),h=m["a"].runKernelFunc(l,u,null,b["jc"],c);return o?W(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const $c=Object(w["a"])({resizeNearestNeighbor_:Pc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lc(t,e,n){Object(D["assert"])(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Object(D["assert"])(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=Object(x["a"])(t,"a","bandPart");Object(D["assert"])(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[o,a]=r.shape.slice(-2);if(!(e<=o))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${o}).`);if(!(n<=a))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`);e<0&&(e=o),n<0&&(n=a);const s=W(fa(0,o,1,"int32"),[-1,1]),u=fa(0,a,1,"int32"),c=Ci(s,u),l=Ni(ei(c,Lr(+e,"int32")),Er(c,Lr(-n,"int32"))),h=qi([o,a],r.dtype);return W(hs(js(W(r,[-1,o,a])).map(t=>Gn(l,t,h))),i)}const zc=Object(w["a"])({bandPart_:Lc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bc(t){let e;if(Array.isArray(t)){e=!1,Object(D["assert"])(null!=t&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=t[0].shape[0];for(let e=1;e<t.length;++e)Object(D["assert"])(t[e].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[e].shape[0]} vs. ${n})`)}else e=!0,t=Ea(t,t.shape[0],0).map(t=>cs(t,[0]));Object(D["assert"])(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(m["a"].tidy(()=>{let t=r[i];if(i>0)for(let e=0;e<i;++e){const r=ce(Ai(ce(n[e],t)),n[e]);t=Ci(t,r)}return zn(t,gu(t,"euclidean"))}));return e?hs(n,0):n}const Uc=Object(w["a"])({gramSchmidt_:Bc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wc(t,e=!1){if(Object(D["assert"])(t.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank "+t.rank),2===t.rank)return Vc(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((t,e)=>t*e),r=js(W(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];r.forEach(t=>{const[n,r]=Vc(t,e);i.push(n),o.push(r)});const a=W(hs(i,0),t.shape),s=W(hs(o,0),t.shape);return[a,s]}}function Vc(t,e=!1){return m["a"].tidy(()=>{Object(D["assert"])(2===t.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=dr(n),o=He(t);const a=ys([[1]],[1,1]);let s=He(a);const u=n>=r?r:n;for(let t=0;t<u;++t){const e=o,u=s,c=i;[s,o,i]=m["a"].tidy(()=>{const e=Ae(o,[t,t],[n-t,1]),u=gu(e),c=Ae(o,[t,t],[1,1]),l=Gn(Ar(c,0),ys([[-1]]),ys([[1]])),h=Ci(c,ce(l,u)),f=zn(e,h);s=1===f.shape[0]?He(a):oe([a,Ae(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);const d=vi(zn(se(l,h),u)),p=Ae(o,[t,0],[n-t,r]),g=ce(d,s),m=H(s);if(0===t)o=Ci(p,se(g,se(m,p)));else{const e=Ci(p,se(g,se(m,p)));o=oe([Ae(o,[0,0],[t,r]),e],0)}const v=H(g),y=Ae(i,[0,t],[n,i.shape[1]-t]);if(0===t)i=Ci(y,se(se(y,s),v));else{const e=Ci(y,se(se(y,s),v));i=oe([Ae(i,[0,0],[n,t]),e],1)}return[s,o,i]}),Bt([e,u,c])}return!e&&n>r&&(i=Ae(i,[0,0],[n,r]),o=Ae(o,[0,0],[r,r])),[i,o]})}const Hc=Object(w["a"])({qr_:Wc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var qc;function Gc(t,e,n=qc.SUM_BY_NONZERO_WEIGHTS){const r=Object(x["a"])(t,"losses","computeWeightedLoss");let i=null;null!=e&&(i=Object(x["a"])(e,"weights","computeWeightedLoss"));const o=null==i?r:ce(r,i);if(n===qc.NONE)return o;if(n===qc.SUM)return Ai(o);if(n===qc.MEAN){if(null==i)return Yi(o);{const t=r.size/i.size,e=zn(Ai(o),Ai(i));return t>1?zn(e,Lr(t)):e}}if(n===qc.SUM_BY_NONZERO_WEIGHTS){if(null==i)return zn(Ai(o),Lr(r.size));{const t=ce(i,Gi(r.shape)),e=ht(Ai(ho(t,Lr(0))),"float32");return zn(Ai(o),e)}}throw Error("Unknown reduction: "+n)}(function(t){t[t["NONE"]=0]="NONE",t[t["MEAN"]=1]="MEAN",t[t["SUM"]=2]="SUM",t[t["SUM_BY_NONZERO_WEIGHTS"]=3]="SUM_BY_NONZERO_WEIGHTS"})(qc||(qc={}));const Xc=Object(w["a"])({computeWeightedLoss_:Gc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yc(t,e,n,r=qc.SUM_BY_NONZERO_WEIGHTS){const i=Object(x["a"])(t,"labels","absoluteDifference"),o=Object(x["a"])(e,"predictions","absoluteDifference");let a=null;null!=n&&(a=Object(x["a"])(n,"weights","absoluteDifference")),Object(D["assertShapesMatch"])(i.shape,o.shape,"Error in absoluteDifference: ");const s=O(Ci(i,o));return Xc(s,a,r)}const Kc=Object(w["a"])({absoluteDifference_:Yc});function Zc(t,e,n,r,i=qc.SUM_BY_NONZERO_WEIGHTS){const o=Object(x["a"])(t,"labels","cosineDistance"),a=Object(x["a"])(e,"predictions","cosineDistance");let s=null;null!=r&&(s=Object(x["a"])(r,"weights","cosineDistance")),Object(D["assertShapesMatch"])(o.shape,a.shape,"Error in cosineDistance: ");const u=Lr(1),c=Ci(u,Ai(ce(o,a),n,!0));return Xc(c,s,i)}const Jc=Object(w["a"])({cosineDistance_:Zc});function Qc(t,e,n,r=qc.SUM_BY_NONZERO_WEIGHTS){let i=Object(x["a"])(t,"labels","hingeLoss");const o=Object(x["a"])(e,"predictions","hingeLoss");let a=null;null!=n&&(a=Object(x["a"])(n,"weights","hingeLoss")),Object(D["assertShapesMatch"])(i.shape,o.shape,"Error in hingeLoss: ");const s=Lr(1);i=Ci(ce(Lr(2),i),s);const u=ma(Ci(s,ce(i,o)));return Xc(u,a,r)}const tl=Object(w["a"])({hingeLoss_:Qc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function el(t,e,n,r=1,i=qc.SUM_BY_NONZERO_WEIGHTS){const o=Object(x["a"])(t,"labels","huberLoss"),a=Object(x["a"])(e,"predictions","huberLoss");let s=null;null!=n&&(s=Object(x["a"])(n,"weights","huberLoss")),Object(D["assertShapesMatch"])(o.shape,a.shape,"Error in huberLoss: ");const u=Lr(r),c=O(Ci(a,o)),l=Qi(c,u),h=Ci(c,l),f=j(ce(Lr(.5),ro(l)),ce(u,h));return Xc(f,s,i)}const nl=Object(w["a"])({huberLoss_:el});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rl(t,e,n,r=1e-7,i=qc.SUM_BY_NONZERO_WEIGHTS){const o=Object(x["a"])(t,"labels","logLoss"),a=Object(x["a"])(e,"predictions","logLoss");let s=null;null!=n&&(s=Object(x["a"])(n,"weights","logLoss")),Object(D["assertShapesMatch"])(o.shape,a.shape,"Error in logLoss: ");const u=Lr(1),c=Lr(r),l=vi(ce(o,ai(j(a,c)))),h=ce(Ci(u,o),ai(j(Ci(u,a),c))),f=Ci(l,h);return Xc(f,s,i)}const il=Object(w["a"])({logLoss_:rl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ol(t,e,n,r=qc.SUM_BY_NONZERO_WEIGHTS){const i=Object(x["a"])(t,"labels","meanSquaredError"),o=Object(x["a"])(e,"predictions","meanSquaredError");let a=null;null!=n&&(a=Object(x["a"])(n,"weights","meanSquaredError")),Object(D["assertShapesMatch"])(i.shape,o.shape,"Error in meanSquaredError: ");const s=ss(i,o);return Xc(s,a,r)}const al=Object(w["a"])({meanSquaredError_:ol});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sl(t,e){const n=Object(x["a"])(t,"labels","sigmoidCrossEntropyWithLogits"),r=Object(x["a"])(e,"logits","sigmoidCrossEntropyWithLogits");Object(D["assertShapesMatch"])(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=ma(r),o=ce(r,n),a=ui(or(vi(O(r))));return j(Ci(i,o),a)}function ul(t,e,n,r=0,i=qc.SUM_BY_NONZERO_WEIGHTS){let o=Object(x["a"])(t,"multiClassLabels","sigmoidCrossEntropy");const a=Object(x["a"])(e,"logits","sigmoidCrossEntropy");let s=null;if(null!=n&&(s=Object(x["a"])(n,"weights","sigmoidCrossEntropy")),Object(D["assertShapesMatch"])(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const t=Lr(r),e=Lr(1),n=Lr(.5);o=j(ce(o,Ci(e,t)),ce(n,t))}const u=sl(o,a);return Xc(u,s,i)}const cl=Object(w["a"])({sigmoidCrossEntropy_:ul});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ll(t,e,n=-1){if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was `+n);const r=pi((t,e,r)=>{const i=!0,o=Di(e,[n],i),a=Ci(ht(e,"float32"),o);r([t,a]);const s=vi(ce(a,t)),u=Ai(s,[n]),c=(t,e)=>{const[r,i]=e,o=P(t.shape,[n]);return[ce(W(t,o),Ci(ht(r,"float32"),or(i))),ce(W(t,o),Ci(or(i),ht(r,"float32")))]};return{value:u,gradFunc:c}});return r(t,e)}function hl(t,e,n,r=0,i=qc.SUM_BY_NONZERO_WEIGHTS){let o=Object(x["a"])(t,"onehotLabels","softmaxCrossEntropy");const a=Object(x["a"])(e,"logits","softmaxCrossEntropy");let s=null;if(null!=n&&(s=Object(x["a"])(n,"weights","softmaxCrossEntropy")),Object(D["assertShapesMatch"])(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const t=Lr(r),e=Lr(1),n=Lr(o.shape[1]);o=j(ce(o,Ci(e,t)),zn(t,n))}const u=ll(o,a);return Xc(u,s,i)}const fl=Object(w["a"])({softmaxCrossEntropy_:hl}),dl={fft:gr,ifft:Dr,rfft:Da,irfft:Br},pl={hammingWindow:Ju,hannWindow:tc,frame:nc,stft:ic},gl={flipLeftRight:uc,resizeNearestNeighbor:$c,resizeBilinear:Fc,rotateWithOffset:lc,cropAndResize:ac,nonMaxSuppression:dc,nonMaxSuppressionAsync:kc,nonMaxSuppressionWithScore:Tc,nonMaxSuppressionWithScoreAsync:jc,nonMaxSuppressionPadded:Mc,nonMaxSuppressionPaddedAsync:Ic},ml={bandPart:zc,gramSchmidt:Uc,qr:Hc},vl={absoluteDifference:Kc,computeWeightedLoss:Xc,cosineDistance:Jc,hingeLoss:tl,huberLoss:nl,logLoss:il,meanSquaredError:al,sigmoidCrossEntropy:cl,softmaxCrossEntropy:fl};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(Dt["e"])(u);var yl=n("350f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bl{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==bl.instance&&(bl.instance=new bl),bl.instance}static registerSaveRouter(t){bl.getInstance().saveRouters.push(t)}static registerLoadRouter(t){bl.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return bl.getHandlers(t,"save")}static getLoadHandlers(t,e){return bl.getHandlers(t,"load",e)}static getHandlers(t,e,n){const r=[],i="load"===e?bl.getInstance().loadRouters:bl.getInstance().saveRouters;return i.forEach(e=>{const i=e(t,n);null!==i&&r.push(i)}),r}}const xl=t=>bl.registerSaveRouter(t),wl=t=>bl.registerLoadRouter(t),_l=t=>bl.getSaveHandlers(t),Ol=(t,e)=>bl.getLoadHandlers(t,e)
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */,Sl="://";class Cl{constructor(){this.managers={}}static getInstance(){return null==Cl.instance&&(Cl.instance=new Cl),Cl.instance}static registerManager(t,e){Object(D["assert"])(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(Sl)&&(t=t.slice(0,t.indexOf(Sl))),Object(D["assert"])(t.length>0,()=>"scheme must not be an empty string.");const n=Cl.getInstance();Object(D["assert"])(null==n.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),n.managers[t]=e}static getManager(t){const e=this.getInstance().managers[t];if(null==e)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(this.getInstance().managers)}}function kl(t){if(-1===t.indexOf(Sl))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Cl.getSchemes().join(","));return{scheme:t.split(Sl)[0],path:t.split(Sl)[1]}}async function Al(t,e,n=!1){Object(D["assert"])(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=bl.getLoadHandlers(t);Object(D["assert"])(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),Object(D["assert"])(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const i=r[0],o=bl.getSaveHandlers(e);Object(D["assert"])(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),Object(D["assert"])(o.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const a=o[0],s=kl(t).scheme,u=kl(t).path,c=s===kl(t).scheme,l=await i.load();n&&c&&await Cl.getManager(s).removeModel(u);const h=await a.save(l);return n&&!c&&await Cl.getManager(s).removeModel(u),h.modelArtifactsInfo}async function Tl(){const t=Cl.getSchemes(),e={};for(const n of t){const t=await Cl.getManager(n).listModels();for(const r in t){const i=n+Sl+r;e[i]=t[r]}}return e}async function El(t){const e=kl(t),n=Cl.getManager(e.scheme);return n.removeModel(e.path)}async function jl(t,e){const n=!1;return Al(t,e,n)}async function Dl(t,e){const n=!0;return Al(t,e,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ml="tensorflowjs",Nl=1,Il="models_store",Rl="model_info_store";function Fl(){if(!Object(v["c"])().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t="undefined"===typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Pl(t){const e=t.result;e.createObjectStore(Il,{keyPath:"modelPath"}),e.createObjectStore(Rl,{keyPath:"modelPath"})}class $l{constructor(t){if(this.indexedDB=Fl(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise((t,n)=>{const r=this.indexedDB.open(Ml,Nl);r.onupgradeneeded=()=>Pl(r),r.onsuccess=()=>{const i=r.result;if(null==e){const e=i.transaction(Il,"readonly"),r=e.objectStore(Il),o=r.get(this.modelPath);o.onsuccess=()=>{if(null==o.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));t(o.result.modelArtifacts)},o.onerror=t=>(i.close(),n(o.error)),e.oncomplete=()=>i.close()}else{const r=Object(yl["g"])(e),o=i.transaction(Rl,"readwrite");let a=o.objectStore(Rl);const s=a.put({modelPath:this.modelPath,modelArtifactsInfo:r});let u;s.onsuccess=()=>{u=i.transaction(Il,"readwrite");const s=u.objectStore(Il),c=s.put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:r});c.onsuccess=()=>t({modelArtifactsInfo:r}),c.onerror=t=>{a=o.objectStore(Rl);const e=a.delete(this.modelPath);e.onsuccess=()=>(i.close(),n(c.error)),e.onerror=t=>(i.close(),n(c.error))}},s.onerror=t=>(i.close(),n(s.error)),o.oncomplete=()=>{null==u?i.close():u.oncomplete=()=>i.close()}}},r.onerror=t=>n(r.error)})}}$l.URL_SCHEME="indexeddb://";const Ll=t=>Object(v["c"])().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith($l.URL_SCHEME)?zl(t.slice($l.URL_SCHEME.length)):null;function zl(t){return new $l(t)}function Bl(t){return t.startsWith($l.URL_SCHEME)?t.slice($l.URL_SCHEME.length):t}bl.registerSaveRouter(Ll),bl.registerLoadRouter(Ll);class Ul{constructor(){this.indexedDB=Fl()}async listModels(){return new Promise((t,e)=>{const n=this.indexedDB.open(Ml,Nl);n.onupgradeneeded=()=>Pl(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(Rl,"readonly"),o=i.objectStore(Rl),a=o.getAll();a.onsuccess=()=>{const e={};for(const t of a.result)e[t.modelPath]=t.modelArtifactsInfo;t(e)},a.onerror=t=>(r.close(),e(a.error)),i.oncomplete=()=>r.close()},n.onerror=t=>e(n.error)})}async removeModel(t){return t=Bl(t),new Promise((e,n)=>{const r=this.indexedDB.open(Ml,Nl);r.onupgradeneeded=()=>Pl(r),r.onsuccess=()=>{const i=r.result,o=i.transaction(Rl,"readwrite"),a=o.objectStore(Rl),s=a.get(t);let u;s.onsuccess=()=>{if(null==s.result)return i.close(),n(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const r=a.delete(t),o=()=>{u=i.transaction(Il,"readwrite");const r=u.objectStore(Il),o=r.delete(t);o.onsuccess=()=>e(s.result.modelArtifactsInfo),o.onerror=t=>n(s.error)};r.onsuccess=o,r.onerror=t=>(o(),i.close(),n(s.error))}},s.onerror=t=>(i.close(),n(s.error)),o.oncomplete=()=>{null==u?i.close():u.oncomplete=()=>i.close()}},r.onerror=t=>n(r.error)})}}if(Object(v["c"])().getBool("IS_BROWSER"))try{Cl.registerManager($l.URL_SCHEME,new Ul)}catch(zp){}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wl="/",Vl="tensorflowjs_models",Hl="info",ql="model_topology",Gl="weight_specs",Xl="weight_data",Yl="model_metadata";function Kl(t){return{info:[Vl,t,Hl].join(Wl),topology:[Vl,t,ql].join(Wl),weightSpecs:[Vl,t,Gl].join(Wl),weightData:[Vl,t,Xl].join(Wl),modelMetadata:[Vl,t,Yl].join(Wl)}}function Zl(t){const e=t.split(Wl);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(Wl)}function Jl(t){return t.startsWith(Ql.URL_SCHEME)?t.slice(Ql.URL_SCHEME.length):t}class Ql{constructor(t){if(!Object(v["c"])().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Kl(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=Object(yl["g"])(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,Object(yl["a"])(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),{modelArtifactsInfo:r}}catch(zp){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(null==t)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);e.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);e.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const t=JSON.parse(i);e.format=t["format"],e.generatedBy=t["generatedBy"],e.convertedBy=t["convertedBy"],e.userDefinedMetadata=t["userDefinedMetadata"]}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return e.weightData=Object(yl["b"])(o),e}}Ql.URL_SCHEME="localstorage://";const th=t=>Object(v["c"])().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ql.URL_SCHEME)?eh(t.slice(Ql.URL_SCHEME.length)):null;function eh(t){return new Ql(t)}bl.registerSaveRouter(th),bl.registerLoadRouter(th);class nh{constructor(){Object(D["assert"])(Object(v["c"])().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Object(D["assert"])("undefined"===typeof window||"undefined"!==typeof window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},e=Vl+Wl,n=Wl+Hl;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(e)&&i.endsWith(n)){const e=Zl(i);t[e]=JSON.parse(this.LS.getItem(i))}}return t}async removeModel(t){t=Jl(t);const e=Kl(t);if(null==this.LS.getItem(e.info))throw new Error(`Cannot find model at path '${t}'`);const n=JSON.parse(this.LS.getItem(e.info));return this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),n}}if(Object(v["c"])().getBool("IS_BROWSER"))try{Cl.registerManager(Ql.URL_SCHEME,new nh)}catch(zp){}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rh="model",ih=".json",oh=".weights.bin";function ah(t){return new Promise(t=>setTimeout(t)).then(t)}class sh{constructor(t){if(!Object(v["c"])().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(sh.URL_SCHEME)&&(t=t.slice(sh.URL_SCHEME.length)),null!=t&&0!==t.length||(t=rh),this.modelTopologyFileName=t+ih,this.weightDataFileName=t+oh}async save(t){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(o.download=this.modelTopologyFileName,o.href=i,await ah(()=>o.dispatchEvent(new MouseEvent("click"))),null!=t.weightData){const t=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=e,await ah(()=>t.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Object(yl["g"])(t)}}}}sh.URL_SCHEME="downloads://";class uh{constructor(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}async load(){const t=this.files[0],e=this.files.slice(1);return new Promise((n,r)=>{const i=new FileReader;i.onload=i=>{const o=JSON.parse(i.target.result),a=o.modelTopology;if(null==a)return void r(new Error("modelTopology field is missing from file "+t.name));0===e.length&&n({modelTopology:a});const s=o.weightsManifest;if(null==s)return void r(new Error("weightManifest field is missing from file "+t.name));let u;try{u=this.checkManifestAndWeightFiles(s,e)}catch(zp){return void r(zp)}const c=[],l=[],h=[];s.forEach(t=>{t.paths.forEach(t=>{l.push(t),h.push(null)}),c.push(...t.weights)}),s.forEach(t=>{t.paths.forEach(t=>{const e=new FileReader;e.onload=e=>{const r=e.target.result,i=l.indexOf(t);h[i]=r,-1===h.indexOf(null)&&n({modelTopology:a,weightSpecs:c,weightData:Object(yl["d"])(h),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,userDefinedMetadata:o.userDefinedMetadata})},e.onerror=e=>r(`Failed to weights data from file of path '${t}'.`),e.readAsArrayBuffer(u[t])})})},i.onerror=e=>r(`Failed to read model topology and weights manifest JSON from file '${t.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),i.readAsText(t)})}checkManifestAndWeightFiles(t,e){const n=[],r=e.map(t=>Object(yl["c"])(t.name)),i={};for(const o of t)o.paths.forEach(t=>{const o=Object(yl["c"])(t);if(-1!==n.indexOf(o))throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),-1===r.indexOf(o))throw new Error(`Weight file with basename '${o}' is not provided.`);i[t]=e[r.indexOf(o)]});if(n.length!==e.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${e.length}).`);return i}}const ch=t=>Object(v["c"])().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(sh.URL_SCHEME)?lh(t.slice(sh.URL_SCHEME.length)):null;function lh(t="model"){return new sh(t)}function hh(t){return new uh(t)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fh(t,e,n,r){a(t),n=null==n?0:n,r=null==r?1:r,s(n,r);let i=0;const o=o=>(o.then(o=>{const a=n+ ++i/t.length*(r-n);return e(a),o}),o);function a(t){Object(D["assert"])(null!=t&&Array.isArray(t)&&t.length>0,()=>"promises must be a none empty array")}function s(t,e){Object(D["assert"])(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction "+t),Object(D["assert"])(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction "+e),Object(D["assert"])(e>=t,()=>`startFraction must be no more than endFraction, but got startFraction ${t} and endFraction `+e)}return Promise.all(t.map(o))}bl.registerSaveRouter(ch);var dh=n("9847");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ph(t,e){null==e&&(e={});const n=null==e.fetchFunc?Object(v["c"])().platform.fetch:e.fetchFunc,r=t.map(t=>n(t,e.requestInit,{isBinary:!0})),i=0,o=.5,a=null==e.onProgress?await Promise.all(r):await fh(r,e.onProgress,i,o),s=a.map(t=>t.arrayBuffer()),u=.5,c=1,l=null==e.onProgress?await Promise.all(s):await fh(s,e.onProgress,u,c);return l}async function gh(t,e="",n,r){const i=t=>ph(t,{requestInit:r}),o=mh(i);return o(t,e,n)}function mh(t){return async(e,n="",r)=>{const i=e.map(()=>!1),o={},a=null!=r?r.map(()=>!1):[],s=[];if(e.forEach((t,e)=>{let n=0;t.weights.forEach(t=>{const u="quantization"in t?t.quantization.dtype:t.dtype,c=dh["a"][u]*D["sizeFromShape"](t.shape),l=()=>{i[e]=!0,null==o[e]&&(o[e]=[]),o[e].push({manifestEntry:t,groupOffset:n,sizeBytes:c})};null!=r?r.forEach((e,n)=>{e===t.name&&(l(),a[n]=!0)}):l(),s.push(t.name),n+=c})}),!a.every(t=>t)){const t=r.filter((t,e)=>!a[e]);throw new Error("Could not find weights in manifest with names: "+t.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".")}const u=i.reduce((t,e,n)=>(e&&t.push(n),t),[]),c=[];u.forEach(t=>{e[t].paths.forEach(t=>{const e=n+(n.endsWith("/")?"":"/")+t;c.push(e)})});const l=await t(c),h={};let f=0;return u.forEach(t=>{const n=e[t].paths.length;let r=0;for(let e=0;e<n;e++)r+=l[f+e].byteLength;const i=new ArrayBuffer(r),a=new Uint8Array(i);let s=0;for(let e=0;e<n;e++){const t=new Uint8Array(l[f+e]);a.set(t,s),s+=t.byteLength}const u=o[t];u.forEach(t=>{const e=i.slice(t.groupOffset,t.groupOffset+t.sizeBytes),n=Object(yl["e"])(e,[t.manifestEntry]);for(const r in n)h[r]=n[r]}),f+=n}),h}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vh="application/octet-stream",yh="application/json";class bh{constructor(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(Object(D["assert"])("function"===typeof e.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=e.fetchFunc):this.fetch=Object(v["c"])().platform.fetch,Object(D["assert"])(null!=t&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&Object(D["assert"])(2===t.length,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:n};e.body.append("model.json",new Blob([JSON.stringify(r)],{type:yh}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:vh}),"model.weights.bin");const i=await this.fetch(this.path,e);if(i.ok)return{modelArtifactsInfo:Object(yl["g"])(t),responses:[i]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code `+t.status+". Please verify this URL points to the model JSON of the model to load.");let e;try{e=await t.json()}catch(l){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=e.modelTopology,r=e.weightsManifest,i=e.generatedBy,o=e.convertedBy,a=e.format,s=e.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let u,c;if(null!=r){const t=await this.loadWeights(r);[u,c]=t}return{modelTopology:n,weightSpecs:u,weightData:c,userDefinedMetadata:s,generatedBy:i,convertedBy:o,format:a}}async loadWeights(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=xh(e),i=this.weightPathPrefix||n,o=[];for(const u of t)o.push(...u.weights);const a=[];t.forEach(t=>{t.paths.forEach(t=>{a.push(i+t+r)})});const s=await ph(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,Object(yl["d"])(s)]}}function xh(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function wh(t){return null!=t.match(bh.URL_SCHEME_REGEX)}bh.URL_SCHEME_REGEX=/^https?:\/\//;const _h=(t,e)=>{if("undefined"===typeof fetch&&(null==e||null==e.fetchFunc))return null;{let n=!0;if(n=Array.isArray(t)?t.every(t=>wh(t)):wh(t),n)return Oh(t,e)}return null};function Oh(t,e){return new bh(t,e)}function Sh(t,e){return Oh(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */bl.registerSaveRouter(_h),bl.registerLoadRouter(_h);class Ch{constructor(t){this.modelArtifacts=t}async load(){return this.modelArtifacts}}class kh{constructor(t){this.saveHandler=t}async save(t){return this.saveHandler(t)}}function Ah(t,e,n,r){if(1===arguments.length){const e=null!=t.modelTopology||null!=t.weightSpecs;return e?new Ch(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ch({modelTopology:t}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ch({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r})}function Th(t){return new kh(t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eh(t,e,n){const r=Object(x["a"])(t,"labels","confusionMatrix"),i=Object(x["a"])(e,"predictions","confusionMatrix");D["assert"](null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got "+n),D["assert"](1===r.rank,()=>"Expected the rank of labels to be 1, but got "+r.rank),D["assert"](1===i.rank,()=>"Expected the rank of predictions to be 1, but got "+i.rank),D["assert"](r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),D["assert"](n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got "+n);const o=po(ht(r,"int32"),n),a=po(ht(i,"int32"),n),s=H(o);return ht(se(s,a),"int32")}const jh=Object(w["a"])({confusionMatrix_:Eh});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Dh=n("73b8");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Mh;function Nh(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement)i=!0;else if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement)o=!0;else{if(null==t.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);a=!0}if(i){const e=2;if(i&&t.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}const s=Object(Dh["b"])(b["eb"],m["a"].backendName);if(null!=s){const n={pixels:t},r={numChannels:e};return m["a"].runKernel(b["eb"],n,r)}const[u,c]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height];let l,h;if(a?l=t.getContext("2d").getImageData(0,0,u,c).data:r||n?l=t.data:(o||i)&&(null==Mh&&(Mh=document.createElement("canvas").getContext("2d")),Mh.canvas.width=u,Mh.canvas.height=c,Mh.drawImage(t,0,0,u,c),l=Mh.getImageData(0,0,u,c).data),4===e)h=new Int32Array(l);else{const t=u*c;h=new Int32Array(t*e);for(let n=0;n<t;n++)for(let t=0;t<e;++t)h[n*e+t]=l[4*n+t]}const f=[c,u,e];return bs(h,f,"int32")}async function Ih(t,e){let n=Object(x["a"])(t,"img","toPixels");if(!(t instanceof Dt["a"])){const t=n;n=ht(t,"int32"),t.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,i]=n.shape.slice(0,2),o=2===n.rank?1:n.shape[2];if(o>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);const a=await n.data(),s=Zi(n),u=Oi(n),c=await Promise.all([s.data(),u.data()]),l=c[0],h=c[1],f=l[0],d=h[0];if(s.dispose(),u.dispose(),"float32"===n.dtype){if(f<0||d>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but got range [${f} - ${d}].`)}else{if("int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);if(f<0||d>255)throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but got range [${f} - ${d}].`)}const p="float32"===n.dtype?255:1,g=new Uint8ClampedArray(i*r*4);for(let m=0;m<r*i;++m){let t,e,n,r;1===o?(t=a[m]*p,e=a[m]*p,n=a[m]*p,r=255):3===o?(t=a[3*m]*p,e=a[3*m+1]*p,n=a[3*m+2]*p,r=255):4===o&&(t=a[4*m]*p,e=a[4*m+1]*p,n=a[4*m+2]*p,r=a[4*m+3]*p);const i=4*m;g[i+0]=Math.round(t),g[i+1]=Math.round(e),g[i+2]=Math.round(n),g[i+3]=Math.round(r)}if(null!=e){e.width=i,e.height=r;const t=e.getContext("2d"),n=new ImageData(g,i,r);t.putImageData(n,0,0)}return n!==t&&n.dispose(),g}const Rh=Object(w["a"])({fromPixels_:Nh});function Fh(t,e){if(t.rank<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==e.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[e.rank-1]>t.rank)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[e.rank-1]} vs. ${t.rank}`);if(0===t.size)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const n=e.shape,r=n[n.length-1];let i=1;for(let c=0;c<n.length-1;++c)i*=n[c];const o=t.shape,a=n.slice();a.pop();let s=1;for(let c=r;c<t.rank;++c)s*=o[c],a.push(o[c]);const u=[...Object(D["computeStrides"])(t.shape).map(t=>t/s),1].slice(0,r);return[a,i,s,u]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ph{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}}class $h{constructor(){this.classNameMap={}}static getMap(){return null==$h.instance&&($h.instance=new $h),$h.instance}static register(t){$h.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function Lh(t){Object(D["assert"])(null!=t.className,()=>"Class being registered does not have the static className property defined."),Object(D["assert"])("string"===typeof t.className,()=>"className is required to be a string, but got type "+typeof t.className),Object(D["assert"])(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),$h.register(t)}
/** @license See the LICENSE file. */const zh="2.3.0";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bh extends Ph{minimize(t,e=!1,n){const{value:r,grads:i}=this.computeGradients(t,n);if(null!=n){const t=n.map(t=>({name:t.name,tensor:i[t.name]}));this.applyGradients(t)}else this.applyGradients(i);return Bt(i),e?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return di(t,e)}dispose(){null!=this.iterations_&&Bt(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Lr(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(Bh,Symbol.hasInstance,{value:t=>null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Uh extends Bh{constructor(t,e,n=null){super(),this.learningRate=t,this.rho=e,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=m["a"].backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const r=m["a"].registeredVariables[e],i=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:e+"/accum_grad",variable:zt(()=>Yn(r).variable(i))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:e+"/accum_var",variable:zt(()=>Yn(r).variable(i))});const o=Array.isArray(t)?t[n].tensor:t[e];if(null==o)return;const a=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;zt(()=>{const t=j(ce(a,this.rho),ce(ro(o),1-this.rho)),e=ce(zn(os(j(s,this.epsilon)),os(j(a,this.epsilon))),o),n=j(ce(s,this.rho),ce(ro(e),1-this.rho));a.assign(t),s.assign(n);const i=j(ce(e,-this.learningRate),r);r.assign(i)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Bt(this.accumulatedGrads.map(t=>t.variable)),Bt(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=t.length/2,n=!1;this.accumulatedGrads=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.accumulatedUpdates=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e["learningRate"],e["rho"],e["epsilon"])}}Uh.className="Adadelta",Lh(Uh);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Wh extends Bh{constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const r=m["a"].registeredVariables[e];if(null==this.accumulatedGrads[n]){const t=!1;this.accumulatedGrads[n]={originalName:e+"/accumulator",variable:zt(()=>mr(r.shape,this.initialAccumulatorValue).variable(t))}}const i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;const o=this.accumulatedGrads[n].variable;zt(()=>{const t=j(o,ro(i));o.assign(t);const e=j(ce(zn(i,os(j(t,m["a"].backend.epsilon()))),-this.learningRate),r);r.assign(e)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Bt(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=!1;this.accumulatedGrads=t.map(t=>({originalName:t.name,variable:t.tensor.variable(e)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e["learningRate"],e["initialAccumulatorValue"])}}Wh.className="Adagrad",Lh(Wh);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Vh extends Bh{constructor(t,e,n,r=null){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],zt(()=>{this.accBeta1=Lr(e).variable(),this.accBeta2=Lr(n).variable()}),null==r&&(this.epsilon=m["a"].backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);zt(()=>{const n=Ci(1,this.accBeta1),r=Ci(1,this.accBeta2);e.forEach((e,i)=>{const o=m["a"].registeredVariables[e],a=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:e+"/m",variable:zt(()=>Yn(o).variable(a))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:e+"/v",variable:zt(()=>Yn(o).variable(a))});const s=Array.isArray(t)?t[i].tensor:t[e];if(null==s)return;const u=this.accumulatedFirstMoment[i].variable,c=this.accumulatedSecondMoment[i].variable,l=j(ce(u,this.beta1),ce(s,1-this.beta1)),h=j(ce(c,this.beta2),ce(ro(s),1-this.beta2)),f=zn(l,n),d=zn(h,r);u.assign(l),c.assign(h);const p=j(ce(zn(f,j(os(d),this.epsilon)),-this.learningRate),o);o.assign(p)}),this.accBeta1.assign(ce(this.accBeta1,this.beta1)),this.accBeta2.assign(ce(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Bt(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedSecondMoment&&Bt(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),zt(()=>{this.accBeta1.assign(Fo(this.beta1,this.iterations_+1)),this.accBeta2.assign(Fo(this.beta2,this.iterations_+1))});const e=t.length/2,n=!1;this.accumulatedFirstMoment=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.accumulatedSecondMoment=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e["learningRate"],e["beta1"],e["beta2"],e["epsilon"])}}Vh.className="Adam",Lh(Vh);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Hh extends Bh{constructor(t,e,n,r=null,i=0){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],zt(()=>{this.iteration=Lr(0).variable(),this.accBeta1=Lr(e).variable()}),null==r&&(this.epsilon=m["a"].backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);zt(()=>{const n=Ci(1,this.accBeta1),r=zn(-this.learningRate,j(ce(this.iteration,this.decay),1));e.forEach((e,i)=>{const o=m["a"].registeredVariables[e],a=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:e+"/m",variable:Yn(o).variable(a)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:e+"/v",variable:Yn(o).variable(a)});const s=Array.isArray(t)?t[i].tensor:t[e];if(null==s)return;const u=this.accumulatedFirstMoment[i].variable,c=this.accumulatedWeightedInfNorm[i].variable,l=j(ce(u,this.beta1),ce(s,1-this.beta1)),h=ce(c,this.beta2),f=O(s),d=Yr(h,f);u.assign(l),c.assign(d);const p=j(ce(zn(r,n),zn(l,j(d,this.epsilon))),o);o.assign(p)}),this.iteration.assign(j(this.iteration,1)),this.accBeta1.assign(ce(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Bt(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedWeightedInfNorm&&Bt(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e["learningRate"],e["beta1"],e["beta2"],e["epsilon"],e["decay"])}}Hh.className="Adamax",Lh(Hh);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class qh extends Bh{constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const r=Array.isArray(t)?t[n].tensor:t[e];if(null==r)return;const i=m["a"].registeredVariables[e];zt(()=>{const t=j(ce(this.c,r),i);i.assign(t)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=Ut(Lr(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),0!==t.length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e["learningRate"])}}qh.className="SGD",Lh(qh);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Gh extends qh{constructor(t,e,n=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=n,this.accumulations=[],this.m=Lr(this.momentum)}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const r=m["a"].registeredVariables[e];if(null==this.accumulations[n]){const t=!1;this.accumulations[n]={originalName:e+"/momentum",variable:zt(()=>Yn(r).variable(t))}}const i=this.accumulations[n].variable,o=Array.isArray(t)?t[n].tensor:t[e];null!=o&&zt(()=>{let t;const e=j(ce(this.m,i),o);t=this.useNesterov?j(ce(this.c,j(o,ce(e,this.m))),r):j(ce(this.c,e),r),i.assign(e),r.assign(t)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Bt(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=!1;this.accumulations=t.map(t=>({originalName:t.name,variable:t.tensor.variable(e)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e["learningRate"],e["momentum"],e["useNesterov"])}}Gh.className="Momentum",Lh(Gh);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Xh extends Bh{constructor(t,e=.9,n=0,r=null,i=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=m["a"].backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const r=m["a"].registeredVariables[e],i=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:e+"/rms",variable:zt(()=>Yn(r).variable(i))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:e+"/momentum",variable:zt(()=>Yn(r).variable(i))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:e+"/mg",variable:zt(()=>Yn(r).variable(i))});const o=Array.isArray(t)?t[n].tensor:t[e];if(null==o)return;const a=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;zt(()=>{const t=j(ce(a,this.decay),ce(ro(o),1-this.decay));if(this.centered){const e=this.accumulatedMeanGrads[n].variable,i=j(ce(e,this.decay),ce(o,1-this.decay)),u=zn(ce(o,this.learningRate),os(Ci(t,j(ro(i),this.epsilon)))),c=j(ce(s,this.momentum),u);a.assign(t),e.assign(i),s.assign(c);const l=Ci(r,c);r.assign(l)}else{const t=j(ce(a,this.decay),ce(ro(o),1-this.decay)),e=j(ce(s,this.momentum),zn(ce(o,this.learningRate),os(j(t,this.epsilon))));a.assign(t),s.assign(e);const n=Ci(r,e);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Bt(this.accumulatedMeanSquares.map(t=>t.variable)),null!=this.accumulatedMeanGrads&&this.centered&&Bt(this.accumulatedMeanGrads.map(t=>t.variable)),null!=this.accumulatedMoments&&Bt(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=this.centered?t.length/3:t.length/2,n=!1;this.accumulatedMeanSquares=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.accumulatedMoments=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e["learningRate"],e["decay"],e["momentum"],e["epsilon"],e["centered"])}}Xh.className="RMSProp",Lh(Xh);var Yh=n("23bf");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kh{static sgd(t){return new qh(t)}static momentum(t,e,n=!1){return new Gh(t,e,n)}static rmsprop(t,e=.9,n=0,r=null,i=!1){return new Xh(t,e,n,r,i)}static adam(t=.001,e=.9,n=.999,r=null){return new Vh(t,e,n,r)}static adadelta(t=.001,e=.95,n=null){return new Uh(t,e,n)}static adamax(t=.002,e=.9,n=.999,r=null,i=0){return new Hh(t,e,n,r,i)}static adagrad(t,e=.1){return new Wh(t,e)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zh={sgd:Kh.sgd,momentum:Kh.momentum,adadelta:Kh.adadelta,adagrad:Kh.adagrad,rmsprop:Kh.rmsprop,adamax:Kh.adamax,adam:Kh.adam},Jh=(()=>"undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:t=>t())();
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qh(){return new Promise(t=>Jh(()=>t()))}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tf(t,e,n){const r=n*("number"===typeof t?t:t[0]),i=e*("number"===typeof t?t:t[1]);return[r,i]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ef(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const n=e.length;for(let r=0;r<n;++r)i=i.concat([t[r+1]/e[r],e[r]]);i=i.concat(t.slice(n+1))}return i}function nf(t,e,n=!0){const r=[];if(n){r.push(e);for(let n=e+1;n<t;++n)n<=2*e?(r.push(n),r.push(n-(e+1))):r.push(n)}else{const n=[],i=[];for(let r=1;r<t;++r)r>=2*e+1||r%2===1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function rf(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let o=1;o<t.length;++o)o<=e.length?r?i.push(e[o-1]*t[o]):i.push(t[o]/e[o-1]):i.push(t[o]);return i}function of(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function af(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sf=1.7580993408473768,uf=1.0507009873554805,cf=.3275911,lf=.254829592,hf=-.284496736,ff=1.421413741,df=-1.453152027,pf=1.061405429;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gf(...t){Object(v["c"])().getBool("IS_TEST")||console.warn(...t)}function mf(...t){Object(v["c"])().getBool("IS_TEST")||console.log(...t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vf(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function yf(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function bf(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function xf(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function wf(t,e){const n=t[2*e],r=t[2*e+1];return{real:n,imag:r}}function _f(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function Of(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const o=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}function Sf(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),o=Math.sin(r);return{real:i,imag:o}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cf(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();const e=qi(t.shape),r=ht(t,"float32"),i=n.complex(r,e);return e.dispose(),r.dispose(),i}if(!Object(D["hasEncodingLoss"])(t.dtype,e))return m["a"].makeTensorFromDataId(t.dataId,t.shape,e);if("complex64"===t.dtype){const r=n.real(t),i=ht(r,e);return r.dispose(),i}if("int32"===e)return n.int(t);if("bool"===e){const e=Lr(0,t.dtype),r=n.notEqual(t,e);return e.dispose(),r}throw new Error(`Error in Cast: failed to cast ${t.dtype} to ${e}`)}function kf(t,e){return m["a"].makeTensorFromDataId(t.dataId,e,t.dtype)}function Af(t,e,n){const r=(e-t)/(n-1),i=Object(D["makeZerosTypedArray"])(n,"float32");i[0]=t;for(let o=1;o<i.length;o++)i[o]=i[o-1]+r;return ha(i,"float32")}var Tf=n("7ed6");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ef(t,e,n){const r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(e=>{const o=[...i];o[n]=e;const a=Ae(t,r,o);return r[n]+=e,a})}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jf(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Xe(n,t.dtype);for(let i=0;i<r.values.length;++i){const e=r.indexToLoc(i),n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=e[r]%t.shape[r];const o=t.locToIndex(n);r.values[i]=t.values[o]}return r.toTensor()}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Df(t,e,n,r,i){const o=e[e.length-1],[a,s]=[t.length/o,o],u=Object(D["getTypedArrayFromDType"])(n,a*r),c=Object(D["getTypedArrayFromDType"])("int32",a*r);for(let h=0;h<a;h++){const e=h*s,n=t.subarray(e,e+s),i=[];for(let t=0;t<n.length;t++)i.push({value:n[t],index:t});i.sort((t,e)=>e.value-t.value);const o=h*r,a=u.subarray(o,o+r),l=c.subarray(o,o+r);for(let t=0;t<r;t++)a[t]=i[t].value,l[t]=i[t].index}const l=e.slice();return l[l.length-1]=r,[Object(re["a"])(u,l,n),Object(re["a"])(c,l,"int32")]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mf=1e-7,Nf=1e-4;class If{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class Rf{time(t){return Ff("time")}read(t){return Ff("read")}readSync(t){return Ff("readSync")}numDataIds(){return Ff("numDataIds")}disposeData(t){return Ff("disposeData")}write(t,e,n){return Ff("write")}move(t,e,n,r){return Ff("move")}memory(){return Ff("memory")}floatPrecision(){return Ff("floatPrecision")}epsilon(){return 32===this.floatPrecision()?Mf:Nf}batchMatMul(t,e,n,r){return Ff("batchMatMul")}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:i,activation:o,preluActivationWeights:a}){return Ff("fusedBatchMatMul")}slice(t,e,n){return Ff("slice")}stridedSlice(t,e,n,r){return Ff("stridedSlice")}unstack(t,e){return Ff("unstack")}reverse(t,e){return Ff("reverse")}concat(t,e){return Ff("concat")}neg(t){return Ff("neg")}add(t,e){return Ff("add")}addN(t){return Ff("addN")}subtract(t,e){return Ff("subtract")}multiply(t,e){return Ff("multiply")}realDivide(t,e){return Ff("realDivide")}floorDiv(t,e){return Ff("floorDiv")}sum(t,e){return Ff("sum")}prod(t,e){return Ff("prod")}unsortedSegmentSum(t,e,n){return Ff("unsortedSegmentSum")}argMin(t,e){return Ff("argMin")}argMax(t,e){return Ff("argMax")}equal(t,e){return Ff("equal")}notEqual(t,e){return Ff("notEqual")}less(t,e){return Ff("less")}lessEqual(t,e){return Ff("lessEqual")}greater(t,e){return Ff("greater")}greaterEqual(t,e){return Ff("greaterEqual")}logicalNot(t){return Ff("logicalNot")}logicalAnd(t,e){return Ff("logicalAnd")}logicalOr(t,e){return Ff("logicalOr")}where(t){return Ff("where")}select(t,e,n){return Ff("select")}topk(t,e,n){return Ff("topk")}min(t,e){return Ff("min")}minimum(t,e){return Ff("minimum")}mod(t,e){return Ff("mod")}max(t,e){return Ff("max")}maximum(t,e){return Ff("maximum")}all(t,e){return Ff("all")}any(t,e){return Ff("any")}squaredDifference(t,e){return Ff("squaredDifference")}ceil(t){return Ff("ceil")}floor(t){return Ff("floor")}round(t){return Ff("round")}sign(t){return Ff("sign")}isNaN(t){return Ff("isNaN")}isInf(t){return Ff("isInf")}isFinite(t){return Ff("isFinite")}pow(t,e){return Ff("pow")}exp(t){return Ff("exp")}expm1(t){return Ff("expm1")}softmax(t,e){return Ff("softmax")}log(t){return Ff("log")}log1p(t){return Ff("log1p")}sqrt(t){return Ff("sqrt")}rsqrt(t){return Ff("rsqrt")}square(t){return Ff("square")}reciprocal(t){return Ff("reciprocal")}relu(t){return Ff("relu")}relu6(t){return Ff("relu6")}prelu(t,e){return Ff("prelu")}elu(t){return Ff("elu")}eluDer(t,e){return Ff("eluDer")}selu(t){return Ff("selu")}int(t){return Ff("int")}clip(t,e,n){return Ff("clip")}abs(t){return Ff("abs")}complexAbs(t){return Ff("complexAbs")}sigmoid(t){return Ff("sigmoid")}softplus(t){return Ff("softplus")}sin(t){return Ff("sin")}cos(t){return Ff("cos")}tan(t){return Ff("tan")}asin(t){return Ff("asin")}acos(t){return Ff("acos")}atan(t){return Ff("atan")}atan2(t,e){return Ff("atan2")}sinh(t){return Ff("sinh")}cosh(t){return Ff("cosh")}tanh(t){return Ff("tanh")}asinh(t){return Ff("asinh")}acosh(t){return Ff("acosh")}atanh(t){return Ff("atanh")}erf(t){return Ff("erf")}step(t,e){return Ff("step")}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:o}){return Ff("fusedConv2d")}conv2d(t,e,n){return Ff("conv2d")}conv2dDerInput(t,e,n){return Ff("conv2dDerInput")}conv2dDerFilter(t,e,n){return Ff("conv2dDerFilter")}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:o}){return Ff("fusedDepthwiseConv2D")}depthwiseConv2D(t,e,n){return Ff("depthwiseConv2D")}depthwiseConv2DDerInput(t,e,n){return Ff("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(t,e,n){return Ff("depthwiseConv2DDerFilter")}conv3d(t,e,n){return Ff("conv3d")}conv3dDerInput(t,e,n){return Ff("conv3dDerInput")}conv3dDerFilter(t,e,n){return Ff("conv3dDerFilter")}maxPool(t,e){return Ff("maxPool")}maxPoolBackprop(t,e,n,r){return Ff("maxPoolBackprop")}avgPool(t,e){return Ff("avgPool")}avgPoolBackprop(t,e,n){return Ff("avgPoolBackprop")}avgPool3d(t,e){return Ff("avgPool3d")}avgPool3dBackprop(t,e,n){return Ff("avgPool3dBackprop")}maxPool3d(t,e){return Ff("maxPool3d")}maxPool3dBackprop(t,e,n,r){return Ff("maxPool3dBackprop")}reshape(t,e){return Ff("reshape")}cast(t,e){return Ff("cast")}tile(t,e){return Ff("tile")}pad(t,e,n){return Ff("pad")}transpose(t,e){return Ff("transpose")}gather(t,e,n){return Ff("gather")}gatherND(t,e){return Ff("gatherND")}scatterND(t,e,n){return Ff("scatterND")}batchToSpaceND(t,e,n){return Ff("batchToSpaceND")}spaceToBatchND(t,e,n){return Ff("spaceToBatchND")}resizeBilinear(t,e,n,r){return Ff("resizeBilinear")}resizeBilinearBackprop(t,e,n){return Ff("resizeBilinearBackprop")}resizeNearestNeighbor(t,e,n,r){return Ff("resizeNearestNeighbor")}resizeNearestNeighborBackprop(t,e,n){return Ff("resizeNearestNeighborBackprop")}batchNorm(t,e,n,r,i,o){return Ff("batchNorm")}localResponseNormalization4D(t,e,n,r,i){return Ff("localResponseNormalization4D")}LRNGrad(t,e,n,r,i,o,a){return Ff("LRNGrad")}multinomial(t,e,n,r){return Ff("multinomial")}oneHot(t,e,n,r){return Ff("oneHot")}cumsum(t,e,n,r){return Ff("cumsum")}nonMaxSuppression(t,e,n,r,i){return Ff("nonMaxSuppression")}fft(t){return Ff("fft")}ifft(t){return Ff("ifft")}complex(t,e){return Ff("complex")}real(t){return Ff("real")}imag(t){return Ff("imag")}cropAndResize(t,e,n,r,i,o){return Ff("cropAndResize")}depthToSpace(t,e,n){return Ff("depthToSpace")}split(t,e,n){return Ff("split")}sparseToDense(t,e,n,r){return Ff("sparseToDense")}diag(t){return Ff("diag")}fill(t,e,n){return Ff("fill")}onesLike(t){return Ff("onesLike")}zerosLike(t){return Ff("zerosLike")}linspace(t,e,n){return Ff("linspace")}dispose(){return Ff("dispose")}}function Ff(t){throw new Error(`'${t}' not yet implemented or not found in the registry. Did you forget to import the kernel?`)}
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pf={kernelName:b["a"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(t,ds(ht(n,"float32"),-1))}}},$f={kernelName:b["b"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=ro(ht(n,"float32")),r=os(Ci(Lr(1),e));return vi(zn(t,r))}}}},Lf={kernelName:b["c"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=os(Ci(ro(ht(n,"float32")),1));return zn(t,e)}}}},zf={kernelName:b["d"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Wn(n.shape,r.shape),o=()=>{let e=t;const r=Un(n.shape,i);return r.length>0&&(e=Ai(e,r)),W(e,n.shape)},a=()=>{let e=t;const n=Un(r.shape,i);return n.length>0&&(e=Ai(e,n)),W(e,r.shape)};return{a:o,b:a}}},Bf={kernelName:b["e"],saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((e,r)=>{n[r]=()=>t.clone()}),n}},Uf={kernelName:b["h"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Yn(n)}}},Wf={kernelName:b["i"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Yn(n)}}},Vf={kernelName:b["j"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zn(t,os(Ci(Lr(1),ro(ht(n,"float32")))))}}},Hf={kernelName:b["k"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=os(j(Lr(1),ro(ht(n,"float32"))));return zn(t,e)}}}},qf={kernelName:b["m"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Wn(n.shape,r.shape),o=()=>{const e=j(ro(n),ro(r));let o=ce(t,zn(r,e));const a=Un(n.shape,i);return a.length>0&&(o=Ai(o,a)),W(o,n.shape)},a=()=>{const e=j(ro(n),ro(r));let o=vi(ce(t,zn(n,e)));const a=Un(r.shape,i);return a.length>0&&(o=Ai(o,a)),W(o,r.shape)};return{a:o,b:a}}},Gf={kernelName:b["l"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zn(t,j(ro(ht(n,"float32")),1))}}},Xf={kernelName:b["n"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zn(t,Ci(Lr(1),ro(ht(n,"float32"))))}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Yf(t,e,n,r,i=[1,1,1],o,a){const s=Object(x["a"])(t,"dy","avgPool3dBackprop"),u=Object(x["a"])(e,"input","avgPool3dBackprop");let c=s,l=u,h=!1;4===u.rank&&(h=!0,c=W(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),l=W(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),D["assert"](5===c.rank,()=>"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."),D["assert"](5===l.rank,()=>"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."),D["assert"](At(r,i),()=>`Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`),null!=a&&D["assert"](D["isInt"](o),()=>`Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode ${a} but got pad ${o}.`);const f=t=>{const e=pt(l.shape,n,r,i,o,a);return t.avgPool3dBackprop(c,l,e)},d={dy:c,input:l},p={filterSize:n,strides:r,dilations:i,pad:o,dimRoundingMode:a},g=m["a"].runKernelFunc(f,d,null,b["q"],p);return h?W(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const Kf=Object(w["a"])({avgPool3dBackprop_:Yf}),Zf={kernelName:b["p"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:o,dilations:a,pad:s,dimRoundingMode:u}=n,c=null==a?[1,1,1]:a;return{x:()=>Kf(t,r,i,o,c,s,u)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Jf(t,e,n,r,i){const o=Object(x["a"])(t,"dy","avgPoolBackprop"),a=Object(x["a"])(e,"input","avgPoolBackprop");D["assert"](a.rank===o.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${o.rank})`);let s=a,u=o,c=!1;3===a.rank&&(c=!0,s=W(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=W(o,[1,o.shape[0],o.shape[1],o.shape[2]])),D["assert"](4===u.rank,()=>"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."),D["assert"](4===s.rank,()=>"Error in avgPoolBackprop: input must be rank 4 but got rank "+s.rank+".");const l=t=>{const e=dt(s.shape,n,r,1,i);return t.avgPoolBackprop(u,s,e)},h={dy:u,input:s},f={filterSize:n,strides:r,pad:i},d=m["a"].runKernelFunc(l,h,null,b["r"],f);return c?W(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Qf=Object(w["a"])({avgPoolBackprop_:Jf}),td={kernelName:b["o"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:o,pad:a}=n;return{x:()=>Qf(t,r,i,o,a)}}},ed={kernelName:b["s"],inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:o,transposeB:a}=n;return o||a?!o&&a?{a:()=>se(t,i,!1,!1),b:()=>se(t,r,!0,!1)}:o&&!a?{a:()=>se(i,t,!1,!0),b:()=>se(r,t,!1,!1)}:{a:()=>se(i,t,!0,!0),b:()=>se(t,r,!0,!0)}:{a:()=>se(t,i,!1,!0),b:()=>se(r,t,!0,!1)}}},nd={kernelName:b["t"],gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>jo(t,r,i)}}},rd={kernelName:b["u"],gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,o=r.shape,a=Array.from(o);for(let u=i.length-1;u>=0;u--)if(i[u]===o[u])a[u]=1;else if(1!==i[u])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${o}].`);const s=[];for(let u=0;u<a.length;u++)a[u]>1&&s.push(u);return{x:()=>Ai(t,s,!0)}}},id={kernelName:b["v"],gradFunc:t=>({x:()=>t.clone()})},od={kernelName:b["w"],gradFunc:t=>({x:()=>Yn(t)})},ad={kernelName:b["x"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:o}=n;return{x:()=>Gn(Ni(Er(r,i),ei(r,o)),t,Yn(t))}}},sd={kernelName:b["z"],saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(t=>t.shape),{axis:i}=n,o=Object(D["parseAxisParam"])(i,e[0].shape)[0],a=r.map(t=>t[o]),s=Ea(t,a,o);return s.map(t=>()=>t)}},ud={kernelName:b["A"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:o,strides:a,pad:s,dataFormat:u}=n;return D["assert"](kt(o),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`),{x:()=>pn(r.shape,t,i,a,s,u),filter:()=>Fu(r,t,i.shape,a,s,u)}}},cd={kernelName:b["C"],inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:o,pad:a,dataFormat:s,dimRoundingMode:u}=n;return{dy:()=>ln(t,i,o,a,s,1,u),filter:()=>Fu(t,r,i.shape,o,a,s,u)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ld(t,e,n,r,i){let o=t;4===t.rank&&(o=W(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=e;4===a.rank&&(a=W(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),D["assert"](5===o.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+o.shape+"."),D["assert"](5===a.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+a.shape+"."),D["assert"](5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."),D["assert"](o.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`),D["assert"](a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const s=t=>{const e=1,s=mt(o.shape,n,r,e,i);return t.conv3dDerFilter(o,a,s)},u={x:o,y:a},c={strides:r,pad:i};return m["a"].runKernelFunc(s,u,null,b["E"],c)}const hd=Object(w["a"])({conv3DBackpropFilter_:ld}),fd={kernelName:b["D"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:o}=n;D["assert"](kt(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,s]=e;return{x:()=>xn(a.shape,t,s,i,o),filter:()=>hd(a,t,s.shape,i,o)}}},dd={kernelName:b["G"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(vi(Ha(ht(n,"float32"))),t)}}},pd={kernelName:b["H"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(Ga(ht(n,"float32")),t)}}},gd={kernelName:b["J"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:o,reverse:a}=n;return{x:()=>{const e=L([i],r.rank);let n=Tn(t,i,o,!a);return null!=e&&(n=H(n,e)),n}}}},md={kernelName:b["L"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:o,dimRoundingMode:a}=n,s=null==r?[1,1]:r;D["assert"](kt(s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[u,c]=e;D["assert"](4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),D["assert"](4===c.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),D["assert"](u.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),D["assert"](At(i,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`),null!=a&&D["assert"](D["isInt"](o),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${a} but got pad ${o}.`);const l=gt(u.shape,c.shape,i,s,o,a,!0);return{x:()=>qu(u.shape,t,c,l),filter:()=>Vu(u,t,c.shape,l)}}},vd={kernelName:b["P"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,o={x:r,filter:i,dy:t},a={x:r,filter:i,dy:t};return{x:()=>m["a"].runKernel(b["R"],o,n),filter:()=>m["a"].runKernel(b["Q"],a,n)}}},yd={kernelName:b["S"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Wn(n.shape,r.shape),o=()=>{const e=zn(t,ht(r,"float32")),o=Un(n.shape,i);return o.length>0?W(Ai(e,o),n.shape):e},a=()=>{let e=ce(t,ht(n,"float32"));const o=Un(r.shape,i);o.length>0&&(e=W(Ai(e,o),r.shape));const a=ro(r);return vi(zn(e,ht(a,"float32")))};return{a:o,b:a}}},bd={kernelName:b["T"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r=e=>e.eluDer(t,n),i={dy:t,y:n};return{x:()=>m["a"].runKernelFunc(r,i,null,b["U"])}}},xd={kernelName:b["W"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ce(or(vi(ro(n))),2/Math.sqrt(Math.PI));return{x:()=>ce(t,r)}}},wd={kernelName:b["X"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(t,n)}}},_d={kernelName:b["Y"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(t,or(n))}}},Od={kernelName:b["cb"],gradFunc:t=>({x:()=>Yn(t)})},Sd={kernelName:b["db"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Wn(n.shape,r.shape),o=()=>{const e=zn(t,ht(r,"float32")),o=Un(n.shape,i);return o.length>0?W(Ai(e,o),n.shape):e},a=()=>{let e=ce(t,ht(n,"float32"));const o=Un(r.shape,i);o.length>0&&(e=W(Ai(e,o),r.shape));const a=ro(r);return vi(zn(e,ht(a,"float32")))};return{a:o,b:a}}},Cd={kernelName:b["fb"],inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,o,a,s]=e,u=null==s?Lr(1):s,c=Un(o.shape,i.shape),l=[];if(1===o.rank){for(let t=0;t<i.shape.length-1;++t)l.push(i.shape[t]);l.push(1)}const h=Ci(i,o),f=ce(t,u),d=Ra(j(a,Lr(r))),p=ce(ce(ce(d,d),d),Lr(-.5)),g=()=>1===o.rank?W(ce(ce(t,hr(W(d,[1,1,1,o.shape[0]]),l)),u),i.shape):W(ce(ce(t,d),u),i.shape),m=()=>{let t=ce(ce(d,Lr(-1)),f);return 1===o.rank&&(t=Ai(t,c)),W(t,o.shape)},v=()=>{let t=ce(ce(p,h),f);return 1===o.rank&&(t=Ai(t,c)),W(t,o.shape)},y=()=>{const e=ce(h,d);let n=ce(t,e);return 1===o.rank&&(n=Ai(n,c)),W(n,o.shape)},b=()=>{let e=t;return 1===o.rank&&(e=Ai(e,c)),W(e,o.shape)};return{x:g,mean:m,variance:v,scale:y,offset:b}}},kd={kernelName:b["jb"],inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:o}=n,a=Object(D["parseAxisParam"])(o,r.shape)[0],s=()=>{const e=r.shape,n=i.size,s=e.slice(0,a),u=s.length,c=e.slice(o,e.length).slice(1),l=c.length,h=Ad(0,u),f=Ad(u+1,u+1+l),d=Td([s,[n],c]),p=W(t,d),g=W(i,[n]),m=Td([[u],h,f]),v=H(p,m);let y=Ts(v,g,r.shape[a]);const b=z(m);return y=H(y,b),y};return{x:s,indices:()=>i}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ad(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function Td(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ed={kernelName:b["lb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Yn(n),b:()=>Yn(r)}}},jd={kernelName:b["nb"],gradFunc:t=>({x:()=>ht(t,"float32")})},Dd={kernelName:b["pb"],gradFunc:t=>({x:()=>Yn(t)})},Md={kernelName:b["qb"],gradFunc:t=>({x:()=>Yn(t)})},Nd={kernelName:b["rb"],gradFunc:t=>({x:()=>Yn(t)})},Id={kernelName:b["yb"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zn(t,j(n,1))}}},Rd={kernelName:b["xb"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zn(t,ht(n,"float32"))}}},Fd={kernelName:b["zb"],inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const e=!0,n=or(r);return Ci(t,ce(Ai(t,i,e),n))}}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Pd(t,e,n,r=5,i=1,o=1,a=.5){const s=s=>s.LRNGrad(n,t,e,r,i,o,a),u={x:t,y:e,dy:n},c={depthRadius:r,bias:i,alpha:o,beta:a};return m["a"].runKernelFunc(s,u,null,b["tb"],c)}const $d=Object(w["a"])({localResponseNormalizationBackprop_:Pd}),Ld={kernelName:b["sb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:o,bias:a,alpha:s,beta:u}=n;return{x:()=>$d(r,i,t,o,a,s,u)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zd(t,e,n,r,i){return e.rank<n.rank&&(e=W(e,P(e.shape,r))),t.rank<n.rank&&(t=W(t,P(t.shape,r))),{x:()=>{const r=ce(t,ht(Hn(n,e),t.dtype));return null==i?r:H(r,i)}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bd={kernelName:b["Db"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,[o,a]=e,s=D["parseAxisParam"](i,o.shape),u=L(s,o.rank),c=zd(t,a,o,s,u);return{x:()=>{let t=c["x"]();return null!=u&&(t=H(t)),t}}}},Ud={kernelName:b["Jb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=()=>ce(t,ht(Er(n,r),"float32")),o=()=>ce(t,ht(Qr(n,r),"float32"));return{a:i,b:o}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Wd(t,e,n,r,i,o=[1,1,1],a,s){const u=Object(x["a"])(t,"dy","maxPool3dBackprop"),c=Object(x["a"])(e,"input","maxPool3dBackprop"),l=Object(x["a"])(n,"output","maxPool3dBackprop");let h=u,f=c,d=l,p=!1;4===c.rank&&(p=!0,h=W(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=W(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),d=W(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),D["assert"](5===h.rank,()=>"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+h.rank+"."),D["assert"](5===f.rank,()=>"Error in maxPool3dBackprop: input must be rank 5 but got rank "+f.rank+"."),D["assert"](5===d.rank,()=>"Error in maxPool3dBackprop: output must be rank 5 but got rank "+d.rank+"."),D["assert"](At(i,o),()=>`Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`),null!=s&&D["assert"](D["isInt"](a),()=>`Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode ${s} but got pad ${a}.`);const g=t=>{const e=pt(f.shape,r,i,o,a,s);return t.maxPool3dBackprop(h,f,d,e)},v={dy:h,input:f,output:d},y={filterSize:r,strides:i,dilations:o,pad:a,dimRoundingMode:s},w=m["a"].runKernelFunc(g,v,null,b["Gb"],y);return p?W(w,[w.shape[1],w.shape[2],w.shape[3],w.shape[4]]):w}const Vd=Object(w["a"])({maxPool3dBackprop_:Wd}),Hd={kernelName:b["Fb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:o,strides:a,dilations:s,pad:u,dimRoundingMode:c}=n,l=null==s?[1,1,1]:s;return{x:()=>Vd(t,r,i,o,a,l,u,c)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qd(t,e,n,r,i,o,a){const s=Object(x["a"])(t,"dy","maxPoolBackprop"),u=Object(x["a"])(e,"input","maxPoolBackprop"),c=Object(x["a"])(n,"output","maxPoolBackprop");D["assert"](u.rank===s.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${s.rank})`),D["assert"](4===s.rank,()=>"Error in maxPoolBackprop: dy must be rank 4 but got rank "+s.rank+"."),D["assert"](4===u.rank,()=>"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+"."),null!=a&&D["assert"](D["isInt"](o),()=>`Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode ${a} but got pad ${o}.`);const l=t=>{const e=dt(u.shape,r,i,1,o,a);return t.maxPoolBackprop(s,u,c,e)},h={dy:s,input:u,output:c},f={filterSize:r,strides:i,pad:o,dimRoundingMode:a};return m["a"].runKernelFunc(l,h,null,b["Hb"],f)}const Gd=Object(w["a"])({maxPoolBackprop_:qd}),Xd={kernelName:b["Eb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:o,strides:a,pad:s}=n;return{x:()=>Gd(t,r,i,o,a,s)}}},Yd={kernelName:b["Lb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[o,a]=e,s=D["parseAxisParam"](i,o.shape),u=L(s,o.rank),c=zd(t,a,o,s,u);return{x:()=>{let t=c["x"]();return null!=u&&(t=H(t)),t}}}},Kd={kernelName:b["Mb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=()=>ce(t,ht(ei(n,r),"float32")),o=()=>ce(t,ht(Ar(n,r),"float32"));return{a:i,b:o}}},Zd={kernelName:b["Nb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Wn(n.shape,r.shape),o=()=>{const e=Un(n.shape,i);return e.length>0?W(Ai(t,e),n.shape):t},a=()=>{const e=ce(t,vi(yr(zn(n,r)))),o=Un(r.shape,i);return o.length>0?W(Ai(e,o),r.shape):e};return{a:o,b:a}}},Jd={kernelName:b["Ob"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Wn(n.shape,r.shape),o=()=>{const e=ce(t,ht(r,"float32")),o=Un(n.shape,i);return o.length>0?W(Ai(e,o),n.shape):e},a=()=>{const e=ce(t,ht(n,"float32")),o=Un(r.shape,i);return o.length>0?W(Ai(e,o),r.shape):e};return{a:o,b:a}}},Qd={kernelName:b["Pb"],gradFunc:t=>({x:()=>vi(t)})},tp={kernelName:b["Ub"],inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>qi(n.shape,"float32")}}},ep={kernelName:b["Vb"],gradFunc:t=>({x:()=>Yn(t)})},np={kernelName:b["Wb"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,o=i.map(t=>t[0]);return{x:()=>Ae(t,o,r.shape)}}},rp={kernelName:b["Yb"],inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,o=n,a=r,s=Wn(o.shape,a.shape),u=()=>{const e=ht(a,"float32");let n=ce(t,ce(e,Fo(o,Ci(e,Lr(1)))));const r=Un(o.shape,s);return r.length>0&&(n=Ai(n,r)),W(n,o.shape)},c=()=>{const e=Ar(o,0),n=Gn(e,ai(o),Yn(o));let r=ce(t,ce(i,n));const u=Un(a.shape,s);return u.length>0&&(r=Ai(r,u)),W(r,a.shape)};return{a:u,b:c}}},ip={kernelName:b["Zb"],inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=Ar(n,0);return{x:()=>Gn(i,t,ce(t,r)),alpha:()=>{let e=Gn(i,Yn(t),ce(t,n));const o=Un(r.shape,t.shape);return o.length>0&&(e=Ai(e,o)),W(e,r.shape)}}}},op={kernelName:b["dc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zn(t,vi(ro(n)))}}},ap={kernelName:b["fc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ce(ei(n,6),ds(n));return{x:()=>ce(t,ht(r,"float32"))}}},sp={kernelName:b["ec"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(t,ht(ds(n),"float32"))}}},up={kernelName:b["gc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>W(t,n.shape)}}},cp={kernelName:b["hc"],inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i=e=>{const{alignCorners:i}=n;return e.resizeBilinearBackprop(t,r,i)},o={images:r},a=()=>m["a"].runKernelFunc(i,o,null,b["ic"],n);return{images:a}}},lp={kernelName:b["jc"],inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i=e=>{const{alignCorners:i}=n;return e.resizeNearestNeighborBackprop(t,r,i)},o={images:r},a=()=>m["a"].runKernelFunc(i,o,null,b["kc"],n);return{images:a}}},hp={kernelName:b["lc"],gradFunc:(t,e,n)=>{const{dims:r}=n,i=Object(D["parseAxisParam"])(r,t.shape);return{x:()=>Pr(t,i)}}},fp={kernelName:b["nc"],gradFunc:t=>({x:()=>Yn(t)})},dp={kernelName:b["oc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vi(zn(t,ce(Fo(n,1.5),2)))}}},pp={kernelName:b["qc"],inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>ht(Yn(n),"float32"),t:()=>ce(t,ht(n,t.dtype)),e:()=>ce(t,ht(Ri(n),t.dtype))}}},gp={kernelName:b["rc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Ar(n,Lr(0)),r=Lr(sf),i=Lr(uf),o=ce(t,i),a=ce(ce(t,r),or(ht(n,"float32")));return Gn(e,o,a)}}}},mp={kernelName:b["sc"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(t,ce(n,Ci(Lr(1),n)))}}},vp={kernelName:b["tc"],gradFunc:t=>({x:()=>Yn(t)})},yp={kernelName:b["uc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(Sn(ht(n,"float32")),t)}}},bp={kernelName:b["vc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(kn(ht(n,"float32")),t)}}},xp={kernelName:b["wc"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:o}=n,a=r.shape,[s,u]=Ce(r,i,o),c=[];for(let l=0;l<t.rank;l++)c.push([s[l],a[l]-s[l]-u[l]]);return{x:()=>xo(t,c)}}},wp={kernelName:b["xc"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,o=!0,a=ce(t,r);return{logits:()=>Ci(a,ce(Ai(a,[i],o),r))}}},_p={kernelName:b["yc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(t,he(n))}}},Op={kernelName:b["zc"],gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>Ne(t,r,i)}}},Sp={kernelName:b["Bc"],gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>oe(t,r)}}},Cp={kernelName:b["Cc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zn(t,ce(os(ht(n,"float32")),2))}}},kp={kernelName:b["Dc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(t,ce(ht(n,"float32"),2))}}},Ap={kernelName:b["Ec"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Lr(2),o=()=>ce(t,ce(i,Ci(n,r))),a=()=>ce(t,ce(i,Ci(r,n)));return{a:o,b:a}}},Tp={kernelName:b["Fc"],gradFunc:t=>({x:()=>Yn(t)})},Ep={kernelName:b["Hc"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Wn(n.shape,r.shape),o=()=>{let e=t;const r=Un(n.shape,i);return r.length>0&&(e=Ai(e,r)),W(e,n.shape)},a=()=>{let e=t;const n=Un(r.shape,i);return n.length>0&&(e=Ai(e,n)),W(vi(e),r.shape)};return{a:o,b:a}}},jp={kernelName:b["Ic"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:o}=n,a=Object(D["parseAxisParam"])(o,r.shape);a.forEach(t=>{i[t]=1});const s=W(t,i),u=ce(s,Gi(r.shape,"float32"));return{x:()=>u}}},Dp={kernelName:b["Jc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zn(t,ro(Sn(n)))}}},Mp={kernelName:b["Kc"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(Ci(Lr(1),ro(n)),t)}}},Np={kernelName:b["Lc"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n,o=()=>{let e=Yn(r);if(1===r.rank)for(let n=0;n<i[0];++n)e=j(e,Ae(t,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)e=j(e,Ae(t,[n*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let a=0;a<i[2];++a)e=j(e,Ae(t,[n*r.shape[0],o*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let a=0;a<i[2];++a)for(let s=0;s<i[3];++s)e=j(e,Ae(t,[n*r.shape[0],o*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return e};return{x:o}}},Ip={kernelName:b["Nc"],gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,o=z(i);return{x:()=>H(t,o)}}},Rp={kernelName:b["Oc"],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>hs(t,i)}}},Fp={kernelName:b["Pc"],inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e,r=()=>Pp(t,n);return{x:r}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pp(t,e){const n=Yr(e,Yn(e)),r=Cr(t,n);let i=Er(e,Lr(0,"int32"));const o=r.rank-i.rank;for(let s=0;s<o;++s)i=sr(i,s+1);i=Ni(i,Gi(r.shape,"bool"));const a=Yn(r);return Gn(i,r,a)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $p={kernelName:b["Qc"],gradFunc:t=>({x:()=>Yn(t)})},Lp=[Pf,$f,Lf,zf,Bf,Uf,Wf,Vf,Hf,qf,Gf,Xf,Zf,td,ed,nd,rd,id,od,ad,sd,cd,ud,fd,dd,pd,gd,md,vd,yd,bd,xd,wd,_d,Sd,Od,Cd,kd,Ed,jd,Dd,Md,Nd,Id,Rd,Fd,Ld,Bd,Bd,Ud,Hd,Xd,Yd,Kd,Zd,Jd,Qd,tp,ep,np,np,rp,ip,op,ap,sp,up,cp,lp,hp,fp,dp,pp,gp,mp,vp,yp,bp,xp,wp,_p,Op,Op,Sp,Sp,Cp,Ap,kp,Tp,Ep,jp,Dp,Mp,Np,Ip,Rp,Fp,$p];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */for(const Bp of Lp)Object(Dh["d"])(Bp);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Dt["a"].prototype.abs=function(){return this.throwIfDisposed(),O(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.acos=function(){return this.throwIfDisposed(),C(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.acosh=function(){return this.throwIfDisposed(),A(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.addStrict=function(t){return this.throwIfDisposed(),iu(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.add=function(t){return this.throwIfDisposed(),j(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.all=function(t,e){return this.throwIfDisposed(),G(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.any=function(t,e){return this.throwIfDisposed(),Y(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.argMax=function(t){return this.throwIfDisposed(),Z(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.argMin=function(t){return this.throwIfDisposed(),Q(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.asScalar=function(){return this.throwIfDisposed(),Object(D["assert"])(1===this.size,()=>"The array must have only 1 element."),W(this,[])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.asType=function(t){return this.throwIfDisposed(),ht(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.as1D=function(){return this.throwIfDisposed(),W(this,[this.size])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.as2D=function(t,e){return this.throwIfDisposed(),W(this,[t,e])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.as3D=function(t,e,n){return this.throwIfDisposed(),W(this,[t,e,n])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),W(this,[t,e,n,r])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),W(this,[t,e,n,r,i])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.asin=function(){return this.throwIfDisposed(),et(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.asinh=function(){return this.throwIfDisposed(),rt(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.atan=function(){return this.throwIfDisposed(),ot(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.atan2=function(t){return this.throwIfDisposed(),st(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.atanh=function(){return this.throwIfDisposed(),ct(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),jt(this,t,e,n,r)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Ne(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),Pe(this,t,e,n,r,i)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.broadcastTo=function(t){return this.throwIfDisposed(),Ge(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.cast=function(t){return this.throwIfDisposed(),ht(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.ceil=function(){return this.throwIfDisposed(),Ke(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Je(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Dt["a"]&&(t=[t]),oe([this,...t],e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.conv1d=function(t,e,n,r,i,o){return this.throwIfDisposed(),fn(this,t,e,n,r,i,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),mn(this,t,e,n,r,i)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.conv2d=function(t,e,n,r,i,o){return this.throwIfDisposed(),ln(this,t,e,n,r,i,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.cos=function(){return this.throwIfDisposed(),Sn(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.cosh=function(){return this.throwIfDisposed(),kn(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),Tn(this,t,e,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),jn(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.depthwiseConv2D=function(t,e,n,r,i,o){return Rt("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),Mn(this,t,e,n,r,i,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.depthwiseConv2d=function(t,e,n,r,i,o){return this.throwIfDisposed(),Mn(this,t,e,n,r,i,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),Fn(this,t,e,n,r,i)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.divNoNan=function(t){return this.throwIfDisposed(),Zn(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.divStrict=function(t){return this.throwIfDisposed(),ou(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.div=function(t){return this.throwIfDisposed(),zn(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.dot=function(t){return this.throwIfDisposed(),Qn(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.elu=function(){return this.throwIfDisposed(),er(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.equalStrict=function(t){return this.throwIfDisposed(),Ws(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.equal=function(t){return this.throwIfDisposed(),Hn(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.erf=function(){return this.throwIfDisposed(),rr(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.exp=function(){return this.throwIfDisposed(),or(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.expandDims=function(t){return this.throwIfDisposed(),sr(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.expm1=function(){return this.throwIfDisposed(),cr(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.fft=function(){return this.throwIfDisposed(),gr(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.flatten=function(){return this.throwIfDisposed(),W(this,[this.size])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.floor=function(){return this.throwIfDisposed(),yr(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.floorDiv=function(t){return this.throwIfDisposed(),$n(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.gather=function(t,e){return this.throwIfDisposed(),Cr(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Vs(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.greaterEqual=function(t){return this.throwIfDisposed(),Er(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.greaterStrict=function(t){return this.throwIfDisposed(),Hs(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.greater=function(t){return this.throwIfDisposed(),Ar(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.ifft=function(){return this.throwIfDisposed(),Dr(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.irfft=function(){return this.throwIfDisposed(),Br(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.isFinite=function(){return this.throwIfDisposed(),Wr(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.isInf=function(){return this.throwIfDisposed(),Hr(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.isNaN=function(){return this.throwIfDisposed(),Gr(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.leakyRelu=function(t){return this.throwIfDisposed(),Zr(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),qs(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.lessEqual=function(t){return this.throwIfDisposed(),ei(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.lessStrict=function(t){return this.throwIfDisposed(),Gs(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.less=function(t){return this.throwIfDisposed(),Qr(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),ii(this,t,e,n,r)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.logSigmoid=function(){return this.throwIfDisposed(),wi(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.logSoftmax=function(t){return this.throwIfDisposed(),Ei(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Di(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.log=function(){return this.throwIfDisposed(),ai(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.log1p=function(){return this.throwIfDisposed(),ui(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.logicalAnd=function(t){return this.throwIfDisposed(),Ni(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.logicalNot=function(){return this.throwIfDisposed(),Ri(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.logicalOr=function(t){return this.throwIfDisposed(),Pi(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.logicalXor=function(t){return this.throwIfDisposed(),Li(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.matMul=function(t,e,n){return this.throwIfDisposed(),se(this,t,e,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Bi(this,t,e,n,r)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.max=function(t,e){return this.throwIfDisposed(),Oi(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.maximumStrict=function(t){return this.throwIfDisposed(),au(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.maximum=function(t){return this.throwIfDisposed(),Yr(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.mean=function(t,e){return this.throwIfDisposed(),Yi(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.min=function(t,e){return this.throwIfDisposed(),Zi(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.minimumStrict=function(t){return this.throwIfDisposed(),su(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.minimum=function(t){return this.throwIfDisposed(),Qi(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.modStrict=function(t){return this.throwIfDisposed(),uu(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.mod=function(t){return this.throwIfDisposed(),eo(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.mulStrict=function(t){return this.throwIfDisposed(),cu(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.mul=function(t){return this.throwIfDisposed(),ce(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.neg=function(){return this.throwIfDisposed(),vi(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.norm=function(t,e,n){return this.throwIfDisposed(),gu(this,t,e,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Xs(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.notEqual=function(t){return this.throwIfDisposed(),ho(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),po(this,t,e,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.onesLike=function(){return this.throwIfDisposed(),mo(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.pad=function(t,e){return this.throwIfDisposed(),xo(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.pool=function(t,e,n,r,i){return this.throwIfDisposed(),Io(this,t,e,n,r,i)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.powStrict=function(t){return this.throwIfDisposed(),lu(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.pow=function(t){return this.throwIfDisposed(),Fo(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.prelu=function(t){return this.throwIfDisposed(),$o(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.prod=function(t,e){return this.throwIfDisposed(),Bo(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.reciprocal=function(){return this.throwIfDisposed(),pa(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.relu=function(){return this.throwIfDisposed(),ma(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.relu6=function(){return this.throwIfDisposed(),ya(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.reshapeAs=function(t){return this.throwIfDisposed(),W(this,t.shape)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.reshape=function(t){return this.throwIfDisposed(),W(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.resizeBilinear=function(t,e){return this.throwIfDisposed(),Fc(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.resizeNearestNeighbor=function(t,e){return this.throwIfDisposed(),$c(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.reverse=function(t){return this.throwIfDisposed(),Pr(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.rfft=function(){return this.throwIfDisposed(),Da(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.round=function(){return this.throwIfDisposed(),Na(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.rsqrt=function(){return this.throwIfDisposed(),Ra(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.selu=function(){return this.throwIfDisposed(),Pa(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.separableConv2d=function(t,e,n,r,i,o){return this.throwIfDisposed(),La(this,t,e,n,r,i,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.sigmoid=function(){return this.throwIfDisposed(),he(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.sign=function(){return this.throwIfDisposed(),Wa(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.sin=function(){return this.throwIfDisposed(),Ha(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.sinh=function(){return this.throwIfDisposed(),Ga(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.slice=function(t,e){return this.throwIfDisposed(),Ae(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.softmax=function(t){return this.throwIfDisposed(),rs(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.softplus=function(){return this.throwIfDisposed(),bi(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),jo(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.split=function(t,e){return this.throwIfDisposed(),Ea(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.sqrt=function(){return this.throwIfDisposed(),os(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.square=function(){return this.throwIfDisposed(),ro(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.squaredDifference=function(t){return this.throwIfDisposed(),ss(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),hu(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.squeeze=function(t){return this.throwIfDisposed(),cs(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Dt["a"]?[this,t]:[this,...t];return hs(n,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.step=function(t){return this.throwIfDisposed(),ds(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.stridedSlice=function(t,e,n,r,i,o,a,s){return this.throwIfDisposed(),gs(this,t,e,n,r,i,o,a,s)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.subStrict=function(t){return this.throwIfDisposed(),fu(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.sub=function(t){return this.throwIfDisposed(),Ci(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.sum=function(t,e){return this.throwIfDisposed(),Ai(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.tan=function(){return this.throwIfDisposed(),vs(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.tanh=function(){return this.throwIfDisposed(),Ee(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.tile=function(t){return this.throwIfDisposed(),hr(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.toBool=function(){return this.throwIfDisposed(),ht(this,"bool")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.toFloat=function(){return this.throwIfDisposed(),ht(this,"float32")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.toInt=function(){return this.throwIfDisposed(),ht(this,"int32")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.topk=function(t,e){return this.throwIfDisposed(),Ss(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.transpose=function(t){return this.throwIfDisposed(),H(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Ts(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.unstack=function(t){return this.throwIfDisposed(),js(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.where=function(t,e){return this.throwIfDisposed(),Gn(t,this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Dt["a"].prototype.zerosLike=function(){return this.throwIfDisposed(),Yn(this)}},fab2:function(t,e,n){var r=n("6d8b"),i=r.retrieve,o=r.defaults,a=r.extend,s=r.each,u=n("eda2"),c=n("2306"),l=n("4319"),h=n("3842"),f=h.isRadianAroundZero,d=h.remRadian,p=n("a15a"),g=p.createSymbol,m=n("1687"),v=n("401b"),y=v.applyTransform,b=n("697e"),x=b.shouldShowAllLabels,w=Math.PI,_=function(t,e){this.opt=e,this.axisModel=t,o(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new c.Group;var n=new c.Group({position:e.position.slice(),rotation:e.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n};_.prototype={constructor:_,hasBuilder:function(t){return!!O[t]},add:function(t){O[t].call(this)},getGroup:function(){return this.group}};var O={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),r=this._transform,i=[n[0],0],o=[n[1],0];r&&(y(i,i,r),y(o,o,r));var u=a({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new c.Line({anid:"line",subPixelOptimize:!0,shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:u,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1}));var l=e.get("axisLine.symbol"),h=e.get("axisLine.symbolSize"),f=e.get("axisLine.symbolOffset")||0;if("number"===typeof f&&(f=[f,f]),null!=l){"string"===typeof l&&(l=[l,l]),"string"!==typeof h&&"number"!==typeof h||(h=[h,h]);var d=h[0],p=h[1];s([{rotate:t.rotation+Math.PI/2,offset:f[0],r:0},{rotate:t.rotation-Math.PI/2,offset:f[1],r:Math.sqrt((i[0]-o[0])*(i[0]-o[0])+(i[1]-o[1])*(i[1]-o[1]))}],(function(e,n){if("none"!==l[n]&&null!=l[n]){var r=g(l[n],-d/2,-p/2,d,p,u.stroke,!0),o=e.r+e.offset,a=[i[0]+o*Math.cos(t.rotation),i[1]-o*Math.sin(t.rotation)];r.attr({rotation:e.rotate,position:a,silent:!0,z2:11}),this.group.add(r)}}),this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,n=N(this,t,e),r=R(this,t,e);T(t,r,n),I(this,t,e)},axisName:function(){var t=this.opt,e=this.axisModel,n=i(t.axisName,e.get("name"));if(n){var r,o,s=e.get("nameLocation"),l=t.nameDirection,h=e.getModel("nameTextStyle"),f=e.get("nameGap")||0,d=this.axisModel.axis.getExtent(),p=d[0]>d[1]?-1:1,g=["start"===s?d[0]-p*f:"end"===s?d[1]+p*f:(d[0]+d[1])/2,D(s)?t.labelOffset+l*f:0],m=e.get("nameRotate");null!=m&&(m=m*w/180),D(s)?r=C(t.rotation,null!=m?m:t.rotation,l):(r=k(t,s,m||0,d),o=t.axisNameAvailableWidth,null!=o&&(o=Math.abs(o/Math.sin(r.rotation)),!isFinite(o)&&(o=null)));var v=h.getFont(),y=e.get("nameTruncate",!0)||{},b=y.ellipsis,x=i(t.nameTruncateMaxWidth,y.maxWidth,o),_=null!=b&&null!=x?u.truncateText(n,x,v,b,{minChar:2,placeholder:y.placeholder}):n,O=e.get("tooltip",!0),T=e.mainType,E={componentType:T,name:n,$vars:["name"]};E[T+"Index"]=e.componentIndex;var j=new c.Text({anid:"name",__fullText:n,__truncatedText:_,position:g,rotation:r.rotation,silent:A(e),z2:1,tooltip:O&&O.show?a({content:n,formatter:function(){return n},formatterParams:E},O):null});c.setTextStyle(j.style,h,{text:_,textFont:v,textFill:h.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:h.get("align")||r.textAlign,textVerticalAlign:h.get("verticalAlign")||r.textVerticalAlign}),e.get("triggerEvent")&&(j.eventData=S(e),j.eventData.targetType="axisName",j.eventData.name=n),this._dumbGroup.add(j),j.updateTransform(),this.group.add(j),j.decomposeTransform()}}},S=_.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},C=_.innerTextLayout=function(t,e,n){var r,i,o=d(e-t);return f(o)?(i=n>0?"top":"bottom",r="center"):f(o-w)?(i=n>0?"bottom":"top",r="center"):(i="middle",r=o>0&&o<w?n>0?"right":"left":n>0?"left":"right"),{rotation:o,textAlign:r,textVerticalAlign:i}};function k(t,e,n,r){var i,o,a=d(n-t.rotation),s=r[0]>r[1],u="start"===e&&!s||"start"!==e&&s;return f(a-w/2)?(o=u?"bottom":"top",i="center"):f(a-1.5*w)?(o=u?"top":"bottom",i="center"):(o="middle",i=a<1.5*w&&a>w/2?u?"left":"right":u?"right":"left"),{rotation:a,textAlign:i,textVerticalAlign:o}}var A=_.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)};function T(t,e,n){if(!x(t.axis)){var r=t.get("axisLabel.showMinLabel"),i=t.get("axisLabel.showMaxLabel");e=e||[],n=n||[];var o=e[0],a=e[1],s=e[e.length-1],u=e[e.length-2],c=n[0],l=n[1],h=n[n.length-1],f=n[n.length-2];!1===r?(E(o),E(c)):j(o,a)&&(r?(E(a),E(l)):(E(o),E(c))),!1===i?(E(s),E(h)):j(u,s)&&(i?(E(u),E(f)):(E(s),E(h)))}}function E(t){t&&(t.ignore=!0)}function j(t,e,n){var r=t&&t.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(r&&i){var o=m.identity([]);return m.rotate(o,o,-t.rotation),r.applyTransform(m.mul([],o,t.getLocalTransform())),i.applyTransform(m.mul([],o,e.getLocalTransform())),r.intersect(i)}}function D(t){return"middle"===t||"center"===t}function M(t,e,n,r,i){for(var o=[],a=[],s=[],u=0;u<t.length;u++){var l=t[u].coord;a[0]=l,a[1]=0,s[0]=l,s[1]=n,e&&(y(a,a,e),y(s,s,e));var h=new c.Line({anid:i+"_"+t[u].tickValue,subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:r,z2:2,silent:!0});o.push(h)}return o}function N(t,e,n){var r=e.axis,i=e.getModel("axisTick");if(i.get("show")&&!r.scale.isBlank()){for(var a=i.getModel("lineStyle"),s=n.tickDirection*i.get("length"),u=r.getTicksCoords(),c=M(u,t._transform,s,o(a.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),"ticks"),l=0;l<c.length;l++)t.group.add(c[l]);return c}}function I(t,e,n){var r=e.axis,i=e.getModel("minorTick");if(i.get("show")&&!r.scale.isBlank()){var a=r.getMinorTicksCoords();if(a.length)for(var s=i.getModel("lineStyle"),u=n.tickDirection*i.get("length"),c=o(s.getLineStyle(),o(e.getModel("axisTick").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})),l=0;l<a.length;l++)for(var h=M(a[l],t._transform,u,c,"minorticks_"+l),f=0;f<h.length;f++)t.group.add(h[f])}}function R(t,e,n){var r=e.axis,o=i(n.axisLabelShow,e.get("axisLabel.show"));if(o&&!r.scale.isBlank()){var a=e.getModel("axisLabel"),u=a.get("margin"),h=r.getViewLabels(),f=(i(n.labelRotate,a.get("rotate"))||0)*w/180,d=C(n.rotation,f,n.labelDirection),p=e.getCategories&&e.getCategories(!0),g=[],m=A(e),v=e.get("triggerEvent");return s(h,(function(i,o){var s=i.tickValue,h=i.formattedLabel,f=i.rawLabel,y=a;p&&p[s]&&p[s].textStyle&&(y=new l(p[s].textStyle,a,e.ecModel));var b=y.getTextColor()||e.get("axisLine.lineStyle.color"),x=r.dataToCoord(s),w=[x,n.labelOffset+n.labelDirection*u],_=new c.Text({anid:"label_"+s,position:w,rotation:d.rotation,silent:m,z2:10});c.setTextStyle(_.style,y,{text:h,textAlign:y.getShallow("align",!0)||d.textAlign,textVerticalAlign:y.getShallow("verticalAlign",!0)||y.getShallow("baseline",!0)||d.textVerticalAlign,textFill:"function"===typeof b?b("category"===r.type?f:"value"===r.type?s+"":s,o):b}),v&&(_.eventData=S(e),_.eventData.targetType="axisLabel",_.eventData.value=f),t._dumbGroup.add(_),_.updateTransform(),g.push(_),t.group.add(_),_.decomposeTransform()})),g}}var F=_;t.exports=F},fb05:function(t,e,n){var r=n("6d8b"),i=r.each,o=r.isArray,a=r.isObject,s=n("26e1"),u=n("e0d3"),c=u.normalizeToArray;function l(t,e){e=e.split(",");for(var n=t,r=0;r<e.length;r++)if(n=n&&n[e[r]],null==n)break;return n}function h(t,e,n,r){e=e.split(",");for(var i,o=t,a=0;a<e.length-1;a++)i=e[a],null==o[i]&&(o[i]={}),o=o[i];(r||null==o[e[a]])&&(o[e[a]]=n)}function f(t){i(d,(function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])}))}var d=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],p=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];function g(t,e){s(t,e),t.series=c(t.series),i(t.series,(function(t){if(a(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e)null!=t.clockWise&&(t.clockwise=t.clockWise);else if("gauge"===e){var n=l(t,"pointer.color");null!=n&&h(t,"itemStyle.color",n)}f(t)}})),t.dataRange&&(t.visualMap=t.dataRange),i(p,(function(e){var n=t[e];n&&(o(n)||(n=[n]),i(n,(function(t){f(t)})))}))}t.exports=g},fb6a:function(t,e,n){"use strict";var r=n("23e7"),i=n("861d"),o=n("e8b5"),a=n("23cb"),s=n("50c4"),u=n("fc6a"),c=n("8418"),l=n("b622"),h=n("1dde"),f=n("ae40"),d=h("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),g=l("species"),m=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!d||!p},{slice:function(t,e){var n,r,l,h=u(this),f=s(h.length),d=a(t,f),p=a(void 0===e?f:e,f);if(o(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?i(n)&&(n=n[g],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(h,d,p);for(r=new(void 0===n?Array:n)(v(p-d,0)),l=0;d<p;d++,l++)d in h&&c(r,l,h[d]);return r.length=l,r}})},fbc0:function(t,e,n){"use strict";var r=n("f9a1"),i=/^ms-/;function o(t){return r(t).replace(i,"-ms-")}t.exports=o},fc6a:function(t,e,n){var r=n("44ad"),i=n("1d80");t.exports=function(t){return r(i(t))}},fd63:function(t,e,n){var r=n("42e5"),i=n("6d8b"),o=i.isFunction,a={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),i=(t.visualColorAccessPath||"itemStyle.color").split("."),a=t.get(i),s=!o(a)||a instanceof r?null:a;a&&!s||(a=t.getColorFromPalette(t.name,null,e.getSeriesCount())),n.setVisual("color",a);var u=(t.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),c=t.get(u);if(n.setVisual("borderColor",c),!e.isSeriesFiltered(t)){s&&n.each((function(e){n.setItemVisual(e,"color",s(t.getDataParams(e)))}));var l=function(t,e){var n=t.getItemModel(e),r=n.get(i,!0),o=n.get(u,!0);null!=r&&t.setItemVisual(e,"color",r),null!=o&&t.setItemVisual(e,"borderColor",o)};return{dataEach:n.hasItemOption?l:null}}}};t.exports=a},fd90:function(t,e,n){const r=n("bbfd"),i=n("3fce"),o=(t,e,n)=>{let o=null,a=null,s=null;try{s=new i(e,n)}catch(u){return null}return t.forEach(t=>{s.test(t)&&(o&&1!==a.compare(t)||(o=t,a=new r(o,n)))}),o};t.exports=o},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fe21:function(t,e,n){var r=n("e86a"),i=n("2306"),o=["textStyle","color"],a={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(o):null)},getFont:function(){return i.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return r.getBoundingRect(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}};t.exports=a},fea9:function(t,e,n){var r=n("da84");t.exports=r.Promise},ffd6:function(t,e,n){var r=n("3729"),i=n("1310"),o="[object Symbol]";function a(t){return"symbol"==typeof t||i(t)&&r(t)==o}t.exports=a}}]);
//# sourceMappingURL=chunk-vendors.caa0fec0.js.map